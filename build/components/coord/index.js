define("components/coord/index",["../../chart","canvax"],function(t,o,i){"use strict";var e,n=this&&this.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])},function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)});o.__esModule=!0;var s=t("../../chart"),r=t("canvax").default._,h=function(t){function o(o,i,e,n,s){var r=t.call(this,o,i,e)||this;return r.graphsMap=n,r.componentsMap=s,r.dataFrame=r.initData(r._data,e),r._graphs=[],r}return n(o,t),o.prototype.setDefaultOpts=function(t){return t},o.prototype.draw=function(t){if(!t&&(t=this._opt),t.resize||(t.graphs&&(t.graphs=r.flatten([t.graphs])),r.extend(!0,this,this.setDefaultOpts(t))),this._opt.theme){r.isArray(this._opt.theme)||(this._opt.theme=[this._opt.theme]);var o=new this.componentsMap.theme(this._opt.theme,this);this._theme=o.get()}this.initModule(t),this.initComponents(t),this._coord&&this._coord.horizontal&&this.drawBeginHorizontal&&this.drawBeginHorizontal(),this.startDraw(t),this._coord&&this._coord.horizontal&&this.drawEndHorizontal&&this.drawEndHorizontal()},o.prototype.initModule=function(t){var o=this;this.CoordComponents&&(this._coord=new this.CoordComponents(this.coord,this),this.coordSprite.addChild(this._coord.sprite)),r.each(this.graphs,function(t){var i=new o.graphsMap[t.type](t,o);o._graphs.push(i),o.graphsSprite.addChild(i.sprite)})},o.prototype.startDraw=function(t){var o=this;!t&&(t={});this._coord;var i=this.width-this.padding.left-this.padding.right,e=this.height-this.padding.top-this.padding.bottom,n={x:this.padding.left,y:this.padding.top};if(this._coord&&(this._coord.draw(t),i=this._coord.width,e=this._coord.height,n=this._coord.origin),0!=this.dataFrame.length){var s=this._graphs.length,h=0;t=r.extend(t,{width:i,height:e,origin:n}),r.each(this._graphs,function(i){i.on("complete",function(t){++h==s&&o.fire("complete"),i.inited=!0}),i.draw(t)}),this.drawComponents(t),this.bindEvent()}else o.fire("complete")},o.prototype._resetData=function(t){var o=this;this._coord&&this._coord.resetData(this.dataFrame,t),r.each(this._graphs,function(i){i.resetData(o.dataFrame,t)}),this.componentsReset(t)},o.prototype.show=function(t,o){this._coord.addField(t,o),r.each(this._graphs,function(i){i.show(t,o)})},o.prototype.hide=function(t,o){this._coord.removeField(t,o),r.each(this._graphs,function(i){i.hide(t,o)})},o.prototype.bindEvent=function(){var t=this;this.on("panstart mouseover",function(o){var i=t.getComponentById("tips");i&&(t.setTipsInfo.apply(t,[o]),i.show(o),t._tipsPointerAtAllGraphs(o))}),this.on("panmove mousemove",function(o){var i=t.getComponentById("tips");i&&(t.setTipsInfo.apply(t,[o]),i.move(o),t._tipsPointerAtAllGraphs(o))}),this.on("panend mouseout",function(o){var i=t.getComponentById("tips");!i||o.toTarget&&t._coord&&t._coord.induce&&t._coord.induce.containsPoint(t._coord.induce.globalToLocal(o.target.localToGlobal(o.point)))||(i.hide(o),t._tipsPointerHideAtAllGraphs(o))}),this.on("tap",function(o){var i=t.getComponentById("tips");i&&(i.hide(o),t.setTipsInfo.apply(t,[o]),i.show(o),t._tipsPointerAtAllGraphs(o))})},o.prototype.setTipsInfo=function(t){if(t.eventInfo||(t.eventInfo={}),!t.eventInfo.nodes||!t.eventInfo.nodes.length){var o=[];r.each(this._graphs,function(i){o=o.concat(i.getNodesAt(t))}),t.eventInfo.nodes=o}},o.prototype._tipsPointerAtAllGraphs=function(t){r.each(this._graphs,function(o){o.tipsPointerOf(t)})},o.prototype._tipsPointerHideAtAllGraphs=function(t){r.each(this._graphs,function(o){o.tipsPointerHideOf(t)})},o}(s.default);o.default=h});