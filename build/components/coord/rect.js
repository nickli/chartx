define("components/coord/rect",["./index","canvax","./ui_rect/index"],function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});e.__esModule=!0;var r=t("./index"),a=t("canvax"),f=t("./ui_rect/index"),d=a.default._,c=function(t){function e(e,o,n,i,r){var a=t.call(this,e,o,n,i,r)||this;return a.CoordComponents=f.default,a._coord=null,a}return i(e,t),e.prototype.setDefaultOpts=function(t){if(this.coord={xAxis:{layoutType:"rule",posParseToInt:!1}},(t=d.clone(t)).coord.yAxis){var e=[];d.each(d.flatten([t.coord.yAxis]),function(t){e.push(d.clone(t))}),t.coord.yAxis=e}else t.coord.yAxis=[];if(t.graphs)for(var o=0;o<t.graphs.length;o++){var n=t.graphs[o];if("bar"==n.type&&(this.coord.xAxis.layoutType="peak"),n.field){var i="left";"right"==n.yAxisAlign&&(i="right");var r=null;(r=d.find(t.coord.yAxis,function(t,e){return t.align==i||!t.align&&e==("left"==i?0:1)}))?r.align||(r.align=i):(r={align:i,field:[]},t.coord.yAxis.push(r)),r.field?d.isArray(r.field)||(r.field=[r.field]):r.field=[],d.isArray(n.field)?r.field=r.field.concat(n.field):r.field.push(n.field)}else t.graphs.splice(o--,1)}var a=[],f=[];return d.each(t.coord.yAxis,function(t,e){t.align||(t.align=e?"right":"left"),"left"==t.align?a.push(t):f.push(t)}),t.coord.yAxis=a.concat(f),t},e.prototype.drawBeginHorizontal=function(){var t=this.padding,e=t.top;t.top=t.right,t.right=t.bottom,t.bottom=t.left,t.left=e},e.prototype.drawGraphsEnd=function(){this._coord.drawGraphsEnd()},e.prototype.drawEndHorizontal=function(){var t=this,e=t.graphsSprite.context;e.x+=(t.width-t.height)/2,e.y+=(t.height-t.width)/2,e.rotation=90,e.rotateOrigin={x:t.height/2,y:t.width/2},d.each(t._graphs,function(t){!function t(e){if(e.children&&d.each(e.children,function(e){t(e)}),"text"==e.type){var o=e.context;o.width,o.height,o.rotation=o.rotation-90}}(t.sprite)})},e.prototype.getLegendData=function(){var t=this,e=[];return d.each(d.flatten(t._coord.fieldsMap),function(o,n){var i=!1;d.each(t.graphs,function(t){if(d.indexOf(d.flatten([t.field]),o.field)>-1)return i=!0,!1}),i&&e.push({enabled:o.enabled,name:o.field,field:o.field,ind:o.ind,color:o.color,yAxis:o.yAxis})}),e},e.prototype.setTipsInfo=function(t){if(t.eventInfo=this._coord.getTipsInfoHandler(t),!t.eventInfo.nodes||!t.eventInfo.nodes.length){var e=[],o=t.eventInfo.xAxis.ind;d.each(this._graphs,function(t){e=e.concat(t.getNodesAt(o))}),t.eventInfo.nodes=e}},e}(r.default);e.default=c});