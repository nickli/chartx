define("components/graphs/line/index",["canvax","./group","../index"],function(t,i,e){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},function(t,i){function e(){this.constructor=t}o(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});i.__esModule=!0;var a=t("canvax"),n=t("./group"),s=t("../index"),p=a.default._,d=(a.default.Shapes.Rect,function(t){function i(i,e){var o=t.call(this,i,e)||this;return o.type="line",o.yAxisAlign="left",o.field=null,o.enabledField=null,o.groups=[],p.extend(!0,o,i),o.init(o._opt),o}return r(i,t),i.prototype.init=function(t){t.yAxisAlign&&(this.yAxisAlign=t.yAxisAlign),this.sprite=new a.default.Display.Sprite},i.prototype.draw=function(t){return!t&&(t={}),this.width=t.width,this.height=t.height,p.extend(!0,this.origin,t.origin),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this.data=this._trimGraphs(),this._setGroupsForYfield(this.data,null,t),this.animation&&!t.resize?this.grow():this.fire("complete"),this},i.prototype.resetData=function(t,i){var e=this;t&&(e.dataFrame=t,e.data=e._trimGraphs()),p.each(e.groups,function(t){t.resetData(e.data[t.field].data,i)})},i.prototype.setEnabledField=function(){this.enabledField=this.root._coord.getEnabledFields(this.field)},i.prototype._trimGraphs=function(){var t=this,i=this.root._coord,e={};t.setEnabledField();var o="right"==this.yAxisAlign?i._yAxisRight:i._yAxisLeft;return p.each(p.flatten(t.enabledField),function(i,r){var a=t.root._coord.getFieldMapOf(i),n=t.dataFrame.getFieldData(i);if(n){for(var s=[],d=0,h=n.length;d<h;d++){var u=(t.root._coord?t.root._coord._xAxis:t.root._xAxis).getPosX({ind:d,dataLen:h,layoutType:t.root._coord?t.root._coord.xAxis.layoutType:t.root._xAxis.layoutType}),l=p.isNumber(Number(n[d]))?o.getYposFromVal(Number(n[d])):void 0,f={type:"line",iGroup:r,iNode:d,field:i,value:n[d],x:u,y:l,rowData:t.dataFrame.getRowData(d),color:a.color};s.push(f)}e[i]={yAxis:o,field:i,data:s}}}),e},i.prototype.grow=function(t){var i=0,e=this.groups.length,o=this;return p.each(this.groups,function(r,a){r._grow(function(){i++,t&&t(r),i==e&&o.fire("complete")})}),this},i.prototype.show=function(t){var i=this;-1!=p.indexOf(p.flatten([i.field]),t)&&(this.data=this._trimGraphs(),this._setGroupsForYfield(this.data,t),p.each(this.groups,function(t,e){t.resetData(i.data[t.field].data)}))},i.prototype.hide=function(t){var i=this,e=i.getGroupIndex(t);!this.groups.length||e<0||(this.groups.splice(e,1)[0].destroy(),this.data=this._trimGraphs(),p.each(this.groups,function(t,e){t.resetData(i.data[t.field].data)}))},i.prototype.getGroupIndex=function(t){for(var i=-1,e=0,o=this.groups.length;e<o;e++)if(this.groups[e].field===t){i=e;break}return i},i.prototype.getGroup=function(t){return this.groups[this.getGroupIndex(t)]},i.prototype._setGroupsForYfield=function(t,i,e){var o=this;!e&&(e={}),i&&(i=p.flatten([i]));var r=p.flatten([this.field]);p.each(t,function(t,a){if(!i||-1!=p.indexOf(i,a)){var s=o.root._coord.getFieldMapOf(a),d=p.indexOf(r,a),h=new n.default(s,d,o._opt,o.ctx,o.height,o.width);h.draw({animation:o.animation&&!e.resize},t.data);for(var u=!1,l=0,f=o.groups.length;l<f;l++)if(d<o.groups[l].iGroup){o.groups.splice(l,0,h),u=!0,o.sprite.addChildAt(h.sprite,l);break}u||(o.groups.push(h),o.sprite.addChild(h.sprite))}})},i.prototype.getNodesAt=function(t){var i=[];return p.each(this.groups,function(e){var o=e.getNodeInfoAt(t);o&&i.push(o)}),i},i}(s.default));i.default=d});