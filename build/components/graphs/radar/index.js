define("components/graphs/radar/index",["canvax","../index"],function(t,e,o){"use strict";var i,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});e.__esModule=!0;var r=t("canvax"),a=t("../index"),l=r.default.Shapes.Polygon,s=r.default.Shapes.Circle,c=r.default._,d=function(t){function e(e,o){var i=t.call(this,e,o)||this;return i.type="radar",i.field=null,i.enabledField=null,i.line={shapeType:"brokenLine",enabled:!0,lineWidth:2,strokeStyle:null},i.area={shapeType:"path",enabled:!0,fillStyle:null,fillAlpha:.1},i.icon={enabled:!0,shapeType:"circle",radius:4,strokeStyle:"#ffffff",lineWidth:1},i.groups={},c.extend(!0,i,e),i.init(),i}return n(e,t),e.prototype.init=function(){this.sprite=new r.default.Display.Sprite({id:"graphsEl"})},e.prototype.draw=function(t){!t&&(t={});c.extend(!0,this,t),this.data=this._trimGraphs(),this._widget(),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this.fire("complete")},e.prototype._widget=function(){var t=this,e=this.root._coord,o=0;c.each(this.data,function(i,n){var r={},a=[];c.each(i,function(t,e){a.push([t.point.x,t.point.y])});var d=e.getFieldMapOf(n),p=t._getStyle(t.line.strokeStyle,o,d.color,d),f={pointList:a,cursor:"pointer"};t.line.enabled&&(f.lineWidth=t.line.lineWidth,f.strokeStyle=p),t.area.enabled&&(f.fillStyle=t._getStyle(t.area.fillStyle,o,d.color,d),f.fillAlpha=t._getStyle(t.area.fillAlpha,o,1,d));var u=new l({hoverClone:!1,context:f});if(r.area=u,t.sprite.addChild(u),u.on("panstart mouseover panmove mousemove panend mouseout tap click dblclick",function(e){"mouseover"==e.type&&(this.context.fillAlpha+=.2),"mouseout"==e.type&&(this.context.fillAlpha-=.2),t.fire(e.type,e),t.root.fire(e.type,e)}),t.icon.enabled){var h=[];c.each(i,function(e,o){a.push([e.point.x,e.point.y]);var i=new s({context:{cursor:"pointer",x:e.point.x,y:e.point.y,r:t.icon.radius,lineWidth:t.icon.lineWidth,strokeStyle:t.icon.strokeStyle,fillStyle:p}});t.sprite.addChild(i),i.iNode=o,i.nodeData=e,i._strokeStyle=p,i.on("panstart mouseover panmove mousemove panend mouseout tap click dblclick",function(e){t.fire(e.type,e),e.aAxisInd=this.iNode,e.eventInfo={nodes:[this.nodeData]},t.root.fire(e.type,e)}),h.push(i)}),r.nodes=h}t.groups[n]=r,o++})},e.prototype.tipsPointerOf=function(t){var e=this;e.tipsPointerHideOf(t),t.eventInfo&&t.eventInfo.nodes&&c.each(t.eventInfo.nodes,function(t){e.data[t.field]&&c.each(e.data[t.field],function(o,i){t.iNode==i&&e.focusOf(o)})})},e.prototype.tipsPointerHideOf=function(t){var e=this;c.each(e.data,function(t,o){c.each(t,function(t){e.unfocusOf(t)})})},e.prototype.focusOf=function(t){if(!t.focused){var e=this.groups[t.field].nodes[t.iNode];e.context.r+=1,e.context.fillStyle=this.icon.strokeStyle,e.context.strokeStyle=e._strokeStyle,t.focused=!0}},e.prototype.unfocusOf=function(t){if(t.focused){var e=this.groups[t.field].nodes[t.iNode];e.context.r-=1,e.context.fillStyle=e._strokeStyle,e.context.strokeStyle=this.icon.strokeStyle,t.focused=!1}},e.prototype.hide=function(t){},e.prototype.show=function(t){},e.prototype._trimGraphs=function(){var t=this,e=this.root._coord;this.enabledField=this.root._coord.getEnabledFields(this.field);var o={};return c.each(this.enabledField,function(i){var n=t.dataFrame.getFieldData(i),r=e.getFieldMapOf(i),a=[];c.each(e.aAxis.angleList,function(o,l){var s=Math.PI*o/180,c=e.getPointInRadianOfR(s,e.getROfNum(n[l]));a.push({field:i,iNode:l,rowData:t.dataFrame.getRowData(l),focused:!1,value:n[l],point:c,color:r.color})}),o[i]=a}),o},e.prototype._getStyle=function(t,e,o,i){var n=o;return(c.isString(t)||c.isNumber(t))&&(n=t),c.isArray(t)&&(n=t[e]),c.isFunction(t)&&(n=t(e,i)),void 0!==color&&null!==color||(color=o),n},e.prototype.getNodesAt=function(t){var e=this.data,o=[];return c.each(this.enabledField,function(i,n){if(c.isArray(i))c.each(i,function(i,n){var r=e[i][t];r&&o.push(r)});else{var r=e[i][t];r&&o.push(r)}}),o},e}(a.default);e.default=d});