define("chart",["canvax","./utils/tools","./utils/dataframe","./theme"],function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});e.__esModule=!0;var a=t("canvax"),r=t("./utils/tools"),s=t("./utils/dataframe"),p=t("./theme"),h=a.default._,d=function(t){function e(e,i,o){var n=t.call(this,e,i,o)||this;return n.Canvax=a.default,n._node=e,n._data=r.parse2MatrixData(i),n._opt=o,n.el=r.getEl(e),n.width=parseInt(n.el.offsetWidth),n.height=parseInt(n.el.offsetHeight),n.padding=n._getPadding(),n.canvax=new a.default.App({el:n.el,webGL:!1}),n.canvax.registEvent(),n.id="chartx_"+n.canvax.id,n.el.setAttribute("chart_id",n.id),n.el.setAttribute("chartx_version","2.0"),n.stage=new a.default.Display.Stage({id:"main-chart-stage"}),n.canvax.addChild(n.stage),n.setCoord_Graphs_Sp(),n._graphs=[],n.components=[],n.inited=!1,n.dataFrame=null,n._theme=h.extend([],p.default.colors),n.init.apply(n,arguments),n}return n(e,t),e.prototype.init=function(){},e.prototype.draw=function(){},e.prototype._getPadding=function(){var t=20;this._opt.coord&&"padding"in this._opt.coord&&(h.isObject(this._opt.coord.padding)||(t=this._opt.coord.padding));var e={top:t,right:t,bottom:t,left:t};return this._opt.coord&&"padding"in this._opt.coord&&h.isObject(this._opt.coord.padding)&&(e=h.extend(e,this._opt.coord.padding)),e},e.prototype.getTheme=function(t){var e=this._theme;return void 0!=t?e[t%e.length]||"#ccc":e},e.prototype.setCoord_Graphs_Sp=function(){this.coordSprite=new a.default.Display.Sprite({id:"coordSprite"}),this.stage.addChild(this.coordSprite),this.graphsSprite=new a.default.Display.Sprite({id:"graphsSprite"}),this.stage.addChild(this.graphsSprite)},e.prototype.destroy=function(){this._clean(),this.el&&(this.el.removeAttribute("chart_id"),this.el.removeAttribute("chartx_version"),this.canvax.destroy(),this.el=null),this._destroy&&this._destroy(),this.fire("destroy")},e.prototype._clean=function(){for(var t=0,e=this.canvax.children.length;t<e;t++)for(var i=this.canvax.getChildAt(t),o=0,n=i.children.length;o<n;o++)i.getChildAt(o).destroy(),o--,n--;this.setCoord_Graphs_Sp(),this.components=[],this._coord=null,this._graphs=[],this.canvax.domView.innerHTML="",this.padding=this._getPadding()},e.prototype.resize=function(){var t=parseInt(this.el.offsetWidth),e=parseInt(this.el.offsetHeight);t==this.width&&e==this.height||(this.width=t,this.height=e,this.canvax.resize(),this.inited=!1,this._clean(),this.draw({resize:!0}),this.inited=!0)},e.prototype.reset=function(t,e){!t&&(t={}),h.extend(!0,this._opt,t),h.extend(!0,this,t),e&&(this._data=r.parse2MatrixData(e)),this.dataFrame=this.initData(this._data,t),this._clean(),this.draw(t)},e.prototype.resetData=function(t,e){t&&(this._data=r.parse2MatrixData(t),this.dataFrame=this.initData(this._data)),this._resetData&&this._resetData(e),this.fire("resetData")},e.prototype.initData=function(){return s.default.apply(this,arguments)},e.prototype.initComponents=function(){var t=this,e=["coord","graphs","theme"];for(var i in this._opt)if(-1==h.indexOf(e,i)){var o=this._opt[i];h.isArray(o)||(o=[o]),h.each(o,function(e){var o=t.componentsMap[i];o&&o.register&&o.register(e,t)})}},e.prototype.componentsReset=function(t){var e=this;h.each(this.components,function(i,o){t&&t.name==i.type||i.plug.reset&&i.plug.reset(e[i.type]||{},e.dataFrame)})},e.prototype.drawComponents=function(){for(var t=0,e=this.components.length;t<e;t++){var i=this.components[t];i.plug&&i.plug.draw&&i.plug.draw(),i.plug.app=this,"once"==i.type&&(this.components.splice(t,1),t--),e=this.components.length}},e.prototype.getComponentsByType=function(t){var e=[];return h.each(this.components,function(i){i.type==t&&e.push(i.plug)}),e},e.prototype.getComponentById=function(t){var e;return h.each(this.components,function(i){if(i.id==t)return e=i,!1}),e?e.plug:null},e.prototype.getGraphsByType=function(t){var e=[];return h.each(this._graphs,function(i){i.type==t&&e.push(i)}),e},e.prototype.getGraphById=function(t){var e;return h.each(this._graphs,function(i){if(i.id==t)return e=i,!1}),e},e}(a.default.Event.EventDispatcher);e.default=d});