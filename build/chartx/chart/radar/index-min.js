define("chartx/chart/radar/back",["canvax/index","canvax/shape/Isogon","canvax/shape/Circle","canvax/shape/Line"],function(a,b,c,d){var e=function(a){this.pos={x:0,y:0},this.r=0,this.yDataSection=[],this.xDataSection=[],this.strokeStyle="#e5e5e5",this.lineWidth=1,this.sprite=null,this.guidType="spider",this.outerPointList=[],this.init(a)};return e.prototype={init:function(b){_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"back"})},draw:function(a){_.deepExtend(this,a),this._widget()},setPosition:function(a,b){var c=this.sprite.context;c.x=a,c.y=b},_widget:function(){var a=this.r,e=this.sprite,f=this.yDataSection;1==f.length&&0==f[0]&&f.push(1);for(var g=_.min(f),h=_.max(f),i=0,j=f.length;j>i;i++){var k=(f[i]-g)/(h-g);if(0!=k){var l;if(l="spider"==this.guidType?new b({id:"ring_isogon_"+i,context:{x:a,y:a,r:this.r*k,n:this.xDataSection.length,strokeStyle:this.strokeStyle,lineWidth:this.lineWidth,fillStyle:"RGBA(0,0,0,0)"}}):new c({id:"ring_circle_"+i,context:{x:a,y:a,r:this.r*k,strokeStyle:this.strokeStyle,lineWidth:this.lineWidth,fillStyle:"RGBA(0,0,0,0)"}}),i==j-1){l.hover(function(){},function(){}),l.on("mousemove",function(){}),l.on("click tap",function(){});var m=l.getRect(),n=e.context;if(n.width=m.width,n.height=m.height,"spider"==this.guidType)this.outerPointList=l.context.pointList;else for(var o=f.length,p=2*Math.PI/o,q=-Math.PI/2,r=q,i=0,s=o;s>i;i++)this.outerPointList.push([a*Math.cos(r),a*Math.sin(r)]),r+=p}e.addChild(l)}}for(var t=0,u=this.outerPointList.length;u>t;t++){var v=new d({id:"line_"+t,context:{xStart:a,yStart:a,xEnd:this.outerPointList[t][0]+a,yEnd:this.outerPointList[t][1]+a,lineWidth:this.lineWidth,strokeStyle:this.strokeStyle}});e.addChild(v)}}},e}),define("chartx/chart/radar/graphs",["canvax/index","canvax/shape/Polygon","canvax/shape/Circle","canvax/animation/Tween","chartx/components/tips/tip","chartx/chart/theme"],function(a,b,c,d,e,f){var g=function(a,b,c){this.pos={x:0,y:0},this.r=0,this.data=[],this.yDataSection=[],this.xDataSection=[],this._colors=f.colors,this.fillStyle=null,this.fill={fillStyle:null,alpha:.2,hoverAlpha:.1},this.line={strokeStyle:null},this.lineWidth=2,this.node={r:5},this.smooth=!1,this.sprite=null,this.currentAngInd=null,this.tips=b,this.domContainer=c,this._tip=null,this._circlesSp=[],this.init(a)};return g.prototype={init:function(b){_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"graphsEl"}),this._tip=new e(this.tips,this.domContainer),this.sprite.addChild(this._tip.sprite)},getFillStyle:function(a,b,c){var d=null;return _.isArray(this.fillStyle)&&(d=this.fillStyle[a]),_.isFunction(this.fillStyle)&&(d=this.fillStyle(a,b,c)),d&&""!=d||(d=this._colors[a]),d},getStyle:function(a,b,c,d){var e=null;return _.isArray(a)&&(e=a[b]),_.isFunction(a)&&(e=a(b,c,d)),e||(e=this._colors[b]),e},draw:function(a,b){this.data=a,_.deepExtend(this,b),this._widget()},angOver:function(a,b){this._setCurStyle(b),this._tip.show(this._getTipsInfo(a,b))},angMove:function(a,b){this._setCurStyle(b),this._tip.move(this._getTipsInfo(a,b))},angOut:function(a){this._setCircleStyleForInd(this.currentAngInd),this.currentAngInd=null,this._tip.hide(a)},_setCurStyle:function(a){a!=this.currentAngInd&&(null!=this.currentAngInd&&this._setCircleStyleForInd(this.currentAngInd),this.currentAngInd=a,this._setCircleStyleForInd(a))},_getTipsInfo:function(a,b){return a.tipsInfo={iGroup:a.groupInd||0,iNode:b,nodesInfoList:this._getTipsInfoList(a,b)},a},_getTipsInfoList:function(a,b){var c=[],d=this;return _.each(this.data,function(a,e){c.push({value:a[b],fillStyle:d.getFillStyle(e,b,a[b])})}),c},_setCircleStyleForInd:function(a){_.each(this._circlesSp,function(b,c){var d=b.getChildAt(a);if(d){var e=d.context,f=e.fillStyle;e.fillStyle=e.strokeStyle,e.strokeStyle=f}})},setPosition:function(a,b){var c=this.sprite.context;c.x=a,c.y=b},_widget:function(){var d=this;if(0!=this.data.length){var e=this.data[0].length;if(e&&!(2>e)){var f=y=this.r,g=2*Math.PI/e,h=-Math.PI/2,i=h,j=this.yDataSection[this.yDataSection.length-1];this._circlesSp=[];for(var k=0,l=this.data.length;l>k;k++){var m=[],n=new a.Display.Sprite({id:"radarGroup_"+k}),o=new a.Display.Sprite({});this._circlesSp.push(o);for(var p=0,q=e;q>p;p++){var r=this.data[k][p];if(null!=r&&void 0!=r){var s=this.r*(r/j),t=f+s*Math.cos(i),u=y+s*Math.sin(i);m.push([t,u]),i+=g,o.addChild(new c({context:{x:t,y:u,r:this.node.r,fillStyle:this.getStyle(this.line.strokeStyle,k,p,r),strokeStyle:"#ffffff",lineWidth:this.lineWidth,globalAlpha:1}}))}}if(i=h,0!=o.children.length){var v=new b({id:"radar_bg_"+k,context:{pointList:_.clone(m),globalAlpha:this.fill.alpha,smooth:this.smooth,fillStyle:this.getStyle(this.line.strokeStyle||this.fill.fillStyle,k)}}),w=new b({id:"radar_Border_"+k,context:{pointList:_.clone(m),lineWidth:this.lineWidth,cursor:"pointer",fillStyle:"RGBA(0,0,0,0)",smooth:this.smooth,strokeStyle:this.getStyle(this.line.strokeStyle,k)}});w.groupInd=k,w.bg=v,w.hover(function(a){a.groupInd=this.groupInd,this.parent.toFront(),this.bg.context.globalAlpha+=d.fill.hoverAlpha},function(){var a=this.parent.parent.getNumChildren();this.parent.toBack(a-this.groupInd-1),this.bg.context.globalAlpha-=d.fill.hoverAlpha}),w.on("click tap",function(a){a.groupInd=this.groupInd}),n.addChild(v),n.addChild(w),n.addChild(o),this.sprite.addChild(n)}else o.destroy()}}}}},g}),define("chartx/chart/radar/xaxis",["canvax/index","canvax/shape/Isogon"],function(a,b){var c=function(a,b){this.dataOrg=[],this.dataSection=[],this.color="#000000",this.sprite=null,this.init(a,b)};return c.prototype={init:function(b,c){this.sprite=new a.Display.Sprite({id:"xAxis"}),this.dataOrg=c.org,_.deepExtend(this,b),this.dataSection=_.flatten(this.dataOrg)},draw:function(a){_.deepExtend(this,a),this.data=this._trimXAxis(),this._widget()},setPosition:function(a,b){var c=this.sprite.context;c.x=a,c.y=b},_trimXAxis:function(){var a=[],c=this.r,d=new b({context:{x:c,y:c,r:c+2,n:this.dataSection.length}}),e=this;return d.context.pointList.pop(),_.each(d.context.pointList,function(b,c){a.push({content:e.dataSection[c],x:b[0],y:b[1]})}),a},_widget:function(){var b=this;_.each(this.data,function(c){var d={x:c.x+b.r,y:c.y+b.r,fillStyle:b.color};d=_.deepExtend(d,b._getTextAlignForPoint(Math.atan2(c.y,c.x))),b.sprite.addChild(new a.Display.Text(c.content,{context:d}))})},_getTextAlignForPoint:function(a){var b="center",c="bottom";return a>-Math.PI/2&&0>a&&(b="left",c="bottom"),0==a&&(b="left",c="middle"),a>0&&a<Math.PI/2&&(b="left",c="top"),a==Math.PI/2&&(b="center",c="top"),a>Math.PI/2&&a<Math.PI&&(b="right",c="top"),(a==Math.PI||a==-Math.PI)&&(b="right",c="middle"),a>-Math.PI&&a<-Math.PI/2&&(b="right",c="bottom"),{textAlign:b,textBaseline:c}}},c}),define("chartx/chart/radar/index",["chartx/chart/index","chartx/utils/tools","./xaxis","chartx/components/yaxis/yAxis","./back","./graphs","canvax/geom/HitTestPoint","chartx/utils/dataformat"],function(a,b,c,d,e,f,g,h){var i=a.Canvax;return a.extend({init:function(a,b,c){this.r=0,this._xAxis=null,this._yAxis=null,this._back=null,this._graphs=null,this._labelH=20,_.deepExtend(this,c),this.dataFrame=this._initData(b,this)},_initData:h,_getR:function(){var a=Math.min(this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom);this.r||(this.r=a/2),this.r>a/2&&(this.r=a/2),this.r-=this._labelH},draw:function(){this.stageBg=new i.Display.Sprite({id:"bg"}),this.stageCore=new i.Display.Sprite({id:"graph"}),this.stage.addChild(this.stageBg),this.stage.addChild(this.stageCore),this._getR(),this._initModule(this,this.dataFrame),this._startDraw(),this._drawEnd();var a=this;this.stage.on("mouseover panstart",function(b){a._graphs.angOver(b,a._getCurrAng(b))}),this.stage.on("mousemove panmove",function(b){a._graphs.angMove(b,a._getCurrAng(b))}),this.stage.on("mouseout",function(b){var c=a._back.sprite.getChildById("isogon_"+(a._yAxis.dataSection.length-1)),d=a._getPointBack(b);c&&g.isInside(c,d)||a._graphs.angOut()}),this.stage.on("click tap",function(b){b.eventInfo={field:_.isArray(a.yAxis.field)?a.yAxis.field[b.groupInd]:a.yAxis.field};var c=a._getCurrAng(b);b.eventInfo.field?b.eventInfo.role={name:a._xAxis.dataSection[c],value:a._yAxis.dataOrg[b.groupInd][c]}:b.eventInfo.role=null,a._graphs.angOver(b,a._getCurrAng(b)),a.fire("click tap",b)}),this.inited=!0},_getCurrAng:function(a){var b=this._getPointBack(a),c=180*Math.atan2(b.y,b.x)/Math.PI,d=360/this._xAxis.dataSection.length;c=(360+c+90+d/2)%360;var e=parseInt(c/d);return e},_getPointBack:function(a){var b=this._back.sprite.globalToLocal(a.target.localToGlobal(a.point,this.sprite));return b.x-=this.r,b.y-=this.r,b},_initModule:function(a,b){this._xAxis=new c(a.xAxis,b.xAxis),this._yAxis=new d(a.yAxis,b.yAxis),this._back=new e(a.back),this._graphs=new f(a.graphs,a.tips,this.canvax.getDomContainer())},_startDraw:function(){var a=this.r,b={r:a,yDataSection:this._yAxis.dataSection,xDataSection:this._xAxis.dataSection};this._back.draw(b);var c=this._back.sprite.context,d=(this.width-c.width)/2,e=this.padding.top+this._labelH;this._back.setPosition(d,e),this._graphs.draw(this._yAxis.dataOrg,b),this._graphs.setPosition(d,e),this._xAxis.draw({r:a}),this._xAxis.setPosition(d,e)},_drawEnd:function(){this.stageBg.addChild(this._back.sprite),this.stageCore.addChild(this._xAxis.sprite),this.stageCore.addChild(this._graphs.sprite)}})});