define("chartx/chart/plant/graphs",["canvax/index","chartx/utils/simple-data-format","canvax/shape/Circle","chartx/chart/plant/group","canvax/shape/Sector"],function(a,b,c,d,e){var f=function(a){this.sprite=null,this.w=0,this.h=0,this.center={name:"center",r:30,fillStyle:"#70629e",fontSize:15,fontColor:"#ffffff",margin:20},this.back={fillStyle:null,strokeStyle:null,lineWidth:1,scale:[],scaleNum:3},this.groups={field:"group",data:[]},this._groups=[],this.groupLen=0,this.group={},this.coordinate=a.coordinate,this.dataFrame=a.dataFrame,_.deepExtend(this,a.options),this.init()};return f.prototype={init:function(){this.sprite=new a.Display.Sprite({id:"graphsEl"}),this.dataHandle(),window.chart=this},draw:function(){var b=this,e=this.coordinate.origin.x,f=this.coordinate.origin.y,g=this.center.r+this.center.margin;b.groupLen=this.groups.data.length,_.each(this.groups.data,function(a,c){var e=b.coordinate.maxR-b.center.margin,f=parseInt(g+e*((a.org.length-1)/(b.dataFrame.org.length-1)),10),h=new d({data:a,ind:c,groupLen:b.groupLen,coordinate:b.coordinate,options:_.extend({rRange:{start:g,to:f}},b.group)});g=h.rRange.to,b._groups.push(h),b.back.scale.push({r:h.rRange.to})}),b._drawBack(),_.each(b._groups,function(a){b.sprite.addChild(a.sprite)}),this._center=new c({context:{x:e,y:f,fillStyle:this.center.fillStyle,r:this.center.r}}),this._label=new a.Display.Text(this.center.name,{context:{x:e,y:f,fontSize:this.center.fontSize,textAlign:"center",textBaseline:"middle",fillStyle:this.center.fontColor}}),this.sprite.addChild(this._center),this.sprite.addChild(this._label)},_drawBack:function(){var a=this;if(1==a.back.scale.length){var b=(a.back.scale[0].r-a.center.r)/a.back.scaleNum;a.back.scale=[];for(var d=0;d<a.back.scaleNum;d++)a.back.scale.push({r:a.center.r+b*(d+1)})}else a.back.scaleNum=a.back.scale.length;for(var d=a.back.scale.length-1;d>=0;d--){var e=a.back.scale[d];a.sprite.addChild(new c({context:{x:a.coordinate.origin.x,y:a.coordinate.origin.y,r:e.r,lineWidth:a._getBackProp(a.back.lineWidth,d),strokeStyle:a._getBackProp(a.back.strokeStyle,d),fillStyle:a._getBackProp(a.back.fillStyle,d)}}))}},dataHandle:function(){var a=_.indexOf(this.dataFrame.fields,this.groups.field);if(a>=0){var c=this.dataFrame.org[0],d={};_.each(this.dataFrame.org,function(b,e){e&&(d[b[a]]||(d[b[a]]=[_.clone(c)]),d[b[a]].push(b))});for(var e in d)this.groups.data.push(b(d[e]))}else this.groups.data.push(this.dataFrame)},_getBackProp:function(a,b){var c=b,d=null;return _.isFunction(a)&&(d=a.apply(this,[{groupInd:c,groups:this._groups,graphs:this}])),(_.isString(a)||_.isNumber(a))&&(d=a),_.isArray(a)&&(d=a[b]),d},_coordinateTest:function(){var a=230,b=this.coordinate.getRadiansAtR(a),c=this;_.each(b,function(b){var d=new e({context:{x:c.coordinate.origin.x,y:c.coordinate.origin.y,r:a,startAngle:180*b[0].radian/Math.PI,endAngle:180*b[1].radian/Math.PI,strokeStyle:"#ccc",lineWidth:1}});c.sprite.addChild(d)})}},f});