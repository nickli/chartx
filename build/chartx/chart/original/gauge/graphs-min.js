define("chartx/chart/original/gauge/graphs",["canvax/index","canvax/shape/Sector","canvax/animation/Tween","chartx/utils/tools","canvax/shape/Circle","canvax/shape/BrokenLine","canvax/display/Text","canvax/animation/AnimationFrame"],function(a,b,c,d,e,f,g,h){var i=function(a,b){this.domRoot=b,this.w=0,this.h=0,this.maxR=0,this.dis={outAndIn:10,textAndIn:15,outSideAndOY:0},this.inSide={totalAngle:0,thickness:10,startAngle:165,endAngle:375,fillStyle:"#ffffff",globalAlpha:.2,duration:600},this.outSide={thickness:4,cR:0,startAngle:165,endAngle:375,fillStyle:"#ffffff",duration:900},this.outSideRange={sprite:null,thickness:4,startAngle:165,endAngle:375,fillStyle:"#00a8e6",duration:1200},this.leftNode={sprite:null,inNode:{r:this.outSide.thickness/2+.5,fillStyle:"#00a8e6"},outNode:{r:6,globalAlpha:.2,fillStyle:"#00a8e6"}},this.rightNode={shape:null,inNode:{r:this.outSide.thickness/2+.5,fillStyle:"#00a8e6"},outNode:{r:6,globalAlpha:.2,fillStyle:"#00a8e6"}},this.describe={count:8},this.center={title:{content:0,context:{x:0,y:-20,fillStyle:"#ffffff",fontSize:30,fontWeight:"normal",fontFamily:"Tahoma"}},subtitle:{content:"",context:{x:0,y:20,fillStyle:"#ffffff",fontSize:13,fontWeight:"normal"}}},this.sprite=null,_.deepExtend(this,a),this.init()};return i.prototype={init:function(b){_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"graphsEl"})},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},draw:function(a){var b=this;_.deepExtend(b,a),b._drawRing({onInSideComplete:function(){b._drawDescribe()}}),b._drawTitle(),b.sprite.context.x=b.pos.x,b.sprite.context.y=b.pos.y},updateTitle:function(a){var b=this,c=b.sprite.getChildById("center"),e=c.getChildAt(0),f=a.title||0;h.registTween({from:{num:e.text},to:{num:f},onUpdate:function(){e.resetText(d.numAddSymbol(parseInt(this.num)))},duration:a.duration||this.outSideRange.duration})},updateRange:function(a){var b=this,c=b.sprite.getChildById("center"),d=c.getChildAt(1),e=b.outSideRange.startAngle,f=b.outSideRange.endAngle-b.outSideRange.startAngle,g=parseInt(e+f*a.scale.start),h=parseInt(e+f*a.scale.end),i=a.subtitle.start+" - "+a.subtitle.end;i=_.isFunction(b.subtitle.format)?b.subtitle.format(a.subtitle):i,d.resetText(i),b.outSideRange.shape&&(b.outSideRange.shape.context.startAngle=g,b.outSideRange.shape.context.endAngle=h);var j=b._getRPoint(0,0,b.outSide.cR,b.outSide.cR,g),k=b._getRPoint(0,0,b.outSide.cR,b.outSide.cR,h);b.leftNode.sprite&&b.rightNode.sprite&&(b.leftNode.sprite.context.x=j.x,b.leftNode.sprite.context.y=j.y,b.rightNode.sprite.context.x=k.x,b.rightNode.sprite.context.y=k.y)},_drawRing:function(b){var c=this;c.maxR=Math.min(c.pos.y,parseInt(c.w/2));var d=new a.Display.Sprite({id:"rings"}),e=new a.Display.Sprite({id:"inSide"});d.addChild(e),c.inSide.r=c.maxR-c.dis.outAndIn,c.inSide.r0=c.maxR-c.dis.outAndIn-c.inSide.thickness;var f=c._addSector({config:{r:c.inSide.r,r0:c.inSide.r0,startAngle:c.inSide.startAngle,endAngle:c.inSide.startAngle,fillStyle:c.inSide.fillStyle,globalAlpha:c.inSide.globalAlpha},sprite:e});h.registTween({from:{num:c.inSide.startAngle},to:{num:c.inSide.endAngle},onUpdate:function(){f.context.endAngle=this.num},onComplete:function(){_.isFunction(b.onInSideComplete)&&b.onInSideComplete()},duration:c.inSide.duration});var e=new a.Display.Sprite({id:"outSide"});d.addChild(e),c.outSide.r=c.maxR,c.outSide.r0=c.maxR-c.outSide.thickness,c.outSide.cR=c.outSide.r0+c.outSide.thickness/2;var g=c._getRPoint(0,0,c.outSide.r,c.outSide.r,c.outSide.endAngle);c.dis.outSideAndOY=g.y,c.h=g.y+c.maxR;var i=c._addSector({config:{r:c.maxR,r0:c.maxR-c.outSide.thickness,startAngle:c.outSide.startAngle,endAngle:c.outSide.startAngle,fillStyle:c.outSide.fillStyle},sprite:e});h.registTween({from:{num:c.outSide.startAngle},to:{num:c.outSide.endAngle},onUpdate:function(){i.context.endAngle=this.num},duration:c.outSide.duration});var e=new a.Display.Sprite({id:"outSideRange"});d.addChild(e);var j=c._addSector({config:{r:c.maxR,r0:c.maxR-c.outSideRange.thickness,startAngle:c.outSideRange.startAngle,endAngle:c.outSideRange.startAngle,fillStyle:c.outSideRange.fillStyle},sprite:e});c.outSideRange.shape=j,h.registTween({from:{num:c.outSideRange.startAngle},to:{num:c.outSideRange.endAngle},onUpdate:function(){j.context.endAngle=this.num;var a=c._getRPoint(0,0,c.outSide.cR,c.outSide.cR,this.num);c.rightNode.sprite&&(c.rightNode.sprite.context.x=a.x,c.rightNode.sprite.context.y=a.y)},duration:c.outSideRange.duration});var k=c.outSide.startAngle,g=c._getRPoint(0,0,c.outSide.cR,c.outSide.cR,k),e=new a.Display.Sprite({id:"leftNode",xyToInt:!1});e.context.x=g.x,e.context.y=g.y,d.addChild(e),c.leftNode.sprite=e,c._addCircle({config:{r:c.leftNode.inNode.r+1.5,globalAlpha:.5},sprite:e}),c._addCircle({config:{r:c.leftNode.inNode.r,fillStyle:c.leftNode.inNode.fillStyle},sprite:e}),c._addCircle({config:{r:c.leftNode.outNode.r,fillStyle:c.leftNode.outNode.fillStyle,globalAlpha:c.leftNode.outNode.globalAlpha},sprite:e});var e=new a.Display.Sprite({id:"rightNode",xyToInt:!1});e.context.x=g.x,e.context.y=g.y,d.addChild(e),c.rightNode.sprite=e,c._addCircle({config:{r:c.rightNode.inNode.r+1.5,globalAlpha:.5},sprite:e}),c._addCircle({config:{r:c.rightNode.inNode.r,fillStyle:c.rightNode.inNode.fillStyle},sprite:e}),c._addCircle({config:{r:c.rightNode.outNode.r,fillStyle:c.rightNode.outNode.fillStyle,globalAlpha:c.rightNode.outNode.globalAlpha},sprite:e}),c.sprite.addChild(d)},_drawDescribe:function(){for(var b=this,c=new a.Display.Sprite({id:"describe"}),d=new a.Display.Sprite({id:"lines"}),e=new a.Display.Sprite({id:"txts"}),h=b.inSide.startAngle,i=b.inSide.endAngle>360?b.inSide.endAngle-360:b.inSide.endAngle,j=360-h+i,k=0,l=b.describe.count;l>k;k++){var m=_.isFunction(b.describe.format)?b.describe.format(k):null;if(m){var n=_.isNumber(m.scale)?m.scale:k/describe_data.length,o=n*j+h;if(m.line&&m.line.enabled){var p=b._getRPoint(0,0,b.inSide.r,b.inSide.r,o),q=b._getRPoint(0,0,b.inSide.r0,b.inSide.r0,o),r=new f({id:"brokenline",context:{pointList:[[p.x,p.y],[q.x,q.y]],strokeStyle:m.line.strokeStyle||"#ffffff",lineWidth:m.line.lineWidth||2,globalAlpha:0}});d.addChild(r),r.animate({globalAlpha:.6},{duration:200*k})}var s=b.inSide.r0-b.dis.textAndIn,t=b._getRPoint(0,0,s,s,o),u=new g(m.content,{context:{x:t.x,y:t.y,fillStyle:m.context.fillStyle||"#ff0000",fontSize:m.context.fontSize||10,rotation:o+90,textAlign:"center",textBaseline:"middle",globalAlpha:0,scaleX:.1,scaleY:.1}});e.addChild(u),u.animate({globalAlpha:1,scaleX:1,scaleY:1},{duration:b.outSide.duration/(l-k)})}}c.addChild(d),c.addChild(e),b.sprite.addChild(c)},_drawTitle:function(){var b=this,c=new a.Display.Sprite({id:"center"}),d=b.center.title,e=new g(d.content,{context:{x:d.context.x||0,y:d.context.y||0,fillStyle:d.context.fillStyle||"#ff0000",fontSize:d.context.fontSize||12,fontWeight:d.context.fontWeight||"normal",fontFamily:d.context.fontFamily||"Tahoma",textAlign:"center",textBaseline:"middle"}});c.addChild(e);var d=b.center.subtitle,f=new g(d.content,{context:{x:d.context.x||0,y:d.context.y||0,fillStyle:d.context.fillStyle||"#ff0000",fontSize:d.context.fontSize||12,fontWeight:d.context.fontWeight||"normal",fontFamily:d.context.fontFamily||"微软雅黑",textAlign:"center",textBaseline:"middle"}});c.addChild(f),b.sprite.addChild(c)},_getRPoint:function(a,b,c,d,e){var f=e*Math.PI/180;return{x:Math.cos(f)*c+a,y:Math.sin(f)*d+b}},_addSector:function(a){var c=a.sprite,d=a.config,e=new b({context:{x:d.x||0,y:d.y||0,r:d.r||100,r0:_.isNumber(d.r0)?d.r0:100,startAngle:_.isNumber(d.startAngle)?d.startAngle:180,endAngle:_.isNumber(d.endAngle)?d.endAngle:360,fillStyle:d.fillStyle||"#ff0000",strokeStyle:d.strokeStyle||"#000000",lineWidth:d.lineWidth||0,globalAlpha:d.globalAlpha||1}});return c.addChild(e),e},_addCircle:function(a){var b=a.sprite,c=a.config,d=new e({id:"circle",xyToInt:!1,context:{x:c.x||0,y:c.y||0,r:c.r||1,fillStyle:c.fillStyle||"#ffffff",globalAlpha:c.globalAlpha||1}});return b.addChild(d),d}},i});