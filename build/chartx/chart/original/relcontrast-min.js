define("chartx/chart/original/relcontrast",["chartx/chart/index","chartx/chart/original/relcontrast/dataformat","chartx/chart/original/relcontrast/layout","canvax/shape/Circle","canvax/shape/Line","chartx/components/tips/tip"],function(a,b,c,d,e,f){var g=a.Canvax;return a.extend({init:function(a,b,d){this.padding={top:10,right:10,bottom:10,left:10},d.padding&&_.extend(this.padding,d.padding),this.graphs={w:this.width-this.padding.left-this.padding.right,h:this.height-this.padding.top-this.padding.bottom,group:{fillStyle:["#428dbc","#cc345b"]},node:{text:{format:function(a){return a},fillStyle:"white",fontSize:12}},edge:{}},_.deepExtend(this,d),this.layout=c(this._initData(b,d),this.graphs)},draw:function(){this._initModule(),this._widget(),this.inited=!0},_initModule:function(){this.edgeSprite=new g.Display.Sprite({id:"edgeSprite",context:{x:this.padding.left,y:this.padding.top}}),this.stage.addChild(this.edgeSprite),this.nodeSprite=new g.Display.Sprite({id:"nodeSprite",context:{x:this.padding.left,y:this.padding.top}}),this.stage.addChild(this.nodeSprite),this.txtSprite=new g.Display.Sprite({id:"txtSprite",context:{x:this.padding.left,y:this.padding.top}}),this.stage.addChild(this.txtSprite),this.stageTip=new g.Display.Sprite({id:"tip"}),this.stage.addChild(this.stageTip),this._tip=new f(this.tips,this.canvax.getDomContainer()),this._tip._getDefaultContent=this._getTipDefaultContent,this.stageTip.addChild(this._tip.sprite)},_getTipDefaultContent:function(a){return a.node.node+"ï¼š"+a.node.value},_initData:b,_widget:function(){var a=this;_.each(a.layout.nodes,function(b){var c=new d({id:b.node,hoverClone:!1,context:{x:b.pos.x,y:b.pos.y,r:b.r,fillStyle:b.fillStyle,cursor:"pointer"}});c.node=b,c.hover(function(b){this.context.r++,a.circleOver(this),a._setEventInfo(b,this),a._tip.show(b)},function(){this.context.r--,a.circleOut(this),a._tip.hide()}),c.on("mousemove",function(b){a._setEventInfo(b,this),a._tip.move(b)}),c.on("click",function(b){b.node=this.node,a.fire("click",b)}),a.nodeSprite.addChild(c);var e=a.graphs.node.text,f=e.format(b.node)||b.node,h=new g.Display.Text(f,{context:{x:b.pos.x,y:b.pos.y,fillStyle:e.fillStyle,fontSize:e.fontSize,textAlign:"center",textBaseline:"middle"}});h.getTextWidth()>2*b.r&&(h.context.x="left"==b.direction?b.pos.x-b.r-3:b.pos.x+b.r+3,h.context.textAlign="left"==b.direction?"right":"left",h.context.fillStyle=b.fillStyle),a.txtSprite.addChild(h)}),_.each(a.layout.edges,function(b,c){if(b.to){var d=new e({id:c,context:{xStart:b.from.pos.x,yStart:b.from.pos.y,xEnd:b.to.pos.x,yEnd:b.to.pos.y,lineWidth:b.lineWidth,strokeStyle:b.from.fillStyle,globalAlpha:.6}});a.edgeSprite.addChild(d)}})},circleOver:function(a){var b=this;_.each(this.nodeSprite.children,function(a){a.context.globalAlpha=.2}),this.nodeSprite.getChildById(a.node.node).context.globalAlpha=1,_.each(this.edgeSprite.children,function(a){a.context.visible=!1});for(var c in b.layout.edges)if(c.indexOf(a.node.node)>=0){this.edgeSprite.getChildById(c).context.visible=!0;var d=c,e=d.replace(a.node.node,"").replace("_","");this.nodeSprite.getChildById(e).context.globalAlpha=1}},circleOut:function(a){_.each(this.nodeSprite.children,function(a){a.context.globalAlpha=1});for(var b in this.layout.edges)this.edgeSprite.getChildById(b).context.visible=!0},_setEventInfo:function(a,b){a.eventInfo={el:b,node:b.node}}})});