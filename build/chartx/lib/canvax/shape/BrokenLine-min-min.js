define("canvax/shape/BrokenLine",["canvax/display/Shape","canvax/core/Base","canvax/geom/SmoothSpline"],function(a,b,c){var d=function(a,c){var d=this;d.type="brokenline",d._drawTypeOnly="stroke",a=b.checkOpt(a),"clone"!==c&&d._initPointList(a.context),d._context=_.deepExtend({lineType:null,smooth:!1,pointList:[],smoothFilter:null},a.context),arguments.callee.superclass.constructor.apply(this,arguments)};return b.creatClass(d,a,{$watch:function(a,b,c){"pointList"==a&&this._initPointList(this.context,b,c)},_initPointList:function(a,b,d){var e=a;if(e.smooth){var f={points:e.pointList};_.isFunction(e.smoothFilter)&&(f.smoothFilter=e.smoothFilter),this._notWatch=!0;var g=c(f);b&&b.length>0&&(g[g.length-1][0]=b[b.length-1][0]),e.pointList=g,this._notWatch=!1}},draw:function(a,b){this._draw(a,b)},_draw:function(a,b){var c=b.pointList;if(!(c.length<2))if(b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType)if(b.smooth)for(var d=0,e=c.length;e>d&&d!=e-1;d++)a.moveTo(c[d][0],c[d][1]),a.lineTo(c[d+1][0],c[d+1][1]),d+=1;else{a.moveTo(c[0][0],c[0][1]);for(var f=1,g=c.length;g>f;f++){var h=c[f-1][0],i=c[f][0],j=c[f-1][1],k=c[f][1];this.dashedLineTo(a,h,j,i,k,5)}}}else{a.moveTo(c[0][0],c[0][1]);for(var f=1,g=c.length;g>f;f++)a.lineTo(c[f][0],c[f][1])}},getRect:function(a){var a=a?a:this.context;return this.getRectFormPointList(a)}}),d});