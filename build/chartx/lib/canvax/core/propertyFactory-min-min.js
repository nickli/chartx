define("canvax/core/PropertyFactory",[],function(){function a(b,d,f){function g(b,e){(!c[b]||c[b]&&"$"!==b.charAt(0))&&(d[b]=e);var g=typeof e;if("function"===g)c[b]||l.push(b);else{if(-1!==_.indexOf(i,b)||"$"===b.charAt(0)&&!f[b])return l.push(b);var m=function(c){var e,f=m.value,i=f;if(!arguments.length)return!f||"object"!==g||f instanceof Array||f.$model||f.addColorStop||(f.$parent=j,f=a(f,f),m.value=f),f;var k=typeof c;if(!h&&f!==c){!c||"object"!==k||c instanceof Array||c.addColorStop?f=c:(f=c.$model?c:a(c,c),e=f.$model),m.value=f,d[b]=e?e:f,e||j.$fire&&j.$fire(b,f,i),g!=k&&(g=k);var l=j;if(!j.$watch)for(;l.$parent;)l=l.$parent;l.$watch&&l.$watch.call(l,b,f,i)}};m.value=e,k[b]={set:m,get:m,enumerable:!0}}}var h=!0,i=b.$skipArray,j={},k={},l=_.keys(c);d=d||{},f=f||{},i=_.isArray(i)?i.concat(l):l;for(var m in b)g(m,b[m]);return j=e(j,k,l),_.forEach(l,function(a){b[a]&&("function"==typeof b[a]?j[a]=function(){b[a].apply(this,arguments)}:j[a]=b[a])}),j.$model=d,j.$accessor=k,j.hasOwnProperty=function(a){return a in j.$model},h=!1,j}function b(a,b,c){var d=a[b]&&a[b].set;return 3!==arguments.length?d():void d(c)}var c={$skipArray:0,$watch:1,$fire:2,$model:3,$accessor:4,$owner:5,$parent:7},d=Object.defineProperty;try{d({},"_",{value:"x"});var e=Object.defineProperties}catch(f){"__defineGetter__"in Object&&(d=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},e=function(a,b){for(var c in b)b.hasOwnProperty(c)&&d(a,c,b[c]);return a})}return!e&&window.VBArray&&(window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),e=function(a,c,d){a=d.slice(0),a.push("hasOwnProperty");var e="VBClass"+setTimeout("1"),f={},g=[];g.push("Class "+e,"	Private [__data__], [__proxy__]","	Public Default Function [__const__](d, p)","		Set [__data__] = d: set [__proxy__] = p","		Set [__const__] = Me","	End Function"),_.forEach(a,function(a){f[a]!==!0&&(f[a]=!0,g.push("	Public ["+a+"]"))});for(var h in c)f[h]=!0,g.push("	Public Property Let ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Set ["+h+"](val)",'		Call [__proxy__]([__data__], "'+h+'", val)',"	End Property","	Public Property Get ["+h+"]","	On Error Resume Next","		Set["+h+'] = [__proxy__]([__data__],"'+h+'")',"	If Err.Number <> 0 Then","		["+h+'] = [__proxy__]([__data__],"'+h+'")',"	End If","	On Error Goto 0","	End Property");return g.push("End Class"),g.push("Function "+e+"Factory(a, b)","	Dim o","	Set o = (New "+e+")(a, b)","	Set "+e+"Factory = o","End Function"),window.parseVB(g.join("\r\n")),window[e+"Factory"](c,b)}),window.PropertyFactory=a,a});