define("canvax/core/Base",["canvax/library/underscore",document.createElement("canvas").getContext?"":"canvax/library/flashCanvas/flashcanvas"],function(a,b){a=a||window._;var c=function(a,b){return document[a]?function(b,c,d){if(b.length)for(var e=0;e<b.length;e++)arguments.callee(b[e],c,d);else b[a](c,d,!1)}:function(a,c,d){if(a.length)for(var e=0;e<a.length;e++)arguments.callee(a[e],c,d);else a[b]("on"+c,function(){return d.call(a,window.event)})}},d={mainFrameRate:60,now:0,getEl:function(b){return a.isString(b)?document.getElementById(b):1==b.nodeType?b:b.length?b[0]:null},getOffset:function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=1;if(d.getBoundingClientRect){var i=d.getBoundingClientRect();h=(i.right-i.left)/d.clientWidth}h>1&&(f=0,g=0);var j=b.top/h+(window.pageYOffset||e&&e.scrollTop/h||d.scrollTop/h)-f,k=b.left/h+(window.pageXOffset||e&&e.scrollLeft/h||d.scrollLeft/h)-g;return{top:j,left:k}},addEvent:c("addEventListener","attachEvent"),removeEvent:c("removeEventListener","detachEvent"),_pixelCtx:null,__emptyFunc:function(){},_devicePixelRatio:window.devicePixelRatio||1,_createCanvas:function(a,b,c){var d=document.createElement("canvas");return d.style.position="absolute",d.style.width=b+"px",d.style.height=c+"px",d.style.left=0,d.style.top=0,d.setAttribute("width",b*this._devicePixelRatio),d.setAttribute("height",c*this._devicePixelRatio),d.setAttribute("id",a),d},canvasSupport:function(){return!!document.createElement("canvas").getContext},createObject:function(a,b){var c,e=Object.create;return e?c=e(a):(d.__emptyFunc.prototype=a,c=new d.__emptyFunc),c.constructor=b,c},setContextStyle:function(b,c){for(p in c)"textBaseline"!=p&&p in b&&(c[p]||a.isNumber(c[p]))&&("globalAlpha"==p?b[p]*=c[p]:b[p]=c[p])},creatClass:function(b,c,e){if(!c||!b)return b;var f,g=c.prototype;return f=d.createObject(g,b),b.prototype=a.extend(f,b.prototype),b.superclass=d.createObject(g,c),e&&a.extend(f,e),b},initElement:function(a){b&&b.initElement&&b.initElement(a)},checkOpt:function(a){return a?a&&!a.context?(a.context={},a):a:{context:{}}},_UID:0,getUID:function(){return this._UID++},createId:function(a){var b=a.charCodeAt(a.length-1);return b>=48&&57>=b&&(a+="_"),a+d.getUID()},copy:function(b,c,d){if(a.isEmpty(c))return b;for(var e in c)d&&!b.hasOwnProperty(e)&&void 0===b[e]||(b[e]=c[e]);return b},getCssOrderArr:function(a){var b,c,d,e;return"number"==typeof a?b=c=d=e=a:a instanceof Array?1===a.length?b=c=d=e=a[0]:2===a.length?(b=d=a[0],c=e=a[1]):3===a.length?(b=a[0],c=e=a[1],d=a[2]):(b=a[0],c=a[1],d=a[2],e=a[3]):b=c=d=e=0,[b,c,d,e]},setDeepExtend:function(){(function(){var b,c,d,e,f,g,h=[].slice;d=function(b){var c,e;return!a.isObject(b)||a.isFunction(b)?b:a.isDate(b)?new Date(b.getTime()):a.isRegExp(b)?new RegExp(b.source,b.toString().replace(/.*\//,"")):(e=a.isArray(b||a.isArguments(b)),c=function(a,b,c){return e?a.push(d(b)):a[c]=d(b),a},a.reduce(b,c,e?[]:{}))},g=function(b){return!(null!=b&&void 0!=b&&b.prototype!=={}.prototype&&b.prototype!==Object.prototype||!a.isObject(b)||a.isArray(b)||a.isFunction(b)||a.isDate(b)||a.isRegExp(b)||a.isArguments(b))},c=function(b){return a.filter(a.keys(b),function(a){return g(b[a])})},b=function(b){return a.filter(a.keys(b),function(c){return a.isArray(b[c])})},f=function(d,e,g){if(!e)return d;var h,i,j,k,l,m,n,o,p,q;if(null==g&&(g=20),0>=g)return a.extend(d,e);for(m=a.intersection(c(d),c(e)),i=function(a){return e[a]=f(d[a],e[a],g-1)},n=0,p=m.length;p>n;n++)l=m[n],i(l);for(k=a.intersection(b(d),b(e)),h=function(a){return e[a]},o=0,q=k.length;q>o;o++)j=k[o],h(j);return a.extend(d,e)},e=function(){var b,c,e,g;if(e=2<=arguments.length?h.call(arguments,0,g=arguments.length-1):(g=0,[]),c=arguments[g++],a.isNumber(c)||(e.push(c),c=20),e.length<=1)return e[0];if(0>=c)return a.extend.apply(this,e);for(b=e.shift();e.length>0;)b=f(b,d(e.shift()),c);return b},a.mixin({deepClone:d,isBasicObject:g,basicObjects:c,arrays:b,deepExtend:e})}).call(window)}};return d.setDeepExtend(),d});