define("canvax/event/handler/touch",["canvax/core/Base","canvax/library/hammer","canvax/event/CanvaxEvent"],function(a,b,c){var d=["pan","panstart","panmove","panend","pancancel","panleft","panright","panup","pandown","press","pressup","swipe","swipeleft","swiperight","swipeup","swipedown","tap"],e=function(){};return e.prototype={init:function(){var a=this,c=a.canvax,e=c.el;a._hammer=new b(e),_.each(d,function(b){a._hammer.on(b,function(b){c.updateRootOffset(),a.__touchHandler(b)})})},__touchHandler:function(a){var b=this,c=b.canvax;this.preventDefault?this._hammer.options.prevent_default=!0:this._hammer.options.prevent_default=!1,b.curPoints=b.__getCanvaxPointInTouchs(a);var d=b.__getChildInTouchs(b.curPoints);b.__dispatchEventInChilds(a,d)?b.curPointsTarget=d:b.__dispatchEventInChilds(a,[c]),"panstart"==a.type&&_.each(b.curPointsTarget,function(a,c){return a&&a.dragEnabled?(b._draging=!0,b._clone2hoverStage(a,c),a.context.globalAlpha=0,!1):void 0}),"panmove"==a.type&&b._draging&&_.each(b.curPointsTarget,function(c,d){c&&c.dragEnabled&&b._dragHander(a,c,d)}),"panend"==a.type&&b._draging&&(_.each(b.curPointsTarget,function(c,d){c&&c.dragEnabled&&b._dragEnd(a,c,0)}),b._draging=!1)},__getCanvaxPointInTouchs:function(a){var b=this,d=b.canvax,e=[];return _.each(a.pointers,function(a){e.push({x:c.pageX(a)-d.rootOffset.left,y:c.pageY(a)-d.rootOffset.top})}),e},__getChildInTouchs:function(a){var b=this,c=b.canvax,d=[];return _.each(a,function(a){d.push(c.getObjectsUnderPoint(a,1)[0])}),d}},e});