window.Chartx||(Chartx={_start:function(){function a(a){if(h.length>0)for(var b=0,c=h.length;c>b;b++)if(0==a.indexOf(h[b].name))return!0}for(var b,c=document.getElementsByTagName("script"),d=c.length-1;d>=0;d--){var e=c[d].getAttribute("src");if(e.indexOf("chartx/index")>=0){b=e.substr(0,e.indexOf("chartx/"));break}}var f=b.replace(/(^\s*)|(\s*$)/g,"").replace(/[^"]*(thx\/charts.+)/,"$1"),g=define,h=[{name:"canvax"},{name:"chartx"}];window.define=function(b,c,d){return"string"==typeof b&&a(b)?g(f+b,c,function(a,b,e){for(var g=[],h=0,i=c.length;i>h;h++)g.push(a(f+c[h]));e.exports=d.apply(window,g)}):g.apply(window,arguments)},Chartx._start=null,delete Chartx._start}}),Chartx._start&&Chartx._start(),define("chartx/chart/index",["canvax/index","canvax/core/Base"],function(a,b){var c=function(c,d,e){_&&!_.deepExtend&&b.setDeepExtend(),this.el=b.getEl(c),this.width=parseInt(this.el.offsetWidth),this.height=parseInt(this.el.offsetHeight),this.padding={top:10,right:10,bottom:10,left:10},this.canvax=new a({el:this.el}),this.stage=new a.Display.Stage({id:"main-chart-stage"+(new Date).getTime()}),this.canvax.addChild(this.stage),arguments.callee.superclass.constructor.apply(this,arguments),this.init.apply(this,arguments)};return c.Canvax=a,c.extend=function(a,c,d){var e=this,f=function(){e.apply(this,arguments),d&&d.apply(this,arguments)};return f.extend=e.extend,b.creatClass(f,e,a,c)},Chartx.extend=b.creatClass,b.creatClass(c,a.Event.EventDispatcher,{inited:!1,init:function(){},dataFrame:null,draw:function(){},destroy:function(){this.clean(),this.el&&(this.el.innerHTML="",this.el=null),this._destroy&&this._destroy(),this.fire("destroy")},clean:function(){for(var a=0,b=this.canvax.children.length;b>a;a++)for(var c=this.canvax.getChildAt(a),d=0,e=c.children.length;e>d;d++)c.getChildAt(d).destroy(),d--,e--},resize:function(){var a=parseInt(this.el.offsetWidth),b=parseInt(this.el.offsetHeight);(a!=this.width||b!=this.height)&&(this.clean(),this.width=a,this.height=b,this.canvax.resize(),this.inited=!1,this.draw({resize:!0}),this.inited=!0)},reset:function(a){this._reset&&this._reset(a);var b=this.dataFrame.org||[];a&&a.options&&_.deepExtend(this,a.options),a&&a.data&&(b=a.data),b&&this.resetData(b),this.clean(),this.canvax.getDomContainer().innerHTML="",this.draw()},resetData:function(a){this.dataFrame=this._initData(a)},_rotate:function(a){var b=this.width,c=this.height;this.width=c,this.height=b;var d=this;_.each(d.stage.children,function(e){e.context.rotation=a||-90,e.context.x=(b-c)/2,e.context.y=(c-b)/2,e.context.rotateOrigin.x=d.width*e.context.$model.scaleX/2,e.context.rotateOrigin.y=d.height*e.context.$model.scaleY/2})},_initData:function(a){return a}}),c}),define("chartx/chart/theme",["chartx/utils/colorformat"],function(a){var b="#ff6600",c=["#ff8533","#73ace6","#82d982","#e673ac","#cd6bed","#8282d9","#c0e650","#e6ac73","#6bcded","#73e6ac","#ed6bcd","#9966cc"],d={colors:c,brandColor:b};return d}),define("chartx/components/anchor/Anchor",["canvax/index","canvax/shape/Line","canvax/shape/Circle"],function(a,b,c){var d=function(a){this.w=0,this.h=0,this.enabled=0,this.xAxis={lineWidth:1,fillStyle:"#0088cf",lineType:"dashed"},this.yAxis={lineWidth:1,fillStyle:"#0088cf",lineType:"dashed"},this.node={enabled:1,r:2,fillStyle:"#0088cf",strokeStyle:"#0088cf",lineWidth:2},this.text={enabled:0,fillStyle:"#0088cf"},this.pos={x:0,y:0},this.cross={x:0,y:0},this.sprite=null,this._txt=null,this._circle=null,this._xAxis=null,this._yAxis=null,this.init(a)};return d.prototype={init:function(b){b&&_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"AnchorSprite"})},draw:function(a,b,c){this._xAxis=b,this._yAxis=c,this._initConfig(a),this.sprite.context.x=this.pos.x,this.sprite.context.y=this.pos.y,this.enabled&&this._widget()},show:function(){this.sprite.context.visible=!0,this._circle.context.visible=!0,this._txt&&(this._txt.context.visible=!0)},hide:function(){this.sprite.context.visible=!1,this._circle.context.visible=!1,this._txt&&(this._txt.context.visible=!1)},_initConfig:function(a){a&&_.deepExtend(this,a)},resetCross:function(a){this._xLine.context.yStart=a.y,this._xLine.context.yEnd=a.y,this._yLine.context.xStart=a.x,this._yLine.context.xEnd=a.x;var b=this.sprite.localToGlobal(a);if(this._circle.context.x=b.x,this._circle.context.y=b.y,this.text.enabled){var b=this.sprite.localToGlobal(a);this._txt.context.x=parseInt(b.x),this._txt.context.y=parseInt(b.y);var c=this._xAxis.dataSection,d=c.length,e=parseInt(a.x/this.w*(c[d-1]-c[0])+c[0]),f=this._yAxis.dataSection,g=f.length,h=parseInt((this.h-a.y)/this.h*(f[g-1]-f[0])+f[0]);this._txt.resetText("（X："+e+"，Y："+h+"）"),a.y<=20?this._txt.context.textBaseline="top":this._txt.context.textBaseline="bottom",a.x<=this._txt.getTextWidth()?this._txt.context.textAlign="left":this._txt.context.textAlign="right"}},_widget:function(){var d=this;d._xLine=new b({id:"x",context:{xStart:0,yStart:d.cross.y,xEnd:d.w,yEnd:d.cross.y,lineWidth:d.xAxis.lineWidth,strokeStyle:d.xAxis.fillStyle,lineType:d.xAxis.lineType}}),d.sprite.addChild(d._xLine),d._yLine=new b({id:"y",context:{xStart:d.cross.x,yStart:0,xEnd:d.cross.x,yEnd:d.h,lineWidth:d.yAxis.lineWidth,strokeStyle:d.yAxis.fillStyle,lineType:d.yAxis.lineType}}),this.sprite.addChild(d._yLine);var e=d.sprite.localToGlobal(d.cross);d._circle=new c({context:{x:parseInt(e.x),y:parseInt(e.y),r:d._getProp(d.node.r),fillStyle:d._getProp(d.node.fillStyle)||"#ff0000",strokeStyle:d._getProp(d.node.strokeStyle)||"#cc3300",lineWidth:d._getProp(d.node.lineWidth)||4}}),d.sprite.getStage().addChild(d._circle),d.text.enabled&&(d._txt=new a.Display.Text("",{context:{x:parseInt(e.x),y:parseInt(e.y),textAlign:"right",textBaseline:"bottom",fillStyle:d.text.fillStyle}}),d.sprite.getStage().addChild(d._txt))},_getProp:function(a){return _.isFunction(a)?a():a}},d}),define("chartx/components/back/Back",["canvax/index","canvax/shape/Line","canvax/shape/Rect","chartx/utils/tools"],function(a,b,c,d){var e=function(a){this.w=0,this.h=0,this.root=null,this.pos={x:0,y:0},this.enabled=1,this.xOrigin={enabled:1,lineWidth:1,strokeStyle:"#e6e6e6"},this.yOrigin={enabled:1,lineWidth:1,strokeStyle:"#e6e6e6",biaxial:!1},this.xAxis={enabled:1,data:[],org:null,lineType:"solid",lineWidth:1,strokeStyle:"#f0f0f0",filter:null},this.yAxis={enabled:0,data:[],xDis:0,org:null,lineType:"solid",lineWidth:1,strokeStyle:"#f0f0f0",filter:null},this.fill={fillStyle:null,alpha:null},this.sprite=null,this.xAxisSp=null,this.yAxisSp=null,this.animation=!0,this.resize=!1,this.init(a)};return e.prototype={init:function(b){_.deepExtend(this,b),this.sprite=new a.Display.Sprite},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},draw:function(a,b){this.root=b,_.deepExtend(this,a),this._widget(),this.setX(this.pos.x),this.setY(this.pos.y)},update:function(a){this.sprite.removeAllChildren(),this.draw(a)},_widget:function(){var d=this;if(this.enabled){if(d.root&&d.root._yAxis&&d.root._yAxis.dataSectionGroup){d.yGroupSp=new a.Display.Sprite,d.sprite.addChild(d.yGroupSp);for(var e=0,f=d.root._yAxis.dataSectionGroup.length;f>e;e++){var g=d.root._yAxis.yGraphsHeight/f,h=new c({context:{x:0,y:-g*e,width:d.w,height:-g,fillStyle:d.fill.fillStyle||"#000",globalAlpha:d.fill.alpha||.025*(e%2)}});d.yGroupSp.addChild(h)}}d.xAxisSp=new a.Display.Sprite,d.sprite.addChild(d.xAxisSp),d.yAxisSp=new a.Display.Sprite,d.sprite.addChild(d.yAxisSp);for(var i=d.xAxis.data,j=0,k=i.length;k>j;j++){var l=i[j],m=new b({id:"back_line_"+j,context:{xStart:0,yStart:l.y,xEnd:0,yEnd:l.y,lineType:d.xAxis.lineType,lineWidth:d.xAxis.lineWidth,strokeStyle:d.xAxis.strokeStyle}});d.xAxis.enabled&&(_.isFunction(d.xAxis.filter)&&d.xAxis.filter.apply(m,[{layoutData:d.yAxis.data,index:j,line:m},d]),d.xAxisSp.addChild(m),this.animation&&!this.resize?m.animate({xStart:0,xEnd:d.w},{duration:500,delay:80*(k-j),id:m.id}):(m.context.xStart=0,m.context.xEnd=d.w))}for(var i=d.yAxis.data,j=0,k=i.length;k>j;j++){var l=i[j],m=new b({context:{xStart:l.x,yStart:0,xEnd:l.x,yEnd:-d.h,lineType:d.yAxis.lineType,lineWidth:d.yAxis.lineWidth,strokeStyle:d.yAxis.strokeStyle,visible:l.x?!0:!1}});d.yAxis.enabled&&(_.isFunction(d.yAxis.filter)&&d.yAxis.filter.apply(m,[{layoutData:d.xAxis.data,index:j,line:m},d]),d.yAxisSp.addChild(m))}var n=null==d.yAxis.org?0:_.find(d.yAxis.data,function(a){return a.content==d.yAxis.org}).x,m=new b({context:{xStart:n,xEnd:n,yEnd:-d.h,lineWidth:d.yOrigin.lineWidth,strokeStyle:d.yOrigin.strokeStyle}});if(d.yOrigin.enabled&&d.sprite.addChild(m),d.yOrigin.biaxial){var o=new b({context:{xStart:d.w,xEnd:d.w,yEnd:-d.h,lineWidth:d.yOrigin.lineWidth,strokeStyle:d.yOrigin.strokeStyle}});d.yOrigin.enabled&&d.sprite.addChild(o)}var p=null==d.xAxis.org?0:_.find(d.xAxis.data,function(a){return a.content==d.xAxis.org}).y,m=new b({context:{yStart:p,xEnd:d.w,yEnd:p,lineWidth:d.xOrigin.lineWidth,strokeStyle:d.xOrigin.strokeStyle}});d.xOrigin.enabled&&d.sprite.addChild(m)}}},e}),define("chartx/components/datazoom/index",["canvax/index","canvax/shape/Rect","canvax/shape/Line"],function(a,b,c){var d=function(a){this.range={start:0,end:1,max:"",min:1},this.count=1,this.pos={x:0,y:0},this.left={eventEnabled:!0},this.right={eventEnabled:!0},this.center={fillStyle:"#ffffff",globalAlpha:0},this.w=0,this.h=40,this.color="#008ae6",this.bg={enabled:!0,fillStyle:"",strokeStyle:"#e6e6e6",lineWidth:1},this.underline={enabled:!0,strokeStyle:this.color,lineWidth:2},this.dragIng=function(){},this.dragEnd=function(){},a&&_.deepExtend(this,a),this.range.max||(this.range.max=this.count),this.range.end>this.count-1&&(this.range.end=this.count-1),this.disPart=this._getDisPart(),this.barAddH=8,this.barH=this.h-this.barAddH,this.barY=3,this.btnW=8,this.btnFillStyle=this.color,this._btnLeft=null,this._btnRight=null,this._underline=null,this.init()};return d.prototype={init:function(){var b=this;b.sprite=new a.Display.Sprite({id:"dataZoom",context:{x:b.pos.x,y:b.pos.y}}),b.sprite.noSkip=!0,b.dataZoomBg=new a.Display.Sprite({id:"dataZoomBg"}),b.dataZoomBtns=new a.Display.Sprite({id:"dataZoomBtns"}),b.sprite.addChild(b.dataZoomBg),b.sprite.addChild(b.dataZoomBtns),b.widget(),b._setLines()},widget:function(){var c=this;if(c.bg.enabled){var d=new b({context:{x:0,y:c.barY,width:c.w,height:c.barH,lineWidth:c.bg.lineWidth,strokeStyle:c.bg.strokeStyle,fillStyle:c.bg.fillStyle}});c.dataZoomBg.addChild(d)}c.underline.enabled&&(c._underline=c._addLine({xStart:c.range.start/c.count*c.w+c.btnW/2,yStart:c.barY+c.barH+2,xEnd:(c.range.end+1)/c.count*c.w-c.btnW/2,yEnd:c.barY+c.barH+2,lineWidth:c.underline.lineWidth,strokeStyle:c.underline.strokeStyle}),c.dataZoomBg.addChild(c._underline)),c._btnLeft=new b({id:"btnLeft",dragEnabled:c.left.eventEnabled,context:{x:c.range.start/c.count*c.w,y:c.barY-c.barAddH/2+1,width:c.btnW,height:c.barH+c.barAddH,fillStyle:c.btnFillStyle,cursor:c.left.eventEnabled&&"move"}}),c._btnLeft.on("draging",function(){this.context.y=c.barY-c.barAddH/2+1,this.context.x<0&&(this.context.x=0),this.context.x>c._btnRight.context.x-c.btnW-2&&(this.context.x=c._btnRight.context.x-c.btnW-2),c._btnRight.context.x+c.btnW-this.context.x>c.disPart.max&&(this.context.x=c._btnRight.context.x+c.btnW-c.disPart.max),c._btnRight.context.x+c.btnW-this.context.x<c.disPart.min&&(this.context.x=c._btnRight.context.x+c.btnW-c.disPart.min),c.rangeRect.context.width=c._btnRight.context.x-this.context.x-c.btnW,c.rangeRect.context.x=this.context.x+c.btnW,c._setRange()}),c._btnLeft.on("dragend",function(){c.dragEnd(c.range)}),c._btnRight=new b({id:"btnRight",dragEnabled:c.right.eventEnabled,context:{x:(c.range.end+1)/c.count*c.w-c.btnW,y:c.barY-c.barAddH/2+1,width:c.btnW,height:c.barH+c.barAddH,fillStyle:c.btnFillStyle,cursor:c.right.eventEnabled&&"move"}}),c._btnRight.on("draging",function(){this.context.y=c.barY-c.barAddH/2+1,this.context.x>c.w-c.btnW&&(this.context.x=c.w-c.btnW),this.context.x+c.btnW-c._btnLeft.context.x>c.disPart.max&&(this.context.x=c.disPart.max-(c.btnW-c._btnLeft.context.x)),this.context.x+c.btnW-c._btnLeft.context.x<c.disPart.min&&(this.context.x=c.disPart.min-(c.btnW-c._btnLeft.context.x)),c.rangeRect.context.width=this.context.x-c._btnLeft.context.x-c.btnW,c._setRange()}),c._btnRight.on("dragend",function(){c.dragEnd(c.range)}),this.rangeRect=new b({id:"btnCenter",dragEnabled:!0,context:{x:this._btnLeft.context.x+c.btnW,y:this.barY+1,width:this._btnRight.context.x-this._btnLeft.context.x-c.btnW,height:this.barH-1,fillStyle:c.center.fillStyle,globalAlpha:c.center.globalAlpha,cursor:"move"}}),this.rangeRect.on("draging",function(a){this.context.y=c.barY+1,this.context.x<c.btnW&&(this.context.x=c.btnW),this.context.x>c.w-this.context.width-c.btnW&&(this.context.x=c.w-this.context.width-c.btnW),c._btnLeft.context.x=this.context.x-c.btnW,c._btnRight.context.x=this.context.x+this.context.width,c._setRange()}),this.rangeRect.on("dragend",function(){c.dragEnd(c.range)}),this.linesLeft=new a.Display.Sprite({id:"linesLeft"}),this.left.eventEnabled&&this._addLines({sprite:this.linesLeft}),this.linesRight=new a.Display.Sprite({id:"linesRight"}),this.right.eventEnabled&&this._addLines({sprite:this.linesRight}),this.linesCenter=new a.Display.Sprite({id:"linesCenter"}),this._addLines({count:6,sprite:this.linesCenter,strokeStyle:this.btnFillStyle}),this.dataZoomBtns.addChild(this.rangeRect),this.dataZoomBtns.addChild(this.linesCenter),this.dataZoomBtns.addChild(this._btnLeft),this.dataZoomBtns.addChild(this._btnRight),this.dataZoomBtns.addChild(this.linesLeft),this.dataZoomBtns.addChild(this.linesRight)},_getDisPart:function(){var a=this;return{min:a.range.min/a.count*a.w,max:a.range.max/a.count*a.w}},_setRange:function(){var a=this,b=a._btnLeft.context.x/a.w*(a.count-1),c=(a._btnRight.context.x+a.btnW)/a.w*(a.count-1);a.range.start=b,a.range.end=c,a.dragIng(a.range),a._setLines()},_setLines:function(){var a=this,b=a.dataZoomBtns.getChildById("linesLeft"),c=a.dataZoomBtns.getChildById("linesRight"),d=a.dataZoomBtns.getChildById("linesCenter"),e=a.dataZoomBtns.getChildById("btnLeft"),f=a.dataZoomBtns.getChildById("btnRight"),g=a.dataZoomBtns.getChildById("btnCenter");b.context.x=e.context.x+(e.context.width-b.context.width)/2,b.context.y=e.context.y+(e.context.height-b.context.height)/2,c.context.x=f.context.x+(f.context.width-c.context.width)/2,c.context.y=f.context.y+(f.context.height-c.context.height)/2,d.context.x=g.context.x+(g.context.width-d.context.width)/2,d.context.y=g.context.y+(g.context.height-d.context.height)/2,a.underline.enabled&&(a._underline.context.xStart=b.context.x+a.btnW/2,a._underline.context.xEnd=c.context.x+a.btnW/2)},_addLines:function(a){for(var b=this,c=a.count||2,d=a.sprite,e=a.dis||2,f=0,g=c;g>f;f++)d.addChild(b._addLine({x:f*e,strokeStyle:a.strokeStyle||""}));d.context.width=f*e-1,d.context.height=6},_addLine:function(a){var b=a||{},d=new c({id:b.id||"",context:{x:b.x||0,y:b.y||0,xStart:b.xStart||0,yStart:b.yStart||0,xEnd:b.xEnd||0,yEnd:b.yEnd||6,lineWidth:b.lineWidth||1,strokeStyle:b.strokeStyle||"#ffffff"}});return d}},d}),define("chartx/components/legend/index",["canvax/index","canvax/shape/Circle","chartx/components/tips/tip"],function(a,b,c){var d=function(a,b){this.data=a||[],this.width=0,this.height=0,this.tag={height:20},this.enabled=!1,this.icon={r:5,lineWidth:1,fillStyle:"#999"},this.tips={enabled:!1},this.onChecked=function(){},this.onUnChecked=function(){},this._labelColor="#999",this.layoutType="h",this.sprite=null,this.init(b)};return d.prototype={init:function(b){b&&_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"LegendSprite"}),this.draw()},pos:function(a){a.x&&(this.sprite.context.x=a.x),a.y&&(this.sprite.context.y=a.y)},draw:function(a,b,c){this.enabled&&this._widget()},_showTips:function(b){if(this._hideTimer&&clearTimeout(this._hideTimer),this._hideTimer=null,!this._legendTip){this._legendTip=new a.Display.Sprite({id:"legend_tip"});var d=this.sprite.getStage();d.addChild(this._legendTip),this._tips=new c(this.tips,d.parent.getDomContainer()),this._tips._getDefaultContent=function(a){return a.field},this._legendTip.addChild(this._tips.sprite)}this._tips.show(b)},_hide:function(a){var b=this;this._hideTimer=setTimeout(function(){b._tips.hide()},300)},label:function(a){return a.field+"："+a.value},setStyle:function(a,b){var c=this;_.each(this.data,function(d,e){if(d.field==a&&b.fillStyle){d.fillStyle=b.fillStyle;var f=c.sprite.getChildById("lenend_field_"+e).getChildById("lenend_field_icon_"+e);f.context.fillStyle=b.fillStyle}})},getStyle:function(a){var b=null;return _.each(this.data,function(c,d){c.field==a&&(b=c)}),b},_widget:function(){var c=this,d=0,e=0;_.each(this.data,function(f,g){void 0==f.activate||f.activate?f.activate=!0:f.activate=!1;var h=new b({id:"lenend_field_icon_"+g,context:{x:0,y:c.tag.height/2,fillStyle:f.activate?"#ccc":f.fillStyle||c._labelColor,r:c.icon.r,cursor:"pointer"}});h.hover(function(a){c._showTips(c._getInfoHandler(a,f))},function(a){c._hide(a)}),h.on("mousemove",function(a){c._showTips(c._getInfoHandler(a,f))}),h.on("click",function(){});var i=c.label(f),j=new a.Display.Text(i,{id:"lenend_field_txt_"+g,context:{x:c.icon.r+3,y:c.tag.height/2,textAlign:"left",textBaseline:"middle",fillStyle:"#333",cursor:"pointer"}});j.hover(function(a){c._showTips(c._getInfoHandler(a,f))},function(a){c._hide(a)}),j.on("mousemove",function(a){c._showTips(c._getInfoHandler(a,f))}),j.on("click",function(){});var k=j.getTextWidth(),l=k+2*c.icon.r+20,m={height:c.tag.height};"v"==c.layoutType?(e+=c.tag.height,m.y=e,d=Math.max(d,l)):(e=c.tag.height,m.x=d,d+=l);var n=new a.Display.Sprite({id:"lenend_field_"+g,context:m});n.addChild(h),n.addChild(j),n.context.width=l,c.sprite.addChild(n),n.on("click",function(a){1==_.filter(c.data,function(a){return a.activate}).length&&f.activate||(h.context.fillStyle=f.activate?"#ccc":f.fillStyle||c._labelColor,f.activate=!f.activate,f.activate?c.onChecked(f.field):c.onUnChecked(f.field))})}),c.width=c.sprite.context.width=d,c.height=c.sprite.context.height=e},_getInfoHandler:function(a,b){return a.eventInfo={field:b.field,fillStyle:b.fillStyle},b.value&&(a.eventInfo.value=b.value),a}},d}),define("chartx/components/markline/index",["canvax/index","canvax/shape/BrokenLine","canvax/display/Sprite","canvax/display/Text"],function(a,b,c,d){var e=function(a,b){this._yAxis=b,this.w=0,this.h=0,this.field=null,this.origin={x:0,y:0},this.target=null,this.value=0,this.line={y:0,list:[],strokeStyle:"#999",lineWidth:1,smooth:!1,lineType:"dashed"},this.text={enabled:!1,content:"",fillStyle:"#999999",fontSize:12,format:null,lineType:"dashed",lineWidth:1,strokeStyle:"white"},this.filter=function(){},this._doneHandle=null,this.done=function(a){this._doneHandle=a},this.txt=null,this._line=null,a&&_.deepExtend(this,a),this.init()};return e.prototype={init:function(){var a=this;this.sprite=new c({context:{x:this.origin.x,y:this.origin.y}}),setTimeout(function(){a.widget()},10)},widget:function(){var a=this,c=new b({id:"line",context:{y:a.line.y,pointList:a.line.list,strokeStyle:a.line.strokeStyle,lineWidth:a.line.lineWidth,lineType:a.line.lineType}});if(a.sprite.addChild(c),a._line=c,a.text.enabled){var e=new d(a.text.content,{context:a.text});this.txt=e,a.sprite.addChild(e),_.isNumber(a.text.x)?(e.context.x=a.text.x,e.context.y=a.text.y):(e.context.x=this.w-e.getTextWidth(),e.context.y=a.line.y-e.getTextHeight())}a._done(),a.filter(a)},_done:function(){_.isFunction(this._doneHandle)&&this._doneHandle.apply(this,[])},reset:function(a,b){a&&_.deepExtend(this,a),this.line.y!=this._line.context.y&&this._line.animate({y:this.line.y},{duration:500,easing:"Back.Out"})}},e}),define("chartx/components/markpoint/index",["canvax/index","canvax/animation/Tween"],function(a,b){var c=function(a,c,d){this.markTarget=null,this.data=d,this.point={x:0,y:0},this.normalColor="#6B95CF",this.shapeType="droplet",this.fillStyle=null,this.strokeStyle=null,this.lineWidth=1,this.globalAlpha=.7,this.duration=800,this.easing=b.Easing.Linear.None,this.hr=8,this.vr=12,this.r=5,this.sprite=null,this.shape=null,this.iGroup=null,this.iNode=null,this.iLay=null,this._doneHandle=null,this.done=function(a){this._doneHandle=a},this.realTime=!1,this.tween=null,this.filter=function(){},"markPoint"in a&&(this.enabled=!0,_.deepExtend(this,a.markPoint)),c&&_.deepExtend(this,c),this.init()};return c.prototype={init:function(){var c=this;this.sprite=new a.Display.Sprite({context:{x:this.point.x,y:this.point.y}}),this.sprite.on("destroy",function(a){c.tween&&(c.tween.stop(),b.remove(c.tween)),c.timer&&cancelAnimationFrame(c.timer)}),setTimeout(function(){c.widget()},10)},widget:function(){switch(this._fillStyle=this._getColor(this.fillStyle,this.data),this._strokeStyle=this._getColor(this.strokeStyle,this.data),this.shapeType.toLocaleLowerCase()){case"circle":this._initCircleMark();break;case"droplet":this._initDropletMark()}},_getColor:function(a,b,c){var d=a;return _.isFunction(a)&&(d=a(b)),d&&""!=d||(d=arguments.length>=3?c:this.normalColor),d},_done:function(){this.shape.context.visible=!0,this.shapeBg&&(this.shapeBg.context.visible=!0),this.shapeCircle&&(this.shapeCircle.context.visible=!0),_.isFunction(this._doneHandle)&&this._doneHandle.apply(this,[]),_.isFunction(this.filter)&&this.filter(this)},_initCircleMark:function(){var a=this;require(["canvax/shape/Circle"],function(b){var c={r:a.r,fillStyle:a._fillStyle,lineWidth:a.lineWidth,strokeStyle:a._strokeStyle,globalAlpha:a.globalAlpha,cursor:"point",visible:!1};a.shape=new b({context:c}),a.sprite.addChild(a.shape),a._realTimeAnimate(),a._done()})},destroy:function(){this.tween&&this.tween.stop(),this.sprite.destroy()},_realTimeAnimate:function(){function a(){c.timer=requestAnimationFrame(a),b.update()}var c=this;if(c.realTime){c.shapeBg||(c.shapeBg=c.shape.clone(),c.sprite.addChildAt(c.shapeBg,0)),c.timer=null;var d=function(){c.tween=new b.Tween({r:c.r,alpha:c.globalAlpha}).to({r:3*c.r,alpha:0},c.duration).onUpdate(function(){c.shapeBg.context.r=this.r,c.shapeBg.context.globalAlpha=this.alpha}).repeat(1/0).delay(800).onComplete(function(){}).easing(c.easing).start(),a()};d()}},_initDropletMark:function(){var a=this;require(["canvax/shape/Droplet","canvax/shape/Circle"],function(b,c){var d={y:-a.vr,scaleY:-1,hr:a.hr,vr:a.vr,fillStyle:a._fillStyle,lineWidth:a.lineWidth,strokeStyle:a._strokeStyle,globalAlpha:a.globalAlpha,cursor:"point",visible:!1};a.shape=new b({hoverClone:!1,context:d}),a.sprite.addChild(a.shape);var e={y:-a.vr,x:1,r:Math.max(a.hr-6,2),fillStyle:"#fff",visible:!1};a.shapeCircle=new c({context:e}),a.sprite.addChild(a.shapeCircle),a._done()})}},c}),define("chartx/components/polar/polar",["canvax/index","canvax/shape/Path","chartx/utils/tools"],function(a,b,c){var d=function(a,b){this.w=a.w||0,this.h=a.h||0,this.origin={x:this.w/2,y:this.h/2},this.maxR=null,this.rAxis={field:null},this.tAxis={field:null},this.init(a,b)};return d.prototype={init:function(a,b){_.deepExtend(this,a),this._computeMaxR()},_computeMaxR:function(){var a,b=this.origin;if(b.x!=this.w/2||b.y!=this.h/2){var c=[b.x,this.w-b.x,b.y,this.h-b.y];a=_.max(c)}else a=Math.max(this.w/2,this.h/2);null!=this.maxR&&this.maxR<=a||(this.maxR=a)},getRadiansAtR:function(a){var b=this,c=[];if(a>this.maxR)return[];var d,e,f=this.origin,g=f.y;a>g&&(d=Math.sqrt(Math.pow(a,2)-Math.pow(g,2)),c=c.concat(this._filterPointsInRect([{x:-d,y:-g},{x:d,y:-g}])));var h=this.w-f.x;a>h&&(e=Math.sqrt(Math.pow(a,2)-Math.pow(h,2)),c=c.concat(this._filterPointsInRect([{x:h,y:-e},{x:h,y:e}])));var i=this.h-f.y;a>i&&(d=Math.sqrt(Math.pow(a,2)-Math.pow(i,2)),c=c.concat(this._filterPointsInRect([{x:d,y:i},{x:-d,y:i}])));var j=f.x;a>j&&(e=Math.sqrt(Math.pow(a,2)-Math.pow(j,2)),c=c.concat(this._filterPointsInRect([{x:-j,y:e},{x:-j,y:-e}])));var k=[];0==c.length?k.push([{point:{x:a,y:0},radian:0},{point:{x:a,y:0},radian:2*Math.PI}]):_.each(c,function(a,d){var e=d==c.length-1?0:d+1,f=c.slice(e,e+1)[0];k.push([{point:a,radian:b.getRadianInPoint(a)},{point:f,radian:b.getRadianInPoint(f)}])});for(var l=0,m=k.length;m>l;l++)this._checkArcInRect(k[l],a)||(k.splice(l,1),l--,m--);return k},_filterPointsInRect:function(a){for(var b=0,c=a.length;c>b;b++)this._checkPointInRect(a[b])||(a.splice(b,1),b--,c--);return a},_checkPointInRect:function(a){var b=this.origin,c={x:a.x+b.x,y:a.y+b.y};return!(c.x<0||c.x>this.w||c.y<0||c.y>this.h)},_checkArcInRect:function(a,b){var c=a[0],d=a[1],e=d.radian-c.radian;d.radian<c.radian&&(e=2*Math.PI+d.radian-c.radian);var f=(c.radian+e/2)%(2*Math.PI);return this._checkPointInRect(this.getPointInRadian(f,b))},getRadianInPoint:function(a){var b=2*Math.PI;return(Math.atan2(a.y,a.x)+b)%b},getPointInRadian:function(a,b){var c=Math.PI,d=Math.cos(a)*b;(a==c/2||a==3*c/2)&&(d=0);var e=Math.sin(a)*b;return a%c==0&&(e=0),{x:d,y:e}}},d}),define("chartx/components/tips/tip",["canvax/index","canvax/shape/Rect","chartx/utils/tools"],function(a,b,c){var d=function(a,b){this.enabled=!0,this.tipDomContainer=b,this.cW=0,this.cH=0,this.dW=0,this.dH=0,this.backR="5px",this.sprite=null,this.content=null,this.fillStyle="rgba(255,255,255,0.95)",this.text={fillStyle:"#999"},this.strokeStyle="#ccc",this._tipDom=null,this.offset=10,this.tipsInfo={},this.prefix=[],this.positionInRange=!1,this.init(a)};return d.prototype={init:function(b){_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"TipSprite"});var c=this;this.sprite.on("destroy",function(){c._tipDom=null})},show:function(a){if(this.enabled){this.hide();var b=a.target.getStage();this.cW=b.context.width,this.cH=b.context.height,this._initContent(a),this.setPosition(a),this.sprite.toFront()}},move:function(a){this.enabled&&(this._setContent(a),this.setPosition(a))},hide:function(){this.enabled&&(this.sprite.removeAllChildren(),this._removeContent())},setPosition:function(a){if(this._tipDom){var b=a.pos||a.target.localToGlobal(a.point),c=this._checkX(b.x+this.offset),d=this._checkY(b.y+this.offset);this._tipDom.style.cssText+=";visibility:visible;left:"+c+"px;top:"+d+"px;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"}},_initContent:function(a){this._tipDom=document.createElement("div"),this._tipDom.className="chart-tips",this._tipDom.style.cssText+="；-moz-border-radius:"+this.backR+"; -webkit-border-radius:"+this.backR+"; border-radius:"+this.backR+";background:"+this.fillStyle+";border:1px solid "+this.strokeStyle+";visibility:hidden;position:absolute;display:inline-block;*display:inline;*zoom:1;padding:6px;color:"+this.text.fillStyle+";line-height:1.5",this._tipDom.style.cssText+="; -moz-box-shadow:1px 1px 3px "+this.strokeStyle+"; -webkit-box-shadow:1px 1px 3px "+this.strokeStyle+"; box-shadow:1px 1px 3px "+this.strokeStyle+";",this.tipDomContainer.appendChild(this._tipDom),this._setContent(a)},_removeContent:function(){this._tipDom&&(this.tipDomContainer.removeChild(this._tipDom),this._tipDom=null)},_setContent:function(a){if(this._tipDom){var b=this._getContent(a);if("_hide_"===b||""===b)return void this.hide();this._tipDom.innerHTML=b,this.dW=this._tipDom.offsetWidth,this.dH=this._tipDom.offsetHeight}},_getContent:function(a){_.extend(this.tipsInfo,a.tipsInfo||a.eventInfo||{});var b=_.isFunction(this.content)?this.content(this.tipsInfo):this.content;return b||0==b||(b=this._getDefaultContent(this.tipsInfo)),b},_getDefaultContent:function(a){var b="<table style='border:none'>",d=this;return _.each(a.nodesInfoList,function(a,e){b+="<tr style='color:"+(a.color||a.fillStyle||a.strokeStyle)+"'>";var f="style='border:none;white-space:nowrap;word-wrap:normal;'",g=d.prefix[e];g?b+="<td "+f+">"+g+"：</td>":a.field&&(b+="<td "+f+">"+a.field+"：</td>"),b+="<td "+f+">"+c.numAddSymbol(a.value)+"</td></tr>"}),b+="</table>"},_checkX:function(a){if(this.positionInRange){var b=this.dW+2;0>a&&(a=0),a+b>this.cW&&(a=this.cW-b)}return a},_checkY:function(a){if(this.positionInRange){var b=this.dH+2;0>a&&(a=0),a+b>this.cH&&(a=this.cH-b)}return a}},d}),define("chartx/components/xaxis/xAxis",["canvax/index","canvax/core/Base","canvax/shape/Line","chartx/utils/tools"],function(a,b,c,d){var e=function(a,b){this.graphw=0,this.graphh=0,this.yAxisW=0,this.width=0,this.height=0,this.disY=1,this.dis=6,this.label="",this._label=null,this.line={enabled:1,width:1,height:4,strokeStyle:"#cccccc"},this.text={fillStyle:"#999",fontSize:12,rotation:0,format:null,textAlign:"center"},this.maxTxtH=0,this.pos={x:null,y:null},this.enabled=1,this.disXAxisLine=6,this.disOriginX=0,this.xGraphsWidth=0,this.dataOrg=[],this.dataSection=[],this._layoutDataSection=[],this.data=[],this.layoutData=[],this.sprite=null,this._textMaxWidth=0,this.leftDisX=0,this.filter=null,this.isH=!1,this.animation=!0,this.resize=!1,this.maxVal=null,this.minVal=null,this.xDis=0,this.layoutType="step",this.autoTrimLayout=!0,this.init(a,b)};return e.prototype={init:function(b,c){this.sprite=new a.Display.Sprite({id:"xAxisSprite"}),this.rulesSprite=new a.Display.Sprite({id:"rulesSprite"}),this.sprite.addChild(this.rulesSprite),this._initHandle(b,c)},_initHandle:function(a,b){b&&b.org&&(this.dataOrg=b.org),a&&(_.deepExtend(this,a),!a.dataSection&&this.dataOrg&&(this.dataSection=this._initDataSection(this.dataOrg))),0!=this.text.rotation&&(this.text.rotation%90==0&&(this.isH=!0),this.text.textAlign="right"),this.line.enabled||(this.line.height=1),this._layoutDataSection=this._formatDataSectionText(this.dataSection),this._setTextMaxWidth(),this._setXAxisHeight(),null==this.minVal&&(this.minVal=_.min(this.dataSection)),null==this.maxVal&&(this.maxVal=_.max(this.dataSection))},_initDataSection:function(a){return _.flatten(a)},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},reset:function(a,b){_.deepExtend(this,a),this._initHandle(a,b),this.draw()},resetData:function(a){this.sprite.removeAllChildren(),this.dataSection=[],this._initHandle(null,a),this.draw()},getIndexOfVal:function(a){for(var b,c=0,d=this.data.length;d>c;c++){var e=this.data[c];if(e.content==a){b=c;break}}return b},draw:function(a){0==this.data.length,this._getLabel(),this._initConfig(a),this.data=this._trimXAxis(this.dataSection,this.xGraphsWidth);var b=this;_.each(this.data,function(a,c){a.layoutText=b._layoutDataSection[c]}),this._trimLayoutData(),this.setX(this.pos.x),this.setY(this.pos.y),this.enabled&&this._widget(),this.resize=!1},_getLabel:function(){this.label&&""!=this.label&&(this._label=new a.Display.Text(this.label,{context:{fontSize:this.text.fontSize,textAlign:this.isH?"center":"left",textBaseline:this.isH?"top":"middle",fillStyle:this.text.fillStyle,rotation:this.isH?-90:0}}))},_initConfig:function(a){a&&_.deepExtend(this,a),this.yAxisW=Math.max(this.yAxisW,this.leftDisX),this.width=this.graphw-this.yAxisW,null==this.pos.x&&(this.pos.x=this.yAxisW+this.disOriginX),null==this.pos.y&&(this.pos.y=this.graphh-this.height),this.xGraphsWidth=parseInt(this.width-this._getXAxisDisLine()),this._label&&(this.isH?this.xGraphsWidth-=this._label.getTextHeight()+5:this.xGraphsWidth-=this._label.getTextWidth()+5),this.disOriginX=parseInt((this.width-this.xGraphsWidth)/2)},getPosX:function(a){var b=0,c=a.val,d="ind"in a?a.ind:_.indexOf(this.dataSection,c),e="dataLen"in a?a.dataLen:this.dataSection.length,f="xGraphsWidth"in a?a.xGraphsWidth:this.xGraphsWidth,g="layoutType"in a?a.layoutType:this.layoutType;return 1==e?b=f/2:("rule"==g&&(b=d/(e-1)*f),"proportion"==g&&(void 0==c&&(c=d*(this.maxVal-this.minVal)/(e-1)+this.minVal),b=f*((c-this.minVal)/(this.maxVal-this.minVal))),"peak"==g&&(b=this.xDis*(d+1)-this.xDis/2),"step"==g&&(b=f/(e+1)*(d+1))),parseInt(b,10)},_trimXAxis:function(b,c){var d=[],e=b||this.dataSection,f=f||this.xGraphsWidth;this.xDis=parseInt(f/e.length);for(var g=0,h=e.length;h>g;g++){var i=new a.Display.Text(e[g],{context:{fontSize:this.text.fontSize}}),j={content:e[g],x:this.getPosX({val:e[g],ind:g,dataLen:h,xGraphsWidth:f}),textWidth:i.getTextWidth()};d.push(j)}return d},_formatDataSectionText:function(a){a||(a=this.dataSection);var b=this,c=[];return _.each(a,function(a){c.push(b._getFormatText(a));
}),c},_getXAxisDisLine:function(){var a=this.disXAxisLine,b=2*a,c=a;return c=a+this.width%_.flatten(this.dataOrg).length,c=c>b?b:c,c=isNaN(c)?0:c},_setXAxisHeight:function(){if(this.enabled){var b=new a.Display.Text(this._layoutDataSection[0]||"test",{context:{fontSize:this.text.fontSize}});if(this.maxTxtH=b.getTextHeight(),this.text.rotation)if(this.text.rotation%90==0)this.height=this._textMaxWidth+this.line.height+this.disY+this.dis+3;else{var c=Math.sin(Math.abs(this.text.rotation)*Math.PI/180),d=Math.cos(Math.abs(this.text.rotation)*Math.PI/180);this.height=c*this._textMaxWidth+b.getTextHeight()+5,this.leftDisX=d*b.getTextWidth()+8}else this.height=this.disY+this.line.height+this.dis+this.maxTxtH,this.leftDisX=b.getTextWidth()/2}else this.dis=0,this.height=3},_getFormatText:function(a){var b;return b=_.isFunction(this.text.format)?this.text.format(a):a,_.isArray(b)&&(b=d.numAddSymbol(b)),b||(b=a),b},_widget:function(){var d=this.layoutData;this._label&&(this._label.context.x=this.xGraphsWidth+5,this.sprite.addChild(this._label));for(var e=Math.min(1e3/d.length,25),f=0,g=d.length;g>f;f++){xNodeId="xNode"+f;var h=this.rulesSprite.getChildById(xNodeId);h||(h=new a.Display.Sprite({id:xNodeId}),this.rulesSprite.addChild(h));var i=!0;void 0!==d[f].visible&&(i=d[f].visible),h.context.visible=i;var j=d[f],k=j.x,l=this.disY+this.line.height+this.dis,m={x:j.text_x||j.x,y:l+20,fillStyle:this.text.fillStyle,fontSize:this.text.fontSize,rotation:-Math.abs(this.text.rotation),textAlign:this.text.textAlign,textBaseline:this.text.rotation?"middle":"top",globalAlpha:0};if(h._txt?(h._txt.resetText(j.layoutText+""),this.animation?h._txt.animate({x:m.x},{duration:300}):h._txt.context.x=m.x):(h._txt=new a.Display.Text(j.layoutText,{id:"xAxis_txt_"+b.getUID(),context:m}),h.addChild(h._txt),this.animation&&!this.resize?h._txt.animate({globalAlpha:1,y:h._txt.context.y-20},{duration:500,easing:"Back.Out",delay:f*e,id:h._txt.id}):(h._txt.context.y=h._txt.context.y-20,h._txt.context.globalAlpha=1)),this.text.rotation&&90!=this.text.rotation&&(h._txt.context.x+=5,h._txt.context.y+=3),this.line.enabled){var n={x:k,y:this.disY,xEnd:0,yEnd:this.line.height+this.disY,lineWidth:this.line.width,strokeStyle:this.line.strokeStyle};h._line?this.animation?h._line.animate({x:n.x},{duration:300}):h._line.context.x=n.x:(h._line=new c({context:n}),h.addChild(h._line))}_.isFunction(this.filter)&&this.filter({layoutData:d,index:f,txt:h._txt,line:h._line||null})}if(this.rulesSprite.children.length>d.length)for(var g=d.length,o=this.rulesSprite.children.length;o>g;g++)this.rulesSprite.getChildAt(g).remove(),g--,o--},_setTextMaxWidth:function(){for(var b=this._layoutDataSection,c=b[0],d=0,e=b.length;e>d;d++)b[d].length>c.length&&(c=b[d]);var f=new a.Display.Text(c||"test",{context:{fillStyle:this.text.fillStyle,fontSize:this.text.fontSize}});return this._textMaxWidth=f.getTextWidth(),this._textMaxHeight=f.getTextHeight(),this._textMaxWidth},_trimLayoutData:function(){function a(e){var f=c[e];if(void 0!==f){f.visible=!0;for(var g=e;d-1>g;g++){var h=c[g+1],i=h.x-h.textWidth/2;if(g==d-2&&("center"==b.text.textAlign&&h.x+h.textWidth/2>b.width&&(i=b.width-h.textWidth,h.text_x=b.width-h.textWidth/2),"left"==b.text.textAlign&&h.x+h.textWidth>b.width&&(i=b.width-h.textWidth,h.text_x=b.width-h.textWidth)),!(i<f.x+f.textWidth/2)){a(g+1);break}if(g==d-2)return h.visible=!0,void(f.visible=!1);h.visible=!1}}}var b=this,c=this.data,d=c.length;this.text.rotation||a(0),this.layoutData=this.data}},e}),define("chartx/components/yaxis/yAxis",["canvax/index","canvax/core/Base","canvax/shape/Line","chartx/utils/tools","chartx/utils/datasection"],function(a,b,c,d,e){var f=function(a,b){this.width=null,this.enabled=1,this.dis=6,this.maxW=0,this.field=[],this.label="",this._label=null,this.line={enabled:1,width:4,lineWidth:1,strokeStyle:"#cccccc"},this.text={fillStyle:"#999",fontSize:12,format:null,rotation:0},this.pos={x:0,y:0},this.place="left",this.biaxial=!1,this.layoutData=[],this.dataSection=[],this.dataSectionGroup=[],this.middleweight=null,this.dataOrg=[],this.sprite=null,this.disYAxisTopLine=6,this.yMaxHeight=0,this.yGraphsHeight=0,this.baseNumber=null,this.basePoint=null,this.maxNumber=null,this.minNumber=null,this.filter=null,this.isH=!1,this.animation=!0,this.resize=!1,this.sort=null,this.init(a,b)};return f.prototype={init:function(b,c){_.deepExtend(this,b),0!=this.text.rotation&&this.text.rotation%90==0&&(this.isH=!0),this._initData(c),this.sprite=new a.Display.Sprite({id:"yAxisSprite"}),this.rulesSprite=new a.Display.Sprite({id:"yRulesSprite"}),this.sprite.addChild(this.rulesSprite)},setX:function(a){this.sprite.context.x=a+("left"==this.place?Math.max(this.maxW,this.width-this.pos.x-this.dis-this.line.width):0),this.pos.x=a},setY:function(a){this.sprite.context.y=a,this.pos.y=a},setAllStyle:function(a){_.each(this.rulesSprite.children,function(b){_.each(b.children,function(b){"text"==b.type?b.context.fillStyle=a:"line"==b.type&&(b.context.strokeStyle=a)})})},reset:function(a,b){this.dataSection=[],this.dataSectionGroup=[],a&&_.deepExtend(this,a),this._initData(b),this._trimYAxis(),this._widget()},_getLabel:function(){var b="";b=_.isArray(this.label)?this.label["left"==this.place?0:1]:this.label,b&&""!=b&&(this._label=new a.Display.Text(b,{context:{fontSize:this.text.fontSize,textAlign:this.place,textBaseline:this.isH?"top":"bottom",fillStyle:this.text.fillStyle,rotation:this.isH?-90:0}}))},draw:function(a){a&&_.deepExtend(this,a),this._getLabel(),this.yGraphsHeight=this.yMaxHeight-this._getYAxisDisLine(),this._label&&(this.isH?this.yGraphsHeight-=this._label.getTextWidth():this.yGraphsHeight-=this._label.getTextHeight(),this._label.context.y=-this.yGraphsHeight-5),this._trimYAxis(),this._widget(),this.setX(this.pos.x),this.setY(this.pos.y),this.resize=!1},getYposFromVal:function(a){for(var b=0,c=this.dataSectionGroup.length,d=this.yGraphsHeight/c,e=0,f=c;f>e;e++){var g=this.dataSectionGroup[e],h=_.min(g),i=_.max(g),j=g[0],k=g.slice(-1)[0];if(a>h&&i>=a||"desc"==this._getSortType()&&a>=h&&i>a){var b=-((a-j)/(k-j)*d+e*d);break}}return b=isNaN(b)?0:parseInt(b)},getValFromYpos:function(a){var b=this.layoutData[0],c=this.layoutData.slice(-1)[0],d=(c.content-b.content)*((a-b.y)/(c.y-b.y))+b.content;return d},_trimYAxis:function(){for(var a=this.dataSection[this.dataSection.length-1],b=[],c=0,d=this.dataSection.length;d>c;c++)b[c]={content:this.dataSection[c],y:this.getYposFromVal(this.dataSection[c])};this.layoutData=b;var e=-(this.baseNumber-this._bottomNumber)/(a-this._bottomNumber)*this.yGraphsHeight;e=isNaN(e)?0:parseInt(e),this.basePoint={content:this.baseNumber,y:e}},_getYAxisDisLine:function(){var a=this.disYAxisTopLine,b=2*a,c=a;return c=a+this.yMaxHeight%this.dataSection.length,c=c>b?b:c},_setDataSection:function(a){var b=[],c=a.org||a.data||a;this.biaxial?"left"==this.place?(b=_.flatten(c[0]),this.field=_.flatten([this.field[0]])):(b=_.flatten(c[1]),this.field=_.flatten([this.field[1]])):b=_.flatten(c);for(var d=0,e=b.length;e>d;d++)b[d]=b[d]||0;return b},_initData:function(a){_.isArray(this.dataSection)&&this.dataSection.length&&_.isArray(this.dataSection[0])&&(this.dataSection=this.dataSection["left"==this.place?0:1]||[]),_.isArray(this.field)||(this.field=[this.field]);var b=this._setDataSection(a);1==b.length&&b.push(2*b[0]),this.dataOrg=a.org||a.data,0==this.dataSection.length&&(this.dataSection=e.section(b,3)),0==this.dataSection.length&&(this.dataSection=[0]),this.dataSectionGroup=[_.clone(this.dataSection)],this._sort(),this._setBottomAndBaseNumber(),this._middleweight()},_sort:function(){if(this.sort){var a=this._getSortType();"desc"==a&&(this.dataSection.reverse(),_.each(this.dataSectionGroup,function(a,b){a.reverse()}),this.dataSectionGroup.reverse())}},_getSortType:function(){var a;return _.isString(this.sort)&&(a=this.sort),_.isArray(this.sort)&&(a=this.sort["left"==this.place?0:1]),a||(a="asc"),a},_setBottomAndBaseNumber:function(){if(this._bottomNumber=this.dataSection[0],null==this.baseNumber){var a=_.min(this.dataSection);this.baseNumber=a>0?a:0}},_middleweight:function(){if(this.middleweight){_.isArray(this.middleweight)||(this.middleweight=[this.middleweight]);for(var a=_.min(this.dataSection),b=_.max(this.dataSection),c=[a],d=[],e=0,f=this.middleweight.length;f>e;e++){var g=a;e>0&&(g=this.middleweight[e-1]);var h=g+parseInt((this.middleweight[e]-g)/2);c.push(h),c.push(this.middleweight[e]),d.push([g,h,this.middleweight[e]])}var i=parseInt(this.middleweight.slice(-1)[0]);c.push(i+parseInt((b-i)/2)),c.push(b),d.push([i,i+parseInt((b-i)/2),b]),this.dataSection=c,this.dataSectionGroup=d,this._sort(),this._setBottomAndBaseNumber()}},resetWidth:function(a){var b=this;b.width=a,b.line.enabled?b.sprite.context.x=a-b.dis-b.line.width:b.sprite.context.x=a-b.dis},_widget:function(){var e=this;if(!e.enabled)return void(e.width=0);var f=this.layoutData;e.maxW=0,e._label&&e.sprite.addChild(e._label);for(var g=0,h=f.length;h>g;g++){var i=f[g],j=0,k=i.y,l=i.content;_.isFunction(e.text.format)&&(l=e.text.format(l,e)),(void 0===l||null===l)&&(l=d.numAddSymbol(i.content));var m="left"==e.place?"right":"left";(90==e.text.rotation||-90==e.text.rotation)&&(m="center",g==f.length-1&&(m="right"));var n=k+(0==g?-3:0)+(g==f.length-1?3:0);(90==e.text.rotation||-90==e.text.rotation)&&(g==f.length-1&&(n=k-2),0==g&&(n=k));var o=this.rulesSprite.getChildAt(g);if(o)o._txt&&(o._txt.context.y!=n&&o._txt.animate({y:n},{duration:500,delay:80*g,id:o._txt.id}),o._txt.resetText(l)),o._line&&o._line.animate({y:k},{duration:500,delay:80*g,id:o._line.id});else{o=new a.Display.Sprite({id:"yNode"+g});var p=new a.Display.Text(l,{id:"yAxis_txt_"+b.getUID(),context:{x:j+("left"==e.place?-5:5),y:n+20,fillStyle:e._getProp(e.text.fillStyle),fontSize:e.text.fontSize,rotation:-Math.abs(this.text.rotation),textAlign:m,textBaseline:"middle",globalAlpha:0}});if(o.addChild(p),o._txt=p,e.maxW=Math.max(e.maxW,p.getTextWidth()),(90==e.text.rotation||-90==e.text.rotation)&&(e.maxW=Math.max(e.maxW,p.getTextHeight())),e.line.enabled){var q=new c({context:{x:0+("left"==e.place?1:-1)*e.dis-2,y:k,xEnd:e.line.width,yEnd:0,lineWidth:e.line.lineWidth,strokeStyle:e._getProp(e.line.strokeStyle)}});o.addChild(q),o._line=q}_.isFunction(e.filter)&&e.filter({layoutData:e.layoutData,index:g,txt:p,line:q}),e.rulesSprite.addChild(o),e.animation&&!e.resize?p.animate({globalAlpha:1,y:p.context.y-20},{duration:500,easing:"Back.Out",delay:80*(g+1),id:p.id}):(p.context.y=p.context.y-20,p.context.globalAlpha=1)}}if(e.rulesSprite.children.length>f.length)for(var h=f.length,r=e.rulesSprite.children.length;r>h;h++)e.rulesSprite.getChildAt(h).remove(),h--,r--;e.maxW+=e.dis,null==e.width&&(e.line.enabled?e.width=e.maxW+e.dis+e.line.width+e.pos.x:e.width=e.maxW+e.dis+e.pos.x)},_getProp:function(a){var b=a;return _.isFunction(a)&&(b=a.call(this,this)),a||(b="#999"),b}},f});