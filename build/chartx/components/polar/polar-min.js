define("chartx/components/polar/polar",["canvax/index","canvax/shape/Path","chartx/utils/tools"],function(a,b,c){var d=function(a,b){this.w=a.w||0,this.h=a.h||0,this.origin={x:this.w/2,y:this.h/2},this.maxR=null,this.rAxis={field:null},this.tAxis={field:null},this.init(a,b)};return d.prototype={init:function(a,b){_.deepExtend(this,a),this._computeMaxR()},_computeMaxR:function(){var a,b=this.origin;if(b.x!=this.w/2||b.y!=this.h/2){var c=[b.x,this.w-b.x,b.y,this.h-b.y];a=_.max(c)}else a=Math.max(this.w/2,this.h/2);null!=this.maxR&&this.maxR<=a||(this.maxR=a)},getRadiansAtR:function(a){var b=this,c=[];if(a>this.maxR)return[];var d,e,f=this.origin,g=f.y;a>g&&(d=Math.sqrt(Math.pow(a,2)-Math.pow(g,2)),c=c.concat(this._filterPointsInRect([{x:-d,y:-g},{x:d,y:-g}])));var h=this.w-f.x;a>h&&(e=Math.sqrt(Math.pow(a,2)-Math.pow(h,2)),c=c.concat(this._filterPointsInRect([{x:h,y:-e},{x:h,y:e}])));var i=this.h-f.y;a>i&&(d=Math.sqrt(Math.pow(a,2)-Math.pow(i,2)),c=c.concat(this._filterPointsInRect([{x:d,y:i},{x:-d,y:i}])));var j=f.x;a>j&&(e=Math.sqrt(Math.pow(a,2)-Math.pow(j,2)),c=c.concat(this._filterPointsInRect([{x:-j,y:e},{x:-j,y:-e}])));var k=[];0==c.length?k.push([{point:{x:a,y:0},radian:0},{point:{x:a,y:0},radian:2*Math.PI}]):_.each(c,function(a,d){var e=d==c.length-1?0:d+1,f=c.slice(e,e+1)[0];k.push([{point:a,radian:b.getRadianInPoint(a)},{point:f,radian:b.getRadianInPoint(f)}])});for(var l=0,m=k.length;m>l;l++)this._checkArcInRect(k[l],a)||(k.splice(l,1),l--,m--);return k},_filterPointsInRect:function(a){for(var b=0,c=a.length;c>b;b++)this._checkPointInRect(a[b])||(a.splice(b,1),b--,c--);return a},_checkPointInRect:function(a){var b=this.origin,c={x:a.x+b.x,y:a.y+b.y};return!(c.x<0||c.x>this.w||c.y<0||c.y>this.h)},_checkArcInRect:function(a,b){var c=a[0],d=a[1],e=d.radian-c.radian;d.radian<c.radian&&(e=2*Math.PI+d.radian-c.radian);var f=(c.radian+e/2)%(2*Math.PI);return this._checkPointInRect(this.getPointInRadian(f,b))},getRadianInPoint:function(a){var b=2*Math.PI;return(Math.atan2(a.y,a.x)+b)%b},getPointInRadian:function(a,b){var c=Math.PI,d=Math.cos(a)*b;(a==c/2||a==3*c/2)&&(d=0);var e=Math.sin(a)*b;return a%c==0&&(e=0),{x:d,y:e}}},d});