define("chartx/components/anchor/Anchor",["canvax/index","canvax/shape/Line","canvax/shape/Circle"],function(a,b,c){var d=function(a){this.w=0,this.h=0,this.enabled=0,this.xAxis={lineWidth:1,fillStyle:"#0088cf",lineType:"dashed"},this.yAxis={lineWidth:1,fillStyle:"#0088cf",lineType:"dashed"},this.node={enabled:1,r:2,fillStyle:"#0088cf",strokeStyle:"#0088cf",lineWidth:2},this.text={enabled:0,fillStyle:"#0088cf"},this.pos={x:0,y:0},this.cross={x:0,y:0},this.sprite=null,this._txt=null,this._circle=null,this._xAxis=null,this._yAxis=null,this.init(a)};return d.prototype={init:function(b){b&&_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"AnchorSprite"})},draw:function(a,b,c){this._xAxis=b,this._yAxis=c,this._initConfig(a),this.sprite.context.x=this.pos.x,this.sprite.context.y=this.pos.y,this.enabled&&this._widget()},show:function(){this.sprite.context.visible=!0,this._circle.context.visible=!0,this._txt&&(this._txt.context.visible=!0)},hide:function(){this.sprite.context.visible=!1,this._circle.context.visible=!1,this._txt&&(this._txt.context.visible=!1)},_initConfig:function(a){a&&_.deepExtend(this,a)},resetCross:function(a){this._xLine.context.yStart=a.y,this._xLine.context.yEnd=a.y,this._yLine.context.xStart=a.x,this._yLine.context.xEnd=a.x;var b=this.sprite.localToGlobal(a);if(this._circle.context.x=b.x,this._circle.context.y=b.y,this.text.enabled){var b=this.sprite.localToGlobal(a);this._txt.context.x=parseInt(b.x),this._txt.context.y=parseInt(b.y);var c=this._xAxis.dataSection,d=c.length,e=parseInt(a.x/this.w*(c[d-1]-c[0])+c[0]),f=this._yAxis.dataSection,g=f.length,h=parseInt((this.h-a.y)/this.h*(f[g-1]-f[0])+f[0]);this._txt.resetText("（X："+e+"，Y："+h+"）"),a.y<=20?this._txt.context.textBaseline="top":this._txt.context.textBaseline="bottom",a.x<=this._txt.getTextWidth()?this._txt.context.textAlign="left":this._txt.context.textAlign="right"}},_widget:function(){var d=this;d._xLine=new b({id:"x",context:{xStart:0,yStart:d.cross.y,xEnd:d.w,yEnd:d.cross.y,lineWidth:d.xAxis.lineWidth,strokeStyle:d.xAxis.fillStyle,lineType:d.xAxis.lineType}}),d.sprite.addChild(d._xLine),d._yLine=new b({id:"y",context:{xStart:d.cross.x,yStart:0,xEnd:d.cross.x,yEnd:d.h,lineWidth:d.yAxis.lineWidth,strokeStyle:d.yAxis.fillStyle,lineType:d.yAxis.lineType}}),this.sprite.addChild(d._yLine);var e=d.sprite.localToGlobal(d.cross);d._circle=new c({context:{x:parseInt(e.x),y:parseInt(e.y),r:d._getProp(d.node.r),fillStyle:d._getProp(d.node.fillStyle)||"#ff0000",strokeStyle:d._getProp(d.node.strokeStyle)||"#cc3300",lineWidth:d._getProp(d.node.lineWidth)||4}}),d.sprite.getStage().addChild(d._circle),d.text.enabled&&(d._txt=new a.Display.Text("",{context:{x:parseInt(e.x),y:parseInt(e.y),textAlign:"right",textBaseline:"bottom",fillStyle:d.text.fillStyle}}),d.sprite.getStage().addChild(d._txt))},_getProp:function(a){return _.isFunction(a)?a():a}},d});