var chartx=function(){"use strict";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function h(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var H=e(function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}}});t(H);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?o(t):e}var d=r(function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n}),u=r(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),f=r(function(n){function i(t,e){return n.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}n.exports=i});function c(t){var e=L(t);return"number"==typeof e&&0<=e&&e<=D}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}var b={},g={},v=Array.prototype,y=Object.prototype,x=v.push,_=v.slice,m=v.concat,w=y.toString,k=y.hasOwnProperty,S=v.forEach,A=v.map,C=v.filter,P=v.every,O=v.some,T=v.indexOf,M=Array.isArray,I=Object.keys,D=Math.pow(2,53)-1,L=function(t){return null==t?void 0:t.length};b.values=function(t){for(var e=b.keys(t),n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=t[e[a]];return i},b.keys=I||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)b.has(t,n)&&e.push(n);return e},b.has=function(t,e){return k.call(t,e)};var E=b.each=b.forEach=function(t,e,n){if(null!=t)if(S&&t.forEach===S)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,a=t.length;i<a;i++)if(e.call(n,t[i],i,t)===g)return}else{var r=b.keys(t);for(i=0,a=r.length;i<a;i++)if(e.call(n,t[r[i]],r[i],t)===g)return}};b.compact=function(t){return b.filter(t,b.identity)},b.filter=b.select=function(t,i,a){var r=[];return null==t?r:C&&t.filter===C?t.filter(i,a):(E(t,function(t,e,n){i.call(a,t,e,n)&&r.push(t)}),r)},E(["Arguments","Function","String","Number","Date","RegExp"],function(e){b["is"+e]=function(t){return w.call(t)=="[object "+e+"]"}}),b.isArguments=function(t){return!(!t||!b.has(t,"callee"))},"function"!=typeof/./&&(b.isFunction=function(t){return"function"==typeof t}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!=+t},b.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==w.call(t)},b.isNull=function(t){return null===t},b.isEmpty=function(t){if(null==t)return!0;if(b.isArray(t)||b.isString(t))return 0===t.length;for(var e in t)if(b.has(t,e))return!1;return!0},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=M||function(t){return"[object Array]"==w.call(t)},b.isObject=function(t){return t===Object(t)},b.identity=function(t){return t},b.indexOf=function(t,e,n){if(null==t)return-1;var i=0,a=t.length;if(n){if("number"!=typeof n)return t[i=b.sortedIndex(t,e)]===e?i:-1;i=n<0?Math.max(0,a+n):n}if(T&&t.indexOf===T)return t.indexOf(e,n);for(;i<a;i++)if(t[i]===e)return i;return-1},b.isWindow=function(t){return null!=t&&t==t.window},b.flatten=function(t,e){return function e(t,n,i){return n&&b.every(t,b.isArray)?m.apply(i,t):(E(t,function(t){b.isArray(t)||b.isArguments(t)?n?x.apply(i,t):e(t,n,i):i.push(t)}),i)}(t,e,[])},b.every=b.all=function(t,i,a){i=i||b.identity;var r=!0;return null==t?r:P&&t.every===P?t.every(i,a):(E(t,function(t,e,n){if(!(r=r&&i.call(a,t,e,n)))return g}),!!r)},b.min=function(t,a,r){if(!a&&b.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!a&&b.isEmpty(t))return 1/0;var o={computed:1/0,value:1/0};return E(t,function(t,e,n){var i=a?a.call(r,t,e,n):t;i<o.computed&&(o={value:t,computed:i})}),o.value},b.max=function(t,a,r){if(!a&&b.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!a&&b.isEmpty(t))return-1/0;var o={computed:-1/0,value:-1/0};return E(t,function(t,e,n){var i=a?a.call(r,t,e,n):t;i>o.computed&&(o={value:t,computed:i})}),o.value},b.find=b.detect=function(t,i,a){var r;return F(t,function(t,e,n){if(i.call(a,t,e,n))return r=t,!0}),r};var F=b.some=b.any=function(t,i,a){i=i||b.identity;var r=!1;return null==t?r:O&&t.some===O?t.some(i,a):(E(t,function(t,e,n){if(r=r||i.call(a,t,e,n))return g}),!!r)};function R(r,o){return document[r]?function t(e,n,i){if(e.length)for(var a=0;a<e.length;a++)t(e[a],n,i);else e[r](n,i,!1)}:function t(e,n,i){if(e.length)for(var a=0;a<e.length;a++)t(e[a],n,i);else e[o]("on"+n,function(){return i.call(e,window.event)})}}b.without=function(t){return b.difference(t,_.call(arguments,1))},b.difference=function(t){var e=m.apply(v,_.call(arguments,1));return b.filter(t,function(t){return!b.contains(e,t)})},b.uniq=b.unique=function(n,i,t,e){b.isFunction(i)&&(e=t,t=i,i=!1);var a=t?b.map(n,t,e):n,r=[],o=[];return E(a,function(t,e){(i?e&&o[o.length-1]===t:b.contains(o,t))||(o.push(t),r.push(n[e]))}),r},b.map=b.collect=function(t,i,a){var r=[];return null==t?r:A&&t.map===A?t.map(i,a):(E(t,function(t,e,n){r.push(i.call(a,t,e,n))}),r)},b.contains=b.include=function(t,e){return null!=t&&(T&&t.indexOf===T?-1!=t.indexOf(e):F(t,function(t){return t===e}))},b.pluck=function(t,e){return b.map(t,function(t){return t[e]})},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.shuffle=function(t){return b.sample(t,1/0)},b.sample=function(t,e,n){if(null==e||n)return c(t)||(t=b.values(t)),t[b.random(t.length-1)];var i=c(t)?b.clone(t):b.values(t),a=L(i);e=Math.max(Math.min(e,a),0);for(var r=a-1,o=0;o<e;o++){var l=b.random(o,r),s=i[o];i[o]=i[l],i[l]=s}return i.slice(0,e)},b.extend=function(){var t,e,n,i,a=arguments[0]||{},r=1,o=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},r=2),"object"===d(a)||b.isFunction(a)||(a={}),o===r&&(a=this,--r);r<o;r++)if(null!=(t=arguments[r]))for(e in t)n=a[e],a!==(i=t[e])&&void 0!==i&&(l&&i&&b.isObject(i)&&i.constructor===Object?a[e]=b.extend(l,n,i):a[e]=i);return a},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend(!0,{},t):t},b.euclideanModulo=function(t,e){return(t%e+e)%e},b.DEG2RAD=Math.PI/180,b.RAD2DEG=180/Math.PI,b.degToRad=function(t){return t*b.DEG2RAD},b.radToDeg=function(t){return t*b.RAD2DEG};var N="undefined"!=typeof window?window.devicePixelRatio:1,j={query:function(t){return b.isString(t)?document.getElementById(t):1==t.nodeType?t:t.length?t[0]:null},offset:function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,a=n.documentElement,r=a.clientTop||i.clientTop||0,o=a.clientLeft||i.clientLeft||0,l=1;if(i.getBoundingClientRect){var s=i.getBoundingClientRect();l=(s.right-s.left)/i.clientWidth}return 1<l&&(o=r=0),{top:e.top/l+(window.pageYOffset||a&&a.scrollTop/l||i.scrollTop/l)-r,left:e.left/l+(window.pageXOffset||a&&a.scrollLeft/l||i.scrollLeft/l)-o}},addEvent:R("addEventListener","attachEvent"),removeEvent:R("removeEventListener","detachEvent"),pageX:function(t){return t.pageX?t.pageX:t.clientX?t.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):null},pageY:function(t){return t.pageY?t.pageY:t.clientY?t.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):null},createCanvas:function(t,e,n){var i=document.createElement("canvas");return i.style.position="absolute",i.style.width=t+"px",i.style.height=e+"px",i.style.left=0,i.style.top=0,i.setAttribute("width",t*N),i.setAttribute("height",e*N),i.setAttribute("id",n),i},createView:function(t,e){var n=document.createElement("div");n.className="canvax-view",n.style.cssText+="position:relative;width:100%;height:100%;";var i=document.createElement("div");i.style.cssText+="position:absolute;width:"+t+"px;height:"+e+"px;";var a=document.createElement("div");return a.style.cssText+="position:absolute;width:"+t+"px;height:"+e+"px;",n.appendChild(i),n.appendChild(a),{view:n,stageView:i,domView:a}}},W={mainFrameRate:60,now:0,_pixelCtx:null,__emptyFunc:function(){},_devicePixelRatio:"undefined"!=typeof window?window.devicePixelRatio:1,_UID:0,getUID:function(){return this._UID++},createId:function(t){var e=t.charCodeAt(t.length-1);return 48<=e&&e<=57&&(t+="_"),t+W.getUID()},canvasSupport:function(){return!!document.createElement("canvas").getContext},initElement:function(t){return window.FlashCanvas&&FlashCanvas.initElement&&FlashCanvas.initElement(t),t},getCssOrderArr:function(t){var e,n,i,a;return"number"==typeof t?e=n=i=a=t:t instanceof Array?1===t.length?e=n=i=a=t[0]:2===t.length?(e=i=t[0],n=a=t[1]):3===t.length?(e=t[0],n=a=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],a=t[3]):e=n=i=a=0,[e,n,i,a]},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!n||!n.getContextAttributes().stencil)}catch(t){return!1}},checkOpt:function(t){return t?t.context||(t.context={}):t={context:{}},t}};function z(t){var e="CanvaxEvent";b.isString(t)&&(e=t),b.isObject(t)&&t.type&&(e=t.type,b.extend(this,t)),this.target=null,this.currentTarget=null,this.type=e,this.point=null;var n=this;this._stopPropagation=!1,this.stopPropagation=function(){n._stopPropagation=!0,b.isObject(t)&&(t._stopPropagation=!0)},this._preventDefault=!1,this.preventDefault=function(){n._preventDefault=!0,b.isObject(t)&&(t._preventDefault=!0)}}function B(){this._eventMap={}}W._pixelCtx=W.initElement(j.createCanvas(1,1,"_pixelCanvas")).getContext("2d");var G="mousedown mouseup mouseover mousemove mouseout click dblclick wheel keydown keypress keyup",V={_types:G.split(/,| /),register:function(t){t&&(b.isString(t)&&(t=t.split(/,| /)),this._types=G.split(/,| /).concat(t))},get:function(){return this._types}};function U(t,e){this.canvax=t,this.curPoints=[{x:0,y:0}],this.curPointsTarget=[],this._touching=!1,this._draging=!1,this._cursor="default",this.target=this.canvax.view,this.drag={start:"panstart",move:"panmove",end:"panend"},b.extend(!0,this,e)}B.prototype={_setEventEnable:function(){if(!this.children){var t=!1;for(var e in this._eventMap)-1<b.indexOf(V.get(),e)&&(t=!0);this._eventEnabled=t}},_addEventListener:function(t,n){if("function"!=typeof n)return!1;var i=!0,a=this,e=t;return b.isString(t)&&(e=t.split(/,| /)),b.each(e,function(t){var e=a._eventMap[t];return e?-1==b.indexOf(e,n)?(e.push(n),a._setEventEnable(),!0):void(i=!1):((e=a._eventMap[t]=[]).push(n),a._setEventEnable(),!0)}),i},_removeEventListener:function(t,e){if(1==arguments.length)return this.removeEventListenerByType(t);var n=this._eventMap[t];if(!n)return!1;for(var i=0;i<n.length;i++)if(n[i]===e)return n.splice(i,1),0==n.length&&(delete this._eventMap[t],this._setEventEnable()),!0;return!1},_removeEventListenerByType:function(t){return!this._eventMap[t]&&(delete this._eventMap[t],this._setEventEnable(),!0)},_removeAllEventListeners:function(){this._eventMap={},this._eventEnabled=!1},_dispatchEvent:function(t){var e=this._eventMap[t.type];if(e){t.target||(t.target=this),t.currentTarget||(t.currentTarget=this),e=e.slice();for(var n=0;n<e.length;n++){var i=e[n];"function"==typeof i&&i.call(this,t)}}return t._stopPropagation||this.parent&&(t.currentTarget=this.parent,this.parent._dispatchEvent(t)),!0},_hasEventListener:function(t){var e=this._eventMap[t];return null!=e&&0<e.length}};var q=(p(X,B),n(X,[{key:"on",value:function(t,e){return this._addEventListener(t,e),this}},{key:"addEventListener",value:function(t,e){return this._addEventListener(t,e),this}},{key:"un",value:function(t,e){return this._removeEventListener(t,e),this}},{key:"removeEventListener",value:function(t,e){return this._removeEventListener(t,e),this}},{key:"removeEventListenerByType",value:function(t){return this._removeEventListenerByType(t),this}},{key:"removeAllEventListeners",value:function(){return this._removeAllEventListeners(),this}},{key:"fire",value:function(t,e){var n=new z(t);if(e)for(var i in e)"type"!=i&&(n[i]=e[i]);var a=this;return b.each(t.split(" "),function(t){(n.currentTarget=a).dispatchEvent(n)}),this}},{key:"dispatchEvent",value:function(t){if(this.children&&t.point){var e=this.getObjectsUnderPoint(t.point,1)[0];e&&e.dispatchEvent(t)}else{if(!this.context||"mouseover"!=t.type)return this._dispatchEvent(t),this.context&&"mouseout"==t.type&&this._hoverClass&&this.hoverClone&&(a=this.getStage().parent,this._hoverClass=!1,a._bufferStage.removeChildById(this.id),this._globalAlpha&&(this.context.globalAlpha=this._globalAlpha,delete this._globalAlpha)),this;var n=this._heartBeatNum,i=this.context.$model.globalAlpha;if(this._dispatchEvent(t),n!=this._heartBeatNum&&(this._hoverClass=!0,this.hoverClone)){var a=this.getStage().parent,r=this.clone(!0);r._transform=this.getConcatenatedMatrix(),a._bufferStage.addChildAt(r,0),this._globalAlpha=i,this.context.globalAlpha=0}}}},{key:"hasEvent",value:function(t){return this._hasEventListener(t)}},{key:"hasEventListener",value:function(t){return this._hasEventListener(t)}},{key:"hover",value:function(t,e){return this.on("mouseover",t),this.on("mouseout",e),this}},{key:"once",value:function(e,n){var i=this;return this.on(e,function t(){n.apply(i,arguments),this.un(e,t)}),this}}]),X),Y=["pan","panstart","panmove","panend","pancancel","panleft","panright","panup","pandown","press","pressup","swipe","swipeleft","swiperight","swipeup","swipedown","tap"],$=document&&document.compareDocumentPosition?function(t,e){return!!e&&!!(16&t.compareDocumentPosition(e))}:function(t,e){return!!e&&e!=e&&(!t.contains||t.contains(e))};function X(){return l(this,X),s(this,u(X).call(this))}function K(t,e,n,i,a,r){this.a=null!=t?t:1,this.b=null!=e?e:0,this.c=null!=n?n:0,this.d=null!=i?i:1,this.tx=null!=a?a:0,this.ty=null!=r?r:0,this.array=null}U.prototype={init:function(){var e=this;null==e.target.nodeType&&V.register(Y),j.addEvent(e.target,"contextmenu",function(t){t&&t.preventDefault?t.preventDefault():window.event.returnValue=!1}),b.each(V.get(),function(t){1==e.target.nodeType?j.addEvent(e.target,t,function(t){e.__mouseHandler(t)}):e.target.on(t,function(t){e.__libHandler(t)})})},__mouseHandler:function(t){var e=this,n=e.canvax;n.updateViewOffset(),e.curPoints=[{x:j.pageX(t)-n.viewOffset.left,y:j.pageY(t)-n.viewOffset.top}];var i=e.curPoints[0],a=e.curPointsTarget[0];if(-1<b.indexOf(["mousedown","mouseover","click"],t.type)&&!a){if(!a){var r=n.getObjectsUnderPoint(i,1)[0];r&&(e.curPointsTarget=[r])}a=e.curPointsTarget[0]}if("mousedown"==t.type&&a&&a.dragEnabled&&(e._touching=!0),"mouseup"!=t.type&&("mouseout"!=t.type||$(n.view,t.toElement||t.relatedTarget))||(1==e._draging&&(e._dragEnd(t,a,0),a.fire("dragend")),e._draging=!1,e._touching=!1),"mouseout"==t.type)$(n.view,t.toElement||t.relatedTarget)||e.__getcurPointsTarget(t,i,!0);else if("mousemove"==t.type)e._touching&&"mousemove"==t.type&&a?(e._draging?e._dragIngHander(t,a,0):(a.fire("dragstart"),a._globalAlpha||(a._globalAlpha=a.context.$model.globalAlpha),a.context.globalAlpha=0,e._clone2hoverStage(a,0).context.globalAlpha=a._globalAlpha),e._draging=!0):e.__getcurPointsTarget(t,i);else{var o=a;o=o||n,e.__dispatchEventInChilds(t,[o]),e._cursorHander(o)}(n.preventDefault||t._preventDefault)&&(t&&t.preventDefault?t.preventDefault():window.event.returnValue=!1)},__getcurPointsTarget:function(t,e,n){var i=this,a=i.canvax,r=i.curPointsTarget[0];if(r&&!r.context&&(r=null),"mousemove"==(t=new z(t)).type&&r&&r._hoverClass&&r.hoverClone&&r.pointChkPriority&&r.getChildInPoint(e))return t.target=t.currentTarget=r,t.point=r.globalToLocal(e),void r.dispatchEvent(t);var o=n?null:a.getObjectsUnderPoint(e,1)[0];(r&&r!=o||"mouseout"==t.type)&&r&&r.context&&(i.curPointsTarget[0]=null,t.type="mouseout",t.toTarget=o,t.target=t.currentTarget=r,t.point=r.globalToLocal(e),r.dispatchEvent(t)),o&&r!=o&&(i.curPointsTarget[0]=o,t.type="mouseover",t.fromTarget=r,t.target=t.currentTarget=o,t.point=o.globalToLocal(e),o.dispatchEvent(t)),"mousemove"==t.type&&o&&(t.target=t.currentTarget=r,t.point=r.globalToLocal(e),r.dispatchEvent(t)),i._cursorHander(o,r)},_cursorHander:function(t,e){t||e||this._setCursor("default"),t&&e!=t&&t.context&&this._setCursor(t.context.$model.cursor)},_setCursor:function(t){this._cursor!=t&&(this.canvax.view.style.cursor=t,this._cursor=t)},__libHandler:function(n){var i=this,t=i.canvax;t.updateViewOffset(),i.curPoints=i.__getCanvaxPointInTouchs(n),i._draging||(i.curPointsTarget=i.__getChildInTouchs(i.curPoints)),0<i.curPointsTarget.length?(n.type==i.drag.start&&b.each(i.curPointsTarget,function(t,e){if(t&&t.dragEnabled)return i._draging=!0,t._globalAlpha||(t._globalAlpha=t.context.$model.globalAlpha),i._clone2hoverStage(t,e),t.context.globalAlpha=0,t.fire("dragstart"),!1}),n.type==i.drag.move&&i._draging&&b.each(i.curPointsTarget,function(t,e){t&&t.dragEnabled&&i._dragIngHander(n,t,e)}),n.type==i.drag.end&&i._draging&&(b.each(i.curPointsTarget,function(t,e){t&&t.dragEnabled&&(i._dragEnd(n,t,0),t.fire("dragend"))}),i._draging=!1),i.__dispatchEventInChilds(n,i.curPointsTarget)):i.__dispatchEventInChilds(n,[t])},__getCanvaxPointInTouchs:function(t){var e=this.canvax,n=[];return b.each(t.point,function(t){n.push({x:j.pageX(t)-e.viewOffset.left,y:j.pageY(t)-e.viewOffset.top})}),n},__getChildInTouchs:function(t){var e=this.canvax,n=[];return b.each(t,function(t){n.push(e.getObjectsUnderPoint(t,1)[0])}),n},__dispatchEventInChilds:function(i,t){if(!(t||"length"in t))return!1;var a=this;b.each(t,function(t,e){if(t){var n=new z(i);n.stagePoint=a.curPoints[e],n.point=t.globalToLocal(n.stagePoint),t.dispatchEvent(n)}})},_clone2hoverStage:function(t,e){var n=this.canvax,i=n._bufferStage.getChildById(t.id);return i||((i=t.clone(!0))._transform=t.getConcatenatedMatrix(),n._bufferStage.addChildAt(i,0)),i.context.globalAlpha=t._globalAlpha,t._dragPoint=t.globalToLocal(this.curPoints[e]),i},_dragIngHander:function(t,e,n){var i=this.canvax,a=e.globalToLocal(this.curPoints[n]);e._noHeart=!0;var r=e.moveing;e.moveing=!0,e.context.x+=a.x-e._dragPoint.x,e.context.y+=a.y-e._dragPoint.y,e.fire("draging"),e.moveing=r,e._noHeart=!1;var o=i._bufferStage.getChildById(e.id);o._transform=e.getConcatenatedMatrix(),o.worldTransform=null,o.heartBeat()},_dragEnd:function(t,e){var n=this.canvax._bufferStage.getChildById(e.id);n&&n.destroy(),e.context.globalAlpha=e._globalAlpha}};var Z={Event:z,Dispatcher:q,Handler:U,Manager:B,types:V};K.prototype={concat:function(t){var e=this.a,n=this.c,i=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d,this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},concatTransform:function(t,e,n,i,a){var r=1,o=0;if(a%360){var l=a*Math.PI/180;r=Math.cos(l),o=Math.sin(l)}return this.concat(new K(r*n,o*n,-o*i,r*i,t,e)),this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,a=this.c,r=this.tx;if(0<t)this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=a*e-this.d*n,this.d=a*n+this.d*e,this.tx=r*e-this.ty*n,this.ty=r*n+this.ty*e;else{var o=Math.sin(Math.abs(t)),l=Math.cos(Math.abs(t));this.a=i*l+this.b*o,this.b=-i*o+this.b*l,this.c=a*l+this.d*o,this.d=-a*o+l*this.d,this.tx=l*r+o*this.ty,this.ty=l*this.ty-o*r}return this},scale:function(t,e){return this.a*=t,this.d*=e,this.tx*=t,this.ty*=e,this},translate:function(t,e){return this.tx+=t,this.ty+=e,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var t=this.a,e=this.b,n=this.c,i=this.d,a=this.tx,r=t*i-e*n;return this.a=i/r,this.b=-e/r,this.c=-n/r,this.d=t/r,this.tx=(n*this.ty-i*a)/r,this.ty=-(t*this.ty-e*a)/r,this},clone:function(){return new K(this.a,this.b,this.c,this.d,this.tx,this.ty)},toArray:function(t,e){if(0==arguments.length)return isNaN(this.a)||isNaN(this.b)||isNaN(this.c)||isNaN(this.d)||isNaN(this.tx)||isNaN(this.ty)?null:[this.a,this.b,this.c,this.d,this.tx,this.ty];this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0),n[8]=1,n},mulVector:function(t){var e=this.a,n=this.c,i=this.tx,a=this.b,r=this.d,o=this.ty,l=[0,0];return l[0]=t[0]*e+t[1]*n+i,l[1]=t[0]*a+t[1]*r+o,l}};var Q,J,tt=(n(at,[{key:"toArray",value:function(){return[this.x,this.y]}}]),at),et=r(function(t,e){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}n.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:l.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var a=this._tweens[n[i]];a&&!1===a.update(t)&&(a._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i,l=new n;l.Group=n,l._nextId=0,l.nextId=function(){return l._nextId++},"undefined"==typeof window&&"undefined"!=typeof process?l.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?l.now=window.performance.now.bind(window.performance):void 0!==Date.now?l.now=Date.now:l.now=function(){return(new Date).getTime()},l.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=l.Easing.Linear.None,this._interpolationFunction=l.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||l,this._id=l.nextId()},l.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?l.now()+parseFloat(t):t:l.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==0&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var a=this._valuesStart[e]||0,r=this._valuesEnd[e];r instanceof Array?this._object[e]=this._interpolationFunction(r,i):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?a+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[e]=a+(r-a)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var l=0,s=this._chainedTweens.length;l<s;l++)this._chainedTweens[l].start(this._startTime+this._duration);return!1}},l.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-l.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*l.Easing.Bounce.In(2*t):.5*l.Easing.Bounce.Out(2*t-1)+.5}}},l.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,a=Math.floor(i),r=l.Interpolation.Utils.Linear;return e<0?r(t[0],t[1],i):1<e?r(t[n],t[n-1],n-i):r(t[a],t[n<a+1?n:a+1],i-a)},Bezier:function(t,e){for(var n=0,i=t.length-1,a=Math.pow,r=l.Interpolation.Utils.Bernstein,o=0;o<=i;o++)n+=a(1-e,i-o)*a(e,o)*t[o]*r(i,o);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,a=Math.floor(i),r=l.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(a=Math.floor(i=n*(1+e))),r(t[(a-1+n)%n],t[a],t[(a+1)%n],t[(a+2)%n],i-a)):e<0?t[0]-(r(t[0],t[0],t[1],t[1],-i)-t[0]):1<e?t[n]-(r(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):r(t[a?a-1:0],t[a],t[n<a+1?n:a+1],t[n<a+2?n:a+2],i-a)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=l.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(i=[1],function(t){var e=1;if(i[t])return i[t];for(var n=t;1<n;n--)e*=n;return i[t]=e}),CatmullRom:function(t,e,n,i,a){var r=.5*(n-t),o=.5*(i-e),l=a*a;return a*l*(2*e-2*n+r+o)+(-3*e+3*n-2*r-o)*l+r*a+e}}},t.exports=l}),nt=0,it=!0;function at(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(l(this,at),1==arguments.length&&"object"==d(arguments[0])){var n=arguments[0];if("x"in n&&"y"in n)this.x=+n.x,this.y=+n.y;else{var i=0;for(var a in n){if(0!=i){this.y=+n[a];break}this.x=+n[a],i++}}}else this.x=+t,this.y=+e}if("undefined"!=typeof window){Q=window.requestAnimationFrame,J=window.cancelAnimationFrame;for(var rt=["ms","moz","webkit","o"],ot=0;ot<rt.length&&!window.requestAnimationFrame;++ot)Q=window.requestAnimationFrame=window[rt[ot]+"RequestAnimationFrame"],J=window.cancelAnimationFrame=window[rt[ot]+"CancelAnimationFrame"]||window[rt[ot]+"CancelRequestAnimationFrame"]}Q=Q||function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-nt)),i=setTimeout(function(){t(e+n)},n);return nt=e+n,i},J=J||function(t){clearTimeout(t)};var lt=[],st=null;function ut(t){if(t)return lt.push(t),st=st||Q(function(){et.update();var t=lt;for(lt=[],st=null;0<t.length;)t.shift().task()})}function ht(t){for(var e=!1,n=0,i=lt.length;n<i;n++)lt[n].id===t.id&&(e=!0,lt.splice(n,1),n--,i--);return 0==lt.length&&(J(st),st=null),e}function dt(){return it}var ft={setAnimationEnabled:function(t){it=t},getAnimationEnabled:dt,registFrame:ut,destroyFrame:ht,registTween:function(t){var e=b.extend({from:null,to:null,duration:500,onStart:function(){},onUpdate:function(){},onComplete:function(){},onStop:function(){},repeat:0,delay:0,easing:"Linear.None",desc:""},t);dt()||(e.duration=0,e.delay=0);var n={},i="tween_"+W.getUID();return e.id&&(i=i+"_"+e.id),e.from&&e.to&&((n=new et.Tween(e.from).to(e.to,e.duration).onStart(function(){e.onStart(e.from)}).onUpdate(function(){e.onUpdate(e.from)}).onComplete(function(){ht({id:i}),n._isCompleteed=!0,e.onComplete(e.from)}).onStop(function(){ht({id:i}),n._isStoped=!0,e.onStop(e.from)}).repeat(e.repeat).delay(e.delay).easing(et.Easing[e.easing.split(".")[0]][e.easing.split(".")[1]])).id=i,n.start(),function t(){n._isCompleteed||n._isStoped?n=null:ut({id:i,task:t,desc:e.desc,tween:n})}()),n},destroyTween:function(t,e){t.stop()},Tween:et,taskList:lt},ct=Object.defineProperty;try{ct({},"_",{value:"x"});var pt=Object.defineProperties}catch(t){"__defineGetter__"in Object&&(ct=function(t,e,n){return"value"in n&&(t[e]=n.value),"get"in n&&t.__defineGetter__(e,n.get),"set"in n&&t.__defineSetter__(e,n.set),t},pt=function(t,e){for(var n in e)e.hasOwnProperty(n)&&ct(t,n,e[n]);return t})}var gt={POLY:0,RECT:1,CIRC:2,ELIP:3},vt=["x","y","scaleX","scaleY","rotation","scaleOrigin","rotateOrigin"],yt=["lineWidth","strokeAlpha","strokeStyle","fillStyle","fillAlpha","globalAlpha"],xt=function(t,e,n,i){var a=t[0],r=t[1],o=t[2],l=t[3],s=Math.max(i,3),u=0,h=a;return!(r+s<n&&l+s<n||n<r-s&&n<l-s||a+s<e&&o+s<e||e<a-s&&e<o-s)&&(a===o?Math.abs(e-a)<=s/2:((u=(r-l)/(a-o))*e-n+(h=(a*l-o*r)/(a-o)))*(u*e-n+h)/(u*u+1)<=s/2*s/2)};function _t(t,e,n){for(var i=t.shape.points,a=t.lineWidth,r=!1,o=0;o<i.length&&!(r=xt(i.slice(o,o+4),e,n,a));++o)o+=1;return r}var mt={RESOLUTION:"undefined"!=typeof window?window.devicePixelRatio:1,TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,FILTER_RESOLUTION:1,SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@(.+)x/,RENDER_OPTIONS:{view:null,antialias:!0,forceFXAA:!1,autoResize:!1,transparent:!0,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION:"mediump"},bt=(p(Dt,Z.Dispatcher),n(Dt,[{key:"init",value:function(){}},{key:"clipTo",value:function(t){(this.clip=t).isClip=!0}},{key:"_createContext",value:function(t){var a=this,e=t.context||{},n={width:e.width||0,height:e.height||0,x:e.x||0,y:e.y||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1,scaleOrigin:e.scaleOrigin||{x:0,y:0},rotation:e.rotation||0,rotateOrigin:e.rotateOrigin||{x:0,y:0},visible:e.visible||!0,globalAlpha:e.globalAlpha||1};return b.extend(!0,n,t.context),a._notWatch=!1,a._noHeart=!1,n.$watch=function(t,e,n){var i=a;i.context&&("globalGalpha"==t&&(i._globalAlphaChange=!0),-1<b.indexOf(vt,t)&&(i._updateTransform(),i._transformChange=!0),i._notWatch||(i.$watch&&(i._notWatch=!0,i.$watch(t,e,n),i._notWatch=!1),i._noHeart||i.heartBeat({convertType:"context",shape:i,name:t,value:e,preValue:n})))},function l(e){var s=!0,u={},n={},i=["$watch","$model"],h={},a=i;function t(r,t){-1===b.indexOf(i,r)&&(h[r]=t);var o=d(t);if(!(-1<b.indexOf(a,r)))if("function"===o)a.push(r);else{var e=function(t){var e,n=h[r],i=n;if(!arguments.length)return!n||"object"!==o||n instanceof Array||n.$model||n.addColorStop||((n=l(n)).$watch=u.$watch,h[r]=n),n;var a=d(t);s||n!==t&&(!t||"object"!==a||t instanceof Array||t.addColorStop?n=t:e=(n=t.$model?t:l(t)).$model,h[r]=e||n,o!=a&&(o=a),u.$watch&&u.$watch.call(u,r,n,i))};n[r]={set:e,get:e,enumerable:!0}}}for(var r in e)t(r,e[r]);return u=pt(u,n,a),b.forEach(a,function(t){e[t]&&("function"==typeof e[t]?u[t]=function(){e[t].apply(this,arguments)}:u[t]=e[t])}),u.$model=h,u.hasOwnProperty=function(t){return t in u.$model},s=!1,u}(n)}},{key:"track",value:function(t){-1==b.indexOf(this._trackList,t)&&this._trackList.push(t)}},{key:"untrack",value:function(t){var e=b.indexOf(this._trackList,t);-1<e&&this._trackList.splice(e,1)}},{key:"clone",value:function(t){var e,n={id:this.id,context:b.clone(this.context.$model),isClone:!0};return(e="text"==this.type?new this.constructor(this.text,n):new this.constructor(n)).id=n.id,this.children&&(e.children=this.children),this.graphics&&(e.graphics=this.graphics.clone()),t||(e.id=W.createId(e.type)),e}},{key:"heartBeat",value:function(t){var e=this.getStage();e&&(this._heartBeatNum++,e.heartBeat&&e.heartBeat(t))}},{key:"getCurrentWidth",value:function(){return Math.abs(this.context.$model.width*this.context.$model.scaleX)}},{key:"getCurrentHeight",value:function(){return Math.abs(this.context.$model.height*this.context.$model.scaleY)}},{key:"getStage",value:function(){if(this.stage)return this.stage;var t=this;if("stage"!=t.type){for(;t.parent&&"stage"!=(t=t.parent).type;);if("stage"!==t.type)return!1}return this.stage=t}},{key:"localToGlobal",value:function(t,e){t=t||new tt(0,0);var n=this.getConcatenatedMatrix(e);if(null==n)return tt(0,0);var i=new K(1,0,0,1,t.x,t.y);return i.concat(n),new tt(i.tx,i.ty)}},{key:"globalToLocal",value:function(t,e){if(t=t||new tt(0,0),"stage"==this.type)return t;var n=this.getConcatenatedMatrix(e);if(null==n)return new tt(0,0);n.invert();var i=new K(1,0,0,1,t.x,t.y);return i.concat(n),new tt(i.tx,i.ty)}},{key:"localToTarget",value:function(t,e){var n=localToGlobal(t);return e.globalToLocal(n)}},{key:"getConcatenatedMatrix",value:function(t){for(var e=new K,n=this;null!=n;n=n.parent)if(e.concat(n._transform),!n.parent||t&&n.parent&&n.parent==t||n.parent&&"stage"==n.parent.type)return e;return e}},{key:"setEventEnable",value:function(t){return!!b.isBoolean(t)&&(this._eventEnabled=t,!0)}},{key:"getIndex",value:function(){if(this.parent)return b.indexOf(this.parent.children,this)}},{key:"toBack",value:function(t){if(this.parent){var e=this.getIndex(),n=0;if(b.isNumber(t)){if(0==t)return;n=e-t}var i=this.parent.children.splice(e,1)[0];n<0&&(n=0),this.parent.addChildAt(i,n)}}},{key:"toFront",value:function(t){if(this.parent){var e=this.getIndex(),n=this.parent.children.length,i=n;if(b.isNumber(t)){if(0==t)return;i=e+t+1}var a=this.parent.children.splice(e,1)[0];n<i&&(i=n),this.parent.addChildAt(a,i-1)}}},{key:"_updateTransform",value:function(){var t=new K;t.identity();var e=this.context;if(1!==e.scaleX||1!==e.scaleY){var n=new tt(e.scaleOrigin);t.translate(-n.x,-n.y),t.scale(e.scaleX,e.scaleY),t.translate(n.x,n.y)}var i=e.rotation;if(i&&(n=new tt(e.rotateOrigin),t.translate(-n.x,-n.y),t.rotate(i%360*Math.PI/180),t.translate(n.x,n.y)),this.xyToInt&&!this.moveing){var a=parseInt(e.x),r=parseInt(e.y);parseInt(e.lineWidth,10)%2==1&&e.strokeStyle&&(a+=.5,r+=.5)}else a=e.x,r=e.y;return 0==a&&0==r||t.translate(a,r),this._transform=t}},{key:"setWorldTransform",value:function(){var t=new K;return t.concat(this._transform),this.parent&&t.concat(this.parent.worldTransform),this.worldTransform=t,this.worldTransform}},{key:"getChildInPoint",value:function(t){var e=!1,n=t.x,i=t.y;if(this.worldTransform){var a=this.worldTransform.clone().invert(),r=[n*mt.RESOLUTION,i*mt.RESOLUTION];n=(r=a.mulVector(r))[0],i=r[1]}if(this.graphics&&(e=this.containsPoint({x:n,y:i})),"text"!=this.type)return e;var o=this.getRect();return!(!o.width||!o.height)&&n>=o.x&&n<=o.x+o.width&&(0<=o.height&&i>=o.y&&i<=o.y+o.height||o.height<0&&i<=o.y&&i>=o.y+o.height)}},{key:"containsPoint",value:function(t){for(var e=!1,n=0;n<this.graphics.graphicsData.length;++n){var i=this.graphics.graphicsData[n];if(i.shape){if(i.hasFill()&&i.shape.contains(t.x,t.y)&&(e=!0))break;if(i.hasLine()&&i.shape.points&&(e=_t(i,t.x,t.y)))break}}return e}},{key:"animate",value:function(t,e,n){if(n=n||this.context){var i=t,a=null;for(var r in i)b.isObject(i[r])?this.animate(i[r],b.extend({},e),n[r]):isNaN(i[r])&&""!==i[r]&&null!==i[r]?(n[r]=i[r],delete i[r]):(a=a||{})[r]=n[r];if(a){(e=e||{}).from=a,e.to=i;var o,l=this,s=function(){};e.onUpdate&&(s=e.onUpdate),e.onUpdate=function(t){if(!n&&o)return ft.destroyTween(o),void(o=null);for(var e in t)n[e]=t[e];s.apply(l,[t])};var u=function(){};return e.onComplete&&(u=e.onComplete),e.onComplete=function(t){u.apply(l,arguments),l._removeTween(o)},e.onStop=function(){l._removeTween(o)},e.desc="tweenType:DisplayObject.animate__id:"+this.id+"__objectType:"+this.type,o=ft.registTween(e),this._tweens.push(o),o}}}},{key:"_removeTween",value:function(t){for(var e=0;e<this._tweens.length;e++)if(t==this._tweens[e]){this._tweens.splice(e,1);break}}},{key:"removeAnimate",value:function(t){t.stop(),this._removeTween(t)}},{key:"cleanAnimates",value:function(){this._cleanAnimates()}},{key:"_cleanAnimates",value:function(){for(;this._tweens.length;)this._tweens.shift().stop()}},{key:"remove",value:function(){this.parent&&(this.parent.removeChild(this),this.parent=null)}},{key:"destroy",value:function(){this._destroy()}},{key:"_destroy",value:function(){this.remove(),this.fire("destroy"),this.context=null,delete this.context}}]),Dt),wt=(p(It,bt),n(It,[{key:"addChild",value:function(t,e){if(t)return-1!=this.getChildIndex(t)?t.parent=this:(t.parent&&t.parent.removeChild(t),void 0===e&&(e=this.children.length),this.children.splice(e,0,t),(t.parent=this).heartBeat&&this.heartBeat({convertType:"children",target:t,src:this}),this._afterAddChild&&this._afterAddChild(t)),t}},{key:"addChildAt",value:function(t,e){return this.addChild(t,e)}},{key:"removeChild",value:function(t){return this.removeChildAt(b.indexOf(this.children,t))}},{key:"removeChildAt",value:function(t){if(t<0||t>this.children.length-1)return!1;var e=this.children[t];return null!=e&&(e.parent=null),this.children.splice(t,1),this.heartBeat&&this.heartBeat({convertType:"children",target:e,src:this}),this._afterDelChild&&this._afterDelChild(e,t),e}},{key:"removeChildById",value:function(t){for(var e=0,n=this.children.length;e<n;e++)if(this.children[e].id==t)return this.removeChildAt(e);return!1}},{key:"removeAllChildren",value:function(){for(;0<this.children.length;)this.removeChildAt(0)}},{key:"destroy",value:function(){for(var t=0,e=this.children.length;t<e;t++)this.getChildAt(t).destroy(),t--,e--;this._destroy()}},{key:"cleanAnimates",value:function(){for(var t=0,e=this.children.length;t<e;t++)this.getChildAt(t).cleanAnimates();this._cleanAnimates()}},{key:"getChildById",value:function(t,e){if(e)return null;for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].id==t)return this.children[n];return null}},{key:"getChildAt",value:function(t){return t<0||t>this.children.length-1?null:this.children[t]}},{key:"getChildIndex",value:function(t){return b.indexOf(this.children,t)}},{key:"setChildIndex",value:function(t,e){if(t.parent==this){var n=b.indexOf(this.children,t);e!=n&&(this.children.splice(n,1),this.children.splice(e,0,t))}}},{key:"getNumChildren",value:function(){return this.children.length}},{key:"getObjectsUnderPoint",value:function(t,e){for(var n=[],i=this.children.length-1;0<=i;i--){var a=this.children[i];if(null!=a&&a.context.$model.visible)if(a instanceof It){if(!a._eventEnabled)continue;if(a.mouseChildren&&0<a.getNumChildren()){var r=a.getObjectsUnderPoint(t);0<r.length&&(n=n.concat(r))}}else{if(!a._eventEnabled&&!a.dragEnabled)continue;if(a.getChildInPoint(t)&&(n.push(a),null!=e&&!isNaN(e)&&n.length==e))return n}}return n}}]),It),kt=(p(Mt,wt),n(Mt,[{key:"initStage",value:function(t,e,n){this.canvas=t;var i=this.context;i.width=e,i.height=n,i.scaleX=W._devicePixelRatio,i.scaleY=W._devicePixelRatio,this._isReady=!0}},{key:"heartBeat",value:function(t){this._isReady&&((t=t||{}).stage=this).parent&&this.parent.heartBeat(t)}}]),Mt),St=(n(Tt,[{key:"startEnter",value:function(){var t=this;t.requestAid||(t.requestAid=ft.registFrame({id:"enterFrame",task:function(){t.enterFrame.apply(t)}}))}},{key:"enterFrame",value:function(){var t=this;t.requestAid=null,W.now=(new Date).getTime(),t._heartBeat&&(this.app.children.length&&t.render(this.app),t._heartBeat=!1,t._preRenderTime=(new Date).getTime())}},{key:"_convertCanvax",value:function(e){b.each(this.app.children,function(t){t.context[e.name]=e.value})}},{key:"heartBeat",value:function(t){var n=this;if(t){if("context"==t.convertType){var e=t.stage,i=t.shape;if(t.name,t.value,t.preValue,"canvax"==i.type)n._convertCanvax(t);else if(n.app.convertStages[e.id]||(n.app.convertStages[e.id]={stage:e,convertShapes:{}}),i){if(n.app.convertStages[e.id].convertShapes[i.id])return;n.app.convertStages[e.id].convertShapes[i.id]={shape:i,convertType:t.convertType}}}if("children"==t.convertType){var a=t.target;!(e=t.src.getStage())&&"stage"!=a.type||(e=e||a,n.app.convertStages[e.id]||(n.app.convertStages[e.id]={stage:e,convertShapes:{}}))}t.convertType||(e=t.stage,n.app.convertStages[e.id]||(n.app.convertStages[e.id]={stage:e,convertShapes:{}}))}else b.each(n.app.children,function(t,e){n.app.convertStages[t.id]={stage:t,convertShapes:{}}});n._heartBeat?n._heartBeat=!0:(n._heartBeat=!0,n.startEnter())}}]),Tt),At=(n(Ot,[{key:"render",value:function(t,e,n,i){this.renderer;for(var a=t.graphics.graphicsData,r=e.ctx,o=0;o<a.length;o++){var l=a[o],s=l.shape,u=l.fillStyle,h=l.strokeStyle,d=l.hasFill()&&l.fillAlpha&&!i,f=l.hasLine()&&l.strokeAlpha&&!i;if(r.lineWidth=l.lineWidth,l.type===gt.POLY)r.beginPath(),this.renderPolygon(s.points,s.closed,r,i),d&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle=u,r.fill()),f&&(r.globalAlpha=l.strokeAlpha*n,r.strokeStyle=h,r.stroke());else if(l.type===gt.RECT)i&&r.rect(s.x,s.y,s.width,s.height),d&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle=u,r.fillRect(s.x,s.y,s.width,s.height)),f&&(r.globalAlpha=l.strokeAlpha*n,r.strokeStyle=h,r.strokeRect(s.x,s.y,s.width,s.height));else if(l.type===gt.CIRC)r.beginPath(),r.arc(s.x,s.y,s.radius,0,2*Math.PI),r.closePath(),d&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle=u,r.fill()),f&&(r.globalAlpha=l.strokeAlpha*n,r.strokeStyle=h,r.stroke());else if(l.type===gt.ELIP){var c=2*s.width,p=2*s.height,g=s.x-c/2,v=s.y-p/2;r.beginPath();var y=c/2*.5522848,x=p/2*.5522848,_=g+c,m=v+p,b=g+c/2,w=v+p/2;r.moveTo(g,w),r.bezierCurveTo(g,w-x,b-y,v,b,v),r.bezierCurveTo(b+y,v,_,w-x,_,w),r.bezierCurveTo(_,w+x,b+y,m,b,m),r.bezierCurveTo(b-y,m,g,w+x,g,w),r.closePath(),d&&(r.globalAlpha=l.fillAlpha*n,r.fillStyle=u,r.fill()),f&&(r.globalAlpha=l.strokeAlpha*n,r.strokeStyle=h,r.stroke())}}}},{key:"renderPolygon",value:function(t,e,n,i){n.moveTo(t[0],t[1]);for(var a=1;a<t.length/2;++a)n.lineTo(t[2*a],t[2*a+1]);(e||i)&&n.closePath()}}]),Ot),Ct=(p(Pt,St),n(Pt,[{key:"render",value:function(t){var e=this;e.app=t,b.each(b.values(t.convertStages),function(t){e.renderStage(t.stage)}),t.convertStages={}}},{key:"renderStage",value:function(t){t.ctx||(t.ctx=t.canvas.getContext("2d")),t.stageRending=!0,t.setWorldTransform(),this._clear(t),this._render(t,t,t.context.globalAlpha),t.stageRending=!1}},{key:"_render",value:function(t,e,n){var i=t.ctx;if(i){var a=e.context.$model;if(e.worldTransform||e.fire("render"),(!e.worldTransform||e._transformChange||e.parent&&e.parent._transformChange)&&(e.setWorldTransform(),e.fire("transform"),e._transformChange=!0),n*=a.globalAlpha,a.visible&&!e.isClip){var r=e.worldTransform.toArray();if(r){i.setTransform.apply(i,r);var o=!1;if(e.clip&&e.clip.graphics){var l=e.clip;i.save(),o=!0,l.worldTransform&&!l._transformChange&&!l.parent._transformChange||(l.setWorldTransform(),l._transformChange=!0),i.setTransform.apply(i,l.worldTransform.toArray()),l.graphics.graphicsData.length||l._draw(l.graphics),this.CGR.render(l,t,n,o),l._transformChange=!1,i.clip()}if(e.graphics&&(e.graphics.graphicsData.length||e._draw(e.graphics),n&&(i.setLineDash([]),a.lineType&&"solid"!=a.lineType&&i.setLineDash(a.lineDash),this.CGR.render(e,t,n))),"text"==e.type&&e.render(i,n),e.children)for(var s=0,u=e.children.length;s<u;s++)this._render(t,e.children[s],n);e._transformChange=!1,o&&i.restore()}}}}},{key:"_clear",value:function(t){var e=t.ctx;e.setTransform.apply(e,t.worldTransform.toArray()),e.clearRect(0,0,this.app.width,this.app.height)}}]),Pt);function Pt(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return l(this,Pt),(e=s(this,u(Pt).call(this,2,t,n))).CGR=new At(o(e)),e}function Ot(t){l(this,Ot),this.renderer=t}function Tt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0;if(l(this,Tt),this.type=t,this.app=e,n)for(var i in mt.RENDER_OPTIONS)void 0===n[i]&&(n[i]=mt.RENDER_OPTIONS[i]);else n=mt.RENDER_OPTIONS;this.options=n,this.requestAid=null,this._heartBeat=!1,this._preRenderTime=0}function Mt(t){var e;return l(this,Mt),t.type="stage",(e=s(this,u(Mt).call(this,t))).canvas=null,e.ctx=null,e.stageRending=!1,e._isReady=!1,e}function It(t){var e;return l(this,It),(e=s(this,u(It).call(this,t))).children=[],e.mouseChildren=[],e._eventEnabled=!0,e}function Dt(t){var e;l(this,Dt),(e=s(this,u(Dt).call(this,t)))._transform=null,e.worldTransform=null,e._transformChange=!1,e._heartBeatNum=0,e.stage=null,e.parent=null,e.xyToInt=!("xyToInt"in t)||t.xyToInt,e.moveing=!1,e.clip=null,e.context=e._createContext(t),e.type=t.type||"DisplayObject",e.id=t.id||W.createId(e.type),e._trackList=[],e.init.apply(o(e),arguments),e._updateTransform(),e._tweens=[];var n=o(e);return e.on("destroy",function(){n.cleanAnimates()}),e}var Lt=(p(Bt,wt),n(Bt,[{key:"registEvent",value:function(t){return this.event=new Z.Handler(this,t),this.event.init(),this.event}},{key:"destroy",value:function(){for(var t=0,e=this.children.length;t<e;t++){var n=this.children[t];n.destroy(),n.canvas=null,n.ctx=null,n=null,t--,e--}try{this.view.removeChild(this.stageView),this.view.removeChild(this.domView),this.el.removeChild(this.view)}catch(t){}this.el.innerHTML="",this.event=null,this._bufferStage=null}},{key:"resize",value:function(t){this.width=parseInt(t&&"width"in t||this.el.offsetWidth,10),this.height=parseInt(t&&"height"in t||this.el.offsetHeight,10),this.viewOffset=j.offset(this.view),this.context.$model.width=this.width,this.context.$model.height=this.height;var i=this;b.each(this.children,function(t,e){var n;t.context.$model.width=i.width,t.context.$model.height=i.height,(n=t.canvas).style.width=i.width+"px",n.style.height=i.height+"px",n.setAttribute("width",i.width*W._devicePixelRatio),n.setAttribute("height",i.height*W._devicePixelRatio)}),this.stageView.style.width=this.width+"px",this.stageView.style.height=this.height+"px",this.domView.style.width=this.width+"px",this.domView.style.height=this.height+"px",this.heartBeat()}},{key:"getHoverStage",value:function(){return this._bufferStage}},{key:"_creatHoverStage",value:function(){this._bufferStage=new kt({id:"activCanvas"+(new Date).getTime(),context:{width:this.context.$model.width,height:this.context.$model.height}}),this._bufferStage._eventEnabled=!1,this.addChild(this._bufferStage)}},{key:"updateViewOffset",value:function(){var t=(new Date).getTime();1e3<t-this.lastGetRO&&(this.viewOffset=j.offset(this.view),this.lastGetRO=t)}},{key:"_afterAddChild",value:function(t,e){var n;n=t.canvas?t.canvas:j.createCanvas(this.context.$model.width,this.context.$model.height,t.id),1==this.children.length?this.stageView.appendChild(n):1<this.children.length&&(void 0===e?this.stageView.insertBefore(n,this._bufferStage.canvas):e>=this.children.length-1?this.stageView.appendChild(n):this.stageView.insertBefore(n,this.children[e].canvas)),W.initElement(n),t.initStage(n,this.context.$model.width,this.context.$model.height)}},{key:"_afterDelChild",value:function(t){try{this.stageView.removeChild(t.canvas)}catch(t){}}},{key:"heartBeat",value:function(t){0<this.children.length&&this.renderer.heartBeat(t)}},{key:"toDataURL",value:function(){var t=j.createCanvas(this.width,this.height,"curr_base64_canvas"),e=t.getContext("2d");return b.each(this.children,function(t){e.drawImage(t.canvas,0,0)}),t.toDataURL()}}]),Bt),Et=(p(zt,wt),zt),Ft=(n(Wt,[{key:"clone",value:function(){var t=new Wt(this.lineWidth,this.strokeStyle,this.strokeAlpha,this.fillStyle,this.fillAlpha,this.shape);return t.fill=this.fill,t.line=this.line,t}},{key:"addHole",value:function(t){this.holes.push(t)}},{key:"synsStyle",value:function(t){this.line&&(this.lineWidth=t.lineWidth,this.strokeStyle=t.strokeStyle,this.strokeAlpha=t.strokeAlpha),this.fill&&(this.fillStyle=t.fillStyle,this.fillAlpha=t.fillAlpha)}},{key:"hasFill",value:function(){return this.fillStyle&&this.fill&&void 0!==this.shape.closed&&this.shape.closed}},{key:"hasLine",value:function(){return this.strokeStyle&&this.lineWidth&&this.line}},{key:"destroy",value:function(){this.shape=null,this.holes=null}}]),Wt),Rt={},Nt={},jt=Array.prototype.join;function Wt(t,e,n,i,a,r){l(this,Wt),this.lineWidth=t,this.strokeStyle=e,this.strokeAlpha=n,this.fillStyle=i,this.fillAlpha=a,this.shape=r,this.type=r.type,this.holes=[],this.fill=!0,this.line=!0}function zt(t){return l(this,zt),(t=W.checkOpt(t)).type="sprite",s(this,u(zt).call(this,t))}function Bt(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};l(this,Bt),t.type="canvax",(e=s(this,u(Bt).call(this,t)))._cid=(new Date).getTime()+"_"+Math.floor(100*Math.random()),e.el=j.query(t.el),e.width=parseInt("width"in t||e.el.offsetWidth,10),e.height=parseInt("height"in t||e.el.offsetHeight,10);var i,a=j.createView(e.width,e.height,e._cid);return e.view=a.view,e.stageView=a.stageView,e.domView=a.domView,e.el.innerHTML="",e.el.appendChild(e.view),e.viewOffset=j.offset(e.view),e.lastGetRO=0,e.webGL=t.webGL,e.renderer=(i=o(e),new Ct(i,n)),e.event=null,e.convertStages={},e.context.$model.width=e.width,e.context.$model.height=e.height,e._bufferStage=null,e._creatHoverStage(),e.worldTransform=(new K).identity(),e}function Gt(t,e,n,i,a,r,o,l,s,u,h){var d=jt.call(arguments);if(Nt[d])return Nt[d];var f=Math.cos(t),c=Math.sin(t),p=Math.cos(e),g=Math.sin(e),v=n*a*p-i*r*g+o,y=i*a*p+n*r*g+l,x=u+s*(-n*a*c-i*r*f),_=h+s*(-i*a*c+n*r*f),m=v+s*(n*a*g+i*r*p),b=y+s*(i*a*g-n*r*p);return Nt[d]=[x,_,m,b,v,y],Nt[d]}function Vt(t,e,n,i){var a=Math.atan2(e,t),r=Math.atan2(i,n);return a<=r?r-a:2*Math.PI-(a-r)}function Ht(t,e,n,i){for(var a=i[0],r=i[1],o=i[2],l=i[3],s=i[4],u=[[],[],[],[]],h=function(t,e,n,i,a,r,o){var l=jt.call(arguments);if(Rt[l])return Rt[l];var s=Math.PI,u=o*s/180,h=Math.sin(u),d=Math.cos(u),f=0,c=0,p=-d*t*.5-h*e*.5,g=-d*e*.5+h*t*.5,v=(n=Math.abs(n))*n,y=(i=Math.abs(i))*i,x=g*g,_=p*p,m=v*y-v*x-y*_,b=0;if(m<0){var w=Math.sqrt(1-m/(v*y));n*=w,i*=w}else b=(a===r?-1:1)*Math.sqrt(m/(v*x+y*_));var k=b*n*g/i,S=-b*i*p/n,A=d*k-h*S+.5*t,C=h*k+d*S+.5*e,P=Vt(1,0,(p-k)/n,(g-S)/i),O=Vt((p-k)/n,(g-S)/i,(-p-k)/n,(-g-S)/i);0===r&&0<O?O-=2*s:1===r&&O<0&&(O+=2*s);for(var T=Math.ceil(Math.abs(O/s*2)),M=[],I=O/T,D=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),L=P+I,E=0;E<T;E++)M[E]=Gt(P,L,d,h,n,i,A,C,D,f,c),f=M[E][4],c=M[E][5],P=L,L+=I;return Rt[l]=M}(i[5]-e,i[6]-n,a,r,l,s,o),d=0,f=h.length;d<f;d++)u[d][0]=h[d][0]+e,u[d][1]=h[d][1]+n,u[d][2]=h[d][2]+e,u[d][3]=h[d][3]+n,u[d][4]=h[d][4]+e,u[d][5]=h[d][5]+n,t.bezierCurveTo.apply(t,u[d])}var Ut=(n(Qt,[{key:"clone",value:function(){return new Qt(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"contains",value:function(t,e){return!(this.height*e<0||this.width*t<0)&&t>=this.x&&t<=this.x+this.width&&(0<=this.height&&e>=this.y&&e<=this.y+this.height||this.height<0&&e<=this.y&&e>=this.y+this.height)}}]),Qt),qt=(n(Zt,[{key:"clone",value:function(){return new Zt(this.x,this.y,this.radius)}},{key:"contains",value:function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,a=this.y-e;return(i*=i)+(a*=a)<=n}},{key:"getBounds",value:function(){return new Ut(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}]),Zt),Yt=(n(Kt,[{key:"clone",value:function(){return new Kt(this.x,this.y,this.width,this.height)}},{key:"contains",value:function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(e-this.y)/this.height;return(n*=n)+(i*=i)<=1}},{key:"getBounds",value:function(){return new Ut(this.x-this.width,this.y-this.height,this.width,this.height)}}]),Kt),$t=(n(Xt,[{key:"clone",value:function(){return new Xt(this.points.slice())}},{key:"close",value:function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1]),this.closed=!0}},{key:"contains",value:function(t,e){return this._isInsidePolygon_WindingNumber(t,e)}},{key:"_isInsidePolygon_WindingNumber",value:function(t,e){for(var n,i=this.points,a=0,r=i[1]>e,o=3;o<i.length;o+=2)if((n=r)!=(r=i[o]>e)){var l=(n?1:0)-(r?1:0);0<l*((i[o-3]-t)*(i[+o]-e)-(i[o-2]-e)*(i[o-1]-t))&&(a+=l)}return a}}]),Xt);function Xt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];l(this,Xt);var i=e[0];if(Array.isArray(i)&&(e=i),i&&"x"in i&&"y"in i){for(var a=[],r=0,o=e.length;r<o;r++)a.push(e[r].x,e[r].y);e=a}this.closed=!0,this.points=e,this.type=gt.POLY}function Kt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;l(this,Kt),this.x=t,this.y=e,this.width=n,this.height=i,this.type=gt.ELIP,this.closed=!0}function Zt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;l(this,Zt),this.x=t,this.y=e,this.radius=n,this.type=gt.CIRC,this.closed=!0}function Qt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;l(this,Qt),this.x=t,this.y=e,this.width=n,this.height=i,this.type=gt.RECT,this.closed=!0}var Jt=(n(ae,[{key:"setStyle",value:function(t){var e=t.$model;this.lineWidth=e.lineWidth,this.strokeStyle=e.strokeStyle,this.strokeAlpha=e.strokeAlpha*e.globalAlpha,this.fillStyle=e.fillStyle,this.fillAlpha=e.fillAlpha*e.globalAlpha;var n=this;this.graphicsData.length&&b.each(this.graphicsData,function(t,e){t.synsStyle(n)})}},{key:"clone",value:function(){for(var t=new ae,e=t.dirty=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t}},{key:"moveTo",value:function(t,e){var n=new $t([t,e]);return n.closed=!1,this.drawShape(n),this}},{key:"lineTo",value:function(t,e){return this.currentPath?(this.currentPath.shape.points.push(t,e),this.dirty++):this.moveTo(0,0),this}},{key:"quadraticCurveTo",value:function(t,e,n,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,r=0,o=0;0===a.length&&this.moveTo(0,0);for(var l=a[a.length-2],s=a[a.length-1],u=1;u<=20;++u){var h=u/20;r=l+(t-l)*h,o=s+(e-s)*h,a.push(r+(t+(n-t)*h-r)*h,o+(e+(i-e)*h-o)*h)}return this.dirty++,this}},{key:"bezierCurveTo",value:function(t,e,n,i,a,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,l=o[o.length-2],s=o[o.length-1];return o.length-=2,function(t,e,n,i,a,r,o,l,s){var u=8<arguments.length&&void 0!==s?s:[],h=0,d=0,f=0,c=0,p=0;u.push(t,e);for(var g=1,v=0;g<=20;++g)f=(d=(h=1-(v=g/20))*h)*h,p=(c=v*v)*v,u.push(f*t+3*d*v*n+3*h*c*a+p*o,f*e+3*d*v*i+3*h*c*r+p*l)}(l,s,t,e,n,i,a,r,o),this.dirty++,this}},{key:"arcTo",value:function(t,e,n,i,a){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var r=this.currentPath.shape.points,o=r[r.length-2],l=r[r.length-1]-e,s=o-t,u=i-e,h=n-t,d=Math.abs(l*h-s*u);if(d<1e-8||0===a)r[r.length-2]===t&&r[r.length-1]===e||r.push(t,e);else{var f=l*l+s*s,c=u*u+h*h,p=l*u+s*h,g=a*Math.sqrt(f)/d,v=a*Math.sqrt(c)/d,y=g*p/f,x=v*p/c,_=g*h+v*s,m=g*u+v*l,b=s*(v+y),w=l*(v+y),k=h*(g+x),S=u*(g+x),A=Math.atan2(w-m,b-_),C=Math.atan2(S-m,k-_);this.arc(_+t,m+e,a,A,C,h*l<s*u)}return this.dirty++,this}},{key:"arc",value:function(t,e,n,i,a,r){var o=5<arguments.length&&void 0!==r&&r;if(i===a)return this;!o&&a<=i?a+=2*Math.PI:o&&i<=a&&(i+=2*Math.PI);var l=a-i,s=48*Math.ceil(Math.abs(l)/(2*Math.PI));if(0==l)return this;var u=t+Math.cos(i)*n,h=e+Math.sin(i)*n,d=this.currentPath?this.currentPath.shape.points:null;d?d[d.length-2]===u&&d[d.length-1]===h||d.push(u,h):(this.moveTo(u,h),d=this.currentPath.shape.points);for(var f=l/(2*s),c=2*f,p=Math.cos(f),g=Math.sin(f),v=s-1,y=v%1/v,x=0;x<=v;++x){var _=f+i+c*(x+y*x),m=Math.cos(_),b=-Math.sin(_);d.push((p*m+g*b)*n+t,(p*-b+g*m)*n+e)}return this.dirty++,this}},{key:"drawRect",value:function(t,e,n,i){return this.drawShape(new Ut(t,e,n,i)),this}},{key:"drawCircle",value:function(t,e,n){return this.drawShape(new qt(t,e,n)),this}},{key:"drawEllipse",value:function(t,e,n,i){return this.drawShape(new Yt(t,e,n,i)),this}},{key:"drawPolygon",value:function(t){var e=t,n=!0;if(e instanceof $t&&(n=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}var a=new $t(e);return a.closed=n,this.drawShape(a),this}},{key:"clear",value:function(){return 0<this.graphicsData.length&&(this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this}},{key:"drawShape",value:function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.beginPath();var e=new Ft(this.lineWidth,this.strokeStyle,this.strokeAlpha,this.fillStyle,this.fillAlpha,t);return this.graphicsData.push(e),e.type===gt.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e}},{key:"beginPath",value:function(){this.currentPath=null}},{key:"closePath",value:function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this}},{key:"updateLocalBounds",value:function(){var t=1/0,e=-1/0,n=1/0,i=-1/0;if(this.graphicsData.length)for(var a=0,r=0,o=0,l=0,s=0,u=0;u<this.graphicsData.length;u++){var h=this.graphicsData[u],d=h.type,f=h.lineWidth;if(a=h.shape,d===gt.RECT||d===gt.RREC)r=a.x-f/2,o=a.y-f/2,t=r<t?r:t,e=e<r+(l=a.width+f)?r+l:e,n=o<n?o:n,i=i<o+(s=a.height+f)?o+s:i;else if(d===gt.CIRC)r=a.x,o=a.y,t=r-(l=a.radius+f/2)<t?r-l:t,e=e<r+l?r+l:e,n=o-(s=a.radius+f/2)<n?o-s:n,i=i<o+s?o+s:i;else if(d===gt.ELIP)r=a.x,o=a.y,t=r-(l=a.width+f/2)<t?r-l:t,e=e<r+l?r+l:e,n=o-(s=a.height+f/2)<n?o-s:n,i=i<o+s?o+s:i;else for(var c=a.points,p=0,g=0,v=0,y=0,x=0,_=0,m=0,b=0,w=0;w+2<c.length;w+=2)r=c[w],o=c[w+1],p=c[w+2],g=c[w+3],v=Math.abs(p-r),y=Math.abs(g-o),s=f,(l=Math.sqrt(v*v+y*y))<1e-9||(t=(m=(p+r)/2)-(x=(s/l*y+v)/2)<t?m-x:t,e=e<m+x?m+x:e,n=(b=(g+o)/2)-(_=(s/l*v+y)/2)<n?b-_:n,i=i<b+_?b+_:i)}else i=n=e=t=0;return this.Bound={x:t,y:n,width:e-t,height:i-n},this}},{key:"getBound",value:function(){return this.updateLocalBounds().Bound}},{key:"destroy",value:function(){for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webGL)for(var n=0;n<this._webGL[e].data.length;++n)this._webGL[e].data[n].destroy();this.graphicsData=null,this.currentPath=null,this._webGL=null}}]),ae),te=(p(ie,bt),n(ie,[{key:"_draw",value:function(t){0==t.graphicsData.length&&(t.setStyle(this.context),this.draw(t))}},{key:"draw",value:function(){}},{key:"clearGraphicsData",value:function(){this.graphics.clear()}},{key:"$watch",value:function(t,e,n){-1<b.indexOf(yt,t)&&this.graphics.setStyle(this.context),this.watch(t,e,n)}},{key:"initCompProperty",value:function(t){for(var e in t)"id"!=e&&"context"!=e&&(this[e]=t[e])}},{key:"getBound",value:function(){return this.graphics.updateLocalBounds().Bound}}]),ie),ee=(p(ne,bt),n(ne,[{key:"$watch",value:function(t,e){0<=b.indexOf(this.fontProperts,t)&&(this.context[t]=e,this.context.font=this._getFontDeclaration(),this.context.width=this.getTextWidth(),this.context.height=this.getTextHeight())}},{key:"_setContextStyle",value:function(t,e,n){for(var i in e)"textBaseline"!=i&&i in t&&(e[i]||b.isNumber(e[i]))&&("globalAlpha"==i?t.globalAlpha=n:t[i]=e[i])}},{key:"render",value:function(t,e){this._renderText(t,this._getTextLines(),e)}},{key:"resetText",value:function(t){this.text=t.toString(),this.heartBeat()}},{key:"getTextWidth",value:function(){var t=0;return W._pixelCtx&&(W._pixelCtx.save(),W._pixelCtx.font=this.context.$model.font,t=this._getTextWidth(W._pixelCtx,this._getTextLines()),W._pixelCtx.restore()),t}},{key:"getTextHeight",value:function(){return this._getTextHeight(W._pixelCtx,this._getTextLines())}},{key:"_getTextLines",value:function(){return this.text.split(this._reNewline)}},{key:"_renderText",value:function(t,e,n){t&&(t.save(),this._setContextStyle(t,this.context.$model,n),this._renderTextStroke(t,e),this._renderTextFill(t,e),t.restore())}},{key:"_getFontDeclaration",value:function(){var n=this,i=[];return b.each(this.fontProperts,function(t){var e=n.context[t];"fontSize"==t&&(e=parseFloat(e)+"px"),e&&i.push(e)}),i.join(" ")}},{key:"_renderTextFill",value:function(t,e){if(this.context.$model.fillStyle){this._boundaries=[];for(var n=0,i=0,a=e.length;i<a;i++)n+=this._getHeightOfLine(t,i,e),this._renderTextLine("fillText",t,e[i],0,this._getTopOffset()+n,i)}}},{key:"_renderTextStroke",value:function(t,e){if(t&&this.context.$model.strokeStyle&&this.context.$model.lineWidth){var n=0;t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),supportsLineDash&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var i=0,a=e.length;i<a;i++)n+=this._getHeightOfLine(t,i,e),this._renderTextLine("strokeText",t,e[i],0,this._getTopOffset()+n,i);t.closePath(),t.restore()}}},{key:"_renderTextLine",value:function(t,e,n,i,a,r){if(a-=this._getHeightOfLine()/4,"justify"===this.context.$model.textAlign){var o=e.measureText(n).width,l=this.context.$model.width;if(o<l)for(var s=n.split(/\s+/),u=(l-e.measureText(n.replace(/\s+/g,"")).width)/(s.length-1),h=0,d=0,f=s.length;d<f;d++)this._renderChars(t,e,s[d],i+h,a,r),h+=e.measureText(s[d]).width+u;else this._renderChars(t,e,n,i,a,r)}else this._renderChars(t,e,n,i,a,r)}},{key:"_renderChars",value:function(t,e,n,i,a){e[t](n,0,a)}},{key:"_getHeightOfLine",value:function(){return this.context.$model.fontSize*this.context.$model.lineHeight}},{key:"_getTextWidth",value:function(t,e){for(var n=t.measureText(e[0]||"|").width,i=1,a=e.length;i<a;i++){var r=t.measureText(e[i]).width;n<r&&(n=r)}return n}},{key:"_getTextHeight",value:function(t,e){return this.context.$model.fontSize*e.length*this.context.$model.lineHeight}},{key:"_getTopOffset",value:function(){var t=0;switch(this.context.$model.textBaseline){case"top":t=0;break;case"middle":t=-this.context.$model.height/2;break;case"bottom":t=-this.context.$model.height}return t}},{key:"getRect",value:function(){var t=this.context,e=0,n=0;return"center"==t.textAlign&&(e=-t.width/2),"right"==t.textAlign&&(e=-t.width),"middle"==t.textBaseline&&(n=-t.height/2),"bottom"==t.textBaseline&&(n=-t.height),{x:e,y:n,width:t.width,height:t.height}}}]),ne);function ne(t,e){var n;return l(this,ne),e.type="text",null==t&&(t=""),e.context=b.extend({font:"",fontSize:13,fontWeight:"normal",fontFamily:"微软雅黑,sans-serif",textBaseline:"top",textAlign:"left",textDecoration:null,fillStyle:"blank",strokeStyle:null,lineWidth:0,lineHeight:1.2,backgroundColor:null,textBackgroundColor:null},e.context),(n=s(this,u(ne).call(this,e)))._reNewline=/\r?\n/,n.fontProperts=["fontStyle","fontVariant","fontWeight","fontSize","fontFamily"],n.context.font=n._getFontDeclaration(),n.text=t.toString(),n.context.width=n.getTextWidth(),n.context.height=n.getTextHeight(),n}function ie(t){var e;l(this,ie);var n={cursor:(t=W.checkOpt(t)).context.cursor||"default",fillAlpha:t.context.fillAlpha||1,fillStyle:t.context.fillStyle||null,lineCap:t.context.lineCap||"round",lineJoin:t.context.lineJoin||"round",miterLimit:t.context.miterLimit||null,strokeAlpha:t.context.strokeAlpha||1,strokeStyle:t.context.strokeStyle||null,lineType:t.context.lineType||"solid",lineDash:t.context.lineDash||[6,3],lineWidth:t.context.lineWidth||null},i=b.extend(!0,n,t.context);return t.context=i,void 0===t.id&&void 0!==t.type&&(t.id=W.createId(t.type)),(e=s(this,u(ie).call(this,t)))._hoverClass=!1,e.hoverClone=!0,e.pointChkPriority=!0,e._eventEnabled=!1,e.dragEnabled=t.dragEnabled||!1,e._dragDuplicate=null,e.type=e.type||"shape",e.initCompProperty(t),e.isClone?e.graphics=null:(e.graphics=new Jt,e._draw(e.graphics)),e}function ae(t){l(this,ae),this.lineWidth=1,this.strokeStyle=null,this.strokeAlpha=1,this.fillStyle=null,this.fillAlpha=1,this.graphicsData=[],this.currentPath=null,this.dirty=0,this.clearDirty=0,this._webGL={},this.worldAlpha=1,this.tint=16777215,this.Bound={x:0,y:0,width:0,height:0}}function re(t,e){var n=0,i=0;if(1==arguments.length&&b.isObject(t)){var a=t;b.isArray(a)?(n=a[0],i=a[1]):a.hasOwnProperty("x")&&a.hasOwnProperty("y")&&(n=a.x,i=a.y)}this._axes=[n,i]}function oe(t,e,n,i,a,r,o){var l=.25*(n-t),s=.25*(i-e);return(2*(e-n)+l+s)*o+(-3*(e-n)-2*l-s)*r+l*a+e}re.prototype={distance:function(t){var e=this._axes[0]-t._axes[0],n=this._axes[1]-t._axes[1];return Math.sqrt(e*e+n*n)}};var le=Math.PI/180;function se(t,e){var m={points:t};b.isFunction(e)&&(m.smoothFilter=e);var n=function(){var t=m.points,e=m.isLoop,n=m.smoothFilter,i=t.length;if(1==i)return t;for(var a=[],r=0,o=new re(t[0]),l=null,s=1;s<i;s++)l=new re(t[s]),r+=o.distance(l),o=l;l=o=null;var u=r/6;for(u=u<i?i:u,s=0;s<u;s++){var h,d,f,c=s/(u-1)*(e?i:i-1),p=Math.floor(c),g=c-p,v=t[p%i];f=e?(h=t[(p-1+i)%i],d=t[(p+1)%i],t[(p+2)%i]):(h=t[0===p?p:p-1],d=t[i-2<p?i-1:p+1],t[i-3<p?i-1:p+2]);var y=g*g,x=g*y,_=[oe(h[0],v[0],d[0],f[0],g,y,x),oe(h[1],v[1],d[1],f[1],g,y,x)];b.isFunction(n)&&n(_),a.push(_)}return a}();return t&&0<t.length&&n.push(t[t.length-1]),n}function ue(t){return!t||b.isArray(t)&&2<=t.length&&(!b.isNumber(t[0])||!b.isNumber(t[1]))||"x"in t&&!b.isNumber(t.x)||"y"in t&&!b.isNumber(t.y)}Math.PI;var he=function(t){return t*le},de=function(t){var e=(360+t%360)%360;return 0==e&&0!==t&&(e=360),e},fe=function(t,e){for(var n=[],i=2*Math.PI/t,a=-Math.PI/2,r=0,o=t;r<o;r++)n.push([e*Math.cos(a),e*Math.sin(a)]),a+=i;return n},ce=function(t,n){var i=[],a=t.length,r=[];return b.each(t,function(t,e){ue(t)?(r.length&&(i=i.concat(se(r,n)),r=[]),i.push(t)):r.push(t),e==a-1&&r.length&&(i=i.concat(se(r,n)),r=[])}),i},pe=function(t){return!ue(t)},ge=(p(Ne,te),n(Ne,[{key:"watch",value:function(t,e){"pointList"!=t&&"smooth"!=t&&"lineType"!=t||("pointList"==t&&this.context.smooth&&(this.context.pointList=ce(e,this.context.smoothFilter),this._pointList=e),"smooth"==t&&(this.context.pointList=e?ce(this._pointList,this.context.smoothFilter):this._pointList),this.graphics.clear())}},{key:"draw",value:function(t){for(var e=this.context.pointList,n=!1,i=0,a=e.length;i<a;i++){var r=e[i];n=!!pe(r)&&(n?t.lineTo(r[0],r[1]):t.moveTo(r[0],r[1]),!0)}return this}}]),Ne),ve=(p(Re,te),n(Re,[{key:"watch",value:function(t){"r"==t&&this.graphics.clear()}},{key:"draw",value:function(t){var e=this.context.$model.r;e<0&&(e=0),t.drawCircle(0,0,e)}}]),Re),ye=(p(Fe,te),n(Fe,[{key:"watch",value:function(t){"path"==t&&this.graphics.clear()}},{key:"_parsePathData",value:function(t){if(this.__parsePathData)return this.__parsePathData;if(!t)return[];this.__parsePathData=[];var e=b.compact(t.replace(/[Mm]/g,"\\r$&").split("\\r")),n=this;return b.each(e,function(t){n.__parsePathData.push(n._parseChildPathData(t))}),this.__parsePathData}},{key:"_parseChildPathData",value:function(t){var e,n=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];for(n=(n=(n=(n=n.replace(/  /g," ")).replace(/ /g,",")).replace(/(\d)-/g,"$1,-")).replace(/,,/g,","),e=0;e<i.length;e++)n=n.replace(new RegExp(i[e],"g"),"|"+i[e]);var a=n.split("|"),r=[],o=0,l=0;for(e=1;e<a.length;e++){var s=a[e],u=s.charAt(0),h=(s=(s=s.slice(1)).replace(new RegExp("e,-","g"),"e-")).split(",");0<h.length&&""===h[0]&&h.shift();for(var d=0;d<h.length;d++)h[d]=parseFloat(h[d]);for(;0<h.length&&!isNaN(h[0]);){var f,c,p,g=null,v=[],y=o,x=l;switch(u){case"l":o+=h.shift(),l+=h.shift(),g="L",v.push(o,l);break;case"L":o=h.shift(),l=h.shift(),v.push(o,l);break;case"m":o+=h.shift(),l+=h.shift(),g="M",v.push(o,l),u="l";break;case"M":o=h.shift(),l=h.shift(),g="M",v.push(o,l),u="L";break;case"h":o+=h.shift(),g="L",v.push(o,l);break;case"H":o=h.shift(),g="L",v.push(o,l);break;case"v":l+=h.shift(),g="L",v.push(o,l);break;case"V":l=h.shift(),g="L",v.push(o,l);break;case"C":v.push(h.shift(),h.shift(),h.shift(),h.shift()),o=h.shift(),l=h.shift(),v.push(o,l);break;case"c":v.push(o+h.shift(),l+h.shift(),o+h.shift(),l+h.shift()),o+=h.shift(),l+=h.shift(),g="C",v.push(o,l);break;case"S":f=o,c=l,"C"===(p=r[r.length-1]).command&&(f=o+(o-p.points[2]),c=l+(l-p.points[3])),v.push(f,c,h.shift(),h.shift()),o=h.shift(),l=h.shift(),g="C",v.push(o,l);break;case"s":f=o,c=l,"C"===(p=r[r.length-1]).command&&(f=o+(o-p.points[2]),c=l+(l-p.points[3])),v.push(f,c,o+h.shift(),l+h.shift()),o+=h.shift(),l+=h.shift(),g="C",v.push(o,l);break;case"Q":v.push(h.shift(),h.shift()),o=h.shift(),l=h.shift(),v.push(o,l);break;case"q":v.push(o+h.shift(),l+h.shift()),o+=h.shift(),l+=h.shift(),g="Q",v.push(o,l);break;case"T":f=o,c=l,"Q"===(p=r[r.length-1]).command&&(f=o+(o-p.points[0]),c=l+(l-p.points[1])),o=h.shift(),l=h.shift(),g="Q",v.push(f,c,o,l);break;case"t":f=o,c=l,"Q"===(p=r[r.length-1]).command&&(f=o+(o-p.points[0]),c=l+(l-p.points[1])),o+=h.shift(),l+=h.shift(),g="Q",v.push(f,c,o,l);break;case"A":y=o,x=l,g="A",v=[h.shift(),h.shift(),h.shift(),h.shift(),h.shift(),o=h.shift(),l=h.shift(),y,x];break;case"a":y=o,x=l,g="A",v=[h.shift(),h.shift(),h.shift(),h.shift(),h.shift(),o+=h.shift(),l+=h.shift(),y,x]}r.push({command:g||u,points:v})}"z"!==u&&"Z"!==u||r.push({command:"z",points:[]})}return r}},{key:"draw",value:function(t){this.__parsePathData=null,this.context.$model.pointList=[];for(var e=this._parsePathData(this.context.$model.path),n=0,i=e.length;n<i;n++)for(var a=0,r=e[n].length;a<r;a++){var o=e[n][a].command,l=e[n][a].points;switch(o){case"L":t.lineTo(l[0],l[1]);break;case"M":t.moveTo(l[0],l[1]);break;case"C":t.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"Q":t.quadraticCurveTo(l[0],l[1],l[2],l[3]);break;case"A":Ht(t,l[7],l[8],l);break;case"z":t.closePath()}}return this}}]),Fe),xe=(p(Ee,ye),n(Ee,[{key:"watch",value:function(t){"hr"!=t&&"vr"!=t||(this.context.$model.path=this.createPath())}},{key:"createPath",value:function(){var t=this.context.$model;return"M 0 "+t.hr+" C "+t.hr+" "+t.hr+" "+3*t.hr/2+" "+-t.hr/3+" 0 "+-t.vr+" C "+3*-t.hr/2+" "+-t.hr/3+" "+-t.hr+" "+t.hr+" 0 "+t.hr+"z"}}]),Ee),_e=(p(Le,te),n(Le,[{key:"watch",value:function(t){"hr"!=t&&"vr"!=t||this.graphics.clear()}},{key:"draw",value:function(t){t.drawEllipse(0,0,2*this.context.$model.hr,2*this.context.$model.vr)}}]),Le),me=(p(De,te),n(De,[{key:"watch",value:function(t){"pointList"!=t&&"smooth"!=t&&"lineType"!=t||this.graphics.clear()}},{key:"draw",value:function(t){var e=this.context.pointList;if(!(e.length<2)){t.moveTo(e[0][0],e[0][1]);for(var n=1,i=e.length;n<i;n++)t.lineTo(e[n][0],e[n][1]);t.closePath()}}}]),De),be=(p(Ie,me),n(Ie,[{key:"watch",value:function(t){"r"!=t&&"n"!=t||(this.context.$model.pointList=fe(this.context.$model.n,this.context.$model.r)),"pointList"!=t&&"smooth"!=t&&"lineType"!=t||this.graphics.clear()}}]),Ie),we=(p(Me,te),n(Me,[{key:"watch",value:function(t){"x"!=t&&"y"!=t||this.graphics.clear()}},{key:"draw",value:function(t){var e=this.context.$model;return t.moveTo(e.start.x,e.start.y),t.lineTo(e.end.x,e.end.y),this}}]),Me),ke=(p(Te,te),n(Te,[{key:"watch",value:function(t){"width"!=t&&"height"!=t&&"radius"!=t||this.graphics.clear()}},{key:"_buildRadiusPath",value:function(t){var e=this.context.$model,n=e.width,i=e.height,a=W.getCssOrderArr(e.radius),r=t,o=1;0<=i&&(o=-1),r.moveTo(parseInt(0+a[0]),parseInt(i)),r.lineTo(parseInt(0+n-a[1]),parseInt(i)),0!==a[1]&&r.quadraticCurveTo(0+n,i,parseInt(0+n),parseInt(i+a[1]*o)),r.lineTo(parseInt(0+n),parseInt(0-a[2]*o)),0!==a[2]&&r.quadraticCurveTo(0+n,0,parseInt(0+n-a[2]),parseInt(0)),r.lineTo(parseInt(0+a[3]),parseInt(0)),0!==a[3]&&r.quadraticCurveTo(0,0,parseInt(0),parseInt(0-a[3]*o)),r.lineTo(parseInt(0),parseInt(0+i+a[0]*o)),0!==a[0]&&r.quadraticCurveTo(0,0+i,parseInt(0+a[0]),parseInt(0+i))}},{key:"draw",value:function(t){var e=this.context.$model;e.radius.length?this._buildRadiusPath(t):t.drawRect(0,0,e.width,e.height),t.closePath()}}]),Te),Se=(p(Oe,te),n(Oe,[{key:"watch",value:function(t){"r0"!=t&&"r"!=t&&"startAngle"!=t&&"endAngle"!=t&&"clockwise"!=t||(this.isRing=!1,this.graphics.clear())}},{key:"draw",value:function(t){var e=this.context.$model,n=void 0===e.r0?0:e.r0,i=e.r,a=de(e.startAngle),r=de(e.endAngle);e.startAngle!=e.endAngle&&Math.abs(e.startAngle-e.endAngle)%360==0&&(this.isRing=!0,a=0,r=360),a=he(a),r=he(r);var o=t;this.isRing?0==e.r0?o.drawCircle(0,0,e.r):(e.fillStyle&&e.fillAlpha&&(o.beginPath(),o.arc(0,0,i,a,r,e.clockwise),0==e.r0?o.lineTo(0,0):o.arc(0,0,n,r,a,!e.clockwise),o.closePath(),o.currentPath.lineWidth=0,o.currentPath.strokeStyle=null,o.currentPath.strokeAlpha=0,o.currentPath.line=!1),e.lineWidth&&e.strokeStyle&&e.strokeAlpha&&(o.beginPath(),o.arc(0,0,i,a,r,e.clockwise),o.closePath(),o.currentPath.fillStyle=null,o.currentPath.fill=!1,o.beginPath(),o.arc(0,0,n,r,a,!e.clockwise),o.closePath(),o.currentPath.fillStyle=null,o.currentPath.fill=!1)):(o.beginPath(),o.arc(0,0,i,a,r,e.clockwise),0==e.r0?o.lineTo(0,0):o.arc(0,0,n,r,a,!e.clockwise),o.closePath())}}]),Oe),Ae=(p(Pe,te),n(Pe,[{key:"watch",value:function(t){"x"!=t&&"y"!=t&&"theta"!=t&&"headlen"!=t&&"angle"!=t||this.graphics.clear()}},{key:"draw",value:function(t){var e=this.context.$model,n=e.control.x,i=e.control.y,a=e.point.x,r=e.point.y,o=null!=e.angle?e.angle-180:180*Math.atan2(i-r,n-a)/Math.PI,l=(o+e.theta)*Math.PI/180,s=(o-e.theta)*Math.PI/180,u=e.headlen*Math.cos(l),h=e.headlen*Math.sin(l),d=e.headlen*Math.cos(s),f=e.headlen*Math.sin(s),c=a+u,p=r+h;return t.moveTo(c,p),t.lineTo(a,r),t.lineTo(a+d,r+f),e.fillStyle&&(t.lineTo(c,p),t.closePath()),this}}]),Pe),Ce={version:"2.0.67",_:b,$:j,event:Z,App:Lt};function Pe(t){l(this,Pe);var e=b.extend(!0,{control:{x:0,y:0},point:{x:0,y:0},angle:null,theta:30,headlen:6,lineWidth:1,strokeStyle:"#666",fillStyle:null},t.context);return t.context=e,t.type="arrow",s(this,u(Pe).call(this,t))}function Oe(t){l(this,Oe);var e=b.extend(!0,{pointList:[],r0:0,r:0,startAngle:0,endAngle:0,clockwise:!1},t.context);return t.context=e,t.regAngle=[],t.isRing=!1,t.type="sector",s(this,u(Oe).call(this,t))}function Te(t){l(this,Te);var e=b.extend(!0,{width:0,height:0,radius:[]},t.context);return t.context=e,t.type="rect",s(this,u(Te).call(this,t))}function Me(t){l(this,Me);var e=b.extend(!0,{start:{x:0,y:0},end:{x:0,y:0}},t.context);return t.context=e,t.type="line",s(this,u(Me).call(this,t))}function Ie(t){l(this,Ie);var e=b.extend(!0,{pointList:[],r:0,n:0},t.context);return e.pointList=fe(e.n,e.r),t.context=e,t.type="isogon",s(this,u(Ie).call(this,t))}function De(t){l(this,De);var e=b.extend(!0,{lineType:null,smooth:!1,pointList:[],smoothFilter:W.__emptyFunc},t.context);if(!t.isClone){e.pointList[0];var n=e.pointList.slice(-1)[0];e.smooth&&(e.pointList.unshift(n),e.pointList=ce(e.pointList))}return t.context=e,t.type="polygon",s(this,u(De).call(this,t))}function Le(t){return l(this,Le),t=b.extend(!0,{type:"ellipse",context:{hr:0,vr:0}},W.checkOpt(t)),s(this,u(Le).call(this,t))}function Ee(t){var e;return l(this,Ee),t=b.extend(!0,{type:"droplet",context:{hr:0,vr:0}},W.checkOpt(t)),(e=s(this,u(Ee).call(this,t))).context.$model.path=e.createPath(),e}function Fe(t){l(this,Fe);var e=b.extend(!0,{pointList:[],path:""},t.context);return t.context=e,t.__parsePathData=null,t.type="path",s(this,u(Fe).call(this,t))}function Re(t){return l(this,Re),t=b.extend(!0,{type:"circle",xyToInt:!1,context:{r:0}},W.checkOpt(t)),s(this,u(Re).call(this,t))}function Ne(t){var e;l(this,Ne),t=W.checkOpt(t);var n=b.extend(!0,{lineType:null,smooth:!1,pointList:[],smoothFilter:W.__emptyFunc},t.context);return!t.isClone&&n.smooth&&(n.pointList=ce(n.pointList,n.smoothFilter)),t.context=n,t.type="brokenline",(e=s(this,u(Ne).call(this,t)))._pointList=n.pointList,e}Ce.Display={DisplayObject:bt,DisplayObjectContainer:wt,Stage:kt,Sprite:Et,Shape:te,Point:tt,Text:ee},Ce.Shapes={BrokenLine:ge,Circle:ve,Droplet:xe,Ellipse:_e,Isogon:be,Line:we,Path:ye,Polygon:me,Rect:ke,Sector:Se,Arrow:Ae},Ce.AnimationFrame=ft,Ce.utils=W;var je=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={_eval:function(t,e,n,i){return n?new Function(n,t+"; return ".concat(e,";"))(i):new Function(t+"; return ".concat(e,";"))()},parse:function(t,e,n,i){try{if(!(e&&e.length&&2===e.length&&e[1]>e[0]))return this._eval(t,"options");var a=this._eval(t,"variables");"function"==typeof a&&(a=a(n)||{});var r={};void 0!==i&&(r="function"==typeof i?i(n):i),r=Ce._.extend(!0,{},a,r);var o=t.slice(0,e[0])+t.slice(e[1]);return this._eval(o,"options","variables",r)}catch(t){return console.log("parse error"),{}}}};e.default=n});t(je);var We=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=H(je),n=["#ff8533","#73ace6","#82d982","#e673ac","#cd6bed","#8282d9","#c0e650","#e6ac73","#6bcded","#73e6ac","#ed6bcd","#9966cc"],a={},i={create:function(t,e,n){function i(){r.instances[a.id]=null,delete r.instances[a.id]}var a=null,r=this,o=JSON.parse(JSON.stringify(e)),l=Ce._.clone(n),s=Ce.$.query(t).getAttribute("chart_id");if(null!=s){var u=r.instances[s];u&&(u.destroy(),u.off&&u.off("destroy",i)),delete r.instances[s]}var h=r._getComponentModules(),d=r._getComponentModule("chart");return(a=new d(t,o,l,h))&&(a.draw(),(r.instances[a.id]=a).on("destroy",i)),a},setGlobalTheme:function(t){n=t},getGlobalTheme:function(){return n},parse:o.default,instances:{},getChart:function(t){return this.instances[t]},resize:function(){for(var t in this.instances)this.instances[t].resize()},getOptionsOld:function(t){var e,n="[[JSON_FUN_PREFIX_",i="_JSON_FUN_SUFFIX]]";return e=decodeURIComponent(this.options[t]||"%7B%7D"),JSON.parse(e,function(t,e){return"string"==typeof e&&0<e.indexOf(i)&&0==e.indexOf(n)?new Function("return "+e.replace(n,"").replace(i,""))():e})||{}},getOptionsNew:function(t,e,n){var i=this.options[t],a=decodeURIComponent(i.code),r=i.range;return o.default.parse(a,r,e,n)},getOptions:function(t,e,n,i){if(!this.options[t])return e||{};var a="string"==typeof this.options[t]?this.getOptionsOld(t):this.getOptionsNew(t,n||[],i||{});return e&&(a=Ce._.extend(!0,a,e)),a},calculateOptions:function(t,e,n){return this.getOptions(t,void 0,e,n)},_getComponentModules:function(){var i=a;return i.modules||(i.modules={}),i.get||(i.get=function(t,e){e=e||"empty",t=t.toLowerCase(),e=e.toLowerCase();var n=i.modules[t];if(n&&n[e])return n[e]}),i},registerComponent:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:"empty",a=this._getComponentModules().modules;e=e.toLowerCase(),i=i.toLowerCase();var r=a[e];return(r=r||(a[e]={}))[i]||(r[i]=t),a},_getComponentModule:function(t,e){var n=1<arguments.length&&void 0!==e?e:"empty";t=t.toLowerCase(),n=n.toLowerCase();var i=this._getComponentModules().modules[t];return i?i[n]:void 0},setAnimationEnabled:function(t){return Ce.AnimationFrame.setAnimationEnabled(t)},getAnimationEnabled:function(){return Ce.AnimationFrame.getAnimationEnabled()},layout:{},registerLayout:function(t,e){this.layout[t]=e},props:{},getProps:function(){function t(t){if("chart"==t)return 1;u[t]={detail:t,propertys:{}};var e=void 0;"graphs"==t&&(e=Ce._.map(h.graphs,function(t,e){return e}),u.graphs.documentation="可选的graphs类型有：\n"+e.join("\n"));var n,i,a,r={},o=null;for(var l in h[t]){if(o)break;o=h[t][l].prototype}for(var s in function t(e){var n=e.constructor.__proto__;if(n._isComponentRoot||t(n.prototype),n.defaultProps&&Ce._.isFunction(n.defaultProps)){var i=n.defaultProps();Ce._.extend(r,i)}}(o),u[t].propertys=Ce._.extend(r,u[t].propertys),h[t])n=s,a=i=void 0,i=h[t][n],function i(t){if(t._props){var e=Ce._.isArray(t._props);for(var n in t._props){e||(t[n]={detail:n,propertys:{}});var a=t._props[n];a.defaultProps&&(r=void 0,r=a.defaultProps(),o={},function t(e){if(e.__proto__.__proto__&&t(e.__proto__),e.defaultProps&&Ce._.isFunction(e.defaultProps)){var n=e.defaultProps();n._props&&i(n),n&&Ce._.extend(o,n)}}(a.__proto__),r=Ce._.extend(o,r),e?Ce._.extend(t,r):(t[n].propertys=r,i(t[n].propertys)))}}var r,o}(a=i.defaultProps?i.defaultProps():{}),a=Ce._.extend({},r,a),r.type?(u[t].typeMap||(u[t].typeMap={}),"graphs"==t&&(a.type.values=e,a.type.documentation="可选的graphs类型有：\n"+e.join("\n")),u[t].typeMap[n]=a):Ce._.extend(u[t].propertys,a)}var u={},h=this._getComponentModules().modules;for(var e in h)t(e);return this.props=u,this.props}};e.default=i});function ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ge(t,e,n){return e&&Be(t.prototype,e),n&&Be(t,n),t}t(We);function Ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var He=e(function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n});function Ue(t,e){return!e||"object"!==He(e)&&"function"!=typeof e?Ve(t):e}var qe=e(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),Ye=e(function(n){function i(t,e){return n.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}n.exports=i});function $e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ye(t,e)}var Xe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,a){var l={length:0,org:[],jsonOrg:[],data:[],getRowDataAt:o,getRowDataOf:function(i){i=i||{};var t=[],a=0;for(var e in i)a++;if(a)for(var n=function(e){var n=0;Ce._.each(l.data,function(t){t.field in i&&t.data[e]==i[t.field]&&n++}),n==a&&t.push(o(e))},r=l.range.start;r<=l.range.end;r++)n(r);return t},getFieldData:function(e){var t=[],n=Ce._.find(l.data,function(t){return t.field==e});return n&&(t=n.data),t},getDataOrg:function t(e,i,n,a){a=a||0;var r=n||c();if(r){i=i||function(t){return t},Ce._.isArray(e)||(e=[e]);for(var o=[],l=0,s=e.length;l<s;l++)if(Ce._.isArray(e[l]))o.push(t(e[l],i,n,a+1));else{var u=o;a||(u=[]);for(var h=0,d=r.length;h<d;h++)if(e[l]==r[h].field){u.push(f(r[h].data));break}a||o.push(u)}return o}function f(t){for(var e=0,n=t.length;e<n;e++)t[e]=i(t[e]);return t}},resetData:function(t){if(t){l.org=[],l.jsonOrg=[],l.fields=[],l.data=[];var e=Ce._.extend(!0,{},l.range);n(t),Ce._.extend(!0,l.range,e),l.range.end>l.length-1&&(l.range.end=l.length-1),(l.range.start>l.length-1||l.range.start>l.range.end)&&(l.range.start=0)}l.data=c()},fields:[],range:{start:0,end:0},filters:{}};function n(t){if(!(t=JSON.parse(JSON.stringify(t,function(t,e){return void 0===e?null:e})))||0==t.length)return l;if(0<t.length&&!Ce._.isArray(t[0])?(t=function(t){if(null==t&&(t=[]),0<t.length&&!Ce._.isArray(t[0])){for(var e=[],n=[],i=0,a=0,r=t.length;a<r;a++){var o=t[a];if(0==a){for(var l in o)n.push(l);e.push(n),i=n.length}for(var s=[],u=0;u<i;u++)s.push(o[n[u]]);e.push(s)}return e}return t}(l.jsonOrg=t),l.org=t):(l.org=t,l.jsonOrg=function(t){var e=t;if(0<t.length&&Ce._.isArray(t[0])){e=[];for(var n=t[0],i=n.length,a=1,r=t.length;a<r;a++){for(var o={},l=0;l<i;l++)o[n[l]]=t[a][l];e.push(o)}return e}}(t)),l.range.end=t.length-1-1,a){var e=a.dataZoom||a.datazoom;e&&e.range&&Ce._.extend(l.range,e.range)}if(t.length&&t[0].length&&!~t[0].indexOf("__index__"))for(var n=0,i=t.length;n<i;n++)n?(t[n].push(n-1),l.jsonOrg[n-1].__index__=n-1):t[0].push("__index__");return l.fields=t[0]?t[0]:[],l}function c(){for(var a=[],t=0,e=l.fields.length;t<e;t++){var n={};n.field=l.fields[t],n.index=t,n.data=[],a.push(n)}var i,r,o=(i=function(i){Ce._.each(l.fields,function(e){var t=i[e];isNaN(t)||""===t||null===t||(t=Number(t));var n=Ce._.find(a,function(t){return t.field==e});n&&n.data.push(t)})},r=[],Ce._.each(l.jsonOrg.slice(l.range.start,l.range.end+1),function(e){var n=!0;Ce._.keys(l.filters).length&&Ce._.each(l.filters,function(t){if(Ce._.isFunction(t)&&!t(e))return n=!1}),n&&(i(e),r.push(e))}),r);return l.length=o.length,a}function o(t){for(var e={},n=l.data,i=0;i<n.length;i++)e[n[i].field]=n[i].data[t];return e}return n(t),l.data=c(),l}});t(Xe),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=H(ze),i=H(Ge),o=H(Ue),l=H(qe),a=H($e),s=H(We),u=H(Ce),h=H(Xe),f=u.default._,d=u.default.$,c=u.default.event,p=(n=c.Dispatcher,(0,a.default)(g,n),(0,i.default)(g,[{key:"init",value:function(){var e=this,a=this,n=this._opt;function t(i){if(-1==f.indexOf(e.__highModules,i)){var t=e._opt[i];f.isArray(t)||(t=[t]),f.each(t,function(t){var e=a.componentModules.get(i,t.type);if(e){var n=new e(t,a);a.components.push(n)}})}}for(var i in this.padding=this._getPadding(),f.each(this.__highModules,function(i){if(n[i]){var t=f.flatten([n[i]]);"theme"==i&&(t=[t]),f.each(t,function(t){if(("coord"!=i||t.type)&&("graphs"!=i||t.field||t.keyField)){var e=a.componentModules.get(i,t.type);if(e){var n=new e(t,a);a.components.push(n)}}})}}),this._opt)t(i)}},{key:"draw",value:function(t){var n=this;t=t||{};var e=this.getComponent({name:"coord"});e&&e.horizontal&&this._drawBeginHorizontal();var i=this.width-this.padding.left-this.padding.right,a=this.height-this.padding.top-this.padding.bottom,r={x:this.padding.left,y:this.padding.top};if(e&&(e.draw(t),i=e.width,a=e.height,r=e.origin),0!=this.dataFrame.length){var o=this.getComponents({name:"graphs"}),l=o.length,s=0;t=f.extend(t,{width:i,height:a,origin:r}),f.each(o,function(e){e.on("complete",function(t){++s==l&&n.fire("complete"),e.inited=!0}),e.draw(t)});for(var u=0,h=this.components.length;u<h;u++){var d=this.components[u];-1==f.indexOf(this.__highModules,d.name)&&d.draw(t)}this._bindEvent(),e&&e.horizontal&&this._drawEndHorizontal()}else n.fire("complete")}},{key:"_drawBeginHorizontal",value:function(){var t=this.padding,e=t.top;t.top=t.right,t.right=t.bottom,t.bottom=t.left,t.left=e}},{key:"_drawEndHorizontal",value:function(){var t=this.graphsSprite.context;t.x+=(this.width-this.height)/2,t.y+=(this.height-this.width)/2,t.rotation=90,t.rotateOrigin={x:this.height/2,y:this.width/2},this._horizontalGraphsText()}},{key:"_horizontalGraphsText",value:function(){f.each(this.getComponents({name:"graphs"}),function(t){!function e(t){if(t.children&&f.each(t.children,function(t){e(t)}),"text"==t.type&&!t.__horizontal){var n=t.context;n.width,n.height,n.rotation=n.rotation-90,t.__horizontal=!0}}(t.sprite)})}},{key:"_getPadding",value:function(){var t=20;this._opt.coord&&"padding"in this._opt.coord&&(f.isObject(this._opt.coord.padding)||(t=this._opt.coord.padding));var e={top:t,right:t,bottom:t,left:t};return this._opt.coord&&"padding"in this._opt.coord&&f.isObject(this._opt.coord.padding)&&(e=f.extend(e,this._opt.coord.padding)),e}},{key:"getTheme",value:function(t){var e=s.default.getGlobalTheme(),n=this.getComponent({name:"theme"});return n&&(e=n.get()),null!=t?e[t%e.length]||"#ccc":e}},{key:"setCoord_Graphs_Sp",value:function(){this.coordSprite=new u.default.Display.Sprite({id:"coordSprite"}),this.stage.addChild(this.coordSprite),this.graphsSprite=new u.default.Display.Sprite({id:"graphsSprite"}),this.stage.addChild(this.graphsSprite)}},{key:"destroy",value:function(){this.clean(),this.el&&(this.el.removeAttribute("chart_id"),this.el.removeAttribute("chartx_version"),this.canvax.destroy(),this.el=null),this._destroy&&this._destroy(),this.fire("destroy")}},{key:"clean",value:function(){for(var t=0,e=this.canvax.children.length;t<e;t++)for(var n=this.canvax.getChildAt(t),i=0,a=n.children.length;i<a;i++)n.getChildAt(i).destroy(),i--,a--;this.setCoord_Graphs_Sp(),this.components=[],this.canvax.domView.innerHTML=""}},{key:"resize",value:function(){var t=parseInt(this.el.offsetWidth),e=parseInt(this.el.offsetHeight);t==this.width&&e==this.height||(this.width=t,this.height=e,this.canvax.resize(),this.inited=!1,this.clean(),this.init(),this.draw({resize:!0}),this.inited=!0)}},{key:"reset",value:function(t,e){t&&(this._opt=t),e&&(this._data=e),this.dataFrame=this.initData(this._data,t),this.clean(),this.init(),this.draw()}},{key:"resetData",value:function(t,e){var n=this;this._data=t;var i=this.dataFrame.org.length;if(this.dataFrame.resetData(t),!i)return this.clean(),this.init(),void this.draw(this._opt);var a=this.getComponent({name:"coord"});a&&a.resetData(this.dataFrame,e),f.each(this.getComponents({name:"graphs"}),function(t){t.resetData(n.dataFrame,e)}),this.componentsReset(e),a&&a.horizontal&&this._horizontalGraphsText(),this.fire("resetData")}},{key:"initData",value:function(){return h.default.apply(this,arguments)}},{key:"componentsReset",value:function(n){var i=this;f.each(this.components,function(t,e){-1==f.indexOf(i.__highModules,t.name)&&(n&&n.comp&&n.comp.__cid==t.__cid||t.reset&&t.reset(i[t.type]||{},i.dataFrame))})}},{key:"getComponentById",value:function(e){var n;return f.each(this.components,function(t){if(t.id&&t.id==e)return n=t,!1}),n}},{key:"getComponent",value:function(t){return this.getComponents(t)[0]}},{key:"getComponents",value:function(i,t){var a=[],r=0;for(var e in t=t||this.components,i)r++;return r?(f.each(t,function(t){var e=0;for(var n in i)JSON.stringify(t[n])==JSON.stringify(i[n])&&e++;r==e&&a.push(t)}),a):t}},{key:"getGraph",value:function(t){return this.getGraphs(t)[0]}},{key:"getGraphs",value:function(t){return this.getComponents(t,this.getComponents({name:"graphs"}))}},{key:"getGraphById",value:function(e){var n;return f.each(this.getComponents({name:"graphs"}),function(t){if(t.id==e)return n=t,!1}),n}},{key:"getCoord",value:function(t){return this.getComponent(f.extend(!0,{name:"coord"},t))}},{key:"getLegendData",value:function(){var i=this,a=[];if(f.each(this.getComponents({name:"graphs"}),function(t){f.each(t.getLegendData(),function(e){if(!f.find(a,function(t){return t.name==e.name})){var t=f.extend(!0,{},e);t.color=e.fillStyle||e.color||e.style,a.push(t)}})}),a.length)return a;var t=i.getComponent({name:"coord"});return f.each(f.flatten(t.fieldsMap),function(e,t){var n=!1;f.each(i._opt.graphs,function(t){if(-1<f.indexOf(f.flatten([t.field]),e.field))return!(n=!0)}),n&&a.push({enabled:e.enabled,name:e.field,field:e.field,ind:e.ind,color:e.color,yAxis:e.yAxis})}),a}},{key:"show",value:function(e,n){var t=this.getComponent({name:"coord"});t&&t.show(e,n),f.each(this.getComponents({name:"graphs"}),function(t){t.show(e,n)}),this.componentsReset(n)}},{key:"hide",value:function(e,n){var t=this.getComponent({name:"coord"});t&&t.hide(e,n),f.each(this.getComponents({name:"graphs"}),function(t){t.hide(e,n)}),this.componentsReset(n)}},{key:"_bindEvent",value:function(){var i=this;this.on(c.types.get(),function(e){e.eventInfo&&f.each(this.getGraphs(),function(t){t.triggerEvent(e)});var t=i.getComponent({name:"tips"}),n=i.getComponent({name:"coord"});t&&(i._setGraphsTipsInfo.apply(i,[e]),"mouseover"!=e.type&&"mousedown"!=e.type||(t.show(e),i._tipsPointerAtAllGraphs(e)),"mousemove"==e.type&&(t.move(e),i._tipsPointerAtAllGraphs(e)),"mouseout"!=e.type||e.toTarget&&n&&n.induce&&n.induce.containsPoint(n.induce.globalToLocal(e.target.localToGlobal(e.point)))||(t.hide(e),i._tipsPointerHideAtAllGraphs(e)))})}},{key:"_setGraphsTipsInfo",value:function(e){e.eventInfo||(e.eventInfo={});var t=this.getComponent({name:"coord"});if(t&&(e.eventInfo=t.getTipsInfoHandler(e)),"tipsEnabled"in e.eventInfo||(e.eventInfo.tipsEnabled=!0),!e.eventInfo.nodes||!e.eventInfo.nodes.length){var n=[],i=e.eventInfo.iNode;f.each(this.getComponents({name:"graphs"}),function(t){n=n.concat(t.getNodesAt(i,e))}),e.eventInfo.nodes=n}}},{key:"_tipsPointerAtAllGraphs",value:function(e){f.each(this.getComponents({name:"graphs"}),function(t){t.tipsPointerOf(e)})}},{key:"_tipsPointerHideAtAllGraphs",value:function(e){f.each(this.getComponents({name:"graphs"}),function(t){t.tipsPointerHideOf(e)})}}]),g);function g(t,e,n,i){var a;return(0,r.default)(this,g),(a=(0,o.default)(this,(0,l.default)(g).call(this))).componentModules=i,a._node=t,a._data=e,a._opt=n,a.dataFrame=a.initData(e,n),a.el=d.query(t),a.width=parseInt(a.el.offsetWidth),a.height=parseInt(a.el.offsetHeight),a.padding=null,a.canvax=new u.default.App({el:a.el,webGL:!1}),a.canvax.registEvent(),a.id="chartx_"+a.canvax.id,a.el.setAttribute("chart_id",a.id),a.el.setAttribute("chartx_version","2.0"),a.stage=new u.default.Display.Stage({id:"main-chart-stage"}),a.canvax.addChild(a.stage),a.setCoord_Graphs_Sp(),a.__highModules=["theme","coord","graphs"],a.components=[],a.inited=!1,a.init(),a}s.default.registerComponent(p,"chart");var v=p;e.default=v}));var Ke=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.numAddSymbol=function(t,e){var n=Number(t),i=e||",";if(!n)return String(t);if(1e3<=n){var a=parseInt(n/1e3);return String(t.toString().replace(a,a+i))}return String(t)},e.getDisMinATArr=function(t,e){for(var n=0,i=Math.abs(t-e[0]),a=1,r=e.length;a<r;a++)i>Math.abs(t-e[a])&&(i=Math.abs(t-e[a]),n=a);return n},e.getPath=function(t){var e="",n={x:0,y:0};e=Ce._.isArray(t[0])?(n.x=t[0][0],n.y=t[0][1],"M"+t[0][0]+" "+t[0][1]):(n=t[0],"M"+t[0].x+" "+t[0].y);for(var i=1,a=t.length;i<a;i++){var r,o=0,l=t[i];r=Ce._.isArray(l)?(o=l[0],l[1]):(o=l.x,l.y),o==n.x&&r==n.y?e+=" z":e+=" L"+o+" "+r}return e},e.getDefaultProps=function t(e,n){var i=1<arguments.length&&void 0!==n?n:{};for(var a in e)a.indexOf("_")&&(e[a]&&e[a].propertys?(i[a]={},t(e[a].propertys,i[a])):!Ce._.isObject(e[a])||Ce._.isFunction(e[a])||Ce._.isArray(e[a])?i[a]=e[a]:i[a]=e[a].default);return i}});t(Ke),Ke.numAddSymbol,Ke.getDisMinATArr,Ke.getPath,Ke.getDefaultProps;var Ze=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(We),h=H(Ce),d=h.default.event,f=h.default._,c=(n=d.Dispatcher,(0,s.default)(p,n),(0,l.default)(p,null,[{key:"defaultProps",value:function(){return{enabled:{detail:"是否开启该组件",default:!1}}}},{key:"registerComponent",value:function(t,e,n){return u.default.registerComponent(t,e,n)}},{key:"_isComponentRoot",value:function(){return!0}}]),(0,l.default)(p,[{key:"init",value:function(){}},{key:"draw",value:function(){}},{key:"destroy",value:function(){}},{key:"reset",value:function(){}},{key:"resetData",value:function(){console.log((this.type||"")+"暂无resetData的实现")}},{key:"setPosition",value:function(t){(t=t||this.pos).x&&(this.sprite.context.x=t.x),t.y&&(this.sprite.context.y=t.y)}},{key:"layout",value:function(){}}]),p);function p(t,e){var n;return(0,i.default)(this,p),n=(0,a.default)(this,(0,r.default)(p).call(this,t,e)),f.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(p.defaultProps()),t),n.name="component",n.type=null,n._opt=t,n.app=e,n.width=0,n.height=0,n.pos={x:0,y:0},n.margin={top:0,right:0,bottom:0,left:0},n.__cid=h.default.utils.createId("comp_"),n}e.default=c});t(Ze);var Qe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=h.default._,f=(n=u.default,(0,s.default)(c,n),(0,l.default)(c,null,[{key:"defaultProps",value:function(){return{type:{detail:"坐标系组件",documentation:"坐标系组件，可选值有'rect'（二维直角坐标系）,'polar'（二维极坐标系）,'box'（三维直角坐标系） ",insertText:"type: ",default:"",values:["rect","polar","box","polar3d"]},width:{detail:"坐标系width",default:0},height:{detail:"坐标系height",default:0},origin:{detail:"坐标系原点",propertys:{x:{detail:"原点x位置",default:0},y:{detail:"原点x位置",default:0}}}}}}]),(0,l.default)(c,[{key:"setFieldsMap",value:function(t){var r=this,o=0,l=t.type||"yAxis",e=[];return d.each(this.getAxiss(t),function(t){t.field&&(e=e.concat(t.field))}),function t(e){d.isString(e)&&(e=[e]);for(var n=d.clone(e),i=0,a=e.length;i<a;i++)d.isString(e[i])&&(n[i]={field:e[i],enabled:!0,color:r.app.getTheme(o),ind:o++},n[i][l]=r.getAxis({type:l,field:e[i]})),d.isArray(e[i])&&(n[i]=t(e[i]));return n}(e)}},{key:"setFieldEnabled",value:function(n){!function e(t){d.each(t,function(t){d.isArray(t)?e(t):t.field&&t.field==n&&(t.enabled=!t.enabled)})}(this.fieldsMap)}},{key:"getFieldMapOf",value:function(n){var i=null;return function e(t){d.each(t,function(t){if(d.isArray(t))e(t);else if(t.field&&t.field==n)return i=t,!1})}(this.fieldsMap),i}},{key:"getEnabledFieldsOf",value:function(n){var i=[],a=n?n.type:"yAxis";return d.each(this.fieldsMap,function(t){if(d.isArray(t)){var e=[];d.each(t,function(t){t[a]===n&&t.field&&t.enabled&&e.push(t.field)}),e.length&&i.push(e)}else t[a]===n&&t.field&&t.enabled&&i.push(t.field)}),i}},{key:"filterEnabledFields",value:function(t){var n=this,i=[];return d.isArray(t)||(t=[t]),d.each(t,function(t){if(d.isArray(t)){var e=[];d.each(t,function(t){n.getFieldMapOf(t).enabled&&e.push(t)}),e.length&&i.push(e)}else n.getFieldMapOf(t).enabled&&i.push(t)}),i}},{key:"getAxisDataFrame",value:function(t){return{field:t,org:this.dataFrame.getDataOrg(t,function(t){return null==t||""==t||isNaN(Number(t))?t:Number(t)})}}},{key:"hide",value:function(t){this.changeFieldEnabled(t)}},{key:"show",value:function(t){this.changeFieldEnabled(t)}},{key:"getSizeAndOrigin",value:function(){return{width:this.width,height:this.height,origin:this.origin}}},{key:"getPoint",value:function(){}},{key:"getAxisOriginPoint",value:function(){}},{key:"getOriginPos",value:function(){}},{key:"getAxis",value:function(t){return this.getAxiss(t)[0]}},{key:"getAxiss",value:function(o){var t=[],e=Object.keys(o).length;return d.each(this._axiss,function(i){var a=0;for(var r in o)"field"==r?function(){var e=d.flatten([i[r]]),t=d.flatten([o[r]]),n=!0;d.each(t,function(t){-1==d.indexOf(e,t)&&(n=!1)}),n&&a++}():JSON.stringify(i[r])==JSON.stringify(o[r])&&a++;e==a&&t.push(i)}),t}}]),c);function c(t,e){var n;return(0,i.default)(this,c),n=(0,a.default)(this,(0,r.default)(c).call(this,t,e)),d.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(c.defaultProps())),n.name="coord",n._opt=t,n.app=e,n.dataFrame=n.app.dataFrame,n.sprite=new h.default.Display.Sprite({name:"coord_"+t.type}),n.app.coordSprite.addChild(n.sprite),n.fieldsMap=null,n.induce=null,n._axiss=[],n}e.default=f});t(Qe);var Je=e(function(t,e){function g(t){return parseFloat(t.toPrecision(14))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={section:function(t,e,n){return Ce._.uniq(function(t,e){t=Ce._.without(t,void 0,null,"");var n=e&&e.scale?parseFloat(e.scale):1,i=e&&e.isInt?1:0;isNaN(n)&&(n=1);var a=Ce._.max(t),r=a;a*=n;var o=Ce._.min(t);if(o==a)return 0<a?[o=0,a]:a<0?[a,0]:[0,a=1];var l=a-o;if(l){var s=o;(o-=.05*l)<0&&0<=s&&(o=0),a+=.05*l}var u=.3*(a-o);u=function(t,e){var n,i=[1,2,5,10];n=t/e;for(var a=0;a<i.length&&!(n<=((t=i[a])+(i[a+1]||i[a]))/2);a++);return t*e}(u,Math.pow(10,Math.floor(Math.log(u)/Math.LN10))),i&&(u=Math.ceil(u));var h,d,f=g(Math.floor(o/u)*u),c=g(Math.ceil(a/u)*u),p=[];for(h=f;h<=c&&(p.push(h),(h=g(h+u))!==d);)d=h;return 3<=p.length&&p[p.length-2]>=r&&p.pop(),p}(t,n))}};e.default=n});t(Je);var tn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=H(ze),i=H(Ge),s=H(Je),a=((0,i.default)(r,null,[{key:"defaultProps",value:function(){return{layoutType:{detail:"布局方式",default:"proportion"},dataSection:{detail:"轴数据集",default:[]},sectionHandler:{detail:"自定义dataSection的计算公式",default:null},waterLine:{detail:"水位线",default:null,documentation:"水位data，需要混入 计算 dataSection， 如果有设置waterLine， dataSection的最高水位不会低于这个值"},middleWeight:{detail:"区间分隔线",default:null,documentation:"如果middleweight有设置的话 dataSectionGroup 为被middleweight分割出来的n个数组>..[ [0,50 , 100],[100,500,1000] ]"},middleWeightPos:{detail:"区间分隔线的物理位置，百分比,默认 0.5 ",default:null},symmetric:{detail:"自动正负对称",default:!1,documentation:"proportion下，是否需要设置数据为正负对称的数据，比如 [ 0,5,10 ] = > [ -10, 0 10 ]，象限坐标系的时候需要"},origin:{detail:"轴的起源值",default:null,documentation:"                    1，如果数据中又正数和负数，则默认为0 <br />                    2，如果dataSection最小值小于0，则baseNumber为最小值<br />                    3，如果dataSection最大值大于0，则baseNumber为最大值<br />                    4，也可以由用户在第2、3种情况下强制配置为0，则section会补充满从0开始的刻度值                "},sort:{detail:"排序",default:null},posParseToInt:{detail:"是否位置计算取整",default:!1,documentation:"比如在柱状图中，有得时候需要高精度的能间隔1px的柱子，那么x轴的计算也必须要都是整除的"}}}}]),(0,i.default)(r,[{key:"resetDataOrg",value:function(t){this.dataSection=[],this.dataSectionGroup=[],this.dataOrg=t,this._cellCount=null,this._cellLength=null}},{key:"setAxisLength",value:function(t){this.axisLength=t,this.calculateProps()}},{key:"calculateProps",value:function(){var a=this;"proportion"==this.layoutType&&(null==this._min&&(this._min=Ce._.min(this.dataSection)),null==this._max&&(this._max=Ce._.max(this.dataSection)),"origin"in this._opt||(this.origin=0,Ce._.max(this.dataSection)<0&&(this.origin=Ce._.max(this.dataSection)),0<Ce._.min(this.dataSection)&&(this.origin=Ce._.min(this.dataSection))),this._originTrans=this._getOriginTrans(this.origin),this.originPos=this.getPosOfVal(this.origin)),this.dataSectionLayout=[],Ce._.each(this.dataSection,function(t,e){var n=e;"proportion"==a.layoutType&&(n=a.getIndexOfVal(t));var i=parseInt(a.getPosOf({ind:e,val:t}),10);a.dataSectionLayout.push({val:t,ind:n,pos:i})})}},{key:"getDataSection",value:function(){return this.dataSection}},{key:"setDataSection",value:function(t){if(Ce._.isEmpty(t)&&Ce._.isEmpty(this._opt.dataSection))if("proportion"==this.layoutType){var e=this._getDataSection();if("origin"in this._opt&&e.push(this._opt.origin),1==e.length&&e.push(.5*e[0]),this.waterLine&&e.push(this.waterLine),this.symmetric){var n=Ce._.min(e),i=Ce._.max(e);Math.abs(n)>Math.abs(i)?e.push(Math.abs(n)):e.push(-Math.abs(i))}for(var a=0,r=e.length;a<r;a++)e[a]=Number(e[a]),isNaN(e[a])&&(e.splice(a,1),a--,r--);if(Ce._.isFunction(this.sectionHandler)&&(this.dataSection=this.sectionHandler(e)),this.dataSection&&this.dataSection.length||(this.dataSection=s.default.section(e,3)),this.symmetric){var o=Ce._.min(this.dataSection),l=Ce._.max(this.dataSection);Math.abs(o)>Math.abs(l)?this.dataSection.push(Math.abs(o)):this.dataSection.unshift(-Math.abs(l))}0==this.dataSection.length&&(this.dataSection=[0]),this.dataSectionGroup=[Ce._.clone(this.dataSection)],this._middleweight(),this._sort()}else this.dataSection=Ce._.flatten(this.dataOrg),this.dataSectionGroup=[this.dataSection];else this.dataSection=t||this._opt.dataSection,this.dataSectionGroup=[this.dataSection];this._middleWeightPos()}},{key:"_getDataSection",value:function(){var e=1;return Ce._.each(this.dataOrg,function(t){e=Math.max(t.length,e)}),1==e?this._oneDimensional():1<e?this._twoDimensional():void 0}},{key:"_oneDimensional",value:function(){for(var t=Ce._.flatten(this.dataOrg),e=0,n=t.length;e<n;e++)t[e]=t[e]||0;return t}},{key:"_twoDimensional",value:function(){var d,t=this.dataOrg,f=[];return Ce._.each(t,function(t){if(t.length)if(Ce._.isArray(t[0])){for(var e=[],n=t[0].length,i=t.length,a=0;a<n;a++){for(var r=0,o=0,l=0,s=0,u=0;u<i;u++){var h=t[u][a];!h&&0!==h||(null==d&&(d=h),d=Math.min(d,h),0<=h?(r+=h,o++):(l+=h,s++))}o&&e.push(r),s&&e.push(l)}f.push(e)}else f.push(t)}),f.push(d),Ce._.flatten(f)}},{key:"setWaterLine",value:function(t){t<=this.waterLine||((this.waterLine=t)<Ce._.min(this.dataSection)||t>Ce._.max(this.dataSection))&&(this.setDataSection(),this.calculateProps())}},{key:"_sort",value:function(){this.sort&&"desc"==this._getSortType()&&(this.dataSection.reverse(),Ce._.each(this.dataSectionGroup,function(t){t.reverse()}),this.dataSectionGroup.reverse())}},{key:"_getSortType",value:function(){var t;return Ce._.isString(this.sort)&&(t=this.sort),t||"asc"}},{key:"_middleweight",value:function(){if(this.middleWeight){Ce._.isArray(this.middleWeight)||(this.middleWeight=[this.middleWeight]);for(var t=Ce._.min(this.dataSection),e=Ce._.max(this.dataSection),n=[t],i=[],a=0,r=this.middleWeight.length;a<r;a++){var o=t;0<a&&(o=this.middleWeight[a-1]);var l=o+parseInt((this.middleWeight[a]-o)/2);n.push(l),n.push(this.middleWeight[a]),i.push([o,l,this.middleWeight[a]])}var s=this.middleWeight.slice(-1)[0];s<e&&(n.push(s+(e-s)/2),n.push(e),i.push([s,s+(e-s)/2,e])),this.dataSection=n,this.dataSectionGroup=i}}},{key:"_middleWeightPos",value:function(){var e=this;if(this.middleWeightPos){Ce._.isArray(this.middleWeightPos)||(this.middleWeightPos=[this.middleWeightPos]);var n=0;Ce._.each(this.middleWeightPos,function(t){n+=t}),n<1&&this.middleWeightPos.push(1-n),1<n&&(this.middleWeightPos=null)}if(this.middleWeight){if(!this.middleWeightPos){this.middleWeightPos=[];var i=0;Ce._.each(this.middleWeight,function(){var t=1/(e.middleWeight.length+1);i+=t,e.middleWeightPos.push(t)}),this.middleWeightPos.push(1-i)}}else this.middleWeightPos=[1]}},{key:"_getOriginTrans",value:function(o){for(var l=this,s=0,u=this,t=this.dataSectionGroup.length,h=this.axisLength/t,e=function(n){var t=l.dataSectionGroup[n];h=l.axisLength*l.middleWeightPos[n];var i=0;if(Ce._.each(l.middleWeightPos,function(t,e){e<n&&(i+=u.axisLength*t)}),"proportion"==l.layoutType){var e=Ce._.min(t),a=Ce._.max(t),r=Math.abs(a-e);if(e<=o&&o<=a)return s=(o-e)/r*h+i,"break"}},n=0,i=t;n<i&&"break"!==e(n);n++);return"desc"==this.sort&&(s=-(h-s)),parseInt(s)}},{key:"_getLayoutDataOf",value:function(e){var n,i;return Ce._.each(["val","ind","pos"],function(t){t in e&&(n=t)}),Ce._.each(this.dataSectionLayout,function(t){t[n]===e[n]&&(i=t)}),i||{}}},{key:"getPosOfVal",value:function(t){return this.getPosOf({val:t})}},{key:"getPosOfInd",value:function(t){var e=this._getLayoutDataOf({ind:t}).pos;return null!=e?e:this.getPosOf({ind:t})}},{key:"getPosOf",value:function(d){var f,c=this,p=this,t=this._getCellCount();if("proportion"==this.layoutType)for(var e=function(n){var t=c.dataSectionGroup[n],e=c.axisLength*c.middleWeightPos[n],i=0;Ce._.each(c.middleWeightPos,function(t,e){e<n&&(i+=p.axisLength*t)});var a=Ce._.min(t),r=Ce._.max(t),o="val"in d?d.val:c.getValOfInd(d.ind);if(a<=o&&o<=r){var l=c.origin,s=!(l<a||r<l);s||(l=a);var u=Math.max(Math.abs(r-l),Math.abs(l-a)),h=Math.abs(r-a);return f=(o-l)/u*(u/h*e)+i,isNaN(f)&&(f=parseInt(i)),s&&(f+=c._originTrans),"break"}},n=0,i=this.dataSectionGroup.length;n<i&&"break"!==e(n);n++);else if(1==t)f=this.axisLength/2;else{var a="ind"in d?d.ind:this.getIndexOfVal(d.val);if(-1!=a&&("rule"==this.layoutType&&(f=a/(t-1)*this.axisLength),"peak"==this.layoutType)){var r=this.getCellLength();f=r*(a+1)-r/2}}return f=f||0,f=Number(f.toFixed(1)),Math.abs(f)}},{key:"getValOfPos",value:function(t){var e=this._getLayoutDataOf({pos:t}).val;return null!=e?e:this._getValOfInd(this.getIndexOfPos(t))}},{key:"getValOfInd",value:function(t){var e=this._getLayoutDataOf({ind:t}).val;return null!=e?e:this._getValOfInd(t)}},{key:"_getValOfInd",value:function(o){var l,s=this,t=Ce._.flatten(this.dataOrg);return"proportion"==this.layoutType?Ce._.each(this.dataSectionGroup,function(t,n){var e=s.axisLength*s.middleWeightPos[n],i=0;if(Ce._.each(s.middleWeightPos,function(t,e){e<n&&(i+=s.axisLength*t)}),parseInt(o/e)==n||n==s.dataSectionGroup.length-1){var a=Ce._.min(t),r=Ce._.max(t);return l=a+(r-a)/e*(o-i),!1}}):l=t[o],l}},{key:"getIndexOfPos",value:function(t){var e=this._getLayoutDataOf({pos:t}).ind;if(null!=e)return e;var n=0,i=this.getCellLengthOfPos(t),a=this._getCellCount();return"proportion"==this.layoutType?t:("peak"==this.layoutType&&(n=parseInt(t/i))==a&&(n=a-1),"rule"==this.layoutType&&(n=parseInt((t+i/2)/i),1==a&&(n=0)),n)}},{key:"getIndexOfVal",value:function(n){var i=-1;if("proportion"==this.layoutType){var t=this._getLayoutDataOf({val:n}).ind;if(null!=t)return t;i=this.getPosOfVal(n)}else Ce._.each(this.dataOrg,function(t){Ce._.each(t,function(t){var e=Ce._.indexOf(t,n);-1!=e&&(i=e)})});return i}},{key:"getCellLength",value:function(){if(null!==this._cellLength)return this._cellLength;var t=this.axisLength,e=t,n=this._getCellCount();return n&&("proportion"==this.layoutType?e=1:(e=t/n,"rule"==this.layoutType&&(e=1==n?t/2:t/(n-1)),this.posParseToInt&&(e=parseInt(e)))),this._cellLength=e}},{key:"getCellLengthOfPos",value:function(){return this.getCellLength()}},{key:"getCellLengthOfInd",value:function(){return this.getCellLength()}},{key:"_getCellCount",value:function(){if(null!==this._cellCount)return this._cellCount;var t=0;return"proportion"==this.layoutType?t=this.axisLength:this.dataOrg.length&&this.dataOrg[0].length&&this.dataOrg[0][0].length&&(t=this.dataOrg[0][0].length),this._cellCount=t}}]),r);function r(t,e){(0,n.default)(this,r),this._opt=Ce._.clone(t),this.dataOrg=e||[],this.dataSectionLayout=[],this.axisLength=1,this._cellCount=null,this._cellLength=null,this.dataSectionGroup=[],this.originPos=0,this._originTrans=0,this._min=null,this._max=null,Ce._.extend(!0,this,(0,Ke.getDefaultProps)(r.defaultProps()),t)}e.default=a});t(tn);var en=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=(n=H(tn).default,(0,s.default)(h,n),(0,l.default)(h,null,[{key:"defaultProps",value:function(){return{field:{detail:"轴字段配置",documentation:"目前x轴的field只支持单维度设置，也就是说只支持一条x轴",default:[]},layoutType:{detail:"布局方式",default:"rule"},width:{detail:"轴宽",default:0},height:{detail:"轴高",default:0},enabled:{detail:"是否显示轴",default:!0},animation:{detail:"是否开启动画",default:!0},title:{detail:"轴名称",propertys:{shapeType:"text",textAlign:{detail:"水平对齐方式",default:"center"},textBaseline:{detail:"基线对齐方式",default:"middle"},strokeStyle:{detail:"文本描边颜色",default:null},lineHeight:{detail:"行高",default:0},text:{detail:"轴名称的内容",default:""},fontColor:{detail:"颜色",default:"#999"},fontSize:{detail:"字体大小",default:12}}},tickLine:{detail:"刻度线",propertys:{enabled:{detail:"是否开启",default:!0},lineWidth:{detail:"刻度线宽",default:1},lineLength:{detail:"刻度线长度",default:4},distance:{detail:"和前面一个元素的距离",default:2},strokeStyle:{detail:"描边颜色",default:"#cccccc"}}},axisLine:{detail:"轴线配置",propertys:{enabled:{detail:"是否有轴线",default:!0},position:{detail:"轴线的位置",documentation:'default在align的位置（left，right），可选 "center" 和 具体的值',default:"default"},lineWidth:{detail:"轴线宽度",default:1},strokeStyle:{detail:"轴线的颜色",default:"#cccccc"}}},label:{detail:"刻度文本",propertys:{enabled:{detail:"是否显示刻度文本",default:!0},fontColor:{detail:"文本颜色",default:"#999"},fontSize:{detail:"字体大小",default:12},rotation:{detail:"旋转角度",default:0},format:{detail:"label文本的格式化处理函数",default:null},distance:{detail:"和轴线之间的间距",default:2},textAlign:{detail:"水平方向对齐方式",default:"center"},lineHeight:{detail:"文本的行高",default:1},evade:{detail:"是否开启逃避算法,目前的逃避只是隐藏",default:!0}}},filter:{detail:"过滤函数",documentation:"可以用来过滤哪些yaxis 的 节点是否显示已经颜色之类的",default:null},trimLayout:{detail:"自定义的显示规则函数",documentation:"如果用户有手动的 trimLayout ，那么就全部visible为true，然后调用用户自己的过滤程序",default:null}}}}]),(0,l.default)(h,[{key:"drawWaterLine",value:function(t){"proportion"==this.layoutType&&t>=this._min&&t<=this._max||(this.dataSection=[],this.setWaterLine(t),this._initHandle(),this.draw())}}]),h);function h(t,e){var n;return(0,i.default)(this,h),n=(0,a.default)(this,(0,r.default)(h).call(this,t,e)),Ce._.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(h.defaultProps())),n}e.default=u});t(en);var nn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=H(ze),r=H(Ue),o=H(qe),l=H(Ve),i=H(Ge),s=H($e),x=H(Ce),u=H(en),_=x.default._,m=x.default.Shapes.Line,h=(n=u.default,(0,s.default)(d,n),(0,i.default)(d,null,[{key:"defaultProps",value:function(){return{}}}]),(0,i.default)(d,[{key:"init",value:function(t){this._setField(),this._initHandle(t),this.sprite=new x.default.Display.Sprite({id:"xAxisSprite_"+(new Date).getTime()}),this.rulesSprite=new x.default.Display.Sprite({id:"xRulesSprite_"+(new Date).getTime()}),this.sprite.addChild(this.rulesSprite)}},{key:"_initHandle",value:function(t){var i=this;t&&(!t.isH||t.label&&void 0!==t.label.rotaion||(this.label.rotation=90)),this.setDataSection(),i._formatTextSection=[],i._textElements=[],_.each(i.dataSection,function(t,e){i._formatTextSection[e]=i._getFormatText(t,e);var n=new x.default.Display.Text(i._formatTextSection[e],{context:{fontSize:i.label.fontSize}});i._textElements[e]=n}),0!=this.label.rotation&&(this.label.textAlign="right"),this._getTitle(),this._setXAxisHeight()}},{key:"_setField",value:function(t){t&&(this.field=t),this.field=_.flatten([this.field])[0]}},{key:"draw",value:function(t){t&&_.extend(!0,this,t),this.setAxisLength(this.width),this._trimXAxis(),this._widget(t),this.setX(this.pos.x),this.setY(this.pos.y)}},{key:"resetData",value:function(t){this._setField(t.field),this.resetDataOrg(t.org),this._initHandle(),this.draw()}},{key:"setX",value:function(t){this.sprite.context.x=t,this.pos.x=t}},{key:"setY",value:function(t){this.sprite.context.y=t,this.pos.y=t}},{key:"_getTitle",value:function(){this.title.text&&(this._title?this._title.resetText(this.title.text):this._title=new x.default.Display.Text(this.title.text,{context:{fontSize:this.title.fontSize,textAlign:this.title.textAlign,textBaseline:this.title.textBaseline,fillStyle:this.title.fontColor,strokeStyle:this.title.strokeStyle,lineWidth:this.title.lineWidth,rotation:this.isH?-180:0}}))}},{key:"_setXAxisHeight",value:function(){var o=this;if(o.enabled){var l=0;this.label.enabled&&_.each(o.dataSection,function(t,e){var n=o._textElements[e],i=n.getTextWidth(),a=n.getTextHeight();if(o.label.rotation)if(90==o.label.rotation)a=i;else{var r=Math.sin(Math.abs(o.label.rotation)*Math.PI/180);a=parseInt(r*i)}l=Math.max(l,a)}),this.height=l+this.tickLine.lineLength+this.tickLine.distance+this.label.distance,this._title&&(this.height+=this._title.getTextHeight())}else o.height=0}},{key:"getNodeInfoOfX",value:function(t){var e=this.getIndexOfPos(t),n=this.getValOfInd(e),i=this.getPosOf({ind:e,val:n});return this._getNodeInfo(e,n,i)}},{key:"getNodeInfoOfVal",value:function(t){var e=this.getIndexOfVal(t),n=this.getPosOf({ind:e,val:t});return this._getNodeInfo(e,t,n)}},{key:"_getNodeInfo",value:function(t,e,n){return{ind:t,value:e,text:this._getFormatText(e,t),x:n,field:this.field,layoutType:this.layoutType}}},{key:"_trimXAxis",value:function(){for(var t=[],e=this.dataSection,n=0,i=e.length;n<i;n++){var a=this._formatTextSection[n],r=this._textElements[n],o={ind:n,value:e[n],text:a,x:this.getPosOf({val:e[n],ind:n}),textWidth:r.getTextWidth(),field:this.field,visible:null};t.push(o)}return this.layoutData=t,this._trimLayoutData(),t}},{key:"_getFormatText",value:function(t){var e=t;return _.isFunction(this.label.format)&&(e=this.label.format.apply(this,arguments)),_.isNumber(e)&&"proportion"==this.layoutType&&(e=(0,Ke.numAddSymbol)(e)),e}},{key:"_widget",value:function(t){var e=this;if(t=t||{},e.enabled){for(var n=e.layoutData,i=0,a=0,r=n.length;a<r;a++){_.isFunction(e.filter)&&e.filter({layoutData:n,index:a});var o=n[a];if(o.visible){var l=o.x,s=e.tickLine.lineLength+e.tickLine.distance+e.label.distance,u=e.rulesSprite.getChildAt(i),h={x:o._text_x||o.x,y:s,fillStyle:this.label.fontColor,fontSize:this.label.fontSize,rotation:-Math.abs(this.label.rotation),textAlign:this.label.textAlign,lineHeight:this.label.lineHeight,textBaseline:this.label.rotation?"middle":"top",globalAlpha:1};this.label.rotation&&90!=this.label.rotation&&(h.x+=5,h.y+=3);var d={x:l,y:this.tickLine.distance,end:{x:0,y:this.tickLine.lineLength},lineWidth:this.tickLine.lineWidth,strokeStyle:this.tickLine.strokeStyle},f=300,c=i*Math.min(1e3/n.length,25);e.animation&&!t.resize||(c=f=0),u?(u._tickLine&&e.tickLine.enabled&&u._tickLine.animate(d,{duration:f,id:u._tickLine.id}),u._txt&&e.label.enabled&&(u._txt.animate(h,{duration:f,id:u._txt.id}),u._txt.resetText(o.text))):(u=new x.default.Display.Sprite({id:"xNode"+i}),e.tickLine.enabled&&(u._tickLine=new m({id:"xAxis_tickline_"+i,context:d}),u.addChild(u._tickLine)),e.label.enabled&&(u._txt=new x.default.Display.Text(o.text,{id:"xAxis_txt_"+i,context:h}),u.addChild(u._txt),e.animation&&!t.resize&&(u._txt.context.y+=20,u._txt.context.globalAlpha=0,u._txt.animate({y:h.y,globalAlpha:1},{duration:500,delay:c,id:u._txt.id}))),e.rulesSprite.addChild(u)),i++}}if(this.rulesSprite.children.length>=i)for(var p=i,g=this.rulesSprite.children.length;p<g;p++)this.rulesSprite.getChildAt(p).remove(),p--,g--;if(this.axisLine.enabled){var v={start:{x:0,y:0},end:{x:this.width,y:0},lineWidth:this.axisLine.lineWidth,strokeStyle:this.axisLine.strokeStyle};if(this._axisLine)this._axisLine.animate(v);else{var y=new m({context:v});this.sprite.addChild(y),this._axisLine=y}}this._title&&(this._title.context.y=this.height-this._title.getTextHeight()/2,this._title.context.x=this.width/2,this.sprite.addChild(this._title))}else e.height=0}},{key:"_trimLayoutData",value:function(){var t=this.layoutData.length;this.enabled&&t&&("proportion"==this.layoutType&&this._checkOver(),"peak"==this.layoutType&&this._checkOver(),"rule"==this.layoutType&&this._checkOver())}},{key:"_getRootPR",value:function(){var t=0;return this._coord.app&&(t=this._coord.app.padding.right),t}},{key:"_checkOver",value:function(){var u=this,h=u.layoutData,d=h.length,f=u.label.textAlign;if(this.label.evade&&!u.trimLayout)!function t(e){var n=h[e];if(void 0!==n){n.visible=!0;for(var i=e;i<d-1;i++){var a=h[i+1],r=a.textWidth,o=n.textWidth;u.label.rotation&&(r=Math.min(r,22),o=Math.min(o,22));var l=a.x,s=n.x+o;if("center"==f&&(l=a.x-r/2,s=n.x+o/2),"right"==f&&(l=a.x-r,s=n.x),i==d-2&&l+r>u.width+u._getRootPR()&&("center"==f&&a.x+r/2>u.width&&(l=u.width-r,a._text_x=u.width-r/2+u._getRootPR()),"left"==f&&a.x+r>u.width&&(l=u.width-r,a._text_x=u.width-r)),!(l-s<1)){t(i+1);break}if(i==d-2)return a.visible=!0,void(n.visible=!1);a.visible=!1}}}(0);else{var t;_.each(h,function(t){t.visible=!0}),u.trimLayout&&u.trimLayout(h);for(var e=d-1;0<=e&&!t;e--)h[e].visible&&(t=h[e]);t&&("center"==f&&t.x+t.textWidth/2>u.width&&(t._text_x=u.width-t.textWidth/2+u._getRootPR()),"left"==f&&t.x+t.textWidth>u.width&&(t._text_x=u.width-t.textWidth))}}}]),d);function d(t,e,n){var i;return(0,a.default)(this,d),(i=(0,r.default)(this,(0,o.default)(d).call(this,t,e.org))).type="xAxis",i._coord=n||{},i._title=null,i._axisLine=null,i._formatTextSection=[],i._textElements=[],i.pos={x:0,y:0},i.layoutData=[],i.sprite=null,i.isH=!1,_.extend(!0,(0,l.default)(i),(0,Ke.getDefaultProps)(d.defaultProps()),t),i.init(t),i}e.default=h});t(nn);var an=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=H(ze),r=H(Ue),o=H(qe),l=H(Ve),i=H(Ge),s=H($e),w=H(Ce),u=H(en),k=w.default._,S=w.default.Shapes.Line,h=(n=u.default,(0,s.default)(d,n),(0,i.default)(d,null,[{key:"defaultProps",value:function(){return{align:{detail:"左右轴设置",default:"left"},layoutType:{detail:"布局方式",default:"proportion"}}}}]),(0,i.default)(d,[{key:"init",value:function(t){this._setField(),this._initHandle(t),this.sprite=new w.default.Display.Sprite({id:"yAxisSprite_"+(new Date).getTime()}),this.rulesSprite=new w.default.Display.Sprite({id:"yRulesSprite_"+(new Date).getTime()}),this.sprite.addChild(this.rulesSprite)}},{key:"_initHandle",value:function(t){t&&(!t.isH||t.label&&void 0!==t.label.rotaion||(this.label.rotation=90),t.label&&t.label.textAlign||(this.label.textAlign="left"==this.align?"right":"left")),this.setDataSection(),this._getTitle(),this._setYaxisWidth()}},{key:"_setField",value:function(t){t&&(this.field=t),k.isArray(this.field)||(this.field=[this.field])}},{key:"draw",value:function(t){k.extend(!0,this,t||{}),this.height=parseInt(this.yMaxHeight-this._getYAxisDisLine()),this.setAxisLength(this.height),this.sprite.cleanAnimates(),this._trimYAxis(),this._widget(t),this.setX(this.pos.x),this.setY(this.pos.y)}},{key:"resetData",value:function(t){this._setField(t.field),this.resetDataOrg(t.org),this._initHandle(),this.draw()}},{key:"setX",value:function(t){this.sprite.context.x=t,this.pos.x=t}},{key:"setY",value:function(t){this.sprite.context.y=t,this.pos.y=t}},{key:"_getTitle",value:function(){if(this.title.text)if(this._title)this._title.resetText(this.title.text);else{var t=0;"left"==this.align?t=-90:(t=90,this.isH&&(t=270)),this._title=new w.default.Display.Text(this.title.text,{context:{fontSize:this.title.fontSize,textAlign:this.title.textAlign,textBaseline:this.title.textBaseline,fillStyle:this.title.fontColor,strokeStyle:this.title.strokeStyle,lineWidth:this.title.lineWidth,rotation:t}})}}},{key:"_setYaxisWidth",value:function(){}},{key:"_trimYAxis",value:function(){for(var t=[],e=0,n=this.dataSection.length;e<n;e++){var i={value:this.dataSection[e],y:-Math.abs(this.getPosOf({val:this.dataSection[e],ind:e})),visible:!0,text:""},a=i.value;k.isFunction(this.label.format)&&(a=this.label.format.apply(this,[a,e])),null==a&&"proportion"==this.layoutType&&(a=(0,Ke.numAddSymbol)(i.value)),i.text=a,t.push(i)}for(var r=0,o=0,l=t.length;o<l;o++)0!=o&&(0==r?t[o].text==t[r].text?t[o].visible=!1:r=o:(t[o].text==t[r].text&&(t[r].visible=!1),r=o));this.layoutData=t,this.trimLayout&&this.trimLayout(t)}},{key:"_getYAxisDisLine",value:function(){var t=0;return 0<(t=0+this.yMaxHeight%this.dataSection.length)?0:t}},{key:"resetWidth",value:function(t){this.width=t,"left"==this.align&&(this.rulesSprite.context.x=this.width)}},{key:"_widget",value:function(t){var e=this;if(t=t||{},e.enabled){for(var n=this.layoutData,i=0,a=e.maxW=0,r=n.length;a<r;a++){k.isFunction(e.filter)&&e.filter({layoutData:n,index:a});var o=n[a];if(o.visible){var l=o.y,s=e.label.textAlign,u=l+(0==a?-3:0)+(a==n.length-1?3:0);90!=e.label.rotation&&-90!=e.label.rotation||(s="center",a==n.length-1&&(u=l-2,s="right"),0==a&&(u=l));var h=16;o.value==e.origin&&(h=0),o.value<e.origin&&(h=-16);var d=0,f=void 0;e.tickLine.enabled&&(f={x:d="left"==e.align?-e.tickLine.lineLength-e.tickLine.distance:e.tickLine.distance,y:l,end:{x:e.tickLine.lineLength,y:0},lineWidth:e.tickLine.lineWidth,strokeStyle:e._getStyle(e.tickLine.strokeStyle)});var c=void 0;if(e.label.enabled){var p="left"==e.align?d-e.label.distance:d+e.tickLine.lineLength+e.label.distance;this.isH&&(p+=4*("left"==e.align?-1:1)),c={x:p,y:u,fillStyle:e._getStyle(e.label.fontColor),fontSize:e.label.fontSize,rotation:-Math.abs(e.label.rotation),textAlign:s,textBaseline:"middle",lineHeight:e.label.lineHeight,globalAlpha:1}}var g=300;e.animation&&!t.resize||(g=0);var v=this.rulesSprite.getChildAt(i);v?(v._tickLine&&e.tickLine.enabled&&v._tickLine.animate(f,{duration:g,id:v._tickLine.id}),v._txt&&e.label.enabled&&(v._txt.animate(c,{duration:g,id:v._txt.id}),v._txt.resetText(o.text))):(v=new w.default.Display.Sprite({id:"_node"+i}),e.tickLine.enabled&&(v._tickLine=new S({id:"yAxis_tickline_"+i,context:f}),v.addChild(v._tickLine)),e.label.enabled&&(v._txt=new w.default.Display.Text(o.text,{id:"yAxis_txt_"+i,context:c}),v.addChild(v._txt),90==e.label.rotation||-90==e.label.rotation?e.maxW=Math.max(e.maxW,v._txt.getTextHeight()):e.maxW=Math.max(e.maxW,v._txt.getTextWidth()),e.animation&&!t.resize&&(v._txt.context.y=l+h,v._txt.context.globalAlpha=0,v._txt.animate({y:c.y,globalAlpha:1},{duration:300,id:v._txt.id}))),e.rulesSprite.addChild(v)),i++}}if(e.rulesSprite.children.length>=i)for(var y=i,x=e.rulesSprite.children.length;y<x;y++)e.rulesSprite.getChildAt(y).remove(),y--,x--;e.width||"width"in e._opt||(e.width=parseInt(e.maxW+e.label.distance),e.tickLine.enabled&&(e.width+=parseInt(e.tickLine.lineLength+e.tickLine.distance)),e._title&&(e.width+=e._title.getTextHeight()));var _=0;if("left"==e.align&&(e.rulesSprite.context.x=e.width,_=e.width),e.axisLine.enabled){var m={start:{x:_,y:0},end:{x:_,y:-e.height},lineWidth:e.axisLine.lineWidth,strokeStyle:e._getStyle(e.axisLine.strokeStyle)};if(this._axisLine)this._axisLine.animate(m);else{var b=new S({context:m});this.sprite.addChild(b),this._axisLine=b}}this._title&&(this._title.context.y=-this.height/2,this._title.context.x=this._title.getTextHeight()/2,"right"==this.align&&(this._title.context.x=this.width-this._title.getTextHeight()/2),this.sprite.addChild(this._title))}else e.width=0}},{key:"_getStyle",value:function(t){var e=t;return k.isFunction(t)&&(e=t.call(this,this)),t||(e="#999"),e}}]),d);function d(t,e,n){var i;return(0,a.default)(this,d),(i=(0,r.default)(this,(0,o.default)(d).call(this,t,e.org))).type="yAxis",i._coord=n||{},i._title=null,i._axisLine=null,i.maxW=0,i.pos={x:0,y:0},i.yMaxHeight=0,i.layoutData=[],i.sprite=null,i.isH=!1,k.extend(!0,(0,l.default)(i),(0,Ke.getDefaultProps)(d.defaultProps()),t),i.init(t),i}e.default=h});t(an);var rn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),f=H(Ce),c=f.default._,u=f.default.event,p=f.default.Shapes.Line,g=f.default.Shapes.Rect,h=(n=u.Dispatcher,(0,s.default)(d,n),(0,l.default)(d,null,[{key:"defaultProps",value:function(){return{enabled:{detail:"是否开启grid绘制",default:!0},line:{detail:"网格线条配置",propertys:{xDimension:{detail:"一维方向的网格线",propertys:{enabled:{detail:"是否开启",default:!0},data:[],lineType:{detail:"线的样式，虚线或者实现",default:"solid"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#f0f0f0"}}},yDimension:{detail:"二维方向的网格线",propertys:{enabled:{detail:"是否开启",default:!1},data:[],lineType:{detail:"线的样式，虚线或者实现",default:"solid"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#f0f0f0"}}}}},fill:{detail:"背景色配置",propertys:{xDimension:{detail:"以为方向的背景色块，x方向",propertys:{enabled:{detail:"是否开启",default:!1},splitVals:{detail:"从x轴上面用来分割区块的vals",default:null},fillStyle:{detail:"背景颜色",default:null},alpha:{detail:"背景透明度",default:null}}},yDimension:{detail:"以为方向的背景色块，y方向",propertys:{enabled:{detail:"是否开启",default:!1},splitVals:{detail:"从x轴上面用来分割区块的vals",default:null},fillStyle:{detail:"背景颜色",default:null},alpha:{detail:"背景透明度",default:null}}}}}}}}]),(0,l.default)(d,[{key:"init",value:function(t){c.extend(!0,this,t),this.sprite=new f.default.Display.Sprite}},{key:"setX",value:function(t){this.sprite.context.x=t}},{key:"setY",value:function(t){this.sprite.context.y=t}},{key:"draw",value:function(t){c.extend(!0,this,t),this._widget(),this.setX(this.pos.x),this.setY(this.pos.y)}},{key:"clean",value:function(){this.sprite.removeAllChildren()}},{key:"reset",value:function(t){this.sprite.removeAllChildren(),this.draw(t)}},{key:"_widget",value:function(){var u=this;if(this.enabled){var h=u._coord._yAxis[0],d=u._coord._xAxis;this.fillSp=new f.default.Display.Sprite,this.sprite.addChild(this.fillSp),c.each([u.fill.xDimension,u.fill.yDimension],function(a,r){var t=r?h:d,e=[];if(a.enabled){a.splitVals?(e=[t.dataSection[0]].concat(c.flatten([a.splitVals]))).push(t.dataSection.slice(-1)[0]):e=t.dataSection;var n=[];if(2<=e.length){for(var i=[],o=0,l=e.length;o<l;o++){var s=t.getPosOf({val:e[o]});if(i.length){if(1==i.length){if(s-i[0]<1)continue;i.push(s),n.push(i),i=[i[1]]}}else i.push(s)}c.each(n,function(t,e){var n={fillStyle:u.getProp(a.fillStyle,e,"#000"),fillAlpha:u.getProp(a.alpha,e,e%2*.02)};r?(n.x=0,n.y=-t[0],n.width=u.width,n.height=-(t[1]-t[0])):(n.x=t[0],n.y=0,n.width=t[1]-t[0],n.height=-u.height);var i=new g({context:n});u.fillSp.addChild(i)})}}}),u.xAxisSp=new f.default.Display.Sprite,u.sprite.addChild(u.xAxisSp),u.yAxisSp=new f.default.Display.Sprite,u.sprite.addChild(u.yAxisSp);for(var t=h.layoutData,e=0,n=t.length;e<n;e++){var i=t[e];if(i.visible){var a=new p({id:"back_line_"+e,context:{y:i.y,lineType:u.getProp(u.line.xDimension.lineType,e,"solid"),lineWidth:u.getProp(u.line.xDimension.lineWidth,e,1),strokeStyle:u.getProp(u.line.xDimension.strokeStyle,e,"#f0f0f0"),visible:!0}});u.line.xDimension.enabled&&(u.xAxisSp.addChild(a),a.context.start.x=0,a.context.end.x=u.width)}}for(var r=0,o=(t=d.layoutData).length;r<o;r++){var l=t[r],s=new p({context:{x:l.x,start:{x:0,y:0},end:{x:0,y:-u.height},lineType:u.getProp(u.line.yDimension.lineType,r,"solid"),lineWidth:u.getProp(u.line.yDimension.lineWidth,r,1),strokeStyle:u.getProp(u.line.yDimension.strokeStyle,r,"#f0f0f0"),visible:!0}});u.line.yDimension.enabled&&u.yAxisSp.addChild(s)}}}},{key:"getProp",value:function(t,e,n){var i=n;return null!=t&&null!=t&&((c.isString(t)||c.isNumber(t))&&(i=t),c.isFunction(t)&&(i=t.apply(this,[e,n])),c.isArray(t)&&(i=t[e])),i}}]),d);function d(t,e){var n;return(0,i.default)(this,d),n=(0,a.default)(this,(0,r.default)(d).call(this,t,e)),c.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(d.defaultProps())),n.width=0,n.height=0,n._coord=e,n.pos={x:0,y:0},n.sprite=null,n.xAxisSp=null,n.yAxisSp=null,n.init(t),n}e.default=h});t(rn),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Qe),h=H(Ce),d=H(nn),f=H(an),c=H(rn),p=h.default._,g=h.default.event,v=(n=u.default,(0,s.default)(y,n),(0,l.default)(y,null,[{key:"defaultProps",value:function(){return{horizontal:{detail:"横向翻转坐标系",documentation:"横向翻转坐标系",insertText:"horizontal: ",default:!1,values:[!0,!1]},_props:{xAxis:d.default,yAxis:f.default,grid:c.default}}}}]),(0,l.default)(y,[{key:"setDefaultOpt",value:function(t,e){var i={field:this.dataFrame.fields[0],xAxis:{layoutType:"rule",posParseToInt:!1},grid:{}};if(p.extend(!0,i,t),i.yAxis){var n=[];p.each(p.flatten([i.yAxis]),function(t){n.push(p.clone(t))}),i.yAxis=n}else i.yAxis=[];for(var a=p.flatten([e._opt.graphs]),r=0;r<a.length;r++){var o=a[r];"bar"==o.type&&(i.xAxis.layoutType="peak"),o.field&&function(){var n="left";"right"==o.yAxisAlign&&(n="right");var t=null;(t=p.find(i.yAxis,function(t,e){return t.align==n||!t.align&&e==("left"==n?0:1)}))?t.align||(t.align=n):(t={align:n,field:[]},i.yAxis.push(t)),t.field?p.isArray(t.field)||(t.field=[t.field]):t.field=[],p.isArray(o.field)?t.field=t.field.concat(o.field):t.field.push(o.field)}()}var l=[],s=[];return p.each(i.yAxis,function(t,e){t.align||(t.align=e?"right":"left"),"left"==t.align?l.push(t):s.push(t)}),i.yAxis=l.concat(s),i.horizontal&&(i.xAxis.isH=!0,p.each(i.yAxis,function(t){t.isH=!0})),"enabled"in i&&(p.extend(!0,i.xAxis,{enabled:i.enabled}),p.each(i.yAxis,function(t){p.extend(!0,t,{enabled:i.enabled})}),i.grid.enabled=i.enabled),"animation"in i&&(p.extend(!0,i.xAxis,{animation:i.animation}),p.each(i.yAxis,function(t){p.extend(!0,t,{animation:i.animation})}),i.grid.animation=i.animation),i}},{key:"init",value:function(){this._initModules(),this.fieldsMap=this.setFieldsMap({type:"yAxis"})}},{key:"resetData",value:function(t){var n=this;this.dataFrame=t;var e=this.getAxisDataFrame(this.xAxis.field);this._xAxis.resetData(e),p.each(this._yAxis,function(t){var e=n.getAxisDataFrame(t.field);t.resetData(e)}),this._resetXY_axisLine_pos(),this._grid.reset({animation:!1})}},{key:"draw",value:function(t){t=t||{};var e=this.app.padding,n=t.height||this.app.height,i=t.width||this.app.width;if(this.horizontal){var a=i;i=n,n=a}var r=n-this._xAxis.height-e.bottom,o=0,l=0;this._yAxisLeft&&(this._yAxisLeft.draw({pos:{x:e.left,y:r},yMaxHeight:r-e.top,resize:t.resize}),o=this._yAxisLeft.width),this._yAxisRight&&(this._yAxisRight.draw({pos:{x:0,y:r},yMaxHeight:r-e.top,resize:t.resize}),l=this._yAxisRight.width),this._xAxis.draw({pos:{x:e.left+o,y:r},width:i-o-e.left-l-e.right,resize:t.resize}),this._yAxisRight&&this._yAxisRight.setX(o+e.left+this._xAxis.width),this._grid.draw({width:this._xAxis.width,height:this._yAxis[0].height,pos:{x:o+e.left,y:r},resize:t.resize}),this.width=this._xAxis.width,this.height=this._yAxis[0].height,this.origin.x=o+e.left,this.origin.y=r,this._initInduce(),this._resetXY_axisLine_pos(),this.horizontal&&this._horizontal({w:i,h:n})}},{key:"_resetXY_axisLine_pos",value:function(){var t,n=this;this._xAxis.enabled&&("center"==this._xAxis.axisLine.position&&(t=-this._yAxis[0].height/2),"center"==this._xAxis.axisLine.position&&(t=-this._yAxis[0].height/2),p.isNumber(this._xAxis.axisLine.position)&&(t=-this._yAxis[0].getPosOfVal(this._xAxis.axisLine.position)),void 0!==t&&(this._xAxis._axisLine.context.y=t)),p.each(this._yAxis,function(t){var e;t.enabled&&("center"==t.axisLine.position&&(e=n._xAxis.width/2),p.isNumber(t.axisLine.position)&&(e=n._xAxis.getPosOfVal(t.axisLine.position)),void 0!==e&&(t._axisLine.context.x=e))})}},{key:"getSizeAndOrigin",value:function(){var t={width:this.width,height:this.height,origin:this.origin};if(this.horizontal){var e=this.app.padding,n=e.bottom,i=e.right;t={width:this._yAxis[0].height,height:this._xAxis.width,origin:{x:this._xAxis.height+n,y:this._yAxis[0].height+i}}}return t}},{key:"_initModules",value:function(){this._grid=new c.default(this.grid,this),this.sprite.addChild(this._grid.sprite);var t=this.getAxisDataFrame(this.xAxis.field);this._xAxis=new d.default(this.xAxis,t,this),this._axiss.push(this._xAxis),this.sprite.addChild(this._xAxis.sprite);var e,n,i,a,r=this.yAxis;p.isArray(r)||(r=[r]),(e=p.find(r,function(t){return"left"==t.align}))&&(i=this.getAxisDataFrame(e.field),this._yAxisLeft=new f.default(e,i,this),this._yAxisLeft.axis=e,this.sprite.addChild(this._yAxisLeft.sprite),this._yAxis.push(this._yAxisLeft),this._axiss.push(this._yAxisLeft)),(n=p.find(r,function(t){return"right"==t.align}))&&(a=this.getAxisDataFrame(n.field),this._yAxisRight=new f.default(n,a,this),this._yAxisRight.axis=n,this.sprite.addChild(this._yAxisRight.sprite),this._yAxis.push(this._yAxisRight),this._axiss.push(this._yAxisRight))}},{key:"_horizontal",value:function(t){var n=t.h,i=t.w;p.each([this.sprite.context],function(t){t.x+=(n-i)/2,t.y+=(i-n)/2;var e={x:i/2,y:n/2};t.rotation=90,t.rotateOrigin=e})}},{key:"changeFieldEnabled",value:function(t){this.setFieldEnabled(t);var e=this.getFieldMapOf(t),n=e.yAxis||e.rAxis,i=this.getEnabledFieldsOf(n);n.resetData(this.getAxisDataFrame(i)),this._resetXY_axisLine_pos(),this._grid.reset({animation:!1})}},{key:"_initInduce",value:function(){var e=this;e.induce=new h.default.Shapes.Rect({id:"induce",context:{x:e.origin.x,y:e.origin.y-e.height,width:e.width,height:e.height,fillStyle:"#000000",globalAlpha:0,cursor:"pointer"}}),e.sprite.getChildById("induce")||e.sprite.addChild(e.induce),e.induce.on(g.types.get(),function(t){e.fire(t.type,t),e.app.fire(t.type,t)})}},{key:"getTipsInfoHandler",value:function(t){var e=t.point.x;t.target!==this.induce&&(e=this.induce.globalToLocal(t.target.localToGlobal(t.point)).x);var n=this._xAxis.getNodeInfoOfX(e),i={xAxis:n,dimension_1:n,title:n.text,iNode:n.ind,nodes:[]};return t.eventInfo&&(p.extend(!0,i,t.eventInfo),i.xAxis&&(t.eventInfo.xAxis=n)),i}},{key:"getPoint",value:function(t){var e={x:0,y:void 0},n={type:"yAxis",field:t.field},i=this.getAxis({type:"xAxis"}),a=this.getAxis(n),r=t.iNode||0,o=t.value;"x"in o||(o.x=p.flatten(i.dataOrg)[r]),e.x=i.getPosOf({ind:r,val:o.x});var l=o.y;return isNaN(l)||null==l||""===l?e.y=void 0:e.y=-a.getPosOfVal(l),{pos:e,value:o}}},{key:"getAxisOriginPoint",value:function(t){var e=this.getAxis(t);return{pos:-e.originPos,value:e.origin}}},{key:"getOriginPos",value:function(t){var e={type:"yAxis",field:t.field},n=this.getAxis({type:"xAxis"}),i=this.getAxis(e);return{x:n.originPos,y:-i.originPos}}}]),y);function y(t,e){var n;return(0,i.default)(this,y),n=(0,a.default)(this,(0,r.default)(y).call(this,t,e)),p.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(y.defaultProps()),n.setDefaultOpt(t,e)),n.type="rect",n._xAxis=null,n._yAxis=[],n._yAxisLeft=null,n._yAxisRight=null,n._grid=null,n.init(t),n}u.default.registerComponent(v,"coord","rect");var x=v;e.default=x}));var on=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=u.default._,d=u.default.event,f=u.default.Shapes.Line,c=u.default.Shapes.Circle,p=u.default.Shapes.Polygon,g=(n=d.Dispatcher,(0,s.default)(v,n),(0,l.default)(v,null,[{key:"defaultProps",value:function(){return{enabled:{detail:"是否开启grid",default:!1},ring:{detail:"环背景线",propertys:{shapeType:{detail:"线的图形样式，默认poly，可选circle",default:"poly"},lineType:{detail:"线条样式，sold实线，dashed虚线",default:"sold"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#e5e5e5"},fillStyle:{detail:"环填充色,支持函数配置",default:null},fillAlpha:{detail:"环填充的透明度",default:.5}}},ray:{detail:"射线",propertys:{enabled:{detail:"是否开启",default:!0},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#e5e5e5"}}}}}}]),(0,l.default)(v,[{key:"init",value:function(){this.sprite=new u.default.Display.Sprite}},{key:"setX",value:function(t){this.sprite.context.x=t}},{key:"setY",value:function(t){this.sprite.context.y=t}},{key:"draw",value:function(t){h.extend(!0,this,t),this._widget(),this.setX(this.pos.x),this.setY(this.pos.y)}},{key:"clean",value:function(){this.sprite.removeAllChildren()}},{key:"reset",value:function(){}},{key:"_widget",value:function(){var l=this;h.each(this.dataSection,function(t,e){if(t){var n,i=l.app.getROfNum(t),a=l.app.getPointsOfR(i),r={lineWidth:l.ring.lineWidth,strokeStyle:l._getStyle(l.ring.strokeStyle,e-1),fillStyle:l._getStyle(l.ring.fillStyle,e-1),fillAlpha:l.ring.fillAlpha},o=c;n="circle"==l.ring.shapeType?(r.r=i,new o({context:r})):(r.pointList=[],h.each(a,function(t,e){e<a.length&&r.pointList.push([t.x,t.y])}),new(o=p)({context:r})),l.sprite.addChildAt(n,0),e==l.dataSection.length-1&&(r.fillAlpha=0,r.fillStyle="#ffffff",l.induce=new o({context:r}),l.sprite.addChild(l.induce)),h.each(a,function(t){var e=new f({context:{end:t,lineWidth:l.ring.lineWidth,strokeStyle:l.ring.strokeStyle}});l.sprite.addChild(e)})}})}},{key:"_getStyle",value:function(t,e){return h.isArray(t)?t[e%t.length]:t}}]),v);function v(t,e){var n;return(0,i.default)(this,v),(n=(0,a.default)(this,(0,r.default)(v).call(this,t,e))).width=0,n.height=0,n.app=e,n.pos={x:0,y:0},n.dataSection=[],n.sprite=null,n.induce=null,h.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),n.init(t),n}e.default=g});t(on),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Qe),h=H(Ce),d=H(on),f=H(Je),k=h.default._,c=h.default.event,p=(n=u.default,(0,s.default)(g,n),(0,l.default)(g,null,[{key:"defaultProps",value:function(){return{allAngle:{detail:"坐标系总角度",documentation:"",default:360,values:[0,360]},startAngle:{detail:"坐标系起始角度",documentation:"",default:0,values:[0,360]},radius:{detail:"坐标系的最大半径",documentation:"默认自动计算view的高宽，如果squareRange==true，则会取Math.min(width,height)",default:"auto",values:null},aAxis:{detail:"角度轴",documentation:"类似直角坐标系中的x轴",propertys:{data:[],angleList:[],layoutData:[],field:{detail:"数据字段",documentation:"",default:""},layoutType:{detail:"布局类型",documentation:"",default:"proportion"},beginAngle:{detail:"起始角度",documentation:"",default:-90},enabled:{detail:"是否显示",documentation:"",default:!1},label:{detail:"文本配置",documentation:"",propertys:{enabled:{detail:"是否显示",documentation:"",default:!0},format:{detail:"label的格式化处理函数",documentation:"",default:null},fontColor:{detail:"label颜色",documentation:"",default:"#666"}}}}},rAxis:{detail:"半径维度轴",documentation:"类似直角坐标系中的y轴维度",propertys:{field:{detail:"数据字段",documentation:"",default:""},dataSection:{detail:"轴的显示数据",documentation:"默认根据源数据中自动计算，用户也可以手动指定",default:!1},enabled:{detail:"是否显示",documentation:"",default:!1}}}}}}]),(0,l.default)(g,[{key:"setDefaultOpt",value:function(t,e){var n={rAxis:{field:[]},aAxis:{},grid:{}};k.extend(!0,n,t),k.isArray(n.rAxis.field)||(n.rAxis.field=[n.rAxis.field]);var i=k.flatten([e._opt.graphs]),a=[];return k.each(i,function(t){if(t.field){var e=t.field;k.isArray(e)||(e=[e]),a=a.concat(e)}}),n.rAxis.field=n.rAxis.field.concat(a),t.aAxis&&t.aAxis.field?n.aAxis.enabled=!0:n.grid.enabled=!1,n}},{key:"init",value:function(){this._initModules(),this.fieldsMap=this.setFieldsMap({type:"rAxis"})}},{key:"_initModules",value:function(){this.grid.enabled&&(this._grid=new d.default(this.grid,this),this.sprite.addChild(this._grid.sprite)),this.aAxis.enabled&&this.grid.enabled&&(this._aAxisScaleSp=new h.default.Display.Sprite({id:"aAxisScaleSp"}),this.sprite.addChild(this._aAxisScaleSp)),this._axiss.push({type:"rAxis",field:this.rAxis.field})}},{key:"draw",value:function(){this._computeAttr(),this.rAxis.dataSection=this._getRDataSection(),this.aAxis.data=this.app.dataFrame.getFieldData(this.aAxis.field),this._setAAxisAngleList(),this.grid.enabled&&(this._grid.draw({pos:this.origin,width:this.width,height:this.height,dataSection:this.rAxis.dataSection},this),this.aAxis.enabled&&this._drawAAxis(),this._initInduce())}},{key:"resetData",value:function(){}},{key:"changeFieldEnabled",value:function(t){this.setFieldEnabled(t),this.rAxis.dataSection=this._getRDataSection(),this.aAxis.data=this.app.dataFrame.getFieldData(this.aAxis.field),this.grid.enabled&&this._grid.reset({dataSection:this.rAxis.dataSection},this)}},{key:"_getRDataSection",value:function(){var e=this;if(this._opt.rAxis&&this._opt.rAxis.dataSection)return this._opt.rAxis.dataSection;var n=[];return k.each(k.flatten([e.rAxis.field]),function(t){n=n.concat(e.app.dataFrame.getFieldData(t))}),n.push(0),f.default.section(n,3)}},{key:"_computeAttr",value:function(){var t,e,n=this.app.padding,i=this.app.width,a=this.app.height;"width"in this._opt||(this.width=i-n.left-n.right),"height"in this._opt||(this.height=a-n.top-n.bottom);for(var r=this.width,o=this.height,l=0,s=0,u=0,h=0,d=[this.startAngle],f=0,c=parseInt((this.startAngle+this.allAngle)/90)-parseInt(this.startAngle/90);f<=c;f++){var p=90*parseInt(this.startAngle/90)+90*f;-1==k.indexOf(d,p)&&p>d.slice(-1)[0]&&d.push(p)}var g=this.startAngle+this.allAngle;-1==k.indexOf(d,g)&&d.push(g),k.each(d,function(t){t%=360;var e=Math.sin(t*Math.PI/180);180==t&&(e=0);var n=Math.cos(t*Math.PI/180);270!=t&&90!=t||(n=0),l=Math.min(l,e),s=Math.max(s,e),u=Math.min(u,n),h=Math.max(h,n)}),e=(Math.abs(u)+Math.abs(h))/(Math.abs(l)+Math.abs(s));var v=Math.min(r,o);if(1==e)r=o=v;else{var y=o*e;r<y?o=r/e:r=y}var x=n.left+(this.width-r)/2,_=n.top+(this.height-o)/2;this.origin={x:x+r*(u/(u-h)),y:_+o*(l/(l-s))};var m={top:this.origin.y-_,right:x+r-this.origin.x,bottom:_+o-this.origin.y,left:this.origin.x-x},b=[],w=[["right","bottom"],["bottom","left"],["left","top"],["top","right"]];k.each(d,function(t){t%=360;var e=parseInt(t/90),n=w[e];t%90==0&&(n=[["right","bottom","left","top"][e]]);var i=Math.sin(t*Math.PI/180);180==t&&(i=0);var a=Math.cos(t*Math.PI/180);270!=t&&90!=t||(a=0),k.each(n,function(t){var e;"top"!=t&&"bottom"!=t||i&&(e=Math.abs(m[t]/i)),"right"!=t&&"left"!=t||a&&(e=Math.abs(m[t]/a)),b.push(e)})}),t=k.min(b),this.aAxis.label.enabled&&(t-=20),this.radius=t}},{key:"getMaxDisToViewOfOrigin",value:function(){var t=this.origin,e=this.app.padding,n=this.app.width,i=this.app.height,a=n-e.left-e.right,r=i-e.top-e.bottom,o=[t.x-e.left,a+e.left-t.x,t.y-e.top,r+e.top-t.y];return k.max(o)}},{key:"getRadiansAtR",value:function(t,e,n){var a=this;null==e&&(e=this.width),null==n&&(n=this.height);var i,r,o=[],l=this.app.padding,s={x:this.origin.x-l.left-(this.width-e)/2,y:this.origin.y-l.top-(this.height-n)/2},u=s.y;u<t&&(i=Math.sqrt(Math.pow(t,2)-Math.pow(u,2)),o=o.concat(this._filterPointsInRect([{x:-i,y:-u},{x:i,y:-u}],s,e,n)));var h=e-s.x;h<t&&(r=Math.sqrt(Math.pow(t,2)-Math.pow(h,2)),o=o.concat(this._filterPointsInRect([{x:h,y:-r},{x:h,y:r}],s,e,n)));var d=n-s.y;d<t&&(i=Math.sqrt(Math.pow(t,2)-Math.pow(d,2)),o=o.concat(this._filterPointsInRect([{x:i,y:d},{x:-i,y:d}],s,e,n)));var f=s.x;f<t&&(r=Math.sqrt(Math.pow(t,2)-Math.pow(f,2)),o=o.concat(this._filterPointsInRect([{x:-f,y:r},{x:-f,y:-r}],s,e,n)));var c=[];0==o.length?c.push([{point:{x:t,y:0},radian:0},{point:{x:t,y:0},radian:2*Math.PI}]):k.each(o,function(t,e){var n=e==o.length-1?0:e+1,i=o.slice(n,n+1)[0];c.push([{point:t,radian:a.getRadianInPoint(t)},{point:i,radian:a.getRadianInPoint(i)}])});for(var p=0,g=c.length;p<g;p++)this._checkArcInRect(c[p],t,s,e,n)||(c.splice(p,1),p--,g--);return c}},{key:"_filterPointsInRect",value:function(t,e,n,i){for(var a=0,r=t.length;a<r;a++)this._checkPointInRect(t[a],e,n,i)||(t.splice(a,1),a--,r--);return t}},{key:"_checkPointInRect",value:function(t,e,n,i){var a=t.x+e.x,r=t.y+e.y;return!(a<0||n<a||r<0||i<r)}},{key:"_checkArcInRect",value:function(t,e,n,i,a){var r=t[0],o=t[1],l=o.radian-r.radian;o.radian<r.radian&&(l=2*Math.PI+o.radian-r.radian);var s=(r.radian+l/2)%(2*Math.PI);return this._checkPointInRect(this.getPointInRadianOfR(s,e),n,i,a)}},{key:"getRadianInPoint",value:function(t){var e=2*Math.PI;return(Math.atan2(t.y,t.x)+e)%e}},{key:"getPointInRadianOfR",value:function(t,e){var n=Math.PI,i=Math.cos(t)*e;t!=n/2&&t!=3*n/2||(i=0);var a=Math.sin(t)*e;return t%n==0&&(a=0),{x:i,y:a}}},{key:"getROfNum",value:function(t){var e=k.max(this.rAxis.dataSection);return this.radius*(t/e)}},{key:"getPointsOfR",value:function(i){var a=this,r=[];return k.each(a.aAxis.angleList,function(t){var e=Math.PI*t/180,n=a.getPointInRadianOfR(e,i);r.push(n)}),r}},{key:"_setAAxisAngleList",value:function(){var n=this;n.aAxis.angleList=[];var t=this.aAxis.data;if("proportion"==this.aAxis.layoutType){t=[];for(var e=0,i=this.aAxis.data.length;e<i;e++)t.push(e)}var a=this.allAngle,r=k.max(t);"proportion"==this.aAxis.layoutType&&r++,k.each(t,function(t){var e=(a*(t/r)+n.aAxis.beginAngle+a)%a;n.aAxis.angleList.push(e)})}},{key:"_drawAAxis",value:function(){var o=this,t=o.getROfNum(k.max(this.rAxis.dataSection)),l=o.getPointsOfR(t+3);o._aAxisScaleSp.context.x=this.origin.x,o._aAxisScaleSp.context.y=this.origin.y,k.each(this.aAxis.data,function(t,e){var n=l[e],i=k.isFunction(o.aAxis.label.format)?o.aAxis.label.format(t):t,a={value:t,text:i,iNode:e,field:o.aAxis.field};if(o._getProp(o.aAxis.label.enabled,a)){var r={x:n.x,y:n.y,fillStyle:o._getProp(o.aAxis.label.fontColor,a)};k.extend(r,o._getTextAlignForPoint(Math.atan2(n.y,n.x))),o._aAxisScaleSp.addChild(new h.default.Display.Text(i,{context:r})),o.aAxis.layoutData.push(i)}})}},{key:"_getTextAlignForPoint",value:function(t){var e="center",n="bottom";return t>-Math.PI/2&&t<0&&(e="left",n="bottom"),0==t&&(e="left",n="middle"),0<t&&t<Math.PI/2&&(e="left",n="top"),t==Math.PI/2&&(e="center",n="top"),t>Math.PI/2&&t<Math.PI&&(e="right",n="top"),t!=Math.PI&&t!=-Math.PI||(e="right",n="middle"),t>-Math.PI&&t<-Math.PI/2&&(e="right",n="bottom"),{textAlign:e,textBaseline:n}}},{key:"getAxisNodeOf",value:function(t){var e=this.getAAxisIndOf(t);if(void 0!==e)return{ind:e,value:this.aAxis.data[e],text:this.aAxis.layoutData[e],angle:this.aAxis.angleList[e]}}},{key:"getAAxisIndOf",value:function(t){var a=this;if(void 0!==t.aAxisInd)return t.aAxisInd;if(a.aAxis.angleList.length){var e=t.point,r=(180*a.getRadianInPoint(e)/Math.PI-a.aAxis.beginAngle)%a.allAngle,o=0,l=a.aAxis.angleList.length;return k.each(a.aAxis.angleList,function(t,e){t=(t-a.aAxis.beginAngle)%a.allAngle;var n=e+1,i=(a.aAxis.angleList[n]-a.aAxis.beginAngle)%a.allAngle;if(e==l-1&&(n=0,i=a.allAngle),t<=r&&r<=i)return o=r-t<i-r?e:n,!1}),o}}},{key:"_initInduce",value:function(){var e=this;e.induce=this._grid.induce,e.induce&&e.induce.on(c.types.get(),function(t){e.fire(t.type,t),e.app.fire(t.type,t)})}},{key:"getTipsInfoHandler",value:function(t){var e=this.getAxisNodeOf(t),n={nodes:[]};return e&&(n.aAxis=e,n.title=e.text,n.iNode=e.ind),t.eventInfo&&(n=k.extend(n,t.eventInfo)),n}},{key:"getPoint",value:function(){}},{key:"getSizeAndOrigin",value:function(){}},{key:"_getProp",value:function(t,e,n){var i=t;return k.isFunction(t)&&(i=t.apply(this,[e])),!i&&n&&(i=n),i}}]),g);function g(t,e){var n;return(0,i.default)(this,g),(n=(0,a.default)(this,(0,r.default)(g).call(this,t,e))).type="polar",k.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(g.defaultProps()),n.setDefaultOpt(t,e)),n.init(t),n}u.default.registerComponent(p,"coord","polar");var v=p;e.default=v}));var ln=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=H(ze),r=H(Ue),o=H(qe),l=H(Ve),i=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=h.default.AnimationFrame,f=h.default._,c=(n=u.default,(0,s.default)(p,n),(0,i.default)(p,null,[{key:"defaultProps",value:function(){return{type:{detail:"绘图组件",default:"",insertText:"type: ",values:["bar","line","pie","scat"]},animation:{detail:"是否开启入场动画",default:!0},aniDuration:{detail:"动画时长",default:500}}}}]),(0,i.default)(p,[{key:"tipsPointerOf",value:function(){}},{key:"tipsPointerHideOf",value:function(){}},{key:"focusAt",value:function(){}},{key:"unfocusAt",value:function(){}},{key:"selectAt",value:function(){}},{key:"unselectAt",value:function(){}},{key:"getSelectedList",value:function(){return[]}},{key:"getSelectedRowList",value:function(){return[]}},{key:"hide",value:function(){}},{key:"show",value:function(){}},{key:"getLegendData",value:function(){}},{key:"triggerEvent",value:function(t){var e=(t.eventInfo.trigger||this)["on"+t.type];e&&f.isFunction(e)&&(t.eventInfo&&t.eventInfo.nodes&&t.eventInfo.nodes.length?1==t.eventInfo.nodes.length?e.apply(this,[t,t.eventInfo.nodes[0]]):e.apply(this,[t,t.eventInfo.nodes]):e.apply(this,arguments))}},{key:"grow",value:function(e,t){t=t||{};var n=this,i=this.aniDuration;this.animation||(i=0);var a=0,r=1;"from"in t&&(a=t.from),"to"in t&&(r=t.to),this._growTween=d.registTween({from:{process:a},to:{process:r},duration:i,onUpdate:function(t){f.isFunction(e)&&e(t.process)},onComplete:function(){this._growTween=null,n.fire("complete")}})}}]),p);function p(t,e){var n;(0,a.default)(this,p),n=(0,r.default)(this,(0,o.default)(p).call(this,t,e)),f.extend(!0,(0,l.default)(n),(0,Ke.getDefaultProps)(p.defaultProps())),n.name="graphs",n._opt=t||{},n.app=e,n.ctx=e.stage.canvas.getContext("2d"),n.dataFrame=e.dataFrame,n.data=null,n.width=0,n.height=0,n.origin={x:0,y:0},n.inited=!1,n.sprite=new h.default.Display.Sprite({name:"graphs_"+t.type}),n.app.graphsSprite.addChild(n.sprite);var i=(n._growTween=null,l.default)(n);return n.sprite.on("destroy",function(){i._growTween&&(d.destroyTween(i._growTween),i._growTween=null)}),n}e.default=c});t(ln),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),D=H(Ce),u=H(ln),L=D.default._,E=D.default.event,h=D.default.AnimationFrame,F=D.default.Shapes.Rect,d=(n=u.default,(0,s.default)(f,n),(0,l.default)(f,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段设置",documentation:"支持二维数组格式的设置，一维方向就是横向分组，二维方向就是纵向的堆叠",default:null},yAxisAlign:{detail:"绘制在哪根y轴上面",default:"left"},absolute:{detail:"是否脱离graphs的位置计算",documentation:"                    trimGraphs的时候是否需要和其他的 bar graphs一起并排计算，                    true的话这个就会和别的重叠,                    和css中得absolute概念一致，脱离文档流的绝对定位",default:!1},proportion:{detail:"比例柱状图",default:!1},node:{detail:"单个数据对应的图形设置",propertys:{width:{detail:"bar的宽度",default:0},maxWidth:{detail:"最大width",default:50},minWidth:{detail:"最小width",default:1},minHeight:{detail:"最小height",default:0},radius:{detail:"叶子节点的圆角半径",default:3},fillStyle:{detail:"bar填充色",default:null},fillAlpha:{detail:"bar透明度",default:.95},xDis:{detail:"单分组内bar之间的间隔",default:null},filter:{detail:"bar过滤处理器",default:null}}},label:{detail:"文本设置",propertys:{enabled:{detail:"是否开启",default:!1},fontColor:{detail:"文本颜色",default:null,documentation:"如果有设置text.fontColor那么优先使用fontColor"},fontSize:{detail:"文本字体大小",default:12},format:{detail:"文本格式化处理函数",default:null},lineWidth:{detail:"文本描边线宽",default:0},strokeStyle:{detail:"文本描边颜色",default:null},rotation:{detail:"旋转角度",default:0},textAlign:{detail:"水平对齐方式",documentation:"left center right",default:"center"},verticalAlign:{detail:"垂直基线对齐方式",documentation:"top middle bottom",default:"bottom"},position:{detail:"文本布局位置",documentation:"top,topRight,right,rightBottom,bottom,bottomLeft,left,leftTop,center",default:"top"},offsetX:{detail:"x偏移量",default:0},offsetY:{detail:"y偏移量",default:0}}},select:{detail:"分组选中",documentation:"                    分组的选中，不是选中具体的某个node，这里的选中靠groupRegion来表现出来,                    目前只有在第一个graphs bar 上配置有效",propertys:{enabled:{detail:"是否开启",default:!1},inds:{detail:"选中的分组索引集合",documentation:"选中的列的索引集合,注意，这里的ind不是当前视图的ind，而是加上了dataFrame.range.start的全局ind",default:[]},width:{detail:"选中态背景宽度",default:1},alpha:{detail:"选中态背景透明度",default:.2},fillStyle:{detail:"选中态背景填充色",default:null},triggerEventType:{detail:"触发选中效果的事件",default:"click"}}}}}}]),(0,l.default)(f,[{key:"init",value:function(){this.barsSp=new D.default.Display.Sprite({id:"barsSp"}),this.txtsSp=new D.default.Display.Sprite({id:"txtsSp",context:{}})}},{key:"getNodesAt",value:function(n){var i=this.data,a=[];return L.each(this.enabledField,function(t){if(L.isArray(t))L.each(t,function(t){var e=i[t]?i[t][n]:null;e&&a.push(e)});else{var e=i[t]?i[t][n]:null;e&&a.push(e)}}),a}},{key:"_getTargetField",value:function(t,e,n,i){if(L.isString(i))return i;if(L.isArray(i)){var a=i[t];if(L.isString(a))return a;if(L.isArray(a))return a[e]}}},{key:"_getColor",value:function(t,e){var n=e.field,i=L.flatten([this.field]),a=this.app.getComponent({name:"coord"}).getFieldMapOf(n);if(L.isFunction(t)&&(t=t.apply(this,[e])),L.isString(t),L.isArray(t)&&(t=L.flatten(t)[L.indexOf(i,n)]),t&&t.lineargradient&&t.lineargradient.length)if(0!=e.rectHeight){var r=this.ctx.createLinearGradient(e.x,e.fromY+e.rectHeight,e.x,e.fromY);L.each(t.lineargradient,function(t){r.addColorStop(t.position,t.color)}),t=r}else t=t.lineargradient[parseInt(t.lineargradient.length/2)].color;return null==t&&(t=a.color),t}},{key:"_getBarWidth",value:function(t,e){return this.node.width?L.isFunction(this.node.width)?this.node._width=this.node.width(t):this.node._width=this.node.width:(this.node._width=e-Math.max(1,.2*e),1==this.node._width&&3<t&&(this.node._width=t-2)),this.node._width<1&&(this.node._width=1),this.node._width=parseInt(this.node._width),this.node._width>this.node.maxWidth&&(this.node._width=this.node.maxWidth),this.node._width}},{key:"show",value:function(){this.draw()}},{key:"hide",value:function(i){L.each(this.barsSp.children,function(t,e){var n=t.getChildById("bar_"+e+"_"+i);n&&n.destroy()}),L.each(this.txtsSp.children,function(t,e){var n=t.getChildById("text_"+e+"_"+i);n&&n.destroy()}),this.draw()}},{key:"resetData",value:function(t){this.dataFrame=t,this.draw()}},{key:"clean",value:function(){this.data={},this.barsSp.removeAllChildren(),this.label.enabled&&this.txtsSp.removeAllChildren()}},{key:"draw",value:function(t){t=t||{},L.extend(!0,this,t);var A=this,C=A.animation&&!t.resize;if(this.data=this._trimGraphs(),0==this.enabledField.length||0==this._dataLen)return A._preDataLen=0,void this.clean();var P=A._preDataLen,O=this.enabledField.length,T=0,M=A.node._count=0,I=A.app.getComponents({name:"graphs",type:"bar"});L.each(I,function(t,e){t==A&&(M=e)}),L.each(this.enabledField,function(t,e){var n=(t=L.flatten([t])).length;if(0!=n){T=A.width/A._dataLen,A._barsLen=A._dataLen*O;for(var i=0;i<A._dataLen;i++){var a=null;if(0==e){if(i<=P-1?a=A.barsSp.getChildById("barGroup_"+i):(a=new D.default.Display.Sprite({id:"barGroup_"+i}),A.barsSp.addChild(a),a.iNode=i),!M){var r=void 0,o=T*A.select.width;1<A.select.width&&(o=A.select.width),i<=P-1?((r=a.getChildById("group_region_"+i)).context.width=o,r.context.x=T*i+(T-o)/2,r.context.globalAlpha=-1<L.indexOf(A.select.inds,A.dataFrame.range.start+i)?A.select.alpha:0):(r=new F({id:"group_region_"+i,pointChkPriority:!1,hoverClone:!1,xyToInt:!1,context:{x:T*i+(T-o)/2,y:-A.height,width:o,height:A.height,fillStyle:A._getGroupRegionStyle(i),globalAlpha:-1<L.indexOf(A.select.inds,A.dataFrame.range.start+i)?A.select.alpha:0}}),a.addChild(r),r.iNode=i,r.on(E.types.get(),function(t){t.eventInfo={iNode:this.iNode},S.bind(this)(t),A.app.fire(t.type,t)}))}}else a=A.barsSp.getChildById("barGroup_"+i);var l=null;0!=e||i<=P-1?l=A.txtsSp.getChildById("txtGroup_"+i):(l=new D.default.Display.Sprite({id:"txtGroup_"+i}),A.txtsSp.addChild(l),l.iGroup=e);for(var s=0;s<n;s++){A.node._count++;var u=A.data[t[s]][i];u.iGroup=e,u.iNode=i,u.iLay=s;var h=u.y-u.fromY;isNaN(u.value)?h=0:Math.abs(h)<A.node.minHeight&&(h=A.node.minHeight),u.rectHeight=h;var d=A._getColor(A.node.fillStyle,u);if((u.color=d)instanceof CanvasGradient&&A.node.fillStyle.lineargradient){var f=A.node.fillStyle.lineargradient[parseInt(A.node.fillStyle.lineargradient.length/2)];f&&(u.color=f.color)}var c={x:Math.round(u.x),y:u.fromY,width:A.node._width,height:h,fillStyle:d,fillAlpha:A.node.fillAlpha,scaleY:-1};u.width=c.width;var p={x:c.x,y:u.yOriginPoint.pos,width:c.width,height:c.height,fillStyle:c.fillStyle,fillAlpha:A.node.fillAlpha,scaleY:0};if(A.node.radius&&u.isLeaf&&!A.proportion){var g=Math.min(A.node._width/2,Math.abs(h));g=Math.min(g,A.node.radius),p.radius=[g,g,0,0]}C||(delete p.scaleY,p.y=c.y);var v=null,y="bar_"+i+"_"+u.field;if(i<=P-1&&(v=a.getChildById(y)),v?v.context.fillStyle=d:((v=new F({id:y,context:p})).field=u.field,a.addChild(v),v.on(E.types.get(),function(t){t.eventInfo={trigger:A.node,nodes:[this.nodeData]},S.bind(this)(t),A.app.fire(t.type,t)})),v.finalPos=c,v.iGroup=e,v.iNode=i,v.iLay=s,(v.nodeData=u).nodeElement=v,A.node.filter&&A.node.filter.apply(v,[u,A]),A.label.enabled){var x=u.value;if(L.isFunction(A.label.format)){var _=A.label.format(x,u);void 0===_&&null===_||(x=_)}if(null==x||""===x)continue;L.isNumber(x)&&(x=(0,Ke.numAddSymbol)(x));var m={fillStyle:A.label.fontColor||c.fillStyle,fontSize:A.label.fontSize,lineWidth:A.label.lineWidth,strokeStyle:A.label.strokeStyle||c.fillStyle,textBaseline:A.label.verticalAlign,rotation:A.label.rotation},b=A._getTextPos(c,u);m.x=b.x,m.y=b.y,m.textAlign=A._getTextAlign(c,u);var w=null,k="text_"+i+"_"+u.field;i<=P-1&&(w=l.getChildById(k)),w?(w.resetText(x),w.context.x=m.x,w.context.y=m.y):((w=new D.default.Display.Text(x,{id:k,context:m})).field=u.field,l.addChild(w))}}}}function S(t){if(A.select.enabled&&t.type==A.select.triggerEventType){var e=A.dataFrame.range.start+this.iNode;-1<L.indexOf(A.select.inds,e)?L.each(I,function(t){t.unselectAt(e)}):L.each(I,function(t){t.selectAt(e)})}}}),this.sprite.addChild(this.barsSp),this.label.enabled&&this.sprite.addChild(this.txtsSp),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this.grow(function(){A.fire("complete")},{delay:0,duration:300,animate:C}),A._preDataLen=A._dataLen}},{key:"setEnabledField",value:function(){this.enabledField=this.app.getComponent({name:"coord"}).filterEnabledFields(this.field)}},{key:"_getGroupRegionStyle",value:function(t){var e=this.select.fillStyle;return L.isArray(this.select.fillStyle)&&(e=this.select.fillStyle[t]),L.isFunction(this.select.fillStyle)&&(e=this.select.fillStyle.apply(this,[{iNode:t,rowData:this.dataFrame.getRowDataAt(t)}])),null==e?this.select._fillStyle:e}},{key:"_trimGraphs",value:function(){var g=this,v=this.app.getComponent({name:"coord"});this.setEnabledField(),this.data={};var e=[],n=0,i=0,a=!1;this.absolute?(e=[this],n=this.enabledField.length):L.each(g.app.getComponents({name:"graphs",type:"bar"}),function(t){t.absolute||(t===g&&(a=!0),a?t.setEnabledField():i+=t.enabledField.length,n+=t.enabledField.length,e.push(t))});var y=v.getAxis({type:"xAxis"}).getCellLength(),t=y/(n+1),x=this._getBarWidth(y,t),_=t-x;null!=this.node.xDis&&(_=this.node.xDis);var m=(y-x*n-_*(n-1))/2;i&&(m+=(_+x)*i);var r=this.dataFrame.getDataOrg(this.enabledField),o=g.getGraphSelectOpt();return!g.select.inds.length&&o&&o.inds&&o.inds.length&&(g.select.inds=L.clone(o.inds)),L.each(r,function(f,c){var p=[];L.each(f,function(t,d){p[d]=[],g._dataLen=t.length,L.each(t,function(t,e){var n=t;g.proportion&&(n=0,L.each(f,function(t){n+=t[e]}));var i=g._getTargetField(c,d,e,g.enabledField),a=v.getPoint({iNode:e,field:i,value:{y:t}}),r=a.pos.x,o=r-y/2+m+(x+_)*c,l=0;l=g.proportion?-t/n*v.height:a.pos.y,isNaN(l)&&(l=0);var u=v.getAxisOriginPoint({field:i}),s=function t(e,n,i,a){var r=e[n-1];if(!r)return u.pos;var o=r[i].y,l=r[i].value,s=u.value;return s<=a?s<=l?(r[i].isLeaf=!1,o):t(e,n-1,i,a):l<s?(r[i].isLeaf=!1,o):t(e,n-1,i,a)}(p,d,e,t);l+=s-u.pos;var h={type:"bar",value:t,vInd:d,vCount:n,field:i,fromX:o,fromY:s,x:o,y:l,width:x,yOriginPoint:u,isLeaf:!0,xAxis:v.getAxis({type:"xAxis"}).getNodeInfoOfX(r),iNode:e,rowData:g.dataFrame.getRowDataAt(e),color:null,selected:!1};g.data[h.field]||(g.data[h.field]=p[d]),-1<L.indexOf(g.select.inds,e)&&(h.selected=!0),p[d].push(h)})})}),g.data}},{key:"_getTextAlign",value:function(t,e){var n=this.label.textAlign;return e.value<e.yOriginPoint.value&&("left"==n?n="right":"right"==n&&(n="left")),n}},{key:"_getTextPos",value:function(t,e){var n={x:0,y:0},i=t.x,a=t.y,r=!0;switch(t.y>=e.y&&(r=!1),this.label.position){case"top":i=t.x+t.width/2,a=t.y+t.height,r&&(a+=16);break;case"topRight":i=t.x+t.width,a=t.y+t.height,r&&(a+=16);break;case"right":i=t.x+t.width,a=t.y+t.height/2;break;case"rightBottom":i=t.x+t.width,a=t.y;break;case"bottom":i=t.x+t.width/2,a=t.y;break;case"bottomLeft":i=t.x,a=t.y;break;case"left":i=t.x,a=t.y+t.height/2;break;case"leftTop":i=t.x,a=t.y+t.height,r&&(a+=16);break;case"center":i=t.x+t.width/2,a=t.y+t.height/2}i-=this.label.offsetX;var o=1;return e.value<e.yOriginPoint.value&&(o=-1),a-=o*this.label.offsetY,n.x=i,n.y=a,n}},{key:"grow",value:function(o,t){var l=this;if(l._preDataLen>l._dataLen)for(var e=l._dataLen,n=l._preDataLen;e<n;e++)l.barsSp.getChildAt(e).destroy(),l.label.enabled&&l.txtsSp.getChildAt(e).destroy(),e--,n--;if(t.animate){var s=L.extend({delay:Math.min(1e3/this._barsLen,80),easing:"Linear.None",duration:500},t),u=0;L.each(l.enabledField,function(t){var e=(t=L.flatten([t])).length;if(0!=e)for(var n=0;n<l._dataLen;n++)for(var i=0;i<e;i++){var a=l.data[t[i]][n],r=l.barsSp.getChildById("barGroup_"+n).getChildById("bar_"+n+"_"+a.field);0==s.duration?(r.context.scaleY=1,r.context.y=+r.finalPos.y,r.context.x=r.finalPos.x,r.context.width=r.finalPos.width,r.context.height=r.finalPos.height):(r._tweenObj&&h.destroyTween(r._tweenObj),r._tweenObj=r.animate({scaleY:1,y:+r.finalPos.y,x:r.finalPos.x,width:r.finalPos.width,height:r.finalPos.height},{duration:s.duration,easing:s.easing,delay:n*s.delay,onUpdate:function(){},onComplete:function(t){t.width<3&&this.context&&(this.context.radius=0),++u===l.node._count&&o&&o(l)},id:r.id}))}})}else o&&o(l)}},{key:"selectAt",value:function(t){var n=this;if(!(-1<L.indexOf(this.select.inds,t))){this.select.inds.push(t);var i=t-this.dataFrame.range.start;L.each(this.data,function(t){var e=t[i];e.selected=!0,n.setNodeElementStyle(e)});var e=this.barsSp.getChildById("barGroup_"+i);if(e){var a=e.getChildById("group_region_"+i);a&&(a.context.globalAlpha=this.select.alpha)}}}},{key:"unselectAt",value:function(t){var n=this;if(-1!=L.indexOf(this.select.inds,t)){var e=L.indexOf(this.select.inds,t);this.select.inds.splice(e,1);var i=t-this.dataFrame.range.start;L.each(this.data,function(t){var e=t[i];e.selected=!1,n.setNodeElementStyle(e)});var a=this.barsSp.getChildById("barGroup_"+i);if(a){var r=a.getChildById("group_region_"+i);r&&(r.context.globalAlpha=0)}}}},{key:"getSelectedRowList",value:function(){var e=[],n=this;return L.each(n.select.inds,function(t){e.push(n.dataFrame.jsonOrg[t])}),e}},{key:"setNodeElementStyle",value:function(t){var e=this._getColor(this.node.fillStyle,t);t.nodeElement.context.fillStyle=e}},{key:"getGraphSelectOpt",value:function(){var e=this._opt.select;if(!e){var t=this.app.getComponents({name:"graphs",type:"bar"});L.each(t,function(t){if(e)return!1;!e&&t._opt.select&&(e=t.select)})}return e}}]),f);function f(t,e){var n;return(0,i.default)(this,f),(n=(0,a.default)(this,(0,r.default)(f).call(this,t,e))).type="bar",n.enabledField=null,n.node={_width:0,_count:0},n.select={_fillStyle:"#092848"},n._barsLen=0,n.txtsSp=null,L.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(f.defaultProps()),t),n.init(),n}u.default.registerComponent(d,"graphs","bar");var c=d;e.default=c}));var sn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.colorRgb=n,e.colorRgba=function(t,e){return n(t).replace(")",","+e+")").replace("RGB","RGBA")},e.hexTorgb=function(t,e){return t.replace&&(t=parseInt(t.replace("#","0X"),16)),(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hexTostring=function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#".concat(t)},e.rgbTohex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]};var o=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;function n(t){var e=t.toLowerCase();if(e&&o.test(e)){if(4===e.length){for(var n="#",i=1;i<4;i+=1)n+=e.slice(i,i+1).concat(e.slice(i,i+1));e=n}for(var a=[],r=1;r<7;r+=2)a.push(parseInt("0x"+e.slice(r,r+2)));return"RGB("+a.join(",")+")"}return e}});t(sn),sn.colorRgb,sn.colorRgba,sn.hexTorgb,sn.hexTostring,sn.rgbTohex;var un=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,s=H(ze),u=H(Ue),h=H(qe),d=H(Ve),i=H(Ge),a=H($e),v=H(Ce),y=v.default._,f=v.default.event,o=v.default.AnimationFrame,c=v.default.Shapes.BrokenLine,x=v.default.Shapes.Circle,_=v.default.Shapes.Isogon,m=v.default.Shapes.Path,r=(n=f.Dispatcher,(0,a.default)(p,n),(0,i.default)(p,null,[{key:"defaultProps",value:function(){return{line:{detail:"线配置",propertys:{enabled:{detail:"是否开启",default:!0},strokeStyle:{detail:"线的颜色",default:void 0},lineWidth:{detail:"线的宽度",default:2},lineType:{detail:"线的样式",default:"solid"},smooth:{detail:"是否平滑处理",default:!0}}},node:{detail:"单个数据节点配置，对应线上的小icon图形",propertys:{enabled:{detail:"是否开启",default:!0},shapeType:{detail:"节点icon的图形类型，默认circle",documentation:'可选有"isogon"(正多边形)，"path"（自定义path路径，待实现）',default:"circle"},isogonPointNum:{detail:'shapeType为"isogon"时有效，描述正多边形的边数',default:3},path:{detail:"shapeType为path的时候，描述图形的path路径",default:null},corner:{detail:"拐角才有节点",default:!1},radius:{detail:"节点半径",default:3},fillStyle:{detail:"节点图形的背景色",default:"#ffffff"},strokeStyle:{detail:"节点图形的描边色，默认和line.strokeStyle保持一致",default:null},lineWidth:{detail:"节点图形边宽大小",default:2},visible:{detail:"节点是否显示,支持函数",default:!0}}},label:{detail:"文本配置",propertys:{enabled:{detail:"是否开启",default:!1},fontColor:{detail:"文本颜色",default:null},strokeStyle:{detail:"文本描边色",default:null},fontSize:{detail:"文本字体大小",default:12},format:{detail:"文本格式化处理函数",default:null}}},area:{detail:"面积区域配置",propertys:{enabled:{detail:"是否开启",default:!0},fillStyle:{detail:"面积背景色",default:null},alpha:{detail:"面积透明度",default:.2}}}}}}]),(0,i.default)(p,[{key:"init",value:function(){this.sprite=new v.default.Display.Sprite}},{key:"draw",value:function(t,e){y.extend(!0,this,t),this.data=e,this._widget(t)}},{key:"destroy",value:function(){var t=this;t.sprite.animate({globalAlpha:0},{duration:300,onComplete:function(){t.sprite.remove()}})}},{key:"_getColor",value:function(t,e){var n=this._getProp(t,e);return null==n&&(n=this._getLineStrokeStyle(),t&&t.lineargradient&&(n=t.lineargradient[parseInt(t.lineargradient.length/2)].color),n&&y.isString(n)||(n=this.fieldMap.color)),n}},{key:"_getProp",value:function(t,e){if(y.isArray(t))return t[this.iGroup];if(y.isFunction(t)){var n=[];return null!=e&&n.push(this.data[e]),t.apply(this,n)}return t}},{key:"getNodeInfoAt",value:function(t,e){var n=this.data[t];if(e&&e.eventInfo&&e.eventInfo.dimension_1&&"proportion"==e.eventInfo.dimension_1.layoutType)for(var i,a=0,r=this.data.length;a<r;a++){var o=this.data[a],l=Math.abs(o.x-t);(null==i||l<i)&&(i=l,n=o)}return n}},{key:"resetData",value:function(t,e){t&&(this.data=t),this._pointList=this._getPointList(this.data);var n={left:0,right:this._pointList.length-this._currPointList.length};e&&y.extend(n,e.params),n.left&&(0<n.left&&(this._currPointList=this._pointList.slice(0,n.left).concat(this._currPointList)),n.left<0&&this._currPointList.splice(0,Math.abs(n.left))),n.right&&(0<n.right&&(this._currPointList=this._currPointList.concat(this._pointList.slice(-n.right))),n.right<0&&this._currPointList.splice(this._currPointList.length-Math.abs(n.right))),this._createNodes(),this._createTexts(),this._grow()}},{key:"_grow",value:function(t){var r=this;function a(t){r._bline.context.pointList=y.clone(t),r._bline.context.strokeStyle=r._getLineStrokeStyle(t),r._area.context.path=r._fillLine(r._bline),r._area.context.fillStyle=r._getFillStyle();var a=0;y.each(t,function(t,e){if(y.isNumber(t[1])){if(r._nodes){var n=r._nodes.getChildAt(a);n&&(n.context.x=t[0],n.context.y=t[1])}if(r._labels){var i=r._labels.getChildAt(a);i&&(i.context.x=t[0],i.context.y=t[1]-3,r._checkTextPos(i,e))}a++}})}r.data.length?(this._growTween=o.registTween({from:r._getPointPosStr(r._currPointList),to:r._getPointPosStr(r._pointList),desc:r.field,onUpdate:function(t){for(var e in t){var n=parseInt(e.split("_")[2]),i=parseInt(e.split("_")[1]);r._currPointList[n]&&(r._currPointList[n][i]=t[e])}a(r._currPointList)},onComplete:function(){r.sprite._removeTween(r._growTween),r._growTween=null,a(r._pointList),t&&t(r)}}),this.sprite._tweens.push(this._growTween)):t&&t(r)}},{key:"_getPointPosStr",value:function(t){var n={};return y.each(t,function(t,e){t&&(n["p_1_"+e]=t[1],n["p_0_"+e]=t[0])}),n}},{key:"_getPointList",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var a=t[n];e.push([a.x,a.y])}return e}},{key:"_widget",value:function(t){var e=this;if(t=t||{},e._pointList=this._getPointList(e.data),0!=e._pointList.length){var n=[];if(t.animation)for(var i=this._getFirstNode(),a=i?i.y:void 0,r=0,o=e.data.length;r<o;r++){var l=e.data[r];n.push([l.x,y.isNumber(l.y)?a:l.y])}else n=e._pointList;var s={pointList:e._currPointList=n,lineWidth:e.line.lineWidth,y:e.y,strokeStyle:e._getLineStrokeStyle(n),smooth:e.line.smooth,lineType:e._getProp(e.line.lineType),smoothFilter:function(t){0<t[1]?t[1]=0:Math.abs(t[1])>e.h&&(t[1]=-e.h)},lineCap:"round"},u=new c({context:s});u.on(f.types.get(),function(t){t.eventInfo={trigger:e.line,nodes:[]},e._graphs.app.fire(t.type,t)}),this.line.enabled||(u.context.visible=!1),e.sprite.addChild(u),e._bline=u;var h=new m({context:{path:e._fillLine(u),fillStyle:e._getFillStyle(),globalAlpha:y.isArray(e.area.alpha)?1:e.area.alpha}});h.on(f.types.get(),function(t){t.eventInfo={trigger:e.area,nodes:[]},e._graphs.app.fire(t.type,t)}),this.area.enabled||(h.context.visible=!1),e.sprite.addChild(h),e._area=h,e._createNodes(),e._createTexts()}}},{key:"_getFirstNode",value:function(){for(var t=null,e=0,n=this.data.length;e<n;e++){var i=this.data[e];if(y.isNumber(i.y)&&(null!==t&&"right"!=this._yAxis.align||(t=i),"right"!==this._yAxis.align&&null!==t))break}return t}},{key:"_getFillStyle",value:function(){var t=this,e=null,n=t._getProp(t.area.fillStyle)||t._getLineStrokeStyle(null,"fillStyle");if(y.isArray(t.area.alpha)&&!(n instanceof CanvasGradient)){t.area.alpha.length=2,null==t.area.alpha[0]&&(t.area.alpha[0]=0),null==t.area.alpha[1]&&(t.area.alpha[1]=0);var i=y.min(t._bline.context.pointList,function(t){return t[1]});if(void 0===i[0]||void 0===i[1])return null;e=t.ctx.createLinearGradient(i[0],i[1],i[0],0);var a=(0,sn.colorRgb)(n),r=a.replace(")",", "+t._getProp(t.area.alpha[0])+")").replace("RGB","RGBA");e.addColorStop(0,r);var o=a.replace(")",", "+t.area.alpha[1]+")").replace("RGB","RGBA");e.addColorStop(1,o),n=e}return n}},{key:"_getLineStrokeStyle",value:function(t,e){var n;if(!this._opt.line||!this._opt.line.strokeStyle)return this.line.strokeStyle;if(this._opt.line.strokeStyle.lineargradient){t=t||this._bline.context.pointList;var i=y.min(t,function(t){return t[1]}),a=y.max(t,function(t){return t[1]});return"fillStyle"==e&&(a=[0,0]),void 0===i[0]||void 0===i[1]||void 0===a[1]?null:(n=this.ctx.createLinearGradient(i[0],i[1],i[0],a[1]),y.each(this._opt.line.strokeStyle.lineargradient,function(t){n.addColorStop(t.position,t.color)}),n)}return n=this._getColor(this._opt.line.strokeStyle)}},{key:"_createNodes",value:function(){var t=this,e=t._currPointList;this._nodes||(this._nodes=new v.default.Display.Sprite({}),this.sprite.addChild(this._nodes));for(var n=0,i=0,a=e.length;i<a;i++){var r=t._getColor(t.node.strokeStyle||t.line.strokeStyle,i);if(t.data[i].color=r,t.node.enabled){var o=t._currPointList[i];if(o&&y.isNumber(o[1])){var l={x:o[0],y:o[1],r:t._getProp(t.node.radius,i),lineWidth:t._getProp(t.node.lineWidth,i)||2,strokeStyle:r,fillStyle:t._getProp(t.node.fillStyle,i),visible:!!t._getProp(t.node.visible,i)},s=x,u=t._getProp(t.node.shapeType,i);"isogon"==u&&(s=_,l.n=t._getProp(t.node.isogonPointNum,i)),"path"==u&&(s=m,l.path=t._getProp(t.node.path,i));var h=t._nodes.children[n];if(h?h.type==u?y.extend(h.context,l):(h.destroy(),h=new s({context:l}),t._nodes.addChildAt(h,n)):(h=new s({context:l}),t._nodes.addChild(h)),t.node.corner){var d=t._pointList[i][1],f=t._pointList[i-1],c=t._pointList[i+1];f&&c&&d==f[1]&&d==c[1]&&(h.context.visible=!1)}n++}}}if(t._nodes.children.length>n)for(var p=n,g=t._nodes.children.length;p<g;p++)t._nodes.children[p].destroy(),p--,g--}},{key:"_createTexts",value:function(){var t=this,e=t._currPointList;if(t.label.enabled){this._labels||(this._labels=new v.default.Display.Sprite({}),this.sprite.addChild(this._labels));for(var n=0,i=0,a=e.length;i<a;i++){var r=e[i];if(r&&y.isNumber(r[1])){var o={x:r[0],y:r[1]-3,fontSize:this.label.fontSize,textAlign:"center",textBaseline:"bottom",fillStyle:t._getColor(t.label.fontColor,i),lineWidth:1,strokeStyle:"#ffffff"},l=t.data[i].value;if(y.isFunction(t.label.format)&&(l=t.label.format(l,t.data[i])||l),null!=l&&null!=l){var s=this._labels.children[n];s?(s.resetText(l),y.extend(s.context,o)):(s=new v.default.Display.Text(l,{context:o}),t._labels.addChild(s),t._checkTextPos(s,i)),n++}}}if(t._labels.children.length>n)for(var u=n,h=t._labels.children.length;u<h;u++)t._labels.children[u].destroy(),u--,h--}}},{key:"_checkTextPos",value:function(t,e){var n=this._currPointList,i=n[e-1],a=n[e+1];i&&a&&i[1]<t.context.y&&a[1]<t.context.y&&(t.context.y+=7,t.context.textBaseline="top")}},{key:"_fillLine",value:function(t){var n=y.clone(t.context.pointList),e="",i=-this._yAxis.originPos,a=null;function r(){a.push([a[a.length-1][0],i],[a[0][0],i],[a[0][0],a[0][1]]),e+=(0,Ke.getPath)(a),a=null}return y.each(n,function(t,e){y.isNumber(t[1])?(null===a&&(a=[]),a.push(t)):a&&a.length&&r(),e==n.length-1&&y.isNumber(t[1])&&r()}),e}},{key:"getNodeInfoOfX",value:function(a){for(var t=0,e=this.data.length;t<e;t++)if(null!==this.data[t].value&&Math.abs(this.data[t].x-a)<=1)return this.data[t];function r(t,e){var n={x:t,y:0};return n.y=e[0][1]+(e[1][1]-e[0][1])/(e[1][0]-e[0][0])*(t-e[0][0]),n}var o;return this._bline&&function t(e){if(!(a<e[0][0]||a>e.slice(-1)[0][0])){var n=parseInt(e.length/2);if(Math.abs(e[n][0]-a)<=1)o={x:e[n][0],y:e[n][1]};else{var i=[];if(a>e[n][0]){if(a<e[n+1][0])return void(o=r(a,[e[n],e[n+1]]));i=e.slice(n+1)}else{if(a>e[n-1][0])return void(o=r(a,[e[n-1],e[n]]));i=e.slice(0,n)}t(i)}}}(this._bline.context.pointList),o&&null!=o.y?{type:"line",iGroup:this.iGroup,iNode:-1,field:this.field,value:this._yAxis.getValOfPos(-o.y),x:o.x,y:o.y,rowData:null,color:this._getProp(this.node.strokeStyle)||this._getLineStrokeStyle()}:null}}]),p);function p(t,e,n,i,a,r,o){var l;return(0,s.default)(this,p),(l=(0,u.default)(this,(0,h.default)(p).call(this)))._graphs=o,l._opt=n,l.fieldMap=t,l.field=null,l.iGroup=e,l._yAxis=t.yAxis,l.ctx=i,l.w=r,l.h=a,l.y=0,l.line={strokeStyle:t.color},l.data=[],l.sprite=null,l._pointList=[],l._currPointList=[],l._bline=null,y.extend(!0,(0,d.default)(l),(0,Ke.getDefaultProps)(p.defaultProps()),n),l.field=t.field,l.init(n),l}e.default=r});t(un),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),f=H(un),u=H(ln),h=(n=u.default,(0,s.default)(d,n),(0,l.default)(d,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置，支持二维数组格式",default:null},yAxisAlign:{detail:"绘制在哪根y轴上面",default:"left"},_props:[f.default]}}}]),(0,l.default)(d,[{key:"init",value:function(){}},{key:"draw",value:function(t){return t=t||{},this.width=t.width,this.height=t.height,Ce._.extend(!0,this.origin,t.origin),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this.data=this._trimGraphs(),this._setGroupsForYfield(this.data,null,t),this.animation&&!t.resize?this.grow():this.fire("complete"),this}},{key:"resetData",value:function(t,e){var n=this;t&&(n.dataFrame=t,n.data=n._trimGraphs()),Ce._.each(n.groups,function(t){t.resetData(n.data[t.field].data,e)})}},{key:"setEnabledField",value:function(){this.enabledField=this.app.getComponent({name:"coord"}).filterEnabledFields(this.field)}},{key:"_trimGraphs",value:function(){var u=this,h=this.app.getComponent({name:"coord"}),d={};return u.setEnabledField(),Ce._.each(Ce._.flatten(u.enabledField),function(t,e){var n=u.app.getComponent({name:"coord"}).getFieldMapOf(t),i=u.dataFrame.getFieldData(t);if(i){for(var a=[],r=0,o=i.length;r<o;r++){var l=h.getPoint({iNode:r,field:t,value:{y:i[r]}}),s={type:"line",iGroup:e,iNode:r,field:t,value:i[r],x:l.pos.x,y:l.pos.y,rowData:u.dataFrame.getRowDataAt(r),color:n.color};a.push(s)}d[t]={yAxis:n.yAxis,field:t,data:a}}}),d}},{key:"grow",value:function(e){var n=0,i=this.groups.length,a=this;return Ce._.each(this.groups,function(t){t._grow(function(){n++,e&&e(t),n==i&&a.fire("complete")})}),this}},{key:"show",value:function(t){var e=this;-1!=Ce._.indexOf(Ce._.flatten([e.field]),t)&&(this.data=this._trimGraphs(),this._setGroupsForYfield(this.data,t),Ce._.each(this.groups,function(t){t.resetData(e.data[t.field].data)}))}},{key:"hide",value:function(t){var e=this,n=e.getGroupIndex(t);!this.groups.length||n<0||(this.groups.splice(n,1)[0].destroy(),this.data=this._trimGraphs(),Ce._.each(this.groups,function(t){t.resetData(e.data[t.field].data)}))}},{key:"getGroupIndex",value:function(t){for(var e=-1,n=0,i=this.groups.length;n<i;n++)if(this.groups[n].field===t){e=n;break}return e}},{key:"getGroup",value:function(t){return this.groups[this.getGroupIndex(t)]}},{key:"_setGroupsForYfield",value:function(t,s,u){var h=this;u=u||{},s=s&&Ce._.flatten([s]);var d=Ce._.flatten([this.field]);Ce._.each(t,function(t,e){if(!s||-1!=Ce._.indexOf(s,e)){var n=h.app.getComponent({name:"coord"}).getFieldMapOf(e),i=Ce._.indexOf(d,e),a=new f.default(n,i,h._opt,h.ctx,h.height,h.width,h);a.draw({animation:h.animation&&!u.resize},t.data);for(var r=!1,o=0,l=h.groups.length;o<l;o++)if(i<h.groups[o].iGroup){h.groups.splice(o,0,a),r=!0,h.sprite.addChildAt(a.sprite,o);break}r||(h.groups.push(a),h.sprite.addChild(a.sprite))}})}},{key:"getNodesAt",value:function(n,i){var a=[];return Ce._.each(this.groups,function(t){var e=t.getNodeInfoAt(n,i);e&&a.push(e)}),a}},{key:"getNodesOfPos",value:function(n){var i=[];return Ce._.each(this.groups,function(t){var e=t.getNodeInfoOfX(n);e&&i.push(e)}),i}}]),d);function d(t,e){var n;return(0,i.default)(this,d),(n=(0,a.default)(this,(0,r.default)(d).call(this,t,e))).type="line",n.enabledField=null,n.groups=[],Ce._.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(d.defaultProps()),t),n.init(),n}u.default.registerComponent(h,"graphs","line");var c=h;e.default=c}));var hn=e(function(t,e){function h(t,e,n,i,a,r){var o=(r-e)*(n-t)-(i-e)*(a-t);return 0<o||!(o<0)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t,e){var n=t[0][0],i=t[0][1],a=t[1][0],r=t[1][1],o=e[0][0],l=e[0][1],s=e[1][0],u=e[1][1];return h(n,i,o,l,s,u)!==h(a,r,o,l,s,u)&&h(n,i,a,r,o,l)!==h(n,i,a,r,s,u)}});t(hn);var dn=e(function(t,e){function n(t,e){this._cells=[],this._cellSize=e,this._reverseCellSize=1/e;for(var n=0;n<t.length;n++){var i=t[n],a=this.coordToCellNum(i[0]),r=this.coordToCellNum(i[1]);if(this._cells[a])this._cells[a][r]?this._cells[a][r].push(i):this._cells[a][r]=[i];else{var o=[];o[r]=[i],this._cells[a]=o}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n.prototype={cellPoints:function(t,e){return void 0!==this._cells[t]&&void 0!==this._cells[t][e]?this._cells[t][e]:[]},rangePoints:function(t){for(var e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),i=this.coordToCellNum(t[2]),a=this.coordToCellNum(t[3]),r=[],o=e;o<=i;o++)for(var l=n;l<=a;l++)Array.prototype.push.apply(r,this.cellPoints(o,l));return r},removePoint:function(t){for(var e,n=this.coordToCellNum(t[0]),i=this.coordToCellNum(t[1]),a=this._cells[n][i],r=0;r<a.length;r++)if(a[r][0]===t[0]&&a[r][1]===t[1]){e=r;break}return a.splice(e,1),a},trunc:Math.trunc||function(t){return t-t%1},coordToCellNum:function(t){return this.trunc(t*this._reverseCellSize)},extendBbox:function(t,e){return[t[0]-e*this._cellSize,t[1]-e*this._cellSize,t[2]+e*this._cellSize,t[3]+e*this._cellSize]}},e.default=function(t,e){return new n(t,e)}});t(dn);var fn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={toXy:function(t,e){return void 0===e?t.slice():t.map(function(t){return new Function("pt","return [pt"+e[0]+",pt"+e[1]+"];")(t)})},fromXy:function(t,e){return void 0===e?t.slice():t.map(function(t){return new Function("pt","const o = {}; o"+e[0]+"= pt[0]; o"+e[1]+"= pt[1]; return o;")(t)})}};e.default=n});t(fn);var cn=e(function(t,e){function a(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(i){var t=function(t){for(var e=[],n=0;n<t.length;n++){for(;2<=e.length&&a(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}return e.pop(),e}(i),e=function(){for(var t=i.reverse(),e=[],n=0;n<t.length;n++){for(;2<=e.length&&a(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}return e.pop(),e}().concat(t);return e.push(i[0]),e}});t(cn);var pn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=H(hn),d=H(dn),f=H(fn),c=H(cn);function v(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function u(t,e,n){var i=[e[0]-t[0],e[1]-t[1]],a=[n[0]-t[0],n[1]-t[1]],r=v(t,e),o=v(t,n);return(i[0]*a[0]+i[1]*a[1])/Math.sqrt(r*o)}function h(t,e){for(var n=0;n<e.length-1;n++){var i=[e[n],e[n+1]];if(!(t[0][0]===i[0][0]&&t[0][1]===i[0][1]||t[0][0]===i[1][0]&&t[0][1]===i[1][1])&&(0,a.default)(t,i))return 1}}function y(t,e,n){for(var i,a,r=null,o=p,l=p,s=0;s<e.length;s++)i=u(t[0],t[1],e[s]),a=u(t[1],t[0],e[s]),o<i&&l<a&&!h([t[0],e[s]],n)&&!h([t[1],e[s]],n)&&(o=i,l=a,r=e[s]);return r}var p=Math.cos(90/(180/Math.PI));e.default=function(t,e,n){var i=e||20,a=function(t){for(var e=[t[0]],n=t[0],i=1;i<t.length;i++){var a=t[i];n[0]===a[0]&&n[1]===a[1]||e.push(a),n=a}return e}(f.default.toXy(t,n).sort(function(t,e){return t[0]-e[0]||t[1]-e[1]}));if(a.length<4)return a.concat([a[0]]);var r=function(t){for(var e=1/0,n=1/0,i=-1/0,a=-1/0,r=t.length-1;0<=r;r--)t[r][0]<e&&(e=t[r][0]),t[r][1]<n&&(n=t[r][1]),t[r][0]>i&&(i=t[r][0]),t[r][1]>a&&(a=t[r][1]);return[i-e,a-n]}(a),o=[.6*r[0],.6*r[1]],l=(0,c.default)(a),s=a.filter(function(t){return l.indexOf(t)<0}),u=Math.ceil(1/(a.length/(r[0]*r[1]))),h=function t(e,n,i,a,r){for(var o,l=!1,s=0;s<e.length-1;s++){var u=[e[s],e[s+1]],h=u[0][0]+","+u[0][1]+","+u[1][0]+","+u[1][1];if(!(v(u[0],u[1])<n||r.has(h))){for(var d=0,f=(o=u,[Math.min(o[0][0],o[1][0]),Math.min(o[0][1],o[1][1]),Math.max(o[0][0],o[1][0]),Math.max(o[0][1],o[1][1])]),c=void 0,p=void 0,g=void 0;c=(f=a.extendBbox(f,d))[2]-f[0],p=f[3]-f[1],d++,null===(g=y(u,a.rangePoints(f),e))&&(i[0]>c||i[1]>p););c>=i[0]&&p>=i[1]&&r.add(h),null!==g&&(e.splice(s+1,0,g),a.removePoint(g),l=!0)}}return l?t(e,n,i,a,r):e}(l,Math.pow(i,2),o,(0,d.default)(s,u),new Set);return n?f.default.fromXy(h,n):h}});t(pn),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),g=H(pn),v=u.default._,d=u.default.event,y=u.default.Shapes.Circle,x=u.default.Shapes.Rect,_=u.default.Shapes.Line,m=u.default.Shapes.Polygon,f=(n=h.default,(0,s.default)(c,n),(0,l.default)(c,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置",default:null},groupField:{detail:"分组字段",default:null,documentation:"分组字段，如果area配置enabled为true，那么需要groupField来构建几个area"},dataFilter:{detail:"散点过滤数据",default:null,documentation:"数据过滤器，可以和groupField实现交叉过滤"},aniOrigin:{detail:"节点动画的原点",default:"default",documentation:"可选的还有center（坐标正中）、origin（坐标原点）"},node:{detail:"单数据节点图形设置",propertys:{dataKey:{detail:"元素的数据id，默认索引匹配",default:"__index__"},shapeType:{detail:"图形类型",default:"circle",documentation:"节点的现状可以是圆 ，也可以是rect，也可以是三角形，后面两种后面实现"},maxRadius:{detail:"节点最大半径",default:25},minRadius:{detail:"节点最小半径",default:5},radius:{detail:"半径",default:null},radiusScale:{detail:"半径缩放比例",documentation:"在计算好真实半径后缩放，主要用在,缩略图中，比如datazoom的缩略图",default:1},normalRadius:{detail:"默认半径",default:15},fillStyle:{detail:"节点景色",default:null},fillAlpha:{detail:"节点透明度",default:.8},strokeStyle:{detail:"节点描边颜色",default:null},lineWidth:{detail:"节点描边线宽",default:0},strokeAlpha:{detail:"节点描边透明度",default:1},focus:{detail:"节点hover态设置",propertys:{enabled:{detail:"是否开启",default:!0},lineWidth:{detail:"hover后的边框大小",default:6},strokeAlpha:{detail:"hover后的边框透明度",default:.2},fillAlpha:{detail:"hover后的背景透明度",default:.8}}},select:{detail:"节点选中态设置",propertys:{enabled:{detail:"是否开启",default:!1},lineWidth:{detail:"选中后的边框大小",default:8},strokeAlpha:{detail:"选中后的边框透明度",default:.4},fillAlpha:{detail:"选中后的背景透明度",default:1}}}}},line:{detail:"每个节点和指标轴线的连线",propertys:{enabled:{detail:"是否开启",default:!1},lineWidth:{detail:"连线宽",default:1},strokeStyle:{detail:"连线颜色",default:"#ccc"},lineType:{detail:"连线类型",default:"dashed"}}},area:{detail:"散点集合组成的面",propertys:{enabled:{detail:"是否开启",default:!1},concavity:{detail:"凹凸系数，默认80，越大越凸",default:88},quantile:{detail:"散点用来计入面积的分位数",default:8},fillStyle:{detail:"散点集合面的背景色",default:null},fillAlpha:{detail:"散点集合面的透明度",default:.15},strokeStyle:{detail:"散点集合面的描边颜色",default:null},lineWidth:{detail:"散点集合面的描边线宽",default:0},strokeAlpha:{detail:"散点集合面的描边透明度",default:.5}}},label:{detail:"文本设置",propertys:{enabled:{detail:"是否开启",default:!0},field:{detail:"获取label的字段",default:null},format:{detail:"label格式化处理函数",default:function(t){return t}},fontSize:{detail:"label字体大小",default:13},fontColor:{detail:"字体颜色",default:"#888"},strokeStyle:{detail:"字体描边颜色",default:"#ffffff"},lineWidth:{detail:"描边大小",default:0},textAlign:{detail:"水平对齐方式",default:"center"},verticalAlign:{detail:"垂直基线对齐方式",default:"middle"},position:{detail:"文本布局位置",documentation:"auto(目前等于center，还未实现),center,top,right,bottom,left",default:"center"},offsetX:{detail:"x方向偏移量",default:0},offsetY:{detail:"y方向偏移量",default:0}}}}}}]),(0,l.default)(c,[{key:"init",value:function(){this._shapesp=new u.default.Display.Sprite({id:"scat_shapesp"}),this._textsp=new u.default.Display.Sprite({id:"textsp"}),this._linesp=new u.default.Display.Sprite({id:"textsp"}),this._areasp=new u.default.Display.Sprite({id:"areasp"}),this.sprite.addChild(this._areasp),this.sprite.addChild(this._linesp),this.sprite.addChild(this._shapesp),this.sprite.addChild(this._textsp)}},{key:"draw",value:function(t){t=t||{},v.extend(!0,this,t),this.data=this._trimGraphs(),this._widget(),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y;var e=this;return!this.animation||t.resize||e.inited?this.fire("complete"):this.grow(function(){e.fire("complete")}),this}},{key:"resetData",value:function(t){this.dataFrame=t,this.data=this._trimGraphs(),this._widget(),this.grow()}},{key:"getNodesAt",value:function(){return[]}},{key:"_trimGraphs",value:function(){var t=[];this._groupData={};var e=this.app.getComponent({name:"coord"}),n=this.dataFrame.length;this._rData=null,this._rMaxValue=null,this._rMinValue=null;for(var i=0;i<n;i++){var a=this.dataFrame.getRowDataAt(i),r=e.getFieldMapOf(this.field),o=e.getPoint({iNode:i,field:this.field,value:{y:a[this.field]}});if(null!=o.pos.x&&null!=o.pos.y){var l={type:"scat",rowData:a,x:o.pos.x,y:o.pos.y,value:o.value,field:this.field,fieldColor:r.color,iNode:i,focused:!1,selected:!1,radius:null,fillStyle:null,color:null,strokeStyle:null,strokeAlpha:1,lineWidth:0,shapeType:null,label:null,fillAlpha:1,nodeElement:null};if(this._setR(l),this._setFillStyle(l),this._setFillAlpha(l),this._setStrokeStyle(l),this._setLineWidth(l),this._setStrokeAlpha(l),this._setNodeType(l),this._setText(l),!this.dataFilter||!v.isFunction(this.dataFilter)||this.dataFilter.apply(this,[l])){if(this.groupField){var s=a[this.groupField];s&&(this._groupData[s]||(this._groupData[s]=[]),this._groupData[s].push(l))}else this._groupData.all||(this._groupData.all=[]),this._groupData.all.push(l);t.push(l)}}}return t}},{key:"_setR",value:function(t){var e=this.node.normalRadius,n=t.rowData;if(null!=this.node.radius){if(v.isString(this.node.radius)&&n[this.node.radius]){this._rData||this._rMaxValue||this._rMinValue||(this._rData=this.dataFrame.getFieldData(this.node.radius),this._rMaxValue=v.max(this._rData),this._rMinValue=v.min(this._rData));var i=n[this.node.radius];e=this._rMaxValue==this._rMinValue?this.node.minRadius+(this.node.maxRadius-this.node.minRadius)/2:this.node.minRadius+(i-this._rMinValue)/(this._rMaxValue-this._rMinValue)*(this.node.maxRadius-this.node.minRadius)}v.isFunction(this.node.radius)&&(e=this.node.radius(n)),isNaN(parseInt(this.node.radius))||(e=parseInt(this.node.radius))}return e=Math.max(e*this.node.radiusScale,2),t.radius=e,this}},{key:"_setText",value:function(t){null!=this.label.field&&v.isString(this.label.field)&&t.rowData[this.label.field]&&(t.label=this.label.format(t.rowData[this.label.field],t))}},{key:"_setFillStyle",value:function(t){return t.color=t.fillStyle=this._getStyle(this.node.fillStyle,t),this}},{key:"_setFillAlpha",value:function(t){return t.fillAlpha=this._getProp(this.node.fillAlpha,t),this}},{key:"_setStrokeAlpha",value:function(t){return t.strokeAlpha=this._getProp(this.node.strokeAlpha,t),this}},{key:"_setStrokeStyle",value:function(t){return t.strokeStyle=this._getStyle(this.node.strokeStyle||this.node.fillStyle,t),this}},{key:"_getProp",value:function(t,e){var n=t;return v.isArray(t)&&(n=t[e.iGroup]),v.isFunction(t)&&(n=t.apply(this,[e])),n}},{key:"_getStyle",value:function(t,e){var n=t;return v.isArray(t)&&(n=t[e.iGroup]),v.isFunction(t)&&(n=t.apply(this,[e])),n||e.fieldColor}},{key:"_setLineWidth",value:function(t){return t.lineWidth=this._getProp(this.node.lineWidth,t),this}},{key:"_setNodeType",value:function(t){var e=this.node.shapeType;return v.isArray(e)&&(e=e[t.iGroup]),v.isFunction(e)&&(e=e(t)),e=e||"circle",t.shapeType=e,this}},{key:"_widget",value:function(){var f=this,c=this;if(v.each(v.flatten([c._shapesp.children,c._textsp.children,c._linesp.children]),function(t){t.__used=!1}),v.each(c.data,function(t,e){var n=c._getNodeElement(t,e);n||(t.__isNew=!0);var i=c._getNodeContext(t),a="circle"==t.shapeType?y:x;if(n?n.animate(i):(n=new a({id:"shape_"+e,hoverClone:!1,context:i}),c._shapesp.addChild(n),n.on(d.types.get(),function(t){t.eventInfo={title:null,trigger:c.node,nodes:[this.nodeData]},this.nodeData.label&&(t.eventInfo.title=this.nodeData.label),"mouseover"==t.type&&c.focusAt(this.nodeData.iNode),"mouseout"==t.type&&(this.nodeData.selected||c.unfocusAt(this.nodeData.iNode)),c.app.fire(t.type,t)})),n.__used=!0,n.nodeData=t,n.iNode=e,t.nodeElement=n,c.line.enabled){var r=n.lineElement,o={start:{x:i.x,y:i.y+i.r},end:{x:i.x,y:0},lineWidth:c.line.lineWidth,strokeStyle:c.line.strokeStyle,lineType:c.line.lineType};r?r.animate(o):(r=new _({context:o}),c._linesp.addChild(r)),r.__used=!0,n.lineElement=r}if(t.label&&c.label.enabled){var l=n.labelElement,s={};l?(l.resetText(t.label),s=c._getTextContext(l,i),l.animate(s)):(l=new u.default.Display.Text(t.label,{id:"scat_text_"+e,context:{}}),s=c._getTextContext(l,i),v.extend(l.context,s),c._textsp.addChild(l)),l.__used=!0,(n.labelElement=l).nodeElement=n}}),c.area.enabled){c._areasp.removeAllChildren();var p=0,t=function(t){var e=f._groupData[t],n={name:t,iGroup:p,data:e},i=[];v.each(e,function(t){i=i.concat(function(t,e){if(!e||1==e)return[[t.x,t.y]];for(var n=[],i=0;i<e;i++){var a=360/(e-1)*i,r=t.radius+3,o=t.x+Math.cos(2*Math.PI/360*a)*r,l=t.y+Math.sin(2*Math.PI/360*a)*r;n.push([o,l])}return n}(t,c.area.quantile))});var a=(0,g.default)(i,c.area.concavity),r=c.app.getTheme(p),o=c._getStyle(c.area.fillStyle,n)||r,l=c._getProp(c.area.fillAlpha,n),s=c._getStyle(c.area.strokeStyle,n)||r,u=c._getProp(c.area.lineWidth,n),h=c._getProp(c.area.strokeAlpha,n),d=new m({context:{pointList:a,fillStyle:o,fillAlpha:l,strokeStyle:s,lineWidth:u,strokeAlpha:h,smooth:!1}});c._areasp.addChild(d),p++};for(var e in this._groupData)t(e)}v.each(v.flatten([c._shapesp.children,c._textsp.children,c._linesp.children]),function(t){t.__used||t.animate({globalAlpha:0,r:0},{onComplete:function(){t.destroy()}})})}},{key:"_getNodeElement",value:function(t,e){var n,i=this.node.dataKey;if(i){v.isString(i)&&(i=i.split(","));for(var a=0,r=this._shapesp.children.length;a<r;a++){for(var o=this._shapesp.children[a],l=!0,s=0,u=i.length;s<u;s++){var h=i[s];if(o.nodeData.rowData[h]!=t.rowData[h]){l=!1;break}}if(l&&i.length){n=o;break}}}else n=this._shapesp.getChildAt(e);return n}},{key:"_getTextPosition",value:function(t,e){var n=0,i=0;switch(this.label.position){case"center":n=e.x,i=e.y;break;case"top":n=e.x,i=e.y-e.r;break;case"right":n=e.x+e.r,i=e.y;break;case"bottom":n=e.x,i=e.y+e.r;break;case"left":n=e.x-e.r,i=e.y;break;case"auto":n=e.x,i=e.y,t.getTextWidth()>2*e.r&&(i=e.y+e.r+.5*t.getTextHeight())}return{x:n+this.label.offsetX,y:i+this.label.offsetY}}},{key:"_getTextContext",value:function(t,e){var n=this._getTextPosition(t,e),i=this.label.fontSize;t.getTextWidth()>2*e.r&&(i-=2);var a={x:n.x,y:n.y,fillStyle:this.label.fontColor||e.fillStyle,fontSize:i,strokeStyle:this.label.strokeStyle||e.fillStyle,lineWidth:this.label.lineWidth,textAlign:this.label.textAlign,textBaseline:this.label.verticalAlign};return this.animation&&!this.inited&&this._setCtxAniOrigin(a),a}},{key:"_setCtxAniOrigin",value:function(t){if("default"==this.aniOrigin&&(t.y=0),"origin"==this.aniOrigin){var e=this.app.getComponent({name:"coord"}).getOriginPos({field:this.field});t.x=e.x,t.y=e.y}"center"==this.aniOrigin&&(t.x=this.width/2,t.y=-this.height/2)}},{key:"_getNodeContext",value:function(t){if("circle"==t.shapeType)return this._getCircleContext(t)}},{key:"_getCircleContext",value:function(t){var e={x:t.x,y:t.y,r:t.radius,fillStyle:t.fillStyle,strokeStyle:t.strokeStyle,strokeAlpha:t.strokeAlpha,lineWidth:t.lineWidth,fillAlpha:t.fillAlpha,cursor:"pointer"};return!this.animation||this.inited&&!t.__isNew||(this._setCtxAniOrigin(e),e.r=1),e}},{key:"grow",value:function(e){var n=0,i=this.data.length-1,a=this;v.each(this.data,function(t){t.__isNew&&a._growNode(t,function(){n+=1,delete t.__isNew,n==i&&e&&e()})})}},{key:"_growNode",value:function(t,e){var n=this;t.nodeElement.animate({x:t.x,y:t.y,r:t.radius},{onUpdate:function(t){if(this.labelElement&&this.labelElement.context){var e=n._getTextPosition(this.labelElement,t);this.labelElement.context.x=e.x,this.labelElement.context.y=e.y}this.lineElement&&this.lineElement.context&&(this.lineElement.context.start.y=t.y+t.r)},delay:Math.round(300*Math.random()),onComplete:function(){e&&e()}})}},{key:"focusAt",value:function(t){var e=this.data[t];if(this.node.focus.enabled&&!e.focused){var n=e.nodeElement.context;n.lineWidth=this.node.focus.lineWidth,n.strokeAlpha=this.node.focus.strokeAlpha,n.fillAlpha=this.node.focus.fillAlpha,e.focused=!0}}},{key:"unfocusAt",value:function(t){var e=this.data[t];if(this.node.focus.enabled&&e.focused){var n=e.nodeElement.context;n.lineWidth=e.lineWidth,n.strokeAlpha=e.strokeAlpha,n.fillAlpha=e.fillAlpha,n.strokeStyle=e.strokeStyle,e.focused=!1}}},{key:"selectAt",value:function(t){var e=this.data[t];if(this.node.select.enabled&&!e.selected){var n=e.nodeElement.context;n.lineWidth=this.node.select.lineWidth,n.strokeAlpha=this.node.select.strokeAlpha,n.fillAlpha=this.node.select.fillAlpha,e.selected=!0}}},{key:"unselectAt",value:function(t){var e=this.data[t];if(this.node.select.enabled&&e.selected){var n=e.nodeElement.context;e.focused?(n.lineWidth=this.node.focus.lineWidth,n.strokeAlpha=this.node.focus.strokeAlpha,n.fillAlpha=this.node.focus.fillAlpha):(n.lineWidth=e.lineWidth,n.strokeAlpha=e.strokeAlpha,n.fillAlpha=e.fillAlpha),e.selected=!1}}},{key:"getNodesOfPos",value:function(){return[]}}]),c);function c(t,e){var n;return(0,i.default)(this,c),(n=(0,a.default)(this,(0,r.default)(c).call(this,t,e))).type="scat",n._rData=null,n._rMaxValue=null,n._rMinValue=null,n._groupData={},v.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(c.defaultProps()),t),n.init(),n}h.default.registerComponent(f,"graphs","scat");var p=f;e.default=p}));var gn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ge),r=H(Ue),o=H(qe),l=H($e),s=H(Ce),u=s.default._,h=s.default.event,d=s.default.Shapes.Sector,E=s.default.Shapes.Path,f=s.default.AnimationFrame,c=(n=h.Dispatcher,(0,l.default)(p,n),(0,a.default)(p,[{key:"init",value:function(){this.sprite=new s.default.Display.Sprite,this.sectorsSp=new s.default.Display.Sprite,this.sprite.addChild(this.sectorsSp),this.selectedSp=new s.default.Display.Sprite,this.sprite.addChild(this.selectedSp),this._graphs.label.enabled&&(this.textSp=new s.default.Display.Sprite)}},{key:"draw",value:function(t){u.extend(!0,this,t),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this._widget()}},{key:"resetData",value:function(t){var e=this;this.data=t,e.destroyLabel();for(var n=0,i=0;i<e.sectors.length;i++){var a=e.sectors[i],r=this.data.list[i];a.animate({r:r.outRadius,startAngle:r.startAngle,endAngle:r.endAngle},{duration:280,onComplete:function(){++n==e.sectors.length&&e._graphs.label.enabled&&e._startWidgetLabel()}})}}},{key:"_widget",value:function(){var e=this,t=e.data.list,n=e.data.total;if(0<t.length&&0<n){e.textSp&&e.sprite.addChild(e.textSp);for(var i=0;i<t.length;i++){var a=t[i],r=new d({hoverClone:!1,xyToInt:!1,context:{x:a.focused?a.outOffsetx:0,y:a.focused?a.outOffsety:0,r0:a.innerRadius,r:a.outRadius,startAngle:a.startAngle,endAngle:a.endAngle,fillStyle:a.fillStyle,cursor:"pointer"},id:"sector"+i});(r.nodeData=a).focusEnabled&&r.hover(function(){e.focusOf(this.nodeData)},function(){this.nodeData.selected||e.unfocusOf(this.nodeData)}),r.on(h.types.get(),function(t){t.eventInfo={trigger:e._graphs.node,nodes:[this.nodeData]},e._graphs.app.fire(t.type,t)}),e.sectorsSp.addChildAt(r,0),e.sectors.push(r)}e._graphs.label.enabled&&e._startWidgetLabel()}}},{key:"focusOf",value:function(t,e){t.focused||(this.sectors[t.iNode].animate({x:t.outOffsetx,y:t.outOffsety},{duration:100,onComplete:function(){e&&e()}}),t.focused=!0)}},{key:"unfocusOf",value:function(t,e){t.focused&&(this.sectors[t.iNode].animate({x:0,y:0},{duration:100,onComplete:function(){e&&e()}}),t.focused=!1)}},{key:"selectOf",value:function(t){var e=this;if(this.sectors.length&&t.selectEnabled){var n=this.sectors[t.iNode];t.selected||(t.focused?this.addCheckedSec(n):(t._focusTigger="select",this.focusOf(t,function(){e.addCheckedSec(n)})),t.selected=!0)}}},{key:"unselectOf",value:function(t){var e=this.sectors[t.iNode];if(t.selected&&t.selectEnabled){var n=this;n.cancelCheckedSec(e,function(){"select"==t._focusTigger&&n.unfocusOf(t)}),t.selected=!1}}},{key:"addCheckedSec",value:function(t,e){var n=t.context,i=t.nodeData;if(n){var a=new d({xyToInt:!1,context:{x:n.x,y:n.y,r0:n.r-1,r:n.r+i.selectedR,startAngle:n.startAngle,endAngle:n.startAngle,fillStyle:n.fillStyle,globalAlpha:i.selectedAlpha},id:"selected_"+t.id});t._selectedSec=a,this.selectedSp.addChild(a),this.completed?a.animate({endAngle:n.endAngle},{duration:this._getAngleTime(n),onComplete:function(){e&&e()}}):a.context.endAngle=n.endAngle}}},{key:"cancelCheckedSec",value:function(t,e){var n=t._selectedSec;n.animate({startAngle:n.context.endAngle-.5},{duration:this._getAngleTime(t.context),onComplete:function(){delete t._selectedSec,n.destroy(),e&&e()}})}},{key:"_getAngleTime",value:function(t){return Math.abs(t.startAngle-t.endAngle)/360*500}},{key:"grow",value:function(t){var h=this;u.each(h.sectors,function(t){t.context&&(t.context.r0=0,t.context.r=0,t.context.startAngle=h._graphs.startAngle,t.context.endAngle=h._graphs.startAngle)}),h._hideGrowLabel();var e=f.registTween({from:{process:0},to:{process:1},duration:500,onUpdate:function(t){for(var e=0;e<h.sectors.length;e++){var n=h.sectors[e],i=n.nodeData,a=n.context,r=i.startAngle,o=i.endAngle,l=i.outRadius,s=i.innerRadius;if(a){if(a.r=l*t.process,a.r0=s*t.process,0==e)a.startAngle=r,a.endAngle=r+(o-r)*t.process;else{var u=function(t){var e=t-1,n=h.sectors[e].context;return 0==e?n?n.endAngle:0:n?n.endAngle:arguments.callee(e)}(e);a.startAngle=u,a.endAngle=a.startAngle+(o-r)*t.process}n._selectedSec&&(n._selectedSec.context.r0=a.r-1,n._selectedSec.context.r=a.r+i.selectedR,n._selectedSec.context.startAngle=a.startAngle,n._selectedSec.context.endAngle=a.endAngle)}}},onComplete:function(){h.sprite._removeTween(e),h._showGrowLabel(),h.completed=!0,t&&t()}});h.sprite._tweens.push(e)}},{key:"_widgetLabel",value:function(t,e,n,i,a,r){var o,l,s,u,h,d,f,c,p,g,v,y,x=this,_=0,m=x.data.list,b=2==t||3==t,w=3==t||4==t,k=b?n:i;0<e.length&&e.sort(function(t,e){return w?m[t].edgey-m[e].edgey:m[e].edgey-m[t].edgey});for(var S=0;S<e.length;S++){o=e[S];var A=m[o],C=A.outRadius+A.moveDis;if(!(!A.enabled||A.y<k||_>=x.textMaxCount)){_++,s=A.edgey,u=Math.abs(A.edgex),h=s-l,0!=S&&(Math.abs(h)<15||w&&h<0||!w&&0<h)&&(s=w?l+15:l-15,0<C-Math.abs(s)&&(u=Math.sqrt(Math.pow(C,2)-Math.pow(s,2))),(b&&-u>A.edgex||!b&&u<A.edgex)&&(u=Math.abs(A.edgex))),a&&(g=b?r.left:r.right,v=e.length-S,y=w?g-15*v:g+15*v,(w&&y<s||!w&&s<y)&&(s=y)),l=s,a||(b?r.left=l:r.right=l);var P=b?-u-5:u+5,O=P+x.origin.x,T=s+x.origin.y;if(O>x._graphs.app.width||T<0||T>x._graphs.app.height)return;var M="M"+A.centerx+","+A.centery;M+="Q"+A.outx+","+A.outy+","+P+","+s;var I=new E({context:{lineType:"solid",path:M,lineWidth:1,strokeStyle:A.fillStyle}}),D=A.labelText,L=document.createElement("div");switch(L.style.cssText=" ;position:absolute;left:-1000px;top:-1000px;color:"+A.fillStyle,L.innerHTML=D,x.domContainer.appendChild(L),d=L.offsetWidth,f=L.offsetHeight,c=b?-u:u,p=s,t){case 1:c+=5,p-=f/2;break;case 2:case 3:c-=d+5,p-=f/2;break;case 4:c+=5,p-=f/2}L.style.left=c+x.origin.x+"px",L.style.top=p+x.origin.y+"px",x.textSp.addChild(I),x.textList.push({width:d,height:f,x:c+x.origin.x,y:p+x.origin.y,data:A,textTxt:D,textEle:L})}}}},{key:"_startWidgetLabel",value:function(){for(var t,e,n=this.data.list,i=0,a=0,r=[],o=[{indexs:[],count:0},{indexs:[],count:0},{indexs:[],count:0},{indexs:[],count:0}],l={right:{startQuadrant:4,endQuadrant:1,clockwise:!0,indexs:[]},left:{startQuadrant:3,endQuadrant:2,clockwise:!1,indexs:[]}},s=0;s<n.length;s++){var u=n[s].quadrant;o[u-1].indexs.push(s),o[u-1].count++}1<o[0].count&&o[0].indexs.reverse(),1<o[2].count&&o[2].indexs.reverse(),o[0].count>o[3].count&&(l.right.startQuadrant=1,l.right.endQuadrant=4,l.right.clockwise=!1),o[1].count>o[2].count&&(l.left.startQuadrant=2,l.left.endQuadrant=3,l.left.clockwise=!0),l.right.indexs=o[l.right.startQuadrant-1].indexs.concat(o[l.right.endQuadrant-1].indexs),l.left.indexs=o[l.left.startQuadrant-1].indexs.concat(o[l.left.endQuadrant-1].indexs),l.right.indexs.length>this.textMaxCount&&((e=l.right.indexs.slice(0)).sort(function(t,e){return n[e].y-n[t].y}),t=e.slice(this.textMaxCount),n[t[0]].percentage,i=n[t[0]].y),l.left.indexs.length>this.textMaxCount&&((e=l.left.indexs.slice(0)).sort(function(t,e){return n[e].y-n[t].y}),t=e.slice(this.textMaxCount),n[t[0]].percentage,a=n[t[0]].y),r.push(l.right.startQuadrant),r.push(l.right.endQuadrant),r.push(l.left.startQuadrant),r.push(l.left.endQuadrant);for(var h={},d=0;d<r.length;d++){var f=1==d||3==d;this._widgetLabel(r[d],o[r[d]-1].indexs,a,i,f,h)}}},{key:"destroyLabel",value:function(){var e=this;this.textSp&&this.textSp.removeAllChildren(),u.each(this.textList,function(t){e.domContainer.removeChild(t.textEle)}),this.textList=[]}},{key:"_showGrowLabel",value:function(){this.textSp&&this.textSp.context&&(this.textSp.context.globalAlpha=1,u.each(this.textList,function(t){t.textEle.style.visibility="visible"}))}},{key:"_hideGrowLabel",value:function(){this.textSp&&this.textSp.context&&(this.textSp.context.globalAlpha=0,u.each(this.textList,function(t){t.textEle.style.visibility="hidden"}))}}]),p);function p(t,e){var n;return(0,i.default)(this,p),(n=(0,r.default)(this,(0,o.default)(p).call(this))).width=0,n.height=0,n.origin={x:0,y:0},n._graphs=t,n.domContainer=t.app.canvax.domView,n.data=e,n.sprite=null,n.textSp=null,n.sectorsSp=null,n.selectedSp=null,n.init(),n.sectors=[],n.textMaxCount=15,n.textList=[],n.completed=!1,n}e.default=c});t(gn),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(gn),h=H(ln),d=(n=h.default,(0,s.default)(f,n),(0,l.default)(f,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置",default:null},groupField:{detail:"分组字段",default:null,documentation:"groupField主要是给legend用的， 所有在legend中需要显示的分组数据，都用groupField"},sort:{detail:"排序，默认不排序，可以配置为asc,desc",default:null},startAngle:{detail:"起始角度",default:-90},allAngle:{detail:"全部角度",default:360},node:{detail:"单个节点（扇形）配置",propertys:{radius:{detail:"半径",default:null,documentation:"每个扇形单元的半径，也可以配置一个字段，就成了丁格尔玫瑰图"},innerRadius:{detail:"内径",default:0},outRadius:{detail:"外径",default:null},minRadius:{detail:"最小的半径厚度",default:10,documentation:"outRadius - innerRadius ， 也就是radius的最小值"},moveDis:{detail:"hover偏移量",default:15,documentation:"要预留moveDis位置来hover sector 的时候外扩"},fillStyle:{detail:"单个图形背景色",default:null},focus:{detail:"图形的hover设置",propertys:{enabled:{detail:"是否开启",default:!0}}},select:{detail:"图形的选中效果",propertys:{enabled:{detail:"是否开启",default:!0},radius:{detail:"选中效果图形的半径厚度",default:5},alpha:{detail:"选中效果图形的透明度",default:.7}}}}},label:{detail:"label",propertys:{field:{detail:"获取label的字段",default:null},enabled:{detail:"是否开启",default:!1},format:{detail:"label的格式化函数，支持html",default:null}}}}}}]),(0,l.default)(f,[{key:"init",value:function(){this.data=this._dataHandle()}},{key:"_computerProps",value:function(){var t=this.width,e=this.height;if(!this.node.outRadius){var n=Math.min(t,e)/2;this.label.enabled&&(n-=this.node.moveDis),this.node.outRadius=parseInt(n)}null!==this.node.radius&&Ce._.isNumber(this.node.radius)&&(this.node.radius=Math.max(this.node.radius,this.node.minRadius),this.node.innerRadius=this.node.outRadius-this.node.radius),this.node.outRadius-this.node.innerRadius<this.node.minRadius&&(this.node.innerRadius=this.node.outRadius-this.node.minRadius),this.node.innerRadius<0&&(this.node.innerRadius=0)}},{key:"draw",value:function(t){t=t||{},Ce._.extend(!0,this,t),this._computerProps(),this._pie=new u.default(this,this._trimGraphs(this.data)),this._pie.draw(t);var e=this;this.animation&&!t.resize?this._pie.grow(function(){e.fire("complete")}):this.fire("complete"),this.sprite.addChild(this._pie.sprite)}},{key:"show",value:function(t){this._setEnabled(t,!0)}},{key:"hide",value:function(t){this._setEnabled(t,!1)}},{key:"_setEnabled",value:function(e,n){Ce._.each(this.data,function(t){if(t.label===e)return t.enabled=n,!1}),this._pie.resetData(this._trimGraphs(this.data))}},{key:"_dataHandle",value:function(){for(var n=this,t=[],e=n.dataFrame,i=0,a=e.length;i<a;i++){var r=e.getRowDataAt(i),o={type:"pie",rowData:r,focused:!1,focusEnabled:n.node.focus.enabled,selected:!1,selectEnabled:n.node.select.enabled,selectedR:n.node.select.radius,selectedAlpha:n.node.select.alpha,enabled:!0,fillStyle:null,color:null,value:r[n.field],label:r[n.groupField||n.label.field||n.field],labelText:null,iNode:i},l=n._getColor(n.node.fillStyle,o);o.fillStyle=o.color=l,t.push(o)}return t.length&&n.sort&&(t.sort(function(t,e){return"asc"==n.sort?t.value-e.value:e.value-t.value}),Ce._.each(t,function(t,e){t.iNode=e})),t}},{key:"_trimGraphs",value:function(t){var n=this,e=0;n.currentAngle=0+n.startAngle%360;var i=n.allAngle+n.startAngle%n.allAngle,a=0,r=0;if(t.length){for(var o=0;o<t.length;o++)if(t[o].enabled&&(e+=t[o].value,n.node.radius&&Ce._.isString(n.node.radius)&&n.node.radius in t[o].rowData)){var l=Number(t[o].rowData[n.node.radius]);a=Math.max(a,l),r=Math.min(r,l)}if(0<e)for(var s=0;s<t.length;s++){var u=t[s].value/e;t[s].enabled||(u=0);var h=+(100*u).toFixed(2),d=n.allAngle*u,f=n.currentAngle+d>i?i:n.currentAngle+d,c=Math.cos((n.currentAngle+d/2)/180*Math.PI),p=Math.sin((n.currentAngle+d/2)/180*Math.PI),g=n.currentAngle+d/2;c=c.toFixed(5),p=p.toFixed(5);var v=function(t){i<=t&&(t=i),t%=n.allAngle;var e=parseInt(t/90);if(0<=t)switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:case 4:return 4}else if(t<0)switch(e){case 0:return 4;case-1:return 3;case-2:return 2;case-3:case-4:return 1}}(g),y=n.node.outRadius;if(n.node.radius&&Ce._.isString(n.node.radius)&&n.node.radius in t[s].rowData){var x=Number(t[s].rowData[n.node.radius]);y=parseInt((n.node.outRadius-n.node.innerRadius)*((x-r)/(a-r))+n.node.innerRadius)}var _=n.node.moveDis;Ce._.extend(t[s],{outRadius:y,innerRadius:n.node.innerRadius,startAngle:n.currentAngle,endAngle:f,midAngle:g,moveDis:_,outOffsetx:.7*_*c,outOffsety:.7*_*p,centerx:y*c,centery:y*p,outx:(y+_)*c,outy:(y+_)*p,edgex:(y+_)*c,edgey:(y+_)*p,orginPercentage:u,percentage:h,quadrant:v,labelDirection:1==v||4==v?1:0,iNode:s}),t[s].labelText=n._getLabelText(t[s]),n.currentAngle+=d,n.currentAngle>i&&(n.currentAngle=i)}}return{list:t,total:e}}},{key:"_getColor",value:function(t,e){var n=e.iNode,i=t;return Ce._.isArray(t)&&(i=t[n]),Ce._.isFunction(t)&&(i=t.apply(this,[e])),i||this.app.getTheme(n)}},{key:"_getLabelText",value:function(t){var e;if(this.label.enabled)if(this.label.format)Ce._.isFunction(this.label.format)&&(e=this.label.format(t.label,t));else{var n=this.label.field||this.groupField;e=n?t.rowData[n]+"："+t.percentage+"%":t.percentage+"%"}return e}},{key:"getList",value:function(){return this.data}},{key:"getLegendData",value:function(){var e=[];return Ce._.each(this.data,function(t){e.push({name:t.label,color:t.fillStyle,enabled:t.enabled})}),e}},{key:"tipsPointerOf",value:function(){}},{key:"tipsPointerHideOf",value:function(){}},{key:"focusAt",value:function(t){var e=this._pie.data.list[t];this.node.focus.enabled&&this._pie.focusOf(e)}},{key:"unfocusAt",value:function(t){var e=this._pie.data.list[t];e.node.focus.enabled&&this._pie.unfocusOf(e)}},{key:"selectAt",value:function(t){var e=this._pie.data.list[t];this.node.select.enabled&&this._pie.selectOf(e)}},{key:"unselectAt",value:function(t){var e=this._pie.data.list[t];this.node.select.enabled&&this._pie.unselectOf(e)}}]),f);function f(t,e){var n;return(0,i.default)(this,f),(n=(0,a.default)(this,(0,r.default)(f).call(this,t,e))).type="pie",Ce._.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(f.defaultProps()),t),n.init(),n}h.default.registerComponent(d,"graphs","pie");var c=d;e.default=c})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),f=u.default._,c=u.default.event,p=u.default.Shapes.Polygon,g=u.default.Shapes.Circle,d=(n=h.default,(0,s.default)(v,n),(0,l.default)(v,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置",default:null},line:{detail:"线配置",propertys:{enabled:{detail:"是否显示",default:!0},lineWidth:{detail:"线宽",default:2},strokeStyle:{detail:"线颜色",default:null}}},area:{detail:"面积区域配置",propertys:{enabled:{detail:"是否显示",default:!0},fillStyle:{detail:"面积背景色",default:null},fillAlpha:{detail:"面积透明度",default:.1}}},node:{detail:"线上面的单数据节点图形配置",propertys:{enabled:{detail:"是否显示",default:!0},strokeStyle:{detail:"边框色",default:"#ffffff"},radius:{detail:"半径",default:4},lineWidth:{detail:"边框大小",default:1}}}}}}]),(0,l.default)(v,[{key:"init",value:function(){}},{key:"draw",value:function(t){t=t||{},f.extend(!0,this,t),this.data=this._trimGraphs(),this._widget(),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this.fire("complete")}},{key:"_widget",value:function(){var u=this,h=this.app.getComponent({name:"coord"}),d=0;f.each(this.data,function(t,e){var n={},i=[];f.each(t,function(t){i.push([t.point.x,t.point.y])});var a=h.getFieldMapOf(e),r=u._getStyle(u.line.strokeStyle,d,a.color,a),o={pointList:i,cursor:"pointer"};u.line.enabled&&(o.lineWidth=u.line.lineWidth,o.strokeStyle=r),u.area.enabled&&(o.fillStyle=u._getStyle(u.area.fillStyle,d,a.color,a),o.fillAlpha=u._getStyle(u.area.fillAlpha,d,1,a));var l=new p({hoverClone:!1,context:o});if(n.area=l,u.sprite.addChild(l),l.__hoverFillAlpha=l.context.fillAlpha+.2,l.__fillAlpha=l.context.fillAlpha,l.on(c.types.get(),function(t){"mouseover"==t.type&&(this.context.fillAlpha=this.__hoverFillAlpha),"mouseout"==t.type&&(this.context.fillAlpha=this.__fillAlpha),u.app.fire(t.type,t)}),u.node.enabled){var s=[];f.each(t,function(t,e){i.push([t.point.x,t.point.y]);var n=new g({context:{cursor:"pointer",x:t.point.x,y:t.point.y,r:u.node.radius,lineWidth:u.node.lineWidth,strokeStyle:u.node.strokeStyle,fillStyle:r}});u.sprite.addChild(n),n.iNode=e,n.nodeData=t,n._strokeStyle=r,n.on(c.types.get(),function(t){t.aAxisInd=this.iNode,t.eventInfo={trigger:u.node,nodes:[this.nodeData]},u.app.fire(t.type,t)}),s.push(n)}),n.nodes=s}u.groups[e]=n,d++})}},{key:"tipsPointerOf",value:function(t){var i=this;i.tipsPointerHideOf(t),t.eventInfo&&t.eventInfo.nodes&&f.each(t.eventInfo.nodes,function(n){i.data[n.field]&&f.each(i.data[n.field],function(t,e){n.iNode==e&&i.focusOf(t)})})}},{key:"tipsPointerHideOf",value:function(){var e=this;f.each(e.data,function(t){f.each(t,function(t){e.unfocusOf(t)})})}},{key:"focusOf",value:function(t){if(!t.focused){var e=this.groups[t.field].nodes[t.iNode];e.context.r+=1,e.context.fillStyle=this.node.strokeStyle,e.context.strokeStyle=e._strokeStyle,t.focused=!0}}},{key:"unfocusOf",value:function(t){if(t.focused){var e=this.groups[t.field].nodes[t.iNode];--e.context.r,e.context.fillStyle=e._strokeStyle,e.context.strokeStyle=this.node.strokeStyle,t.focused=!1}}},{key:"hide",value:function(t){var e=this.app.getComponent({name:"coord"});this.enabledField=e.filterEnabledFields(this.field);var n=this.groups[t];n&&(n.area.context.visible=!1,f.each(n.nodes,function(t){t.context.visible=!1}))}},{key:"show",value:function(t){var e=this.app.getComponent({name:"coord"});this.enabledField=e.filterEnabledFields(this.field);var n=this.groups[t];n&&(n.area.context.visible=!0,f.each(n.nodes,function(t){t.context.visible=!0}))}},{key:"_trimGraphs",value:function(){var s=this,u=this.app.getComponent({name:"coord"});this.enabledField=u.filterEnabledFields(this.field);var t={};return f.each(this.enabledField,function(a){var r=s.dataFrame.getFieldData(a),o=u.getFieldMapOf(a),l=[];f.each(u.aAxis.angleList,function(t,e){var n=Math.PI*t/180,i=u.getPointInRadianOfR(n,u.getROfNum(r[e]));l.push({type:"radar",field:a,iNode:e,rowData:s.dataFrame.getRowDataAt(e),focused:!1,value:r[e],point:i,color:o.color})}),t[a]=l}),t}},{key:"_getStyle",value:function(t,e,n,i){var a=n;return(f.isString(t)||f.isNumber(t))&&(a=t),f.isArray(t)&&(a=t[e]),f.isFunction(t)&&(a=t(e,i)),null==a&&(a=n),a}},{key:"getNodesAt",value:function(n){var i=this.data,a=[];return f.each(this.enabledField,function(t){if(f.isArray(t))f.each(t,function(t){var e=i[t][n];e&&a.push(e)});else{var e=i[t][n];e&&a.push(e)}}),a}}]),v);function v(t,e){var n;return(0,i.default)(this,v),(n=(0,a.default)(this,(0,r.default)(v).call(this,t,e))).type="radar",n.enabledField=null,n.groups={},f.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),n.init(),n}h.default.registerComponent(d,"graphs","radar");var y=d;e.default=y}));var vn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={value:function(){}};function n(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new a(i)}function a(t){this._=t}function s(t,e){for(var n,i=0,a=t.length;i<a;++i)if((n=t[i]).name===e)return n.value}function u(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}a.prototype=n.prototype={constructor:a,on:function(t,e){var n,i,a=this._,r=(i=a,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,l=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<l;)if(n=(t=r[o]).type)a[n]=u(a[n],t.name,e);else if(null==e)for(n in a)a[n]=u(a[n],t.name,null);return this}for(;++o<l;)if((n=(t=r[o]).type)&&(n=s(a[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new a(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,i,a=new Array(n),r=0;r<n;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(i=this._[t]).length;r<n;++r)i[r].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,r=i.length;a<r;++a)i[a].value.apply(e,n)}};var i=n;e.default=i});t(vn);var yn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=H(vn),P=Math.PI/180,O=64,T=2048;function l(t){return t.text}function s(){return"serif"}function u(){return"normal"}function h(t){return Math.sqrt(t.value)}function d(){return 30*(~~(6*Math.random())-3)}function f(){return 1}function w(t,e,n,i){if(!e.sprite){var a=t.context,r=t.ratio;a.clearRect(0,0,(O<<5)/r,T/r);var o=0,l=0,s=0,u=n.length;for(--i;++i<u;){e=n[i],a.save(),a.font=e.style+" "+e.weight+" "+~~((e.size+1)/r)+"px "+e.font;var h=a.measureText(e.text+"m").width*r,d=e.size<<1;if(e.rotate){var f=Math.sin(e.rotate*P),c=Math.cos(e.rotate*P),p=h*c,g=h*f,v=d*c,y=d*f;h=Math.max(Math.abs(p+y),Math.abs(p-y))+31>>5<<5,d=~~Math.max(Math.abs(g+v),Math.abs(g-v))}else h=h+31>>5<<5;if(s<d&&(s=d),O<<5<=o+h&&(l+=s,s=o=0),T<=l+d)break;a.translate((o+(h>>1))/r,(l+(d>>1))/r),e.rotate&&a.rotate(e.rotate*P),a.fillText(e.text,0,0),e.padding&&(a.lineWidth=2*e.padding,a.strokeText(e.text,0,0)),a.restore(),e.width=h,e.height=d,e.xoff=o,e.yoff=l,e.x1=h>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=h}for(var x=a.getImageData(0,0,(O<<5)/r,T/r).data,_=[];0<=--i;)if((e=n[i]).hasText){for(var m=(h=e.width)>>5,b=(d=e.y1-e.y0,0);b<d*m;b++)_[b]=0;if(null==(o=e.xoff))return;l=e.yoff;for(var w=0,k=-1,S=0;S<d;S++){for(b=0;b<h;b++){var A=m*S+(b>>5),C=x[(l+S)*(O<<5)+(o+b)<<2]?1<<31-b%32:0;_[A]|=C,w|=C}w?k=S:(e.y0++,d--,S--,l++)}e.y1=e.y0+k,e.sprite=_.slice(0,(e.y1-e.y0)*m)}}}function C(t,e,n){n>>=5;for(var i,a=t.sprite,r=t.width>>5,o=t.x-(r<<4),l=127&o,s=32-l,u=t.y1-t.y0,h=(t.y+t.y0)*n+(o>>5),d=0;d<u;d++){for(var f=i=0;f<=r;f++)if((i<<s|(f<r?(i=a[d*r+f])>>>l:0))&e[h+f])return 1;h+=n}}function M(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function I(){return document.createElement("canvas")}function D(t){return"function"==typeof t?t:function(){return t}}var L={archimedean:M,rectangular:function(t){var n=4*t[0]/t[1],i=0,a=0;return function(t){var e=t<0?-1:1;switch(Math.sqrt(1+4*e*t)-e&3){case 0:i+=n;break;case 1:a+=4;break;case 2:i-=n;break;default:a-=4}return[i,a]}}};e.default=function(){var k=[256,256],n=l,i=s,a=h,r=u,c=u,p=d,g=f,S=M,e=[],v=1/0,y=(0,o.default)("word","end"),x=null,A=Math.random,_={},m=I;function b(t,e,n){k[0],k[1];for(var i,a,r,o=e.x,l=e.y,s=Math.sqrt(k[0]*k[0]+k[1]*k[1]),u=S(k),h=A()<.5?1:-1,d=-h;(i=u(d+=h))&&(a=~~i[0],r=~~i[1],!(Math.min(Math.abs(a),Math.abs(r))>=s));)if(e.x=o+a,e.y=l+r,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>k[0]||e.y+e.y1>k[1]||n&&C(e,t,k[0])||n&&!(e.x+e.x1>n[0].x&&e.x+e.x0<n[1].x&&e.y+e.y1>n[0].y&&e.y+e.y0<n[1].y))){for(var f,c=e.sprite,p=e.width>>5,g=k[0]>>5,v=e.x-(p<<4),y=127&v,x=32-y,_=e.y1-e.y0,m=(e.y+e.y0)*g+(v>>5),b=0;b<_;b++){for(var w=f=0;w<=p;w++)t[m+w]|=f<<x|(w<p?(f=c[b*p+w])>>>y:0);m+=g}return delete e.sprite,1}}return _.canvas=function(t){return arguments.length?(m=D(t),_):m},_.start=function(){var o=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(O<<5)/e,t.height=T/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(m()),l=function(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}((k[0]>>5)*k[1]),s=null,u=e.length,h=-1,d=[],f=e.map(function(t,e){return t.text=n.call(this,t,e),t.font=i.call(this,t,e),t.style=r.call(this,t,e),t.weight=c.call(this,t,e),t.rotate=p.call(this,t,e),t.size=~~a.call(this,t,e),t.padding=g.call(this,t,e),t}).sort(function(t,e){return e.size-t.size});return x&&clearInterval(x),x=setInterval(t,0),t(),_;function t(){for(var t=Date.now();Date.now()-t<v&&++h<u&&x;){var e=f[h];e.x=k[0]*(A()+.5)>>1,e.y=k[1]*(A()+.5)>>1,w(o,e,f,h),e.hasText&&b(l,e,s)&&(d.push(e),y.call("word",_,e),s?(i=e,r=a=void 0,a=(n=s)[0],r=n[1],i.x+i.x0<a.x&&(a.x=i.x+i.x0),i.y+i.y0<a.y&&(a.y=i.y+i.y0),i.x+i.x1>r.x&&(r.x=i.x+i.x1),i.y+i.y1>r.y&&(r.y=i.y+i.y1)):s=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=k[0]>>1,e.y-=k[1]>>1)}var n,i,a,r;u<=h&&(_.stop(),y.call("end",_,d,s))}},_.stop=function(){return x&&(clearInterval(x),x=null),_},_.timeInterval=function(t){return arguments.length?(v=null==t?1/0:t,_):v},_.words=function(t){return arguments.length?(e=t,_):e},_.size=function(t){return arguments.length?(k=[+t[0],+t[1]],_):k},_.font=function(t){return arguments.length?(i=D(t),_):i},_.fontStyle=function(t){return arguments.length?(r=D(t),_):r},_.fontWeight=function(t){return arguments.length?(c=D(t),_):c},_.rotate=function(t){return arguments.length?(p=D(t),_):p},_.text=function(t){return arguments.length?(n=D(t),_):n},_.spiral=function(t){return arguments.length?(S=L[t]||t,_):S},_.fontSize=function(t){return arguments.length?(a=D(t),_):a},_.padding=function(t){return arguments.length?(g=D(t),_):g},_.random=function(t){return arguments.length?(A=t,_):A},_.on=function(){var t=y.on.apply(y,arguments);return t===y?_:t},_}});t(yn),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=H(ze),r=H(Ue),o=H(qe),l=H(Ve),i=H(Ge),s=H($e),u=H(Ce),h=H(ln),d=H(yn),f=u.default._,c=u.default.event,p=u.default.Display.Text,g=(n=h.default,(0,s.default)(v,n),(0,i.default)(v,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置",default:null},node:{detail:"节点文字配置",propertys:{fontFamily:{detail:"字体设置",default:"Impact"},fontColor:{detail:"文字颜色",default:"#999"},fontSize:{detail:"文本字体大小",default:function(){return this.minFontSize+Math.random()*this.maxFontSize}},maxFontSize:{detail:"文本最大字体大小",default:30},minFontSize:{detail:"文本最小字体大小",default:16},fontWeight:{detail:"fontWeight",default:"normal"},format:{detail:"文本格式化处理函数",default:null},padding:{detail:"文本间距",default:10},rotation:{detail:"文本旋转角度",default:function(){return 30*(~~(6*Math.random())-3)}},strokeStyle:{detail:"文本描边颜色",default:null},select:{detail:"文本选中效果",propertys:{enabled:{detail:"是否开启选中",default:!0},lineWidth:{detail:"选中后的文本描边宽",default:2},strokeStyle:{detail:"选中后的文本描边色",default:"#666"}}},focus:{detail:"文本hover效果",propertys:{enabled:{detail:"是否开启hover效果",default:!0}}}}}}}}]),(0,i.default)(v,[{key:"init",value:function(){}},{key:"draw",value:function(t){t=t||{},f.extend(!0,this,t),this._drawGraphs(),this.sprite.context.x=this.width/2,this.sprite.context.y=this.height/2,this.fire("complete")}},{key:"getDaraFrameIndOfVal",value:function(t){var e=this,n=this.dataFrame,i=f.find(n.data,function(t){return t.field==e.field});return f.indexOf(i.data,t)}},{key:"_getFontSize",value:function(t){var e=this.node.minFontSize;if(f.isFunction(this.node.fontSize)&&(e=this.node.fontSize(t)),f.isString(this.node.fontSize)&&this.node.fontSize in t){var n=Number(t[this.node.fontSize]);isNaN(n)||(e=this.node.minFontSize+(this.node.maxFontSize-this.node.minFontSize)/(this.node._maxFontSizeVal-this.node._minFontSizeVal)*(n-this.node._minFontSizeVal))}return f.isNumber(this.node.fontSize)&&(e=this.node.fontSize),e}},{key:"_getRotate",value:function(t,e){var n=this.node.rotation;return f.isFunction(this.node.rotation)&&(n=this.node.rotation(t,e)||0),n}},{key:"_getFontColor",value:function(t){var e;return f.isString(this.node.fontColor)&&(e=this.node.fontColor),f.isFunction(this.node.fontColor)&&(e=this.node.fontColor(t)),null==e&&(e="#ccc"),e}},{key:"_drawGraphs",value:function(){var r=this;f.isString(this.node.fontSize)&&f.each(r.dataFrame.getFieldData(this.node.fontSize),function(t){r.node._maxFontSizeVal=Math.max(r.node._maxFontSizeVal,t),r.node._minFontSizeVal=Math.min(r.node._minFontSizeVal,t)}),(0,d.default)().size([r.width,r.height]).words(r.dataFrame.getFieldData(r.field).map(function(t,e){var n=r.app.dataFrame.getRowDataAt(r.getDaraFrameIndOfVal(t)),i={type:"cloud",rowData:n,field:r.field,value:t,text:null,size:r._getFontSize(n,t),iNode:e,color:null};i.fontColor=r._getFontColor(i);var a=t;return r.node.format&&(a=r.node.format(t,i)),i.text=a||t,i})).padding(r.node.padding).rotate(function(t,e){return r._getRotate(t,e)}).font(r.node.fontFamily).fontSize(function(t){return t.size}).on("end",function(i){r.data=i,r.sprite.removeAllChildren(),f.each(i,function(t,e){t.iNode=e,t.dataLen=i.length,t.focused=!1,t.selected=!1;var n=new p(t.text,{context:{x:t.x,y:t.y,fontSize:t.size,fontFamily:t.font,rotation:t.rotate,textBaseline:"middle",textAlign:"center",cursor:"pointer",fontWeight:r.node.fontWeight,fillStyle:t.fontColor}});r.sprite.addChild(n),r.node.focus.enabled&&n.hover(function(){r.focusAt(this.nodeData.iNode)},function(){this.nodeData.selected||r.unfocusAt(this.nodeData.iNode)}),((n.nodeData=t)._node=n).on(c.types.get(),function(t){t.eventInfo={trigger:r.node,title:null,nodes:[this.nodeData]},this.nodeData.text&&(t.eventInfo.title=this.nodeData.text),r.app.fire(t.type,t)})})}).start()}},{key:"focusAt",value:function(t){var e=this.data[t];this.node.focus.enabled&&!e.focused&&(e._node.context.fontSize+=3,e.focused=!0)}},{key:"unfocusAt",value:function(t){var e=this.data[t];this.node.focus.enabled&&e.focused&&(e._node.context.fontSize-=3,e.focused=!1)}},{key:"selectAt",value:function(t){var e=this.data[t];if(this.node.select.enabled&&!e.selected){var n=e._node.context;n.lineWidth=this.node.select.lineWidth,n.strokeAlpha=this.node.select.strokeAlpha,n.strokeStyle=this.node.select.strokeStyle,e.selected=!0}}},{key:"unselectAt",value:function(t){var e=this.data[t];this.node.select.enabled&&e.selected&&(e._node.context.strokeStyle=this.node.strokeStyle,e.selected=!1)}}]),v);function v(t,e){var n;(0,a.default)(this,v),(n=(0,r.default)(this,(0,o.default)(v).call(this,t,e))).type="cloud";var i=(0,l.default)(n);return n.node={_maxFontSizeVal:0,_minFontSizeVal:null},f.extend(!0,(0,l.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),n.node.fontColor=function(t){return i.app.getTheme(t.iNode)},n.init(),n}h.default.registerComponent(g,"graphs","cloud");var y=g;e.default=y}));var xn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=H(ze),n=H(Ge),O=H(Ce),T=O.default._,M=O.default.event,I=O.default.Shapes.Circle,a=((0,n.default)(r,null,[{key:"defaultProps",value:function(){return{sort:{detail:"排序",default:"desc"},sortField:{detail:"用来排序的字段",default:"null"},node:{detail:"单个数据节点图形配置",propertys:{maxRadius:{detail:"最大半径",default:30},minRadius:{detail:"最小半径",default:5},radius:{detail:"半径",default:15,documentation:'也可以是个function,也可以配置{field:"pv"}来设置字段， 自动计算r'},lineWidth:{detail:"描边线宽",default:1},strokeStyle:{detail:"描边颜色",default:"#ffffff"},fillStyle:{detail:"图形填充色",default:"#f2fbfb"},strokeAlpha:{detail:"边框透明度",default:.6},focus:{detail:"hover态设置",propertys:{enabled:{detail:"是否开启",default:!0},strokeAlpha:{detail:"hover时候边框透明度",default:.7},lineWidth:{detail:"hover时候边框大小",default:2},strokeStyle:{detail:"hover时候边框颜色",default:"#fff"}}},select:{detail:"选中态设置",propertys:{enabled:{detail:"是否开启",default:!1},strokeAlpha:{detail:"选中时候边框透明度",default:1},lineWidth:{detail:"选中时候边框大小",default:2},strokeStyle:{detail:"选中时候边框颜色",default:"#fff"},triggerEventType:{detail:"触发事件",default:"click"}}}}},label:{detail:"文本设置",propertys:{enabled:{detail:"是否开启",default:!0},fontColor:{detail:"文本颜色",default:"#666666"},fontSize:{detail:"文本字体大小",default:13},textAlign:{detail:"水平对齐方式",default:"center"},verticalAlign:{detail:"基线对齐方式",default:"middle"},position:{detail:"文本布局位置",default:"center"},offsetX:{detail:"x方向偏移量",default:0},offsetY:{detail:"y方向偏移量",default:0}}}}}}]),(0,n.default)(r,[{key:"init",value:function(){var t=this.app.getComponent({name:"coord"});this.sprite=new O.default.Display.Sprite({id:"group_"+this.iGroup,context:{x:t.origin.x,y:t.origin.y}}),this._trimGraphs(),this.draw()}},{key:"_trimGraphs",value:function(){var i=this,t=this.app.getComponent({name:"coord"}).getMaxDisToViewOfOrigin();(t-this.rRange.to)/(2*this.pit.radius)<this.groupLen-1-this.iGroup&&(this.rRange.to=t-(this.groupLen-1-this.iGroup)*this.pit.radius*2),this.rRange.to-this.rRange.start<2*this.pit.radius&&(this.rRange.to=this.rRange.start+2*this.pit.radius),this.maxRingNum||(this.maxRingNum=parseInt((this.rRange.to-this.rRange.start)/(2*this.pit.radius),10),this.ringNum=this.maxRingNum),this.rRange.to=this.rRange.start+this.ringNum*this.pit.radius*2;for(var e=[],n=this.dataFrame.length,a=0;a<n;a++){var r=this.dataFrame.getRowDataAt(a),o={type:"planet",groupLen:this.groupLen,iGroup:i.iGroup,iNode:a,nodeElement:null,labelElement:null,rowData:r,iRing:null,iPlanet:null,fillStyle:null,color:null,strokeStyle:null,pit:null,ringInd:-1,field:i.field,label:r[i.field],focused:!1,selected:!!~T.indexOf(this.selectInds,r.__index__)};e.push(o)}i.sortField&&(e=e.sort(function(t,e){var n=i.sortField;return"desc"==i.sort?e.rowData[n]-t.rowData[n]:t.rowData[n]-e.rowData[n]}),T.each(e,function(t,e){t.iNode=e})),this._rings=this["_setRings_"+this.layoutType+"Range"](e),this.planets=e}},{key:"_setRings_radianRange",value:function(n){for(var s=this,i=[],t=this.app.getComponent({name:"coord"}),e=0,a=this.ringNum;e<a;e++){var r=e*this.pit.radius*2+this.pit.radius+this.rRange.start;s._graphs.center.enabled||(r=e*this.pit.radius*2+this.rRange.start);var o=t.getRadiansAtR(r,s.width,s.height);i.push({arcs:o,pits:[],planets:[],radius:r,max:0})}var u=0;T.each(i,function(r){var o=2*Math.asin(s.pit.radius/r.radius);0==r.radius&&(o=2*Math.PI);var l=0;T.each(r.arcs,function(t){var e=s._getDiffRadian(t[0].radian,t[1].radian);if(o<=e){var n=parseInt(e/o,10);l+=n;for(var i=0;i<n;i++){var a={hasRadish:!1,start:(t[0].radian+o*i+2*Math.PI)%(2*Math.PI)};a.middle=(a.start+o/2+2*Math.PI)%(2*Math.PI),a.to=(a.start+o+2*Math.PI)%(2*Math.PI),r.pits.push(a)}}}),r.max=l,u+=l,r.pits=T.shuffle(r.pits)});var l=0;return T.each(i,function(a,t){if(l>=n.length)return!1;var e=Math.ceil(a.max/u*n.length);e=Math.min(a.max,e),a.planets=n.slice(l,l+e),t==i.length-1&&(a.planets=n.slice(l)),l+=e,T.each(a.planets,function(t,e){if(!(e>=a.pits.length)){var n=T.filter(a.pits,function(t){return!t.hasRadish}),i=n[parseInt(Math.random()*n.length)];i.hasRadish=!0,t.pit=i}})}),i}},{key:"_getDiffRadian",value:function(t,e){var n=e-t;return e<t&&(n=(e+2*Math.PI-t)%(2*Math.PI)),n}},{key:"_setRings_indexRange",value:function(){}},{key:"_setRings_valRange",value:function(){}},{key:"draw",value:function(){var C=this,P=this.app.getComponent({name:"coord"});T.each(this._rings,function(w,k){var S={rotation:0};1==w.arcs.length&&0==w.arcs[0][0].radian&&w.arcs[0][1].radian==2*Math.PI&&(S.rotation=parseInt(360*Math.random()));var A=new O.default.Display.Sprite({context:S});T.each(w.planets,function(t,e){if(t.pit){var n=P.getPointInRadianOfR(t.pit.middle,w.radius),i=C._getRProp(C.node.radius,k,e,t),a=C.node.maxRadius-i,r=parseInt(Math.random()*a),o=parseInt(360*Math.random())*Math.PI/180;0!=r&&(n.x+=Math.sin(o)*r,n.y+=Math.cos(o)*r);var l=C.node;t.selected&&(l=C.node.select);var s=C._getProp(C.node.fillStyle,t),u=C._getProp(l.strokeStyle,t),h=C._getProp(l.strokeAlpha,t),d=C._getProp(l.lineWidth,t),f={x:n.x,y:n.y,r:i,fillStyle:s,lineWidth:d,strokeStyle:u,strokeAlpha:h,cursor:"pointer"};t.color=t.fillStyle=s,t.strokeStyle=u,t.iRing=k,t.iPlanet=e;var c=new I({hoverClone:!1,context:f});if(c.on(M.types.get(),function(t){t.eventInfo={title:null,trigger:C.node,nodes:[this.nodeData]},this.nodeData.label&&(t.eventInfo.title=this.nodeData.label),C.node.focus.enabled&&("mouseover"==t.type&&C.focusAt(this.nodeData),"mouseout"==t.type&&C.unfocusAt(this.nodeData)),C.node.select.enabled&&t.type==C.node.select.triggerEventType&&(this.nodeData.selected?C.unselectAt(this.nodeData):C.selectAt(this.nodeData)),C.app.fire(t.type,t)}),((c.nodeData=t).nodeElement=c).ringInd=k,c.planetIndInRing=e,A.addChild(c),C._graphs.animation){var p=c.context.r,g=c.context.globalAlpha;c.context.r=1,c.context.globalAlpha=.1,c.animate({r:p,globalAlpha:g},{delay:Math.round(1500*Math.random()),onComplete:function(){c.labelElement&&(c.labelElement.context.visible=!0);var t=c.clone();A.addChildAt(t,0),t.animate({r:p+10,globalAlpha:0},{onComplete:function(){t.destroy()}})}})}var v={x:n.x,y:n.y,fontSize:C.label.fontSize,textAlign:C.label.textAlign,textBaseline:C.label.verticalAlign,fillStyle:C.label.fontColor,rotation:-S.rotation,rotateOrigin:{x:0,y:0}},y=new O.default.Display.Text(t.label,{context:v}),x=y.getTextWidth(),_=y.getTextHeight();if(2*i<x&&(v.fontSize=C.label.fontSize-3),T.isFunction(C.label.position)){var m=C.label.position({node:c,circleR:i,circleCenter:{x:n.x,y:n.y},textWidth:x,textHeight:_});v.rotation=-S.rotation,v.rotateOrigin={x:-(m.x-v.x),y:-(m.y-v.y)},v.x=m.x,v.y=m.y}"auto"==C.label.position&&2*i<x&&b(),"bottom"==C.label.position&&b(),v.x+=C.label.offsetX,v.y+=C.label.offsetY,y=new O.default.Display.Text(t.label,{context:v}),((c.labelElement=y).nodeData=t).labelElement=y,C._graphs.animation&&(y.context.visible=!1),A.addChild(y)}function b(){v.y=n.y+i+3,v.rotation=-S.rotation,v.rotateOrigin={x:0,y:-(i+.7*_)}}}),C.sprite.addChild(A)})}},{key:"_getRProp",value:function(e,t,n,i){var a=this;if(T.isString(e)&&-1<T.indexOf(a.dataFrame.fields,e)){null==this.__rValMax&&null==this.__rValMax&&(this.__rValMax=0,this.__rValMin=0,T.each(a.planets,function(t){a.__rValMax=Math.max(a.__rValMax,t.rowData[e]),a.__rValMin=Math.min(a.__rValMin,t.rowData[e])}));var r=i.rowData[e];return a.node.minRadius+(r-this.__rValMin)/(this.__rValMax-this.__rValMin)*(a.node.maxRadius-a.node.minRadius)}return a._getProp(e,i)}},{key:"_getProp",value:function(t,e){var n=this.iGroup;return T.isFunction(t)?t.apply(this,[e,n]):t}},{key:"getPlanetAt",value:function(e){var n=e;return T.isNumber(e)&&T.each(this.planets,function(t){if(t.rowData.__index__==e)return n=t,!1}),n}},{key:"selectAt",value:function(t){if(this.node.select.enabled){var e=this.getPlanetAt(t);e.selected=!0,e.nodeElement&&(e.nodeElement.context.lineWidth=this._getProp(this.node.select.lineWidth,e),e.nodeElement.context.strokeStyle=this._getProp(this.node.select.strokeStyle,e),e.nodeElement.context.strokeAlpha=this._getProp(this.node.select.strokeAlpha,e));for(var n=0;n<this.selectInds.length;n++)if(t===this.selectInds[n]){this.selectInds.splice(n--,1);break}}}},{key:"unselectAt",value:function(t){if(this.node.select.enabled){var e=this.getPlanetAt(t);e.selected=!1,e.nodeElement&&(e.nodeElement.context.lineWidth=this._getProp(this.node.lineWidth,e),e.nodeElement.context.strokeAlpha=this._getProp(this.node.strokeAlpha,e)),this.selectInds.push(t)}}},{key:"getSelectedNodes",value:function(){return T.filter(this.planets,function(t){return t.selected})}},{key:"focusAt",value:function(t){if(this.node.focus.enabled){var e=this.getPlanetAt(t);e.selected||(e.focused=!0,e.nodeElement&&(e.nodeElement.context.lineWidth=this._getProp(this.node.focus.lineWidth,e),e.nodeElement.context.strokeStyle=this._getProp(this.node.focus.strokeStyle,e),e.nodeElement.context.strokeAlpha=this._getProp(this.node.focus.strokeAlpha,e)))}}},{key:"unfocusAt",value:function(t){if(this.node.focus.enabled){var e=this.getPlanetAt(t);e.selected||(e.focused=!1,e.nodeElement&&(e.nodeElement.context.lineWidth=this._getProp(this.node.lineWidth,e),e.nodeElement.context.strokeAlpha=this._getProp(this.node.strokeAlpha,e)))}}}]),r);function r(t,e,n){(0,i.default)(this,r),this._opt=t,this.dataFrame=e,this._graphs=n,this.app=n.app,this.field=null,this.iGroup=0,this.groupLen=1,this.rRange={start:0,to:0},this.width=0,this.height=0,this.selectInds=[],this.layoutType="radian",this.pit={radius:30},this.planets=[],this.maxRingNum=0,this.ringNum=0,T.extend(!0,this,(0,Ke.getDefaultProps)(r.defaultProps()),t),this.node.maxRadius>this.pit.radius&&(this.pit.radius=this.node.maxRadius),this.init()}e.default=a});t(xn),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),d=H(xn),f=H(Je),c=u.default._,p=u.default.event,g=u.default.Display.Text,v=u.default.Shapes.Circle,y=u.default.Shapes.Line,x=u.default.Shapes.Rect,_=u.default.Shapes.Sector,m=(n=h.default,(0,s.default)(b,n),(0,l.default)(b,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段设置",default:null},center:{detail:"中心点设置",propertys:{enabled:{detail:"是否显示中心",default:!0},text:{detail:"中心区域文本",default:"center"},radius:{detail:"中心圆半径",default:30},fillStyle:{detail:"中心背景色",default:"#70629e"},fontSize:{detail:"中心字体大小",default:15},fontColor:{detail:"中心字体颜色",default:"#ffffff"},margin:{detail:"中区区域和外围可绘图区域距离",default:20},cursor:{detail:"中心节点的鼠标手势",default:"default"}}},selectInds:{detail:"选中的数据索引",default:[]},grid:{detail:"星系图自己的grid",propertys:{rings:{detail:"环配置",propertys:{fillStyle:{detail:"背景色",default:null},strokeStyle:{detail:"环线色",default:null},lineWidth:{detail:"环线宽",default:1},count:{detail:"分几环",default:3}}},rays:{detail:"射线配置",propertys:{count:{detail:"射线数量",default:0},globalAlpha:{detail:"线透明度",default:.4},strokeStyle:{detail:"线色",default:"#10519D"},lineWidth:{detail:"线宽",default:1}}}}},bewrite:{detail:"planet的趋势描述",propertys:{enabled:{detail:"是否开启趋势描述",default:!1},text:{detail:"描述文本",default:null},fontColor:{detail:"fontColor",default:"#999"},fontSize:{detail:"fontSize",default:12}}},scan:{detail:"扫描效果",propertys:{enabled:{detail:"是否开启扫描效果",default:!1},fillStyle:{detail:"扫描效果颜色",default:null},alpha:{detail:"起始透明度",default:.6},angle:{detail:"扫描效果的覆盖角度",default:90},r:{detail:"扫描效果覆盖的半径",default:null},repeat:{detail:"扫描次数",default:3}}},_props:[d.default]}}}]),(0,l.default)(b,[{key:"init",value:function(){this.gridSp=new u.default.Display.Sprite({id:"gridSp"}),this.groupSp=new u.default.Display.Sprite({id:"groupSp"}),this.scanSp=new u.default.Display.Sprite({id:"scanSp"}),this.centerSp=new u.default.Display.Sprite({id:"centerSp"}),this.sprite.addChild(this.gridSp),this.sprite.addChild(this.groupSp),this.sprite.addChild(this.scanSp),this.sprite.addChild(this.centerSp)}},{key:"draw",value:function(t){t=t||{},c.extend(!0,this,t),this._dataGroupHandle(),this._drawGroups(),this._drawBack(),this._drawBewrite(),this._drawCenter(),this._drawScan(),this.fire("complete")}},{key:"_getMaxR",value:function(){var t;return this.graphs&&this.graphs.group&&this.graphs.group.circle&&(t=this.graphs.group.circle.maxRadius),null==t&&(t=30),t}},{key:"_drawGroups",value:function(){var a=this,r=this.center.radius+this.center.margin,o=a.app.getComponent({name:"coord"}).getMaxDisToViewOfOrigin()-a.center.radius-a.center.margin,l=this._getMaxR();c.each(this.groupDataFrames,function(t,e){var n=r+o*(t.length/a.dataFrame.length),i=new d.default(c.extend(!0,{iGroup:e,groupLen:a.groupDataFrames.length,rRange:{start:r,to:n},width:a.width-2*l,height:a.height-2*l,selectInds:a.selectInds},a._opt),t,a);r=i.rRange.to,a._ringGroups.push(i),a.grid.rings._section.push({radius:i.rRange.to})}),c.each(a._ringGroups,function(t){a.sprite.addChild(t.sprite)})}},{key:"_drawCenter",value:function(){var e=this;this.center.enabled&&(this._center=new v({hoverClone:!1,context:{x:this.origin.x,y:this.origin.y,fillStyle:this.center.fillStyle,r:this.center.radius,cursor:this.center.cursor}}),this._centerTxt=new g(this.center.text,{context:{x:this.origin.x,y:this.origin.y,fontSize:this.center.fontSize,textAlign:"center",textBaseline:"middle",fillStyle:this.center.fontColor}}),this._center.on(p.types.get(),function(t){t.eventInfo={title:e.center.text,trigger:e.center,nodes:[e.center]},e.center.onclick&&("mousedown"==t.type&&(e._center.context.r+=2),"mouseup"==t.type&&(e._center.context.r-=2)),e.app.fire(t.type,t)}),this.centerSp.addChild(this._center),this.centerSp.addChild(this._centerTxt))}},{key:"_drawBack",value:function(){var t=this,e=this.app.getComponent({name:"coord"});if(1==t.grid.rings._section.length){var n=(t.grid.rings._section[0].radius-t.center.radius)/t.grid.rings.count;t.grid.rings._section=[];for(var i=0;i<t.grid.rings.count;i++)t.grid.rings._section.push({radius:t.center.radius+n*(i+1)})}else t.grid.rings.count=t.grid.rings._section.length;for(var a=t.grid.rings._section.length-1;0<=a;a--){var r=t.grid.rings._section[a];t.gridSp.addChild(new v({context:{x:e.origin.x,y:e.origin.y,r:r.radius,lineWidth:t._getBackProp(t.grid.rings.lineWidth,a),strokeStyle:t._getBackProp(t.grid.rings.strokeStyle,a),fillStyle:t._getBackProp(t.grid.rings.fillStyle,a)}}))}if(1<t.grid.rays.count){var o=e.origin.x,l=e.origin.y,s=360/t.grid.rays.count,u=e.getMaxDisToViewOfOrigin();t.grid.rings._section.length&&(u=t.grid.rings._section.slice(-1)[0].radius);for(var h=0,d=t.grid.rays.count;h<d;h++){var f=s*h/180*Math.PI,c=o+u*Math.cos(f),p=l+u*Math.sin(f);t.gridSp.addChild(new y({context:{start:{x:o,y:l},end:{x:c,y:p},lineWidth:t._getBackProp(t.grid.rays.lineWidth,h),strokeStyle:t._getBackProp(t.grid.rays.strokeStyle,h),globalAlpha:t.grid.rays.globalAlpha}}))}}var g=new x({name:"clipRect",context:{x:e.origin.x-t.app.width/2,y:e.origin.y-t.height/2,width:t.app.width,height:t.height}});t.gridSp.clipTo(g),t.sprite.addChild(g)}},{key:"_getBackProp",value:function(t,e){var n=null;return c.isFunction(t)&&(n=t.apply(this,[{scaleInd:e,count:this.grid.rings._section.length,groups:this._ringGroups,graphs:this}])),(c.isString(t)||c.isNumber(t))&&(n=t),c.isArray(t)&&(n=t[e]),n}},{key:"_drawBewrite",value:function(){var a=this;if(a.bewrite.enabled){var t,r,e,n,i=function(t,e,n,i){n.context.x=t*a.center.radius+20*t,o.addChild(n),o.addChild(new y({context:{lineType:"dashed",start:{x:n.context.x,y:0},end:{x:t*(e?l/2-r/2:l),y:0},lineWidth:1,strokeStyle:"#ccc"}})),e&&(e.context.x=t*(l/2),o.addChild(e),o.addChild(new y({context:{lineType:"dashed",start:{x:t*(l/2+r/2),y:0},end:{x:t*l,y:0},lineWidth:1,strokeStyle:"#ccc"}}))),i.context.x=t*l,o.addChild(i)};a.bewrite.text&&(t=new u.default.Display.Text(a.bewrite.text,{context:{fillStyle:a.bewrite.fontColor,fontSize:a.bewrite.fontSize,textBaseline:"middle",textAlign:"center"}}),r=t.getTextWidth()),e=new u.default.Display.Text("强",{context:{fillStyle:a.bewrite.fontColor,fontSize:a.bewrite.fontSize,textBaseline:"middle",textAlign:"center"}}),n=new u.default.Display.Text("弱",{context:{fillStyle:a.bewrite.fontColor,fontSize:a.bewrite.fontSize,textBaseline:"middle",textAlign:"center"}});var o=new u.default.Display.Sprite({context:{x:this.origin.x,y:this.origin.y}});a.sprite.addChild(o);var l=a.width/2;i(1,t.clone(),e.clone(),n.clone()),i(-1,t.clone(),e.clone(),n.clone())}}},{key:"scan",value:function(){var e=this;this._scanAnim&&this._scanAnim.stop();var t=e._getScanSp();360==e.__scanIngCurOration&&(t.context.rotation=0),e._scanAnim=t.animate({rotation:360,globalAlpha:1},{duration:(360-e.__scanIngCurOration)/360*1e3,onUpdate:function(t){e.__scanIngCurOration=t.rotation},onComplete:function(){t.context.rotation=0,e._scanAnim=t.animate({rotation:360},{duration:1e3,repeat:1e3,onUpdate:function(t){e.__scanIngCurOration=t.rotation}})}})}},{key:"_drawScan",value:function(t){var e=this;if(e.scan.enabled){var n=e._getScanSp();360==e.__scanIngCurOration&&(n.context.rotation=0),e._scanAnim&&e._scanAnim.stop(),e._scanAnim=n.animate({rotation:360,globalAlpha:1},{duration:(360-e.__scanIngCurOration)/360*1e3,onUpdate:function(t){e.__scanIngCurOration=t.rotation},onComplete:function(){n.context.rotation=0,e._scanAnim=n.animate({rotation:360},{duration:1e3,repeat:e.scan.repeat-2,onUpdate:function(t){e.__scanIngCurOration=t.rotation},onComplete:function(){n.context.rotation=0,e._scanAnim=n.animate({rotation:360,globalAlpha:0},{duration:1e3,onUpdate:function(t){e.__scanIngCurOration=t.rotation},onComplete:function(){n.destroy(),e.__scanSp=null,delete e.__scanSp,e.__scanIngCurOration=0,t&&t()}})}})}})}}},{key:"_getScanSp",value:function(){var t=this,e=t.__scanSp;if(!e){e=new u.default.Display.Sprite({context:{x:this.origin.x,y:this.origin.y,globalAlpha:0,rotation:t.__scanIngCurOration}}),t.scanSp.addChild(e),t.__scanSp=e;for(var n=t.scan.r||t.height/2-10,i=t.scan.fillStyle||t.center.fillStyle,a=t.scan.angle,r=0,o=a;r<o;r++){var l=new _({context:{r:n,fillStyle:i,clockwise:!0,startAngle:360-r,endAngle:359-r,globalAlpha:t.scan.alpha-t.scan.alpha/a*r}});e.addChild(l)}var s=new y({context:{end:{x:n,y:0},lineWidth:1,strokeStyle:i}});e.addChild(s)}return e}},{key:"_dataGroupHandle",value:function(){var n=c.indexOf(this.dataFrame.fields,this.groupField);if(0<=n){var i=this.dataFrame.org[0],a={};for(var t in c.each(this.dataFrame.org,function(t,e){e&&(a[t[n]]||(a[t[n]]=[c.clone(i)]),a[t[n]].push(t))}),a)this.groupDataFrames.push((0,f.default)(a[t]))}else this.groupDataFrames.push(this.dataFrame)}},{key:"show",value:function(t,e){this.getAgreeNodeData(e,function(t){t.nodeElement&&(t.nodeElement.context.visible=!0),t.labelElement&&(t.labelElement.context.visible=!0)})}},{key:"hide",value:function(t,e){this.getAgreeNodeData(e,function(t){t.nodeElement&&(t.nodeElement.context.visible=!1),t.labelElement&&(t.labelElement.context.visible=!1)})}},{key:"getAgreeNodeData",value:function(n,i){c.each(this._ringGroups,function(t){c.each(t._rings,function(t){c.each(t.planets,function(t){var e=t.rowData;n.params.name==e[n.params.field]&&i&&i(t)})})})}},{key:"getLayoutNodes",value:function(){var e=[];return c.each(this._ringGroups,function(t){c.each(t.planets,function(t){t.pit&&e.push(t)})}),e}},{key:"getInvalidNodes",value:function(){var e=[];return c.each(this._ringGroups,function(t){c.each(t.planets,function(t){t.pit||e.push(t)})}),e}},{key:"selectAt",value:function(e){c.each(this._ringGroups,function(t){t.selectAt(e)})}},{key:"selectAll",value:function(){var e=this;c.each(e.dataFrame.getFieldData("__index__"),function(t){e.selectAt(t)})}},{key:"unselectAt",value:function(e){c.each(this._ringGroups,function(t){t.unselectAt(e)})}},{key:"unselectAll",value:function(){var e=this;c.each(e.dataFrame.getFieldData("__index__"),function(t){e.unselectAt(t)})}},{key:"getSelectedNodes",value:function(){var e=[];return c.each(this._ringGroups,function(t){e=e.concat(t.getSelectedNodes())}),e}},{key:"getSelectedRowList",value:function(){var n=[];return c.each(this._ringGroups,function(t){var e=[];c.each(t.getSelectedNodes(),function(t){e.push(t.rowData)}),n=n.concat(e)}),n}},{key:"getNodesAt",value:function(){}},{key:"resetData",value:function(t){this.clean(),this.dataFrame=t,this._dataGroupHandle(),this._drawGroups(),this._drawScan()}},{key:"clean",value:function(){this.groupDataFrames=[],c.each(this._ringGroups,function(t){t.sprite.destroy()}),this._ringGroups=[]}}]),b);function b(t,e){var n;return(0,i.default)(this,b),(n=(0,a.default)(this,(0,r.default)(b).call(this,t,e))).type="planet",n.groupDataFrames=[],n.groupField=null,n._ringGroups=[],n.grid={rings:{_section:[]}},c.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(b.defaultProps()),t),0!=n.center.radius&&n.center.enabled||(n.center.radius=0,n.center.margin=0,n.center.enabled=!1),n.__scanIngCurOration=0,n.init(),n}h.default.registerComponent(m,"graphs","planet");var w=m;e.default=w})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),d=u.default._,f=u.default.event,c=u.default.Display.Text,p=u.default.Shapes.Polygon,g=(n=h.default,(0,s.default)(v,n),(0,l.default)(v,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置",default:null},sort:{detail:"排序规则",default:null},maxNodeWidth:{detail:"最大的元素宽",default:null},minNodeWidth:{detail:"最小的元素宽",default:0},minVal:{detail:"漏斗的塔尖",default:0},node:{detail:"单个元素图形配置",propertys:{height:{detail:"高",default:0,documentation:"漏斗单元高，如果options没有设定， 就会被自动计算为 this.height/dataOrg.length"}}},label:{detail:"文本配置",propertys:{enabled:{detail:"是否开启文本",default:!0},textAlign:{detail:"文本布局位置(left,center,right)",default:"center"},textBaseline:{detail:"文本基线对齐方式",default:"middle"},format:{detail:"文本格式化处理函数",default:function(t){return(0,Ke.numAddSymbol)(t)}},fontSize:{detail:"文本字体大小",default:13},fontColor:{detail:"文本颜色",default:"#ffffff",documentation:"align为center的时候的颜色，align为其他属性时候取node的颜色"}}}}}}]),(0,l.default)(v,[{key:"init",value:function(){}},{key:"_computerAttr",value:function(){this.field&&(this.dataOrg=this.dataFrame.getFieldData(this.field)),this._maxVal=d.max(this.dataOrg),this._minVal=d.min(this.dataOrg),this.maxNodeWidth||(this.maxNodeWidth=.7*this.width),this.node.height||(this.node.height=this.height/this.dataOrg.length)}},{key:"draw",value:function(t){t=t||{},d.extend(!0,this,t),this._computerAttr(),this.data=this._trimGraphs(),this._drawGraphs(),this.sprite.context.x=this.origin.x+this.width/2,this.sprite.context.y=this.origin.y}},{key:"_trimGraphs",value:function(){if(this.field){var i=this,a=[];return d.each(this.dataOrg,function(t,e){var n={type:"funnel",field:i.field,rowData:i.dataFrame.getRowDataAt(e),value:t,width:i._getNodeWidth(t),color:i.app.getTheme(e),cursor:"pointer",label:"",middlePoint:null,iNode:-1,points:[]};a.push(n)}),this.sort&&(a=a.sort(function(t,e){return"desc"==i.sort?e.value-t.value:t.value-e.value})),d.each(a,function(t,e){t.iNode=e,t.label=i.label.format(t.value,t)}),d.each(a,function(t,e){t.points=i._getPoints(t,a[e+1],a[e-1]),t.middlePoint={x:0,y:(t.iNode+.5)*i.node.height}}),a}}},{key:"_getNodeWidth",value:function(t){var e=this.minNodeWidth+(this.maxNodeWidth-this.minNodeWidth)/(this._maxVal-this.minVal)*(t-this.minVal);return parseInt(e)}},{key:"_getPoints",value:function(t,e,n){var i=[],a=t.iNode*this.node.height,r=a+this.node.height;if("asc"!==this.sort){i.push([-t.width/2,a]),i.push([t.width/2,a]);var o=this.minNodeWidth;e&&(o=e.width),i.push([o/2,r]),i.push([-o/2,r])}else{var l=this.minNodeWidth;n&&(l=n.width),i.push([-l/2,a]),i.push([l/2,a]),i.push([t.width/2,r]),i.push([-t.width/2,r])}return i}},{key:"_drawGraphs",value:function(){var r=this;d.each(this.data,function(t){var e=new p({context:{pointList:t.points,fillStyle:t.color,cursor:t.cursor}});r.sprite.addChild(e),e.nodeData=t,e.on(f.types.get(),function(t){t.eventInfo={trigger:r.node,title:r.field,nodes:[this.nodeData]},r.app.fire(t.type,t)});var n="center",i={x:t.middlePoint.x,y:t.middlePoint.y};"left"==r.label.textAlign&&(i.x=t.points[0][0]-(t.points[0][0]-t.points[3][0])/2,i.x-=15,n="right"),"right"==r.label.textAlign&&(i.x=t.points[1][0]-(t.points[1][0]-t.points[2][0])/2,i.x+=15,n="left");var a=new c(t.label,{context:{x:i.x,y:i.y,fontSize:r.label.fontSize,fillStyle:"center"==r.label.textAlign?r.label.fontColor:t.color,textAlign:n,textBaseline:r.label.textBaseline}});r.sprite.addChild(a)})}}]),v);function v(t,e){var n;return(0,i.default)(this,v),(n=(0,a.default)(this,(0,r.default)(v).call(this,t,e))).type="funnel",n.dataOrg=[],n.data=[],n._maxVal=null,n._minVal=null,d.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),n.init(),n}h.default.registerComponent(g,"graphs","funnel");var y=g;e.default=y}));var _n=e(function(t,e){function n(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function g(t,e){for(var n=0,i=0;i<t.length;++i)n+=t[i]*e[i];return n}function p(t){return Math.sqrt(g(t,t))}function v(t,e,n){for(var i=0;i<e.length;++i)t[i]=e[i]*n}function O(t,e,n,i,a){for(var r=0;r<t.length;++r)t[r]=e*n[r]+i*a[r]}function y(a,r,o,l,s,u,h){var d=o.fx,f=g(o.fxprime,r),c=d,t=d,p=f,e=0;function n(t,e,n){for(var i=0;i<16;++i)if(s=(t+e)/2,O(l.x,1,o.x,s,r),c=l.fx=a(l.x,l.fxprime),p=g(l.fxprime,r),d+u*s*f<c||n<=c)e=s;else{if(Math.abs(p)<=-h*f)return s;0<=p*(e-t)&&(e=t),t=s,n=c}return 0}s=s||1,u=u||1e-6,h=h||.1;for(var i=0;i<10;++i){if(O(l.x,1,o.x,s,r),c=l.fx=a(l.x,l.fxprime),p=g(l.fxprime,r),d+u*s*f<c||i&&t<=c)return n(e,s,t);if(Math.abs(p)<=-h*f)return s;if(0<=p)return n(s,e,c);t=c,e=s,s*=2}return s}var i;(i=e).bisect=function(t,e,n,i){var a=(i=i||{}).maxIterations||100,r=i.tolerance||1e-10,o=t(e),l=t(n),s=n-e;if(0<o*l)throw"Initial bisect points must have opposite signs";if(0===o)return e;if(0===l)return n;for(var u=0;u<a;++u){var h=e+(s/=2),d=t(h);if(0<=d*o&&(e=h),Math.abs(s)<r||0===d)return h}return e+s},i.nelderMead=function(t,e,n){var i,a=(n=n||{}).maxIterations||200*e.length,r=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,h=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,f=void 0!==n.sigma?n.sigma:.5,c=e.length,p=new Array(c+1);p[0]=e,p[0].fx=t(e);for(var g=p[0].id=0;g<c;++g){var v=e.slice();v[g]=v[g]?v[g]*r:o,p[g+1]=v,p[g+1].fx=t(v),p[g+1].id=g+1}function y(t){for(var e=0;e<t.length;e++)p[c][e]=t[e];p[c].fx=t.fx}for(var x=function(t,e){return t.fx-e.fx},_=e.slice(),m=e.slice(),b=e.slice(),w=e.slice(),k=0;k<a;++k){if(p.sort(x),n.history){var S=p.map(function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e});S.sort(function(t,e){return t.id-e.id}),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:S})}for(g=i=0;g<c;++g)i=Math.max(i,Math.abs(p[0][g]-p[1][g]));if(Math.abs(p[0].fx-p[c].fx)<l&&i<s)break;for(g=0;g<c;++g){for(var A=_[g]=0;A<c;++A)_[g]+=p[A][g];_[g]/=c}var C=p[c];if(O(m,1+u,_,-u,C),m.fx=t(m),m.fx<p[0].fx)O(w,1+h,_,-h,C),w.fx=t(w),w.fx<m.fx?y(w):y(m);else if(m.fx>=p[c-1].fx){var P=!1;if(m.fx>C.fx?(O(b,1+d,_,-d,C),b.fx=t(b),b.fx<C.fx?y(b):P=!0):(O(b,1-d*u,_,d*u,C),b.fx=t(b),b.fx<m.fx?y(b):P=!0),P){if(1<=f)break;for(g=1;g<p.length;++g)O(p[g],1-f,p[0],f,p[g]),p[g].fx=t(p[g])}}else y(m)}return p.sort(x),{fx:p[0].fx,x:p[0]}},i.conjugateGradient=function(t,e,n){var i,a,r,o={x:e.slice(),fx:0,fxprime:e.slice()},l={x:e.slice(),fx:0,fxprime:e.slice()},s=e.slice(),u=1;r=(n=n||{}).maxIterations||20*e.length,o.fx=t(o.x,o.fxprime),v(i=o.fxprime.slice(),o.fxprime,-1);for(var h=0;h<r;++h){if(u=y(t,i,o,l,u),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:u}),u){O(s,1,l.fxprime,-1,o.fxprime);var d=g(o.fxprime,o.fxprime);O(i,Math.max(0,g(s,l.fxprime)/d),i,-1,l.fxprime),a=o,o=l,l=a}else v(i,o.fxprime,-1);if(p(o.fxprime)<=1e-5)break}return n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:u}),o},i.gradientDescent=function(t,e,n){for(var i=(n=n||{}).maxIterations||100*e.length,a=n.learnRate||.001,r={x:e.slice(),fx:0,fxprime:e.slice()},o=0;o<i&&(r.fx=t(r.x,r.fxprime),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice()}),O(r.x,1,r.x,-a,r.fxprime),!(p(r.fxprime)<=1e-5));++o);return r},i.gradientDescentLineSearch=function(t,e,n){n=n||{};var i,a={x:e.slice(),fx:0,fxprime:e.slice()},r={x:e.slice(),fx:0,fxprime:e.slice()},o=n.maxIterations||100*e.length,l=n.learnRate||1,s=e.slice(),u=n.c1||.001,h=n.c2||.1,d=[];if(n.history){var f=t;t=function(t,e){return d.push(t.slice()),f(t,e)}}a.fx=t(a.x,a.fxprime);for(var c=0;c<o&&(v(s,a.fxprime,-1),l=y(t,s,a,r,l,u,h),n.history&&(n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice(),functionCalls:d,learnRate:l,alpha:l}),d=[]),i=a,a=r,r=i,!(0===l||p(a.fxprime)<1e-5));++c);return a},i.zeros=n,i.zerosM=function(t,e){return n(t).map(function(){return n(e)})},i.norm2=p,i.weightedSum=O,i.scale=v}),mn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.intersectionArea=function(e,t){var n,i=function(t){for(var e=[],n=0;n<t.length;++n)for(var i=n+1;i<t.length;++i)for(var a=P(t[n],t[i]),r=0;r<a.length;++r){var o=a[r];o.parentIndex=[n,i],e.push(o)}return e}(e),a=i.filter(function(t){return S(t,e)}),r=0,o=0,l=[];if(1<a.length){var s=O(a);for(n=0;n<a.length;++n){var u=a[n];u.angle=Math.atan2(u.x-s.x,u.y-s.y)}a.sort(function(t,e){return e.angle-t.angle});var h=a[a.length-1];for(n=0;n<a.length;++n){var d=a[n];o+=(h.x+d.x)*(d.y-h.y);for(var f={x:(d.x+h.x)/2,y:(d.y+h.y)/2},c=null,p=0;p<d.parentIndex.length;++p)if(-1<h.parentIndex.indexOf(d.parentIndex[p])){var g=e[d.parentIndex[p]],v=Math.atan2(d.x-g.x,d.y-g.y),y=Math.atan2(h.x-g.x,h.y-g.y),x=y-v;x<0&&(x+=2*Math.PI);var _=y-x/2,m=C(f,{x:g.x+g.radius*Math.sin(_),y:g.y+g.radius*Math.cos(_)});m>2*g.radius&&(m=2*g.radius),(null===c||c.width>m)&&(c={circle:g,width:m,p1:d,p2:h})}null!==c&&(l.push(c),r+=A(c.circle.radius,c.width),h=d)}}else{var b=e[0];for(n=1;n<e.length;++n)e[n].radius<b.radius&&(b=e[n]);var w=!1;for(n=0;n<e.length;++n)if(C(e[n],b)>Math.abs(b.radius-e[n].radius)){w=!0;break}w?r=o=0:(r=b.radius*b.radius*Math.PI,l.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-k,y:b.y+b.radius},width:2*b.radius}))}return o/=2,t&&(t.area=r+o,t.arcArea=r,t.polygonArea=o,t.arcs=l,t.innerPoints=a,t.intersectionPoints=i),r+o},e.containedInCircles=S,e.circleArea=A,e.distance=C,e.circleOverlap=function(t,e,n){if(t+e<=n)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var i=e-(n*n-t*t+e*e)/(2*n);return A(t,t-(n*n-e*e+t*t)/(2*n))+A(e,i)},e.circleCircleIntersection=P,e.getCenter=O;var k=1e-10;function S(t,e){for(var n=0;n<e.length;++n)if(C(t,e[n])>e[n].radius+k)return!1;return!0}function A(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function C(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function P(t,e){var n=C(t,e),i=t.radius,a=e.radius;if(i+a<=n||n<=Math.abs(i-a))return[];var r=(i*i-a*a+n*n)/(2*n),o=Math.sqrt(i*i-r*r),l=t.x+r*(e.x-t.x)/n,s=t.y+r*(e.y-t.y)/n,u=-(e.y-t.y)*(o/n),h=-(e.x-t.x)*(o/n);return[{x:l+u,y:s-h},{x:l-u,y:s+h}]}function O(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}});t(mn),mn.intersectionArea,mn.containedInCircles,mn.circleArea,mn.distance,mn.circleOverlap,mn.circleCircleIntersection,mn.getCenter;var bn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.venn=function(a,t){(t=t||{}).maxIterations=t.maxIterations||500;var e,n=t.initialLayout||h,r=t.lossFunction||E,o=n(a=function(t){t=t.slice();var e,n,i,a,r=[],o={};for(e=0;e<t.length;++e){var l=t[e];1==l.sets.length?r.push(l.sets[0]):2==l.sets.length&&(o[[i=l.sets[0],a=l.sets[1]]]=!0,o[[a,i]]=!0)}for(r.sort(function(t,e){return e<t}),e=0;e<r.length;++e)for(i=r[e],n=e+1;n<r.length;++n)[i,a=r[n]]in o||t.push({sets:[i,a],size:0});return t}(a),t),i=[],l=[];for(e in o)o.hasOwnProperty(e)&&(i.push(o[e].x),i.push(o[e].y),l.push(e));for(var s=(0,_n.nelderMead)(function(t){for(var e={},n=0;n<l.length;++n){var i=l[n];e[i]={x:t[2*n],y:t[2*n+1],radius:o[i].radius}}return r(e,a)},i,t).x,u=0;u<l.length;++u)e=l[u],o[e].x=s[2*u],o[e].y=s[2*u+1];return o},e.distanceFromIntersectArea=L,e.getDistanceMatrices=x,e.bestInitialLayout=h,e.constrainedMDSLayout=r,e.greedyLayout=o,e.lossFunction=E,e.disjointCluster=g,e.normalizeSolution=function(t,e,n){null===e&&(e=Math.PI/2);var i,a,s=[];for(a in t)if(t.hasOwnProperty(a)){var r=t[a];s.push({x:r.x,y:r.y,radius:r.radius,setid:a})}var o=g(s);for(i=0;i<o.length;++i){p(o[i],e,n);var l=_(o[i]);o[i].size=(l.xRange.max-l.xRange.min)*(l.yRange.max-l.yRange.min),o[i].bounds=l}o.sort(function(t,e){return e.size-t.size});var u=(s=o[0]).bounds,h=(u.xRange.max-u.xRange.min)/50;function d(t,e,n){if(t){var i,a,r,o=t.bounds;e?i=u.xRange.max-o.xRange.min+h:(i=u.xRange.max-o.xRange.max,(r=(o.xRange.max-o.xRange.min)/2-(u.xRange.max-u.xRange.min)/2)<0&&(i+=r)),n?a=u.yRange.max-o.yRange.min+h:(a=u.yRange.max-o.yRange.max,(r=(o.yRange.max-o.yRange.min)/2-(u.yRange.max-u.yRange.min)/2)<0&&(a+=r));for(var l=0;l<t.length;++l)t[l].x+=i,t[l].y+=a,s.push(t[l])}}for(var f=1;f<o.length;)d(o[f],!0,!1),d(o[f+1],!1,!0),d(o[f+2],!0,!0),f+=3,u=_(s);var c={};for(i=0;i<s.length;++i)c[s[i].setid]=s[i];return c},e.scaleSolution=function(t,e,n,i){var a=[],r=[];for(var o in t)t.hasOwnProperty(o)&&(r.push(o),a.push(t[o]));e-=2*i,n-=2*i;var l=_(a),s=l.xRange,u=l.yRange;if(s.max==s.min||u.max==u.min)return console.log("not scaling solution: zero size detected"),t;for(var h=e/(s.max-s.min),d=n/(u.max-u.min),f=Math.min(d,h),c=(e-(s.max-s.min)*f)/2,p=(n-(u.max-u.min)*f)/2,g={},v=0;v<a.length;++v){var y=a[v];g[r[v]]={radius:f*y.radius,x:i+c+(y.x-s.min)*f,y:i+p+(y.y-u.min)*f}}return g};var D=1e-10;function L(e,n,i){return Math.min(e,n)*Math.min(e,n)*Math.PI<=i+D?Math.abs(e-n):(0,_n.bisect)(function(t){return(0,mn.circleOverlap)(e,n,t)-i},0,e+n)}function x(t,r,o){var l=(0,_n.zerosM)(r.length,r.length),s=(0,_n.zerosM)(r.length,r.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var e=o[t.sets[0]],n=o[t.sets[1]],i=L(Math.sqrt(r[e].size/Math.PI),Math.sqrt(r[n].size/Math.PI),t.size);l[e][n]=l[n][e]=i;var a=0;t.size+1e-10>=Math.min(r[e].size,r[n].size)?a=1:t.size<=1e-10&&(a=-1),s[e][n]=s[n][e]=a}),{distances:l,constraints:s}}function h(t,e){var n=o(t,e),i=e.lossFunction||E;if(8<=t.length){var a=r(t,e);i(a,t)+1e-8<i(n,t)&&(n=a)}return n}function r(t,e){var n,i=(e=e||{}).restarts||10,a=[],r={};for(n=0;n<t.length;++n){var o=t[n];1==o.sets.length&&(r[o.sets[0]]=a.length,a.push(o))}var l,s,u=x(t,a,r),h=u.distances,d=u.constraints,f=(0,_n.norm2)(h.map(_n.norm2))/h.length;function c(t,e){return function(t,e,n,i){var a,r=0;for(a=0;a<e.length;++a)e[a]=0;for(a=0;a<n.length;++a)for(var o=t[2*a],l=t[2*a+1],s=a+1;s<n.length;++s){var u=t[2*s],h=t[2*s+1],d=n[a][s],f=i[a][s],c=(u-o)*(u-o)+(h-l)*(h-l),p=Math.sqrt(c),g=c-d*d;0<f&&p<=d||f<0&&d<=p||(r+=2*g*g,e[2*a]+=4*g*(o-u),e[2*a+1]+=4*g*(l-h),e[2*s]+=4*g*(u-o),e[2*s+1]+=4*g*(h-l))}return r}(t,e,h,d)}for(h=h.map(function(t){return t.map(function(t){return t/f})}),n=0;n<i;++n){var p=(0,_n.zeros)(2*h.length).map(Math.random);s=(0,_n.conjugateGradient)(c,p,e),(!l||s.fx<l.fx)&&(l=s)}var g=l.x,v={};for(n=0;n<a.length;++n){var y=a[n];v[y.sets[0]]={x:g[2*n]*f,y:g[2*n+1]*f,radius:Math.sqrt(y.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)(0,_n.scale)(e.history[n].x,f);return v}function o(t,e){for(var n,i=e&&e.lossFunction?e.lossFunction:E,a={},r={},o=0;o<t.length;++o){var l=t[o];1==l.sets.length&&(n=l.sets[0],a[n]={x:1e10,y:1e10,rowid:a.length,size:l.size,radius:Math.sqrt(l.size/Math.PI)},r[n]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),o=0;o<t.length;++o){var s=t[o],u=s.hasOwnProperty("weight")?s.weight:1,h=s.sets[0],d=s.sets[1];s.size+D>=Math.min(a[h].size,a[d].size)&&(u=0),r[h].push({set:d,size:s.size,weight:u}),r[d].push({set:h,size:s.size,weight:u})}var f=[];for(n in r)if(r.hasOwnProperty(n)){var c=0;for(o=0;o<r[n].length;++o)c+=r[n][o].size*r[n][o].weight;f.push({set:n,size:c})}function p(t,e){return e.size-t.size}f.sort(p);var g={};function v(t){return t.set in g}function y(t,e){a[e].x=t.x,a[e].y=t.y,g[e]=!0}for(y({x:0,y:0},f[0].set),o=1;o<f.length;++o){var x=f[o].set,_=r[x].filter(v);if(n=a[x],_.sort(p),0===_.length)throw"ERROR: missing pairwise overlap information";for(var m=[],b=0;b<_.length;++b){var w=a[_[b].set],k=L(n.radius,w.radius,_[b].size);m.push({x:w.x+k,y:w.y}),m.push({x:w.x-k,y:w.y}),m.push({y:w.y+k,x:w.x}),m.push({y:w.y-k,x:w.x});for(var S=b+1;S<_.length;++S)for(var A=a[_[S].set],C=L(n.radius,A.radius,_[S].size),P=(0,mn.circleCircleIntersection)({x:w.x,y:w.y,radius:k},{x:A.x,y:A.y,radius:C}),O=0;O<P.length;++O)m.push(P[O])}var T=1e50,M=m[0];for(b=0;b<m.length;++b){a[x].x=m[b].x,a[x].y=m[b].y;var I=i(a,t);I<T&&(T=I,M=m[b])}y(M,x)}return a}function E(e,t){for(var n=0,i=0;i<t.length;++i){var a,r=t[i];if(1!=r.sets.length){if(2==r.sets.length){var o=e[r.sets[0]],l=e[r.sets[1]];a=(0,mn.circleOverlap)(o.radius,l.radius,(0,mn.distance)(o,l))}else a=(0,mn.intersectionArea)(r.sets.map(function(t){return e[t]}));n+=(r.hasOwnProperty("weight")?r.weight:1)*(a-r.size)*(a-r.size)}}return n}function p(t,e,n){var i;if(null===n?t.sort(function(t,e){return e.radius-t.radius}):t.sort(n),0<t.length){var a=t[0].x,r=t[0].y;for(i=0;i<t.length;++i)t[i].x-=a,t[i].y-=r}if(2==t.length&&(0,mn.distance)(t[0],t[1])<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y),1<t.length){var o,l,s=Math.atan2(t[1].x,t[1].y)-e,u=Math.cos(s),h=Math.sin(s);for(i=0;i<t.length;++i)o=t[i].x,l=t[i].y,t[i].x=u*o-h*l,t[i].y=h*o+u*l}if(2<t.length){for(var d=Math.atan2(t[2].x,t[2].y)-e;d<0;)d+=2*Math.PI;for(;d>2*Math.PI;)d-=2*Math.PI;if(d>Math.PI){var f=t[1].y/(1e-10+t[1].x);for(i=0;i<t.length;++i){var c=(t[i].x+f*t[i].y)/(1+f*f);t[i].x=2*c-t[i].x,t[i].y=2*c*f-t[i].y}}}}function g(t){function e(t){return t.parent!==t&&(t.parent=e(t.parent)),t.parent}t.map(function(t){t.parent=t});for(var n=0;n<t.length;++n)for(var i=n+1;i<t.length;++i){var a=t[n].radius+t[i].radius;(0,mn.distance)(t[n],t[i])+1e-10<a&&(r=t[i],o=t[n],l=void 0,l=e(r),s=e(o),l.parent=s)}var r,o,l,s,u,h={};for(n=0;n<t.length;++n)(u=e(t[n]).parent.setid)in h||(h[u]=[]),h[u].push(t[n]);t.map(function(t){delete t.parent});var d=[];for(u in h)h.hasOwnProperty(u)&&d.push(h[u]);return d}function _(t){function e(e){return{max:Math.max.apply(null,t.map(function(t){return t[e]+t.radius})),min:Math.min.apply(null,t.map(function(t){return t[e]-t.radius}))}}return{xRange:e("x"),yRange:e("y")}}});t(bn),bn.venn,bn.distanceFromIntersectArea,bn.getDistanceMatrices,bn.bestInitialLayout,bn.constrainedMDSLayout,bn.greedyLayout,bn.lossFunction,bn.disjointCluster,bn.normalizeSolution,bn.scaleSolution,t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),g=u.default._,v=u.default.event,y=u.default.Display.Text,x=u.default.Shapes.Path,_=u.default.Shapes.Circle,d=(n=h.default,(0,s.default)(f,n),(0,l.default)(f,null,[{key:"defaultProps",value:function(){return{keyField:{detail:"key字段",default:"name"},valueField:{detail:"value字段",default:"value"},node:{detail:"单个节点配置",propertys:{strokeStyle:{detail:"边框颜色",default:null},lineWidth:{detail:"边框大小",default:2},strokeAlpha:{detail:"边框透明度",default:0},fillStyle:{detail:"背景色",default:null},fillAlpha:{detail:"背景透明度",default:.25},focus:{detail:"hover设置",propertys:{enabled:{detail:"是否开启",default:!0},strokeAlpha:{detail:"边框透明度",default:.3}}},select:{detail:"选中设置",propertys:{enabled:{detail:"是否开启",default:!0},lineWidth:{detail:"描边宽度",default:2},strokeStyle:{detail:"描边颜色",default:"#666666"}}}}},label:{detail:"文本设置",propertys:{field:{detail:"获取文本的字段",default:null},fontSize:{detail:"字体大小",default:14},fontColor:{detail:"文本颜色",default:null},fontWeight:{detail:"fontWeight",default:"normal"},showInter:{detail:"是否显示相交部分的文本",default:!0}}}}}}]),(0,l.default)(f,[{key:"init",value:function(){this.venn_circles=new u.default.Display.Sprite({id:"venn_circles"}),this.sprite.addChild(this.venn_circles),this.venn_paths=new u.default.Display.Sprite({id:"venn_paths"}),this.sprite.addChild(this.venn_paths),this.venn_labels=new u.default.Display.Sprite({id:"venn_labels"}),this.sprite.addChild(this.venn_labels)}},{key:"draw",value:function(t){t=t||{},g.extend(!0,this,t),this.data=this._trimGraphs(),this._widget(),this.sprite.context.x=this.app.padding.left,this.sprite.context.y=this.app.padding.top,this.fire("complete")}},{key:"resetData",value:function(t){this.dataFrame=t,this.data=this._trimGraphs(),this._widget()}},{key:"_trimGraphs",value:function(){var n=this,t=n._vennData(),e=bn.venn,i=bn.lossFunction,a=Math.PI/2,r={},o={};if(this._dataCircleLen=0,this._dataLabelLen=0,(this._dataPathLen=0)<t.length){var l=e(t,{lossFunction:i});l=(0,bn.normalizeSolution)(l,a,null),r=(0,bn.scaleSolution)(l,this.width,this.height,0),o=function(t,e){for(var n={},i=function(t){var e={},n=[];for(var i in t)n.push(i),e[i]=[];for(var a=0;a<n.length;a++)for(var r=t[n[a]],o=a+1;o<n.length;++o){var l=t[n[o]],s=(0,mn.distance)(r,l);s+l.radius<=r.radius+1e-10?e[n[o]].push(n[a]):s+r.radius<=l.radius+1e-10&&e[n[a]].push(n[o])}return e}(t),a=0;a<e.length;++a){for(var r=e[a].sets,o={},l={},s=0;s<r.length;++s){o[r[s]]=!0;for(var u=i[r[s]],h=0;h<u.length;++h)l[u[h]]=!0}var d=[],f=[];for(var c in t)c in o?d.push(t[c]):c in l||f.push(t[c]);var p=m(d,f);(n[r]=p).disjoint&&0<e[a].size&&console.log("WARNING: area "+r+" not represented on screen")}return n}(r,t)}var s=0,u=0;return g.each(t,function(t){if(t.label&&(1<t.sets.length&&!n.label.showInter||(t.labelPosition=o[t.nodeId],n._dataLabelLen++)),1<t.sets.length){var e=function(t){var e={};(0,mn.intersectionArea)(t,e);var n,i,a,r,o=e.arcs;if(0===o.length)return"M 0 0";if(1==o.length){var l=o[0].circle;return n=l.x,i=l.y,a=l.radius,(r=[]).push("\nM",n,i),r.push("\nm",-a,0),r.push("\na",a,a,0,1,0,2*a,0),r.push("\na",a,a,0,1,0,2*-a,0),r.join(" ")}for(var s=["\nM",o[0].p2.x,o[0].p2.y],u=0;u<o.length;++u){var h=o[u],d=h.circle.radius,f=h.width>d;s.push("\nA",d,d,0,f?1:0,1,h.p1.x,h.p1.y)}return s.join(" ")+" z"}(t.sets.map(function(t){return r[t]}));t.shape={type:"path",path:e,pathInd:u++},n._dataPathLen++}else 1==t.sets.length&&(t.shape=g.extend({type:"circle",circleInd:s++},r[t.nodeId]),n._dataCircleLen++)}),t}},{key:"_vennData",value:function(){for(var t=[],e=0,n=this.dataFrame.length;e<n;e++){var i=this.dataFrame.getRowDataAt(e),a={type:"venn",iNode:e,nodeId:null,rowData:i,sets:null,size:null,value:null,fillStyle:null,strokeStyle:null,label:null,labelPosition:null};for(var r in i){var o=i[r];r==this.keyField?(g.isArray(o)||(o=o.split(/[,|]/)),a.sets=o,a.nodeId=o.join()):r==this.valueField?(a.size=o,a.value=o):r==this.label.field&&(a.label=o)}t.push(a)}return t}},{key:"_getStyle",value:function(t,e,n,i){var a;return g.isString(t)&&(a=t),g.isFunction(t)&&(a=t(n)),a||null==e||(a=this.app.getTheme(e)),a||null==i||(a=i),a}},{key:"_widget",value:function(){var d=this;if(d.venn_circles.children.length>d._dataCircleLen)for(var t=d._dataCircleLen;t<d.venn_circles.children.length;t++)d.venn_circles.getChildAt(t--).destroy();if(d.venn_paths.children.length>d._dataPathLen)for(var e=d._dataPathLen;e<d.venn_paths.children.length;e++)d.venn_paths.getChildAt(e--).destroy();if(d.venn_labels.children.length>d._dataLabelLen)for(var n=d._dataLabelLen;n<d.venn_labels.children.length;n++)d.venn_labels.getChildAt(n--).destroy();var f=0,c=0,p=0;g.each(this.data,function(t){var e,n=t.shape,i=!0;if(n){var a;if("circle"==n.type){var r=d._getStyle(d.node.fillStyle,n.circleInd,t),o=d._getStyle(d.node.strokeStyle,n.circleInd,t);t.fillStyle=r,t.strokeStyle=o,a={x:n.x,y:n.y,r:n.radius,fillStyle:r,fillAlpha:d.node.fillAlpha,lineWidth:d.node.lineWidth,strokeStyle:o,strokeAlpha:d.node.strokeAlpha},(e=d.venn_circles.getChildAt(f++))?(i=!1,e.animate(a)):(e=new _({pointChkPriority:!1,hoverClone:!1,context:a}),d.venn_circles.addChild(e))}"path"==t.shape.type&&(a={path:n.path,fillStyle:"#ffffff",fillAlpha:0,lineWidth:d.node.lineWidth,strokeStyle:"#ffffff",strokeAlpha:0},(e=d.venn_paths.getChildAt(c++))?(i=!1,e.context.path=n.path):(e=new x({pointChkPriority:!1,context:a}),d.venn_paths.addChild(e))),(e.nodeData=t)._node=e,d.node.focus.enabled&&e.hover(function(){d.focusAt(this.nodeData.iNode)},function(){this.nodeData.selected||d.unfocusAt(this.nodeData.iNode)}),i&&e.on(v.types.get(),function(t){t.eventInfo={trigger:d.node,title:null,nodes:[this.nodeData]},d.app.fire(t.type,t)})}if(t.label&&d.label.enabled){var l=d._getStyle(d.label.fontColor,n.circleInd,t,"#999"),s=d.label.fontSize;if(1<t.sets.length&&(d.label.showInter?s-=2:s=0),s){var u={x:t.labelPosition.x,y:t.labelPosition.y,fontSize:s,textBaseline:"middle",textAlign:"center",fontWeight:d.label.fontWeight,fillStyle:l},h=d.venn_labels.getChildAt(p++);h?(h.resetText(t.label),h.animate(u)):(h=new y(t.label,{context:u}),d.venn_labels.addChild(h))}}})}},{key:"focusAt",value:function(t){var e=this.data[t];if(this.node.focus.enabled&&!e.focused){var n=e._node.context;1<e.sets.length?n.strokeAlpha=1:n.strokeAlpha=this.node.focus.strokeAlpha,e.focused=!0}}},{key:"unfocusAt",value:function(t){var e=this.data[t];this.node.focus.enabled&&e.focused&&(e._node.context.strokeAlpha=this.node.strokeAlpha,e.focused=!1)}},{key:"selectAt",value:function(t){var e=this.data[t];if(this.node.select.enabled&&!e.selected){var n=e._node.context;n.lineWidth=this.node.select.lineWidth,n.strokeAlpha=this.node.select.strokeAlpha,n.strokeStyle=this.node.select.strokeStyle,e.selected=!0}}},{key:"unselectAt",value:function(t){var e=this.data[t];this.node.select.enabled&&e.selected&&(e._node.context.strokeStyle=this.node.strokeStyle,e.selected=!1)}}]),f);function f(t,e){var n;return(0,i.default)(this,f),(n=(0,a.default)(this,(0,r.default)(f).call(this,t,e))).type="venn",n.vennData=null,g.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(f.defaultProps()),t),n._dataCircleLen=0,n._dataLabelLen=0,n._dataPathLen=0,n.init(),n}function m(e,n){var t,i=[];for(t=0;t<e.length;++t){var a=e[t];i.push({x:a.x,y:a.y}),i.push({x:a.x+a.radius/2,y:a.y}),i.push({x:a.x-a.radius/2,y:a.y}),i.push({x:a.x,y:a.y+a.radius/2}),i.push({x:a.x,y:a.y-a.radius/2})}var r=i[0],o=c(i[0],e,n);for(t=1;t<i.length;++t){var l=c(i[t],e,n);o<=l&&(r=i[t],o=l)}var s=(0,_n.nelderMead)(function(t){return-1*c({x:t[0],y:t[1]},e,n)},[r.x,r.y],{maxIterations:500,minErrorDelta:1e-10}).x,u={x:s[0],y:s[1]},h=!0;for(t=0;t<e.length;++t)if((0,mn.distance)(u,e[t])>e[t].radius){h=!1;break}for(t=0;t<n.length;++t)if((0,mn.distance)(u,n[t])<n[t].radius){h=!1;break}if(!h)if(1==e.length)u={x:e[0].x,y:e[0].y};else{var d={};(0,mn.intersectionArea)(e,d),u=0===d.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==d.arcs.length?{x:d.arcs[0].circle.x,y:d.arcs[0].circle.y}:n.length?m(e,[]):(0,mn.getCenter)(d.arcs.map(function(t){return t.p1}))}return u}function c(t,e,n){var i,a,r=e[0].radius-(0,mn.distance)(e[0],t);for(i=1;i<e.length;++i)(a=e[i].radius-(0,mn.distance)(e[i],t))<=r&&(r=a);for(i=0;i<n.length;++i)(a=(0,mn.distance)(n[i],t)-n[i].radius)<=r&&(r=a);return r}h.default.registerComponent(d,"graphs","venn");var p=d;e.default=p}));var wn=e(function(t,e){function r(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n,i=1,a=arguments.length;++i<a;)t[n=arguments[i]]=r(t,e,e[n]);return t}});t(wn);var kn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={merge:function(t){for(var e,n,i,a=t.length,r=-1,o=0;++r<a;)o+=t[r].length;for(n=new Array(o);0<=--a;)for(e=(i=t[a]).length;0<=--e;)n[--o]=i[e];return n}};e.default=n});t(kn);var Sn=e(function(t,e){function f(){var s=o,u=a,h=r;function d(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(r=u.call(d,e,e.depth))&&(a=r.length)){for(var a,r,o;0<=--a;)n.push(o=r[a]),o.parent=e,o.depth=e.depth+1;if(h){var l=+h.call(d,e,e.depth);l&&!isNaN(l)&&(e._value=l)}h&&(e.value=0),e.children=r}else h&&(e.value=+h.call(d,e,e.depth)||0),delete e.children;return f.layout_hierarchyVisitAfter(t,function(t){var e,n;s&&(e=t.children)&&e.sort(s),h&&(n=t.parent)&&(n.value+=t.value),t._value&&t._value>t.value&&(t.value=t._value),delete t._value}),i}return d.sort=function(t){return arguments.length?(s=t,d):s},d.children=function(t){return arguments.length?(u=t,d):u},d.value=function(t){return arguments.length?(h=t,d):h},d.revalue=function(t){return h&&(f.layout_hierarchyVisitBefore(t,function(t){t.children&&(t.value=0)}),f.layout_hierarchyVisitAfter(t,function(t){var e;t.children||(t.value=+h.call(d,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value),t._value&&t._value>t.value&&(t.value=t._value),delete t._value})),t},d}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=H(wn),i=H(kn);function a(t){return t.children}function r(t){return t.value}function o(t,e){return e.value-t.value}function l(t){return i.default.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}f.layout_hierarchyRebind=function(t,e){return(0,n.default)(t,e,"sort","children","value"),(t.nodes=t).links=l,t},f.layout_hierarchyVisitBefore=function(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(a=t.children)&&(i=a.length))for(var i,a;0<=--i;)n.push(a[i])},f.layout_hierarchyVisitAfter=function(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(r=t.children)&&(a=r.length))for(var a,r,o=-1;++o<a;)n.push(r[o]);for(;null!=(t=i.pop());)e(t)};var s=f;e.default=s});t(Sn);var An=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var i=(0,n.default)(),a=[1,1];function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,a){var r=e.children;if(e.x=n,e.y=e.depth*a,e.dx=i,e.dy=a,r&&(o=r.length)){var o,l,s,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(l=r[u],n,s=l.value*i,a),n+=s}}(n[0],0,a[0],a[1]/function t(e){var n=e.children,i=0;if(n&&(a=n.length))for(var a,r=-1;++r<a;)i=Math.max(i,t(n[r]));return 1+i}(n[0])),n}return e.size=function(t){return arguments.length?(a=t,e):a},n.default.layout_hierarchyRebind(e,i)};var n=H(Sn)});t(An),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),d=H(An),f=u.default._,c=u.default.event,p=u.default.Shapes.Sector,g=(n=h.default,(0,s.default)(v,n),(0,l.default)(v,null,[{key:"defaultProps",value:function(){return{keyField:{detail:"key字段",default:"name"},valueField:{detail:"value字段",default:"value"},parentField:{detail:"parent字段",default:"parent"},node:{detail:"单个节点图形设置",propertys:{strokeStyle:{detail:"描边色",default:"#ffffff"},lineWidth:{detail:"描边线宽",default:1},strokeAlpha:{detail:"描边边框透明度",default:1},fillStyle:{detail:"背景色",default:null},fillAlpha:{detail:"背景透明度",default:1},blurAlpha:{detail:"非激活状态透明度",documentation:"比如选中其中一项，其他不先关的要降低透明度",default:.4}}}}}}]),(0,l.default)(v,[{key:"init",value:function(){}},{key:"draw",value:function(t){t=t||{},f.extend(!0,this,t),this.data=this._trimGraphs(),this.dataGroup=this._getDataGroupOfDepth(),this._widget(),this.sprite.context.x=this.width/2+this.origin.x,this.sprite.context.y=this.height/2+this.origin.y,this.fire("complete")}},{key:"_trimGraphs",value:function(){var e=this,t=parseInt(Math.min(this.width,this.height)/2),n=(0,d.default)().sort(null).size([2*Math.PI,t*t]).value(function(t){return t[e.valueField]}),i=this._tansTreeData();return this.data=n(i,0),this.data}},{key:"_getDataGroupOfDepth",value:function(){var e={};f.each(this.data,function(t){e[t.depth]=[]}),f.each(this.data,function(t){e[t.depth].push(t)});var t=[];for(var n in e)t.push(e[n]);return t}},{key:"_tansTreeData",value:function(){var t=this.dataFrame,e={},s=t.getFieldData(this.keyField),u=t.getFieldData(this.valueField),h=t.getFieldData(this.parentField);return function i(a,t,e){for(var n=t?t.name:void 0,r=e||0;r<h.length;r++){var o=h[r];if(o||0===o||(o=void 0),n===o){a.name=s[r],a.iNode=r;var l=u[r];!l&&0!==l||(a.value=l),f.each(h,function(t,e){if(t===a.name){a.children||(a.children=[]);var n={};i(n,a,e),a.children.push(n)}});break}}}(e),e}},{key:"_widget",value:function(){var l=this;f.each(this.dataGroup,function(r,o){f.each(r,function(e,t){if(e.depth){var n=Math.sqrt(e.y+e.dy),i={r0:Math.sqrt(e.y),r:Math.sqrt(e.y)+2,startAngle:180*e.x/Math.PI,endAngle:180*(e.x+e.dx)/Math.PI,fillStyle:e.color||l.app.getTheme(e.iNode),strokeStyle:l.node.strokeStyle,lineWidth:l.node.lineWidth,globalAlpha:0},a=new p({id:"sector_"+o+"_"+t,context:i});(a.layoutData=e).sector=a,e.group=r,l.sprite.addChild(a),a.hover(function(){l._focus(e,r)},function(){l._unfocus(e,r)}),a.on(c.types.get(),function(t){t.eventInfo={trigger:l.node,iNode:e.iNode},l.app.fire(t.type,t)}),o<=1?(a.context.r=n,a.context.globalAlpha=1):setTimeout(function(){a.context&&(a.context.globalAlpha=1,a.animate({r:n},{duration:350}))},350*(o-1))}})})}},{key:"getNodesAt",value:function(e){var t=[];if(void 0!==e){var n=f.find(this.data,function(t){return t.iNode==e});n.type="sunburst",n&&t.push(n)}return t}},{key:"_focus",value:function(e,t){var n=this;f.each(t,function(t){t!==e&&(t.sector.context.globalAlpha=n.node.blurAlpha,n._focusChildren(t,function(t){t.sector.context.globalAlpha=n.node.blurAlpha}))}),n._focusParent(e)}},{key:"_unfocus",value:function(){f.each(this.data,function(t){t.sector&&(t.sector.context.globalAlpha=1)})}},{key:"_focusChildren",value:function(t,e){var n=this;t.children&&t.children.length&&f.each(t.children,function(t){e(t),n._focusChildren(t,e)})}},{key:"_focusParent",value:function(e){var n=this;e.parent&&e.parent.sector&&e.parent.group&&f.each(e.parent.group,function(t){t===e.parent?(t.sector.context.globalAlpha=1,n._focusParent(e.parent)):t.sector.context.globalAlpha=n.node.blurAlpha})}}]),v);function v(t,e){var n;return(0,i.default)(this,v),(n=(0,a.default)(this,(0,r.default)(v).call(this,t,e))).type="sunburst",f.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),n.data=[],n.dataGroup=[],n.init(),n}h.default.registerComponent(g,"graphs","sunburst");var y=g;e.default=y}));var Cn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e={},r=24,l=8,s=[1,1],u=[],h=function(t,e){return t.y-e.y},d=[];function f(t,e){var n,i=0,a=t.length,r=-1;if(1===arguments.length)for(;++r<a;)isNaN(n=+t[r])||(i+=n);else for(;++r<a;)isNaN(n=+e.call(t,t[r],r))||(i+=n);return i}e.nodeWidth=function(t){return arguments.length?(r=+t,e):r},e.nodeSort=function(t){return arguments.length?(h=t,e):h},e.nodePadding=function(t){return arguments.length?(l=+t,e):l},e.nodes=function(t){return arguments.length?(u=t,e):u},e.links=function(t){return arguments.length?(d=t,e):d},e.size=function(t){return arguments.length?(s=t,e):s},e.layout=function(t){return u.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),d.forEach(function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=u[t.source]),"number"==typeof n&&(n=t.target=u[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)}),u.forEach(function(t){t.value=Math.max(f(t.sourceLinks,x),f(t.targetLinks,x))}),function(){for(var e,n,i,t=u,a=0;t.length;)e=[],t.forEach(function(t){t.x=a,t.dx=r,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++a;n=a,u.forEach(function(t){t.sourceLinks.length||(t.x=n-1)}),i=(s[0]-r)/(a-1),u.forEach(function(t){t.x*=i})}(),function(t){var n,e=c().key(function(t){return t.x}).sortKeys(p).entries(u).map(function(t){return t.values});n=function(t,e){var n,i,a=-1,r=t.length;if(1===arguments.length){for(;++a<r&&(null==(n=t[a])||n!=n);)n=void 0;for(;++a<r;)null!=(i=t[a])&&i<n&&(n=i)}else{for(;++a<r&&(null==(n=e.call(t,t[a],a))||n!=n);)n=void 0;for(;++a<r;)null!=(i=e.call(t,t[a],a))&&i<n&&(n=i)}return n}(e,function(t){return(s[1]-(t.length-1)*l)/f(t,x)}),e.forEach(function(t){t.forEach(function(t,e){t.y=e,t.dy=t.value*n})}),d.forEach(function(t){t.dy=t.value*n}),o();for(var i=1;0<t;--t)r(i*=.99),o(),a(i),o();function a(n){function i(t){return y(t.source)*t.value}e.forEach(function(t,e){t.forEach(function(t){if(t.targetLinks.length){var e=f(t.targetLinks,i)/f(t.targetLinks,x);t.y+=(e-y(t))*n}})})}function r(n){function i(t){return y(t.target)*t.value}e.slice().reverse().forEach(function(t){t.forEach(function(t){if(t.sourceLinks.length){var e=f(t.sourceLinks,i)/f(t.sourceLinks,x);t.y+=(e-y(t))*n}})})}function o(){e.forEach(function(t){var e,n,i,a=0,r=t.length;for(h&&t.sort(h),i=0;i<r;++i)0<(n=a-(e=t[i]).y)&&(e.y+=n),a=e.y+e.dy+l;if(0<(n=a-l-s[1]))for(a=e.y-=n,i=r-2;0<=i;--i)0<(n=(e=t[i]).y+e.dy+l-a)&&(e.y-=n),a=e.y})}}(t),g(),e},e.relayout=function(){return g(),e},e.link=function(){var f=.5;function e(t){var e,n,i=t.source.x+t.source.dx,a=t.target.x,r=(e=+i,n=+a,function(t){return e*(1-t)+n*t}),o=r(f),l=r(1-f),s=t.source.y+t.sy,u=t.target.y+t.ty,h=t.dy;h<1&&(h=1);var d="M"+i+","+s+"C"+o+","+s+" "+l+","+u+" "+a+","+u;return d+="v"+h,(d+="C"+l+","+(u+h)+" "+o+","+(s+h)+" "+i+","+(s+h))+"v"+-h+"z"}return e.curvature=function(t){return arguments.length?(f=+t,e):f},e};var c=function(){var d,f,c={},p=[],e=[];function g(n,t,i){if(i>=p.length)return f?f.call(c,t):d?t.sort(d):t;for(var e,a,r,o,l=-1,s=t.length,u=p[i++],h=new v;++l<s;)(o=h.get(e=u(a=t[l])))?o.push(a):h.set(e,[a]);return r=n?(a=n(),function(t,e){a.set(t,g(n,e,i))}):(a={},function(t,e){a[t]=g(n,e,i)}),h.forEach(r),a}return c.map=function(t,e){return g(e,t,0)},c.entries=function(t){return function n(t,i){if(i>=p.length)return t;var a=[],r=e[i++];return t.forEach(function(t,e){a.push({key:t,values:n(e,i)})}),r?a.sort(function(t,e){return r(t.key,e.key)}):a}(g(n,t,0),0)},c.key=function(t){return p.push(t),c},c.sortKeys=function(t){return e[p.length-1]=t,c},c.sortValues=function(t){return d=t,c},c.rollup=function(t){return f=t,c},c},n=function(t,e){var n=new v;if(t instanceof v)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,a=-1,r=t.length;if(1===arguments.length)for(;++a<r;)n.set(a,t[a]);else for(;++a<r;)n.set(e.call(t,i=t[a],a),i)}else for(var o in t)n.set(o,t[o]);return n};function v(){this._=Object.create(null)}var i="\0";function a(t){return"__proto__"==(t+="")||t[0]===i?i+t:t}function o(t){return(t+="")[0]===i?t.slice(1):t}function p(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function g(){function e(t,e){return t.source.y-e.source.y}function n(t,e){return t.target.y-e.target.y}u.forEach(function(t){t.sourceLinks.sort(n),t.targetLinks.sort(e)}),u.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}function y(t){return t.y+t.dy/2}function x(t){return t.value}return function(t,e){if(Object.defineProperty)for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1});else Ce._.extend(t.prototype,e)}(v,{has:function(t){return a(t)in this._},get:function(t){return this._[a(t)]},set:function(t,e){return this._[a(t)]=e},remove:function(t){return(t=a(t))in this._&&delete this._[t]},keys:function(){var t=[];for(var e in this._)t.push(o(e));return t},values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:o(e),value:this._[e]});return t},size:function(){var t=0;for(var e in this._)++t;return t},empty:function(){for(var t in this._)return!1;return!0},forEach:function(t){for(var e in this._)t.call(this,o(e),this._[e])}}),e}});t(Cn),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),d=H(Cn),f=u.default._,c=u.default.event,p=u.default.Shapes.Path,g=u.default.Shapes.Rect,v=(n=h.default,(0,s.default)(y,n),(0,l.default)(y,null,[{key:"defaultProps",value:function(){return{keyField:{detail:"key字段",default:null},valueField:{detail:"value字段",default:"value"},parentField:{detail:"parent字段",default:null},node:{detail:"node",propertys:{width:{detail:"节点宽",default:18},padding:{detail:"节点间距",default:10},sort:{detail:"节点排序字段",default:function(t,e){return t.y-e.y}},fillStyle:{detail:"节点背景色",default:null}}},line:{detail:"线设置",propertys:{strokeStyle:{detail:"线颜色",default:"blue"},alpha:{detail:"线透明度",default:.3},focus:{detail:"图形的hover设置",propertys:{enabled:{detail:"是否开启",default:!0}}}}},label:{detail:"文本设置",propertys:{fontColor:{detail:"文本颜色",default:"#666666"},fontSize:{detail:"文本字体大小",default:12},textAlign:{detail:"水平对齐方式",default:"left"},verticalAlign:{detail:"垂直对齐方式",default:"middle"},format:{detail:"文本格式函数",default:null}}}}}}]),(0,l.default)(y,[{key:"init",value:function(){this._links=new u.default.Display.Sprite,this._nodes=new u.default.Display.Sprite,this._labels=new u.default.Display.Sprite,this.sprite.addChild(this._links),this.sprite.addChild(this._nodes),this.sprite.addChild(this._labels)}},{key:"draw",value:function(t){t=t||{},f.extend(!0,this,t),this.data=this._trimGraphs(),this._widget(),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this.fire("complete")}},{key:"_trimGraphs",value:function(){var i=this,a=[],r=[],t=i.dataFrame.getFieldData(i.keyField),o=i.dataFrame.getFieldData(i.valueField),l=i.dataFrame.getFieldData(i.parentField),s={};return f.each(t,function(t,e){var n=[];i.parentField&&n.push(l[e]),n=n.concat(t.split(/[|]/)),f.each(n,function(t){void 0===s[t]&&(s[t]=a.length,a.push({name:t}))})}),f.each(t,function(t,e){var n=[];i.parentField&&n.push(l[e]),2==(n=n.concat(t.split(/[|]/))).length&&r.push({source:s[n[0]],target:s[n[1]],value:o[e]})}),(0,d.default)().nodeWidth(this.node.width).nodePadding(this.node.padding).nodeSort(this.node.sort).size([this.width,this.height]).nodes(a).links(r).layout(16)}},{key:"_widget",value:function(){this._drawNodes(),this._drawLinks(),this._drawLabels()}},{key:"_getColor",value:function(t,e,n){var i=t;return f.isArray(i)&&(i=i[n]),f.isFunction(i)&&(i=i(e)),i||this.app.getTheme(n)}},{key:"_drawNodes",value:function(){var t=this.data.nodes(),a=this;f.each(t,function(t,e){var n=a._getColor(a.node.fillStyle,t,e),i=new g({xyToInt:!1,context:{x:t.x,y:t.y,width:a.data.nodeWidth(),height:Math.max(t.dy,1),fillStyle:n}});i.data=t,a._nodes.addChild(i)})}},{key:"_drawLinks",value:function(){var t=this.data.links(),r=this;f.each(t,function(t,e){var n=r._getColor(r.line.strokeStyle,t,e),i=r.data.link()(t),a=new p({xyToInt:!1,context:{path:i,fillStyle:n,globalAlpha:r.line.alpha,cursor:"pointer"}});a.__glpha=r.line.alpha,a.link=t,a.on(c.types.get(),function(t){r.line.focus.enabled&&("mouseover"==t.type&&(this.__glpha+=.1),"mouseout"==t.type&&(this.__glpha-=.1));var e=this.link;e.type="sankey",t.eventInfo={trigger:r.node,title:e.source.name+" --<span style='position:relative;top:-0.5px;font-size:16px;left:-3px;'>></span> "+e.target.name,nodes:[e]},r.app.fire(t.type,t)}),r._links.addChild(a)})}},{key:"_drawLabels",value:function(){var t=this.data.nodes(),o=this;f.each(t,function(t){var e=o.label.textAlign,n=t.x+o.data.nodeWidth()+4,i=t.y+Math.max(t.dy/2,1),a=o.label.format?o.label.format(t.name,t):t.name,r=new u.default.Display.Text(a,{context:{x:n,y:i,fillStyle:o.label.fontColor,fontSize:o.label.fontSize,textAlign:e,textBaseline:o.label.verticalAlign}});o._labels.addChild(r),r.getTextWidth()+n>o.width&&(r.context.x=t.x-4,r.context.textAlign="right")})}}]),y);function y(t,e){var n;return(0,i.default)(this,y),(n=(0,a.default)(this,(0,r.default)(y).call(this,t,e))).type="sankey",f.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(y.defaultProps()),t),n.init(),n}h.default.registerComponent(v,"graphs","sankey");var x=v;e.default=x})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),g=H(Ce),u=H(ln),v=g.default._,h=(n=u.default,(0,s.default)(d,n),(0,l.default)(d,null,[{key:"defaultProps",value:function(){return{node:{detail:"进度条设置",propertys:{width:{detail:"进度条的宽度",default:20},radius:{detail:"进度条两端的圆角半径",default:10},fillStyle:{detail:"进度条的填充色",documentation:"可以是单个颜色，也可以是数组，也可以是一个函数,也可以是个lineargradient",default:null}}},label:{detail:"进度值文本",propertys:{enabled:{detail:"是否启用label",default:"true"},unit:{detail:"单位值，默认%",default:"%"},unitColor:{detail:"单位值的颜色",default:null},unitFontSize:{detail:"单位值的大小",default:14},fontColor:{detail:"label颜色",default:null},fontSize:{detail:"label文本大小",default:26},fixNum:{detail:"toFixed的位数",default:2},format:{detail:"label格式化处理函数",default:function(t){return t.toFixed(this.label.fixNum)}},lineWidth:{detail:"label文本描边线宽",default:null},strokeStyle:{detail:"label描边颜色",default:null},rotation:{detail:"label旋转角度",default:0},textAlign:{detail:"label textAlign",default:"center",values:["left","center","right"]},verticalAlign:{detail:"label verticalAlign",default:"middle",values:["top","middle","bottom"]},position:{detail:"label位置",default:"origin"},offsetX:{detail:"label在x方向的偏移量",default:0},offsetY:{detail:"label在y方向的偏移量",default:0}}},bgEnabled:{detail:"是否开启背景",default:!0},bgColor:{detail:"进度条背景颜色",default:"#f7f7f7"},radius:{detail:"半径",default:null},allAngle:{detail:"总角度",documentation:"默认为null，则和坐标系同步",default:null},startAngle:{detail:"其实角度",documentation:"默认为null，则和坐标系同步",default:null}}}}]),(0,l.default)(d,[{key:"init",value:function(){}},{key:"draw",value:function(t){t=t||{};var e=this;v.extend(!0,this,t),e.grow(function(t){e.data=e._trimGraphs(t),e._widget()}),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y}},{key:"_trimGraphs",value:function(s){var u=this;null==s&&(s=1);var t=this.app.getComponent({name:"coord"});this.enabledField=t.filterEnabledFields(this.field);var h=u.startAngle||t.startAngle,d=u.allAngle||t.allAngle;this.bgNodeData=this._getNodeData(h,d),this.bgNodeData.fillStyle=this._getStyle(this.bgNodeData,this.bgColor);var e={};return v.each(this.enabledField,function(o){var t=u.dataFrame.getFieldData(o),l=[];v.each(t,function(t,e){t*=s;var n=l.slice(-1)[0],i=n?n.endAngle:h,a=d*(t/100),r=u._getNodeData(i,a,o,t,e);r.fillStyle=u._getStyle(r,u.node.fillStyle),l.push(r)}),e[o]=l}),e}},{key:"_getNodeData",value:function(t,e,n,i,a){var r=this.app.getComponent({name:"coord"}),o=t+e/2,l=t+e,s=Math.PI*t/180,u=Math.PI*o/180,h=Math.PI*l/180,d=this.radius||r.radius,f=d-this.node.width,c={field:n,value:i,text:i,iNode:a,allAngle:e,startAngle:t,middleAngle:o,endAngle:l,startRadian:s,middleRadian:u,endRadian:h,outRadius:d,innerRadius:f,startOutPoint:r.getPointInRadianOfR(s,d),middleOutPoint:r.getPointInRadianOfR(u,d),endOutPoint:r.getPointInRadianOfR(h,d),startInnerPoint:r.getPointInRadianOfR(s,f),middleInnerPoint:r.getPointInRadianOfR(u,f),endInnerPoint:r.getPointInRadianOfR(h,f),rowData:this.dataFrame.getRowDataAt(a),fillStyle:null};return n&&this.label.format&&v.isFunction(this.label.format)&&(c.text=this.label.format.apply(this,[i,c])),c}},{key:"_widget",value:function(){var p=this;if(p.bgEnabled){var t=p._getPathStr(this.bgNodeData);p._bgPathElement?p._bgPathElement.context.path=t:(p._bgPathElement=new g.default.Shapes.Path({context:{path:t}}),p.sprite.addChild(p._bgPathElement)),p._bgPathElement.context.fillStyle=this.bgNodeData.fillStyle}v.each(this.data,function(t){v.each(t,function(t,e){var n=p._getPathStr(t),i="progress_bar_"+t.field+"_"+e,a=p.sprite.getChildById(i);if(a?a.context.path=n:(a=new g.default.Shapes.Path({id:i,context:{path:n}}),p.sprite.addChild(a)),a.context.fillStyle=t.fillStyle,p.label.enabled){var r="progress_label_"+t.field+"_sprite_"+e,o=p.sprite.getChildById(r);o||(o=new g.default.Display.Sprite({id:r}),p.sprite.addChild(o)),o.context.x=p.label.offsetX-6,o.context.y=p.label.offsetY;var l={fillStyle:p.label.fontColor||t.fillStyle,fontSize:p.label.fontSize,lineWidth:p.label.lineWidth,strokeStyle:p.label.strokeStyle,textAlign:p.label.textAlign,textBaseline:p.label.verticalAlign,rotation:p.label.rotation},s="progress_label_"+t.field+"_"+e,u=o.getChildById(s);u?(u.resetText(t.text),v.extend(u.context,l)):(u=new g.default.Display.Text(t.text,{id:s,context:l}),o.addChild(u));var h="progress_label_"+t.field+"_symbol_"+e,d=o.getChildById(h),f={x:u.getTextWidth()/2+2,y:3,fillStyle:p.label.unitColor||p.label.fontColor||t.fillStyle,fontSize:p.label.unitFontSize,textAlign:"left",textBaseline:p.label.verticalAlign};if(d)v.extend(d.context,f);else{var c=p.label.unit;d=new g.default.Display.Text(c,{id:h,context:f}),o.addChild(d)}}})})}},{key:"_getPathStr",value:function(t){var e="M"+t.startOutPoint.x+" "+t.startOutPoint.y;return e+="A"+t.outRadius+" "+t.outRadius+" 0 0 1 "+t.middleOutPoint.x+" "+t.middleOutPoint.y,e+="A"+t.outRadius+" "+t.outRadius+" 0 0 1 "+t.endOutPoint.x+" "+t.endOutPoint.y,t.allAngle,e+="L"+t.endInnerPoint.x+" "+t.endInnerPoint.y,e+="A"+t.innerRadius+" "+t.innerRadius+" 0 0 0 "+t.middleInnerPoint.x+" "+t.middleInnerPoint.y,(e+="A"+t.innerRadius+" "+t.innerRadius+" 0 0 0 "+t.startInnerPoint.x+" "+t.startInnerPoint.y)+"Z"}},{key:"_getStyle",value:function(t,e,n){var i,a=this.app.getComponent({name:"coord"}).getFieldMapOf(t.field);return n=n||(a?a.color:"#171717"),e&&(v.isString(e)&&(i=e),v.isArray(e)&&(i=e[t.iNode]),v.isFunction(e)&&(i=e.apply(this,arguments)),e&&e.lineargradient&&(i=this.ctx.createLinearGradient(t.startOutPoint.x,t.startOutPoint.y,t.endOutPoint.x,t.endOutPoint.y),v.each(e.lineargradient,function(t){i.addColorStop(t.position,t.color)}))),i=i||n}}]),d);function d(t,e){var n;return(0,i.default)(this,d),(n=(0,a.default)(this,(0,r.default)(d).call(this,t,e))).type="progress",v.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(d.defaultProps()),t),n.bgNodeData=null,n.init(),n}u.default.registerComponent(h,"graphs","progress");var f=h;e.default=f}));function Pn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var On=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkDataIsJson=r,e.jsonToArrayForRelation=function(t,e,n){c=n;var l=[],s=new WeakMap,u=e.field||a,h=e.node&&e.node.content&&e.node.content.field;if(!r(t,u,c))return console.error("该数据不能正确绘制，请提供数组对象形式的数据！"),l;var d=[],f=0;function i(){var e=d.pop();e[u]||(e[u]=f);var t=e[c];t&&(Ce._.each(t,function(t){s.set(t,{parentIndex:f,parentNode:e})}),d=d.concat(t.reverse()));var n={};Ce._.each(e,function(t,e){e!==c&&(n[e]=t)}),l.push(n);var i=s.get(e);if(i){var a=i.parentIndex,r=i.parentNode,o={};o.key=[a,f].join(","),h&&(o[h]=[r[h],e[h]].join("_")),l.push(o)}f++}for(Ce._.each(t,function(t){d.push(t)});d.length;)i();return l},e.arrayToTreeJsonForRelation=function(t,n){var r={},o={};Ce._.each(t,function(t){var e=t[n.field];1==e.split(",").length?r[e]=t:o[e]=t});var e=[];return Ce._.each(r,function(t,n){var i=!0;Ce._.each(o,function(t,e){if(e.split(",")[1]==n)return i=!1}),i&&(e.push(t),t.__inRelation=!0)}),function t(e){Ce._.each(e,function(i){if(!i.__cycle){var a=i[n.field];Ce._.each(o,function(t,e){if(e.split(",")[0]==a){var n=r[e.split(",")[1]];n&&(i.children||(i.children=[]),i.children.push(n),n.__inRelation&&(n.__cycle=!0))}}),i.children&&i.children.length&&t(i.children)}})}(e),e};var a="__key__",c="children";function r(t,e,n){return c=n,!!Ce._.isArray(t)&&(Ce._.every(t,function(t){return Ce._.isObject(t)})&&Ce._.every(t,function(t){return!Ce._.isArray(t[e])}),Ce._.some(t,function(t){return c in t}))}});t(On),On.checkDataIsJson,On.jsonToArrayForRelation,On.arrayToTreeJsonForRelation;var Tn=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function a(t){var e=0<arguments.length&&void 0!==t?t:0;return Math.floor((e-d)*h+n)}function r(t){var e=0<arguments.length&&void 0!==t?t:0;return Math.floor((e-f)*h+i)}function o(t){var e=0<arguments.length&&void 0!==t?t:0;return Math.floor(1/h*(e-n)+d)}function l(t){var e=0<arguments.length&&void 0!==t?t:0;return Math.floor(1/h*(e-i)+f)}function s(t){u.x=t.x,u.y=t.y;var e=u.rx,n=u.ry;return u.rx=o(u.x),u.ry=l(u.y),{xx:e,yy:n}}var u={x:0,y:0,rx:0,ry:0},h=1,d=0,f=0,n=0,i=0;this.wheel=function(t,e){return s(e),d=u.rx,f=u.ry,n=u.x,i=u.y,{scale:h=t.deltaY<0?Math.min(5,1.1*h):Math.max(.1,h*(1/1.1)),x:a(),y:r()}},this.drag=function(t){var e=s(t),n=e.xx,i=e.yy;return d-=u.rx-n,f-=u.ry-i,u.rx=o(u.x),u.ry=l(u.y),{scale:h,x:a(),y:r()}},this.mouseMoveTo=s,this.getZoomedPoint=function(t){var e=0<arguments.length&&void 0!==t?t:{x:0,y:0};return{x:a(e.x),y:r(e.y)}}}});t(Tn),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(Pn),a=H(ze),r=H(Ue),o=H(qe),l=H(Ve),s=H(Ge),u=H($e),h=H(Ce),d=H(ln),f=H(We),c=H(Xe),p=H(Tn),g=h.default._,v=h.default.event,y=h.default.Shapes.Rect,x=h.default.Shapes.Path,_=h.default.Shapes.Circle,m=h.default.Shapes.Arrow,b=(n=d.default,(0,u.default)(w,n),(0,s.default)(w,null,[{key:"defaultProps",value:function(){return{field:{detail:"key字段设置",documentation:"",default:null},childrenField:{detail:"树结构数据的关联字段",documentation:"如果是树结构的关联数据，不是行列式，那么就通过这个字段来建立父子关系",default:"children"},rankdir:{detail:"布局方向",default:null},node:{detail:"单个节点的配置",propertys:{shapeType:{detail:"节点图形，目前只支持rect",default:"rect"},maxWidth:{detail:"节点最大的width",default:200},width:{detail:"内容的width",default:null},height:{detail:"内容的height",default:null},radius:{detail:"圆角角度",default:6},fillStyle:{detail:"节点背景色",default:"#ffffff"},strokeStyle:{detail:"描边颜色",default:"#e5e5e5"},padding:{detail:"node节点容器到内容的边距",default:10},content:{detail:"节点内容配置",propertys:{field:{detail:"内容字段",documentation:"默认content字段",default:"content"},fontColor:{detail:"内容文本颜色",default:"#666"},format:{detail:"内容格式化处理函数",default:null},textAlign:{detail:"textAlign",default:"center"},textBaseline:{detail:"textBaseline",default:"middle"}}}}},line:{detail:"两个节点连线配置",propertys:{isTree:{detail:"是否树结构的连线",documentation:"非树结构启用该配置可能会有意想不到的惊喜，慎用",default:!1},inflectionRadius:{detail:"树状连线的拐点圆角半径",default:0},shapeType:{detail:"连线的图形样式 brokenLine or bezier",default:"bezier"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"连线的颜色",default:"#e5e5e5"},lineType:{detail:"连线样式（虚线等）",default:"solid"},arrow:{detail:"是否有箭头",default:!0}}},layout:{detail:"采用的布局引擎,比如dagre",default:"dagre"},layoutOpts:{detail:"布局引擎对应的配置,dagre详见dagre的官方wiki",propertys:{}},status:{detail:"一些开关配置",propertys:{transform:{detail:"是否启动拖拽缩放整个画布",propertys:{fitView:{detail:"自动缩放",default:""},enabled:{detail:"是否开启",default:!0},scale:{detail:"缩放值",default:1},scaleOrigin:{detail:"缩放原点",default:{x:0,y:0}}}}}}}}}]),(0,s.default)(w,[{key:"init",value:function(){this._initInduce(),this.nodesSp=new h.default.Display.Sprite({id:"nodesSp"}),this.edgesSp=new h.default.Display.Sprite({id:"edgesSp"}),this.graphsSp=new h.default.Display.Sprite({id:"graphsSp"}),this.graphsView=new h.default.Display.Sprite({id:"graphsView"}),this.graphsSp.addChild(this.edgesSp),this.graphsSp.addChild(this.nodesSp),this.graphsView.addChild(this.graphsSp),this.sprite.addChild(this.graphsView),this.zoom=new p.default}},{key:"_initInduce",value:function(){var o=this;this.induce=new y({id:"induce",context:{width:0,height:0,fillStyle:"#000000",globalAlpha:0}}),this.sprite.addChild(this.induce);var i=!1,l=o.app.canvax.domView.style.cursor,s=null,u=0;this.induce.on(v.types.get(),function(a){if(o.status.transform.enabled){a.preventDefault();var r=a.target.localToGlobal(a.point,o.sprite);if("mousedown"==a.type&&(o.induce.toFront(),i=!0,o.app.canvax.domView.style.cursor="move",o.zoom.mouseMoveTo(r)),"mouseup"!=a.type&&"mouseout"!=a.type||(o.induce.toBack(),i=!1,o.app.canvax.domView.style.cursor=l),"mousemove"==a.type&&i){var t=o.zoom.drag(r),e=t.x,n=t.y;o.graphsView.context.x=e,o.graphsView.context.y=n}"wheel"==a.type&&(Math.abs(a.deltaY)>Math.abs(u)&&(u=a.deltaY),s=s||setTimeout(function(){var t=o.zoom.wheel(a,r),e=t.scale,n=t.x,i=t.y;o.graphsView.context.x=n,o.graphsView.context.y=i,o.graphsView.context.scaleX=e,o.graphsView.context.scaleY=e,o.status.transform.scale=e,s=null,u=0},32))}})}},{key:"scale",value:function(){}},{key:"draw",value:function(t){t=t||{},g.extend(!0,this,t),this.data=t.data||this._initData(),this._layoutData(),this.widget(),this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y;var e=(this.width-this.data.size.width)/2;e<0&&(e=0),this.graphsSp.context.x=e}},{key:"_initData",value:function(){var t={nodes:[],edges:[],size:{width:0,height:0}},e=this.app._data;(0,On.checkDataIsJson)(e,this.field,this.childrenField)?(this.jsonData=(0,On.jsonToArrayForRelation)(e,this,this.childrenField),this.dataFrame=this.app.dataFrame=(0,c.default)(this.jsonData)):"tree"==this.layout&&(this.jsonData=(0,On.arrayToTreeJsonForRelation)(this.app.dataFrame.jsonOrg,this));for(var n={},i=0;i<this.dataFrame.length;i++){var a=this.dataFrame.getRowDataAt(i),r=g.flatten([(a[this.field]+"").split(",")]),o=this._getContent(a),l={type:"relation",iNode:i,rowData:a,key:1==r.length?r[0]:r,content:o,ctype:this._checkHtml(o)?"html":"canvas",element:null,width:null,height:null,x:null,y:null,shapeType:null,source:null,target:null};g.extend(l,this._getElementAndSize(l)),1==r.length?(l.shapeType=this.getProp(this.node.shapeType,l),t.nodes.push(l),Object.assign(l,this.layoutOpts.node),n[l.key]=l):(l.shapeType=this.getProp(this.line.shapeType,l),Object.assign(l,this.layoutOpts.edge),t.edges.push(l))}return g.each(t.edges,function(t){var e=t.key;t.source=n[e[0]],t.target=n[e[1]]}),t}},{key:"_layoutData",value:function(){"dagre"==this.layout?this._dagreLayout(this.data):"tree"==this.layout?this._treeLayout(this.data):g.isFunction(this.layout)&&this.layout(this.data)}},{key:"_dagreLayout",value:function(t){var e=f.default.layout.dagre,n=new e.graphlib.Graph;return n.setGraph(this.layoutOpts.graph),n.setDefaultEdgeLabel(function(){return{}}),g.each(t.nodes,function(t){n.setNode(t.key,t)}),g.each(t.edges,function(t){n.setEdge.apply(n,(0,i.default)(t.key).concat([t]))}),e.layout(n),t.size.width=n.graph().width,t.size.height=n.graph().height,t}},{key:"_treeLayout",value:function(){}},{key:"widget",value:function(){var s=this;g.each(this.data.edges,function(t){s.line.isTree&&3==t.points.length&&s._setTreePoints(t);var e=s.getProp(s.line.lineWidth,t),n=s.getProp(s.line.strokeStyle,t);t.content;var i=new x({context:{path:s._getPathStr(t,s.line.inflectionRadius),lineWidth:e,strokeStyle:n}}),a=t.points.slice(-2,-1)[0];"bezier"==s.line.shapeType&&("TB"!=s.rankdir&&"BT"!=s.rankdir||(a.x+=(t.source.x-t.target.x)/20),"LR"!=s.rankdir&&"RL"!=s.rankdir||(a.y+=(t.source.y-t.target.y)/20)),s.edgesSp.addChild(i);var r=new _({context:{r:2,x:t.x,y:t.y,fillStyle:"red"}}),o=new h.default.Display.Text(t.content,{context:{x:t.x,y:t.y,fontSize:12,fillStyle:"#ccc",textAlign:s.getProp(s.node.content.textAlign,t),textBaseline:s.getProp(s.node.content.textBaseline,t)}});if(s.edgesSp.addChild(r),s.edgesSp.addChild(o),s.line.arrow){var l=new m({context:{control:a,point:t.points.slice(-1)[0],strokeStyle:n}});s.edgesSp.addChild(l)}}),g.each(this.data.nodes,function(e){var n=new y({context:{x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height,lineWidth:1,fillStyle:s.getProp(s.node.fillStyle,e),strokeStyle:s.getProp(s.node.strokeStyle,e),radius:g.flatten([s.getProp(s.node.radius,e)])}});n.nodeData=e,s.nodesSp.addChild(n),n.on(v.types.get(),function(t){t.eventInfo={trigger:s.node,nodes:[this.nodeData]},s.app.fire(t.type,t)}),"canvas"==e.ctype&&(e.element.context.x=e.x-e.width/2,e.element.context.y=e.y-e.height/2,s.nodesSp.addChild(e.element)),"html"==e.ctype&&n.on("transform",function(){var t="undefined"!=typeof window?window.devicePixelRatio:1;e.element.style.transform="matrix("+n.worldTransform.clone().scale(1/t,1/t).toArray().join()+")",e.element.style.transformOrigin="left top",e.element.style.marginLeft=s.getProp(s.node.padding,e)*s.status.transform.scale+"px",e.element.style.marginTop=s.getProp(s.node.padding,e)*s.status.transform.scale+"px",e.element.style.visibility="visible"})}),this.induce.context.width=this.width,this.induce.context.height=this.height}},{key:"_setTreePoints",value:function(t){var e=t.points;"TB"!=this.rankdir&&"BT"!=this.rankdir||(e[0]={x:t.source.x,y:t.source.y+("BT"==this.rankdir?-1:1)*t.source.height/2},e.splice(1,0,{x:t.source.x,y:e.slice(-2,-1)[0].y})),"LR"!=this.rankdir&&"RL"!=this.rankdir||(e[0]={x:t.source.x+("RL"==this.rankdir?-1:1)*t.source.width/2,y:t.source.y},e.splice(1,0,{x:e.slice(-2,-1)[0].x,y:t.source.y})),t.points=e}},{key:"_getPathStr",value:function(t,h){var d=t.points,e=d[0],n=d.slice(-1)[0],f="M"+e.x+" "+e.y;return"bezier"==t.shapeType&&(3==d.length&&(f+=",Q"+d[1].x+" "+d[1].y+" "+n.x+" "+n.y),4==d.length&&(f+=",C"+d[1].x+" "+d[1].y+" "+d[2].x+" "+d[2].y+" "+n.x+" "+n.y)),"brokenLine"==t.shapeType&&g.each(d,function(n,t){if(t)if(h&&t<d.length-1){var e=d[t-1],i=d[t+1],a=h,r=Math.max(Math.abs(e.x-n.x)/2,Math.abs(e.y-n.y)/2),o=Math.max(Math.abs(i.x-n.x)/2,Math.abs(i.y-n.y)/2);if(a=g.min([a,r,o]),n.x==e.x&&n.y==e.y||n.x==i.x&&n.y==i.y||Math.atan2(n.y-e.y,n.x-e.x)==Math.atan2(i.y-n.y,i.x-n.x))return;var l=function(t){var e=Math.atan2(t.y-n.y,t.x-n.x);return{x:n.x+a*Math.cos(e),y:n.y+a*Math.sin(e)}},s=l(e),u=l(i);f+=",L"+s.x+" "+s.y+",Q"+n.x+" "+n.y+" "+u.x+" "+u.y}else f+=",L"+n.x+" "+n.y}),f}},{key:"_checkHtml",value:function(t){return/<[^>]+>/g.test(t)}},{key:"_getContent",value:function(t){var e;return this._isField(this.node.content.field)&&(e=t[this.node.content.field]),this.node.content.format&&g.isFunction(this.node.content.format)&&(e=this.node.content.format.apply(this,[e,t])),e}},{key:"_isField",value:function(t){return~this.dataFrame.fields.indexOf(t)}},{key:"_getElementAndSize",value:function(t){var e=t.ctype;return this._isField(e)&&(e=t.rowData[e]),"canvas"==(e=e||"canvas")?this._getEleAndsetCanvasSize(t):"html"==e?this._getEleAndsetHtmlSize(t):void 0}},{key:"_getEleAndsetCanvasSize",value:function(t){var e=this,n=t.content,i=t.rowData.width,a=t.rowData.height,r=new h.default.Display.Sprite({}),o=new h.default.Display.Text(n,{context:{fillStyle:e.getProp(e.node.content.fontColor,t),textAlign:e.getProp(e.node.content.textAlign,t),textBaseline:e.getProp(e.node.content.textBaseline,t)}});return i=i||o.getTextWidth()+e.getProp(e.node.padding,t)*e.status.transform.scale*2,a=a||o.getTextHeight()+e.getProp(e.node.padding,t)*e.status.transform.scale*2,r.addChild(o),r.context.width=parseInt(i),r.context.height=parseInt(a),o.context.x=parseInt(i/2),o.context.y=parseInt(a/2),{element:r,width:i,height:a}}},{key:"_getEleAndsetHtmlSize",value:function(t){var e=this,n=t.content,i=t.rowData.width,a=t.rowData.height,r=document.createElement("div");return r.className="chartx_relation_node",r.style.cssText+="; position:absolute;visibility:hidden;",r.style.cssText+="; color:"+e.getProp(e.node.content.fontColor,t)+";",r.style.cssText+="; text-align:"+e.getProp(e.node.content.textAlign,t)+";",r.style.cssText+="; vertical-align:"+e.getProp(e.node.content.textBaseline,t)+";",r.innerHTML=n,this.domContainer.appendChild(r),{element:r,width:i=i||r.offsetWidth+e.getProp(e.node.padding,t)*e.status.transform.scale*2,height:a=a||r.offsetHeight+e.getProp(e.node.padding,t)*e.status.transform.scale*2}}},{key:"getNodesAt",value:function(){}},{key:"getProp",value:function(t,e){var n=t;return this._isField(t)?n=e.rowData[t]:(g.isArray(t)&&(n=t[e.iNode]),g.isFunction(t)&&(n=t.apply(this,[e]))),n}}]),w);function w(t,e){var n;if((0,a.default)(this,w),(n=(0,r.default)(this,(0,o.default)(w).call(this,t,e))).type="relation",g.extend(!0,(0,l.default)(n),(0,Ke.getDefaultProps)(w.defaultProps()),t),"dagre"===n.layout){var i={graph:{rankdir:"TB",nodesep:10,ranksep:10,edgesep:10,acyclicer:"greedy"},node:{},edge:{}};g.extend(!0,i,n.layoutOpts),g.extend(!0,n.layoutOpts,i),n.rankdir?n.layoutOpts.graph.rankdir=n.rankdir:n.rankdir=n.layoutOpts.graph.rankdir}return n.domContainer=e.canvax.domView,n.induce=null,n.init(),n}d.default.registerComponent(b,"graphs","relation");var k=b;e.default=k}));var Mn=e(function(t){function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==He(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var r=i?Object.getOwnPropertyDescriptor(t,a):null;r&&(r.get||r.set)?Object.defineProperty(n,a,r):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}});t(Mn);var In=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.forceCenter=function(r,o){var l;function e(){var t,e,n=l.length,i=0,a=0;for(t=0;t<n;++t)i+=(e=l[t]).x,a+=e.y;for(i=i/n-r,a=a/n-o,t=0;t<n;++t)(e=l[t]).x-=i,e.y-=a}return null==r&&(r=0),null==o&&(o=0),e.initialize=function(t){l=t},e.x=function(t){return arguments.length?(r=+t,e):r},e.y=function(t){return arguments.length?(o=+t,e):o},e},e.forceCollide=function(i){var r,o,v=1,l=1;function e(){for(var t,e,d,f,c,p,g,n=r.length,i=0;i<l;++i)for(e=y(r,u,m).visitAfter(s),t=0;t<n;++t)d=r[t],p=o[d.index],g=p*p,f=d.x+d.vx,c=d.y+d.vy,e.visit(a);function a(t,e,n,i,a){var r=t.data,o=t.r,l=p+o;if(!r)return f+l<e||i<f-l||c+l<n||a<c-l;if(r.index>d.index){var s=f-r.x-r.vx,u=c-r.y-r.vy,h=s*s+u*u;h<l*l&&(0===s&&(h+=(s=_())*s),0===u&&(h+=(u=_())*u),h=(l-(h=Math.sqrt(h)))/h*v,d.vx+=(s*=h)*(l=(o*=o)/(g+o)),d.vy+=(u*=h)*l,r.vx-=s*(l=1-l),r.vy-=u*l)}}}function s(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(r){var t,e,n=r.length;for(o=new Array(n),t=0;t<n;++t)e=r[t],o[e.index]=+i(e,t,r)}}return"function"!=typeof i&&(i=x(null==i?1:+i)),e.initialize=function(t){r=t,n()},e.iterations=function(t){return arguments.length?(l=+t,e):l},e.strength=function(t){return arguments.length?(v=+t,e):v},e.radius=function(t){return arguments.length?(i="function"==typeof t?t:x(+t),n(),e):i},e},e.forceLink=function(d){var f,c,r,o,p,l=v,n=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},i=x(30),g=1;function e(t){for(var e=0,n=d.length;e<g;++e)for(var i,a,r,o,l,s,u,h=0;h<n;++h)a=(i=d[h]).source,o=(r=i.target).x+r.vx-a.x-a.vx||_(),l=r.y+r.vy-a.y-a.vy||_(),o*=s=((s=Math.sqrt(o*o+l*l))-c[h])/s*t*f[h],l*=s,r.vx-=o*(u=p[h]),r.vy-=l*u,a.vx+=o*(u=1-u),a.vy+=l*u}function a(){if(r){var t,e,n=r.length,i=d.length,a=new Map(r.map(function(t,e){return[l(t,e,r),t]}));for(t=0,o=new Array(n);t<i;++t)(e=d[t]).index=t,"object"!==(0,h.default)(e.source)&&(e.source=b(a,e.source)),"object"!==(0,h.default)(e.target)&&(e.target=b(a,e.target)),o[e.source.index]=(o[e.source.index]||0)+1,o[e.target.index]=(o[e.target.index]||0)+1;for(t=0,p=new Array(i);t<i;++t)e=d[t],p[t]=o[e.source.index]/(o[e.source.index]+o[e.target.index]);f=new Array(i),s(),c=new Array(i),u()}}function s(){if(r)for(var t=0,e=d.length;t<e;++t)f[t]=+n(d[t],t,d)}function u(){if(r)for(var t=0,e=d.length;t<e;++t)c[t]=+i(d[t],t,d)}return null==d&&(d=[]),e.initialize=function(t){r=t,a()},e.links=function(t){return arguments.length?(d=t,a(),e):d},e.id=function(t){return arguments.length?(l=t,e):l},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:x(+t),s(),e):n},e.distance=function(t){return arguments.length?(i="function"==typeof t?t:x(+t),u(),e):i},e},e.forceManyBody=function(){var a,s,u,h,i=x(-30),d=1,f=1/0,c=.81;function e(t){var e,n=a.length,i=y(a,z,B).visitAfter(r);for(u=t,e=0;e<n;++e)s=a[e],i.visit(o)}function n(){if(a){var t,e,n=a.length;for(h=new Array(n),t=0;t<n;++t)e=a[t],h[e.index]=+i(e,t,a)}}function r(t){var e,n,i,a,r,o=0,l=0;if(t.length){for(i=a=r=0;r<4;++r)(e=t[r])&&(n=Math.abs(e.value))&&(o+=e.value,l+=n,i+=n*e.x,a+=n*e.y);t.x=i/l,t.y=a/l}else for((e=t).x=e.data.x,e.y=e.data.y;o+=h[e.data.index],e=e.next;);t.value=o}function o(t,e,n,i){if(!t.value)return!0;var a=t.x-s.x,r=t.y-s.y,o=i-e,l=a*a+r*r;if(o*o/c<l)return l<f&&(0===a&&(l+=(a=_())*a),0===r&&(l+=(r=_())*r),l<d&&(l=Math.sqrt(d*l)),s.vx+=a*t.value*u/l,s.vy+=r*t.value*u/l),!0;if(!(t.length||f<=l))for(t.data===s&&!t.next||(0===a&&(l+=(a=_())*a),0===r&&(l+=(r=_())*r),l<d&&(l=Math.sqrt(d*l)));t.data!==s&&(o=h[t.data.index]*u/l,s.vx+=a*o,s.vy+=r*o),t=t.next;);}return e.initialize=function(t){a=t,n()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:x(+t),n(),e):i},e.distanceMin=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e.distanceMax=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.theta=function(t){return arguments.length?(c=t*t,e):Math.sqrt(c)},e},e.forceRadial=function(n,s,u){var h,d,f,i=x(.1);function e(t){for(var e=0,n=h.length;e<n;++e){var i=h[e],a=i.x-s||1e-6,r=i.y-u||1e-6,o=Math.sqrt(a*a+r*r),l=(f[e]-o)*d[e]*t/o;i.vx+=a*l,i.vy+=r*l}}function a(){if(h){var t,e=h.length;for(d=new Array(e),f=new Array(e),t=0;t<e;++t)f[t]=+n(h[t],t,h),d[t]=isNaN(f[t])?0:+i(h[t],t,h)}}return"function"!=typeof n&&(n=x(+n)),null==s&&(s=0),null==u&&(u=0),e.initialize=function(t){h=t,a()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:x(+t),a(),e):i},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:x(+t),a(),e):n},e.x=function(t){return arguments.length?(s=+t,e):s},e.y=function(t){return arguments.length?(u=+t,e):u},e},e.forceSimulation=function(h){var r,o=1,e=.001,l=1-Math.pow(e,1/300),s=0,u=.6,d=new Map,t=R(i),n=p("tick","end");function i(){a(),n.call("tick",r),o<e&&(t.stop(),n.call("end",r))}function a(t){var e,n,i=h.length;void 0===t&&(t=1);for(var a=0;a<t;++a)for(o+=(s-o)*l,d.forEach(function(t){t(o)}),e=0;e<i;++e)null==(n=h[e]).fx?n.x+=n.vx*=u:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=u:(n.y=n.fy,n.vy=0);return r}function f(){for(var t,e=0,n=h.length;e<n;++e){if((t=h[e]).index=e,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=G*Math.sqrt(e),a=e*V;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function c(t){return t.initialize&&t.initialize(h),t}return null==h&&(h=[]),f(),r={tick:a,restart:function(){return t.restart(i),r},stop:function(){return t.stop(),r},nodes:function(t){return arguments.length?(h=t,f(),d.forEach(c),r):h},alpha:function(t){return arguments.length?(o=+t,r):o},alphaMin:function(t){return arguments.length?(e=+t,r):e},alphaDecay:function(t){return arguments.length?(l=+t,r):+l},alphaTarget:function(t){return arguments.length?(s=+t,r):s},velocityDecay:function(t){return arguments.length?(u=1-t,r):1-u},force:function(t,e){return 1<arguments.length?(null==e?d.delete(t):d.set(t,c(e)),r):d.get(t)},find:function(t,e,n){var i,a,r,o,l,s=0,u=h.length;for(null==n?n=1/0:n*=n,s=0;s<u;++s)(r=(i=t-(o=h[s]).x)*i+(a=e-o.y)*a)<n&&(l=o,n=r);return l},on:function(t,e){return 1<arguments.length?(n.on(t,e),r):n.on(t)}}},e.forceX=function(n){var a,r,o,i=x(.1);function e(t){for(var e,n=0,i=a.length;n<i;++n)(e=a[n]).vx+=(o[n]-e.x)*r[n]*t}function l(){if(a){var t,e=a.length;for(r=new Array(e),o=new Array(e),t=0;t<e;++t)r[t]=isNaN(o[t]=+n(a[t],t,a))?0:+i(a[t],t,a)}}return"function"!=typeof n&&(n=x(null==n?0:+n)),e.initialize=function(t){a=t,l()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:x(+t),l(),e):i},e.x=function(t){return arguments.length?(n="function"==typeof t?t:x(+t),l(),e):n},e},e.forceY=function(n){var a,r,o,i=x(.1);function e(t){for(var e,n=0,i=a.length;n<i;++n)(e=a[n]).vy+=(o[n]-e.y)*r[n]*t}function l(){if(a){var t,e=a.length;for(r=new Array(e),o=new Array(e),t=0;t<e;++t)r[t]=isNaN(o[t]=+n(a[t],t,a))?0:+i(a[t],t,a)}}return"function"!=typeof n&&(n=x(null==n?0:+n)),e.initialize=function(t){a=t,l()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:x(+t),l(),e):i},e.y=function(t){return arguments.length?(n="function"==typeof t?t:x(+t),l(),e):n},e};var h=H(He);function f(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,r,o,l,s,u,h,d,f,c=t._root,p={data:i},g=t._x0,v=t._y0,y=t._x1,x=t._y1;if(!c)return t._root=p,t;for(;c.length;)if((u=e>=(r=(g+y)/2))?g=r:y=r,(h=n>=(o=(v+x)/2))?v=o:x=o,!(c=(a=c)[d=h<<1|u]))return a[d]=p,t;if(l=+t._x.call(null,c.data),s=+t._y.call(null,c.data),e===l&&n===s)return p.next=c,a?a[d]=p:t._root=p,t;for(;a=a?a[d]=new Array(4):t._root=new Array(4),(u=e>=(r=(g+y)/2))?g=r:y=r,(h=n>=(o=(v+x)/2))?v=o:x=o,(d=h<<1|u)==(f=(o<=s)<<1|r<=l););return a[f]=c,a[d]=p,t}function w(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function a(t){return t[0]}function r(t){return t[1]}function y(t,e,n){var i=new o(null==e?a:e,null==n?r:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function o(t,e,n,i,a,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=r,this._root=void 0}function l(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var n=y.prototype=o.prototype;function x(t){return function(){return t}}function _(){return 1e-6*(Math.random()-.5)}function u(t){return t.x+t.vx}function m(t){return t.y+t.vy}function v(t){return t.index}function b(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}n.copy=function(){var t,e,n=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=l(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var a=0;a<4;++a)(e=i.source[a])&&(e.length?t.push({source:e,target:i.target[a]=new Array(4)}):i.target[a]=l(e));return n},n.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return f(this.cover(e,n),e,n,t)},n.addAll=function(t){var e,n,i,a,r=t.length,o=new Array(r),l=new Array(r),s=1/0,u=1/0,h=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||((o[n]=i)<s&&(s=i),h<i&&(h=i),(l[n]=a)<u&&(u=a),d<a&&(d=a));if(h<s||d<u)return this;for(this.cover(s,u).cover(h,d),n=0;n<r;++n)f(this,o[n],l[n],t[n]);return this},n.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,r=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{for(var o,l,s=a-n,u=this._root;t<n||a<=t||e<i||r<=e;)switch(l=(e<i)<<1|t<n,(o=new Array(4))[l]=u,u=o,s*=2,l){case 0:a=n+s,r=i+s;break;case 1:n=a-s,r=i+s;break;case 2:a=n+s,i=r-s;break;case 3:n=a-s,i=r-s}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=a,this._y1=r,this},n.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},n.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(t,e,n){var i,a,r,o,l,s,u,h=this._x0,d=this._y0,f=this._x1,c=this._y1,p=[],g=this._root;for(g&&p.push(new w(g,h,d,f,c)),null==n?n=1/0:(h=t-n,d=e-n,f=t+n,c=e+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(a=s.x0)>f||(r=s.y0)>c||(o=s.x1)<h||(l=s.y1)<d))if(g.length){var v=(a+o)/2,y=(r+l)/2;p.push(new w(g[3],v,y,o,l),new w(g[2],a,y,v,l),new w(g[1],v,r,o,y),new w(g[0],a,r,v,y)),(u=(y<=e)<<1|v<=t)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=s)}else{var x=t-this._x.call(null,g.data),_=e-this._y.call(null,g.data),m=x*x+_*_;if(m<n){var b=Math.sqrt(n=m);h=t-b,d=e-b,f=t+b,c=e+b,i=g.data}}return i},n.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,a,r,o,l,s,u,h,d,f,c=this._root,p=this._x0,g=this._y0,v=this._x1,y=this._y1;if(!c)return this;if(c.length)for(;;){if((u=r>=(l=(p+v)/2))?p=l:v=l,(h=o>=(s=(g+y)/2))?g=s:y=s,!(c=(e=c)[d=h<<1|u]))return this;if(!c.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,f=d)}for(;c.data!==t;)if(!(c=(i=c).next))return this;return(a=c.next)&&delete c.next,i?a?i.next=a:delete i.next:e?(a?e[d]=a:delete e[d],(c=e[0]||e[1]||e[2]||e[3])&&c===(e[3]||e[2]||e[1]||e[0])&&!c.length&&(n?n[f]=c:this._root=c)):this._root=a,this},n.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},n.root=function(){return this._root},n.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},n.visit=function(t){var e,n,i,a,r,o,l=[],s=this._root;for(s&&l.push(new w(s,this._x0,this._y0,this._x1,this._y1));e=l.pop();)if(!t(s=e.node,i=e.x0,a=e.y0,r=e.x1,o=e.y1)&&s.length){var u=(i+r)/2,h=(a+o)/2;(n=s[3])&&l.push(new w(n,u,h,r,o)),(n=s[2])&&l.push(new w(n,i,h,u,o)),(n=s[1])&&l.push(new w(n,u,a,r,h)),(n=s[0])&&l.push(new w(n,i,a,u,h))}return this},n.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new w(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var a=e.node;if(a.length){var r,o=e.x0,l=e.y0,s=e.x1,u=e.y1,h=(o+s)/2,d=(l+u)/2;(r=a[0])&&n.push(new w(r,o,l,h,d)),(r=a[1])&&n.push(new w(r,h,l,s,d)),(r=a[2])&&n.push(new w(r,o,d,h,u)),(r=a[3])&&n.push(new w(r,h,d,s,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},n.x=function(t){return arguments.length?(this._x=t,this):this._x},n.y=function(t){return arguments.length?(this._y=t,this):this._y};var s={value:function(){}};function p(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new d(i)}function d(t){this._=t}function c(t,e){for(var n,i=0,a=t.length;i<a;++i)if((n=t[i]).name===e)return n.value}function g(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=s,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}d.prototype=p.prototype={constructor:d,on:function(t,e){var n,i,a=this._,r=(i=a,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,l=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<l;)if(n=(t=r[o]).type)a[n]=g(a[n],t.name,e);else if(null==e)for(n in a)a[n]=g(a[n],t.name,null);return this}for(;++o<l;)if((n=(t=r[o]).type)&&(n=c(a[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new d(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,i,a=new Array(n),r=0;r<n;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(i=this._[t]).length;r<n;++r)i[r].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,r=i.length;a<r;++a)i[a].value.apply(e,n)}};var k,S,i=0,A=0,C=0,P=1e3,O=0,T=0,M=0,I="object"===("undefined"==typeof performance?"undefined":(0,h.default)(performance))&&performance.now?performance:Date,D="object"===("undefined"==typeof window?"undefined":(0,h.default)(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function L(){return T||(D(E),T=I.now()+M)}function E(){T=0}function F(){this._call=this._time=this._next=null}function R(t,e,n){var i=new F;return i.restart(t,e,n),i}function N(){T=(O=I.now())+M,i=A=0;try{!function(){L(),++i;for(var t,e=k;e;)0<=(t=T-e._time)&&e._call.call(null,t),e=e._next;--i}()}finally{i=0,function(){for(var t,e,n=k,i=1/0;n;)n=n._call?(i>n._time&&(i=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:k=e);S=t,W(i)}(),T=0}}function j(){var t=I.now(),e=t-O;P<e&&(M-=e,O=t)}function W(t){i||(A=A&&clearTimeout(A),24<t-T?(t<1/0&&(A=setTimeout(N,t-I.now()-M)),C=C&&clearInterval(C)):(C||(O=I.now(),C=setInterval(j,P)),i=1,D(N)))}function z(t){return t.x}function B(t){return t.y}F.prototype=R.prototype={constructor:F,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?L():+n)+(null==e?0:+e),this._next||S===this||(S?S._next=this:k=this,S=this),this._call=t,this._time=n,W()},stop:function(){this._call&&(this._call=null,this._time=1/0,W())}};var G=10,V=Math.PI*(3-Math.sqrt(5))});t(In),In.forceCenter,In.forceCollide,In.forceLink,In.forceManyBody,In.forceRadial,In.forceSimulation,In.forceX,In.forceY,t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(ln),d=Mn(In),f=u.default._,c=u.default.Shapes.Circle,p=u.default.Display.Text,g=u.default.Shapes.Line,v=(n=h.default,(0,s.default)(y,n),(0,l.default)(y,null,[{key:"defaultProps",value:function(){return{keyField:{detail:"key字段",default:"key"},valueField:{detail:"value字段",default:"value"},node:{detail:"单个节点的配置",propertys:{shapeType:{detail:"节点图形",default:"circle"},maxWidth:{detail:"节点最大的width",default:200},width:{detail:"内容的width",default:null},height:{detail:"内容的height",default:null},radius:{detail:"圆角角度",default:6},fillStyle:{detail:"节点背景色",default:"#acdf7d"},strokeStyle:{detail:"描边颜色",default:"#e5e5e5"},padding:{detail:"node节点容器到内容的边距",default:10},content:{detail:"节点内容配置",propertys:{field:{detail:"内容字段",documentation:"默认content字段",default:"content"},fontColor:{detail:"内容文本颜色",default:"#666"},format:{detail:"内容格式化处理函数",default:null},textAlign:{detail:"textAlign",default:"center"},textBaseline:{detail:"textBaseline",default:"middle"}}}}},line:{detail:"两个节点连线配置",propertys:{lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"连线的颜色",default:"#e5e5e5"},lineType:{detail:"连线样式（虚线等）",default:"solid"},arrow:{detail:"是否有箭头",default:!0}}},status:{detail:"一些开关配置",propertys:{transform:{detail:"是否启动拖拽缩放整个画布",propertys:{fitView:{detail:"自动缩放",default:""},enabled:{detail:"是否开启",default:!0},scale:{detail:"缩放值",default:1},scaleOrigin:{detail:"缩放原点",default:{x:0,y:0}}}}}}}}}]),(0,l.default)(y,[{key:"init",value:function(){this.nodesSp=new u.default.Display.Sprite({id:"nodesSp"}),this.edgesSp=new u.default.Display.Sprite({id:"edgesSp"}),this.graphsSp=new u.default.Display.Sprite({id:"graphsSp"}),this.graphsSp.addChild(this.edgesSp),this.graphsSp.addChild(this.nodesSp),this.sprite.addChild(this.graphsSp)}},{key:"draw",value:function(t){t=t||{},f.extend(!0,this,t),this.data=t.data||this._initData(),this.widget()}},{key:"_initData",value:function(){for(var t={nodes:[],edges:[],size:{width:this.app.width,height:this.app.height}},n={},e=0;e<this.dataFrame.length;e++){var i=this.dataFrame.getRowDataAt(e),a=f.flatten([(i[this.keyField]+"").split(",")]),r=this._getContent(i),o=1==a.length?a[0]:a,l=new u.default.Display.Sprite({id:"nodeSp_"+o});this.graphsSp.addChild(l);var s={type:"force",iNode:e,rowData:i,key:o,content:r,ctype:this._checkHtml(r)?"html":"canvas",element:l,width:null,height:null,radius:1,x:null,y:null,shapeType:null,source:null,target:null};1==a.length?(s.shapeType=this.getProp(this.node.shapeType,s),t.nodes.push(s),n[s.key]=s):(s.shapeType="line",t.edges.push(s))}return f.each(t.edges,function(t){var e=t.key;t.source=n[e[0]],t.target=n[e[1]]}),t}},{key:"widget",value:function(){var a=this,r=this,e=this.keyField,n=this.valueField,t=this.data.edges.map(function(t){return{source:t.source[e],target:t.target[e],value:t.rowData[n],nodeData:t}}),i=this.data.nodes.map(function(t){var e=Object.create(t);return e.id=t.key,e.nodeData=t,e}),o=this.data.size,l=o.width,s=o.height,u=d.forceSimulation(i).force("link",d.forceLink(t).id(function(t){return t.id})).force("charge",d.forceManyBody()).force("center",d.forceCenter(l/2,s/2)).force("x",d.forceX(l/2).strength(.045)).force("y",d.forceY(s/2).strength(.045));i.forEach(function(t){var e=r.getProp(r.node.fillStyle,t.nodeData),n=r.getProp(r.node.strokeStyle,t.nodeData),i=new c({context:{r:8,fillStyle:e,strokeStyle:n}});t.nodeData.element.addChild(i);var a=new p(t.nodeData.rowData.label,{context:{fontSize:11,fillStyle:"#bfa08b",textBaseline:"middle",textAlign:"center",globalAlpha:.7}});t.nodeData.element.addChild(a)}),t.forEach(function(t){var e=r.getProp(r.line.lineWidth,t.nodeData),n=r.getProp(r.line.strokeStyle,t.nodeData),i=new g({context:{lineWidth:e,strokeStyle:n,start:{x:0,y:0},end:{x:0,y:0},globalAlpha:.4}});a.edgesSp.addChild(i),t.line=i}),u.on("tick",function(){u.alpha()<=.05?u.stop():(i.forEach(function(t){var e=t.nodeData.element.context;e&&(e.x=t.x,e.y=t.y)}),t.forEach(function(t){var e=t.line.context;e&&(e.start.x=t.source.x,e.start.y=t.source.y,e.end.x=t.target.x,e.end.y=t.target.y)}))})}},{key:"_checkHtml",value:function(t){return/<[^>]+>/g.test(t)}},{key:"_getContent",value:function(t){var e;return this._isField(this.node.content.field)&&(e=t[this.node.content.field]),this.node.content.format&&f.isFunction(this.node.content.format)&&(e=this.node.content.format.apply(this,[e,t])),e}},{key:"_isField",value:function(t){return~this.dataFrame.fields.indexOf(t)}},{key:"getNodesAt",value:function(){}},{key:"getProp",value:function(t,e){var n=t;return this._isField(t)&&e.rowData?n=e.rowData[t]:(f.isArray(t)&&(n=t[e.iNode]),f.isFunction(t)&&(n=t.apply(this,[e]))),n}}]),y);function y(t,e){var n;return(0,i.default)(this,y),(n=(0,a.default)(this,(0,r.default)(y).call(this,t,e))).type="force",f.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(y.defaultProps()),t),n.domContainer=e.canvax.domView,n.init(),n}h.default.registerComponent(v,"graphs","force");var x=v;e.default=x}));var Dn=e(function(t,e){var n,f=H(He);n=function(){return function a(r,o,l){function s(e,t){if(!o[e]){if(!r[e]){if(!t&&h)return h();if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[e]={exports:{}};r[e][0].call(i.exports,function(t){return s(r[e][1][t]||t)},i,i.exports,a,r,o,l)}return o[e].exports}for(var u=h,t=0;t<l.length;t++)s(l[t]);return s}({1:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(t,e,n){var l=t("./lodash"),s=t("./greedy-fas");e.exports={run:function(n){var i,a,r,o,e,t="greedy"===n.graph().acyclicer?s(n,(e=n,function(t){return e.edge(t).weight})):(i=n,a=[],r={},o={},l.forEach(i.nodes(),function e(t){l.has(o,t)||(o[t]=!0,r[t]=!0,l.forEach(i.outEdges(t),function(t){l.has(r,t.w)?a.push(t):e(t.w)}),delete r[t])}),a);l.forEach(t,function(t){var e=n.edge(t);n.removeEdge(t),e.forwardName=t.name,e.reversed=!0,n.setEdge(t.w,t.v,e,l.uniqueId("rev"))})},undo:function(i){l.forEach(i.edges(),function(t){var e=i.edge(t);if(e.reversed){i.removeEdge(t);var n=e.forwardName;delete e.reversed,delete e.forwardName,i.setEdge(t.w,t.v,e,n)}})}}},{"./greedy-fas":8,"./lodash":10}],3:[function(t,e,n){var l=t("./lodash"),u=t("./util");function s(t,e,n,i,a,r){var o={width:0,height:0,rank:r,borderType:e},l=a[e][r-1],s=u.addDummyNode(t,"border",o,n);a[e][r]=s,t.setParent(s,i),l&&t.setEdge(l,s,{weight:1})}e.exports=function(o){l.forEach(o.children(),function t(e){var n=o.children(e),i=o.node(e);if(n.length&&l.forEach(n,t),l.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,r=i.maxRank+1;a<r;++a)s(o,"borderLeft","_bl",e,i,a),s(o,"borderRight","_br",e,i,a)}})}},{"./lodash":10,"./util":29}],4:[function(t,e,n){var a=t("./lodash");function r(e){a.forEach(e.nodes(),function(t){i(e.node(t))}),a.forEach(e.edges(),function(t){i(e.edge(t))})}function i(t){var e=t.width;t.width=t.height,t.height=e}function o(t){t.y=-t.y}function l(t){var e=t.x;t.x=t.y,t.y=e}e.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||r(t)},undo:function(t){var n,i,e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||(n=t,a.forEach(n.nodes(),function(t){o(n.node(t))}),a.forEach(n.edges(),function(t){var e=n.edge(t);a.forEach(e.points,o),a.has(e,"y")&&o(e)})),"lr"!==e&&"rl"!==e||(i=t,a.forEach(i.nodes(),function(t){l(i.node(t))}),a.forEach(i.edges(),function(t){var e=i.edge(t);a.forEach(e.points,l),a.has(e,"x")&&l(e)}),r(t))}}},{"./lodash":10}],5:[function(t,e,n){function i(){var t={};t._next=t._prev=t,this._sentinel=t}function a(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}(e.exports=i).prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return a(e),e},i.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&a(t),t._next=e._next,e._next._prev=t,(e._next=t)._prev=e},i.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},{}],6:[function(t,e,n){var a=t("./lodash"),r=t("./util"),o=t("./graphlib").Graph;e.exports={debugOrdering:function(e){var t=r.buildLayerMatrix(e),i=new o({compound:!0,multigraph:!0}).setGraph({});return a.forEach(e.nodes(),function(t){i.setNode(t,{label:t}),i.setParent(t,"layer"+e.node(t).rank)}),a.forEach(e.edges(),function(t){i.setEdge(t.v,t.w,{},t.name)}),a.forEach(t,function(t,e){var n="layer"+e;i.setNode(n,{rank:"same"}),a.reduce(t,function(t,e){return i.setEdge(t,e,{style:"invis"}),e})}),i}}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(t,e,n){var i;if("function"==typeof t)try{i=t("graphlib")}catch(t){}i=i||window.graphlib,e.exports=i},{graphlib:31}],8:[function(t,e,n){var s=t("./lodash"),u=t("./graphlib").Graph,h=t("./data/list");e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(t,a){var r=new u,o=0,l=0;s.forEach(t.nodes(),function(t){r.setNode(t,{v:t,in:0,out:0})}),s.forEach(t.edges(),function(t){var e=r.edge(t.v,t.w)||0,n=a(t),i=e+n;r.setEdge(t.v,t.w,i),l=Math.max(l,r.node(t.v).out+=n),o=Math.max(o,r.node(t.w).in+=n)});var e=s.range(l+o+3).map(function(){return new h}),n=o+1;return s.forEach(r.nodes(),function(t){f(e,n,r.node(t))}),{graph:r,buckets:e,zeroIdx:n}}(e,t||a),i=function(t,e,n){for(var i,a=[],r=e[e.length-1],o=e[0];t.nodeCount();){for(;i=o.dequeue();)d(t,e,n,i);for(;i=r.dequeue();)d(t,e,n,i);if(t.nodeCount())for(var l=e.length-2;0<l;--l)if(i=e[l].dequeue()){a=a.concat(d(t,e,n,i,!0));break}}return a}(n.graph,n.buckets,n.zeroIdx);return s.flatten(s.map(i,function(t){return e.outEdges(t.v,t.w)}),!0)};var a=s.constant(1);function d(a,r,o,t,i){var l=i?[]:void 0;return s.forEach(a.inEdges(t.v),function(t){var e=a.edge(t),n=a.node(t.v);i&&l.push({v:t.v,w:t.w}),n.out-=e,f(r,o,n)}),s.forEach(a.outEdges(t.v),function(t){var e=a.edge(t),n=t.w,i=a.node(n);i.in-=e,f(r,o,i)}),a.removeNode(t.v),l}function f(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(t,e,n){var h=t("./lodash"),i=t("./acyclic"),a=t("./normalize"),o=t("./rank"),l=t("./util").normalizeRanks,s=t("./parent-dummy-chains"),d=t("./util").removeEmptyRanks,f=t("./nesting-graph"),c=t("./add-border-segments"),p=t("./coordinate-system"),g=t("./order"),v=t("./position"),y=t("./util"),u=t("./graphlib").Graph;e.exports=function(r,t){var n=t&&t.debugTiming?y.time:y.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return n=r,i=new u({multigraph:!0,compound:!0}),t=P(n.graph()),i.setGraph(h.merge({},_,C(t,x),h.pick(t,m))),h.forEach(n.nodes(),function(t){var e=P(n.node(t));i.setNode(t,h.defaults(C(e,b),w)),i.setParent(t,n.parent(t))}),h.forEach(n.edges(),function(t){var e=P(n.edge(t));i.setEdge(t,h.merge({},S,C(e,k),h.pick(e,A)))}),i;var n,i,t});n("  runLayout",function(){var u,t;u=e,(t=n)("    makeSpaceForEdgeLabels",function(){var n,i;(i=(n=u).graph()).ranksep/=2,h.forEach(n.edges(),function(t){var e=n.edge(t);e.minlen*=2,"c"!==e.labelpos.toLowerCase()&&("TB"===i.rankdir||"BT"===i.rankdir?e.width+=e.labeloffset:e.height+=e.labeloffset)})}),t("    removeSelfEdges",function(){var n;n=u,h.forEach(n.edges(),function(t){if(t.v===t.w){var e=n.node(t.v);e.selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:n.edge(t)}),n.removeEdge(t)}})}),t("    acyclic",function(){i.run(u)}),t("    nestingGraph.run",function(){f.run(u)}),t("    rank",function(){o(y.asNonCompoundGraph(u))}),t("    injectEdgeLabelProxies",function(){var a;a=u,h.forEach(a.edges(),function(t){var e=a.edge(t);if(e.width&&e.height){var n=a.node(t.v),i={rank:(a.node(t.w).rank-n.rank)/2+n.rank,e:t};y.addDummyNode(a,"edge-proxy",i,"_ep")}})}),t("    removeEmptyRanks",function(){d(u)}),t("    nestingGraph.cleanup",function(){f.cleanup(u)}),t("    normalizeRanks",function(){l(u)}),t("    assignRankMinMax",function(){var n,i;n=u,i=0,h.forEach(n.nodes(),function(t){var e=n.node(t);e.borderTop&&(e.minRank=n.node(e.borderTop).rank,e.maxRank=n.node(e.borderBottom).rank,i=h.max(i,e.maxRank))}),n.graph().maxRank=i}),t("    removeEdgeLabelProxies",function(){var n;n=u,h.forEach(n.nodes(),function(t){var e=n.node(t);"edge-proxy"===e.dummy&&(n.edge(e.e).labelRank=e.rank,n.removeNode(t))})}),t("    normalize.run",function(){a.run(u)}),t("    parentDummyChains",function(){s(u)}),t("    addBorderSegments",function(){c(u)}),t("    order",function(){g(u)}),t("    insertSelfEdges",function(){var a,t;a=u,t=y.buildLayerMatrix(a),h.forEach(t,function(t){var i=0;h.forEach(t,function(t,e){var n=a.node(t);n.order=e+i,h.forEach(n.selfEdges,function(t){y.addDummyNode(a,"selfedge",{width:t.label.width,height:t.label.height,rank:n.rank,order:e+ ++i,e:t.e,label:t.label},"_se")}),delete n.selfEdges})})}),t("    adjustCoordinateSystem",function(){p.adjust(u)}),t("    position",function(){v(u)}),t("    positionSelfEdges",function(){var l;l=u,h.forEach(l.nodes(),function(t){var e=l.node(t);if("selfedge"===e.dummy){var n=l.node(e.e.v),i=n.x+n.width/2,a=n.y,r=e.x-i,o=n.height/2;l.setEdge(e.e,e.label),l.removeNode(t),e.label.points=[{x:i+2*r/3,y:a-o},{x:i+5*r/6,y:a-o},{x:i+r,y:a},{x:i+5*r/6,y:a+o},{x:i+2*r/3,y:a+o}],e.label.x=e.x,e.label.y=e.y}})}),t("    removeBorderNodes",function(){var o;o=u,h.forEach(o.nodes(),function(t){if(o.children(t).length){var e=o.node(t),n=o.node(e.borderTop),i=o.node(e.borderBottom),a=o.node(h.last(e.borderLeft)),r=o.node(h.last(e.borderRight));e.width=Math.abs(r.x-a.x),e.height=Math.abs(i.y-n.y),e.x=a.x+e.width/2,e.y=n.y+e.height/2}}),h.forEach(o.nodes(),function(t){"border"===o.node(t).dummy&&o.removeNode(t)})}),t("    normalize.undo",function(){a.undo(u)}),t("    fixupEdgeLabelCoords",function(){var n;n=u,h.forEach(n.edges(),function(t){var e=n.edge(t);if(h.has(e,"x"))switch("l"!==e.labelpos&&"r"!==e.labelpos||(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset}})}),t("    undoCoordinateSystem",function(){p.undo(u)}),t("    translateGraph",function(){function n(t){var e=t.x,n=t.y,i=t.width,a=t.height;r=Math.min(r,e-i/2),o=Math.max(o,e+i/2),l=Math.min(l,n-a/2),s=Math.max(s,n+a/2)}var i,r,o,l,s,t,e,a;i=u,r=Number.POSITIVE_INFINITY,o=0,l=Number.POSITIVE_INFINITY,s=0,e=(t=i.graph()).marginx||0,a=t.marginy||0,h.forEach(i.nodes(),function(t){n(i.node(t))}),h.forEach(i.edges(),function(t){var e=i.edge(t);h.has(e,"x")&&n(e)}),r-=e,l-=a,h.forEach(i.nodes(),function(t){var e=i.node(t);e.x-=r,e.y-=l}),h.forEach(i.edges(),function(t){var e=i.edge(t);h.forEach(e.points,function(t){t.x-=r,t.y-=l}),h.has(e,"x")&&(e.x-=r),h.has(e,"y")&&(e.y-=l)}),t.width=o-r+e,t.height=s-l+a}),t("    assignNodeIntersects",function(){var o;o=u,h.forEach(o.edges(),function(t){var e,n,i=o.edge(t),a=o.node(t.v),r=o.node(t.w);n=i.points?(e=i.points[0],i.points[i.points.length-1]):(i.points=[],e=r,a),i.points.unshift(y.intersectRect(a,e)),i.points.push(y.intersectRect(r,n))})}),t("    reversePoints",function(){var n;n=u,h.forEach(n.edges(),function(t){var e=n.edge(t);e.reversed&&e.points.reverse()})}),t("    acyclic.undo",function(){i.undo(u)})}),n("  updateInputGraph",function(){var i,a;i=r,a=e,h.forEach(i.nodes(),function(t){var e=i.node(t),n=a.node(t);e&&(e.x=n.x,e.y=n.y,a.children(t).length&&(e.width=n.width,e.height=n.height))}),h.forEach(i.edges(),function(t){var e=i.edge(t),n=a.edge(t);e.points=n.points,h.has(n,"x")&&(e.x=n.x,e.y=n.y)}),i.graph().width=a.graph().width,i.graph().height=a.graph().height})})};var x=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},k=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function C(t,e){return h.mapValues(h.pick(t,e),Number)}function P(t){var n={};return h.forEach(t,function(t,e){n[e.toLowerCase()]=t}),n}},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(t,e,n){var i;if("function"==typeof t)try{i={cloneDeep:t("lodash/cloneDeep"),constant:t("lodash/constant"),defaults:t("lodash/defaults"),each:t("lodash/each"),filter:t("lodash/filter"),find:t("lodash/find"),flatten:t("lodash/flatten"),forEach:t("lodash/forEach"),forIn:t("lodash/forIn"),has:t("lodash/has"),isUndefined:t("lodash/isUndefined"),last:t("lodash/last"),map:t("lodash/map"),mapValues:t("lodash/mapValues"),max:t("lodash/max"),merge:t("lodash/merge"),min:t("lodash/min"),minBy:t("lodash/minBy"),now:t("lodash/now"),pick:t("lodash/pick"),range:t("lodash/range"),reduce:t("lodash/reduce"),sortBy:t("lodash/sortBy"),uniqueId:t("lodash/uniqueId"),values:t("lodash/values"),zipObject:t("lodash/zipObject")}}catch(t){}i=i||window._,e.exports=i},{"lodash/cloneDeep":227,"lodash/constant":228,"lodash/defaults":229,"lodash/each":230,"lodash/filter":232,"lodash/find":233,"lodash/flatten":235,"lodash/forEach":236,"lodash/forIn":237,"lodash/has":239,"lodash/isUndefined":258,"lodash/last":261,"lodash/map":262,"lodash/mapValues":263,"lodash/max":264,"lodash/merge":266,"lodash/min":267,"lodash/minBy":268,"lodash/now":270,"lodash/pick":271,"lodash/range":273,"lodash/reduce":274,"lodash/sortBy":276,"lodash/uniqueId":286,"lodash/values":287,"lodash/zipObject":288}],11:[function(t,e,n){var v=t("./lodash"),y=t("./util");e.exports={run:function(e){var a,r,n=y.addDummyNode(e,"root",{},"_root"),i=(a=e,r={},v.forEach(a.children(),function(t){!function e(t,n){var i=a.children(t);i&&i.length&&v.forEach(i,function(t){e(t,n+1)}),r[t]=n}(t,1)}),r),o=v.max(v.values(i))-1,l=2*o+1;e.graph().nestingRoot=n,v.forEach(e.edges(),function(t){e.edge(t).minlen*=l});var s,u=(s=e,v.reduce(s.edges(),function(t,e){return t+s.edge(e).weight},0)+1);v.forEach(e.children(),function(t){!function o(l,s,u,h,d,f,c){var t=l.children(c);if(t.length){var p=y.addBorderNode(l,"_bt"),g=y.addBorderNode(l,"_bb"),e=l.node(c);l.setParent(p,c),e.borderTop=p,l.setParent(g,c),e.borderBottom=g,v.forEach(t,function(t){o(l,s,u,h,d,f,t);var e=l.node(t),n=e.borderTop?e.borderTop:t,i=e.borderBottom?e.borderBottom:t,a=e.borderTop?h:2*h,r=n!==i?1:d-f[c]+1;l.setEdge(p,n,{weight:a,minlen:r,nestingEdge:!0}),l.setEdge(i,g,{weight:a,minlen:r,nestingEdge:!0})}),l.parent(c)||l.setEdge(s,p,{weight:0,minlen:d+f[c]})}else c!==s&&l.setEdge(s,c,{weight:0,minlen:u})}(e,n,l,u,o,i,t)}),e.graph().nodeRankFactor=l},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,v.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},{"./lodash":10,"./util":29}],12:[function(t,e,n){var i=t("./lodash"),f=t("./util");e.exports={run:function(e){e.graph().dummyChains=[],i.forEach(e.edges(),function(t){!function(t,e){var n,i,a,r=e.v,o=t.node(r).rank,l=e.w,s=t.node(l).rank,u=e.name,h=t.edge(e),d=h.labelRank;if(s!==o+1){for(t.removeEdge(e),a=0,++o;o<s;++a,++o)h.points=[],i={width:0,height:0,edgeLabel:h,edgeObj:e,rank:o},n=f.addDummyNode(t,"edge",i,"_d"),o===d&&(i.width=h.width,i.height=h.height,i.dummy="edge-label",i.labelpos=h.labelpos),t.setEdge(r,n,{weight:h.weight},u),0===a&&t.graph().dummyChains.push(n),r=n;t.setEdge(r,l,{weight:h.weight},u)}}(e,t)})},undo:function(a){i.forEach(a.graph().dummyChains,function(t){var e,n=a.node(t),i=n.edgeLabel;for(a.setEdge(n.edgeObj,i);n.dummy;)e=a.successors(t)[0],a.removeNode(t),i.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),t=e,n=a.node(t)})}}},{"./lodash":10,"./util":29}],13:[function(t,e,n){var i=t("../lodash");e.exports=function(a,r,t){var o,l={};i.forEach(t,function(t){for(var e,n,i=a.parent(t);i;){if((e=a.parent(i))?(n=l[e],l[e]=i):(n=o,o=i),n&&n!==i)return void r.setEdge(n,i);i=e}})}},{"../lodash":10}],14:[function(t,e,n){var i=t("../lodash");e.exports=function(a,t){return i.map(t,function(t){var e=a.inEdges(t);if(e.length){var n=i.reduce(e,function(t,e){var n=a.edge(e),i=a.node(e.v);return{sum:t.sum+n.weight*i.order,weight:t.weight+n.weight}},{sum:0,weight:0});return{v:t,barycenter:n.sum/n.weight,weight:n.weight}}return{v:t}})}},{"../lodash":10}],15:[function(t,e,n){var s=t("../lodash"),a=t("../graphlib").Graph;e.exports=function(r,n,i){var o=function(t){for(var e;t.hasNode(e=s.uniqueId("_root")););return e}(r),l=new a({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(t){return r.node(t)});return s.forEach(r.nodes(),function(a){var t=r.node(a),e=r.parent(a);(t.rank===n||t.minRank<=n&&n<=t.maxRank)&&(l.setNode(a),l.setParent(a,e||o),s.forEach(r[i](a),function(t){var e=t.v===a?t.w:t.v,n=l.edge(e,a),i=s.isUndefined(n)?0:n.weight;l.setEdge(e,a,{weight:r.edge(t).weight+i})}),s.has(t,"minRank")&&l.setNode(a,{borderLeft:t.borderLeft[n],borderRight:t.borderRight[n]}))}),l}},{"../graphlib":7,"../lodash":10}],16:[function(t,e,n){var u=t("../lodash");function a(e,t,n){for(var i=u.zipObject(n,u.map(n,function(t,e){return e})),a=u.flatten(u.map(t,function(t){return u.sortBy(u.map(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),"pos")}),!0),r=1;r<n.length;)r<<=1;var o=2*r-1;--r;var l=u.map(new Array(o),function(){return 0}),s=0;return u.forEach(a.forEach(function(t){var e=t.pos+r;l[e]+=t.weight;for(var n=0;0<e;)e%2&&(n+=l[e+1]),l[e=e-1>>1]+=t.weight;s+=t.weight*n})),s}e.exports=function(t,e){for(var n=0,i=1;i<e.length;++i)n+=a(t,e[i-1],e[i]);return n}},{"../lodash":10}],17:[function(t,e,n){var h=t("../lodash"),d=t("./init-order"),f=t("./cross-count"),r=t("./sort-subgraph"),i=t("./build-layer-graph"),o=t("./add-subgraph-constraints"),l=t("../graphlib").Graph,c=t("../util");function p(e,t,n){return h.map(t,function(t){return i(e,t,n)})}function g(t,i){var a=new l;h.forEach(t,function(n){var t=n.graph().root,e=r(n,t,a,i);h.forEach(e.vs,function(t,e){n.node(t).order=e}),o(n,a,e.vs)})}function v(n,t){h.forEach(t,function(t){h.forEach(t,function(t,e){n.node(t).order=e})})}e.exports=function(t){var e=c.maxRank(t),n=p(t,h.range(1,e+1),"inEdges"),i=p(t,h.range(e-1,-1,-1),"outEdges"),a=d(t);v(t,a);for(var r,o=Number.POSITIVE_INFINITY,l=0,s=0;s<4;++l,++s){g(l%2?n:i,2<=l%4),a=c.buildLayerMatrix(t);var u=f(t,a);u<o&&(s=0,r=h.cloneDeep(a),o=u)}v(t,r)}},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(t,e,n){var o=t("../lodash");e.exports=function(i){var a={},t=o.filter(i.nodes(),function(t){return!i.children(t).length}),e=o.max(o.map(t,function(t){return i.node(t).rank})),r=o.map(o.range(e+1),function(){return[]}),n=o.sortBy(t,function(t){return i.node(t).rank});return o.forEach(n,function t(e){if(!o.has(a,e)){a[e]=!0;var n=i.node(e);r[n.rank].push(e),o.forEach(i.successors(e),t)}}),r}},{"../lodash":10}],19:[function(t,e,n){var o=t("../lodash");e.exports=function(t,e){var i={};return o.forEach(t,function(t,e){var n=i[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};o.isUndefined(t.barycenter)||(n.barycenter=t.barycenter,n.weight=t.weight)}),o.forEach(e.edges(),function(t){var e=i[t.v],n=i[t.w];o.isUndefined(e)||o.isUndefined(n)||(n.indegree++,e.out.push(i[t.w]))}),function(n){var t=[];function e(r){return function(t){var e,n,i,a;t.merged||(o.isUndefined(t.barycenter)||o.isUndefined(r.barycenter)||t.barycenter>=r.barycenter)&&(n=t,a=i=0,(e=r).weight&&(i+=e.barycenter*e.weight,a+=e.weight),n.weight&&(i+=n.barycenter*n.weight,a+=n.weight),e.vs=n.vs.concat(e.vs),e.barycenter=i/a,e.weight=a,e.i=Math.min(n.i,e.i),n.merged=!0)}}function i(e){return function(t){t.in.push(e),0==--t.indegree&&n.push(t)}}for(;n.length;){var a=n.pop();t.push(a),o.forEach(a.in.reverse(),e(a)),o.forEach(a.out,i(a))}return o.map(o.filter(t,function(t){return!t.merged}),function(t){return o.pick(t,["vs","i","barycenter","weight"])})}(o.filter(i,function(t){return!t.indegree}))}},{"../lodash":10}],20:[function(t,e,n){var v=t("../lodash"),y=t("./barycenter"),x=t("./resolve-conflicts"),_=t("./sort");e.exports=function a(r,t,o,l){var e=r.children(t),n=r.node(t),i=n?n.borderLeft:void 0,s=n?n.borderRight:void 0,u={};i&&(e=v.filter(e,function(t){return t!==i&&t!==s}));var h=y(r,e);v.forEach(h,function(t){if(r.children(t.v).length){var e=a(r,t.v,o,l);u[t.v]=e,v.has(e,"barycenter")&&(n=t,i=e,v.isUndefined(n.barycenter)?(n.barycenter=i.barycenter,n.weight=i.weight):(n.barycenter=(n.barycenter*n.weight+i.barycenter*i.weight)/(n.weight+i.weight),n.weight+=i.weight))}var n,i});var d,f=x(h,o);d=u,v.forEach(f,function(t){t.vs=v.flatten(t.vs.map(function(t){return d[t]?d[t].vs:t}),!0)});var c=_(f,l);if(i&&(c.vs=v.flatten([i,c.vs,s],!0),r.predecessors(i).length)){var p=r.node(r.predecessors(i)[0]),g=r.node(r.predecessors(s)[0]);v.has(c,"barycenter")||(c.barycenter=0,c.weight=0),c.barycenter=(c.barycenter*c.weight+p.order+g.order)/(c.weight+2),c.weight+=2}return c}},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(t,e,n){var d=t("../lodash"),f=t("../util");function c(t,e,n){for(var i;e.length&&(i=d.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}e.exports=function(t,e){var n,i=f.partition(t,function(t){return d.has(t,"barycenter")}),a=i.lhs,r=d.sortBy(i.rhs,function(t){return-t.i}),o=[],l=0,s=0,u=0;a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),u=c(o,r,u),d.forEach(a,function(t){u+=t.vs.length,o.push(t.vs),l+=t.barycenter*t.weight,s+=t.weight,u=c(o,r,u)});var h={vs:d.flatten(o,!0)};return s&&(h.barycenter=l/s,h.weight=s),h}},{"../lodash":10,"../util":29}],22:[function(t,e,n){var o=t("./lodash");e.exports=function(u){var i,a,r,h=(i=u,a={},r=0,o.forEach(i.children(),function t(e){var n=r;o.forEach(i.children(e),t),a[e]={low:n,lim:r++}}),a);o.forEach(u.graph().dummyChains,function(t){for(var e=u.node(t),n=e.edgeObj,i=function(t,e,n,i){var a,r,o=[],l=[],s=Math.min(e[n].low,e[i].low),u=Math.max(e[n].lim,e[i].lim);for(a=n;a=t.parent(a),o.push(a),a&&(e[a].low>s||u>e[a].lim););for(r=a,a=i;(a=t.parent(a))!==r;)l.push(a);return{path:o.concat(l.reverse()),lca:r}}(u,h,n.v,n.w),a=i.path,r=i.lca,o=0,l=a[o],s=!0;t!==n.w;){if(e=u.node(t),s){for(;(l=a[o])!==r&&u.node(l).maxRank<e.rank;)o++;l===r&&(s=!1)}if(!s){for(;o<a.length-1&&u.node(l=a[o+1]).minRank<=e.rank;)o++;l=a[o]}u.setParent(t,l),t=u.successors(t)[0]}})}},{"./lodash":10}],23:[function(t,e,n){var _=t("../lodash"),m=t("../graphlib").Graph,i=t("../util");function a(u,t){var h={};return _.reduce(t,function(t,i){var r=0,o=0,l=t.length,s=_.last(i);return _.forEach(i,function(t,e){var n=function(e,t){if(e.node(t).dummy)return _.find(e.predecessors(t),function(t){return e.node(t).dummy})}(u,t),a=n?u.node(n).order:l;!n&&t!==s||(_.forEach(i.slice(o,e+1),function(i){_.forEach(u.predecessors(i),function(t){var e=u.node(t),n=e.order;!(n<r||a<n)||e.dummy&&u.node(i).dummy||d(h,t,i)})}),o=e+1,r=a)}),i}),h}function u(s,t){var o={};function u(e,t,n,i,a){var r;_.forEach(_.range(t,n),function(t){r=e[t],s.node(r).dummy&&_.forEach(s.predecessors(r),function(t){var e=s.node(t);e.dummy&&(e.order<i||e.order>a)&&d(o,t,r)})})}return _.reduce(t,function(i,a){var r,o=-1,l=0;return _.forEach(a,function(t,e){if("border"===s.node(t).dummy){var n=s.predecessors(t);n.length&&(r=s.node(n[0]).order,u(a,l,e,o,r),l=e,o=r)}u(a,l,a.length,r,i.length)}),a}),o}function d(t,e,n){if(n<e){var i=e;e=n,n=i}var a=t[e];a||(t[e]=a={}),a[n]=!0}function f(t,e,n){if(n<e){var i=e;e=n,n=i}return _.has(t[e],n)}function h(t,e,l,s){var u={},h={},d={};return _.forEach(e,function(t){_.forEach(t,function(t,e){u[t]=t,h[t]=t,d[t]=e})}),_.forEach(e,function(t){var o=-1;_.forEach(t,function(t){var e=s(t);if(e.length)for(var n=((e=_.sortBy(e,function(t){return d[t]})).length-1)/2,i=Math.floor(n),a=Math.ceil(n);i<=a;++i){var r=e[i];h[t]===t&&o<d[r]&&!f(l,t,r)&&(h[r]=t,h[t]=u[t]=u[r],o=d[r])}})}),{root:u,align:h}}function c(i,t,e,n,a){var r,o,l,s,u,h,d,f,c,p,g={},v=(r=i,o=t,l=e,s=a,u=new m,h=r.graph(),f=h.nodesep,c=h.edgesep,p=s,d=function(t,e,n){var i,a=t.node(e),r=t.node(n),o=0;if(o+=a.width/2,_.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":i=-a.width/2;break;case"r":i=a.width/2}if(i&&(o+=p?i:-i),i=0,o+=(a.dummy?c:f)/2,o+=(r.dummy?c:f)/2,o+=r.width/2,_.has(r,"labelpos"))switch(r.labelpos.toLowerCase()){case"l":i=r.width/2;break;case"r":i=-r.width/2}return i&&(o+=p?i:-i),i=0,o},_.forEach(o,function(t){var a;_.forEach(t,function(t){var e=l[t];if(u.setNode(e),a){var n=l[a],i=u.edge(n,e);u.setEdge(n,e,Math.max(d(r,t,a),i||0))}a=t})}),u),y=a?"borderLeft":"borderRight";function x(t,e){for(var n=v.nodes(),i=n.pop(),a={};i;)a[i]?t(i):(a[i]=!0,n.push(i),n=n.concat(e(i))),i=n.pop()}return x(function(t){g[t]=v.inEdges(t).reduce(function(t,e){return Math.max(t,g[e.v]+v.edge(e))},0)},v.predecessors.bind(v)),x(function(t){var e=v.outEdges(t).reduce(function(t,e){return Math.min(t,g[e.w]-v.edge(e))},Number.POSITIVE_INFINITY),n=i.node(t);e!==Number.POSITIVE_INFINITY&&n.borderType!==y&&(g[t]=Math.max(g[t],e))},v.successors.bind(v)),_.forEach(n,function(t){g[t]=g[e[t]]}),g}function p(r,t){return _.minBy(_.values(t),function(t){var i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return _.forIn(t,function(t,e){var n=r.node(e).width/2;i=Math.max(t+n,i),a=Math.min(t-n,a)}),i-a})}function g(o,l){var t=_.values(l),s=_.min(t),u=_.max(t);_.forEach(["u","d"],function(r){_.forEach(["l","r"],function(t){var e,n=r+t,i=o[n];if(i!==l){var a=_.values(i);(e="l"===t?s-_.min(a):u-_.max(a))&&(o[n]=_.mapValues(i,function(t){return t+e}))}})})}function v(i,a){return _.mapValues(i.ul,function(t,e){if(a)return i[a.toLowerCase()][e];var n=_.sortBy(_.map(i,e));return(n[1]+n[2])/2})}e.exports={positionX:function(r){var o,t=i.buildLayerMatrix(r),l=_.merge(a(r,t),u(r,t)),s={};_.forEach(["u","d"],function(a){o="u"===a?t:_.values(t).reverse(),_.forEach(["l","r"],function(t){"r"===t&&(o=_.map(o,function(t){return _.values(t).reverse()}));var e=("u"===a?r.predecessors:r.successors).bind(r),n=h(0,o,l,e),i=c(r,o,n.root,n.align,"r"===t);"r"===t&&(i=_.mapValues(i,function(t){return-t})),s[a+t]=i})});var e=p(r,s);return g(s,e),v(s,r.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:d,hasConflict:f,verticalAlignment:h,horizontalCompaction:c,alignCoordinates:g,findSmallestWidthAlignment:p,balance:v}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(t,e,n){var o=t("../lodash"),l=t("../util"),s=t("./bk").positionX;e.exports=function(n){var i,t,a,r;i=n=l.asNonCompoundGraph(n),t=l.buildLayerMatrix(i),a=i.graph().ranksep,r=0,o.forEach(t,function(t){var e=o.max(o.map(t,function(t){return i.node(t).height}));o.forEach(t,function(t){i.node(t).y=r+e/2}),r+=e+a}),o.forEach(s(n),function(t,e){n.node(e).x=t})}},{"../lodash":10,"../util":29,"./bk":23}],25:[function(t,e,n){var l=t("../lodash"),o=t("../graphlib").Graph,s=t("./util").slack;function u(r,o){return l.forEach(r.nodes(),function i(a){l.forEach(o.nodeEdges(a),function(t){var e=t.v,n=a===e?t.w:e;r.hasNode(n)||s(o,t)||(r.setNode(n,{}),r.setEdge(a,n,{}),i(n))})}),r.nodeCount()}function h(e,n){return l.minBy(n.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return s(n,t)})}function d(t,e,n){l.forEach(t.nodes(),function(t){e.node(t).rank+=n})}e.exports=function(t){var e,n,i=new o({directed:!1}),a=t.nodes()[0],r=t.nodeCount();for(i.setNode(a,{});u(i,t)<r;)e=h(i,t),n=i.hasNode(e.v)?s(t,e):-s(t,e),d(i,t,n);return i}},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(t,e,n){var i=t("./util").longestPath,a=t("./feasible-tree"),r=t("./network-simplex");e.exports=function(t){switch(t.graph().ranker){case"network-simplex":l(t);break;case"tight-tree":i(e=t),a(e);break;case"longest-path":o(t);break;default:l(t)}var e};var o=i;function l(t){r(t)}},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(t,e,n){var f=t("../lodash"),i=t("./feasible-tree"),h=t("./util").slack,a=t("./util").longestPath,d=t("../graphlib").alg.preorder,l=t("../graphlib").alg.postorder,r=t("../util").simplify;function o(t){t=r(t),a(t);var e,n=i(t);for(p(n),c(n,t);e=u(n);)v(n,t,e,g(n,t,e))}function c(r,o){var t=l(r,r.nodes());t=t.slice(0,t.length-1),f.forEach(t,function(t){var e,n,i,a;n=o,i=t,a=(e=r).node(i).parent,e.edge(i,a).cutvalue=s(e,n,i)})}function s(o,l,s){var u=o.node(s).parent,h=!0,t=l.edge(s,u),d=0;return t||(h=!1,t=l.edge(u,s)),d=t.weight,f.forEach(l.nodeEdges(s),function(t){var e=t.v===s,n=e?t.w:t.v;if(n!==u){var i=e===h,a=l.edge(t).weight;if(d+=i?a:-a,o.hasEdge(s,n)){var r=o.edge(s,n).cutvalue;d+=i?-r:r}}}),d}function p(t,e){arguments.length<2&&(e=t.nodes()[0]),function e(n,i,a,r,t){var o=a,l=n.node(r);return i[r]=!0,f.forEach(n.neighbors(r),function(t){f.has(i,t)||(a=e(n,i,a,t,r))}),l.low=o,l.lim=a++,t?l.parent=t:delete l.parent,a}(t,{},1,e)}function u(e){return f.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function g(e,n,t){var i=t.v,a=t.w;n.hasEdge(i,a)||(i=t.w,a=t.v);var r=e.node(i),o=e.node(a),l=r,s=!1;r.lim>o.lim&&(l=o,s=!0);var u=f.filter(n.edges(),function(t){return s===y(e,e.node(t.v),l)&&s!==y(e,e.node(t.w),l)});return f.minBy(u,function(t){return h(n,t)})}function v(t,e,n,i){var a,r,o,l,s=n.v,u=n.w;t.removeEdge(s,u),t.setEdge(i.v,i.w,{}),p(t),c(t,e),a=t,r=e,o=f.find(a.nodes(),function(t){return!r.node(t).parent}),l=(l=d(a,o)).slice(1),f.forEach(l,function(t){var e=a.node(t).parent,n=r.edge(t,e),i=!1;n||(n=r.edge(e,t),i=!0),r.node(t).rank=r.node(e).rank+(i?n.minlen:-n.minlen)})}function y(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}(e.exports=o).initLowLimValues=p,o.initCutValues=c,o.calcCutValue=s,o.leaveEdge=u,o.enterEdge=g,o.exchangeEdges=v},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(t,e,n){var o=t("../lodash");e.exports={longestPath:function(a){var r={};o.forEach(a.sources(),function e(t){var n=a.node(t);if(o.has(r,t))return n.rank;r[t]=!0;var i=o.min(o.map(a.outEdges(t),function(t){return e(t.w)-a.edge(t).minlen}));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),n.rank=i})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},{"../lodash":10}],29:[function(t,e,n){var l=t("./lodash"),r=t("./graphlib").Graph;function o(t,e,n,i){for(var a;a=l.uniqueId(i),t.hasNode(a););return n.dummy=e,t.setNode(a,n),a}function s(n){return l.max(l.map(n.nodes(),function(t){var e=n.node(t).rank;if(!l.isUndefined(e))return e}))}e.exports={addDummyNode:o,simplify:function(i){var a=(new r).setGraph(i.graph());return l.forEach(i.nodes(),function(t){a.setNode(t,i.node(t))}),l.forEach(i.edges(),function(t){var e=a.edge(t.v,t.w)||{weight:0,minlen:1},n=i.edge(t);a.setEdge(t.v,t.w,{weight:e.weight+n.weight,minlen:Math.max(e.minlen,n.minlen)})}),a},asNonCompoundGraph:function(e){var n=new r({multigraph:e.isMultigraph()}).setGraph(e.graph());return l.forEach(e.nodes(),function(t){e.children(t).length||n.setNode(t,e.node(t))}),l.forEach(e.edges(),function(t){n.setEdge(t,e.edge(t))}),n},successorWeights:function(n){var t=l.map(n.nodes(),function(t){var e={};return l.forEach(n.outEdges(t),function(t){e[t.w]=(e[t.w]||0)+n.edge(t).weight}),e});return l.zipObject(n.nodes(),t)},predecessorWeights:function(n){var t=l.map(n.nodes(),function(t){var e={};return l.forEach(n.inEdges(t),function(t){e[t.v]=(e[t.v]||0)+n.edge(t).weight}),e});return l.zipObject(n.nodes(),t)},intersectRect:function(t,e){var n,i,a=t.x,r=t.y,o=e.x-a,l=e.y-r,s=t.width/2,u=t.height/2;if(!o&&!l)throw new Error("Not possible to find intersection inside of the rectangle");return i=Math.abs(l)*s>Math.abs(o)*u?(l<0&&(u=-u),n=u*o/l,u):(o<0&&(s=-s),(n=s)*l/o),{x:a+n,y:r+i}},buildLayerMatrix:function(i){var a=l.map(l.range(s(i)+1),function(){return[]});return l.forEach(i.nodes(),function(t){var e=i.node(t),n=e.rank;l.isUndefined(n)||(a[n][e.order]=t)}),a},normalizeRanks:function(n){var i=l.min(l.map(n.nodes(),function(t){return n.node(t).rank}));l.forEach(n.nodes(),function(t){var e=n.node(t);l.has(e,"rank")&&(e.rank-=i)})},removeEmptyRanks:function(n){var i=l.min(l.map(n.nodes(),function(t){return n.node(t).rank})),a=[];l.forEach(n.nodes(),function(t){var e=n.node(t).rank-i;a[e]||(a[e]=[]),a[e].push(t)});var r=0,o=n.graph().nodeRankFactor;l.forEach(a,function(t,e){l.isUndefined(t)&&e%o!=0?--r:r&&l.forEach(t,function(t){n.node(t).rank+=r})})},addBorderNode:function(t,e,n,i){var a={width:0,height:0};return 4<=arguments.length&&(a.rank=n,a.order=i),o(t,"border",a,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return l.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=l.now();try{return e()}finally{console.log(t+" time: "+(l.now()-n)+"ms")}},notime:function(t,e){return e()}}},{"./graphlib":7,"./lodash":10}],30:[function(t,e,n){e.exports="0.8.4"},{}],31:[function(t,e,n){var i=t("./lib");e.exports={Graph:i.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:i.version}},{"./lib":47,"./lib/alg":38,"./lib/json":48}],32:[function(t,e,n){var o=t("../lodash");e.exports=function(e){var n,i={},a=[];function r(t){o.has(i,t)||(i[t]=!0,n.push(t),o.each(e.successors(t),r),o.each(e.predecessors(t),r))}return o.each(e.nodes(),function(t){n=[],r(t),n.length&&a.push(n)}),a}},{"../lodash":49}],33:[function(t,e,n){var l=t("../lodash");e.exports=function(e,t,n){l.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],r={};return l.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(n,t,i,a,r,o){l.has(a,t)||(a[t]=!0,i||o.push(t),l.each(r(t),function(t){e(n,t,i,a,r,o)}),i&&o.push(t))}(e,t,"post"===n,r,i,a)}),a}},{"../lodash":49}],34:[function(t,e,n){var r=t("./dijkstra"),o=t("../lodash");e.exports=function(n,i,a){return o.transform(n.nodes(),function(t,e){t[e]=r(n,e,i,a)},{})}},{"../lodash":49,"./dijkstra":35}],35:[function(t,e,n){var i=t("../lodash"),a=t("../data/priority-queue");e.exports=function(e,t,n,i){return function(t,n,r,e){function i(t){var e=t.v!==o?t.v:t.w,n=s[e],i=r(t),a=l.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);a<n.distance&&(n.distance=a,n.predecessor=o,u.decrease(e,a))}var o,l,s={},u=new a;for(t.nodes().forEach(function(t){var e=t===n?0:Number.POSITIVE_INFINITY;s[t]={distance:e},u.add(t,e)});0<u.size()&&(o=u.removeMin(),(l=s[o]).distance!==Number.POSITIVE_INFINITY);)e(o).forEach(i);return s}(e,String(t),n||r,i||function(t){return e.outEdges(t)})};var r=i.constant(1)},{"../data/priority-queue":45,"../lodash":49}],36:[function(t,e,n){var i=t("../lodash"),a=t("./tarjan");e.exports=function(e){return i.filter(a(e),function(t){return 1<t.length||1===t.length&&e.hasEdge(t[0],t[0])})}},{"../lodash":49,"./tarjan":43}],37:[function(t,e,n){var i=t("../lodash");e.exports=function(e,t,n){return a=t||o,r=n||function(t){return e.outEdges(t)},s={},(u=e.nodes()).forEach(function(i){s[i]={},s[i][i]={distance:0},u.forEach(function(t){i!==t&&(s[i][t]={distance:Number.POSITIVE_INFINITY})}),r(i).forEach(function(t){var e=t.v===i?t.w:t.v,n=a(t);s[i][e]={distance:n,predecessor:i}})}),u.forEach(function(o){var l=s[o];u.forEach(function(t){var r=s[t];u.forEach(function(t){var e=r[o],n=l[t],i=r[t],a=e.distance+n.distance;a<i.distance&&(i.distance=a,i.predecessor=n.predecessor)})})}),s;var a,r,s,u};var o=i.constant(1)},{"../lodash":49}],38:[function(t,e,n){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":32,"./dijkstra":35,"./dijkstra-all":34,"./find-cycles":36,"./floyd-warshall":37,"./is-acyclic":39,"./postorder":40,"./preorder":41,"./prim":42,"./tarjan":43,"./topsort":44}],39:[function(t,e,n){var i=t("./topsort");e.exports=function(t){try{i(t)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}},{"./topsort":44}],40:[function(t,e,n){var i=t("./dfs");e.exports=function(t,e){return i(t,e,"post")}},{"./dfs":33}],41:[function(t,e,n){var i=t("./dfs");e.exports=function(t,e){return i(t,e,"pre")}},{"./dfs":33}],42:[function(t,e,n){var s=t("../lodash"),u=t("../graph"),h=t("../data/priority-queue");e.exports=function(t,a){var r,e=new u,o={},l=new h;function n(t){var e=t.v===r?t.w:t.v,n=l.priority(e);if(void 0!==n){var i=a(t);i<n&&(o[e]=r,l.decrease(e,i))}}if(0===t.nodeCount())return e;s.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),e.setNode(t)}),l.decrease(t.nodes()[0],0);for(var i=!1;0<l.size();){if(r=l.removeMin(),s.has(o,r))e.setEdge(r,o[r]);else{if(i)throw new Error("Input graph is not connected: "+t);i=!0}t.nodeEdges(r).forEach(n)}return e}},{"../data/priority-queue":45,"../graph":46,"../lodash":49}],43:[function(t,e,n){var h=t("../lodash");e.exports=function(r){var o=0,l=[],s={},u=[];return r.nodes().forEach(function(t){h.has(s,t)||!function e(t){var n=s[t]={onStack:!0,lowlink:o,index:o++};if(l.push(t),r.successors(t).forEach(function(t){h.has(s,t)?s[t].onStack&&(n.lowlink=Math.min(n.lowlink,s[t].index)):(e(t),n.lowlink=Math.min(n.lowlink,s[t].lowlink))}),n.lowlink===n.index){for(var i,a=[];i=l.pop(),s[i].onStack=!1,a.push(i),t!==i;);u.push(a)}}(t)}),u}},{"../lodash":49}],44:[function(t,e,n){var o=t("../lodash");function l(){}((e.exports=function(n){var i={},a={},r=[];if(o.each(n.sinks(),function t(e){if(o.has(a,e))throw new l;o.has(i,e)||(a[e]=!0,i[e]=!0,o.each(n.predecessors(e),t),delete a[e],r.push(e))}),o.size(i)!==n.nodeCount())throw new l;return r}).CycleException=l).prototype=new Error},{"../lodash":49}],45:[function(t,e,n){var r=t("../lodash");function i(){this._arr=[],this._keyIndices={}}(e.exports=i).prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),r.has(n,t))return!1;var i=this._arr,a=i.length;return n[t]=a,i.push({key:t,priority:e}),this._decrease(a),!0},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,i=1+n,a=t;n<e.length&&(a=e[n].priority<e[a].priority?n:a,i<e.length&&(a=e[i].priority<e[a].priority?i:a),a!==t&&(this._swap(t,a),this._heapify(a)))},i.prototype._decrease=function(t){for(var e,n=this._arr,i=n[t].priority;0!==t&&!(n[e=t>>1].priority<i);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,i=this._keyIndices,a=n[t],r=n[e];n[t]=r,n[e]=a,i[r.key]=t,i[a.key]=e}},{"../lodash":49}],46:[function(t,e,n){var s=t("./lodash");e.exports=a;var l="\0",i="\0",u="";function a(t){this._isDirected=!s.has(t,"directed")||t.directed,this._isMultigraph=!!s.has(t,"multigraph")&&t.multigraph,this._isCompound=!!s.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=s.constant(void 0),this._defaultEdgeLabelFn=s.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function h(t,e){t[e]?t[e]++:t[e]=1}function r(t,e){--t[e]||delete t[e]}function d(t,e,n,i){var a=""+e,r=""+n;if(!t&&r<a){var o=a;a=r,r=o}return a+u+r+u+(s.isUndefined(i)?l:i)}function o(t,e){return d(t,e.v,e.w,e.name)}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(t){return this._label=t,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(t){return s.isFunction(t)||(t=s.constant(t)),this._defaultNodeLabelFn=t,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return s.keys(this._nodes)},a.prototype.sources=function(){var e=this;return s.filter(this.nodes(),function(t){return s.isEmpty(e._in[t])})},a.prototype.sinks=function(){var e=this;return s.filter(this.nodes(),function(t){return s.isEmpty(e._out[t])})},a.prototype.setNodes=function(t,e){var n=arguments,i=this;return s.each(t,function(t){1<n.length?i.setNode(t,e):i.setNode(t)}),this},a.prototype.setNode=function(t,e){return s.has(this._nodes,t)?1<arguments.length&&(this._nodes[t]=e):(this._nodes[t]=1<arguments.length?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children[i][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this},a.prototype.node=function(t){return this._nodes[t]},a.prototype.hasNode=function(t){return s.has(this._nodes,t)},a.prototype.removeNode=function(t){var e=this;if(s.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],s.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),s.each(s.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],s.each(s.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},a.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(s.isUndefined(e))e=i;else{for(var n=e+="";!s.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},a.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},a.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},a.prototype.children=function(t){if(s.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return s.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},a.prototype.predecessors=function(t){var e=this._preds[t];if(e)return s.keys(e)},a.prototype.successors=function(t){var e=this._sucs[t];if(e)return s.keys(e)},a.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return s.union(e,this.successors(t))},a.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},a.prototype.filterNodes=function(n){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph());var a=this;s.each(this._nodes,function(t,e){n(e)&&i.setNode(e,t)}),s.each(this._edgeObjs,function(t){i.hasNode(t.v)&&i.hasNode(t.w)&&i.setEdge(t,a.edge(t))});var r={};return this._isCompound&&s.each(i.nodes(),function(t){i.setParent(t,function t(e){var n=a.parent(e);return void 0===n||i.hasNode(n)?r[e]=n:n in r?r[n]:t(n)}(t))}),i},a.prototype.setDefaultEdgeLabel=function(t){return s.isFunction(t)||(t=s.constant(t)),this._defaultEdgeLabelFn=t,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return s.values(this._edgeObjs)},a.prototype.setPath=function(t,n){var i=this,a=arguments;return s.reduce(t,function(t,e){return 1<a.length?i.setEdge(t,e,n):i.setEdge(t,e),e}),this},a.prototype.setEdge=function(){var r,o,l,t,e=!1,n=arguments[0];"object"===(0,f.default)(n)&&null!==n&&"v"in n?(r=n.v,o=n.w,l=n.name,2===arguments.length&&(t=arguments[1],e=!0)):(r=n,o=arguments[1],l=arguments[3],2<arguments.length&&(t=arguments[2],e=!0)),r=""+r,o=""+o,s.isUndefined(l)||(l=""+l);var i=d(this._isDirected,r,o,l);if(s.has(this._edgeLabels,i))return e&&(this._edgeLabels[i]=t),this;if(!s.isUndefined(l)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(o),this._edgeLabels[i]=e?t:this._defaultEdgeLabelFn(r,o,l);var a=function(t){var e=""+r,n=""+o;if(!t&&n<e){var i=e;e=n,n=i}var a={v:e,w:n};return l&&(a.name=l),a}(this._isDirected);return r=a.v,o=a.w,Object.freeze(a),this._edgeObjs[i]=a,h(this._preds[o],r),h(this._sucs[r],o),this._in[o][i]=a,this._out[r][i]=a,this._edgeCount++,this},a.prototype.edge=function(t,e,n){var i=1===arguments.length?o(this._isDirected,t):d(this._isDirected,t,e,n);return this._edgeLabels[i]},a.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?o(this._isDirected,t):d(this._isDirected,t,e,n);return s.has(this._edgeLabels,i)},a.prototype.removeEdge=function(t,e,n){var i=1===arguments.length?o(this._isDirected,arguments[0]):d(this._isDirected,t,e,n),a=this._edgeObjs[i];return a&&(t=a.v,e=a.w,delete this._edgeLabels[i],delete this._edgeObjs[i],r(this._preds[e],t),r(this._sucs[t],e),delete this._in[e][i],delete this._out[t][i],this._edgeCount--),this},a.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=s.values(n);return e?s.filter(i,function(t){return t.v===e}):i}},a.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=s.values(n);return e?s.filter(i,function(t){return t.w===e}):i}},a.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},{"./lodash":49}],47:[function(t,e,n){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":46,"./version":50}],48:[function(t,e,n){var r=t("./lodash"),i=t("./graph");e.exports={write:function(t){var i,a,e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:(a=t,r.map(a.nodes(),function(t){var e=a.node(t),n=a.parent(t),i={v:t};return r.isUndefined(e)||(i.value=e),r.isUndefined(n)||(i.parent=n),i})),edges:(i=t,r.map(i.edges(),function(t){var e=i.edge(t),n={v:t.v,w:t.w};return r.isUndefined(t.name)||(n.name=t.name),r.isUndefined(e)||(n.value=e),n}))};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},{"./graph":46,"./lodash":49}],49:[function(t,e,n){var i;if("function"==typeof t)try{i={clone:t("lodash/clone"),constant:t("lodash/constant"),each:t("lodash/each"),filter:t("lodash/filter"),has:t("lodash/has"),isArray:t("lodash/isArray"),isEmpty:t("lodash/isEmpty"),isFunction:t("lodash/isFunction"),isUndefined:t("lodash/isUndefined"),keys:t("lodash/keys"),map:t("lodash/map"),reduce:t("lodash/reduce"),size:t("lodash/size"),transform:t("lodash/transform"),union:t("lodash/union"),values:t("lodash/values")}}catch(t){}i=i||window._,e.exports=i},{"lodash/clone":226,"lodash/constant":228,"lodash/each":230,"lodash/filter":232,"lodash/has":239,"lodash/isArray":243,"lodash/isEmpty":247,"lodash/isFunction":248,"lodash/isUndefined":258,"lodash/keys":259,"lodash/map":262,"lodash/reduce":274,"lodash/size":275,"lodash/transform":284,"lodash/union":285,"lodash/values":287}],50:[function(t,e,n){e.exports="2.1.7"},{}],51:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"DataView");e.exports=i},{"./_getNative":163,"./_root":208}],52:[function(t,e,n){var i=t("./_hashClear"),a=t("./_hashDelete"),r=t("./_hashGet"),o=t("./_hashHas"),l=t("./_hashSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}s.prototype.clear=i,s.prototype.delete=a,s.prototype.get=r,s.prototype.has=o,s.prototype.set=l,e.exports=s},{"./_hashClear":172,"./_hashDelete":173,"./_hashGet":174,"./_hashHas":175,"./_hashSet":176}],53:[function(t,e,n){var i=t("./_listCacheClear"),a=t("./_listCacheDelete"),r=t("./_listCacheGet"),o=t("./_listCacheHas"),l=t("./_listCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}s.prototype.clear=i,s.prototype.delete=a,s.prototype.get=r,s.prototype.has=o,s.prototype.set=l,e.exports=s},{"./_listCacheClear":188,"./_listCacheDelete":189,"./_listCacheGet":190,"./_listCacheHas":191,"./_listCacheSet":192}],54:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Map");e.exports=i},{"./_getNative":163,"./_root":208}],55:[function(t,e,n){var i=t("./_mapCacheClear"),a=t("./_mapCacheDelete"),r=t("./_mapCacheGet"),o=t("./_mapCacheHas"),l=t("./_mapCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}s.prototype.clear=i,s.prototype.delete=a,s.prototype.get=r,s.prototype.has=o,s.prototype.set=l,e.exports=s},{"./_mapCacheClear":193,"./_mapCacheDelete":194,"./_mapCacheGet":195,"./_mapCacheHas":196,"./_mapCacheSet":197}],56:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Promise");e.exports=i},{"./_getNative":163,"./_root":208}],57:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Set");e.exports=i},{"./_getNative":163,"./_root":208}],58:[function(t,e,n){var i=t("./_MapCache"),a=t("./_setCacheAdd"),r=t("./_setCacheHas");function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=a,o.prototype.has=r,e.exports=o},{"./_MapCache":55,"./_setCacheAdd":210,"./_setCacheHas":211}],59:[function(t,e,n){var i=t("./_ListCache"),a=t("./_stackClear"),r=t("./_stackDelete"),o=t("./_stackGet"),l=t("./_stackHas"),s=t("./_stackSet");function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=a,u.prototype.delete=r,u.prototype.get=o,u.prototype.has=l,u.prototype.set=s,e.exports=u},{"./_ListCache":53,"./_stackClear":215,"./_stackDelete":216,"./_stackGet":217,"./_stackHas":218,"./_stackSet":219}],60:[function(t,e,n){var i=t("./_root").Symbol;e.exports=i},{"./_root":208}],61:[function(t,e,n){var i=t("./_root").Uint8Array;e.exports=i},{"./_root":208}],62:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"WeakMap");e.exports=i},{"./_getNative":163,"./_root":208}],63:[function(t,e,n){e.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},{}],64:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},{}],65:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,a=0,r=[];++n<i;){var o=t[n];e(o,n,t)&&(r[a++]=o)}return r}},{}],66:[function(t,e,n){var i=t("./_baseIndexOf");e.exports=function(t,e){return!(null==t||!t.length)&&-1<i(t,e,0)}},{"./_baseIndexOf":95}],67:[function(t,e,n){e.exports=function(t,e,n){for(var i=-1,a=null==t?0:t.length;++i<a;)if(n(e,t[i]))return!0;return!1}},{}],68:[function(t,e,n){var h=t("./_baseTimes"),d=t("./isArguments"),f=t("./isArray"),c=t("./isBuffer"),p=t("./_isIndex"),g=t("./isTypedArray"),v=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n=f(t),i=!n&&d(t),a=!n&&!i&&c(t),r=!n&&!i&&!a&&g(t),o=n||i||a||r,l=o?h(t.length,String):[],s=l.length;for(var u in t)!e&&!v.call(t,u)||o&&("length"==u||a&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||p(u,s))||l.push(u);return l}},{"./_baseTimes":125,"./_isIndex":181,"./isArguments":242,"./isArray":243,"./isBuffer":246,"./isTypedArray":257}],69:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,a=Array(i);++n<i;)a[n]=e(t[n],n,t);return a}},{}],70:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t}},{}],71:[function(t,e,n){e.exports=function(t,e,n,i){var a=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++a]);++a<r;)n=e(n,t[a],a,t);return n}},{}],72:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},{}],73:[function(t,e,n){var i=t("./_baseProperty")("length");e.exports=i},{"./_baseProperty":117}],74:[function(t,e,n){var i=t("./_baseAssignValue"),a=t("./eq");e.exports=function(t,e,n){(void 0===n||a(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}},{"./_baseAssignValue":79,"./eq":231}],75:[function(t,e,n){var a=t("./_baseAssignValue"),r=t("./eq"),o=Object.prototype.hasOwnProperty;e.exports=function(t,e,n){var i=t[e];o.call(t,e)&&r(i,n)&&(void 0!==n||e in t)||a(t,e,n)}},{"./_baseAssignValue":79,"./eq":231}],76:[function(t,e,n){var i=t("./eq");e.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},{"./eq":231}],77:[function(t,e,n){var i=t("./_copyObject"),a=t("./keys");e.exports=function(t,e){return t&&i(e,a(e),t)}},{"./_copyObject":143,"./keys":259}],78:[function(t,e,n){var i=t("./_copyObject"),a=t("./keysIn");e.exports=function(t,e){return t&&i(e,a(e),t)}},{"./_copyObject":143,"./keysIn":260}],79:[function(t,e,n){var i=t("./_defineProperty");e.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},{"./_defineProperty":153}],80:[function(t,e,n){var y=t("./_Stack"),x=t("./_arrayEach"),_=t("./_assignValue"),m=t("./_baseAssign"),b=t("./_baseAssignIn"),w=t("./_cloneBuffer"),k=t("./_copyArray"),S=t("./_copySymbols"),A=t("./_copySymbolsIn"),C=t("./_getAllKeys"),P=t("./_getAllKeysIn"),O=t("./_getTag"),T=t("./_initCloneArray"),M=t("./_initCloneByTag"),I=t("./_initCloneObject"),D=t("./isArray"),L=t("./isBuffer"),E=t("./isMap"),F=t("./isObject"),R=t("./isSet"),N=t("./keys"),j="[object Arguments]",W="[object Function]",z="[object Object]",B={};B[j]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object DataView]"]=B["[object Boolean]"]=B["[object Date]"]=B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Map]"]=B["[object Number]"]=B[z]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object Symbol]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Error]"]=B[W]=B["[object WeakMap]"]=!1,e.exports=function n(i,a,r,t,e,o){var l,s=1&a,u=2&a,h=4&a;if(r&&(l=e?r(i,t,e,o):r(i)),void 0!==l)return l;if(!F(i))return i;var d=D(i);if(d){if(l=T(i),!s)return k(i,l)}else{var f=O(i),c=f==W||"[object GeneratorFunction]"==f;if(L(i))return w(i,s);if(f==z||f==j||c&&!e){if(l=u||c?{}:I(i),!s)return u?A(i,b(l,i)):S(i,m(l,i))}else{if(!B[f])return e?i:{};l=M(i,f,s)}}var p=(o=o||new y).get(i);if(p)return p;if(o.set(i,l),R(i))return i.forEach(function(t){l.add(n(t,a,r,t,i,o))}),l;if(E(i))return i.forEach(function(t,e){l.set(e,n(t,a,r,e,i,o))}),l;var g=h?u?P:C:u?keysIn:N,v=d?void 0:g(i);return x(v||i,function(t,e){v&&(t=i[e=t]),_(l,e,n(t,a,r,e,i,o))}),l}},{"./_Stack":59,"./_arrayEach":64,"./_assignValue":75,"./_baseAssign":77,"./_baseAssignIn":78,"./_cloneBuffer":135,"./_copyArray":142,"./_copySymbols":144,"./_copySymbolsIn":145,"./_getAllKeys":159,"./_getAllKeysIn":160,"./_getTag":168,"./_initCloneArray":177,"./_initCloneByTag":178,"./_initCloneObject":179,"./isArray":243,"./isBuffer":246,"./isMap":250,"./isObject":251,"./isSet":254,"./keys":259}],81:[function(t,e,n){var i=t("./isObject"),a=Object.create;function r(){}e.exports=function(t){if(!i(t))return{};if(a)return a(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}},{"./isObject":251}],82:[function(t,e,n){var i=t("./_baseForOwn"),a=t("./_createBaseEach")(i);e.exports=a},{"./_baseForOwn":88,"./_createBaseEach":148}],83:[function(t,e,n){var u=t("./isSymbol");e.exports=function(t,e,n){for(var i=-1,a=t.length;++i<a;){var r=t[i],o=e(r);if(null!=o&&(void 0===l?o==o&&!u(o):n(o,l)))var l=o,s=r}return s}},{"./isSymbol":256}],84:[function(t,e,n){var r=t("./_baseEach");e.exports=function(t,i){var a=[];return r(t,function(t,e,n){i(t,e,n)&&a.push(t)}),a}},{"./_baseEach":82}],85:[function(t,e,n){e.exports=function(t,e,n,i){for(var a=t.length,r=n+(i?1:-1);i?r--:++r<a;)if(e(t[r],r,t))return r;return-1}},{}],86:[function(t,e,n){var u=t("./_arrayPush"),h=t("./_isFlattenable");e.exports=function t(e,n,i,a,r){var o=-1,l=e.length;for(i=i||h,r=r||[];++o<l;){var s=e[o];0<n&&i(s)?1<n?t(s,n-1,i,a,r):u(r,s):a||(r[r.length]=s)}return r}},{"./_arrayPush":70,"./_isFlattenable":180}],87:[function(t,e,n){var i=t("./_createBaseFor")();e.exports=i},{"./_createBaseFor":149}],88:[function(t,e,n){var i=t("./_baseFor"),a=t("./keys");e.exports=function(t,e){return t&&i(t,e,a)}},{"./_baseFor":87,"./keys":259}],89:[function(t,e,n){var a=t("./_castPath"),r=t("./_toKey");e.exports=function(t,e){for(var n=0,i=(e=a(e,t)).length;null!=t&&n<i;)t=t[r(e[n++])];return n&&n==i?t:void 0}},{"./_castPath":133,"./_toKey":223}],90:[function(t,e,n){var a=t("./_arrayPush"),r=t("./isArray");e.exports=function(t,e,n){var i=e(t);return r(t)?i:a(i,n(t))}},{"./_arrayPush":70,"./isArray":243}],91:[function(t,e,n){var i=t("./_Symbol"),a=t("./_getRawTag"),r=t("./_objectToString"),o=i?i.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(o&&o in Object(t)?a:r)(t)}},{"./_Symbol":60,"./_getRawTag":165,"./_objectToString":205}],92:[function(t,e,n){e.exports=function(t,e){return e<t}},{}],93:[function(t,e,n){var i=Object.prototype.hasOwnProperty;e.exports=function(t,e){return null!=t&&i.call(t,e)}},{}],94:[function(t,e,n){e.exports=function(t,e){return null!=t&&e in Object(t)}},{}],95:[function(t,e,n){var i=t("./_baseFindIndex"),a=t("./_baseIsNaN"),r=t("./_strictIndexOf");e.exports=function(t,e,n){return e==e?r(t,e,n):i(t,a,n)}},{"./_baseFindIndex":85,"./_baseIsNaN":101,"./_strictIndexOf":220}],96:[function(t,e,n){var i=t("./_baseGetTag"),a=t("./isObjectLike");e.exports=function(t){return a(t)&&"[object Arguments]"==i(t)}},{"./_baseGetTag":91,"./isObjectLike":252}],97:[function(t,e,n){var o=t("./_baseIsEqualDeep"),l=t("./isObjectLike");e.exports=function t(e,n,i,a,r){return e===n||(null==e||null==n||!l(e)&&!l(n)?e!=e&&n!=n:o(e,n,i,a,t,r))}},{"./_baseIsEqualDeep":98,"./isObjectLike":252}],98:[function(t,e,n){var g=t("./_Stack"),v=t("./_equalArrays"),y=t("./_equalByTag"),x=t("./_equalObjects"),_=t("./_getTag"),m=t("./isArray"),b=t("./isBuffer"),w=t("./isTypedArray"),k="[object Arguments]",S="[object Array]",A="[object Object]",C=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,i,a,r){var o=m(t),l=m(e),s=o?S:_(t),u=l?S:_(e),h=(s=s==k?A:s)==A,d=(u=u==k?A:u)==A,f=s==u;if(f&&b(t)){if(!b(e))return!1;h=!(o=!0)}if(f&&!h)return r=r||new g,o||w(t)?v(t,e,n,i,a,r):y(t,e,s,n,i,a,r);if(!(1&n)){var c=h&&C.call(t,"__wrapped__"),p=d&&C.call(e,"__wrapped__");if(c||p)return a(c?t.value():t,p?e.value():e,n,i,r=r||new g)}return f&&(r=r||new g,x(t,e,n,i,a,r))}},{"./_Stack":59,"./_equalArrays":154,"./_equalByTag":155,"./_equalObjects":156,"./_getTag":168,"./isArray":243,"./isBuffer":246,"./isTypedArray":257}],99:[function(t,e,n){var i=t("./_getTag"),a=t("./isObjectLike");e.exports=function(t){return a(t)&&"[object Map]"==i(t)}},{"./_getTag":168,"./isObjectLike":252}],100:[function(t,e,n){var c=t("./_Stack"),p=t("./_baseIsEqual");e.exports=function(t,e,n,i){var a=n.length,r=a,o=!i;if(null==t)return!r;for(t=Object(t);a--;){var l=n[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<r;){var s=(l=n[a])[0],u=t[s],h=l[1];if(o&&l[2]){if(void 0===u&&!(s in t))return!1}else{var d=new c;if(i)var f=i(u,h,s,t,e,d);if(!(void 0===f?p(h,u,3,i,d):f))return!1}}return!0}},{"./_Stack":59,"./_baseIsEqual":97}],101:[function(t,e,n){e.exports=function(t){return t!=t}},{}],102:[function(t,e,n){var i=t("./isFunction"),a=t("./_isMasked"),r=t("./isObject"),o=t("./_toSource"),l=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,h=s.toString,d=u.hasOwnProperty,f=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!r(t)||a(t))&&(i(t)?f:l).test(o(t))}},{"./_isMasked":185,"./_toSource":224,"./isFunction":248,"./isObject":251}],103:[function(t,e,n){var i=t("./_getTag"),a=t("./isObjectLike");e.exports=function(t){return a(t)&&"[object Set]"==i(t)}},{"./_getTag":168,"./isObjectLike":252}],104:[function(t,e,n){var i=t("./_baseGetTag"),a=t("./isLength"),r=t("./isObjectLike"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(t){return r(t)&&a(t.length)&&!!o[i(t)]}},{"./_baseGetTag":91,"./isLength":249,"./isObjectLike":252}],105:[function(t,e,n){var i=t("./_baseMatches"),a=t("./_baseMatchesProperty"),r=t("./identity"),o=t("./isArray"),l=t("./property");e.exports=function(t){return"function"==typeof t?t:null==t?r:"object"==(0,f.default)(t)?o(t)?a(t[0],t[1]):i(t):l(t)}},{"./_baseMatches":110,"./_baseMatchesProperty":111,"./identity":241,"./isArray":243,"./property":272}],106:[function(t,e,n){var i=t("./_isPrototype"),a=t("./_nativeKeys"),r=Object.prototype.hasOwnProperty;e.exports=function(t){if(!i(t))return a(t);var e=[];for(var n in Object(t))r.call(t,n)&&"constructor"!=n&&e.push(n);return e}},{"./_isPrototype":186,"./_nativeKeys":202}],107:[function(t,e,n){var a=t("./isObject"),r=t("./_isPrototype"),o=t("./_nativeKeysIn"),l=Object.prototype.hasOwnProperty;e.exports=function(t){if(!a(t))return o(t);var e=r(t),n=[];for(var i in t)("constructor"!=i||!e&&l.call(t,i))&&n.push(i);return n}},{"./_isPrototype":186,"./_nativeKeysIn":203,"./isObject":251}],108:[function(t,e,n){e.exports=function(t,e){return t<e}},{}],109:[function(t,e,n){var o=t("./_baseEach"),l=t("./isArrayLike");e.exports=function(t,i){var a=-1,r=l(t)?Array(t.length):[];return o(t,function(t,e,n){r[++a]=i(t,e,n)}),r}},{"./_baseEach":82,"./isArrayLike":244}],110:[function(t,e,n){var i=t("./_baseIsMatch"),a=t("./_getMatchData"),r=t("./_matchesStrictComparable");e.exports=function(e){var n=a(e);return 1==n.length&&n[0][2]?r(n[0][0],n[0][1]):function(t){return t===e||i(t,e,n)}}},{"./_baseIsMatch":100,"./_getMatchData":162,"./_matchesStrictComparable":199}],111:[function(t,e,n){var a=t("./_baseIsEqual"),r=t("./get"),o=t("./hasIn"),l=t("./_isKey"),s=t("./_isStrictComparable"),u=t("./_matchesStrictComparable"),h=t("./_toKey");e.exports=function(n,i){return l(n)&&s(i)?u(h(n),i):function(t){var e=r(t,n);return void 0===e&&e===i?o(t,n):a(i,e,3)}}},{"./_baseIsEqual":97,"./_isKey":183,"./_isStrictComparable":187,"./_matchesStrictComparable":199,"./_toKey":223,"./get":238,"./hasIn":240}],112:[function(t,e,n){var u=t("./_Stack"),h=t("./_assignMergeValue"),d=t("./_baseFor"),f=t("./_baseMergeDeep"),c=t("./isObject"),p=t("./keysIn"),g=t("./_safeGet");e.exports=function i(a,r,o,l,s){a!==r&&d(r,function(t,e){if(c(t))s=s||new u,f(a,r,e,o,i,l,s);else{var n=l?l(g(a,e),t,e+"",a,r,s):void 0;void 0===n&&(n=t),h(a,e,n)}},p)}},{"./_Stack":59,"./_assignMergeValue":74,"./_baseFor":87,"./_baseMergeDeep":113,"./_safeGet":209,"./isObject":251,"./keysIn":260}],113:[function(t,e,n){var g=t("./_assignMergeValue"),v=t("./_cloneBuffer"),y=t("./_cloneTypedArray"),x=t("./_copyArray"),_=t("./_initCloneObject"),m=t("./isArguments"),b=t("./isArray"),w=t("./isArrayLikeObject"),k=t("./isBuffer"),S=t("./isFunction"),A=t("./isObject"),C=t("./isPlainObject"),P=t("./isTypedArray"),O=t("./_safeGet"),T=t("./toPlainObject");e.exports=function(t,e,n,i,a,r,o){var l=O(t,n),s=O(e,n),u=o.get(s);if(u)g(t,n,u);else{var h=r?r(l,s,n+"",t,e,o):void 0,d=void 0===h;if(d){var f=b(s),c=!f&&k(s),p=!f&&!c&&P(s);h=s,f||c||p?h=b(l)?l:w(l)?x(l):c?v(s,!(d=!1)):p?y(s,!(d=!1)):[]:C(s)||m(s)?m(h=l)?h=T(l):(!A(l)||i&&S(l))&&(h=_(s)):d=!1}d&&(o.set(s,h),a(h,s,i,r,o),o.delete(s)),g(t,n,h)}}},{"./_assignMergeValue":74,"./_cloneBuffer":135,"./_cloneTypedArray":139,"./_copyArray":142,"./_initCloneObject":179,"./_safeGet":209,"./isArguments":242,"./isArray":243,"./isArrayLikeObject":245,"./isBuffer":246,"./isFunction":248,"./isObject":251,"./isPlainObject":253,"./isTypedArray":257,"./toPlainObject":282}],114:[function(t,e,n){var r=t("./_arrayMap"),o=t("./_baseIteratee"),l=t("./_baseMap"),s=t("./_baseSortBy"),u=t("./_baseUnary"),h=t("./_compareMultiple"),d=t("./identity");e.exports=function(t,i,n){var a=-1;i=r(i.length?i:[d],u(o));var e=l(t,function(e,t,n){return{criteria:r(i,function(t){return t(e)}),index:++a,value:e}});return s(e,function(t,e){return h(t,e,n)})}},{"./_arrayMap":69,"./_baseIteratee":105,"./_baseMap":109,"./_baseSortBy":124,"./_baseUnary":127,"./_compareMultiple":141,"./identity":241}],115:[function(t,e,n){var i=t("./_basePickBy"),a=t("./hasIn");e.exports=function(n,t){return i(n,t,function(t,e){return a(n,e)})}},{"./_basePickBy":116,"./hasIn":240}],116:[function(t,e,n){var s=t("./_baseGet"),u=t("./_baseSet"),h=t("./_castPath");e.exports=function(t,e,n){for(var i=-1,a=e.length,r={};++i<a;){var o=e[i],l=s(t,o);n(l,o)&&u(r,h(o,t),l)}return r}},{"./_baseGet":89,"./_baseSet":122,"./_castPath":133}],117:[function(t,e,n){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],118:[function(t,e,n){var i=t("./_baseGet");e.exports=function(e){return function(t){return i(t,e)}}},{"./_baseGet":89}],119:[function(t,e,n){var l=Math.ceil,s=Math.max;e.exports=function(t,e,n,i){for(var a=-1,r=s(l((e-t)/(n||1)),0),o=Array(r);r--;)o[i?r:++a]=t,t+=n;return o}},{}],120:[function(t,e,n){e.exports=function(t,i,a,r,e){return e(t,function(t,e,n){a=r?(r=!1,t):i(a,t,e,n)}),a}},{}],121:[function(t,e,n){var i=t("./identity"),a=t("./_overRest"),r=t("./_setToString");e.exports=function(t,e){return r(a(t,e,i),t+"")}},{"./_overRest":207,"./_setToString":213,"./identity":241}],122:[function(t,e,n){var d=t("./_assignValue"),f=t("./_castPath"),c=t("./_isIndex"),p=t("./isObject"),g=t("./_toKey");e.exports=function(t,e,n,i){if(!p(t))return t;for(var a=-1,r=(e=f(e,t)).length,o=r-1,l=t;null!=l&&++a<r;){var s=g(e[a]),u=n;if(a!=o){var h=l[s];void 0===(u=i?i(h,s,l):void 0)&&(u=p(h)?h:c(e[a+1])?[]:{})}d(l,s,u),l=l[s]}return t}},{"./_assignValue":75,"./_castPath":133,"./_isIndex":181,"./_toKey":223,"./isObject":251}],123:[function(t,e,n){var i=t("./constant"),a=t("./_defineProperty"),r=t("./identity"),o=a?function(t,e){return a(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:r;e.exports=o},{"./_defineProperty":153,"./constant":228,"./identity":241}],124:[function(t,e,n){e.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},{}],125:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},{}],126:[function(t,e,n){var i=t("./_Symbol"),a=t("./_arrayMap"),r=t("./isArray"),o=t("./isSymbol"),l=i?i.prototype:void 0,s=l?l.toString:void 0;e.exports=function t(e){if("string"==typeof e)return e;if(r(e))return a(e,t)+"";if(o(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},{"./_Symbol":60,"./_arrayMap":69,"./isArray":243,"./isSymbol":256}],127:[function(t,e,n){e.exports=function(e){return function(t){return e(t)}}},{}],128:[function(t,e,n){var c=t("./_SetCache"),p=t("./_arrayIncludes"),g=t("./_arrayIncludesWith"),v=t("./_cacheHas"),y=t("./_createSet"),x=t("./_setToArray");e.exports=function(t,e,n){var i=-1,a=p,r=t.length,o=!0,l=[],s=l;if(n)o=!1,a=g;else if(200<=r){var u=e?null:y(t);if(u)return x(u);o=!1,a=v,s=new c}else s=e?[]:l;t:for(;++i<r;){var h=t[i],d=e?e(h):h;if(h=n||0!==h?h:0,o&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue t;e&&s.push(d),l.push(h)}else a(s,d,n)||(s!==l&&s.push(d),l.push(h))}return l}},{"./_SetCache":58,"./_arrayIncludes":66,"./_arrayIncludesWith":67,"./_cacheHas":131,"./_createSet":152,"./_setToArray":212}],129:[function(t,e,n){var i=t("./_arrayMap");e.exports=function(e,t){return i(t,function(t){return e[t]})}},{"./_arrayMap":69}],130:[function(t,e,n){e.exports=function(t,e,n){for(var i=-1,a=t.length,r=e.length,o={};++i<a;){var l=i<r?e[i]:void 0;n(o,t[i],l)}return o}},{}],131:[function(t,e,n){e.exports=function(t,e){return t.has(e)}},{}],132:[function(t,e,n){var i=t("./identity");e.exports=function(t){return"function"==typeof t?t:i}},{"./identity":241}],133:[function(t,e,n){var i=t("./isArray"),a=t("./_isKey"),r=t("./_stringToPath"),o=t("./toString");e.exports=function(t,e){return i(t)?t:a(t,e)?[t]:r(o(t))}},{"./_isKey":183,"./_stringToPath":222,"./isArray":243,"./toString":283}],134:[function(t,e,n){var i=t("./_Uint8Array");e.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},{"./_Uint8Array":61}],135:[function(t,e,n){var i=t("./_root"),a="object"==(0,f.default)(n)&&n&&!n.nodeType&&n,r=a&&"object"==(0,f.default)(e)&&e&&!e.nodeType&&e,o=r&&r.exports===a?i.Buffer:void 0,l=o?o.allocUnsafe:void 0;e.exports=function(t,e){if(e)return t.slice();var n=t.length,i=l?l(n):new t.constructor(n);return t.copy(i),i}},{"./_root":208}],136:[function(t,e,n){var i=t("./_cloneArrayBuffer");e.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},{"./_cloneArrayBuffer":134}],137:[function(t,e,n){var i=/\w*$/;e.exports=function(t){var e=new t.constructor(t.source,i.exec(t));return e.lastIndex=t.lastIndex,e}},{}],138:[function(t,e,n){var i=t("./_Symbol"),a=i?i.prototype:void 0,r=a?a.valueOf:void 0;e.exports=function(t){return r?Object(r.call(t)):{}}},{"./_Symbol":60}],139:[function(t,e,n){var i=t("./_cloneArrayBuffer");e.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},{"./_cloneArrayBuffer":134}],140:[function(t,e,n){var h=t("./isSymbol");e.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,a=t==t,r=h(t),o=void 0!==e,l=null===e,s=e==e,u=h(e);if(!l&&!u&&!r&&e<t||r&&o&&s&&!l&&!u||i&&o&&s||!n&&s||!a)return 1;if(!i&&!r&&!u&&t<e||u&&n&&a&&!i&&!r||l&&n&&a||!o&&a||!s)return-1}return 0}},{"./isSymbol":256}],141:[function(t,e,n){var u=t("./_compareAscending");e.exports=function(t,e,n){for(var i=-1,a=t.criteria,r=e.criteria,o=a.length,l=n.length;++i<o;){var s=u(a[i],r[i]);if(s)return l<=i?s:s*("desc"==n[i]?-1:1)}return t.index-e.index}},{"./_compareAscending":140}],142:[function(t,e,n){e.exports=function(t,e){var n=-1,i=t.length;for(e=e||Array(i);++n<i;)e[n]=t[n];return e}},{}],143:[function(t,e,n){var u=t("./_assignValue"),h=t("./_baseAssignValue");e.exports=function(t,e,n,i){var a=!n;n=n||{};for(var r=-1,o=e.length;++r<o;){var l=e[r],s=i?i(n[l],t[l],l,n,t):void 0;void 0===s&&(s=t[l]),(a?h:u)(n,l,s)}return n}},{"./_assignValue":75,"./_baseAssignValue":79}],144:[function(t,e,n){var i=t("./_copyObject"),a=t("./_getSymbols");e.exports=function(t,e){return i(t,a(t),e)}},{"./_copyObject":143,"./_getSymbols":166}],145:[function(t,e,n){var i=t("./_copyObject"),a=t("./_getSymbolsIn");e.exports=function(t,e){return i(t,a(t),e)}},{"./_copyObject":143,"./_getSymbolsIn":167}],146:[function(t,e,n){var i=t("./_root")["__core-js_shared__"];e.exports=i},{"./_root":208}],147:[function(t,e,n){var i=t("./_baseRest"),s=t("./_isIterateeCall");e.exports=function(l){return i(function(t,e){var n=-1,i=e.length,a=1<i?e[i-1]:void 0,r=2<i?e[2]:void 0;for(a=3<l.length&&"function"==typeof a?(i--,a):void 0,r&&s(e[0],e[1],r)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var o=e[n];o&&l(t,o,n,a)}return t})}},{"./_baseRest":121,"./_isIterateeCall":182}],148:[function(t,e,n){var l=t("./isArrayLike");e.exports=function(r,o){return function(t,e){if(null==t)return t;if(!l(t))return r(t,e);for(var n=t.length,i=o?n:-1,a=Object(t);(o?i--:++i<n)&&!1!==e(a[i],i,a););return t}}},{"./isArrayLike":244}],149:[function(t,e,n){e.exports=function(s){return function(t,e,n){for(var i=-1,a=Object(t),r=n(t),o=r.length;o--;){var l=r[s?o:++i];if(!1===e(a[l],l,a))break}return t}}},{}],150:[function(t,e,n){var l=t("./_baseIteratee"),s=t("./isArrayLike"),u=t("./keys");e.exports=function(o){return function(t,e,n){var i=Object(t);if(!s(t)){var a=l(e,3);t=u(t),e=function(t){return a(i[t],t,i)}}var r=o(t,e,n);return-1<r?i[a?t[r]:r]:void 0}}},{"./_baseIteratee":105,"./isArrayLike":244,"./keys":259}],151:[function(t,e,n){var a=t("./_baseRange"),r=t("./_isIterateeCall"),o=t("./toFinite");e.exports=function(i){return function(t,e,n){return n&&"number"!=typeof n&&r(t,e,n)&&(e=n=void 0),t=o(t),void 0===e?(e=t,t=0):e=o(e),n=void 0===n?t<e?1:-1:o(n),a(t,e,n,i)}}},{"./_baseRange":119,"./_isIterateeCall":182,"./toFinite":279}],152:[function(t,e,n){var i=t("./_Set"),a=t("./noop"),r=t("./_setToArray"),o=i&&1/r(new i([,-0]))[1]==1/0?function(t){return new i(t)}:a;e.exports=o},{"./_Set":57,"./_setToArray":212,"./noop":269}],153:[function(t,e,n){var i=t("./_getNative"),a=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=a},{"./_getNative":163}],154:[function(t,e,n){var v=t("./_SetCache"),y=t("./_arraySome"),x=t("./_cacheHas");e.exports=function(t,e,n,i,a,r){var o=1&n,l=t.length,s=e.length;if(l!=s&&!(o&&l<s))return!1;var u=r.get(t);if(u&&r.get(e))return u==e;var h=-1,d=!0,f=2&n?new v:void 0;for(r.set(t,e),r.set(e,t);++h<l;){var c=t[h],p=e[h];if(i)var g=o?i(p,c,h,e,t,r):i(c,p,h,t,e,r);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!y(e,function(t,e){if(!x(f,e)&&(c===t||a(c,t,n,i,r)))return f.push(e)})){d=!1;break}}else if(c!==p&&!a(c,p,n,i,r)){d=!1;break}}return r.delete(t),r.delete(e),d}},{"./_SetCache":58,"./_arraySome":72,"./_cacheHas":131}],155:[function(t,e,n){var i=t("./_Symbol"),d=t("./_Uint8Array"),f=t("./eq"),c=t("./_equalArrays"),p=t("./_mapToArray"),g=t("./_setToArray"),a=i?i.prototype:void 0,v=a?a.valueOf:void 0;e.exports=function(t,e,n,i,a,r,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new d(t),new d(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return f(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var l=p;case"[object Set]":var s=1&i;if(l=l||g,t.size!=e.size&&!s)return!1;var u=o.get(t);if(u)return u==e;i|=2,o.set(t,e);var h=c(l(t),l(e),i,a,r,o);return o.delete(t),h;case"[object Symbol]":if(v)return v.call(t)==v.call(e)}return!1}},{"./_Symbol":60,"./_Uint8Array":61,"./_equalArrays":154,"./_mapToArray":198,"./_setToArray":212,"./eq":231}],156:[function(t,e,n){var _=t("./_getAllKeys"),m=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,i,a,r){var o=1&n,l=_(t),s=l.length;if(s!=_(e).length&&!o)return!1;for(var u=s;u--;){var h=l[u];if(!(o?h in e:m.call(e,h)))return!1}var d=r.get(t);if(d&&r.get(e))return d==e;var f=!0;r.set(t,e),r.set(e,t);for(var c=o;++u<s;){var p=t[h=l[u]],g=e[h];if(i)var v=o?i(g,p,h,e,t,r):i(p,g,h,t,e,r);if(!(void 0===v?p===g||a(p,g,n,i,r):v)){f=!1;break}c=c||"constructor"==h}if(f&&!c){var y=t.constructor,x=e.constructor;y!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x)&&(f=!1)}return r.delete(t),r.delete(e),f}},{"./_getAllKeys":159}],157:[function(t,e,n){var i=t("./flatten"),a=t("./_overRest"),r=t("./_setToString");e.exports=function(t){return r(a(t,void 0,i),t+"")}},{"./_overRest":207,"./_setToString":213,"./flatten":235}],158:[function(t,n,e){(function(t){var e="object"==(0,f.default)(t)&&t&&t.Object===Object&&t;n.exports=e}).call(this,i)},{}],159:[function(t,e,n){var i=t("./_baseGetAllKeys"),a=t("./_getSymbols"),r=t("./keys");e.exports=function(t){return i(t,r,a)}},{"./_baseGetAllKeys":90,"./_getSymbols":166,"./keys":259}],160:[function(t,e,n){var i=t("./_baseGetAllKeys"),a=t("./_getSymbolsIn"),r=t("./keysIn");e.exports=function(t){return i(t,r,a)}},{"./_baseGetAllKeys":90,"./_getSymbolsIn":167,"./keysIn":260}],161:[function(t,e,n){var i=t("./_isKeyable");e.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},{"./_isKeyable":184}],162:[function(t,e,n){var r=t("./_isStrictComparable"),o=t("./keys");e.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},{"./_isStrictComparable":187,"./keys":259}],163:[function(t,e,n){var i=t("./_baseIsNative"),a=t("./_getValue");e.exports=function(t,e){var n=a(t,e);return i(n)?n:void 0}},{"./_baseIsNative":102,"./_getValue":169}],164:[function(t,e,n){var i=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=i},{"./_overArg":206}],165:[function(t,e,n){var i=t("./_Symbol"),a=Object.prototype,r=a.hasOwnProperty,o=a.toString,l=i?i.toStringTag:void 0;e.exports=function(t){var e=r.call(t,l),n=t[l];try{var i=!(t[l]=void 0)}catch(t){}var a=o.call(t);return i&&(e?t[l]=n:delete t[l]),a}},{"./_Symbol":60}],166:[function(t,e,n){var i=t("./_arrayFilter"),a=t("./stubArray"),r=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,l=o?function(e){return null==e?[]:(e=Object(e),i(o(e),function(t){return r.call(e,t)}))}:a;e.exports=l},{"./_arrayFilter":65,"./stubArray":277}],167:[function(t,e,n){var i=t("./_arrayPush"),a=t("./_getPrototype"),r=t("./_getSymbols"),o=t("./stubArray"),l=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,r(t)),t=a(t);return e}:o;e.exports=l},{"./_arrayPush":70,"./_getPrototype":164,"./_getSymbols":166,"./stubArray":277}],168:[function(t,e,n){var i=t("./_DataView"),a=t("./_Map"),r=t("./_Promise"),o=t("./_Set"),l=t("./_WeakMap"),s=t("./_baseGetTag"),u=t("./_toSource"),h="[object Map]",d="[object Promise]",f="[object Set]",c="[object WeakMap]",p="[object DataView]",g=u(i),v=u(a),y=u(r),x=u(o),_=u(l),m=s;(i&&m(new i(new ArrayBuffer(1)))!=p||a&&m(new a)!=h||r&&m(r.resolve())!=d||o&&m(new o)!=f||l&&m(new l)!=c)&&(m=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case g:return p;case v:return h;case y:return d;case x:return f;case _:return c}return e}),e.exports=m},{"./_DataView":51,"./_Map":54,"./_Promise":56,"./_Set":57,"./_WeakMap":62,"./_baseGetTag":91,"./_toSource":224}],169:[function(t,e,n){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],170:[function(t,e,n){var l=t("./_castPath"),s=t("./isArguments"),u=t("./isArray"),h=t("./_isIndex"),d=t("./isLength"),f=t("./_toKey");e.exports=function(t,e,n){for(var i=-1,a=(e=l(e,t)).length,r=!1;++i<a;){var o=f(e[i]);if(!(r=null!=t&&n(t,o)))break;t=t[o]}return r||++i!=a?r:!!(a=null==t?0:t.length)&&d(a)&&h(o,a)&&(u(t)||s(t))}},{"./_castPath":133,"./_isIndex":181,"./_toKey":223,"./isArguments":242,"./isArray":243,"./isLength":249}],171:[function(t,e,n){var i=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(t){return i.test(t)}},{}],172:[function(t,e,n){var i=t("./_nativeCreate");e.exports=function(){this.__data__=i?i(null):{},this.size=0}},{"./_nativeCreate":201}],173:[function(t,e,n){e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},{}],174:[function(t,e,n){var i=t("./_nativeCreate"),a=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(e,t)?e[t]:void 0}},{"./_nativeCreate":201}],175:[function(t,e,n){var i=t("./_nativeCreate"),a=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}},{"./_nativeCreate":201}],176:[function(t,e,n){var i=t("./_nativeCreate");e.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},{"./_nativeCreate":201}],177:[function(t,e,n){var i=Object.prototype.hasOwnProperty;e.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&i.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},{}],178:[function(t,e,n){var a=t("./_cloneArrayBuffer"),r=t("./_cloneDataView"),o=t("./_cloneRegExp"),l=t("./_cloneSymbol"),s=t("./_cloneTypedArray");e.exports=function(t,e,n){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return a(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return r(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return o(t);case"[object Set]":return new i;case"[object Symbol]":return l(t)}}},{"./_cloneArrayBuffer":134,"./_cloneDataView":136,"./_cloneRegExp":137,"./_cloneSymbol":138,"./_cloneTypedArray":139}],179:[function(t,e,n){var i=t("./_baseCreate"),a=t("./_getPrototype"),r=t("./_isPrototype");e.exports=function(t){return"function"!=typeof t.constructor||r(t)?{}:i(a(t))}},{"./_baseCreate":81,"./_getPrototype":164,"./_isPrototype":186}],180:[function(t,e,n){var i=t("./_Symbol"),a=t("./isArguments"),r=t("./isArray"),o=i?i.isConcatSpreadable:void 0;e.exports=function(t){return r(t)||a(t)||!!(o&&t&&t[o])}},{"./_Symbol":60,"./isArguments":242,"./isArray":243}],181:[function(t,e,n){var i=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var n=(0,f.default)(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&i.test(t))&&-1<t&&t%1==0&&t<e}},{}],182:[function(t,e,n){var a=t("./eq"),r=t("./isArrayLike"),o=t("./_isIndex"),l=t("./isObject");e.exports=function(t,e,n){if(!l(n))return!1;var i=(0,f.default)(e);return!!("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n)&&a(n[e],t)}},{"./_isIndex":181,"./eq":231,"./isArrayLike":244,"./isObject":251}],183:[function(t,e,n){var i=t("./isArray"),a=t("./isSymbol"),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(t,e){if(i(t))return!1;var n=(0,f.default)(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!a(t))||o.test(t)||!r.test(t)||null!=e&&t in Object(e)}},{"./isArray":243,"./isSymbol":256}],184:[function(t,e,n){e.exports=function(t){var e=(0,f.default)(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],185:[function(t,e,n){var i,a=t("./_coreJsData"),r=(i=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(t){return!!r&&r in t}},{"./_coreJsData":146}],186:[function(t,e,n){var i=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},{}],187:[function(t,e,n){var i=t("./isObject");e.exports=function(t){return t==t&&!i(t)}},{"./isObject":251}],188:[function(t,e,n){e.exports=function(){this.__data__=[],this.size=0}},{}],189:[function(t,e,n){var i=t("./_assocIndexOf"),a=Array.prototype.splice;e.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():a.call(e,n,1),--this.size,0))}},{"./_assocIndexOf":76}],190:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},{"./_assocIndexOf":76}],191:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t){return-1<i(this.__data__,t)}},{"./_assocIndexOf":76}],192:[function(t,e,n){var a=t("./_assocIndexOf");e.exports=function(t,e){var n=this.__data__,i=a(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},{"./_assocIndexOf":76}],193:[function(t,e,n){var i=t("./_Hash"),a=t("./_ListCache"),r=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(r||a),string:new i}}},{"./_Hash":52,"./_ListCache":53,"./_Map":54}],194:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},{"./_getMapData":161}],195:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){return i(this,t).get(t)}},{"./_getMapData":161}],196:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){return i(this,t).has(t)}},{"./_getMapData":161}],197:[function(t,e,n){var a=t("./_getMapData");e.exports=function(t,e){var n=a(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},{"./_getMapData":161}],198:[function(t,e,n){e.exports=function(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i}},{}],199:[function(t,e,n){e.exports=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}}},{}],200:[function(t,e,n){var i=t("./memoize");e.exports=function(t){var e=i(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},{"./memoize":265}],201:[function(t,e,n){var i=t("./_getNative")(Object,"create");e.exports=i},{"./_getNative":163}],202:[function(t,e,n){var i=t("./_overArg")(Object.keys,Object);e.exports=i},{"./_overArg":206}],203:[function(t,e,n){e.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},{}],204:[function(t,e,n){var i=t("./_freeGlobal"),a="object"==(0,f.default)(n)&&n&&!n.nodeType&&n,r=a&&"object"==(0,f.default)(e)&&e&&!e.nodeType&&e,o=r&&r.exports===a&&i.process,l=function(){try{var t=r&&r.require&&r.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=l},{"./_freeGlobal":158}],205:[function(t,e,n){var i=Object.prototype.toString;e.exports=function(t){return i.call(t)}},{}],206:[function(t,e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},{}],207:[function(t,e,n){var s=t("./_apply"),u=Math.max;e.exports=function(r,o,l){return o=u(void 0===o?r.length-1:o,0),function(){for(var t=arguments,e=-1,n=u(t.length-o,0),i=Array(n);++e<n;)i[e]=t[o+e];e=-1;for(var a=Array(o+1);++e<o;)a[e]=t[e];return a[o]=l(i),s(r,this,a)}}},{"./_apply":63}],208:[function(t,e,n){var i=t("./_freeGlobal"),a="object"==("undefined"==typeof self?"undefined":(0,f.default)(self))&&self&&self.Object===Object&&self,r=i||a||Function("return this")();e.exports=r},{"./_freeGlobal":158}],209:[function(t,e,n){e.exports=function(t,e){return"__proto__"==e?void 0:t[e]}},{}],210:[function(t,e,n){e.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},{}],211:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],212:[function(t,e,n){e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},{}],213:[function(t,e,n){var i=t("./_baseSetToString"),a=t("./_shortOut")(i);e.exports=a},{"./_baseSetToString":123,"./_shortOut":214}],214:[function(t,e,n){var r=Date.now;e.exports=function(n){var i=0,a=0;return function(){var t=r(),e=16-(t-a);if(a=t,0<e){if(800<=++i)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}},{}],215:[function(t,e,n){var i=t("./_ListCache");e.exports=function(){this.__data__=new i,this.size=0}},{"./_ListCache":53}],216:[function(t,e,n){e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},{}],217:[function(t,e,n){e.exports=function(t){return this.__data__.get(t)}},{}],218:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],219:[function(t,e,n){var a=t("./_ListCache"),r=t("./_Map"),o=t("./_MapCache");e.exports=function(t,e){var n=this.__data__;if(n instanceof a){var i=n.__data__;if(!r||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(t,e),this.size=n.size,this}},{"./_ListCache":53,"./_Map":54,"./_MapCache":55}],220:[function(t,e,n){e.exports=function(t,e,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===e)return i;return-1}},{}],221:[function(t,e,n){var i=t("./_asciiSize"),a=t("./_hasUnicode"),r=t("./_unicodeSize");e.exports=function(t){return(a(t)?r:i)(t)}},{"./_asciiSize":73,"./_hasUnicode":171,"./_unicodeSize":225}],222:[function(t,e,n){var i=t("./_memoizeCapped"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=i(function(t){var a=[];return 46===t.charCodeAt(0)&&a.push(""),t.replace(r,function(t,e,n,i){a.push(n?i.replace(o,"$1"):e||t)}),a});e.exports=a},{"./_memoizeCapped":200}],223:[function(t,e,n){var i=t("./isSymbol");e.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},{"./isSymbol":256}],224:[function(t,e,n){var i=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],225:[function(t,e,n){var i="\\ud800-\\udfff",a="["+i+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",l="[^"+i+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",h="(?:"+r+"|"+o+")?",d="[\\ufe0e\\ufe0f]?",f=d+h+"(?:\\u200d(?:"+[l,s,u].join("|")+")"+d+h+")*",c="(?:"+[l+r+"?",r,s,u,a].join("|")+")",p=RegExp(o+"(?="+o+")|"+c+f,"g");e.exports=function(t){for(var e=p.lastIndex=0;p.test(t);)++e;return e}},{}],226:[function(t,e,n){var i=t("./_baseClone");e.exports=function(t){return i(t,4)}},{"./_baseClone":80}],227:[function(t,e,n){var i=t("./_baseClone");e.exports=function(t){return i(t,5)}},{"./_baseClone":80}],228:[function(t,e,n){e.exports=function(t){return function(){return t}}},{}],229:[function(t,e,n){var i=t("./_baseRest"),d=t("./eq"),f=t("./_isIterateeCall"),c=t("./keysIn"),p=Object.prototype,g=p.hasOwnProperty,a=i(function(t,e){t=Object(t);var n=-1,i=e.length,a=2<i?e[2]:void 0;for(a&&f(e[0],e[1],a)&&(i=1);++n<i;)for(var r=e[n],o=c(r),l=-1,s=o.length;++l<s;){var u=o[l],h=t[u];(void 0===h||d(h,p[u])&&!g.call(t,u))&&(t[u]=r[u])}return t});e.exports=a},{"./_baseRest":121,"./_isIterateeCall":182,"./eq":231,"./keysIn":260}],230:[function(t,e,n){e.exports=t("./forEach")},{"./forEach":236}],231:[function(t,e,n){e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],232:[function(t,e,n){var i=t("./_arrayFilter"),a=t("./_baseFilter"),r=t("./_baseIteratee"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:a)(t,r(e,3))}},{"./_arrayFilter":65,"./_baseFilter":84,"./_baseIteratee":105,"./isArray":243}],233:[function(t,e,n){var i=t("./_createFind")(t("./findIndex"));e.exports=i},{"./_createFind":150,"./findIndex":234}],234:[function(t,e,n){var r=t("./_baseFindIndex"),o=t("./_baseIteratee"),l=t("./toInteger"),s=Math.max;e.exports=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=null==n?0:l(n);return a<0&&(a=s(i+a,0)),r(t,o(e,3),a)}},{"./_baseFindIndex":85,"./_baseIteratee":105,"./toInteger":280}],235:[function(t,e,n){var i=t("./_baseFlatten");e.exports=function(t){return null!=t&&t.length?i(t,1):[]}},{"./_baseFlatten":86}],236:[function(t,e,n){var i=t("./_arrayEach"),a=t("./_baseEach"),r=t("./_castFunction"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:a)(t,r(e))}},{"./_arrayEach":64,"./_baseEach":82,"./_castFunction":132,"./isArray":243}],237:[function(t,e,n){var i=t("./_baseFor"),a=t("./_castFunction"),r=t("./keysIn");e.exports=function(t,e){return null==t?t:i(t,a(e),r)}},{"./_baseFor":87,"./_castFunction":132,"./keysIn":260}],238:[function(t,e,n){var a=t("./_baseGet");e.exports=function(t,e,n){var i=null==t?void 0:a(t,e);return void 0===i?n:i}},{"./_baseGet":89}],239:[function(t,e,n){var i=t("./_baseHas"),a=t("./_hasPath");e.exports=function(t,e){return null!=t&&a(t,e,i)}},{"./_baseHas":93,"./_hasPath":170}],240:[function(t,e,n){var i=t("./_baseHasIn"),a=t("./_hasPath");e.exports=function(t,e){return null!=t&&a(t,e,i)}},{"./_baseHasIn":94,"./_hasPath":170}],241:[function(t,e,n){e.exports=function(t){return t}},{}],242:[function(t,e,n){var i=t("./_baseIsArguments"),a=t("./isObjectLike"),r=Object.prototype,o=r.hasOwnProperty,l=r.propertyIsEnumerable,s=i(function(){return arguments}())?i:function(t){return a(t)&&o.call(t,"callee")&&!l.call(t,"callee")};e.exports=s},{"./_baseIsArguments":96,"./isObjectLike":252}],243:[function(t,e,n){var i=Array.isArray;e.exports=i},{}],244:[function(t,e,n){var i=t("./isFunction"),a=t("./isLength");e.exports=function(t){return null!=t&&a(t.length)&&!i(t)}},{"./isFunction":248,"./isLength":249}],245:[function(t,e,n){var i=t("./isArrayLike"),a=t("./isObjectLike");e.exports=function(t){return a(t)&&i(t)}},{"./isArrayLike":244,"./isObjectLike":252}],246:[function(t,e,n){var i=t("./_root"),a=t("./stubFalse"),r="object"==(0,f.default)(n)&&n&&!n.nodeType&&n,o=r&&"object"==(0,f.default)(e)&&e&&!e.nodeType&&e,l=o&&o.exports===r?i.Buffer:void 0,s=(l?l.isBuffer:void 0)||a;e.exports=s},{"./_root":208,"./stubFalse":278}],247:[function(t,e,n){var i=t("./_baseKeys"),a=t("./_getTag"),r=t("./isArguments"),o=t("./isArray"),l=t("./isArrayLike"),s=t("./isBuffer"),u=t("./_isPrototype"),h=t("./isTypedArray"),d=Object.prototype.hasOwnProperty;e.exports=function(t){if(null==t)return!0;if(l(t)&&(o(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||h(t)||r(t)))return!t.length;var e=a(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(u(t))return!i(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},{"./_baseKeys":106,"./_getTag":168,"./_isPrototype":186,"./isArguments":242,"./isArray":243,"./isArrayLike":244,"./isBuffer":246,"./isTypedArray":257}],248:[function(t,e,n){var i=t("./_baseGetTag"),a=t("./isObject");e.exports=function(t){if(!a(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},{"./_baseGetTag":91,"./isObject":251}],249:[function(t,e,n){e.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},{}],250:[function(t,e,n){var i=t("./_baseIsMap"),a=t("./_baseUnary"),r=t("./_nodeUtil"),o=r&&r.isMap,l=o?a(o):i;e.exports=l},{"./_baseIsMap":99,"./_baseUnary":127,"./_nodeUtil":204}],251:[function(t,e,n){e.exports=function(t){var e=(0,f.default)(t);return null!=t&&("object"==e||"function"==e)}},{}],252:[function(t,e,n){e.exports=function(t){return null!=t&&"object"==(0,f.default)(t)}},{}],253:[function(t,e,n){var i=t("./_baseGetTag"),a=t("./_getPrototype"),r=t("./isObjectLike"),o=Function.prototype,l=Object.prototype,s=o.toString,u=l.hasOwnProperty,h=s.call(Object);e.exports=function(t){if(!r(t)||"[object Object]"!=i(t))return!1;var e=a(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==h}},{"./_baseGetTag":91,"./_getPrototype":164,"./isObjectLike":252}],254:[function(t,e,n){var i=t("./_baseIsSet"),a=t("./_baseUnary"),r=t("./_nodeUtil"),o=r&&r.isSet,l=o?a(o):i;e.exports=l},{"./_baseIsSet":103,"./_baseUnary":127,"./_nodeUtil":204}],255:[function(t,e,n){var i=t("./_baseGetTag"),a=t("./isArray"),r=t("./isObjectLike");e.exports=function(t){return"string"==typeof t||!a(t)&&r(t)&&"[object String]"==i(t)}},{"./_baseGetTag":91,"./isArray":243,"./isObjectLike":252}],256:[function(t,e,n){var i=t("./_baseGetTag"),a=t("./isObjectLike");e.exports=function(t){return"symbol"==(0,f.default)(t)||a(t)&&"[object Symbol]"==i(t)}},{"./_baseGetTag":91,"./isObjectLike":252}],257:[function(t,e,n){var i=t("./_baseIsTypedArray"),a=t("./_baseUnary"),r=t("./_nodeUtil"),o=r&&r.isTypedArray,l=o?a(o):i;e.exports=l},{"./_baseIsTypedArray":104,"./_baseUnary":127,"./_nodeUtil":204}],258:[function(t,e,n){e.exports=function(t){return void 0===t}},{}],259:[function(t,e,n){var i=t("./_arrayLikeKeys"),a=t("./_baseKeys"),r=t("./isArrayLike");e.exports=function(t){return(r(t)?i:a)(t)}},{"./_arrayLikeKeys":68,"./_baseKeys":106,"./isArrayLike":244}],260:[function(t,e,n){var i=t("./_arrayLikeKeys"),a=t("./_baseKeysIn"),r=t("./isArrayLike");e.exports=function(t){return r(t)?i(t,!0):a(t)}},{"./_arrayLikeKeys":68,"./_baseKeysIn":107,"./isArrayLike":244}],261:[function(t,e,n){e.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},{}],262:[function(t,e,n){var i=t("./_arrayMap"),a=t("./_baseIteratee"),r=t("./_baseMap"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:r)(t,a(e,3))}},{"./_arrayMap":69,"./_baseIteratee":105,"./_baseMap":109,"./isArray":243}],263:[function(t,e,n){var r=t("./_baseAssignValue"),o=t("./_baseForOwn"),l=t("./_baseIteratee");e.exports=function(t,i){var a={};return i=l(i,3),o(t,function(t,e,n){r(a,e,i(t,e,n))}),a}},{"./_baseAssignValue":79,"./_baseForOwn":88,"./_baseIteratee":105}],264:[function(t,e,n){var i=t("./_baseExtremum"),a=t("./_baseGt"),r=t("./identity");e.exports=function(t){return t&&t.length?i(t,r,a):void 0}},{"./_baseExtremum":83,"./_baseGt":92,"./identity":241}],265:[function(t,e,n){var i=t("./_MapCache"),l="Expected a function";function s(a,r){if("function"!=typeof a||null!=r&&"function"!=typeof r)throw new TypeError(l);function o(){var t=arguments,e=r?r.apply(this,t):t[0],n=o.cache;if(n.has(e))return n.get(e);var i=a.apply(this,t);return o.cache=n.set(e,i)||n,i}return o.cache=new(s.Cache||i),o}s.Cache=i,e.exports=s},{"./_MapCache":55}],266:[function(t,e,n){var i=t("./_baseMerge"),a=t("./_createAssigner")(function(t,e,n){i(t,e,n)});e.exports=a},{"./_baseMerge":112,"./_createAssigner":147}],267:[function(t,e,n){var i=t("./_baseExtremum"),a=t("./_baseLt"),r=t("./identity");e.exports=function(t){return t&&t.length?i(t,r,a):void 0}},{"./_baseExtremum":83,"./_baseLt":108,"./identity":241}],268:[function(t,e,n){var i=t("./_baseExtremum"),a=t("./_baseIteratee"),r=t("./_baseLt");e.exports=function(t,e){return t&&t.length?i(t,a(e,2),r):void 0}},{"./_baseExtremum":83,"./_baseIteratee":105,"./_baseLt":108}],269:[function(t,e,n){e.exports=function(){}},{}],270:[function(t,e,n){var i=t("./_root");e.exports=function(){return i.Date.now()}},{"./_root":208}],271:[function(t,e,n){var i=t("./_basePick"),a=t("./_flatRest")(function(t,e){return null==t?{}:i(t,e)});e.exports=a},{"./_basePick":115,"./_flatRest":157}],272:[function(t,e,n){var i=t("./_baseProperty"),a=t("./_basePropertyDeep"),r=t("./_isKey"),o=t("./_toKey");e.exports=function(t){return r(t)?i(o(t)):a(t)}},{"./_baseProperty":117,"./_basePropertyDeep":118,"./_isKey":183,"./_toKey":223}],273:[function(t,e,n){var i=t("./_createRange")();e.exports=i},{"./_createRange":151}],274:[function(t,e,n){var r=t("./_arrayReduce"),o=t("./_baseEach"),l=t("./_baseIteratee"),s=t("./_baseReduce"),u=t("./isArray");e.exports=function(t,e,n){var i=u(t)?r:s,a=arguments.length<3;return i(t,l(e,4),n,a,o)}},{"./_arrayReduce":71,"./_baseEach":82,"./_baseIteratee":105,"./_baseReduce":120,"./isArray":243}],275:[function(t,e,n){var i=t("./_baseKeys"),a=t("./_getTag"),r=t("./isArrayLike"),o=t("./isString"),l=t("./_stringSize");e.exports=function(t){if(null==t)return 0;if(r(t))return o(t)?l(t):t.length;var e=a(t);return"[object Map]"==e||"[object Set]"==e?t.size:i(t).length}},{"./_baseKeys":106,"./_getTag":168,"./_stringSize":221,"./isArrayLike":244,"./isString":255}],276:[function(t,e,n){var i=t("./_baseFlatten"),a=t("./_baseOrderBy"),r=t("./_baseRest"),o=t("./_isIterateeCall"),l=r(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&o(t,e[0],e[1])?e=[]:2<n&&o(e[0],e[1],e[2])&&(e=[e[0]]),a(t,i(e,1),[])});e.exports=l},{"./_baseFlatten":86,"./_baseOrderBy":114,"./_baseRest":121,"./_isIterateeCall":182}],277:[function(t,e,n){e.exports=function(){return[]}},{}],278:[function(t,e,n){e.exports=function(){return!1}},{}],279:[function(t,e,n){var i=t("./toNumber");e.exports=function(t){return t?(t=i(t))!==1/0&&t!==-1/0?t==t?t:0:17976931348623157e292*(t<0?-1:1):0===t?t:0}},{"./toNumber":281}],280:[function(t,e,n){var i=t("./toFinite");e.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},{"./toFinite":279}],281:[function(t,e,n){var i=t("./isObject"),a=t("./isSymbol"),r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=l.test(t);return n||s.test(t)?u(t.slice(2),n?2:8):o.test(t)?NaN:+t}},{"./isObject":251,"./isSymbol":256}],282:[function(t,e,n){var i=t("./_copyObject"),a=t("./keysIn");e.exports=function(t){return i(t,a(t))}},{"./_copyObject":143,"./keysIn":260}],283:[function(t,e,n){var i=t("./_baseToString");e.exports=function(t){return null==t?"":i(t)}},{"./_baseToString":126}],284:[function(t,e,n){var o=t("./_arrayEach"),l=t("./_baseCreate"),s=t("./_baseForOwn"),u=t("./_baseIteratee"),h=t("./_getPrototype"),d=t("./isArray"),f=t("./isBuffer"),c=t("./isFunction"),p=t("./isObject"),g=t("./isTypedArray");e.exports=function(t,i,a){var e=d(t),n=e||f(t)||g(t);if(i=u(i,4),null==a){var r=t&&t.constructor;a=n?e?new r:[]:p(t)&&c(r)?l(h(t)):{}}return(n?o:s)(t,function(t,e,n){return i(a,t,e,n)}),a}},{"./_arrayEach":64,"./_baseCreate":81,"./_baseForOwn":88,"./_baseIteratee":105,"./_getPrototype":164,"./isArray":243,"./isBuffer":246,"./isFunction":248,"./isObject":251,"./isTypedArray":257}],285:[function(t,e,n){var i=t("./_baseFlatten"),a=t("./_baseRest"),r=t("./_baseUniq"),o=t("./isArrayLikeObject"),l=a(function(t){return r(i(t,1,o,!0))});e.exports=l},{"./_baseFlatten":86,"./_baseRest":121,"./_baseUniq":128,"./isArrayLikeObject":245}],286:[function(t,e,n){var i=t("./toString"),a=0;e.exports=function(t){var e=++a;return i(t)+e}},{"./toString":283}],287:[function(t,e,n){var i=t("./_baseValues"),a=t("./keys");e.exports=function(t){return null==t?[]:i(t,a(t))}},{"./_baseValues":129,"./keys":259}],288:[function(t,e,n){var i=t("./_assignValue"),a=t("./_baseZipObject");e.exports=function(t,e){return a(t||[],e||[],i)}},{"./_assignValue":75,"./_baseZipObject":130}]},{},[1])(1)},"object"===(0,f.default)(e)?t.exports=n():("undefined"!=typeof window?window:i).dagre=n()});t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=H(We),i=H(Dn);n.default.registerLayout("dagre",i.default);var a=i.default;e.default=a})),t(e(function(t,e){function n(){var d=(0,x.default)().sort(null).value(null),v=i,f=[1,1],c=null;function e(t,e){var n=d.call(this,t,e),l=n[0],i=function(){for(var t,e={A:null,children:[l]},n=[e];null!=(t=n.pop());)for(var i,a=t.children,r=0,o=a.length;r<o;++r)n.push((a[r]=i={_:a[r],parent:t,children:(i=a[r].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:r}).a=i);return e.children[0]}();if(x.default.layout_hierarchyVisitAfter(i,p),i.parent.m=-i.z,x.default.layout_hierarchyVisitBefore(i,g),c)x.default.layout_hierarchyVisitBefore(l,y);else{var a=l,r=l,o=l;x.default.layout_hierarchyVisitBefore(l,function(t){t.x<a.x&&(a=t),t.x>r.x&&(r=t),t.depth>o.depth&&(o=t)});var s=v(a,r)/2-a.x,u=f[0]/(r.x+v(r,a)/2+s),h=f[1]/(o.depth||1);x.default.layout_hierarchyVisitBefore(l,function(t){t.x=(t.x+s)*u,t.y=t.depth*h})}return n}function p(r){var t=r.children,e=r.parent.children,g=r.i?e[r.i-1]:null;if(t.length){!function(){for(var t,e=0,n=0,i=r.children,a=i.length;0<=--a;)(t=i[a]).z+=e,t.m+=e,e+=t.s+(n+=t.c)}();var n=(t[0].z+t[t.length-1].z)/2;g?(r.z=g.z+v(r._,g._),r.m=r.z-n):r.z=n}else g&&(r.z=g.z+v(r._,g._));r.parent.A=function(t,e){if(g){for(var n,i=t,a=t,r=g,o=i.parent.children[0],l=i.m,s=a.m,u=r.m,h=o.m;r=m(r),i=_(i),r&&i;)o=_(o),(a=m(a)).a=t,0<(n=r.z+u-i.z-l+v(r._,i._))&&(d=r.a.parent===t.parent?r.a:e,p=(c=n)/((f=t).i-d.i),f.c-=p,f.s+=c,d.c+=p,f.z+=c,f.m+=c,l+=n,s+=n),u+=r.m,l+=i.m,h+=o.m,s+=a.m;r&&!m(a)&&(a.t=r,a.m+=u-s),i&&!_(o)&&(o.t=i,o.m+=l-h,e=t)}var d,f,c,p;return e}(r,r.parent.A||e[0])}function g(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function y(t){t.x*=f[0],t.y=t.depth*f[1]}return e.separation=function(t){return arguments.length?(v=t,e):v},e.size=function(t){return arguments.length?(c=null==(f=t)?y:null,e):c?null:f},e.nodeSize=function(t){return arguments.length?(c=null==(f=t)?null:y,e):c?f:null},x.default.layout_hierarchyRebind(e,d)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var x=H(Sn);function i(t,e){return t.parent==e.parent?1:2}function _(t){var e=t.children;return e.length?e[0]:t.t}function m(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}H(We).default.registerLayout("tree",n);var a=n;e.default=a}));var Ln=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=H(ze);e.default=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t),this.comp=e,this.params=n}});return t(Ln),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),x=H(Ce),_=H(Ln),m=x.default._,b=x.default.event,w=x.default.Shapes.Circle,h=(n=u.default,(0,s.default)(d,n),(0,l.default)(d,null,[{key:"defaultProps",value:function(){return{data:{detail:"图例数据",default:[],documentation:'                    数据结构为：{name: "uv", color: "#ff8533", field: "" ...}                    如果手动传入数据只需要前面这三个 enabled: true, ind: 0                    外部只需要传field和fillStyle就行了                    '},position:{detail:"图例位置",documentation:"图例所在的方向top,right,bottom,left",default:"top"},direction:{detail:"图例布局方向",default:"h",documentation:"横向 top,bottom --\x3e h left,right -- >v"},textAlign:{detail:"水平方向的对其，默认居左对其",default:"left",documentation:"可选left，center，right"},verticalAlign:{detail:"垂直方向的对其方式，默认居中（待实现）",default:"middle",documentation:"可选top，middle，bottom"},icon:{detail:"图标设置",propertys:{height:{detail:"高",default:26},width:{detail:"图标宽",default:"auto"},shapeType:{detail:"图标的图形类型，目前只实现了圆形",default:"circle"},radius:{detail:"图标（circle）半径",default:5},lineWidth:{detail:"图标描边宽度",default:1},fillStyle:{detail:"图标颜色，一般会从data里面取，这里是默认色",default:"#999"}}},label:{detail:"文本配置",propertys:{textAlign:{detail:"水平对齐方式",default:"left"},textBaseline:{detail:"文本基线对齐方式",default:"middle"},fontColor:{detail:"文本颜色",default:"#333333"},cursor:{detail:"鼠标样式",default:"pointer"},format:{detail:"文本格式化处理函数",default:null}}},activeEnabled:{detail:"是否启动图例的",default:!0},tipsEnabled:{detail:"是否开启图例的tips",default:!1}}}}]),(0,l.default)(d,[{key:"_getLegendData",value:function(t){var e=t.data;return e?m.each(e,function(t,e){t.enabled=!0,t.ind=e}):e=this.app.getLegendData(),e||[]}},{key:"layout",value:function(){var t,e=this.app,n=this.width+this.margin.left+this.margin.right,i=this.height+this.margin.top+this.margin.bottom,a=e.padding.left,r=e.padding.top;return"right"==this.position&&(a=e.width-e.padding.right-n),"bottom"==this.position&&(r=e.height-e.padding.bottom-i/2),"left"==this.position||"right"==this.position?(e.padding[this.position]+=n,t=n,e.height,e.padding.top,e.padding.bottom):"top"!=this.position&&"bottom"!=this.position||(e.padding[this.position]+=i,t=e.width-e.padding.right-e.padding.left),"center"==this.textAlign&&(a+=t/2-this.width/2),"right"==this.textAlign&&(a+=t-this.width),this.pos={x:a,y:r},this.pos}},{key:"draw",value:function(){var t=this.app.getComponent({name:"coord"});t&&"rect"==t.type&&("left"!=this.textAlign||"top"!=this.position&&"bottom"!=this.position||(this.pos.x=t.getSizeAndOrigin().origin.x+this.icon.radius)),this.setPosition()}},{key:"widget",value:function(){var s=this,u=this.app.width-this.app.padding.left-this.app.padding.right,h=this.app.height-this.app.padding.top-this.app.padding.bottom,d=0,f=0,c=0,p=0,g=0,v=1,y=!1;m.each(this.data,function(e,t){if(!y){var n=new w({id:"legend_field_icon_"+t,context:{x:0,y:s.icon.height/3,fillStyle:e.enabled?e.color||"#999":"#ccc",r:s.icon.radius,cursor:"pointer"}});n.on(b.types.get(),function(t){});var i=e.name;s.label.format&&(i=s.label.format(e.name,e));var a=new x.default.Display.Text(i,{id:"legend_field_txt_"+t,context:{x:s.icon.radius+3,y:s.icon.height/3,textAlign:s.label.textAlign,textBaseline:s.label.textBaseline,fillStyle:s.label.fontColor,cursor:s.label.cursor}});a.on(b.types.get(),function(t){});var r=a.getTextWidth()+2*s.icon.radius+20;d=Math.max(d,r);var o={height:s.icon.height};if("v"==s.direction){if(g+s.icon.height>h){if(.3*u<p)return void(y=!0);p+=d,g=0}o.x=p,o.y=g,g+=s.icon.height,c=Math.max(c,g)}else{if(u<p+r){if(s.icon.height*(v+1)>.3*h)return void(y=!0);p=0,v++}o.x=p,o.y=s.icon.height*(v-1),p+=r,f=Math.max(f,p)}var l=new x.default.Display.Sprite({id:"legend_field_"+t,context:o});l.addChild(n),l.addChild(a),l.context.width=r,s.sprite.addChild(l),l.on(b.types.get(),function(t){if("click"==t.type&&s.activeEnabled){if(1==m.filter(s.data,function(t){return t.enabled}).length&&e.enabled)return;e.enabled=!e.enabled,n.context.fillStyle=e.enabled?e.color||"#999":"#ccc",e.enabled?s.app.show(e.name,new _.default(this,e)):s.app.hide(e.name,new _.default(this,e))}s.tipsEnabled&&("mouseover"!=t.type&&"mousemove"!=t.type||(t.eventInfo=s._getInfoHandler(t,e)),"mouseout"==t.type&&delete t.eventInfo,s.app.fire(t.type,t))})}}),"h"==this.direction?(s.width=s.sprite.context.width=f,s.height=s.sprite.context.height=s.icon.height*v):(s.width=s.sprite.context.width=p+d,s.height=s.sprite.context.height=c)}},{key:"_getInfoHandler",value:function(t,e){return{type:"legend",triggerType:"legend",trigger:this,tipsEnabled:this.tipsEnabled,nodes:[{name:e.name,fillStyle:e.color}]}}}]),d);function d(t,e){var n;return(0,i.default)(this,d),(n=(0,a.default)(this,(0,r.default)(d).call(this,t,e))).name="legend",m.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(d.defaultProps()),t),n.data=n._getLegendData(t),!t.direction&&t.position&&("left"==n.position||"right"==n.position?n.direction="v":n.direction="h"),n.sprite=new x.default.Display.Sprite({id:"LegendSprite",context:{x:n.pos.x,y:n.pos.y}}),n.app.stage.addChild(n.sprite),n.widget(),n.layout(),n}u.default.registerComponent(h,"legend");var f=h;e.default=f})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=H(Ln),f=h.default._,c=h.default.Shapes.Line,p=h.default.Shapes.Rect,g=(n=u.default,(0,s.default)(v,n),(0,l.default)(v,null,[{key:"defaultProps",value:function(){return{position:{detail:"位置",default:"bottom"},direction:{detail:"方向",default:"h"},height:{detail:"高",default:26},width:{detail:"宽",default:100},color:{detail:"颜色",default:"#008ae6"},range:{detail:"范围设置",propertys:{start:{detail:"开始位置",default:0},end:{detail:"结束位置，默认为null，表示到最后",default:null},max:{detail:"可以外围控制智能在哪个区间拖动",default:null},min:{detail:"最少至少选中了几个数据",default:1}}},left:{detail:"左边按钮",propertys:{eventEnabled:{detail:"是否响应事件",default:!0},fillStyle:{detail:"颜色，默认取组件.color",default:null}}},right:{detail:"右边按钮",propertys:{eventEnabled:{detail:"是否响应事件",default:!0},fillStyle:{detail:"颜色，默认取组件.color",default:null}}},center:{detail:"中间位置设置",propertys:{eventEnabled:{detail:"是否响应事件",default:!0},fillStyle:{detail:"填充色",default:"#000000"},alpha:{detail:"透明度",default:.015}}},bg:{detail:"背景设置",propertys:{enabled:{detail:"是否开启",default:!0},fillStyle:{detail:"填充色",default:""},strokeStyle:{detail:"边框色",default:"#e6e6e6"},lineWidth:{detail:"线宽",default:1}}},graphAlpha:{detail:"图形的透明度",default:.6},graphStyle:{detail:"图形的颜色",default:"#dddddd"},underline:{detail:"underline",propertys:{enabled:{detail:"是否开启",default:!0},strokeStyle:{detail:"线条色",default:null},lineWidth:{detail:"线宽",default:2}}},btnOut:{detail:"left,right按钮突出的大小",default:6},btnHeight:{detail:"left,right按钮高",default:20,documentation:"left,right按钮的高，不在left，right下面，统一在这个属性里， 以为要强制保持一致"},btnWidth:{detail:"left,right按钮的宽",default:8,documentation:"left,right按钮的宽，不在left，right下面，统一在这个属性里， 以为要强制保持一致"}}}}]),(0,l.default)(v,[{key:"layout",value:function(){var t=this.app;"bottom"==this.position&&(this.pos.y=t.height-(this.height+t.padding.bottom+this.margin.bottom),t.padding.bottom+=this.height+this.margin.top+this.margin.bottom),"top"==this.position&&(this.pos.y=t.padding.top+this.margin.top,t.padding.top+=this.height+this.margin.top+this.margin.bottom)}},{key:"_getCloneChart",value:function(){var o=this,l=this.app,s=l.getCoord(),t=l.constructor,e=l.el.cloneNode();e.innerHTML="",e.id=l.el.id+"_currclone",e.style.position="absolute",e.style.width=this.width+"px",e.style.height=this.btnHeight+"px",e.style.top="10000px",document.body.appendChild(e);var u=[];f.each(l.getComponents({name:"graphs"}),function(t){var e=t.enabledField||t.field;if(f.flatten([e]).length){var n=f.extend(!0,{},t._opt);n.field=e;var i={};"bar"==t.type&&(i={node:{}},o.graphStyle&&(i.node.fillStyle=o.graphStyle)),"line"==t.type&&(i={line:{lineWidth:1},node:{enabled:!1},area:{}},o.graphStyle&&(i.line.strokeStyle=o.graphStyle,i.area.fillStyle=o.graphStyle));var a=s.height||l.el.offsetHeight,r=o.btnHeight/a||1;"scat"==t.type&&(i={node:{radiusScale:r}},o.graphStyle),u.push(f.extend(!0,n,i,{label:{enabled:!1},animation:!1}))}});var n={coord:l._opt.coord,graphs:u};n.coord.horizontal&&delete n.coord.horizontal,n.coord.enabled=!1,n.coord.padding=0;var i=new t(e,l._data,n,l.componentModules);return i.draw(),{thumbChart:i,cloneEl:e}}},{key:"_setDataZoomOpt",value:function(){var e=this.app,t=e.getComponent({name:"coord"}).getSizeAndOrigin(),r=this;f.extend(!0,this,{width:parseInt(t.width),pos:{x:t.origin.x},dragIng:function(a){var t;"proportion"==r.axisLayoutType?(t=new d.default(r,{min:a.start,max:a.end}),e.dataFrame.filters.datazoom=function(t){var e=t[r.axis.field],n=r.axis.getValOfPos(a.start),i=r.axis.getValOfPos(a.end);return n<=e&&e<=i}):(t=new d.default(r,{left:e.dataFrame.range.start-a.start,right:a.end-e.dataFrame.range.end}),f.extend(e.dataFrame.range,a)),e.resetData(null,t),e.fire("dataZoomDragIng")},dragEnd:function(){e.updateChecked&&e.updateChecked(),e.fire("dataZoomDragEnd")}})}},{key:"draw",value:function(){this._setDataZoomOpt(),this._cloneChart=this._getCloneChart(),this.axis=this._cloneChart.thumbChart.getComponent({name:"coord"})._xAxis,this.axisLayoutType=this.axis.layoutType,this._computeAttrs(),this.widget(),this._setLines(),this.setZoomBg(),this.setPosition()}},{key:"destroy",value:function(){this.sprite.destroy()}},{key:"reset",value:function(t){t=t||{};var e=this.count,n=this.range.start,i=this.range.end;t&&f.extend(!0,this,t),this._cloneChart=this._getCloneChart(),this._computeAttrs(t),e==this.count&&(!t.range||t.range.start==n&&t.range.end==i)||(this.widget(),this._setLines()),this.setZoomBg()}},{key:"_computeAttrs",value:function(){var t=this._cloneChart.thumbChart;switch(this.dataLen=t.dataFrame.length,this.axisLayoutType){case"rule":this.count=this.dataLen-1;break;case"peak":this.count=this.dataLen;break;case"proportion":this.count=this.width}(!this._opt.range||this._opt.range&&!this._opt.range.max||this.range.max>this.count)&&(this.range.max=this.count-1),(!this._opt.range||this._opt.range&&!this._opt.range.end||this.range.end>this.dataLen-1)&&(this.range.end=this.dataLen-1,"proportion"==this.axisLayoutType&&(this.range.end=this.count-1)),!this.direction&&this.position&&("left"==this.position||"right"==this.position?this.direction="v":this.direction="h"),this.disPart=this._getDisPart(),this.btnHeight=this.height-this.btnOut}},{key:"_getDisPart",value:function(){var t=this,e=Math.max(parseInt(t.range.min/2/t.count*t.width),23),n=parseInt((t.range.max+1)/t.count*t.width);return"peak"==this.axisLayoutType&&(e=Math.max(parseInt(t.range.min/t.count*t.width),23)),"proportion"==this.axisLayoutType&&(n=t.width),{min:e,max:n}}},{key:"_getRangeEnd",value:function(t){return void 0===t&&(t=this.range.end),"peak"==this.axisLayoutType&&(t+=1),"proportion"==this.axisLayoutType&&(t+=1),t}},{key:"widget",value:function(){function t(){e._setLines.apply(e,arguments)}var e=this;if(e.bg.enabled){var n={x:0,y:0,width:e.width,height:e.btnHeight,lineWidth:e.bg.lineWidth,strokeStyle:e.bg.strokeStyle,fillStyle:e.bg.fillStyle};e._bgRect?e._bgRect.animate(n,{onUpdate:t}):(e._bgRect=new p({context:n}),e.dataZoomBg.addChild(e._bgRect))}if(e.underline.enabled){var i={start:{x:e.range.start/e.count*e.width+e.btnWidth/2,y:e.btnHeight},end:{x:e._getRangeEnd()/e.count*e.width-e.btnWidth/2,y:e.btnHeight},lineWidth:e.underline.lineWidth,strokeStyle:e.underline.strokeStyle||e.color};e._underline?e._underline.animate(i,{onUpdate:t}):(e._underline=e._addLine(i),e.dataZoomBg.addChild(e._underline))}var a={x:e.range.start/e.count*e.width,y:-e.btnOut/2+1,width:e.btnWidth,height:e.btnHeight+e.btnOut,fillStyle:e.left.fillStyle||e.color,cursor:e.left.eventEnabled&&"move"};e._btnLeft?e._btnLeft.animate(a,{onUpdate:t}):(e._btnLeft=new p({id:"btnLeft",dragEnabled:e.left.eventEnabled,context:a}),e._btnLeft.on("draging",function(){this.context.y=-e.btnOut/2+1,this.context.x<0&&(this.context.x=0),this.context.x>e._btnRight.context.x-e.btnWidth-2&&(this.context.x=e._btnRight.context.x-e.btnWidth-2),e._btnRight.context.x+e.btnWidth-this.context.x>=e.disPart.max&&(this.context.x=e._btnRight.context.x+e.btnWidth-e.disPart.max),e._btnRight.context.x+e.btnWidth-this.context.x<e.disPart.min&&(this.context.x=e._btnRight.context.x+e.btnWidth-e.disPart.min),e.rangeRect.context.width=e._btnRight.context.x-this.context.x-e.btnWidth,e.rangeRect.context.x=this.context.x+e.btnWidth,e._setRange()}),e._btnLeft.on("dragend",function(){e.dragEnd(e.range)}),this.dataZoomBtns.addChild(this._btnLeft));var r={x:e._getRangeEnd()/e.count*e.width-e.btnWidth,y:-e.btnOut/2+1,width:e.btnWidth,height:e.btnHeight+e.btnOut,fillStyle:e.right.fillStyle||e.color,cursor:e.right.eventEnabled&&"move"};e._btnRight?e._btnRight.animate(r,{onUpdate:t}):(e._btnRight=new p({id:"btnRight",dragEnabled:e.right.eventEnabled,context:r}),e._btnRight.on("draging",function(){this.context.y=-e.btnOut/2+1,this.context.x>e.width-e.btnWidth&&(this.context.x=e.width-e.btnWidth),this.context.x+e.btnWidth-e._btnLeft.context.x>=e.disPart.max&&(this.context.x=e.disPart.max-(e.btnWidth-e._btnLeft.context.x)),this.context.x+e.btnWidth-e._btnLeft.context.x<e.disPart.min&&(this.context.x=e.disPart.min-e.btnWidth+e._btnLeft.context.x),e.rangeRect.context.width=this.context.x-e._btnLeft.context.x-e.btnWidth,e._setRange()}),e._btnRight.on("dragend",function(){e.dragEnd(e.range)}),this.dataZoomBtns.addChild(this._btnRight));var o={x:a.x+e.btnWidth,y:1,width:r.x-a.x-e.btnWidth,height:this.btnHeight-1,fillStyle:e.center.fillStyle,fillAlpha:e.center.alpha,cursor:"move"};this.rangeRect?this.rangeRect.animate(o,{onUpdate:t}):(this.rangeRect=new p({id:"btnCenter",dragEnabled:!0,context:o}),this.rangeRect.on("draging",function(){this.context.y=1,this.context.x<e.btnWidth&&(this.context.x=e.btnWidth),this.context.x>e.width-this.context.width-e.btnWidth&&(this.context.x=e.width-this.context.width-e.btnWidth),e._btnLeft.context.x=this.context.x-e.btnWidth,e._btnRight.context.x=this.context.x+this.context.width,e._setRange("btnCenter")}),this.rangeRect.on("dragend",function(){e.dragEnd(e.range)}),this.dataZoomBtns.addChild(this.rangeRect)),this.linesLeft||(this.linesLeft=new h.default.Display.Sprite({id:"linesLeft"}),this.left.eventEnabled&&this._addLines({sprite:this.linesLeft}),this.dataZoomBtns.addChild(this.linesLeft)),this.linesRight||(this.linesRight=new h.default.Display.Sprite({id:"linesRight"}),this.right.eventEnabled&&this._addLines({sprite:this.linesRight}),this.dataZoomBtns.addChild(this.linesRight)),this.linesCenter||(this.linesCenter=new h.default.Display.Sprite({id:"linesCenter"}),this._addLines({count:3,sprite:this.linesCenter,strokeStyle:this.color}),this.dataZoomBtns.addChild(this.linesCenter))}},{key:"_setRange",value:function(t){var e=this,n=e._getRangeEnd(),i=n-e.range.start,a=e._btnLeft.context.x/e.width*e.count,r=(e._btnRight.context.x+e.btnWidth)/e.width*e.count;r="peak"==this.axisLayoutType?(a=Math.round(a),Math.round(r)):(this.axisLayoutType,a=parseInt(a),parseInt(r)),"btnCenter"==t&&r-a!=i&&(r=a+i),a==e.range.start&&r==n||(e.range.start=a,"peak"==e.axisLayoutType&&--r,e.range.end=r,e.dragIng(e.range)),e._setLines()}},{key:"_setLines",value:function(){var t=this.linesLeft,e=this.linesRight,n=this.linesCenter,i=this._btnLeft,a=this._btnRight,r=this.rangeRect;t.context.x=i.context.x+(i.context.width-t.context.width)/2,t.context.y=i.context.y+(i.context.height-t.context.height)/2,e.context.x=a.context.x+(a.context.width-e.context.width)/2,e.context.y=a.context.y+(a.context.height-e.context.height)/2,n.context.x=r.context.x+(r.context.width-n.context.width)/2,n.context.y=r.context.y+(r.context.height-n.context.height)/2,this.underline.enabled&&(this._underline.context.start.x=t.context.x+this.btnWidth/2,this._underline.context.end.x=e.context.x+this.btnWidth/2)}},{key:"_addLines",value:function(t){var e,n=t.count||2,i=t.sprite,a=t.dis||2;for(e=0;e<n;e++)i.addChild(this._addLine({x:e*a,strokeStyle:t.strokeStyle||""}));i.context.width=e*a-1,i.context.height=6}},{key:"_addLine",value:function(t){var e=t||{};return new c({id:e.id||"",context:{x:e.x||0,y:e.y||0,start:{x:e.start?e.start.x:0,y:e.start?e.start.y:0},end:{x:e.end?e.end.x:0,y:e.end?e.end.y:6},lineWidth:e.lineWidth||1,strokeStyle:e.strokeStyle||"#ffffff"}})}},{key:"setZoomBg",value:function(){this.__graphssp&&this.__graphssp.destroy();var t=this._cloneChart.thumbChart.graphsSprite;t.setEventEnable(!1);var e=this._cloneChart.thumbChart.getComponent({name:"coord"});t.id=t.id+"_datazoomthumbChartbg",t.context.x=-e.origin.x,t.context.scaleY=this.btnHeight/e.height,t.context.scaleX=this.width/e.width,t.context.globalAlpha=this.graphAlpha,this.dataZoomBg.addChild(t,0),this.__graphssp=t,this._cloneChart.thumbChart.destroy(),this._cloneChart.cloneEl.parentNode.removeChild(this._cloneChart.cloneEl)}}]),v);function v(t,e){var n;return(0,i.default)(this,v),(n=(0,a.default)(this,(0,r.default)(v).call(this,t,e))).name="dataZoom",n._cloneChart=null,n.count=1,n.dataLen=1,n.axisLayoutType=null,n.dragIng=function(){},n.dragEnd=function(){},n.disPart={},n._btnLeft=null,n._btnRight=null,n._underline=null,n.sprite=new h.default.Display.Sprite({id:"dataZoom",context:{x:n.pos.x,y:n.pos.y}}),n.sprite.noSkip=!0,n.dataZoomBg=new h.default.Display.Sprite({id:"dataZoomBg"}),n.dataZoomBtns=new h.default.Display.Sprite({id:"dataZoomBtns"}),n.sprite.addChild(n.dataZoomBg),n.sprite.addChild(n.dataZoomBtns),e.stage.addChild(n.sprite),f.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),"margin"in t||("bottom"==n.position&&(n.margin.top=10),"top"==n.position&&(n.margin.bottom=10)),n.axis=null,n.layout(),n}u.default.registerComponent(g,"dataZoom");var y=g;e.default=y})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=h.default._,f=h.default.Shapes.BrokenLine,c=h.default.Display.Sprite,p=h.default.Display.Text,g=(n=u.default,(0,s.default)(v,n),(0,l.default)(v,null,[{key:"defaultProps",value:function(){return{markTo:{detail:"标准哪个目标字段",default:null},yVal:{detail:"组件的值",default:0,documentation:"可能是个function，均值计算就是个function"},line:{detail:"线的配置",propertys:{strokeStyle:{detail:"线的颜色",default:"#999999"},lineWidth:{detail:"线宽",default:1},lineType:{detail:"线样式",default:"dashed"}}},label:{detail:"文本",propertys:{enabled:{detail:"是否开启",default:!1},fontColor:{detail:"文本字体颜色",default:"#999999"},fontSize:{detail:"文本字体大小",default:12},text:{detail:"文本内容",default:null},format:{detail:"文本格式化函数",default:null}}}}}}]),(0,l.default)(v,[{key:"draw",value:function(){this._calculateProps(),this.setPosition(),this.widget()}},{key:"_calculateProps",value:function(){var t=this._opt,i=t.markTo,e=this.app.getComponent({name:"coord"});if(!i||-1!=d.indexOf(this.app.dataFrame.fields,i)){var n,a=e._yAxis[0];i&&d.each(e._yAxis,function(t,e){var n=d.flatten([t.field]);0<=d.indexOf(n,i)&&(a=t)}),t.yAxisAlign&&(a=e._yAxis["left"==t.yAxisAlign?0:1]),n=void 0!==t.y&&null!==t.y?Number(t.y):function(){var t=this.app.dataFrame.getFieldData(i),e=0;return d.each(t,function(t){Number(t)&&(e+=t)}),e/t.length},isNaN(n)||a.drawWaterLine(n);var r="#777",o=e.getFieldMapOf(i);o&&(r=o.color);var l=t.line&&t.line.strokeStyle||r,s=t.label&&t.label.fontColor||r;this._yAxis=a,this.width=e.width,this.height=e.height,this.yVal=n,this.pos={x:e.origin.x,y:e.origin.y},this.line.list=[[0,0],[this.width,0]],this.label.fontColor=s,l&&(this.line.strokeStyle=l)}}},{key:"widget",value:function(){var t=this,e=this._getYPos(),n=new f({id:"line",context:{y:e,pointList:t.line.list,strokeStyle:t.line.strokeStyle,lineWidth:t.line.lineWidth,lineType:t.line.lineType}});if(t.sprite.addChild(n),t._line=n,t.label.enabled){var i=new p(t._getLabel(),{context:t.label});this._txt=i,t.sprite.addChild(i),t._setTxtPos(e)}this.line.y=e}},{key:"reset",value:function(t){t&&d.extend(!0,this,t);var e=this,n=this._getYPos();n!=this.line.y&&this._line.animate({y:n},{duration:300,onUpdate:function(t){e.label.enabled&&(e._txt.resetText(e._getLabel()),e._setTxtPos(t.y))}}),this._line.context.strokeStyle=this.line.strokeStyle,this.line.y=n}},{key:"_setTxtPos",value:function(t){var e=this._txt;"left"==this._yAxis.align?e.context.x=5:e.context.x=this.width-e.getTextWidth()-5,d.isNumber(this.label.y)?e.context.y=this.label.y:e.context.y=t-e.getTextHeight()}},{key:"_getYVal",value:function(t){var e=t=t||this.yVal;return d.isFunction(t)&&(e=t.apply(this)),e}},{key:"_getYPos",value:function(){return-this._yAxis.getPosOfVal(this._getYVal())}},{key:"_getLabel",value:function(){var t=this._getYVal();return d.isFunction(this.label.format)?this.label.format(t,this):d.isString(this.label.text)?this.label.text:t}}]),v);function v(t,e){var n;return(0,i.default)(this,v),(n=(0,a.default)(this,(0,r.default)(v).call(this,t,e))).name="markLine",n._yAxis=null,n.line={y:0,list:[]},n._txt=null,n._line=null,n.sprite=new c,n.app.graphsSprite.addChild(n.sprite),d.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),n}u.default.registerComponent(g,"markLine");var y=g;e.default=y})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,l=H(He),a=H(ze),r=H(Ue),o=H(qe),s=H(Ve),i=H(Ge),u=H($e),h=H(Ze),d=H(Ce),f=d.default._,c=d.default.Shapes.Rect,p=d.default.Shapes.Line,g=(n=h.default,(0,u.default)(v,n),(0,i.default)(v,null,[{key:"defaultProps",value:function(){return{enabled:{detail:"是否开启Tips",default:!0},content:{detail:"自定义tips的内容（html）",default:null},borderRadius:{detail:"tips的边框圆角半径",default:5},strokeStyle:{detail:"tips边框颜色",default:"#ccc"},fillStyle:{detail:"tips背景色",default:"rgba(255,255,255,0.95)"},fontColor:{detail:"tips文本颜色",default:"#999999"},positionOfPoint:{detail:"tips在触发点的位置，默认在右侧",default:"right"},offsetX:{detail:"tips内容到鼠标位置的偏移量x",default:10},offsetY:{detail:"tips内容到鼠标位置的偏移量y",default:10},positionInRange:{detail:"tip的浮层是否限定在画布区域",default:!0},pointer:{detail:"触发tips的时候的指针样式",default:"line",documentation:'tips的指针,默认为直线，可选为："line" | "region"(柱状图中一般用region)'},pointerAnim:{detail:"tips移动的时候，指针是否开启动画",default:!0}}}}]),(0,i.default)(v,[{key:"show",value:function(t){if(this.enabled){if(t.eventInfo){this.eventInfo=t.eventInfo;var e=t.target.getStage();e?(this.cW=e.context.width,this.cH=e.context.height):"canvax"==t.target.type&&(this.cW=t.target.width,this.cH=t.target.height),this._setContent(t)?(this._setPosition(t),this.sprite.toFront()):this.hide(t)}this._tipsPointerShow(t)}}},{key:"move",value:function(t){this.enabled&&(t.eventInfo&&(this.eventInfo=t.eventInfo,this._setContent(t)?this._setPosition(t):this._hideDialogTips()),this._tipsPointerMove(t))}},{key:"hide",value:function(t){this.enabled&&(this._hideDialogTips(t),this._tipsPointerHide(t))}},{key:"_hideDialogTips",value:function(){this.eventInfo&&(this.eventInfo=null,this.sprite.removeAllChildren(),this._removeContent())}},{key:"_setPosition",value:function(t){if(this.enabled&&this._tipDom){var e=t.pos||t.target.localToGlobal(t.point),n=this._checkX(e.x+this.offsetX),i=this._checkY(e.y+this.offsetY);this._tipDom.style.cssText+=";visibility:visible;left:"+n+"px;top:"+i+"px;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;","left"==this.positionOfPoint&&(this._tipDom.style.left=this._checkX(e.x-this.offsetX-this._tipDom.offsetWidth)+"px")}}},{key:"_creatTipDom",value:function(){this._tipDom=document.createElement("div"),this._tipDom.className="chart-tips",this._tipDom.style.cssText+="; border-radius:"+this.borderRadius+"px;background:"+this.fillStyle+";border:1px solid "+this.strokeStyle+";visibility:hidden;position:absolute;enabled:inline-block;*enabled:inline;*zoom:1;padding:6px;color:"+this.fontColor+";line-height:1.5",this._tipDom.style.cssText+="; box-shadow:1px 1px 3px "+this.strokeStyle+";",this._tipDom.style.cssText+="; border:none;white-space:nowrap;word-wrap:normal;",this._tipDom.style.cssText+="; text-align:left;",this.tipDomContainer.appendChild(this._tipDom)}},{key:"_removeContent",value:function(){this._tipDom&&(this.tipDomContainer.removeChild(this._tipDom),this._tipDom=null)}},{key:"_setContent",value:function(t){var e=this._getContent(t);if(e||0===e)return this._tipDom||this._creatTipDom(t),this._tipDom.innerHTML=e,this.dW=this._tipDom.offsetWidth,this.dH=this._tipDom.offsetHeight,e}},{key:"_getContent",value:function(t){return this.content?f.isFunction(this.content)?this.content(t.eventInfo,t):this.content:this._getDefaultContent(t.eventInfo)}},{key:"_getDefaultContent",value:function(t){var o="";return t.nodes.length&&(void 0!==t.title&&null!==t.title&&""!==t.title&&(o+="<div style='font-size:14px;border-bottom:1px solid #f0f0f0;padding:4px;margin-bottom:6px;'>"+t.title+"</div>"),f.each(t.nodes,function(t,e){var n=t.color||t.fillStyle||t.strokeStyle,i=t.name||t.field||t.content,a="object"==(0,l.default)(t.value)?JSON.stringify(t.value):(0,Ke.numAddSymbol)(t.value),r=t.value||0==t.value;o+="<div style='line-height:1.5;font-size:12px;padding:0 4px;'>",n&&(o+="<span style='background:"+n+";margin-right:8px;margin-top:7px;float:left;width:8px;height:8px;border-radius:4px;overflow:hidden;font-size:0;'></span>"),i&&(o+="<span style='margin-right:5px;'>"+i,r&&(o+="："),o+="</span>"),r&&(o+=a),o+="</div>"})),o}},{key:"_checkX",value:function(t){if(this.positionInRange){var e=this.dW+2;t<0&&(t=0),t+e>this.cW&&(t=this.cW-e)}return t}},{key:"_checkY",value:function(t){if(this.positionInRange){var e=this.dH+2;t<0&&(t=0),t+e>this.cH&&(t=this.cH-e)}return t}},{key:"_tipsPointerShow",value:function(t){if(t.eventInfo&&t.eventInfo.xAxis){var e=this.app.getComponent({name:"coord"});if(e&&"rect"==e.type&&this.pointer){var n=this._tipsPointer,i=e.origin.y-e.height,a=0;if("line"==this.pointer&&(a=e.origin.x+t.eventInfo.xAxis.x),"region"==this.pointer){var r=e._xAxis.getCellLengthOfPos(t.eventInfo.xAxis.x);a=e.origin.x+t.eventInfo.xAxis.x-r/2,t.eventInfo.xAxis.ind<0&&(a=e.origin.x)}if(n)this.pointerAnim&&"proportion"!=e._xAxis.layoutType?(n.__animation&&n.__animation.stop(),n.__animation=n.animate({x:a,y:i},{duration:200})):(n.context.x=a,n.context.y=i);else{if("line"==this.pointer&&(n=new p({context:{x:a,y:i,start:{x:0,y:0},end:{x:0,y:e.height},lineWidth:1,strokeStyle:"#cccccc"}})),"region"==this.pointer){var o=e._xAxis.getCellLengthOfPos(a);n=new c({context:{width:o,height:e.height,x:a,y:i,fillStyle:"#cccccc",globalAlpha:.3}})}this.app.graphsSprite.addChild(n,0),this._tipsPointer=n}}}}},{key:"_tipsPointerHide",value:function(t){if(t.eventInfo&&t.eventInfo.xAxis){var e=this.app.getComponent({name:"coord"});e&&"rect"==e.type&&this.pointer&&this._tipsPointer&&(this._tipsPointer.destroy(),this._tipsPointer=null)}}},{key:"_tipsPointerMove",value:function(t){if(t.eventInfo&&t.eventInfo.xAxis){var e=this.app.getComponent({name:"coord"});if(e&&"rect"==e.type&&this.pointer&&this._tipsPointer){var n=this._tipsPointer,i=e.origin.x+t.eventInfo.xAxis.x;if("region"==this.pointer){var a=e._xAxis.getCellLengthOfPos(t.eventInfo.xAxis.x);i=e.origin.x+t.eventInfo.xAxis.x-a/2,t.eventInfo.xAxis.ind<0&&(i=e.origin.x)}var r=e.origin.y-e.height;i!=n.__targetX&&(this.pointerAnim&&"proportion"!=e._xAxis.layoutType?(n.__animation&&n.__animation.stop(),n.__targetX=i,n.__animation=n.animate({x:i,y:r},{duration:200,onComplete:function(){delete n.__targetX,delete n.__animation}})):(n.context.x=i,n.context.y=r))}}}}]),v);function v(t,e){var n;(0,a.default)(this,v),(n=(0,r.default)(this,(0,o.default)(v).call(this,t,e))).name="tips",n.tipDomContainer=n.app.canvax.domView,n.cW=0,n.cH=0,n.dW=0,n.dH=0,n._tipDom=null,n._tipsPointer=null,n.eventInfo=null,n.sprite=null,n.sprite=new d.default.Display.Sprite({id:"TipSprite"}),n.app.stage.addChild(n.sprite);var i=(0,s.default)(n);return n.sprite.on("destroy",function(){i._tipDom=null}),f.extend(!0,(0,s.default)(n),(0,Ke.getDefaultProps)(v.defaultProps()),t),n}h.default.registerComponent(g,"tips");var y=g;e.default=y})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=h.default.Shapes.Line,f=h.default._,c=(n=u.default,(0,s.default)(p,n),(0,l.default)(p,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置",default:null},barField:{detail:"这个bartgi组件对应的bar Graph 的field",default:null},yAxisAlign:{detail:"这个bartgi组件回到到哪个y轴",default:"left"},standardVal:{detail:"tgi标准线",default:100},line:{detail:"bar对应的tgi线配置",propertys:{lineWidth:{detail:"线宽",default:3},strokeStyle:{detail:"线颜色",default:function(t){return t>=this.standardVal?"#43cbb5":"#ff6060"}}}}}}}]),(0,l.default)(p,[{key:"reset",value:function(t){f.extend(!0,this,t),this.barDatas=null,this.data=null,this.sprite.removeAllChildren(),this.draw()}},{key:"draw",value:function(){var r=this,t=this.app.getComponent({name:"coord"});this.pos={x:t.origin.x,y:t.origin.y},this.setPosition(),f.each(r.app.getComponents({name:"graphs"}),function(t){if("bar"==t.type&&t.data[r.barField])return r.barDatas=t.data[r.barField],!1}),this.data=f.flatten(r.app.dataFrame.getDataOrg(r.field)),this.barDatas&&f.each(this.data,function(t,e){var n=-r._yAxis.getPosOfVal(t),i=r.barDatas[e],a=new d({context:{start:{x:i.x,y:n},end:{x:i.x+i.width,y:n},lineWidth:2,strokeStyle:r._getProp(r.line.strokeStyle,t,e)}});r.sprite.addChild(a)})}},{key:"_getProp",value:function(t,e,n){var i=t;return f.isFunction(t)&&(i=t.apply(this,[e,n])),i}}]),p);function p(t,e){var n;return(0,i.default)(this,p),(n=(0,a.default)(this,(0,r.default)(p).call(this,t,e))).name="barTgi",n.data=null,n.barDatas=null,n._yAxis=null,n.sprite=null,n.pos={x:0,y:0},f.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(p.defaultProps()),t),n._yAxis=n.app.getComponent({name:"coord"})._yAxis["left"==n.yAxisAlign?0:1],n.sprite=new h.default.Display.Sprite,n.app.graphsSprite.addChild(n.sprite),n}u.default.registerComponent(c,"barTgi");var g=c;e.default=g})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=h.default._,f=(n=u.default,(0,s.default)(c,n),(0,l.default)(c,null,[{key:"defaultProps",value:function(){return{field:{detail:"字段配置",default:null},barField:{detail:"这个guide对应的bar Graph 的field",default:null},yAxisAlign:{detail:"这个guide组件回到到哪个y轴",default:"left"},node:{detail:"单个节点配置",propertys:{shapeType:{detail:"节点绘制的图形类型",default:"circle"},lineWidth:{detail:"图表描边线宽",default:3},radius:{detail:"图形半径",default:6},fillStyle:{detail:"填充色",default:"#19dea1"},strokeStyle:{detail:"描边色",default:"#fff"}}},label:{detail:"文本配置",propertys:{fontSize:{detail:"字体大小",default:12},fontColor:{detail:"字体颜色",default:"#19dea1"},verticalAlign:{detail:"垂直对齐方式",default:"bottom"},textAlign:{detail:"水平对齐方式",default:"center"},strokeStyle:{detail:"文本描边颜色",default:"#fff"},lineWidth:{detail:"文本描边线宽",default:0},format:{detail:"文本格式处理函数",default:null}}}}}}]),(0,l.default)(c,[{key:"reset",value:function(t){d.extend(!0,this,t),this.barDatas=null,this.data=null,this.sprite.removeAllChildren(),this.draw()}},{key:"draw",value:function(){var l=this,t=this.app.getComponent({name:"coord"});this.pos={x:t.origin.x,y:t.origin.y},this.setPosition(),d.each(l.app.getComponents({name:"graphs"}),function(t){if("bar"==t.type&&t.data[l.barField])return l.barDatas=t.data[l.barField],!1}),this.data=d.flatten(l.app.dataFrame.getDataOrg(l.field)),this.barDatas&&d.each(this.data,function(t,e){var n=-l._yAxis.getPosOfVal(t),i=l.barDatas[e],a=new h.default.Shapes.Circle({context:{x:i.x+i.width/2,y:n,r:l.node.radius,fillStyle:l.node.fillStyle,strokeStyle:l.node.strokeStyle,lineWidth:l.node.lineWidth}}),r=t;d.isFunction(l.label.format)&&(r=l.label.format(t,i));var o=new h.default.Display.Text(r,{context:{x:i.x+i.width/2,y:n-l.node.radius-1,fillStyle:l.label.fontColor,lineWidth:l.label.lineWidth,strokeStyle:l.label.strokeStyle,fontSize:l.label.fontSize,textAlign:l.label.textAlign,textBaseline:l.label.verticalAlign}});l.sprite.addChild(a),l.sprite.addChild(o)})}},{key:"_getProp",value:function(t,e,n){var i=t;return d.isFunction(t)&&(i=t.apply(this,[e,n])),i}}]),c);function c(t,e){var n;return(0,i.default)(this,c),(n=(0,a.default)(this,(0,r.default)(c).call(this,t,e))).name="barGuide",n.data=null,n.barDatas=null,n._yAxis=null,n.sprite=null,d.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(c.defaultProps()),t),n._yAxis=n.app.getComponent({name:"coord"})._yAxis["left"==n.yAxisAlign?0:1],n.sprite=new h.default.Display.Sprite,n.app.graphsSprite.addChild(n.sprite),n}u.default.registerComponent(f,"barGuide");var p=f;e.default=p})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ge),r=H(Ue),o=H(qe),l=H($e),s=H(Ze),u=(n=s.default,(0,l.default)(h,n),(0,a.default)(h,[{key:"set",value:function(t){return this.colors=t,this.colors}},{key:"get",value:function(){var t=this.colors;return Ce._.isArray(t)||(t=[t]),t}},{key:"mergeTo",value:function(t){t=t||[];for(var e=0,n=this.colors.length;e<n;e++)t[e]?t[e]=this.colors[e]:t.push(this.colors[e]);return t}}]),h);function h(t,e){var n;return(0,i.default)(this,h),(n=(0,r.default)(this,(0,o.default)(h).call(this,t,e))).name="theme",n.colors=t||[],n}s.default.registerComponent(u,"theme");var d=u;e.default=d})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ce),h=H(Ze),d=u.default._,f=(n=h.default,(0,s.default)(c,n),(0,l.default)(c,null,[{key:"defaultProps",value:function(){return{text:{detail:"水印内容",default:"chartx"},fontSize:{detail:"字体大小",default:20},fontColor:{detail:"水印颜色",default:"#cccccc"},alpha:{detail:"水印透明度",default:.2},rotation:{detail:"水印旋转角度",default:45}}}}]),(0,l.default)(c,[{key:"draw",value:function(){for(var t=new u.default.Display.Text(this.text,{context:{fontSize:this.fontSize,fillStyle:this.fontColor}}),e=t.getTextWidth(),n=t.getTextHeight(),i=parseInt(this.height/(5*n))+1,a=parseInt(this.width/(1.5*e))+1,r=0;r<i;r++)for(var o=0;o<a;o++){var l=new u.default.Display.Text(this.text,{context:{rotation:this.rotation,fontSize:this.fontSize,fillStyle:this.fontColor,globalAlpha:this.alpha}});l.context.x=1.5*e*o+.25*e,l.context.y=5*n*r,this.spripte.addChild(l)}}}]),c);function c(t,e){var n;return(0,i.default)(this,c),(n=(0,a.default)(this,(0,r.default)(c).call(this,t,e))).name="waterMark",n.width=n.app.width,n.height=n.app.height,d.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(c.defaultProps()),t),n.spripte=new u.default.Display.Sprite({id:"watermark"}),n.app.stage.addChild(n.spripte),n.draw(),n}h.default.registerComponent(f,"waterMark");var p=f;e.default=p})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=h.default._,f=h.default.Shapes.Line,c=(n=u.default,(0,s.default)(p,n),(0,l.default)(p,null,[{key:"defaultProps",value:function(){return{aimPoint:{detail:"准心位置",propertys:{x:{detail:"x",default:0},y:{detail:"y",default:0}}},line:{detail:"线配置",propertys:{strokeStyle:{detail:"线颜色",default:"#cccccc"},lineWidth:{detail:"线宽",default:1},lineType:{detail:"线样式类型",default:"solid"}}}}}}]),(0,l.default)(p,[{key:"draw",value:function(){var t=this,e=this.app.getComponent({name:"coord"});this.pos={x:e.origin.x,y:e.origin.y},this.width=e.width,this.height=e.height,this.aimPoint={x:this.width/2,y:this.height/2},this.setPosition(),t._hLine=new f({context:{start:{x:0,y:-this.aimPoint.y},end:{x:t.width,y:-this.aimPoint.y},strokeStyle:t.line.strokeStyle,lineWidth:t.line.lineWidth,lineType:t.line.lineType}}),t.sprite.addChild(t._hLine),t._vLine=new f({context:{start:{x:this.aimPoint.x,y:0},end:{x:this.aimPoint.x,y:-t.height},strokeStyle:t.line.strokeStyle,lineWidth:t.line.lineWidth,lineType:t.line.lineType}}),t.sprite.addChild(t._vLine)}}]),p);function p(t,e){var n;return(0,i.default)(this,p),(n=(0,a.default)(this,(0,r.default)(p).call(this,t,e))).name="cross",n.width=t.width||0,n.height=t.height||0,n.x=null,n.y=null,n._hLine=null,n._vLine=null,d.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(p.defaultProps()),t),n._yAxis=n.app.getComponent({name:"coord"})._yAxis["left"==n.yAxisAlign?0:1],n.sprite=new h.default.Display.Sprite,n.app.graphsSprite.addChild(n.sprite),n}u.default.registerComponent(c,"cross");var g=c;e.default=g})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),g=H(Ce),v=g.default._,h=(n=u.default,(0,s.default)(d,n),(0,l.default)(d,null,[{key:"defaultProps",value:function(){return{lineField:{detail:"对应的line字段",default:null},style:{detail:"默认色",default:"#3995ff"},fillStyle:{detail:"节点填充色",default:"#ffffff"},lineWidth:{detail:"线宽",default:2},radius:{detail:"圆点半径",default:6},timeFontSize:{detail:"时间文本大小",default:14},timeFontColor:{detail:"时间文本颜色",default:"#606060"},listFontSize:{detail:"列表信息文本大小",default:12}}}}]),(0,l.default)(d,[{key:"reset",value:function(t){v.extend(!0,this,t),this.lineDatas=null,this.sprite.removeAllChildren(),this.draw()}},{key:"draw",value:function(){var t=this,e=this.app.getComponent({name:"coord"});this.pos={x:e.origin.x,y:e.origin.y},this.setPosition();var n=t.app.getComponent({name:"graphs",type:"line",field:t.lineField});t.lineDatas=n.data[t.lineField].data;var i=this.app.getComponent({name:"coord"}).getAxis({type:"xAxis"}).getIndexOfVal(this.time);if(-1!=i){var a=this.lineDatas[i];if(null!=a.y){var r=t._getNodeY(a,e),o=a.x,l=new g.default.Display.Sprite({context:{x:o-20}});this.sprite.addChild(l);var s=0,u=new g.default.Display.Text(t.time,{context:{fillStyle:this.timeFontColor||this.style,fontSize:this.timeFontSize}});l.addChild(u),s=u.getTextHeight();var h=u.getTextWidth(),d=new g.default.Display.Text(v.flatten([t.list]).join("\n"),{context:{y:s,fillStyle:this.listFontColor||this.style,fontSize:this.listFontSize}});l.addChild(d),s+=d.getTextHeight(),(h=Math.max(h,d.getTextWidth()))+o-20>e.width+t.app.padding.right&&(l.context.x=e.width+t.app.padding.right,u.context.textAlign="right",d.context.textAlign="right");var f=0;"online"==t.status?(f=r-(this.radius+3)-s,Math.abs(f)>e.origin.y&&(f=-e.origin.y,r=-(e.origin.y-(this.radius+3)-s))):0<(f=r+(this.radius+3))+s&&(f=-s,r=-(this.radius+3)-s),l.context.y=f;var c=new g.default.Shapes.BrokenLine({context:{pointList:[[o,r],[o,a.y]],strokeStyle:t.style,lineWidth:t.lineWidth}});t.sprite.addChild(c);var p=new g.default.Shapes.Circle({context:{x:o,y:r,r:t.radius,fillStyle:t.fillStyle,strokeStyle:t.style,lineWidth:t.lineWidth}});t.sprite.addChild(p)}}}},{key:"_getNodeY",value:function(t,e){var n=this.app.height,i=(e.height,t.y);return"online"==this.status?i-=Math.min(50,.3*(n-Math.abs(i))):i+=Math.min(50,.3*Math.abs(i)),i}}]),d);function d(t,e){var n;return(0,i.default)(this,d),(n=(0,a.default)(this,(0,r.default)(d).call(this,t,e))).name="lineSchedu",v.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(d.defaultProps()),t),n.lineDatas=null,n.sprite=new g.default.Display.Sprite,n.app.graphsSprite.addChild(n.sprite),n}u.default.registerComponent(h,"lineSchedu");var f=h;e.default=f})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,i=H(ze),a=H(Ue),r=H(qe),o=H(Ve),l=H(Ge),s=H($e),u=H(Ze),h=H(Ce),d=h.default._,f=h.default.event,c=h.default.Shapes.Line,p=h.default.Shapes.Circle,g=h.default.Display.Text,v=(n=u.default,(0,s.default)(y,n),(0,l.default)(y,null,[{key:"defaultProps",value:function(){return{xVal:{detail:"x的value值",default:null},x:{detail:"x的像素值",default:null},markTo:{detail:"标准哪个目标字段",documentation:"如果设置了这个字段，那么line的起点将是这个graphs上的node节点",default:null},line:{detail:"线的配置",propertys:{enabled:{detail:"是否开启",default:!0},lineWidth:{detail:"线宽",default:2},strokeStyle:{detail:"线的颜色",default:"#d5d5d5"},lineType:{detail:"线的样式，虚线(dashed)实线(solid)",default:"solid"},startY:{detail:"startY",default:0},endY:{detail:"startY",default:null}}},node:{detail:"数据图形节点",propertys:{enabled:{detail:"是否开启",default:!0},radius:{detail:"节点半径",default:5},fillStyle:{detail:"节点图形的背景色",default:"#ffffff"},strokeStyle:{detail:"节点图形的描边色，默认和line.strokeStyle保持一致",default:null},lineWidth:{detail:"节点图形边宽大小",default:2}}},label:{detail:"文本",propertys:{enabled:{detail:"是否开启",default:!1},fontColor:{detail:"文本字体颜色",default:null},fontSize:{detail:"文本字体大小",default:12},text:{detail:"文本内容",documentation:"可以是函数",default:null},format:{detail:"文本格式化函数",default:null}}}}}}]),(0,l.default)(y,[{key:"draw",value:function(t){t=t||{},this.width=t.width,this.height=t.height,this.origin=t.origin,this.sprite.context.x=this.origin.x,this.sprite.context.y=this.origin.y,this._widget()}},{key:"reset",value:function(t){t&&d.extend(!0,this,t),this._widget()}},{key:"_widget",value:function(){var i,a=this,t=this.app.getComponent({name:"coord"})._xAxis;if(null!=this.xVal&&(i=t.getNodeInfoOfVal(this.xVal)),null!=this.x&&(i=t.getNodeInfoOfPos(this.x)),i){a.nodes=[],a.on("complete",function(){a._drawLine(i),a._drawNodes(i),a._drawLabels(i)});var r=0,o=this.app.getGraphs();d.each(o,function(n){function t(){if(r++,!a.markTo||-1!=d.flatten([n.field]).indexOf(a.markTo)){var t=n.getNodesOfPos(i.x);if(a.markTo){var e=d.find(t,function(t){return t.field==a.markTo});e&&(a.nodes=[e])}else a.nodes=a.nodes.concat(t)}r==o.length&&a.fire("complete")}n.inited?t():n.on("complete",function(){t()})})}}},{key:"_drawLine",value:function(t){var e=this;if(e.line.enabled){var n=d.extend(!0,{x:parseInt(t.x),start:{x:0,y:0},end:{x:0,y:-e.height},lineWidth:1,strokeStyle:"#cccccc"},this.line);if(null!=e.line.endY){var i=0;d.isNumber(e.line.endY)&&(i=e.line.endY),"auto"==e.line.endY&&d.each(e.nodes,function(t){i=Math.min(t.y)}),n.end.y=i}this._line?d.extend(this._line.context,n):(this._line=new c({context:n}),this._lineSp.addChild(this._line),this._line.on(f.types.get(),function(t){t.eventInfo={xAxis:{},nodes:e.nodes},null!=e.xVal&&(t.eventInfo.xAxis.value=e.xVal,t.eventInfo.xAxis.text=e.xVal+"",t.eventInfo.title=e.xVal+""),e.app.fire(t.type,t)}))}}},{key:"_drawNodes",value:function(){var i=this;i.node.enabled&&(i._nodes.removeAllChildren(),d.each(i.nodes,function(e){var t=d.extend({x:e.x,y:e.y,cursor:"pointer",r:i.node.radius,lineWidth:i.node.lineWidth||e.lineWidth,strokeStyle:i.node.strokeStyle||e.color,fillStyle:i.node.fillStyle||e.fillStyle}),n=new p({context:t});n.nodeData=e,n.on(f.types.get(),function(t){t.eventInfo={xAxis:{},nodes:[e]},null!=i.xVal&&(t.eventInfo.xAxis.value=i.xVal,t.eventInfo.xAxis.text=i.xVal+"",t.eventInfo.title=i.xVal+""),i.app.fire(t.type,t)}),i._nodes.addChild(n)}))}},{key:"_drawLabels",value:function(){var a=this;a.node.enabled&&(a._labels.removeAllChildren(),d.each(a.nodes,function(t){var e={x:t.x,y:t.y-a.node.radius-2,fillStyle:a.label.fontColor||t.color,fontSize:a.label.fontSize,textAlign:"center",textBaseline:"bottom"},n=a.label.text;if(d.isFunction(n)&&(n=n.apply(a,[t])),n){var i=new g(n,{context:e});a._labels.addChild(i),i.localToGlobal().x+i.getTextWidth()/2>a.app.width&&(i.context.x=a.app.width-i.getTextWidth()/2-i.parent.localToGlobal().x)}}))}}]),y);function y(t,e){var n;return(0,i.default)(this,y),(n=(0,a.default)(this,(0,r.default)(y).call(this,t,e))).name="markcloumn",d.extend(!0,(0,o.default)(n),(0,Ke.getDefaultProps)(y.defaultProps()),t),n.sprite=new h.default.Display.Sprite,n.app.graphsSprite.addChild(n.sprite),n._line=null,n._lineSp=new h.default.Display.Sprite,n.sprite.addChild(n._lineSp),n.nodes=[],n._nodes=new h.default.Display.Sprite,n.sprite.addChild(n._nodes),n._labels=new h.default.Display.Sprite,n.sprite.addChild(n._labels),n}u.default.registerComponent(v,"markcloumn");var x=v;e.default=x})),t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=H(We),i=[];i.length&&n.default.setGlobalTheme(i);var a={version:"1.0.168",options:{}};for(var r in n.default)a[r]=n.default[r];var o=a;e.default=o}))}();