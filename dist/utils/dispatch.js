"use strict";!function(n,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var r={};e(r),(void 0).undefined=r}}(0,function(n){Object.defineProperty(n,"__esModule",{value:!0});var o={value:function(){}};function e(){for(var n,e=0,r=arguments.length,t={};e<r;++e){if(!(n=arguments[e]+"")||n in t)throw new Error("illegal type: "+n);t[n]=[]}return new i(t)}function i(n){this._=n}function l(n,e){for(var r,t=0,i=n.length;t<i;++t)if((r=n[t]).name===e)return r.value}function u(n,e,r){for(var t=0,i=n.length;t<i;++t)if(n[t].name===e){n[t]=o,n=n.slice(0,t).concat(n.slice(t+1));break}return null!=r&&n.push({name:e,value:r}),n}i.prototype=e.prototype={constructor:i,on:function(n,e){var r,t=this._,i=function(n,t){return n.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");if(0<=r&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}})}(n+"",t),o=-1,f=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<f;)if(r=(n=i[o]).type)t[r]=u(t[r],n.name,e);else if(null==e)for(r in t)t[r]=u(t[r],n.name,null);return this}for(;++o<f;)if((r=(n=i[o]).type)&&(r=l(t[r],n.name)))return r},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new i(n)},call:function(n,e){if(0<(r=arguments.length-2))for(var r,t,i=new Array(r),o=0;o<r;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=0,r=(t=this._[n]).length;o<r;++o)t[o].value.apply(e,i)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var t=this._[n],i=0,o=t.length;i<o;++i)t[i].value.apply(e,r)}},n.default=e});