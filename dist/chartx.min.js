var Chartx=function(){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var X=e(function(t){function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n(function(t,e){!function(t){function s(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function t(e){return typeof e}}else{s=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return s(t)}Object.defineProperty(t,"__esModule",{value:true});var u={},o={},n=Array.prototype,e=Object.prototype,r=n.push,i=n.slice,a=n.concat,l=e.toString,f=e.hasOwnProperty,c=n.forEach,d=n.map,h=n.filter,p=n.every,y=n.some,v=n.indexOf,g=Array.isArray,_=Object.keys,b=function t(e){return function(t){return t==null?void 0:t[e]}},x=Math.pow(2,53)-1,m=b("length"),w=function t(e){var n=m(e);return typeof n=="number"&&n>=0&&n<=x};u.values=function(t){var e=u.keys(t);var n=e.length;var i=new Array(n);for(var r=0;r<n;r++){i[r]=t[e[r]]}return i},u.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t){if(u.has(t,n))e.push(n)}return e},u.has=function(t,e){return f.call(t,e)};var S=u.each=u.forEach=function(t,e,n){if(t==null)return;if(c&&t.forEach===c){t.forEach(e,n)}else if(t.length===+t.length){for(var i=0,r=t.length;i<r;i++){if(e.call(n,t[i],i,t)===o)return}}else{var a=u.keys(t);for(var i=0,r=a.length;i<r;i++){if(e.call(n,t[a[i]],a[i],t)===o)return}}};if(u.compact=function(t){return u.filter(t,u.identity)},u.filter=u.select=function(t,i,r){var a=[];if(t==null)return a;if(h&&t.filter===h)return t.filter(i,r);S(t,function(t,e,n){if(i.call(r,t,e,n))a.push(t)});return a},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){u["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),u.isArguments=function(t){return!!(t&&u.has(t,"callee"))},typeof/./!=="function"){u.isFunction=function(t){return typeof t==="function"}}u.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},u.isNaN=function(t){return u.isNumber(t)&&t!=+t},u.isBoolean=function(t){return t===true||t===false||l.call(t)=="[object Boolean]"},u.isNull=function(t){return t===null},u.isEmpty=function(t){if(t==null)return true;if(u.isArray(t)||u.isString(t))return t.length===0;for(var e in t){if(u.has(t,e))return false}return true},u.isElement=function(t){return!!(t&&t.nodeType===1)},u.isArray=g||function(t){return l.call(t)=="[object Array]"},u.isObject=function(t){return t===Object(t)},u.identity=function(t){return t},u.indexOf=function(t,e,n){if(t==null)return-1;var i=0,r=t.length;if(n){if(typeof n=="number"){i=n<0?Math.max(0,r+n):n}else{i=u.sortedIndex(t,e);return t[i]===e?i:-1}}if(v&&t.indexOf===v)return t.indexOf(e,n);for(;i<r;i++){if(t[i]===e)return i}return-1},u.isWindow=function(t){return t!=null&&t==t.window};var k=function e(t,n,i){if(n&&u.every(t,u.isArray)){return a.apply(i,t)}S(t,function(t){if(u.isArray(t)||u.isArguments(t)){n?r.apply(i,t):e(t,n,i)}else{i.push(t)}});return i};u.flatten=function(t,e){return k(t,e,[])},u.every=u.all=function(t,i,r){i||(i=u.identity);var a=true;if(t==null)return a;if(p&&t.every===p)return t.every(i,r);S(t,function(t,e,n){if(!(a=a&&i.call(r,t,e,n)))return o});return!!a},u.min=function(t,r,a){if(!r&&u.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.min.apply(Math,t)}if(!r&&u.isEmpty(t))return Infinity;var o={computed:Infinity,value:Infinity};S(t,function(t,e,n){var i=r?r.call(a,t,e,n):t;i<o.computed&&(o={value:t,computed:i})});return o.value},u.max=function(t,r,a){if(!r&&u.isArray(t)&&t[0]===+t[0]&&t.length<65535){return Math.max.apply(Math,t)}if(!r&&u.isEmpty(t))return-Infinity;var o={computed:-Infinity,value:-Infinity};S(t,function(t,e,n){var i=r?r.call(a,t,e,n):t;i>o.computed&&(o={value:t,computed:i})});return o.value},u.find=u.detect=function(t,i,r){var a;O(t,function(t,e,n){if(i.call(r,t,e,n)){a=t;return true}});return a};var O=u.some=u.any=function(t,i,r){i||(i=u.identity);var a=false;if(t==null)return a;if(y&&t.some===y)return t.some(i,r);S(t,function(t,e,n){if(a||(a=i.call(r,t,e,n)))return o});return!!a};u.without=function(t){return u.difference(t,i.call(arguments,1))},u.difference=function(t){var e=a.apply(n,i.call(arguments,1));return u.filter(t,function(t){return!u.contains(e,t)})},u.uniq=u.unique=function(n,i,t,e){if(u.isFunction(i)){e=t;t=i;i=false}var r=t?u.map(n,t,e):n;var a=[];var o=[];S(r,function(t,e){if(i?!e||o[o.length-1]!==t:!u.contains(o,t)){o.push(t);a.push(n[e])}});return a},u.map=u.collect=function(t,i,r){var a=[];if(t==null)return a;if(d&&t.map===d)return t.map(i,r);S(t,function(t,e,n){a.push(i.call(r,t,e,n))});return a},u.contains=u.include=function(t,e){if(t==null)return false;if(v&&t.indexOf===v)return t.indexOf(e)!=-1;return O(t,function(t){return t===e})},u.pluck=function(t,e){return u.map(t,function(t){return t[e]})},u.random=function(t,e){if(e==null){e=t;t=0}return t+Math.floor(Math.random()*(e-t+1))},u.shuffle=function(t){return u.sample(t,Infinity)},u.sample=function(t,e,n){if(e==null||n){if(!w(t))t=u.values(t);return t[u.random(t.length-1)]}var i=w(t)?u.clone(t):u.values(t);var r=m(i);e=Math.max(Math.min(e,r),0);var a=r-1;for(var o=0;o<e;o++){var l=u.random(o,a);var s=i[o];i[o]=i[l];i[l]=s}return i.slice(0,e)},u.extend=function(){var t,e,n,i,r=arguments[0]||{},a=1,o=arguments.length,l=false;if(typeof r==="boolean"){l=r;r=arguments[1]||{};a=2}if(s(r)!=="object"&&!u.isFunction(r)){r={}}if(o===a){r=this;--a}for(;a<o;a++){if((t=arguments[a])!=null){for(e in t){n=r[e];i=t[e];if(r===i||i===undefined){continue}if(l&&i&&u.isObject(i)&&i.constructor===Object){r[e]=u.extend(l,n,i)}else{r[e]=i}}}}return r},u.clone=function(t){if(!u.isObject(t))return t;return u.isArray(t)?t.slice():u.extend(true,{},t)},u.euclideanModulo=function(t,e){return(t%e+e)%e},u.DEG2RAD=Math.PI/180,u.RAD2DEG=180/Math.PI,u.degToRad=function(t){return t*u.DEG2RAD},u.radToDeg=function(t){return t*u.RAD2DEG},t["default"]=u}(e)});e(i);var r=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var g=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function _(t,e){var n,i;var r=[1,2,5,10];n=t/e;for(var i=0;i<r.length;i++){t=r[i];if(n<=(r[i]+(r[i+1]||r[i]))/2){break}}t*=e;return t}function b(t){return parseFloat(t.toPrecision(14))}function r(t,e,n){t=g["default"].without(t,undefined,null,"");var i=n&&n.scale?parseFloat(n.scale):1;var r=n&&n.isInt?1:0;if(isNaN(i)){i=1}var a=g["default"].max(t);var o=a;a*=i;var l=g["default"].min(t);if(l==a){if(a>0){l=0;return[l,a]}else if(a<0){return[a,0]}else{a=1;return[0,a]}}var s=a-l;if(s){var u=l;l-=s*.05;if(l<0&&u>=0){l=0}a+=s*.05}var f=(a-l)*.3;var c=Math.pow(10,Math.floor(Math.log(f)/Math.LN10));f=_(f,c);if(r){f=Math.ceil(f)}var d,h,p=b(Math.floor(l/f)*f),y=b(Math.ceil(a/f)*f),v=[];d=p;while(d<=y){v.push(d);d=b(d+f);if(d===h){break}h=d}if(v.length>=3){if(v[v.length-2]>=o){v.pop()}}return v}var i={section:function t(e,n,i){return g["default"].uniq(r(e,n,i))}};t["default"]=i}(e,i)});e(r);var a=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true}),t.getDefaultProps=t.cloneData=t.cloneOptions=undefined;var r=n(e);function n(t){return t&&t.__esModule?t:{default:t}}var i=function t(e){return r["default"].clone(e)},a=function t(e){return JSON.parse(JSON.stringify(e))},o=function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};for(var i in e){if(!!i.indexOf("_")){if(!e[i]||!e[i].propertys){if(r["default"].isObject(e[i])&&!r["default"].isFunction(e[i])&&!r["default"].isArray(e[i])){n[i]=e[i]["default"]}else{n[i]=e[i]}}else{n[i]={};t(e[i].propertys,n[i])}}}return n};t.cloneOptions=i,t.cloneData=a,t.getDefaultProps=o}(e,i)});e(a);var o=n(function(t,e){!function(t,e,n,i){Object.defineProperty(t,"__esModule",{value:true});var m=r(e),s=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function l(t,e,n){if(e)o(t.prototype,e);if(n)o(t,n);return t}var u=function(){l(n,null,[{key:"defaultProps",value:function t(){return{layoutType:{detail:"布局方式",default:"proportion"},dataSection:{detail:"轴数据集",default:[]},sectionHandler:{detail:"自定义dataSection的计算公式",default:null},waterLine:{detail:"水位线",default:null,documentation:"水位data，需要混入 计算 dataSection， 如果有设置waterLine， dataSection的最高水位不会低于这个值"},middleWeight:{detail:"区间分隔线",default:null,documentation:"如果middleweight有设置的话 dataSectionGroup 为被middleweight分割出来的n个数组>..[ [0,50 , 100],[100,500,1000] ]"},middleWeightPos:{detail:"区间分隔线的物理位置，百分比,默认 0.5 ",default:null},symmetric:{detail:"自动正负对称",default:false,documentation:"proportion下，是否需要设置数据为正负对称的数据，比如 [ 0,5,10 ] = > [ -10, 0 10 ]，象限坐标系的时候需要"},origin:{detail:"轴的起源值",default:null,documentation:"                    1，如果数据中又正数和负数，则默认为0 <br />                    2，如果dataSection最小值小于0，则baseNumber为最小值<br />                    3，如果dataSection最大值大于0，则baseNumber为最大值<br />                    4，也可以由用户在第2、3种情况下强制配置为0，则section会补充满从0开始的刻度值                "},sort:{detail:"排序",default:null},posParseToInt:{detail:"是否位置计算取整",default:false,documentation:"比如在柱状图中，有得时候需要高精度的能间隔1px的柱子，那么x轴的计算也必须要都是整除的"}}}}]);function n(t,e){a(this,n);this._opt=m["default"].clone(t);this.dataOrg=e||[];this.dataSectionLayout=[];this.axisLength=1;this._cellCount=null;this._cellLength=null;this.dataSectionGroup=[];this.originPos=0;this._originTrans=0;this._min=null;this._max=null;m["default"].extend(true,this,(0,i.getDefaultProps)(n.defaultProps()),t)}l(n,[{key:"resetDataOrg",value:function t(e){this.dataSection=[];this.dataSectionGroup=[];this.dataOrg=e;this._cellCount=null;this._cellLength=null}},{key:"setAxisLength",value:function t(e){this.axisLength=e;this.calculateProps()}},{key:"calculateProps",value:function t(){var r=this;if(this.layoutType=="proportion"){if(this._min==null){this._min=m["default"].min(this.dataSection)}if(this._max==null){this._max=m["default"].max(this.dataSection)}if(!("origin"in this._opt)){this.origin=0;if(m["default"].max(this.dataSection)<0){this.origin=m["default"].max(this.dataSection)}if(m["default"].min(this.dataSection)>0){this.origin=m["default"].min(this.dataSection)}}this._originTrans=this._getOriginTrans(this.origin);this.originPos=this.getPosOfVal(this.origin)}this.dataSectionLayout=[];m["default"].each(this.dataSection,function(t,e){var n=e;if(r.layoutType=="proportion"){n=r.getIndexOfVal(t)}var i=parseInt(r.getPosOf({ind:e,val:t}),10);r.dataSectionLayout.push({val:t,ind:n,pos:i})})}},{key:"getDataSection",value:function t(){return this.dataSection}},{key:"setDataSection",value:function t(e){var n=this;if(m["default"].isEmpty(e)&&m["default"].isEmpty(this._opt.dataSection)){if(this.layoutType=="proportion"){var i=this._getDataSection();if("origin"in n._opt){i.push(n._opt.origin)}if(i.length==1){i.push(i[0]*.5)}if(this.waterLine){i.push(this.waterLine)}if(this.symmetric){var r=m["default"].min(i);var a=m["default"].max(i);if(Math.abs(r)>Math.abs(a)){i.push(Math.abs(r))}else{i.push(-Math.abs(a))}}for(var o=0,l=i.length;o<l;o++){i[o]=Number(i[o]);if(isNaN(i[o])){i.splice(o,1);o--;l--}}if(m["default"].isFunction(this.sectionHandler)){this.dataSection=this.sectionHandler(i)}if(!this.dataSection||!this.dataSection.length){this.dataSection=s["default"].section(i,3)}if(this.symmetric){var r=m["default"].min(this.dataSection);var a=m["default"].max(this.dataSection);if(Math.abs(r)>Math.abs(a)){this.dataSection.push(Math.abs(r))}else{this.dataSection.unshift(-Math.abs(a))}}if(this.dataSection.length==0){this.dataSection=[0]}this.dataSectionGroup=[m["default"].clone(this.dataSection)];this._middleweight();this._sort()}else{this.dataSection=m["default"].flatten(this.dataOrg);this.dataSectionGroup=[this.dataSection]}}else{this.dataSection=e||this._opt.dataSection;this.dataSectionGroup=[this.dataSection]}this._middleWeightPos()}},{key:"_getDataSection",value:function t(){var e=1;m["default"].each(this.dataOrg,function(t){e=Math.max(t.length,e)});if(e==1){return this._oneDimensional()}if(e>1){return this._twoDimensional()}}},{key:"_oneDimensional",value:function t(){var e=m["default"].flatten(this.dataOrg);for(var n=0,i=e.length;n<i;n++){e[n]=e[n]||0}return e}},{key:"_twoDimensional",value:function t(){var e=this.dataOrg;var c=[];var d;m["default"].each(e,function(t,e){if(!t.length){return}if(!m["default"].isArray(t[0])){c.push(t);return}var n=[];var i=t[0].length;var r=t.length;for(var e=0;e<i;e++){var a=0;var o=0;var l=0;var s=0;for(var u=0;u<r;u++){var f=t[u][e];if(!f&&f!==0){continue}d==undefined&&(d=f);d=Math.min(d,f);if(f>=0){a+=f;o++}else{l+=f;s++}}o&&n.push(a);s&&n.push(l)}c.push(n)});c.push(d);return m["default"].flatten(c)}},{key:"setWaterLine",value:function t(e){if(e<=this.waterLine)return;this.waterLine=e;if(e<m["default"].min(this.dataSection)||e>m["default"].max(this.dataSection)){this.setDataSection();this.calculateProps()}}},{key:"_sort",value:function t(){if(this.sort){var e=this._getSortType();if(e=="desc"){this.dataSection.reverse();m["default"].each(this.dataSectionGroup,function(t,e){t.reverse()});this.dataSectionGroup.reverse()}}}},{key:"_getSortType",value:function t(){var e;if(m["default"].isString(this.sort)){e=this.sort}if(!e){e="asc"}return e}},{key:"_middleweight",value:function t(){if(this.middleWeight){if(!m["default"].isArray(this.middleWeight)){this.middleWeight=[this.middleWeight]}var e=m["default"].min(this.dataSection);var n=m["default"].max(this.dataSection);var i=[e];var r=[];for(var a=0,o=this.middleWeight.length;a<o;a++){var l=e;if(a>0){l=this.middleWeight[a-1]}var s=l+parseInt((this.middleWeight[a]-l)/2);i.push(s);i.push(this.middleWeight[a]);r.push([l,s,this.middleWeight[a]])}var u=this.middleWeight.slice(-1)[0];if(n>u){i.push(u+(n-u)/2);i.push(n);r.push([u,u+(n-u)/2,n])}this.dataSection=i;this.dataSectionGroup=r}}},{key:"_middleWeightPos",value:function t(){var e=this;if(this.middleWeightPos){if(!m["default"].isArray(this.middleWeightPos)){this.middleWeightPos=[this.middleWeightPos]}var n=0;m["default"].each(this.middleWeightPos,function(t){n+=t});if(n<1){this.middleWeightPos.push(1-n)}if(n>1){this.middleWeightPos=null}}if(this.middleWeight){if(!this.middleWeightPos){this.middleWeightPos=[];var i=0;m["default"].each(this.middleWeight,function(){var t=1/(e.middleWeight.length+1);i+=t;e.middleWeightPos.push(t)});this.middleWeightPos.push(1-i)}}else{this.middleWeightPos=[1]}}},{key:"_getOriginTrans",value:function t(e){var n=0;var i=this.dataSectionGroup.length;for(var r=0,a=i;r<a;r++){var o=this.dataSectionGroup[r];var l=this.axisLength*this.middleWeightPos[r];var s=0;m["default"].each(this.middleWeightPos,function(t,e){if(e<r){s+=me.axisLength*t}});if(this.layoutType=="proportion"){var u=m["default"].min(o);var f=m["default"].max(o);var c=Math.abs(f-u);if(e>=u&&e<=f){n=(e-u)/c*l+s;break}}}if(this.sort=="desc"){n=-(l-n)}return parseInt(n)}},{key:"_getLayoutDataOf",value:function t(e){var n=["val","ind","pos"];var i;m["default"].each(n,function(t){if(t in e){i=t}});var r;m["default"].each(this.dataSectionLayout,function(t){if(t[i]===e[i]){r=t}});return r||{}}},{key:"getPosOfVal",value:function t(e){return this.getPosOf({val:e})}},{key:"getPosOfInd",value:function t(e){var n=this._getLayoutDataOf({ind:e}).pos;if(n!=undefined){return n}return this.getPosOf({ind:e})}},{key:"getPosOf",value:function t(e){var n=this;var i;var r=this._getCellCount();if(this.layoutType=="proportion"){var a=this.dataSectionGroup.length;for(var o=0,l=a;o<l;o++){var s=this.dataSectionGroup[o];var u=this.axisLength*this.middleWeightPos[o];var f=0;m["default"].each(this.middleWeightPos,function(t,e){if(e<o){f+=n.axisLength*t}});var c=m["default"].min(s);var d=m["default"].max(s);var h="val"in e?e.val:this.getValOfInd(e.ind);if(h>=c&&h<=d){var p=this.origin;var y=!(p<c||p>d);if(!y){p=c}var v=Math.max(Math.abs(d-p),Math.abs(p-c));var g=Math.abs(d-c);var _=v/g*u;i=(h-p)/v*_+f;if(isNaN(i)){i=parseInt(f)}if(y){i+=this._originTrans}break}}}else{if(r==1){i=this.axisLength/2}else{var b="ind"in e?e.ind:this.getIndexOfVal(e.val);if(b!=-1){if(this.layoutType=="rule"){i=b/(r-1)*this.axisLength}if(this.layoutType=="peak"){var x=this.getCellLength();i=x*(b+1)-x/2}}}}!i&&(i=0);i=Number(i.toFixed(1));return Math.abs(i)}},{key:"getValOfPos",value:function t(e){var n=this._getLayoutDataOf({pos:e}).val;if(n!=undefined){return n}return this._getValOfInd(this.getIndexOfPos(e))}},{key:"getValOfInd",value:function t(e){var n=this._getLayoutDataOf({ind:e}).val;if(n!=undefined){return n}return this._getValOfInd(e)}},{key:"_getValOfInd",value:function t(o,e){var l=this;var n=m["default"].flatten(this.dataOrg);var s;if(this.layoutType=="proportion"){var i=this.dataSectionGroup.length;m["default"].each(this.dataSectionGroup,function(t,n){var e=l.axisLength*l.middleWeightPos[n];var i=0;m["default"].each(l.middleWeightPos,function(t,e){if(e<n){i+=l.axisLength*t}});if(parseInt(o/e)==n||n==l.dataSectionGroup.length-1){var r=m["default"].min(t);var a=m["default"].max(t);s=r+(a-r)/e*(o-i);return false}})}else{s=n[o]}return s}},{key:"getIndexOfPos",value:function t(e){var n=this._getLayoutDataOf({pos:e}).ind;if(n!=undefined){return n}var i=0;var r=this.getCellLengthOfPos(e);var a=this._getCellCount();if(this.layoutType=="proportion"){return e}else{if(this.layoutType=="peak"){i=parseInt(e/r);if(i==a){i=a-1}}if(this.layoutType=="rule"){i=parseInt((e+r/2)/r);if(a==1){i=0}}}return i}},{key:"getIndexOfVal",value:function t(n){var i=-1;if(this.layoutType=="proportion"){var e=this._getLayoutDataOf({val:n}).ind;if(e!=undefined){return e}i=this.getPosOfVal(n)}else{m["default"].each(this.dataOrg,function(t){m["default"].each(t,function(t){var e=m["default"].indexOf(t,n);if(e!=-1){i=e}})})}return i}},{key:"getCellLength",value:function t(){if(this._cellLength!==null){return this._cellLength}var e=this.axisLength;var n=e;var i=this._getCellCount();if(i){if(this.layoutType=="proportion"){n=1}else{n=e/i;if(this.layoutType=="rule"){if(i==1){n=e/2}else{n=e/(i-1)}}if(this.posParseToInt){n=parseInt(n)}}}this._cellLength=n;return n}},{key:"getCellLengthOfPos",value:function t(e){return this.getCellLength()}},{key:"getCellLengthOfInd",value:function t(e){return this.getCellLength()}},{key:"_getCellCount",value:function t(){if(this._cellCount!==null){return this._cellCount}var e=0;if(this.layoutType=="proportion"){e=this.axisLength}else{if(this.dataOrg.length&&this.dataOrg[0].length&&this.dataOrg[0][0].length){e=this.dataOrg[0][0].length}}this._cellCount=e;return e}}]);return n}();t["default"]=u}(e,i,r,a)});e(o);var l=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true}),t.default=function(t,r){var o={length:0,org:[],jsonOrg:[],data:[],getRowDataAt:l,getRowDataOf:i,getFieldData:s,getDataOrg:h,resetData:e,fields:[],range:{start:0,end:0},filters:{}};function n(t){t=JSON.parse(JSON.stringify(t,function(t,e){if(e===undefined){return null}return e}));if(!t||t.length==0){return o}if(t.length>0&&!p["default"].isArray(t[0])){o.jsonOrg=t;t=u(t);o.org=t}else{o.org=t;o.jsonOrg=f(t)}o.range.end=t.length-1-1;if(r){var e=r.dataZoom||r.datazoom;e&&e.range&&p["default"].extend(o.range,e.range)}if(t.length&&t[0].length&&!~t[0].indexOf("__index__")){for(var n=0,i=t.length;n<i;n++){if(!n){t[0].push("__index__")}else{t[n].push(n-1);o.jsonOrg[n-1]["__index__"]=n-1}}}o.fields=t[0]?t[0]:[];return o}function e(t){if(t){o.org=[];o.jsonOrg=[];o.fields=[];o.data=[];var e=p["default"].extend(true,{},o.range);n(t);p["default"].extend(true,o.range,e);if(o.range.end>o.length-1){o.range.end=o.length-1}if(o.range.start>o.length-1||o.range.start>o.range.end){o.range.start=0}}o.data=d()}function d(){var r=[];for(var t=0,e=o.fields.length;t<e;t++){var n={};n.field=o.fields[t];n.index=t;n.data=[];r.push(n)}var i=a(function(i){p["default"].each(o.fields,function(e){var t=i[e];if(!isNaN(t)&&t!==""&&t!==null){t=Number(t)}var n=p["default"].find(r,function(t){return t.field==e});n&&n.data.push(t)})});o.length=i.length;return r}function a(t){var i=[];p["default"].each(o.jsonOrg.slice(o.range.start,o.range.end+1),function(e){var n=true;if(p["default"].keys(o.filters).length){p["default"].each(o.filters,function(t){if(p["default"].isFunction(t)&&!t(e)){n=false;return false}})}if(n){t&&t(e);i.push(e)}});return i}function h(t,i,e,n){if(!n)n=0;var r=e||d();if(!r){return}if(!i){i=function t(e){return e}}function a(t){for(var e=0,n=t.length;e<n;e++){t[e]=i(t[e])}return t}if(!p["default"].isArray(t)){t=[t]}var o=[];for(var l=0,s=t.length;l<s;l++){if(p["default"].isArray(t[l])){o.push(h(t[l],i,e,n+1))}else{var u=o;if(!n){u=[]}for(var f=0,c=r.length;f<c;f++){if(t[l]==r[f].field){u.push(a(r[f].data));break}}if(!n){o.push(u)}}}return o}function l(t){var e={};var n=o.data;for(var i=0;i<n.length;i++){e[n[i].field]=n[i].data[t]}return e}function i(e){!e&&(e={});var t=[];var n=0;for(var i in e){n++}if(n){for(var r=o.range.start;r<=o.range.end;r++){var a=0;p["default"].each(o.data,function(t){if(t.field in e&&t.data[r]==e[t.field]){a++}});if(a==n){t.push(l(r))}}}return t}function s(e){var t=[];var n=p["default"].find(o.data,function(t){return t.field==e});n&&(t=n.data);return t}n(t);o.data=d();return o};var p=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function u(t){if(t===undefined||t===null){t=[]}if(t.length>0&&!p["default"].isArray(t[0])){var e=[];var n=[];var i=0;for(var r=0,a=t.length;r<a;r++){var o=t[r];if(r==0){for(var l in o){n.push(l)}e.push(n);i=n.length}var s=[];for(var u=0;u<i;u++){s.push(o[n[u]])}e.push(s)}return e}else{return t}}function f(t){var e=t;if(t.length>0&&p["default"].isArray(t[0])){e=[];var n=t[0];var i=n.length;for(var r=1,a=t.length;r<a;r++){var o={};for(var l=0;l<i;l++){o[n[l]]=t[r][l]}e.push(o)}return e}}}(e,i)});e(l);var s=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}var a=typeof window!=="undefined"?window.devicePixelRatio:1,r=function t(a,o){if(document[a]){var e=function t(e,n,i){if(e.length){for(var r=0;r<e.length;r++){t(e[r],n,i)}}else{e[a](n,i,false)}};return e}else{var n=function t(e,n,i){if(e.length){for(var r=0;r<e.length;r++){t(e[r],n,i)}}else{e[o]("on"+n,function(){return i.call(e,window.event)})}};return n}};t["default"]={query:function t(e){if(n["default"].isString(e)){return document.getElementById(e)}if(e.nodeType==1){return e}if(e.length){return e[0]}return null},offset:function t(e){var n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.body,a=i.documentElement,o=a.clientTop||r.clientTop||0,l=a.clientLeft||r.clientLeft||0,s=1;if(r.getBoundingClientRect){var u=r.getBoundingClientRect();s=(u.right-u.left)/r.clientWidth}if(s>1){o=0;l=0}var f=n.top/s+(window.pageYOffset||a&&a.scrollTop/s||r.scrollTop/s)-o,c=n.left/s+(window.pageXOffset||a&&a.scrollLeft/s||r.scrollLeft/s)-l;return{top:f,left:c}},addEvent:r("addEventListener","attachEvent"),removeEvent:r("removeEventListener","detachEvent"),pageX:function t(e){if(e.pageX)return e.pageX;else if(e.clientX)return e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);else return null},pageY:function t(e){if(e.pageY)return e.pageY;else if(e.clientY)return e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);else return null},createCanvas:function t(e,n,i){var r=document.createElement("canvas");r.style.position="absolute";r.style.width=e+"px";r.style.height=n+"px";r.style.left=0;r.style.top=0;r.setAttribute("width",e*a);r.setAttribute("height",n*a);r.setAttribute("id",i);return r},createView:function t(e,n,i){var r=document.createElement("div");r.className="canvax-view";r.style.cssText+="position:relative;width:100%;height:100%;";var a=document.createElement("div");a.style.cssText+="position:absolute;width:"+e+"px;height:"+n+"px;";var o=document.createElement("div");o.style.cssText+="position:absolute;width:"+e+"px;height:"+n+"px;";r.appendChild(a);r.appendChild(o);return{view:r,stageView:a,domView:o}}}}(e,i)});e(s);var u=n(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true});var e=["#ff8533","#73ace6","#82d982","#e673ac","#cd6bed","#8282d9","#c0e650","#e6ac73","#6bcded","#73e6ac","#ed6bcd","#9966cc"];t["default"]={colors:e,set:function t(e){this.colors=e;return this.colors},get:function t(){return this.colors}}}(e)});e(u);var f=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var u=n(e);function n(t){return t&&t.__esModule?t:{default:t}}t["default"]={_eval:function t(e,n,i,r){return i?new Function(i,e+"; return ".concat(n,";"))(r):new Function(e+"; return ".concat(n,";"))()},parse:function t(e,n,i,r){try{var a=n&&n.length&&n.length===2&&n[1]>n[0];if(!a){return this._eval(e,"options")}var o=this._eval(e,"variables");if(typeof o==="function"){o=o(i)||{}}var l={};if(r!==undefined){l=typeof r==="function"?r(i):r}l=u["default"].extend(true,{},o,l);var s=e.slice(0,n[0])+e.slice(n[1]);return this._eval(s,"options","variables",l)}catch(t){console.log("parse error");return{}}}}}(e,i)});e(f);var c=n(function(t,e){!function(t,e,n,i,p,r){Object.defineProperty(t,"__esModule",{value:true});var a=o(e),d=o(n),y=o(i),l=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var s=true;t["default"]={create:function t(e,n,i){var r=null;var a=this;var o=(0,p.cloneData)(n);var l=(0,p.cloneOptions)(i);var s=function t(){a.instances[r.id]=null;delete a.instances[r.id]};var u=y["default"].query(e).getAttribute("chart_id");if(u!=undefined){var f=a.instances[u];if(f){f.destroy();f.off&&f.off("destroy",s)}delete a.instances[u]}var c=2;if(a.__dimension==3||a.is3dOpt&&a.is3dOpt(i)){c=3}var d=a._getComponentModules(c);var h=a._getComponentModule("chart",c);r=new h(e,o,l,d);if(r){r.draw();a.instances[r.id]=r;r.on("destroy",s)}return r},setGlobalTheme:function t(e){a["default"].set(e)},getGlobalTheme:function t(){return a["default"].get()},parse:l["default"],instances:{},getChart:function t(e){return this.instances[e]},resize:function t(){for(var e in this.instances){this.instances[e].resize()}},getOptionsOld:function t(e){var n={prefix:"[[JSON_FUN_PREFIX_",suffix:"_JSON_FUN_SUFFIX]]"};var i=function t(e){return JSON.parse(e,function(t,e){if(typeof e==="string"&&e.indexOf(n.suffix)>0&&e.indexOf(n.prefix)==0){return new Function("return "+e.replace(n.prefix,"").replace(n.suffix,""))()}return e})||{}};return i(decodeURIComponent(this.options[e]||"%7B%7D"))},getOptionsNew:function t(e,n,i){var r=this.options[e];var a=decodeURIComponent(r.code);var o=r.range;return l["default"].parse(a,o,n,i)},getOptions:function t(e,n,i,r){if(!this.options[e]){return n||{}}var a=this.options[e];var o=typeof a==="string"?this.getOptionsOld(e):this.getOptionsNew(e,i||[],r||{});if(n){o=d["default"].extend(true,o,n)}return o},calculateOptions:function t(e,n,i){return this.getOptions(e,undefined,n,i)},components:{c_2d:{},c_3d:{}},_getComponentModules:function t(e){var i=this.components.c_2d;if(e==3){i=this.components.c_3d}if(!i.modules){i.modules={}}if(!i.get){i.get=function(t,e){if(!e){e="empty"}t=t.toLowerCase();e=e.toLowerCase();var n=i.modules[t];if(n&&n[e]){return n[e]}}}return i},registerComponent:function t(e,n){var i=2;var r="empty";if(arguments.length==3){var a=arguments[2];if(d["default"].isNumber(a)){if(a==3){i=3}}if(d["default"].isString(a)){r=a}}if(arguments.length==4){r=arguments[2];if(arguments[3]==3){i=3}}var o=this._getComponentModules(i).modules;n=n.toLowerCase();r=r.toLowerCase();var l=o[n];if(!l){l=o[n]={}}if(!l[r]){l[r]=e}return o},_getComponentModule:function t(e){var n=2;var i="empty";if(arguments.length==2){var r=arguments[1];if(d["default"].isNumber(r)){if(r==3){n=3}}if(d["default"].isString(r)){i=r}}if(arguments.length==3){i=arguments[1];if(arguments[2]==3){n=3}}e=e.toLowerCase();i=i.toLowerCase();var a=this._getComponentModules(n).modules[e];return a?a[i]:undefined},setAnimationEnabled:function t(e){s=e},getAnimationEnabled:function t(e){return s},layout:{},registerLayout:function t(e,n){this.layout[e]=n},props:{},getProps:function t(){var n={};var r=this._getComponentModules().modules;var e=function t(){if(a=="chart")return"continue";n[a]={detail:a,propertys:{}};if(a=="graphs"){o=d["default"].map(r.graphs,function(t,e){return e});n.graphs.documentation="可选的graphs类型有：\n"+o.join("\n")}s={};l=null;for(u in r[a]){if(l)break;l=r[a][u].prototype}function i(t){var e=t.constructor.__proto__;if(!e._isComponentRoot){i(e.prototype)}if(e.defaultProps&&d["default"].isFunction(e.defaultProps)){var n=e.defaultProps();d["default"].extend(s,n)}}i(l);n[a].propertys=d["default"].extend(s,n[a].propertys);var e=function t(){f=r[a][u];c=f.defaultProps?f.defaultProps():{};function l(e){if(e._props){var n=d["default"].isArray(e._props);for(var i in e._props){if(!n){e[i]={detail:i,propertys:{}}}var r=e._props[i];if(r.defaultProps){var a;var o;(function(){var t=function t(e){if(e.__proto__.__proto__){t(e.__proto__)}if(e.defaultProps&&d["default"].isFunction(e.defaultProps)){var n=e.defaultProps();if(n._props){l(n)}n&&d["default"].extend(o,n)}};a=r.defaultProps();o={};t(r.__proto__);a=d["default"].extend(o,a);if(n){d["default"].extend(e,a)}else{e[i].propertys=a;l(e[i].propertys)}})()}}}}l(c);c=d["default"].extend({},s,c);if(s.type){if(!n[a].typeMap)n[a].typeMap={};if(a=="graphs"){c.type.values=o;c.type.documentation="可选的graphs类型有：\n"+o.join("\n")}n[a].typeMap[u]=c}else{d["default"].extend(n[a].propertys,c)}};for(u in r[a]){e()}};for(var a in r){var o;var s;var l;var u;var u;var f;var c;var i=e();if(i==="continue")continue}this.props=n;return this.props}}}(e,u,i,s,a,f)});e(c);var d=n(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true}),t.colorRgb=n,t.colorRgba=e,t.hexTorgb=i,t.hexTostring=r,t.rgbTohex=o;var a=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;function n(t){var e=t.toLowerCase();if(e&&a.test(e)){if(e.length===4){var n="#";for(var i=1;i<4;i+=1){n+=e.slice(i,i+1).concat(e.slice(i,i+1))}e=n}var r=[];for(var i=1;i<7;i+=2){r.push(parseInt("0x"+e.slice(i,i+2)))}return"RGB("+r.join(",")+")"}else{return e}}function e(t,e){return n(t).replace(")",","+e+")").replace("RGB","RGBA")}function i(t,e){if(t.replace){t=parseInt(t.replace("#","0X"),16)}e=e||[];e[0]=(t>>16&255)/255;e[1]=(t>>8&255)/255;e[2]=(t&255)/255;return e}function r(t){t=t.toString(16);t="000000".substr(0,6-t.length)+t;return"#".concat(t)}function o(t){return(t[0]*255<<16)+(t[1]*255<<8)+t[2]*255}}(e)});e(d);var h=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true}),t.Polar=undefined;var g=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function o(t,e,n){if(e)r(t.prototype,e);if(n)r(t,n);return t}var _=360,b=Math.cos,x=Math.sin,u=function(){function a(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];i(this,a);this._opt=g["default"].clone(t);this.dataFrame=e;this.axisLength=1;this.dataOrg=[];this.startAngle=this._opt.startAngle;this.allAngles=Math.min(360,this._opt.allAngles);this.sort=this._opt.sort;this.layoutData=[];this.maxRadius=0;this.minRadius=0}o(a,[{key:"calculateProps",value:function t(){var n=this;var i=0;var r=0;var a=0;var o=this._opt;var l,s,u,f,c,d;var h=2;var p=o.node.outRadius;var y=o.node.innerRadius;var v=o.node.moveDis;this.layoutData.forEach(function(t,e){if(!t.enabled)return;i+=isNaN(+t.value)?0:+t.value;if(t.radiusField){n.maxRadius=Math.max(t.radiusValue,i);n.minRadius=Math.min(t.radiusValue,i)}});this.axisLength=i;if(i>0){a=g["default"].euclideanModulo(this.startAngle,_);this.layoutData.forEach(function(t,e){r=t.value/i;if(!t.enabled){r=0}l=n.allAngles*r;s=a+l;c=a+l*.5;u=b(g["default"].degToRad(c));f=x(g["default"].degToRad(c));u=u.toFixed(5);f=f.toFixed(5);d=n.getAuadrant(c);if(!!t.radiusField){p=parseInt((o.node.outRadius-o.node.innerRadius)*((t.radiusValue-n.minRadius)/(n.maxRadius-n.minRadius))+o.node.innerRadius)}g["default"].extend(t,{outRadius:p,innerRadius:y,startAngle:a,endAngle:s,midAngle:c,moveDis:v,outOffsetx:v*.7*u,outOffsety:v*.7*f,centerx:p*u,centery:p*f,outx:(p+v)*u,outy:(p+v)*f,edgex:(p+v)*u,edgey:(p+v)*f,orginPercentage:r,percentage:(r*100).toFixed(h),quadrant:d,isRightSide:d==1||d==4?1:0,cosV:u,sinV:f});a+=l})}}},{key:"resetData",value:function t(e){this.dataFrame=e||[];this.axisLength=1;this.dataOrg=[];this.startAngle=this._opt.startAngle||-90;this.allAngles=this._opt.allAngles||360;this.layoutData=[]}},{key:"setOption",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};Object.assign(this._opt,e);this.startAngle=this._opt.startAngle;this.allAngles=Math.min(360,this._opt.allAngles);this.sort=this._opt.sort}},{key:"setDataFrame",value:function t(e){var n=this;var i=[];var r=this._opt;var a=r.field;var o=r.groupField||r.label.field||r.field;var l=r.node.radius;e=e||this.dataFrame;this.dataFrame=e;this.dataOrg=[];for(var s=0,u=e.length;s<u;s++){var f=e.getRowDataAt(s);var c={rowData:f,enabled:true,value:f[a],label:f[o],iNode:s};this.dataOrg.push(f[a]);if(this._isFiled(l,c)){c.radiusField=l;c.radiusValue=f[l]}i.push(c)}if(this.sort){this.dataOrg=[];i.sort(function(t,e){if(n.sort=="asc"){return t.value-e.value}else{return e.value-t.value}});g["default"].each(i,function(t,e){t.iNode=e;n.dataOrg.push(t)})}this.layoutData=i;return i}},{key:"getLayoutData",value:function t(){return this.layoutData||[]}},{key:"_isFiled",value:function t(e,n){return e&&g["default"].isString(e)&&e in n.rowData}},{key:"getAuadrant",value:function t(e){e=g["default"].euclideanModulo(e,_);var n=parseInt(e/90);var i=0;switch(n){case 0:i=1;break;case 1:i=2;break;case 2:i=3;break;case 3:case 4:i=4;break}return i}},{key:"_getLayoutDataOf",value:function t(e){var n=[{val:"value"},{ind:"iNode"}];var i=n[Object.keys(e)[0]];var r;g["default"].each(this.layoutData,function(t){if(t[i]===e[i]){r=t}});return r||{}}},{key:"getRadiansAtR",value:function t(){}},{key:"getPointsOfR",value:function t(i,e){var r=[];g["default"].each(e,function(t){var e=Math.PI*t/180;var n=a.getPointInRadianOfR(e,i);r.push(n)});return r}}]);return a}();u.filterPointsInRect=function(t,e,n,i){for(var r=0,a=t.length;r<a;r++){if(!u.checkPointInRect(t[r],e,n,i)){t.splice(r,1);r--,a--}}return t},u.checkPointInRect=function(t,e,n,i){var r={x:t.x+e.x,y:t.y+e.y};return!(r.x<0||r.x>n||r.y<0||r.y>i)},u.checkArcInRect=function(t,e,n,i,r){var a=t[0];var o=t[1];var l=o.radian-a.radian;if(o.radian<a.radian){l=Math.PI*2+o.radian-a.radian}var s=(a.radian+l/2)%(Math.PI*2);return u.checkPointInRect(u.getPointInRadianOfR(s,e),n,i,r)},u.getRadianInPoint=function(t){var e=Math.PI*2;return(Math.atan2(t.y,t.x)+e)%e},u.getPointInRadianOfR=function(t,e){var n=Math.PI;var i=Math.cos(t)*e;if(t==n/2||t==n*3/2){i=0}var r=Math.sin(t)*e;if(t%n==0){r=0}return{x:i,y:r}},u.getROfNum=function(t,e,n,i){var r=0;var a=g["default"].max(e);var o=0;var l=parseInt(Math.max(n,i)/2);r=l*((t-o)/(a-o));return r},t.Polar=u}(e,i)});e(h);var p=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var r=n(e);function n(t){return t&&t.__esModule?t:{default:t}}var i=function t(e){var n="CanvaxEvent";if(r["default"].isString(e)){n=e}if(r["default"].isObject(e)&&e.type){n=e.type;r["default"].extend(this,e)}this.target=null;this.currentTarget=null;this.type=n;this.point=null;var i=this;this._stopPropagation=false;this.stopPropagation=function(){i._stopPropagation=true;if(r["default"].isObject(e)){e._stopPropagation=true}};this._preventDefault=false;this.preventDefault=function(){i._preventDefault=true;if(r["default"].isObject(e)){e._preventDefault=true}}};t["default"]=i}(e,i)});e(p);var y=n(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}var r="mousedown mouseup mouseover mousemove mouseout click dblclick wheel keydown keypress keyup";t["default"]={_types:r.split(/,| /),register:function t(e){if(!e){return}if(n["default"].isString(e)){e=e.split(/,| /)}this._types=r.split(/,| /).concat(e)},get:function t(){return this._types}}}(e,i)});e(y);var v=n(function(t,e){!function(t,e,n){Object.defineProperty(t,"__esModule",{value:true});var i=r(e),o=r(n);function r(t){return t&&t.__esModule?t:{default:t}}var a=function t(){this._eventMap={}};a.prototype={_setEventEnable:function t(){if(this.children)return;var e=false;for(var n in this._eventMap){if(o["default"].indexOf(i["default"].get(),n)>-1){e=true}}this._eventEnabled=e},_addEventListener:function t(e,n){if(typeof n!="function"){return false}var i=true;var r=this;var a=e;if(o["default"].isString(e)){a=e.split(/,| /)}o["default"].each(a,function(t){var e=r._eventMap[t];if(!e){e=r._eventMap[t]=[];e.push(n);r._setEventEnable();return true}if(o["default"].indexOf(e,n)==-1){e.push(n);r._setEventEnable();return true}i=false});return i},_removeEventListener:function t(e,n){if(arguments.length==1)return this.removeEventListenerByType(e);var i=this._eventMap[e];if(!i){return false}for(var r=0;r<i.length;r++){var a=i[r];if(a===n){i.splice(r,1);if(i.length==0){delete this._eventMap[e];this._setEventEnable()}return true}}return false},_removeEventListenerByType:function t(e){var n=this._eventMap[e];if(!n){delete this._eventMap[e];this._setEventEnable();return true}return false},_removeAllEventListeners:function t(){this._eventMap={};this._eventEnabled=false},_dispatchEvent:function t(e){var n=this._eventMap[e.type];if(n){if(!e.target)e.target=this;if(!e.currentTarget)e.currentTarget=this;n=n.slice();for(var i=0;i<n.length;i++){var r=n[i];if(typeof r=="function"){r.call(this,e)}}}if(!e._stopPropagation){if(this.parent){e.currentTarget=this.parent;this.parent._dispatchEvent(e)}}return true},_hasEventListener:function t(e){var n=this._eventMap[e];return n!=null&&n.length>0}},t["default"]=a}(e,y,i)});e(v);var g=n(function(t,e){!function(t,e,n,i){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var r=a(e),o=a(n),l=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function t(e){return typeof e}}else{s=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return s(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function d(t,e){if(e&&(s(e)==="object"||typeof e==="function")){return e}return h(t)}function h(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return p(t)}function y(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)v(t,e)}function v(t,e){v=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return v(t,e)}var g=function(t){y(e,t);function e(){u(this,e);return d(this,p(e).call(this))}c(e,[{key:"on",value:function t(e,n){this._addEventListener(e,n);return this}},{key:"addEventListener",value:function t(e,n){this._addEventListener(e,n);return this}},{key:"un",value:function t(e,n){this._removeEventListener(e,n);return this}},{key:"removeEventListener",value:function t(e,n){this._removeEventListener(e,n);return this}},{key:"removeEventListenerByType",value:function t(e){this._removeEventListenerByType(e);return this}},{key:"removeAllEventListeners",value:function t(){this._removeAllEventListeners();return this}},{key:"fire",value:function t(e,n){var i=new o["default"](e);if(n){for(var r in n){if(r!="type"){i[r]=n[r]}}}var a=this;l["default"].each(e.split(" "),function(t){i.currentTarget=a;a.dispatchEvent(i)});return this}},{key:"dispatchEvent",value:function t(e){if(this.children&&e.point){var n=this.getObjectsUnderPoint(e.point,1)[0];if(n){n.dispatchEvent(e)}return}if(this.context&&e.type=="mouseover"){var i=this._heartBeatNum;var r=this.context.$model.globalAlpha;this._dispatchEvent(e);if(i!=this._heartBeatNum){this._hoverClass=true;if(this.hoverClone){var a=this.getStage().parent;var o=this.clone(true);o._transform=this.getConcatenatedMatrix();a._bufferStage.addChildAt(o,0);this._globalAlpha=r;this.context.globalAlpha=0}}return}this._dispatchEvent(e);if(this.context&&e.type=="mouseout"){if(this._hoverClass&&this.hoverClone){var a=this.getStage().parent;this._hoverClass=false;a._bufferStage.removeChildById(this.id);if(this._globalAlpha){this.context.globalAlpha=this._globalAlpha;delete this._globalAlpha}}}return this}},{key:"hasEvent",value:function t(e){return this._hasEventListener(e)}},{key:"hasEventListener",value:function t(e){return this._hasEventListener(e)}},{key:"hover",value:function t(e,n){this.on("mouseover",e);this.on("mouseout",n);return this}},{key:"once",value:function t(e,n){var i=this;var r=function t(){n.apply(i,arguments);this.un(e,t)};this.on(e,r);return this}}]);return e}(r["default"]);t.default=g}(e,v,p,i)});e(g);var _=n(function(t,e){!function(t,e,n,i,r){Object.defineProperty(t,"__esModule",{value:true});var s=o(e),a=o(n),u=o(i),f=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var l=["pan","panstart","panmove","panend","pancancel","panleft","panright","panup","pandown","press","pressup","swipe","swipeleft","swiperight","swipeup","swipedown","tap"],c=function t(e,n){this.canvax=e;this.curPoints=[{x:0,y:0}];this.curPointsTarget=[];this._touching=false;this._draging=false;this._cursor="default";this.target=this.canvax.view;this.drag={start:"panstart",move:"panmove",end:"panend"};u["default"].extend(true,this,n)},d=document&&document.compareDocumentPosition?function(t,e){if(!e){return false}return!!(t.compareDocumentPosition(e)&16)}:function(t,e){if(!e){return false}return e!==e&&(t.contains?t.contains(e):true)};c.prototype={init:function t(){var e=this;if(e.target.nodeType==undefined){a["default"].register(l)}f["default"].addEvent(e.target,"contextmenu",function(t){if(t&&t.preventDefault){t.preventDefault()}else{window.event.returnValue=false}});u["default"].each(a["default"].get(),function(t){if(e.target.nodeType==1){f["default"].addEvent(e.target,t,function(t){e.__mouseHandler(t)})}else{e.target.on(t,function(t){e.__libHandler(t)})}})},__mouseHandler:function t(e){var n=this;var i=n.canvax;i.updateViewOffset();n.curPoints=[{x:f["default"].pageX(e)-i.viewOffset.left,y:f["default"].pageY(e)-i.viewOffset.top}];var r=n.curPoints[0];var a=n.curPointsTarget[0];if(u["default"].indexOf(["mousedown","mouseover","click"],e.type)>-1&&!a){if(!a){var o=i.getObjectsUnderPoint(r,1)[0];if(o){n.curPointsTarget=[o]}}a=n.curPointsTarget[0]}if(e.type=="mousedown"){if(a&&a.dragEnabled){n._touching=true}}if(e.type=="mouseup"||e.type=="mouseout"&&!d(i.view,e.toElement||e.relatedTarget)){if(n._draging==true){n._dragEnd(e,a,0);a.fire("dragend")}n._draging=false;n._touching=false}if(e.type=="mouseout"){if(!d(i.view,e.toElement||e.relatedTarget)){n.__getcurPointsTarget(e,r,true)}}else if(e.type=="mousemove"){if(n._touching&&e.type=="mousemove"&&a){if(!n._draging){a.fire("dragstart");if(!a._globalAlpha){a._globalAlpha=a.context.$model.globalAlpha}a.context.globalAlpha=0;var l=n._clone2hoverStage(a,0);l.context.globalAlpha=a._globalAlpha}else{n._dragIngHander(e,a,0)}n._draging=true}else{n.__getcurPointsTarget(e,r)}}else{var s=a;if(!s){s=i}n.__dispatchEventInChilds(e,[s]);n._cursorHander(s)}if(i.preventDefault||e._preventDefault){if(e&&e.preventDefault){e.preventDefault()}else{window.event.returnValue=false}}},__getcurPointsTarget:function t(e,n,i){var r=this;var a=r.canvax;var o=r.curPointsTarget[0];if(o&&!o.context){o=null}var e=new s["default"](e);if(e.type=="mousemove"&&o&&o._hoverClass&&o.hoverClone&&o.pointChkPriority&&o.getChildInPoint(n)){e.target=e.currentTarget=o;e.point=o.globalToLocal(n);o.dispatchEvent(e);return}var l=i?null:a.getObjectsUnderPoint(n,1)[0];if(o&&o!=l||e.type=="mouseout"){if(o&&o.context){r.curPointsTarget[0]=null;e.type="mouseout";e.toTarget=l;e.target=e.currentTarget=o;e.point=o.globalToLocal(n);o.dispatchEvent(e)}}if(l&&o!=l){r.curPointsTarget[0]=l;e.type="mouseover";e.fromTarget=o;e.target=e.currentTarget=l;e.point=l.globalToLocal(n);l.dispatchEvent(e)}if(e.type=="mousemove"&&l){e.target=e.currentTarget=o;e.point=o.globalToLocal(n);o.dispatchEvent(e)}r._cursorHander(l,o)},_cursorHander:function t(e,n){if(!e&&!n){this._setCursor("default")}if(e&&n!=e&&e.context){this._setCursor(e.context.$model.cursor)}},_setCursor:function t(e){if(this._cursor==e){return}this.canvax.view.style.cursor=e;this._cursor=e},__libHandler:function t(n){var i=this;var e=i.canvax;e.updateViewOffset();i.curPoints=i.__getCanvaxPointInTouchs(n);if(!i._draging){i.curPointsTarget=i.__getChildInTouchs(i.curPoints)}if(i.curPointsTarget.length>0){if(n.type==i.drag.start){u["default"].each(i.curPointsTarget,function(t,e){if(t&&t.dragEnabled){i._draging=true;if(!t._globalAlpha){t._globalAlpha=t.context.$model.globalAlpha}i._clone2hoverStage(t,e);t.context.globalAlpha=0;t.fire("dragstart");return false}})}if(n.type==i.drag.move){if(i._draging){u["default"].each(i.curPointsTarget,function(t,e){if(t&&t.dragEnabled){i._dragIngHander(n,t,e)}})}}if(n.type==i.drag.end){if(i._draging){u["default"].each(i.curPointsTarget,function(t,e){if(t&&t.dragEnabled){i._dragEnd(n,t,0);t.fire("dragend")}});i._draging=false}}i.__dispatchEventInChilds(n,i.curPointsTarget)}else{i.__dispatchEventInChilds(n,[e])}},__getCanvaxPointInTouchs:function t(e){var n=this;var i=n.canvax;var r=[];u["default"].each(e.point,function(t){r.push({x:f["default"].pageX(t)-i.viewOffset.left,y:f["default"].pageY(t)-i.viewOffset.top})});return r},__getChildInTouchs:function t(e){var n=this;var i=n.canvax;var r=[];u["default"].each(e,function(t){r.push(i.getObjectsUnderPoint(t,1)[0])});return r},__dispatchEventInChilds:function t(i,e){if(!e&&!("length"in e)){return false}var r=this;u["default"].each(e,function(t,e){if(t){var n=new s["default"](i);n.stagePoint=r.curPoints[e];n.point=t.globalToLocal(n.stagePoint);t.dispatchEvent(n)}})},_clone2hoverStage:function t(e,n){var i=this;var r=i.canvax;var a=r._bufferStage.getChildById(e.id);if(!a){a=e.clone(true);a._transform=e.getConcatenatedMatrix();r._bufferStage.addChildAt(a,0)}a.context.globalAlpha=e._globalAlpha;e._dragPoint=e.globalToLocal(i.curPoints[n]);return a},_dragIngHander:function t(e,n,i){var r=this;var a=r.canvax;var o=n.globalToLocal(r.curPoints[i]);n._noHeart=true;var l=n.moveing;n.moveing=true;n.context.x+=o.x-n._dragPoint.x;n.context.y+=o.y-n._dragPoint.y;n.fire("draging");n.moveing=l;n._noHeart=false;var s=a._bufferStage.getChildById(n.id);s._transform=n.getConcatenatedMatrix();s.worldTransform=null;s.heartBeat()},_dragEnd:function t(e,n,i){var r=this;var a=r.canvax;var o=a._bufferStage.getChildById(n.id);o&&o.destroy();n.context.globalAlpha=n._globalAlpha}},t["default"]=c}(e,p,y,i,s)});e(_);var b=n(function(t,e){!function(t,e,n,i,r,a){Object.defineProperty(t,"__esModule",{value:true}),t.types=t.Manager=t.Handler=t.Dispatcher=t.Event=undefined;var o=c(e),l=c(n),s=c(i),u=c(r),f=c(a);function c(t){return t&&t.__esModule?t:{default:t}}t.Event=o["default"],t.Dispatcher=l["default"],t.Handler=s["default"],t.Manager=u["default"],t.types=f["default"]}(e,p,g,_,v,y)});e(b);var x=e(n(function(t,e){!function(t,e,n,i,r,a,o,l,s,u,f){Object.defineProperty(t,"__esModule",{value:true}),t.event=t.Polar=t.getDefaultProps=t.color=t.global=t.cloneData=t.cloneOptions=t.$=t._=t.dataSection=t.dataFrame=t.axis=undefined;var c=m(e),d=m(n),h=m(i),p=m(r),y=m(a),v=m(o),g=x(l),_=x(f);function b(){if(typeof WeakMap!=="function")return null;var t=new WeakMap;b=function(){return t};return t}function x(t){if(t&&t.__esModule){return t}if(t===null||typeof t!=="object"&&typeof t!=="function"){return{default:t}}var e=b();if(e&&e.has(t)){return e.get(t)}var n={};var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;if(a&&(a.get||a.set)){Object.defineProperty(n,r,a)}else{n[r]=t[r]}}}n.default=t;if(e){e.set(t,n)}return n}function m(t){return t&&t.__esModule?t:{default:t}}t.axis=c["default"],t.dataFrame=d["default"],t.dataSection=h["default"],t._=p["default"],t.$=y["default"],t.cloneOptions=s.cloneOptions,t.cloneData=s.cloneData,t.global=v["default"],t.color=g,t.getDefaultProps=s.getDefaultProps,t.Polar=u.Polar,t.event=_}(e,o,l,r,i,s,c,d,a,h,b)}));t.exports=x});t(X);var n=e(function(t){var e,r=(e=X)&&"object"==typeof e&&"default"in e?e.default:e;function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t,e){return t(e={exports:{}},e.exports),e.exports}var a=i(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var i={mainFrameRate:60,now:0,_pixelCtx:null,__emptyFunc:function t(){},_devicePixelRatio:typeof window!=="undefined"?window.devicePixelRatio:1,_UID:0,getUID:function t(){return this._UID++},createId:function t(e){var n=e.charCodeAt(e.length-1);if(n>=48&&n<=57)e+="_";return e+i.getUID()},canvasSupport:function t(){return!!document.createElement("canvas").getContext},initElement:function t(e){if(window.FlashCanvas&&FlashCanvas.initElement){FlashCanvas.initElement(e)}return e},getCssOrderArr:function t(e){var n;var i;var r;var a;if(typeof e==="number"){n=i=r=a=e}else if(e instanceof Array){if(e.length===1){n=i=r=a=e[0]}else if(e.length===2){n=r=e[0];i=a=e[1]}else if(e.length===3){n=e[0];i=a=e[1];r=e[2]}else{n=e[0];i=e[1];r=e[2];a=e[3]}}else{n=i=r=a=0}return[n,i,r,a]},isWebGLSupported:function t(){var e={stencil:true};try{if(!window.WebGLRenderingContext){return false}var n=document.createElement("canvas"),i=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);return!!(i&&i.getContextAttributes().stencil)}catch(t){return false}},checkOpt:function t(e){if(!e){e={context:{}}}else{if(!e.context){e.context={}}}return e}};i._pixelCtx=i.initElement(e.$.createCanvas(1,1,"_pixelCanvas")).getContext("2d"),t["default"]=i}(e,r)});n(a);var o=i(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true});var u=function t(e,n,i,r,a,o){this.a=e!=undefined?e:1;this.b=n!=undefined?n:0;this.c=i!=undefined?i:0;this.d=r!=undefined?r:1;this.tx=a!=undefined?a:0;this.ty=o!=undefined?o:0;this.array=null};u.prototype={concat:function t(e){var n=this.a;var i=this.c;var r=this.tx;this.a=n*e.a+this.b*e.c;this.b=n*e.b+this.b*e.d;this.c=i*e.a+this.d*e.c;this.d=i*e.b+this.d*e.d;this.tx=r*e.a+this.ty*e.c+e.tx;this.ty=r*e.b+this.ty*e.d+e.ty;return this},concatTransform:function t(e,n,i,r,a){var o=1;var l=0;if(a%360){var s=a*Math.PI/180;o=Math.cos(s);l=Math.sin(s)}this.concat(new u(o*i,l*i,-l*r,o*r,e,n));return this},rotate:function t(e){var n=Math.cos(e);var i=Math.sin(e);var r=this.a;var a=this.c;var o=this.tx;if(e>0){this.a=r*n-this.b*i;this.b=r*i+this.b*n;this.c=a*n-this.d*i;this.d=a*i+this.d*n;this.tx=o*n-this.ty*i;this.ty=o*i+this.ty*n}else{var l=Math.sin(Math.abs(e));var s=Math.cos(Math.abs(e));this.a=r*s+this.b*l;this.b=-r*l+this.b*s;this.c=a*s+this.d*l;this.d=-a*l+s*this.d;this.tx=s*o+l*this.ty;this.ty=s*this.ty-l*o}return this},scale:function t(e,n){this.a*=e;this.d*=n;this.tx*=e;this.ty*=n;return this},translate:function t(e,n){this.tx+=e;this.ty+=n;return this},identity:function t(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function t(){var e=this.a;var n=this.b;var i=this.c;var r=this.d;var a=this.tx;var o=e*r-n*i;this.a=r/o;this.b=-n/o;this.c=-i/o;this.d=e/o;this.tx=(i*this.ty-r*a)/o;this.ty=-(e*this.ty-n*a)/o;return this},clone:function t(){return new u(this.a,this.b,this.c,this.d,this.tx,this.ty)},toArray:function t(e,n){if(arguments.length==0){if(isNaN(this.a)||isNaN(this.b)||isNaN(this.c)||isNaN(this.d)||isNaN(this.tx)||isNaN(this.ty)){return null}return[this.a,this.b,this.c,this.d,this.tx,this.ty]}if(!this.array){this.array=new Float32Array(9)}var i=n||this.array;if(e){i[0]=this.a;i[1]=this.b;i[2]=0;i[3]=this.c;i[4]=this.d;i[5]=0;i[6]=this.tx;i[7]=this.ty;i[8]=1}else{i[0]=this.a;i[1]=this.c;i[2]=this.tx;i[3]=this.b;i[4]=this.d;i[5]=this.ty;i[6]=0;i[7]=0;i[8]=1}return i},mulVector:function t(e){var n=this.a,i=this.c,r=this.tx;var a=this.b,o=this.d,l=this.ty;var s=[0,0];s[0]=e[0]*n+e[1]*i+r;s[1]=e[0]*a+e[1]*o+l;return s}},t["default"]=u}(e)});n(o);var l=i(function(t,e){!function(t){function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function e(t,e,n){if(e)i(t.prototype,e);if(n)i(t,n);return t}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function a(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;l(this,a);if(arguments.length==1&&o(arguments[0])=="object"){var n=arguments[0];if("x"in n&&"y"in n){this.x=n.x*1;this.y=n.y*1}else{var i=0;for(var r in n){if(i==0){this.x=n[r]*1}else{this.y=n[r]*1;break}i++}}}else{this.x=t*1;this.y=e*1}}e(a,[{key:"toArray",value:function t(){return[this.x,this.y]}}]);return a}();t.default=n}(e)});n(l);var s=i(function(t,e){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}n.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:l.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(t)&&(r._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i,l=new n;l.Group=n,l._nextId=0,l.nextId=function(){return l._nextId++},"undefined"==typeof window&&"undefined"!=typeof process?l.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?l.now=window.performance.now.bind(window.performance):void 0!==Date.now?l.now=Date.now:l.now=function(){return(new Date).getTime()},l.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=l.Easing.Linear.None,this._interpolationFunction=l.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||l,this._id=l.nextId()},l.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?l.now()+parseFloat(t):t:l.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,a=this._valuesEnd[e];a instanceof Array?this._object[e]=this._interpolationFunction(a,i):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?r+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[e]=r+(a-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var l=0,s=this._chainedTweens.length;l<s;l++)this._chainedTweens[l].start(this._startTime+this._duration);return!1}},l.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-l.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*l.Easing.Bounce.In(2*t):.5*l.Easing.Bounce.Out(2*t-1)+.5}}},l.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=l.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],i):1<e?a(t[n],t[n-1],n-i):a(t[r],t[n<r+1?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,a=l.Interpolation.Utils.Bernstein,o=0;o<=i;o++)n+=r(1-e,i-o)*r(e,o)*t[o]*a(i,o);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=l.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):1<e?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=l.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(i=[1],function(t){var e=1;if(i[t])return i[t];for(var n=t;1<n;n--)e*=n;return i[t]=e}),CatmullRom:function(t,e,n,i,r){var a=.5*(n-t),o=.5*(i-e),l=r*r;return(2*e-2*n+a+o)*(r*l)+(-3*e+3*n-2*a-o)*l+a*r+e}}},t.exports=l}),u=i(function(t,e){!function(t,e,n,a){Object.defineProperty(t,"__esModule",{value:true});var o=i(e),l=i(n);function i(t){return t&&t.__esModule?t:{default:t}}var s=0,r,u;if(typeof window!=="undefined"){r=window.requestAnimationFrame;u=window.cancelAnimationFrame;var f=["ms","moz","webkit","o"];for(var c=0;c<f.length&&!window.requestAnimationFrame;++c){r=window.requestAnimationFrame=window[f[c]+"RequestAnimationFrame"];u=window.cancelAnimationFrame=window[f[c]+"CancelAnimationFrame"]||window[f[c]+"CancelRequestAnimationFrame"]}}if(!r){r=function t(e,n){var i=(new Date).getTime();var r=Math.max(0,16-(i-s));var a=setTimeout(function(){e(i+r)},r);s=i+r;return a}}if(!u){u=function t(e){clearTimeout(e)}}var d=[],h=null;function p(){if(!h){h=r(function(){o["default"].update();var t=d;d=[];h=null;while(t.length>0){t.shift().task()}})}return h}function y(t){if(!t){return}d.push(t);return p()}function v(t){var e=false;for(var n=0,i=d.length;n<i;n++){if(d[n].id===t.id){e=true;d.splice(n,1);n--;i--}}if(d.length==0){u(h);h=null}return e}function g(t){var e=a._.extend({from:null,to:null,duration:500,onStart:function t(){},onUpdate:function t(){},onComplete:function t(){},onStop:function t(){},repeat:0,delay:0,easing:"Linear.None",desc:""},t);if(!a.global.getAnimationEnabled()){e.duration=0;e.delay=0}var n={};var i="tween_"+l["default"].getUID();e.id&&(i=i+"_"+e.id);if(e.from&&e.to){var r=function t(){if(n._isCompleteed||n._isStoped){n=null;return}y({id:i,task:t,desc:e.desc,tween:n})};n=new o["default"].Tween(e.from).to(e.to,e.duration).onStart(function(){e.onStart(e.from)}).onUpdate(function(){e.onUpdate(e.from)}).onComplete(function(){v({id:i});n._isCompleteed=true;e.onComplete(e.from)}).onStop(function(){v({id:i});n._isStoped=true;e.onStop(e.from)}).repeat(e.repeat).delay(e.delay).easing(o["default"].Easing[e.easing.split(".")[0]][e.easing.split(".")[1]]);n.id=i;n.start();r()}return n}function _(t,e){t.stop()}t["default"]={registFrame:y,destroyFrame:v,registTween:g,destroyTween:_,Tween:o["default"],taskList:d}}(e,s,a,r)});n(u);var f=i(function(t,e){!function(t,c){function d(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){d=function t(e){return typeof e}}else{d=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return d(t)}function h(e){var s=true;var u={},n={},i=["$watch","$model"],f={};var r=i;function t(o,t){if(c._.indexOf(i,o)===-1){f[o]=t}var l=d(t);if(c._.indexOf(r,o)>-1){return}if(l==="function"){r.push(o)}else{var e=function t(e){var n=f[o],i=n,r;if(arguments.length){var a=d(e);if(s){return}if(n!==e){if(e&&a==="object"&&!(e instanceof Array)&&!e.addColorStop){n=e.$model?e:h(e);r=n.$model}else{n=e}f[o]=r?r:n;if(l!=a){l=a}if(u.$watch){u.$watch.call(u,o,n,i)}}}else{if(n&&l==="object"&&!(n instanceof Array)&&!n.$model&&!n.addColorStop){n=h(n);n.$watch=u.$watch;f[o]=n}return n}};n[o]={set:e,get:e,enumerable:true}}}for(var a in e){t(a,e[a])}u=o(u,n,r);c._.forEach(r,function(t){if(e[t]){if(typeof e[t]=="function"){u[t]=function(){e[t].apply(this,arguments)}}else{u[t]=e[t]}}});u.$model=f;u.hasOwnProperty=function(t){return t in u.$model};s=false;return u}Object.defineProperty(t,"__esModule",{value:true});var r=Object.defineProperty;try{r({},"_",{value:"x"});var o=Object.defineProperties}catch(t){if("__defineGetter__"in Object){r=function t(e,n,i){if("value"in i){e[n]=i.value}if("get"in i){e.__defineGetter__(n,i.get)}if("set"in i){e.__defineSetter__(n,i.set)}return e};o=function t(e,n){for(var i in n){if(n.hasOwnProperty(i)){r(e,i,n[i])}}return e}}}t["default"]=h}(e,r)});n(f);var c=i(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true});var e=t.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},n=t.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},i=t.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3},r=t.SCALE_MODES={LINEAR:0,NEAREST:1},a=t.CONTEXT_DEFAULT={width:0,height:0,x:0,y:0,scaleX:1,scaleY:1,scaleOrigin:{x:0,y:0},rotation:0,rotateOrigin:{x:0,y:0},visible:true,globalAlpha:1},o=t.SHAPE_CONTEXT_DEFAULT={cursor:"default",fillAlpha:1,fillStyle:null,lineCap:null,lineJoin:null,miterLimit:null,strokeAlpha:1,strokeStyle:null,lineType:"solid",lineWidth:null},l=t.TRANSFORM_PROPS=["x","y","scaleX","scaleY","rotation","scaleOrigin","rotateOrigin"],s=t.STYLE_PROPS=["lineWidth","strokeAlpha","strokeStyle","fillStyle","fillAlpha","globalAlpha"]}(e)});n(c);var d=i(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true}),t.default=e;var s=function t(e,n,i,r){var a=e[0];var o=e[1];var l=e[2];var s=e[3];var u=Math.max(r,3);var f=0;var c=a;if(i>o+u&&i>s+u||i<o-u&&i<s-u||n>a+u&&n>l+u||n<a-u&&n<l-u){return false}if(a!==l){f=(o-s)/(a-l);c=(a*s-l*o)/(a-l)}else{return Math.abs(n-a)<=u/2}var d=(f*n-i+c)*(f*n-i+c)/(f*f+1);return d<=u/2*u/2};function e(t,e,n,i){var r=t.shape.points;var a=t.lineWidth;var o=false;for(var l=0;l<r.length;++l){o=s(r.slice(l,l+4),e,n,a);if(o){break}l+=1}return o}}(e)});n(d);var h=i(function(t,e){var n;n=e,Object.defineProperty(n,"__esModule",{value:!0}),n.default={RESOLUTION:"undefined"!=typeof window?window.devicePixelRatio:1,TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,FILTER_RESOLUTION:1,SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@(.+)x/,RENDER_OPTIONS:{view:null,antialias:!0,forceFXAA:!1,autoResize:!1,transparent:!0,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION:"mediump"}});n(h);var p=i(function(t,e){!function(t,c,e,n,i,r,a,o,l,s){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var u=g(e),f=g(n),d=g(i),h=g(r),p=g(a),y=g(l),v=g(s);function g(t){return t&&t.__esModule?t:{default:t}}function _(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_=function t(e){return typeof e}}else{_=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _(t)}function b(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function m(t,e,n){if(e)x(t.prototype,e);if(n)x(t,n);return t}function w(t,e){if(e&&(_(e)==="object"||typeof e==="function")){return e}return k(t)}function S(t){S=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return S(t)}function k(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function O(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)P(t,e)}function P(t,e){P=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return P(t,e)}var A=function(t){O(i,t);function i(t){var e;b(this,i);e=w(this,S(i).call(this,t));e._transform=null;e.worldTransform=null;e._transformChange=false;e._heartBeatNum=0;e.stage=null;e.parent=null;e.xyToInt="xyToInt"in t?t.xyToInt:true;e.moveing=false;e.clip=null;e.context=e._createContext(t);e.type=t.type||"DisplayObject";e.id=t.id||d["default"].createId(e.type);e._trackList=[];e.init.apply(k(e),arguments);e._updateTransform();e._tweens=[];var n=k(e);e.on("destroy",function(){n.cleanAnimates()});return e}m(i,[{key:"init",value:function t(){}},{key:"clipTo",value:function t(e){this.clip=e;e.isClip=true}},{key:"_createContext",value:function t(e){var r=this;var n=e.context||{};var i={width:n.width||0,height:n.height||0,x:n.x||0,y:n.y||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1,scaleOrigin:n.scaleOrigin||{x:0,y:0},rotation:n.rotation||0,rotateOrigin:n.rotateOrigin||{x:0,y:0},visible:n.visible||true,globalAlpha:n.globalAlpha||1};c._.extend(true,i,e.context);r._notWatch=false;r._noHeart=false;i.$watch=function(t,e,n){var i=r;if(!i.context){return}if(t=="globalGalpha"){i._globalAlphaChange=true}if(c._.indexOf(o.TRANSFORM_PROPS,t)>-1){i._updateTransform();i._transformChange=true}if(i._notWatch){return}if(i.$watch){i._notWatch=true;i.$watch(t,e,n);i._notWatch=false}if(i._noHeart){return}i.heartBeat({convertType:"context",shape:i,name:t,value:e,preValue:n})};return(0,p["default"])(i)}},{key:"track",value:function t(e){if(c._.indexOf(this._trackList,e)==-1){this._trackList.push(e)}}},{key:"untrack",value:function t(e){var n=c._.indexOf(this._trackList,e);if(n>-1){this._trackList.splice(n,1)}}},{key:"clone",value:function t(e){var n={id:this.id,context:c._.clone(this.context.$model),isClone:true};var i;if(this.type=="text"){i=new this.constructor(this.text,n)}else{i=new this.constructor(n)}i.id=n.id;if(this.children){i.children=this.children}if(this.graphics){i.graphics=this.graphics.clone()}if(!e){i.id=d["default"].createId(i.type)}return i}},{key:"heartBeat",value:function t(e){var n=this.getStage();if(n){this._heartBeatNum++;n.heartBeat&&n.heartBeat(e)}}},{key:"getCurrentWidth",value:function t(){return Math.abs(this.context.$model.width*this.context.$model.scaleX)}},{key:"getCurrentHeight",value:function t(){return Math.abs(this.context.$model.height*this.context.$model.scaleY)}},{key:"getStage",value:function t(){if(this.stage){return this.stage}var e=this;if(e.type!="stage"){while(e.parent){e=e.parent;if(e.type=="stage"){break}}if(e.type!=="stage"){return false}}this.stage=e;return e}},{key:"localToGlobal",value:function t(e,n){!e&&(e=new f["default"](0,0));var i=this.getConcatenatedMatrix(n);if(i==null)return(0,f["default"])(0,0);var r=new u["default"](1,0,0,1,e.x,e.y);r.concat(i);return new f["default"](r.tx,r.ty)}},{key:"globalToLocal",value:function t(e,n){!e&&(e=new f["default"](0,0));if(this.type=="stage"){return e}var i=this.getConcatenatedMatrix(n);if(i==null)return new f["default"](0,0);i.invert();var r=new u["default"](1,0,0,1,e.x,e.y);r.concat(i);return new f["default"](r.tx,r.ty)}},{key:"localToTarget",value:function t(e,n){var i=localToGlobal(e);return n.globalToLocal(i)}},{key:"getConcatenatedMatrix",value:function t(e){var n=new u["default"];for(var i=this;i!=null;i=i.parent){n.concat(i._transform);if(!i.parent||e&&i.parent&&i.parent==e||i.parent&&i.parent.type=="stage"){return n}}return n}},{key:"setEventEnable",value:function t(e){if(c._.isBoolean(e)){this._eventEnabled=e;return true}return false}},{key:"getIndex",value:function t(){if(!this.parent){return}return c._.indexOf(this.parent.children,this)}},{key:"toBack",value:function t(e){if(!this.parent){return}var n=this.getIndex();var i=0;if(c._.isNumber(e)){if(e==0){return}i=n-e}var r=this.parent.children.splice(n,1)[0];if(i<0){i=0}this.parent.addChildAt(r,i)}},{key:"toFront",value:function t(e){if(!this.parent){return}var n=this.getIndex();var i=this.parent.children.length;var r=i;if(c._.isNumber(e)){if(e==0){return}r=n+e+1}var a=this.parent.children.splice(n,1)[0];if(r>i){r=i}this.parent.addChildAt(a,r-1)}},{key:"_updateTransform",value:function t(){var e=new u["default"];e.identity();var n=this.context;if(n.scaleX!==1||n.scaleY!==1){var i=new f["default"](n.scaleOrigin);e.translate(-i.x,-i.y);e.scale(n.scaleX,n.scaleY);e.translate(i.x,i.y)}var r=n.rotation;if(r){var i=new f["default"](n.rotateOrigin);e.translate(-i.x,-i.y);e.rotate(r%360*Math.PI/180);e.translate(i.x,i.y)}var a,o;if(this.xyToInt&&!this.moveing){var a=parseInt(n.x);var o=parseInt(n.y);if(parseInt(n.lineWidth,10)%2==1&&n.strokeStyle){a+=.5;o+=.5}}else{a=n.x;o=n.y}if(a!=0||o!=0){e.translate(a,o)}this._transform=e;return e}},{key:"setWorldTransform",value:function t(){var e=new u["default"];e.concat(this._transform);this.parent&&e.concat(this.parent.worldTransform);this.worldTransform=e;return this.worldTransform}},{key:"getChildInPoint",value:function t(e){var n=false;var i=e.x;var r=e.y;if(this.worldTransform){var a=this.worldTransform.clone().invert();var o=[i*v["default"].RESOLUTION,r*v["default"].RESOLUTION];o=a.mulVector(o);i=o[0];r=o[1]}if(this.graphics){n=this.containsPoint({x:i,y:r})}if(this.type=="text"){var l=this.getRect();if(!l.width||!l.height){return false}if(i>=l.x&&i<=l.x+l.width&&(l.height>=0&&r>=l.y&&r<=l.y+l.height||l.height<0&&r<=l.y&&r>=l.y+l.height)){n=true}else{n=false}return n}return n}},{key:"containsPoint",value:function t(e){var n=false;for(var i=0;i<this.graphics.graphicsData.length;++i){var r=this.graphics.graphicsData[i];if(r.shape){if(r.hasFill()&&r.shape.contains(e.x,e.y)){n=true;if(n){break}}if(r.hasLine()&&r.shape.points){n=(0,y["default"])(r,e.x,e.y);if(n){break}}}}return n}},{key:"animate",value:function t(e,n,i){if(!i){i=this.context}if(!i){return}var r=e;var a=null;for(var o in r){if(c._.isObject(r[o])){this.animate(r[o],c._.extend({},n),i[o]);continue}if(isNaN(r[o])&&r[o]!==""&&r[o]!==null){i[o]=r[o];delete r[o];continue}if(!a){a={}}a[o]=i[o]}if(!a){return}!n&&(n={});n.from=a;n.to=r;var l=this;var s=function t(){};if(n.onUpdate){s=n.onUpdate}var u;n.onUpdate=function(t){if(!i&&u){h["default"].destroyTween(u);u=null;return}for(var e in t){i[e]=t[e]}s.apply(l,[t])};var f=function t(){};if(n.onComplete){f=n.onComplete}n.onComplete=function(t){f.apply(l,arguments);l._removeTween(u)};n.onStop=function(){l._removeTween(u)};n.desc="tweenType:DisplayObject.animate__id:"+this.id+"__objectType:"+this.type;u=h["default"].registTween(n);this._tweens.push(u);return u}},{key:"_removeTween",value:function t(e){for(var n=0;n<this._tweens.length;n++){if(e==this._tweens[n]){this._tweens.splice(n,1);break}}}},{key:"removeAnimate",value:function t(e){e.stop();this._removeTween(e)}},{key:"cleanAnimates",value:function t(){this._cleanAnimates()}},{key:"_cleanAnimates",value:function t(){while(this._tweens.length){this._tweens.shift().stop()}}},{key:"remove",value:function t(){if(this.parent){this.parent.removeChild(this);this.parent=null}}},{key:"destroy",value:function t(){this._destroy()}},{key:"_destroy",value:function t(){this.remove();this.fire("destroy");this.context=null;delete this.context}}]);return i}(c.event.Dispatcher);t.default=A}(e,r,o,l,a,u,f,c,d,h)});n(p);var y=i(function(t,e){!function(t,r,e){var n;function i(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function s(t,e,n){if(e)l(t.prototype,e);if(n)l(t,n);return t}function u(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return f(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var p=function(t){d(l,t);function l(t){var e;o(this,l);e=u(this,c(l).call(this,t));e.children=[];e.mouseChildren=[];e._eventEnabled=true;return e}s(l,[{key:"addChild",value:function t(e,n){if(!e){return}if(this.getChildIndex(e)!=-1){e.parent=this;return e}if(e.parent){e.parent.removeChild(e)}if(n===undefined){n=this.children.length}this.children.splice(n,0,e);e.parent=this;if(this.heartBeat){this.heartBeat({convertType:"children",target:e,src:this})}if(this._afterAddChild){this._afterAddChild(e)}return e}},{key:"addChildAt",value:function t(e,n){return this.addChild(e,n)}},{key:"removeChild",value:function t(e){return this.removeChildAt(r._.indexOf(this.children,e))}},{key:"removeChildAt",value:function t(e){if(e<0||e>this.children.length-1){return false}var n=this.children[e];if(n!=null){n.parent=null}this.children.splice(e,1);if(this.heartBeat){this.heartBeat({convertType:"children",target:n,src:this})}if(this._afterDelChild){this._afterDelChild(n,e)}return n}},{key:"removeChildById",value:function t(e){for(var n=0,i=this.children.length;n<i;n++){if(this.children[n].id==e){return this.removeChildAt(n)}}return false}},{key:"removeAllChildren",value:function t(){while(this.children.length>0){this.removeChildAt(0)}}},{key:"destroy",value:function t(){for(var e=0,n=this.children.length;e<n;e++){this.getChildAt(e).destroy();e--;n--}this._destroy()}},{key:"cleanAnimates",value:function t(){for(var e=0,n=this.children.length;e<n;e++){this.getChildAt(e).cleanAnimates()}this._cleanAnimates()}},{key:"getChildById",value:function t(e,n){if(!n){for(var i=0,r=this.children.length;i<r;i++){if(this.children[i].id==e){return this.children[i]}}}else{return null}return null}},{key:"getChildAt",value:function t(e){if(e<0||e>this.children.length-1)return null;return this.children[e]}},{key:"getChildIndex",value:function t(e){return r._.indexOf(this.children,e)}},{key:"setChildIndex",value:function t(e,n){if(e.parent!=this)return;var i=r._.indexOf(this.children,e);if(n==i)return;this.children.splice(i,1);this.children.splice(n,0,e)}},{key:"getNumChildren",value:function t(){return this.children.length}},{key:"getObjectsUnderPoint",value:function t(e,n){var i=[];for(var r=this.children.length-1;r>=0;r--){var a=this.children[r];if(a==null||!a.context.$model.visible){continue}if(a instanceof l){if(!a._eventEnabled){continue}if(a.mouseChildren&&a.getNumChildren()>0){var o=a.getObjectsUnderPoint(e);if(o.length>0){i=i.concat(o)}}}else{if(!a._eventEnabled&&!a.dragEnabled){continue}if(a.getChildInPoint(e)){i.push(a);if(n!=undefined&&!isNaN(n)){if(i.length==n){return i}}}}}return i}}]);return l}(i(e)["default"]);t.default=p}(e,r,p)});n(y);var v=i(function(t,e){!function(t,e,n){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=r(e),o=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function u(t,e,n){if(e)s(t.prototype,e);if(n)s(t,n);return t}function f(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return c(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return d(t)}function h(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)p(t,e)}function p(t,e){p=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return p(t,e)}var y=function(t){h(n,t);function n(t){var e;l(this,n);t.type="stage";e=f(this,d(n).call(this,t));e.canvas=null;e.ctx=null;e.stageRending=false;e._isReady=false;return e}u(n,[{key:"initStage",value:function t(e,n,i){var r=this;r.canvas=e;var a=r.context;a.width=n;a.height=i;a.scaleX=o["default"]._devicePixelRatio;a.scaleY=o["default"]._devicePixelRatio;r._isReady=true}},{key:"heartBeat",value:function t(e){if(!this._isReady){return}e||(e={});e.stage=this;this.parent&&this.parent.heartBeat(e)}}]);return n}(i["default"]);t.default=y}(e,y,a)});n(v);var g=i(function(t,e){!function(t,a,e,n,i,u){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var o=r(e),l=r(n),s=r(i);function r(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}var h=function(){function r(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:a.RENDERER_TYPE.UNKNOWN;var e=arguments.length>1?arguments[1]:undefined;var n=arguments.length>2?arguments[2]:undefined;f(this,r);this.type=t;this.app=e;if(n){for(var i in o["default"].RENDER_OPTIONS){if(typeof n[i]==="undefined"){n[i]=o["default"].RENDER_OPTIONS[i]}}}else{n=o["default"].RENDER_OPTIONS}this.options=n;this.requestAid=null;this._heartBeat=false;this._preRenderTime=0}d(r,[{key:"startEnter",value:function t(){var e=this;if(!e.requestAid){e.requestAid=l["default"].registFrame({id:"enterFrame",task:function t(){e.enterFrame.apply(e)}})}}},{key:"enterFrame",value:function t(){var e=this;e.requestAid=null;s["default"].now=(new Date).getTime();if(e._heartBeat){this.app.children.length&&e.render(this.app);e._heartBeat=false;e._preRenderTime=(new Date).getTime()}}},{key:"_convertCanvax",value:function t(e){var n=this;u._.each(n.app.children,function(t){t.context[e.name]=e.value})}},{key:"heartBeat",value:function t(e){var n=this;if(e){if(e.convertType=="context"){var i=e.stage;var r=e.shape;var a=e.name;var o=e.value;var l=e.preValue;if(r.type=="canvax"){n._convertCanvax(e)}else{if(!n.app.convertStages[i.id]){n.app.convertStages[i.id]={stage:i,convertShapes:{}}}if(r){if(!n.app.convertStages[i.id].convertShapes[r.id]){n.app.convertStages[i.id].convertShapes[r.id]={shape:r,convertType:e.convertType}}else{return}}}}if(e.convertType=="children"){var s=e.target;var i=e.src.getStage();if(i||s.type=="stage"){i=i||s;if(!n.app.convertStages[i.id]){n.app.convertStages[i.id]={stage:i,convertShapes:{}}}}}if(!e.convertType){var i=e.stage;if(!n.app.convertStages[i.id]){n.app.convertStages[i.id]={stage:i,convertShapes:{}}}}}else{u._.each(n.app.children,function(t,e){n.app.convertStages[t.id]={stage:t,convertShapes:{}}})}if(!n._heartBeat){n._heartBeat=true;n.startEnter()}else{n._heartBeat=true}}}]);return r}();t.default=h}(e,c,h,u,a,r)});n(g);var _=i(function(t,e){!function(t,P){function n(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function r(t,e,n){if(e)i(t.prototype,e);if(n)i(t,n);return t}Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var e=function(){function e(t){n(this,e);this.renderer=t}r(e,[{key:"render",value:function t(e,n,i,r){var a=this.renderer;var o=e.graphics.graphicsData;var l=n.ctx;for(var s=0;s<o.length;s++){var u=o[s];var f=u.shape;var c=u.fillStyle;var d=u.strokeStyle;var h=u.hasFill()&&u.fillAlpha&&!r;var p=u.hasLine()&&u.strokeAlpha&&!r;l.lineWidth=u.lineWidth;if(u.type===P.SHAPES.POLY){l.beginPath();this.renderPolygon(f.points,f.closed,l,r);if(h){l.globalAlpha=u.fillAlpha*i;l.fillStyle=c;l.fill()}if(p){l.globalAlpha=u.strokeAlpha*i;l.strokeStyle=d;l.stroke()}}else if(u.type===P.SHAPES.RECT){if(r){l.rect(f.x,f.y,f.width,f.height)}if(h){l.globalAlpha=u.fillAlpha*i;l.fillStyle=c;l.fillRect(f.x,f.y,f.width,f.height)}if(p){l.globalAlpha=u.strokeAlpha*i;l.strokeStyle=d;l.strokeRect(f.x,f.y,f.width,f.height)}}else if(u.type===P.SHAPES.CIRC){l.beginPath();l.arc(f.x,f.y,f.radius,0,2*Math.PI);l.closePath();if(h){l.globalAlpha=u.fillAlpha*i;l.fillStyle=c;l.fill()}if(p){l.globalAlpha=u.strokeAlpha*i;l.strokeStyle=d;l.stroke()}}else if(u.type===P.SHAPES.ELIP){var y=f.width*2;var v=f.height*2;var g=f.x-y/2;var _=f.y-v/2;l.beginPath();var b=.5522848;var x=y/2*b;var m=v/2*b;var w=g+y;var S=_+v;var k=g+y/2;var O=_+v/2;l.moveTo(g,O);l.bezierCurveTo(g,O-m,k-x,_,k,_);l.bezierCurveTo(k+x,_,w,O-m,w,O);l.bezierCurveTo(w,O+m,k+x,S,k,S);l.bezierCurveTo(k-x,S,g,O+m,g,O);l.closePath();if(h){l.globalAlpha=u.fillAlpha*i;l.fillStyle=c;l.fill()}if(p){l.globalAlpha=u.strokeAlpha*i;l.strokeStyle=d;l.stroke()}}}}},{key:"renderPolygon",value:function t(e,n,i,r){i.moveTo(e[0],e[1]);for(var a=1;a<e.length/2;++a){i.lineTo(e[a*2],e[a*2+1])}if(n||r){i.closePath()}}}]);return e}();t.default=e}(e,c)});n(_);var b=i(function(t,e){!function(t,e,r,n,a){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=l(e),o=l(n);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function t(e){return typeof e}}else{s=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return s(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function d(t,e){if(e&&(s(e)==="object"||typeof e==="function")){return e}return p(t)}function h(t){h=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return h(t)}function p(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function y(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)v(t,e)}function v(t,e){v=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return v(t,e)}var g=function(t){y(i,t);function i(t){var e;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};u(this,i);e=d(this,h(i).call(this,r.RENDERER_TYPE.CANVAS,t,n));e.CGR=new o["default"](p(e));return e}c(i,[{key:"render",value:function t(e){var n=this;n.app=e;a._.each(a._.values(e.convertStages),function(t){n.renderStage(t.stage)});e.convertStages={}}},{key:"renderStage",value:function t(e){if(!e.ctx){e.ctx=e.canvas.getContext("2d")}e.stageRending=true;e.setWorldTransform();this._clear(e);this._render(e,e,e.context.globalAlpha);e.stageRending=false}},{key:"_render",value:function t(e,n,i){var r=e.ctx;if(!r){return}var a=n.context.$model;if(!n.worldTransform){n.fire("render")}if(!n.worldTransform||n._transformChange||n.parent&&n.parent._transformChange){n.setWorldTransform();n.fire("transform");n._transformChange=true}i*=a.globalAlpha;if(!a.visible||n.isClip){return}var o=n.worldTransform.toArray();if(o){r.setTransform.apply(r,o)}else{return}var l=false;if(n.clip&&n.clip.graphics){var s=n.clip;r.save();l=true;if(!s.worldTransform||s._transformChange||s.parent._transformChange){s.setWorldTransform();s._transformChange=true}r.setTransform.apply(r,s.worldTransform.toArray());if(!s.graphics.graphicsData.length){s._draw(s.graphics)}this.CGR.render(s,e,i,l);s._transformChange=false;r.clip()}if(n.graphics){if(!n.graphics.graphicsData.length){n._draw(n.graphics)}if(!!i){r.setLineDash([]);if(a.lineType&&a.lineType!="solid"){r.setLineDash(a.lineDash)}this.CGR.render(n,e,i)}}if(n.type=="text"){n.render(r,i)}if(n.children){for(var u=0,f=n.children.length;u<f;u++){this._render(e,n.children[u],i)}}n._transformChange=false;if(l){r.restore()}}},{key:"_clear",value:function t(e){var n=e.ctx;n.setTransform.apply(n,e.worldTransform.toArray());n.clearRect(0,0,this.app.width,this.app.height)}}]);return i}(i["default"]);t.default=g}(e,g,c,_,r)});n(b);var x=i(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true}),t.default=r;var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return new n["default"](t,e)}}(e,b)});n(x);var m=i(function(t,e){!function(t,e,n,i,r,a,o){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var l=d(e),s=d(n),u=d(i),f=d(r),c=d(a);function d(t){return t&&t.__esModule?t:{default:t}}function h(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){h=function t(e){return typeof e}}else{h=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return h(t)}function p(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function v(t,e,n){if(e)y(t.prototype,e);if(n)y(t,n);return t}function g(t,e){if(e&&(h(e)==="object"||typeof e==="function")){return e}return b(t)}function _(t){_=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return _(t)}function b(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function x(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)m(t,e)}function m(t,e){m=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return m(t,e)}var w=function(t){x(r,t);function r(t){var e;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};p(this,r);t.type="canvax";e=g(this,_(r).call(this,t));e._cid=(new Date).getTime()+"_"+Math.floor(Math.random()*100);e.el=o.$.query(t.el);e.width=parseInt("width"in t||e.el.offsetWidth,10);e.height=parseInt("height"in t||e.el.offsetHeight,10);var i=o.$.createView(e.width,e.height,e._cid);e.view=i.view;e.stageView=i.stageView;e.domView=i.domView;e.el.innerHTML="";e.el.appendChild(e.view);e.viewOffset=o.$.offset(e.view);e.lastGetRO=0;e.webGL=t.webGL;e.renderer=(0,f["default"])(b(e),n);e.event=null;e.convertStages={};e.context.$model.width=e.width;e.context.$model.height=e.height;e._bufferStage=null;e._creatHoverStage();e.worldTransform=(new c["default"]).identity();return e}v(r,[{key:"registEvent",value:function t(e){this.event=new o.event.Handler(this,e);this.event.init();return this.event}},{key:"destroy",value:function t(){for(var e=0,n=this.children.length;e<n;e++){var i=this.children[e];i.destroy();i.canvas=null;i.ctx=null;i=null;e--,n--}try{this.view.removeChild(this.stageView);this.view.removeChild(this.domView);this.el.removeChild(this.view)}catch(t){}this.el.innerHTML="";this.event=null;this._bufferStage=null}},{key:"resize",value:function t(e){this.width=parseInt(e&&"width"in e||this.el.offsetWidth,10);this.height=parseInt(e&&"height"in e||this.el.offsetHeight,10);this.viewOffset=o.$.offset(this.view);this.context.$model.width=this.width;this.context.$model.height=this.height;var n=this;var i=function t(e){e.style.width=n.width+"px";e.style.height=n.height+"px";e.setAttribute("width",n.width*l["default"]._devicePixelRatio);e.setAttribute("height",n.height*l["default"]._devicePixelRatio)};o._.each(this.children,function(t,e){t.context.$model.width=n.width;t.context.$model.height=n.height;i(t.canvas)});this.stageView.style.width=this.width+"px";this.stageView.style.height=this.height+"px";this.domView.style.width=this.width+"px";this.domView.style.height=this.height+"px";this.heartBeat()}},{key:"getHoverStage",value:function t(){return this._bufferStage}},{key:"_creatHoverStage",value:function t(){this._bufferStage=new u["default"]({id:"activCanvas"+(new Date).getTime(),context:{width:this.context.$model.width,height:this.context.$model.height}});this._bufferStage._eventEnabled=false;this.addChild(this._bufferStage)}},{key:"updateViewOffset",value:function t(){var e=(new Date).getTime();if(e-this.lastGetRO>1e3){this.viewOffset=o.$.offset(this.view);this.lastGetRO=e}}},{key:"_afterAddChild",value:function t(e,n){var i;if(!e.canvas){i=o.$.createCanvas(this.context.$model.width,this.context.$model.height,e.id)}else{i=e.canvas}if(this.children.length==1){this.stageView.appendChild(i)}else if(this.children.length>1){if(n===undefined){this.stageView.insertBefore(i,this._bufferStage.canvas)}else{if(n>=this.children.length-1){this.stageView.appendChild(i)}else{this.stageView.insertBefore(i,this.children[n].canvas)}}}l["default"].initElement(i);e.initStage(i,this.context.$model.width,this.context.$model.height)}},{key:"_afterDelChild",value:function t(e){try{this.stageView.removeChild(e.canvas)}catch(t){}}},{key:"heartBeat",value:function t(e){if(this.children.length>0){this.renderer.heartBeat(e)}}},{key:"toDataURL",value:function t(){var e=o.$.createCanvas(this.width,this.height,"curr_base64_canvas");var n=e.getContext("2d");o._.each(this.children,function(t){n.drawImage(t.canvas,0,0)});return e.toDataURL()}}]);return r}(s["default"]);t.default=w}(e,a,y,v,x,o,r)});n(m);var w=i(function(t,e){!function(t,e,n){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return u(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)d(t,e)}function d(t,e){d=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return d(t,e)}var h=function(t){c(e,t);function e(t){l(this,e);t=r["default"].checkOpt(t);t.type="sprite";return s(this,f(e).call(this,t))}return e}(i["default"]);t.default=h}(e,y,a)});n(w);var S=i(function(t,e){!function(t){function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function e(t,e,n){if(e)i(t.prototype,e);if(n)i(t,n);return t}Object.defineProperty(t,"__esModule",{value:true});var n=function(){function o(t,e,n,i,r,a){l(this,o);this.lineWidth=t;this.strokeStyle=e;this.strokeAlpha=n;this.fillStyle=i;this.fillAlpha=r;this.shape=a;this.type=a.type;this.holes=[];this.fill=true;this.line=true}e(o,[{key:"clone",value:function t(){var e=new o(this.lineWidth,this.strokeStyle,this.strokeAlpha,this.fillStyle,this.fillAlpha,this.shape);e.fill=this.fill;e.line=this.line;return e}},{key:"addHole",value:function t(e){this.holes.push(e)}},{key:"synsStyle",value:function t(e){if(this.line){this.lineWidth=e.lineWidth;this.strokeStyle=e.strokeStyle;this.strokeAlpha=e.strokeAlpha}if(this.fill){this.fillStyle=e.fillStyle;this.fillAlpha=e.fillAlpha}}},{key:"hasFill",value:function t(){return this.fillStyle&&this.fill&&this.shape.closed!==undefined&&this.shape.closed}},{key:"hasLine",value:function t(){return this.strokeStyle&&this.lineWidth&&this.line}},{key:"destroy",value:function t(){this.shape=null;this.holes=null}}]);return o}();t.default=n}(e)});n(S);var k=i(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true});var L={},w={},j={},R=Array.prototype.join;function g(t,e,n,i,r,a,o){var l=R.call(arguments);if(L[l]){return L[l]}var s=Math.PI,u=o*s/180,f=Math.sin(u),c=Math.cos(u),d=0,h=0;n=Math.abs(n);i=Math.abs(i);var p=-c*t*.5-f*e*.5,y=-c*e*.5+f*t*.5,v=n*n,g=i*i,_=y*y,b=p*p,x=v*g-v*_-g*b,m=0;if(x<0){var w=Math.sqrt(1-x/(v*g));n*=w;i*=w}else{m=(r===a?-1:1)*Math.sqrt(x/(v*_+g*b))}var S=m*n*y/i,k=-m*i*p/n,O=c*S-f*k+t*.5,P=f*S+c*k+e*.5,A=N(1,0,(p-S)/n,(y-k)/i),C=N((p-S)/n,(y-k)/i,(-p-S)/n,(-y-k)/i);if(a===0&&C>0){C-=2*s}else if(a===1&&C<0){C+=2*s}var M=Math.ceil(Math.abs(C/s*2)),j=[],T=C/M,E=8/3*Math.sin(T/4)*Math.sin(T/4)/Math.sin(T/2),I=A+T;for(var D=0;D<M;D++){j[D]=F(A,I,c,f,n,i,O,P,E,d,h);d=j[D][4];h=j[D][5];A=I;I+=T}L[l]=j;return j}function F(t,e,n,i,r,a,o,l,s,u,f){var c=R.call(arguments);if(w[c]){return w[c]}var d=Math.cos(t),h=Math.sin(t),p=Math.cos(e),y=Math.sin(e),v=n*r*p-i*a*y+o,g=i*r*p+n*a*y+l,_=u+s*(-n*r*h-i*a*d),b=f+s*(-i*r*h+n*a*d),x=v+s*(n*r*y+i*a*p),m=g+s*(i*r*y-n*a*p);w[c]=[_,b,x,m,v,g];return w[c]}function N(t,e,n,i){var r=Math.atan2(e,t),a=Math.atan2(i,n);if(a>=r){return a-r}else{return 2*Math.PI-(r-a)}}var e=function t(e,n,i,r){var a=r[0],o=r[1],l=r[2],s=r[3],u=r[4],f=r[5],c=r[6],d=[[],[],[],[]],h=g(f-n,c-i,a,o,s,u,l);for(var p=0,y=h.length;p<y;p++){d[p][0]=h[p][0]+n;d[p][1]=h[p][1]+i;d[p][2]=h[p][2]+n;d[p][3]=h[p][3]+i;d[p][4]=h[p][4]+n;d[p][5]=h[p][5]+i;e.bezierCurveTo.apply(e,d[p])}},n=function t(e,n,i,r,a,o,l,s,u){var f=0,c=0,d,h=[],p=g(s-e,u-n,i,r,o,l,a);for(var y=0,v=p.length;y<v;y++){d=_(f,c,p[y][0],p[y][1],p[y][2],p[y][3],p[y][4],p[y][5]);h.push({x:d[0].x+e,y:d[0].y+n});h.push({x:d[1].x+e,y:d[1].y+n});f=p[y][4];c=p[y][5]}return h};function _(t,e,n,i,r,a,o,l){var s=R.call(arguments);if(j[s]){return j[s]}var u=Math.sqrt,f=Math.min,c=Math.max,d=Math.abs,h=[],p=[[],[]],y,v,g,_,b,x,m,w;v=6*t-12*n+6*r;y=-3*t+9*n-9*r+3*o;g=3*n-3*t;for(var S=0;S<2;++S){if(S>0){v=6*e-12*i+6*a;y=-3*e+9*i-9*a+3*l;g=3*i-3*e}if(d(y)<1e-12){if(d(v)<1e-12){continue}_=-g/v;if(0<_&&_<1){h.push(_)}continue}m=v*v-4*g*y;if(m<0){continue}w=u(m);b=(-v+w)/(2*y);if(0<b&&b<1){h.push(b)}x=(-v-w)/(2*y);if(0<x&&x<1){h.push(x)}}var k,O,P=h.length,A=P,C;while(P--){_=h[P];C=1-_;k=C*C*C*t+3*C*C*_*n+3*C*_*_*r+_*_*_*o;p[0][P]=k;O=C*C*C*e+3*C*C*_*i+3*C*_*_*a+_*_*_*l;p[1][P]=O}p[0][A]=t;p[1][A]=e;p[0][A+1]=o;p[1][A+1]=l;var M=[{x:f.apply(null,p[0]),y:f.apply(null,p[1])},{x:c.apply(null,p[0]),y:c.apply(null,p[1])}];j[s]=M;return M}t["default"]={drawArc:e,getBoundsOfCurve:_,getBoundsOfArc:n}}(e)});n(k);var O=i(function(t,e){!function(t,a){function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function e(t,e,n){if(e)i(t.prototype,e);if(n)i(t,n);return t}Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var n=function(){function r(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;o(this,r);this.x=t;this.y=e;this.width=n;this.height=i;this.type=a.SHAPES.RECT;this.closed=true}e(r,[{key:"clone",value:function t(){return new r(this.x,this.y,this.width,this.height)}},{key:"copy",value:function t(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height;return this}},{key:"contains",value:function t(e,n){if(this.height*n<0||this.width*e<0){return false}if(e>=this.x&&e<=this.x+this.width&&(this.height>=0&&n>=this.y&&n<=this.y+this.height||this.height<0&&n<=this.y&&n>=this.y+this.height)){return true}return false}}]);return r}();t.default=n}(e,c)});n(O);var P=i(function(t,e){!function(t,e,r){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function l(t,e,n){if(e)o(t.prototype,e);if(n)o(t,n);return t}var s=function(){function i(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;a(this,i);this.x=t;this.y=e;this.radius=n;this.type=r.SHAPES.CIRC;this.closed=true}l(i,[{key:"clone",value:function t(){return new i(this.x,this.y,this.radius)}},{key:"contains",value:function t(e,n){if(this.radius<=0){return false}var i=this.radius*this.radius;var r=this.x-e;var a=this.y-n;r*=r;a*=a;return r+a<=i}},{key:"getBounds",value:function t(){return new n["default"](this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}]);return i}();t.default=s}(e,O,c)});n(P);var A=i(function(t,e){!function(t,e,a){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function l(t,e,n){if(e)r(t.prototype,e);if(n)r(t,n);return t}var s=function(){function r(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;o(this,r);this.x=t;this.y=e;this.width=n;this.height=i;this.type=a.SHAPES.ELIP;this.closed=true}l(r,[{key:"clone",value:function t(){return new r(this.x,this.y,this.width,this.height)}},{key:"contains",value:function t(e,n){if(this.width<=0||this.height<=0){return false}var i=(e-this.x)/this.width;var r=(n-this.y)/this.height;i*=i;r*=r;return i+r<=1}},{key:"getBounds",value:function t(){return new n["default"](this.x-this.width,this.y-this.height,this.width,this.height)}}]);return r}();t.default=s}(e,O,c)});n(A);var C=i(function(t,e){!function(t,s){function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function e(t,e,n){if(e)i(t.prototype,e);if(n)i(t,n);return t}Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var n=function(){function l(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++){e[n]=arguments[n]}u(this,l);var i=e[0];if(Array.isArray(i)){e=i}if(i&&"x"in i&&"y"in i){var r=[];for(var a=0,o=e.length;a<o;a++){r.push(e[a].x,e[a].y)}e=r}this.closed=true;this.points=e;this.type=s.SHAPES.POLY}e(l,[{key:"clone",value:function t(){return new l(this.points.slice())}},{key:"close",value:function t(){var e=this.points;if(e[0]!==e[e.length-2]||e[1]!==e[e.length-1]){e.push(e[0],e[1])}this.closed=true}},{key:"contains",value:function t(e,n){return this._isInsidePolygon_WindingNumber(e,n)}},{key:"_isInsidePolygon_WindingNumber",value:function t(e,n){var i=this.points;var r=0;for(var a,o=i[1]>n,l=3;l<i.length;l+=2){a=o;o=i[l]>n;if(a!=o){var s=(a?1:0)-(o?1:0);if(s*((i[l-3]-e)*(i[l-0]-n)-(i[l-2]-n)*(i[l-1]-e))>0){r+=s}}}return r}}]);return l}();t.default=n}(e,c)});n(C);var M=i(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}var i,r,a,o,l,s;i=e,r=k,a=P,o=A,l=C,s=O,Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"Arc",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(i,"Circle",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(i,"Ellipse",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(i,"Polygon",{enumerable:!0,get:function(){return n(l).default}}),Object.defineProperty(i,"Rectangle",{enumerable:!0,get:function(){return n(s).default}})});n(M);var j=i(function(t,e){var n;n=e,Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n,i,r,a,o,l){var s=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],u=0,f=0,c=0,d=0,h=0;s.push(t,e);for(var p=1,y=0;p<=20;++p)c=(f=(u=1-(y=p/20))*u)*u,h=(d=y*y)*y,s.push(c*t+3*f*y*n+3*u*d*r+h*o,c*e+3*f*y*i+3*u*d*a+h*l);return s}});n(j);var T=i(function(t,e){!function(t,e,o,k,n,r){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=a(e),f=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function u(t,e,n){if(e)s(t.prototype,e);if(n)s(t,n);return t}var c=function(){function n(t){l(this,n);this.lineWidth=1;this.strokeStyle=null;this.strokeAlpha=1;this.fillStyle=null;this.fillAlpha=1;this.graphicsData=[];this.currentPath=null;this.dirty=0;this.clearDirty=0;this._webGL={};this.worldAlpha=1;this.tint=16777215;this.Bound={x:0,y:0,width:0,height:0}}u(n,[{key:"setStyle",value:function t(e){var n=e.$model;this.lineWidth=n.lineWidth;this.strokeStyle=n.strokeStyle;this.strokeAlpha=n.strokeAlpha*n.globalAlpha;this.fillStyle=n.fillStyle;this.fillAlpha=n.fillAlpha*n.globalAlpha;var i=this;if(this.graphicsData.length){r._.each(this.graphicsData,function(t,e){t.synsStyle(i)})}}},{key:"clone",value:function t(){var t=new n;t.dirty=0;for(var e=0;e<this.graphicsData.length;++e){t.graphicsData.push(this.graphicsData[e].clone())}t.currentPath=t.graphicsData[t.graphicsData.length-1];return t}},{key:"moveTo",value:function t(e,n){var i=new o.Polygon([e,n]);i.closed=false;this.drawShape(i);return this}},{key:"lineTo",value:function t(e,n){if(this.currentPath){this.currentPath.shape.points.push(e,n);this.dirty++}else{this.moveTo(0,0)}return this}},{key:"quadraticCurveTo",value:function t(e,n,i,r){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var a=20;var o=this.currentPath.shape.points;var l=0;var s=0;if(o.length===0){this.moveTo(0,0)}var u=o[o.length-2];var f=o[o.length-1];for(var c=1;c<=a;++c){var d=c/a;l=u+(e-u)*d;s=f+(n-f)*d;o.push(l+(e+(i-e)*d-l)*d,s+(n+(r-n)*d-s)*d)}this.dirty++;return this}},{key:"bezierCurveTo",value:function t(e,n,i,r,a,o){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var l=this.currentPath.shape.points;var s=l[l.length-2];var u=l[l.length-1];l.length-=2;(0,f["default"])(s,u,e,n,i,r,a,o,l);this.dirty++;return this}},{key:"arcTo",value:function t(e,n,i,r,a){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(e,n)}}else{this.moveTo(e,n)}var o=this.currentPath.shape.points;var l=o[o.length-2];var s=o[o.length-1];var u=s-n;var f=l-e;var c=r-n;var d=i-e;var h=Math.abs(u*d-f*c);if(h<1e-8||a===0){if(o[o.length-2]!==e||o[o.length-1]!==n){o.push(e,n)}}else{var p=u*u+f*f;var y=c*c+d*d;var v=u*c+f*d;var g=a*Math.sqrt(p)/h;var _=a*Math.sqrt(y)/h;var b=g*v/p;var x=_*v/y;var m=g*d+_*f;var w=g*c+_*u;var S=f*(_+b);var k=u*(_+b);var O=d*(g+x);var P=c*(g+x);var A=Math.atan2(k-w,S-m);var C=Math.atan2(P-w,O-m);this.arc(m+e,w+n,a,A,C,f*c>d*u)}this.dirty++;return this}},{key:"arc",value:function t(e,n,i,r,a){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(r===a){return this}if(!o&&a<=r){a+=Math.PI*2}else if(o&&r<=a){r+=Math.PI*2}var l=a-r;var s=Math.ceil(Math.abs(l)/(Math.PI*2))*48;if(l===0){return this}var u=e+Math.cos(r)*i;var f=n+Math.sin(r)*i;var c=this.currentPath?this.currentPath.shape.points:null;if(c){if(c[c.length-2]!==u||c[c.length-1]!==f){c.push(u,f)}}else{this.moveTo(u,f);c=this.currentPath.shape.points}var d=l/(s*2);var h=d*2;var p=Math.cos(d);var y=Math.sin(d);var v=s-1;var g=v%1/v;for(var _=0;_<=v;++_){var b=_+g*_;var x=d+r+h*b;var m=Math.cos(x);var w=-Math.sin(x);c.push((p*m+y*w)*i+e,(p*-w+y*m)*i+n)}this.dirty++;return this}},{key:"drawRect",value:function t(e,n,i,r){this.drawShape(new o.Rectangle(e,n,i,r));return this}},{key:"drawCircle",value:function t(e,n,i){this.drawShape(new o.Circle(e,n,i));return this}},{key:"drawEllipse",value:function t(e,n,i,r){this.drawShape(new o.Ellipse(e,n,i,r));return this}},{key:"drawPolygon",value:function t(e){var n=e;var i=true;if(n instanceof o.Polygon){i=n.closed;n=n.points}if(!Array.isArray(n)){n=new Array(arguments.length);for(var r=0;r<n.length;++r){n[r]=arguments[r]}}var a=new o.Polygon(n);a.closed=i;this.drawShape(a);return this}},{key:"clear",value:function t(){if(this.graphicsData.length>0){this.dirty++;this.clearDirty++;this.graphicsData.length=0}this.currentPath=null;return this}},{key:"drawShape",value:function t(e){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.beginPath();var n=new i["default"](this.lineWidth,this.strokeStyle,this.strokeAlpha,this.fillStyle,this.fillAlpha,e);this.graphicsData.push(n);if(n.type===k.SHAPES.POLY){n.shape.closed=n.shape.closed;this.currentPath=n}this.dirty++;return n}},{key:"beginPath",value:function t(){this.currentPath=null}},{key:"closePath",value:function t(){var e=this.currentPath;if(e&&e.shape){e.shape.close()}return this}},{key:"updateLocalBounds",value:function t(){var e=Infinity;var n=-Infinity;var i=Infinity;var r=-Infinity;if(this.graphicsData.length){var a=0;var o=0;var l=0;var s=0;var u=0;for(var f=0;f<this.graphicsData.length;f++){var c=this.graphicsData[f];var d=c.type;var h=c.lineWidth;a=c.shape;if(d===k.SHAPES.RECT||d===k.SHAPES.RREC){o=a.x-h/2;l=a.y-h/2;s=a.width+h;u=a.height+h;e=o<e?o:e;n=o+s>n?o+s:n;i=l<i?l:i;r=l+u>r?l+u:r}else if(d===k.SHAPES.CIRC){o=a.x;l=a.y;s=a.radius+h/2;u=a.radius+h/2;e=o-s<e?o-s:e;n=o+s>n?o+s:n;i=l-u<i?l-u:i;r=l+u>r?l+u:r}else if(d===k.SHAPES.ELIP){o=a.x;l=a.y;s=a.width+h/2;u=a.height+h/2;e=o-s<e?o-s:e;n=o+s>n?o+s:n;i=l-u<i?l-u:i;r=l+u>r?l+u:r}else{var p=a.points;var y=0;var v=0;var g=0;var _=0;var b=0;var x=0;var m=0;var w=0;for(var S=0;S+2<p.length;S+=2){o=p[S];l=p[S+1];y=p[S+2];v=p[S+3];g=Math.abs(y-o);_=Math.abs(v-l);u=h;s=Math.sqrt(g*g+_*_);if(s<1e-9){continue}b=(u/s*_+g)/2;x=(u/s*g+_)/2;m=(y+o)/2;w=(v+l)/2;e=m-b<e?m-b:e;n=m+b>n?m+b:n;i=w-x<i?w-x:i;r=w+x>r?w+x:r}}}}else{e=0;n=0;i=0;r=0}this.Bound={x:e,y:i,width:n-e,height:r-i};return this}},{key:"getBound",value:function t(){return this.updateLocalBounds().Bound}},{key:"destroy",value:function t(e){for(var n=0;n<this.graphicsData.length;++n){this.graphicsData[n].destroy()}for(var i in this._webGL){for(var r=0;r<this._webGL[i].data.length;++r){this._webGL[i].data[r].destroy()}}this.graphicsData=null;this.currentPath=null;this._webGL=null}}]);return n}();t.default=c}(e,S,M,c,j,r)});n(T);var E=i(function(t,e){!function(t,e,n,a,o,i){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var r=u(e),l=u(n),s=u(i);function u(t){return t&&t.__esModule?t:{default:t}}function f(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){f=function t(e){return typeof e}}else{f=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return f(t)}function c(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(e&&(f(e)==="object"||typeof e==="function")){return e}return y(t)}function y(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function v(t){v=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return v(t)}function g(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)_(t,e)}function _(t,e){_=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return _(t,e)}var b=function(t){g(r,t);function r(t){var e;c(this,r);t=l["default"].checkOpt(t);var n={cursor:t.context.cursor||"default",fillAlpha:t.context.fillAlpha||1,fillStyle:t.context.fillStyle||null,lineCap:t.context.lineCap||"round",lineJoin:t.context.lineJoin||"round",miterLimit:t.context.miterLimit||null,strokeAlpha:t.context.strokeAlpha||1,strokeStyle:t.context.strokeStyle||null,lineType:t.context.lineType||"solid",lineDash:t.context.lineDash||[6,3],lineWidth:t.context.lineWidth||null};var i=a._.extend(true,n,t.context);t.context=i;if(t.id===undefined&&t.type!==undefined){t.id=l["default"].createId(t.type)}e=p(this,v(r).call(this,t));e._hoverClass=false;e.hoverClone=true;e.pointChkPriority=true;e._eventEnabled=false;e.dragEnabled=t.dragEnabled||false;e._dragDuplicate=null;e.type=e.type||"shape";e.initCompProperty(t);if(!e.isClone){e.graphics=new s["default"];e._draw(e.graphics)}else{e.graphics=null}return e}h(r,[{key:"_draw",value:function t(e){if(e.graphicsData.length==0){e.setStyle(this.context);this.draw(e)}}},{key:"draw",value:function t(){}},{key:"clearGraphicsData",value:function t(){this.graphics.clear()}},{key:"$watch",value:function t(e,n,i){if(a._.indexOf(o.STYLE_PROPS,e)>-1){this.graphics.setStyle(this.context)}this.watch(e,n,i)}},{key:"initCompProperty",value:function t(e){for(var n in e){if(n!="id"&&n!="context"){this[n]=e[n]}}}},{key:"getBound",value:function t(){return this.graphics.updateLocalBounds().Bound}}]);return r}(r["default"]);t.default=b}(e,p,a,r,c,T)});n(E);var I=i(function(t,e){!function(t,e,n,a){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=o(e),r=o(n);function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function f(t,e,n){if(e)u(t.prototype,e);if(n)u(t,n);return t}function c(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return d(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t){h=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return h(t)}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(i,t);function i(t,e){var n;s(this,i);e.type="text";if(t===null||t===undefined){t=""}e.context=a._.extend({font:"",fontSize:13,fontWeight:"normal",fontFamily:"微软雅黑,sans-serif",textBaseline:"top",textAlign:"left",textDecoration:null,fillStyle:"blank",strokeStyle:null,lineWidth:0,lineHeight:1.2,backgroundColor:null,textBackgroundColor:null},e.context);n=c(this,h(i).call(this,e));n._reNewline=/\r?\n/;n.fontProperts=["fontStyle","fontVariant","fontWeight","fontSize","fontFamily"];n.context.font=n._getFontDeclaration();n.text=t.toString();n.context.width=n.getTextWidth();n.context.height=n.getTextHeight();return n}f(i,[{key:"$watch",value:function t(e,n,i){if(a._.indexOf(this.fontProperts,e)>=0){this.context[e]=n;this.context.font=this._getFontDeclaration();this.context.width=this.getTextWidth();this.context.height=this.getTextHeight()}}},{key:"_setContextStyle",value:function t(e,n,i){for(var r in n){if(r!="textBaseline"&&r in e){if(n[r]||a._.isNumber(n[r])){if(r=="globalAlpha"){e.globalAlpha=i}else{e[r]=n[r]}}}}return}},{key:"render",value:function t(e,n){this._renderText(e,this._getTextLines(),n)}},{key:"resetText",value:function t(e){this.text=e.toString();this.heartBeat()}},{key:"getTextWidth",value:function t(){var e=0;if(r["default"]._pixelCtx){r["default"]._pixelCtx.save();r["default"]._pixelCtx.font=this.context.$model.font;e=this._getTextWidth(r["default"]._pixelCtx,this._getTextLines());r["default"]._pixelCtx.restore()}return e}},{key:"getTextHeight",value:function t(){return this._getTextHeight(r["default"]._pixelCtx,this._getTextLines())}},{key:"_getTextLines",value:function t(){return this.text.split(this._reNewline)}},{key:"_renderText",value:function t(e,n,i){if(!e)return;e.save();this._setContextStyle(e,this.context.$model,i);this._renderTextStroke(e,n);this._renderTextFill(e,n);e.restore()}},{key:"_getFontDeclaration",value:function t(){var n=this;var i=[];a._.each(this.fontProperts,function(t){var e=n.context[t];if(t=="fontSize"){e=parseFloat(e)+"px"}e&&i.push(e)});return i.join(" ")}},{key:"_renderTextFill",value:function t(e,n){if(!this.context.$model.fillStyle)return;this._boundaries=[];var i=0;for(var r=0,a=n.length;r<a;r++){var o=this._getHeightOfLine(e,r,n);i+=o;this._renderTextLine("fillText",e,n[r],0,this._getTopOffset()+i,r)}}},{key:"_renderTextStroke",value:function t(e,n){if(!e)return;if(!this.context.$model.strokeStyle||!this.context.$model.lineWidth)return;var i=0;e.save();if(this.strokeDashArray){if(1&this.strokeDashArray.length){this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray)}supportsLineDash&&e.setLineDash(this.strokeDashArray)}e.beginPath();for(var r=0,a=n.length;r<a;r++){var o=this._getHeightOfLine(e,r,n);i+=o;this._renderTextLine("strokeText",e,n[r],0,this._getTopOffset()+i,r)}e.closePath();e.restore()}},{key:"_renderTextLine",value:function t(e,n,i,r,a,o){a-=this._getHeightOfLine()/4;if(this.context.$model.textAlign!=="justify"){this._renderChars(e,n,i,r,a,o);return}var l=n.measureText(i).width;var s=this.context.$model.width;if(s>l){var u=i.split(/\s+/);var f=n.measureText(i.replace(/\s+/g,"")).width;var c=s-f;var d=u.length-1;var h=c/d;var p=0;for(var y=0,v=u.length;y<v;y++){this._renderChars(e,n,u[y],r+p,a,o);p+=n.measureText(u[y]).width+h}}else{this._renderChars(e,n,i,r,a,o)}}},{key:"_renderChars",value:function t(e,n,i,r,a){n[e](i,0,a)}},{key:"_getHeightOfLine",value:function t(){return this.context.$model.fontSize*this.context.$model.lineHeight}},{key:"_getTextWidth",value:function t(e,n){var i=e.measureText(n[0]||"|").width;for(var r=1,a=n.length;r<a;r++){var o=e.measureText(n[r]).width;if(o>i){i=o}}return i}},{key:"_getTextHeight",value:function t(e,n){return this.context.$model.fontSize*n.length*this.context.$model.lineHeight}},{key:"_getTopOffset",value:function t(){var e=0;switch(this.context.$model.textBaseline){case"top":e=0;break;case"middle":e=-this.context.$model.height/2;break;case"bottom":e=-this.context.$model.height;break}return e}},{key:"getRect",value:function t(){var e=this.context;var n=0;var i=0;if(e.textAlign=="center"){n=-e.width/2}if(e.textAlign=="right"){n=-e.width}if(e.textBaseline=="middle"){i=-e.height/2}if(e.textBaseline=="bottom"){i=-e.height}return{x:n,y:i,width:e.width,height:e.height}}}]);return i}(i["default"]);t.default=v}(e,p,a,r)});n(I);var D=i(function(t,e){function n(t,e){var n=0,i=0;if(1==arguments.length&&a._.isObject(t)){var r=t;a._.isArray(r)?(n=r[0],i=r[1]):r.hasOwnProperty("x")&&r.hasOwnProperty("y")&&(n=r.x,i=r.y)}this._axes=[n,i]}var i,a;i=e,a=r,Object.defineProperty(i,"__esModule",{value:!0}),n.prototype={distance:function(t){var e=this._axes[0]-t._axes[0],n=this._axes[1]-t._axes[1];return Math.sqrt(e*e+n*n)}},i.default=n});n(D);var L=i(function(t,e){!function(t,e,m){Object.defineProperty(t,"__esModule",{value:true}),t.default=function(t){var e=t.points;var n=t.isLoop;var i=t.smoothFilter;var r=e.length;if(r==1){return e}var a=[];var o=0;var l=new w["default"](e[0]);var s=null;for(var u=1;u<r;u++){s=new w["default"](e[u]);o+=l.distance(s);l=s}l=null;s=null;var f=o/6;f=f<r?r:f;for(var u=0;u<f;u++){var c=u/(f-1)*(n?r:r-1);var d=Math.floor(c);var h=c-d;var p;var y=e[d%r];var v;var g;if(!n){p=e[d===0?d:d-1];v=e[d>r-2?r-1:d+1];g=e[d>r-3?r-1:d+2]}else{p=e[(d-1+r)%r];v=e[(d+1)%r];g=e[(d+2)%r]}var _=h*h;var b=h*_;var x=[S(p[0],y[0],v[0],g[0],h,_,b),S(p[1],y[1],v[1],g[1],h,_,b)];m._.isFunction(i)&&i(x);a.push(x)}return a};var w=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function S(t,e,n,i,r,a,o){var l=(n-t)*.25;var s=(i-e)*.25;return(2*(e-n)+l+s)*o+(-3*(e-n)-2*l-s)*a+l*r+e}}(e,D,r)});n(L);var R=i(function(t,e){!function(t,e,o){Object.defineProperty(t,"__esModule",{value:true});var r=n(e);function n(t){return t&&t.__esModule?t:{default:t}}var i={sin:{},cos:{}},a=Math.PI/180;function l(t,e){t=(e?t*a:t).toFixed(4);if(typeof i.sin[t]=="undefined"){i.sin[t]=Math.sin(t)}return i.sin[t]}function s(t,e){t=(e?t*a:t).toFixed(4);if(typeof i.cos[t]=="undefined"){i.cos[t]=Math.cos(t)}return i.cos[t]}function u(t){return t*a}function f(t){return t/a}function c(t){var e=(360+t%360)%360;if(e==0&&t!==0){e=360}return e}function d(t,e){var n=[];var i=2*Math.PI/t;var r=-Math.PI/2;var a=r;for(var o=0,l=t;o<l;o++){n.push([e*Math.cos(a),e*Math.sin(a)]);a+=i}return n}function h(t,n){var i=[];var r=t.length;var a=[];o._.each(t,function(t,e){if(y(t)){if(a.length){i=i.concat(p(a,n));a=[]}i.push(t)}else{a.push(t)}if(e==r-1){if(a.length){i=i.concat(p(a,n));a=[]}}});return i}function p(t,e){var n={points:t};if(o._.isFunction(e)){n.smoothFilter=e}var i=(0,r["default"])(n);if(t&&t.length>0){i.push(t[t.length-1])}return i}function y(t){var e=!t||o._.isArray(t)&&t.length>=2&&(!o._.isNumber(t[0])||!o._.isNumber(t[1]))||"x"in t&&!o._.isNumber(t.x)||"y"in t&&!o._.isNumber(t.y);return e}function v(t){return!y(t)}t["default"]={PI:Math.PI,sin:l,cos:s,degreeToRadian:u,radianToDegree:f,degreeTo360:c,getIsgonPointList:d,getSmoothPointList:h,isNotValibPoint:y,isValibPoint:v}}(e,L,r)});n(R);var F=i(function(t,e){!function(t,e,n,r,i){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var a=l(e),o=l(n),s=l(i);function l(t){return t&&t.__esModule?t:{default:t}}function u(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function t(e){return typeof e}}else{u=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return u(t)}function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(e&&(u(e)==="object"||typeof e==="function")){return e}return p(t)}function p(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function y(t){y=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return y(t)}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=function(t){v(i,t);function i(t){var e;f(this,i);t=o["default"].checkOpt(t);var n=r._.extend(true,{lineType:null,smooth:false,pointList:[],smoothFilter:o["default"].__emptyFunc},t.context);if(!t.isClone&&n.smooth){n.pointList=s["default"].getSmoothPointList(n.pointList,n.smoothFilter)}t.context=n;t.type="brokenline";e=h(this,y(i).call(this,t));e._pointList=n.pointList;return e}d(i,[{key:"watch",value:function t(e,n,i){if(e=="pointList"||e=="smooth"||e=="lineType"){if(e=="pointList"&&this.context.smooth){this.context.pointList=s["default"].getSmoothPointList(n,this.context.smoothFilter);this._pointList=n}if(e=="smooth"){if(n){this.context.pointList=s["default"].getSmoothPointList(this._pointList,this.context.smoothFilter)}else{this.context.pointList=this._pointList}}this.graphics.clear()}}},{key:"draw",value:function t(e){var n=this.context;var i=n.pointList;var r=false;for(var a=0,o=i.length;a<o;a++){var l=i[a];if(s["default"].isValibPoint(l)){if(!r){e.moveTo(l[0],l[1])}else{e.lineTo(l[0],l[1])}r=true}else{r=false}}return this}}]);return i}(a["default"]);t.default=_}(e,E,a,r,R)});n(F);var N=i(function(t,e){!function(t,e,n,i){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var r=o(e),a=o(n);function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function f(t,e,n){if(e)u(t.prototype,e);if(n)u(t,n);return t}function c(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return d(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t){h=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return h(t)}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(e,t);function e(t){s(this,e);t=i._.extend(true,{type:"circle",xyToInt:false,context:{r:0}},a["default"].checkOpt(t));return c(this,h(e).call(this,t))}f(e,[{key:"watch",value:function t(e,n,i){if(e=="r"){this.graphics.clear()}}},{key:"draw",value:function t(e){var n=this.context.$model.r;if(n<0){n=0}e.drawCircle(0,0,n)}}]);return e}(r["default"]);t.default=v}(e,E,a,r)});n(N);var W=i(function(t,e){!function(t,e,n,r,i,u){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var a=s(e),o=s(n),l=s(i);function s(t){return t&&t.__esModule?t:{default:t}}function f(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){f=function t(e){return typeof e}}else{f=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return f(t)}function c(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(e&&(f(e)==="object"||typeof e==="function")){return e}return y(t)}function y(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function v(t){v=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return v(t)}function g(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)_(t,e)}function _(t,e){_=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return _(t,e)}var b=function(t){g(n,t);function n(t){c(this,n);var e=r._.extend(true,{pointList:[],path:""},t.context);t.context=e;t.__parsePathData=null;t.type="path";return p(this,v(n).call(this,t))}h(n,[{key:"watch",value:function t(e,n,i){if(e=="path"){this.graphics.clear()}}},{key:"_parsePathData",value:function t(e){if(this.__parsePathData){return this.__parsePathData}if(!e){return[]}this.__parsePathData=[];var n=r._.compact(e.replace(/[Mm]/g,"\\r$&").split("\\r"));var i=this;r._.each(n,function(t){i.__parsePathData.push(i._parseChildPathData(t))});return this.__parsePathData}},{key:"_parseChildPathData",value:function t(e){var n=e;var i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(/  /g," ");n=n.replace(/ /g,",");n=n.replace(/(\d)-/g,"$1,-");n=n.replace(/,,/g,",");var r;for(r=0;r<i.length;r++){n=n.replace(new RegExp(i[r],"g"),"|"+i[r])}var a=n.split("|");var o=[];var l=0;var s=0;for(r=1;r<a.length;r++){var u=a[r];var f=u.charAt(0);u=u.slice(1);u=u.replace(new RegExp("e,-","g"),"e-");var c=u.split(",");if(c.length>0&&c[0]===""){c.shift()}for(var d=0;d<c.length;d++){c[d]=parseFloat(c[d])}while(c.length>0){if(isNaN(c[0])){break}var h=null;var p=[];var y;var v;var g;var _;var b;var x;var m;var w;var S=l;var k=s;switch(f){case"l":l+=c.shift();s+=c.shift();h="L";p.push(l,s);break;case"L":l=c.shift();s=c.shift();p.push(l,s);break;case"m":l+=c.shift();s+=c.shift();h="M";p.push(l,s);f="l";break;case"M":l=c.shift();s=c.shift();h="M";p.push(l,s);f="L";break;case"h":l+=c.shift();h="L";p.push(l,s);break;case"H":l=c.shift();h="L";p.push(l,s);break;case"v":s+=c.shift();h="L";p.push(l,s);break;case"V":s=c.shift();h="L";p.push(l,s);break;case"C":p.push(c.shift(),c.shift(),c.shift(),c.shift());l=c.shift();s=c.shift();p.push(l,s);break;case"c":p.push(l+c.shift(),s+c.shift(),l+c.shift(),s+c.shift());l+=c.shift();s+=c.shift();h="C";p.push(l,s);break;case"S":y=l;v=s;g=o[o.length-1];if(g.command==="C"){y=l+(l-g.points[2]);v=s+(s-g.points[3])}p.push(y,v,c.shift(),c.shift());l=c.shift();s=c.shift();h="C";p.push(l,s);break;case"s":y=l,v=s;g=o[o.length-1];if(g.command==="C"){y=l+(l-g.points[2]);v=s+(s-g.points[3])}p.push(y,v,l+c.shift(),s+c.shift());l+=c.shift();s+=c.shift();h="C";p.push(l,s);break;case"Q":p.push(c.shift(),c.shift());l=c.shift();s=c.shift();p.push(l,s);break;case"q":p.push(l+c.shift(),s+c.shift());l+=c.shift();s+=c.shift();h="Q";p.push(l,s);break;case"T":y=l,v=s;g=o[o.length-1];if(g.command==="Q"){y=l+(l-g.points[0]);v=s+(s-g.points[1])}l=c.shift();s=c.shift();h="Q";p.push(y,v,l,s);break;case"t":y=l,v=s;g=o[o.length-1];if(g.command==="Q"){y=l+(l-g.points[0]);v=s+(s-g.points[1])}l+=c.shift();s+=c.shift();h="Q";p.push(y,v,l,s);break;case"A":_=c.shift();b=c.shift();x=c.shift();m=c.shift();w=c.shift();S=l,k=s;l=c.shift(),s=c.shift();h="A";p=[_,b,x,m,w,l,s,S,k];break;case"a":_=c.shift();b=c.shift();x=c.shift();m=c.shift();w=c.shift();S=l,k=s;l+=c.shift();s+=c.shift();h="A";p=[_,b,x,m,w,l,s,S,k];break}o.push({command:h||f,points:p})}if(f==="z"||f==="Z"){o.push({command:"z",points:[]})}}return o}},{key:"draw",value:function t(e){this.__parsePathData=null;this.context.$model.pointList=[];var n=this._parsePathData(this.context.$model.path);for(var i=0,r=n.length;i<r;i++){for(var a=0,o=n[i].length;a<o;a++){var l=n[i][a].command,s=n[i][a].points;switch(l){case"L":e.lineTo(s[0],s[1]);break;case"M":e.moveTo(s[0],s[1]);break;case"C":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":u.Arc.drawArc(e,s[7],s[8],s);break;case"z":e.closePath();break}}}return this}}]);return n}(a["default"]);t.default=b}(e,E,a,r,o,M)});n(W);var z=i(function(t,e){!function(t,e,n,r){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=o(e),a=o(n);function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function f(t,e,n){if(e)u(t.prototype,e);if(n)u(t,n);return t}function c(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return d(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t){h=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return h(t)}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(i,t);function i(t){var e;s(this,i);t=r._.extend(true,{type:"droplet",context:{hr:0,vr:0}},a["default"].checkOpt(t));var n=e=c(this,h(i).call(this,t));e.context.$model.path=e.createPath();return e}f(i,[{key:"watch",value:function t(e,n,i){if(e=="hr"||e=="vr"){this.context.$model.path=this.createPath()}}},{key:"createPath",value:function t(){var e=this.context.$model;var n="M 0 "+e.hr+" C "+e.hr+" "+e.hr+" "+e.hr*3/2+" "+-e.hr/3+" 0 "+-e.vr;n+=" C "+-e.hr*3/2+" "+-e.hr/3+" "+-e.hr+" "+e.hr+" 0 "+e.hr+"z";return n}}]);return i}(i["default"]);t.default=v}(e,W,a,r)});n(z);var G=i(function(t,e){!function(t,e,n,i){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var r=o(e),a=o(n);function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function f(t,e,n){if(e)u(t.prototype,e);if(n)u(t,n);return t}function c(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return d(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t){h=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return h(t)}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(e,t);function e(t){s(this,e);t=i._.extend(true,{type:"ellipse",context:{hr:0,vr:0}},a["default"].checkOpt(t));return c(this,h(e).call(this,t))}f(e,[{key:"watch",value:function t(e,n,i){if(e=="hr"||e=="vr"){this.graphics.clear()}}},{key:"draw",value:function t(e){e.drawEllipse(0,0,this.context.$model.hr*2,this.context.$model.vr*2)}}]);return e}(r["default"]);t.default=v}(e,E,a,r)});n(G);var B=i(function(t,e){!function(t,e,n,a,i){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var r=s(e),o=s(n),l=s(i);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function t(e){return typeof e}}else{u=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return u(t)}function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(e&&(u(e)==="object"||typeof e==="function")){return e}return p(t)}function p(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function y(t){y=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return y(t)}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=function(t){v(r,t);function r(t){f(this,r);var e=a._.extend(true,{lineType:null,smooth:false,pointList:[],smoothFilter:o["default"].__emptyFunc},t.context);if(!t.isClone){var n=e.pointList[0];var i=e.pointList.slice(-1)[0];if(e.smooth){e.pointList.unshift(i);e.pointList=l["default"].getSmoothPointList(e.pointList)}}t.context=e;t.type="polygon";return h(this,y(r).call(this,t))}d(r,[{key:"watch",value:function t(e,n,i){if(e=="pointList"||e=="smooth"||e=="lineType"){this.graphics.clear()}}},{key:"draw",value:function t(e){var n=this.context;var i=n.pointList;if(i.length<2){return}e.moveTo(i[0][0],i[0][1]);for(var r=1,a=i.length;r<a;r++){e.lineTo(i[r][0],i[r][1])}e.closePath();return}}]);return r}(r["default"]);t.default=_}(e,E,a,r,R)});n(B);var V=i(function(t,e){!function(t,e,n,i,r){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var a=s(e),o=s(n),l=s(r);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function t(e){return typeof e}}else{u=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return u(t)}function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(e&&(u(e)==="object"||typeof e==="function")){return e}return p(t)}function p(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function y(t){y=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return y(t)}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=function(t){v(n,t);function n(t){f(this,n);var e=i._.extend(true,{pointList:[],r:0,n:0},t.context);e.pointList=l["default"].getIsgonPointList(e.n,e.r);t.context=e;t.type="isogon";return h(this,y(n).call(this,t))}d(n,[{key:"watch",value:function t(e,n,i){if(e=="r"||e=="n"){this.context.$model.pointList=l["default"].getIsgonPointList(this.context.$model.n,this.context.$model.r)}if(e=="pointList"||e=="smooth"||e=="lineType"){this.graphics.clear()}}}]);return n}(a["default"]);t.default=_}(e,B,a,r,R)});n(V);var H=i(function(t,e){!function(t,e,i){var n;function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function s(t,e,n){if(e)l(t.prototype,e);if(n)l(t,n);return t}function u(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return f(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var p=function(t){d(n,t);function n(t){o(this,n);var e=i._.extend(true,{start:{x:0,y:0},end:{x:0,y:0}},t.context);t.context=e;t.type="line";return u(this,c(n).call(this,t))}s(n,[{key:"watch",value:function t(e,n,i){if(e=="x"||e=="y"){this.graphics.clear()}}},{key:"draw",value:function t(e){var n=this.context.$model;e.moveTo(n.start.x,n.start.y);e.lineTo(n.end.x,n.end.y);return this}}]);return n}(r(e)["default"]);t.default=p}(e,E,r)});n(H);var U=i(function(t,e){!function(t,e,n,i){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var r=a(e),f=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function u(t,e,n){if(e)s(t.prototype,e);if(n)s(t,n);return t}function c(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return d(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t){h=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return h(t)}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(n,t);function n(t){l(this,n);var e=i._.extend(true,{width:0,height:0,radius:[]},t.context);t.context=e;t.type="rect";return c(this,h(n).call(this,t))}u(n,[{key:"watch",value:function t(e,n,i){if(e=="width"||e=="height"||e=="radius"){this.graphics.clear()}}},{key:"_buildRadiusPath",value:function t(e){var n=this.context.$model;var i=0;var r=0;var a=n.width;var o=n.height;var l=f["default"].getCssOrderArr(n.radius);var s=e;var u=1;if(o>=0){u=-1}s.moveTo(parseInt(i+l[0]),parseInt(o));s.lineTo(parseInt(i+a-l[1]),parseInt(o));l[1]!==0&&s.quadraticCurveTo(i+a,o,parseInt(i+a),parseInt(o+l[1]*u));s.lineTo(parseInt(i+a),parseInt(r-l[2]*u));l[2]!==0&&s.quadraticCurveTo(i+a,r,parseInt(i+a-l[2]),parseInt(r));s.lineTo(parseInt(i+l[3]),parseInt(r));l[3]!==0&&s.quadraticCurveTo(i,r,parseInt(i),parseInt(r-l[3]*u));s.lineTo(parseInt(i),parseInt(r+o+l[0]*u));l[0]!==0&&s.quadraticCurveTo(i,r+o,parseInt(i+l[0]),parseInt(r+o))}},{key:"draw",value:function t(e){var n=this.context.$model;if(!n.radius.length){e.drawRect(0,0,n.width,n.height)}else{this._buildRadiusPath(e)}e.closePath();return}}]);return n}(r["default"]);t.default=v}(e,E,a,r)});n(U);var q=i(function(t,e){!function(t,e,n,i,r){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var a=l(e),o=l(n),s=l(r);function l(t){return t&&t.__esModule?t:{default:t}}function u(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function t(e){return typeof e}}else{u=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return u(t)}function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(e&&(u(e)==="object"||typeof e==="function")){return e}return p(t)}function p(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function y(t){y=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return y(t)}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=function(t){v(n,t);function n(t){f(this,n);var e=i._.extend(true,{pointList:[],r0:0,r:0,startAngle:0,endAngle:0,clockwise:false},t.context);t.context=e;t.regAngle=[];t.isRing=false;t.type="sector";return h(this,y(n).call(this,t))}d(n,[{key:"watch",value:function t(e,n,i){if(e=="r0"||e=="r"||e=="startAngle"||e=="endAngle"||e=="clockwise"){this.isRing=false;this.graphics.clear()}}},{key:"draw",value:function t(e){var n=this.context.$model;var i=typeof n.r0=="undefined"?0:n.r0;var r=n.r;var a=s["default"].degreeTo360(n.startAngle);var o=s["default"].degreeTo360(n.endAngle);if(n.startAngle!=n.endAngle&&Math.abs(n.startAngle-n.endAngle)%360==0){this.isRing=true;a=0;o=360}a=s["default"].degreeToRadian(a);o=s["default"].degreeToRadian(o);var l=e;if(this.isRing){if(n.r0==0){l.drawCircle(0,0,n.r)}else{if(n.fillStyle&&n.fillAlpha){l.beginPath();l.arc(0,0,r,a,o,n.clockwise);if(n.r0==0){l.lineTo(0,0)}else{l.arc(0,0,i,o,a,!n.clockwise)}l.closePath();l.currentPath.lineWidth=0;l.currentPath.strokeStyle=null;l.currentPath.strokeAlpha=0;l.currentPath.line=false}if(n.lineWidth&&n.strokeStyle&&n.strokeAlpha){l.beginPath();l.arc(0,0,r,a,o,n.clockwise);l.closePath();l.currentPath.fillStyle=null;l.currentPath.fill=false;l.beginPath();l.arc(0,0,i,o,a,!n.clockwise);l.closePath();l.currentPath.fillStyle=null;l.currentPath.fill=false}}}else{l.beginPath();l.arc(0,0,r,a,o,n.clockwise);if(n.r0==0){l.lineTo(0,0)}else{l.arc(0,0,i,o,a,!n.clockwise)}l.closePath()}}}]);return n}(a["default"]);t.default=_}(e,E,a,r,R)});n(q);var Y=i(function(t,e){!function(t,e,i){var n;function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function s(t,e,n){if(e)l(t.prototype,e);if(n)l(t,n);return t}function u(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return f(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var p=function(t){d(n,t);function n(t){o(this,n);var e=i._.extend(true,{control:{x:0,y:0},point:{x:0,y:0},angle:null,theta:30,headlen:6,lineWidth:1,strokeStyle:"#666",fillStyle:null},t.context);t.context=e;t.type="arrow";return u(this,c(n).call(this,t))}s(n,[{key:"watch",value:function t(e,n,i){if(e=="x"||e=="y"||e=="theta"||e=="headlen"||e=="angle"){this.graphics.clear()}}},{key:"draw",value:function t(e){var n=this.context.$model;var i=n.control.x;var r=n.control.y;var a=n.point.x;var o=n.point.y;var l=n.angle!=null?n.angle-180:Math.atan2(r-o,i-a)*180/Math.PI,s=(l+n.theta)*Math.PI/180,u=(l-n.theta)*Math.PI/180,f=n.headlen*Math.cos(s),c=n.headlen*Math.sin(s),d=n.headlen*Math.cos(u),h=n.headlen*Math.sin(u);var p=a+f;var y=o+c;e.moveTo(p,y);e.lineTo(a,o);e.lineTo(a+d,o+h);if(n.fillStyle){e.lineTo(p,y);e.closePath()}return this}}]);return n}(r(e)["default"]);t.default=p}(e,E,r)});n(Y);var $=n(i(function(t,e){!function(t,e,n,i,r,a,o,l,s,u,f,c,d,h,p,y,v,g,_,b,x,m){Object.defineProperty(t,"__esModule",{value:true});var w=V(e),S=V(n),k=V(i),O=V(r),P=V(a),A=V(o),C=V(l),M=V(s),j=V(u),T=V(f),E=V(c),I=V(d),D=V(h),L=V(p),R=V(y),F=V(v),N=V(g),W=V(_),z=V(b),G=V(x),B=V(m);function V(t){return t&&t.__esModule?t:{default:t}}var H={App:w["default"]};H.Display={DisplayObject:S["default"],DisplayObjectContainer:k["default"],Stage:O["default"],Sprite:P["default"],Shape:A["default"],Point:C["default"],Text:M["default"]},H.Shapes={BrokenLine:j["default"],Circle:T["default"],Droplet:E["default"],Ellipse:I["default"],Isogon:D["default"],Line:L["default"],Path:R["default"],Polygon:F["default"],Rect:N["default"],Sector:W["default"],Arrow:z["default"]},H.AnimationFrame=G["default"],H.utils=B["default"],t["default"]=H}(e,m,p,y,v,w,E,l,I,F,N,z,G,V,H,W,B,U,q,Y,u,a)}));t.exports=$});t(n),t(e(function(t,e){!function(t,e,h){Object.defineProperty(t,"__esModule",{value:true});var o=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function t(e){return typeof e}}else{i=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return i(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function s(t,e,n){if(e)r(t.prototype,e);if(n)r(t,n);return t}function u(t,e){if(e&&(i(e)==="object"||typeof e==="function")){return e}return a(t)}function a(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)d(t,e)}function d(t,e){d=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return d(t,e)}var p=20,y=function(t){c(a,t);function a(t,e,n,i){var r;l(this,a);r=u(this,f(a).call(this));r.componentModules=i;r._node=t;r._data=e;r._opt=n;r.dataFrame=r.initData(e,n);r.el=h.$.query(t);r.width=parseInt(r.el.offsetWidth);r.height=parseInt(r.el.offsetHeight);r.padding=null;r.canvax=new o["default"].App({el:r.el,webGL:false});r.canvax.registEvent();r.id="chartx_"+r.canvax.id;r.el.setAttribute("chart_id",r.id);r.el.setAttribute("chartx_version","2.0");r.stage=new o["default"].Display.Stage({id:"main-chart-stage"});r.canvax.addChild(r.stage);r.setCoord_Graphs_Sp();r.__highModules=["theme","coord","graphs"];r.components=[];r.inited=false;r.init();return r}s(a,[{key:"init",value:function t(){var r=this;var e=this._opt;this.padding=this._getPadding();h._.each(this.__highModules,function(i){if(!e[i])return;var t=h._.flatten([e[i]]);if(i=="theme"){t=[t]}h._.each(t,function(t){if(i=="coord"&&!t.type||i=="graphs"&&!t.field&&!t.keyField)return;var e=r.componentModules.get(i,t.type);if(e){var n=new e(t,r);r.components.push(n)}})});for(var i in this._opt){if(h._.indexOf(this.__highModules,i)==-1){var n=this._opt[i];if(!h._.isArray(n)){n=[n]}h._.each(n,function(t){var e=r.componentModules.get(i,t.type);if(e){var n=new e(t,r);r.components.push(n)}})}}}},{key:"draw",value:function t(n){var i=this;!n&&(n={});var e=this.getComponent({name:"coord"});if(e&&e.horizontal){this._drawBeginHorizontal()}var r=this.width-this.padding.left-this.padding.right;var a=this.height-this.padding.top-this.padding.bottom;var o={x:this.padding.left,y:this.padding.top};if(e){e.draw(n);r=e.width;a=e.height;o=e.origin}if(this.dataFrame.length==0){i.fire("complete");return}var l=this.getComponents({name:"graphs"});var s=l.length;var u=0;n=h._.extend(n,{width:r,height:a,origin:o});h._.each(l,function(e){e.on("complete",function(t){u++;if(u==s){i.fire("complete")}e.inited=true});e.draw(n)});for(var f=0,c=this.components.length;f<c;f++){var d=this.components[f];if(h._.indexOf(this.__highModules,d.name)==-1){d.draw(n)}}this._bindEvent();if(e&&e.horizontal){this._drawEndHorizontal()}}},{key:"_drawBeginHorizontal",value:function t(){var e=this.padding;var n=e.top;e.top=e.right;e.right=e.bottom;e.bottom=e.left;e.left=n}},{key:"_drawEndHorizontal",value:function t(){var e=this.graphsSprite.context;e.x+=(this.width-this.height)/2;e.y+=(this.height-this.width)/2;e.rotation=90;e.rotateOrigin={x:this.height/2,y:this.width/2};this._horizontalGraphsText()}},{key:"_horizontalGraphsText",value:function t(){var e=this;function r(t){if(t.children){h._.each(t.children,function(t){r(t)})}if(t.type=="text"&&!t.__horizontal){var e=t.context;var n=e.width;var i=e.height;e.rotation=e.rotation-90;t.__horizontal=true}}h._.each(e.getComponents({name:"graphs"}),function(t){r(t.sprite)})}},{key:"_getPadding",value:function t(){var e=p;if(this._opt.coord&&"padding"in this._opt.coord){if(!h._.isObject(this._opt.coord.padding)){e=this._opt.coord.padding}}var n={top:e,right:e,bottom:e,left:e};if(this._opt.coord&&"padding"in this._opt.coord){if(h._.isObject(this._opt.coord.padding)){n=h._.extend(n,this._opt.coord.padding)}}return n}},{key:"getTheme",value:function t(e){var n=h.global.getGlobalTheme();var i=this.getComponent({name:"theme"});if(i){n=i.get()}if(e!=undefined){return n[e%n.length]||"#ccc"}return n}},{key:"setCoord_Graphs_Sp",value:function t(){this.coordSprite=new o["default"].Display.Sprite({id:"coordSprite"});this.stage.addChild(this.coordSprite);this.graphsSprite=new o["default"].Display.Sprite({id:"graphsSprite"});this.stage.addChild(this.graphsSprite)}},{key:"destroy",value:function t(){this.clean();if(this.el){this.el.removeAttribute("chart_id");this.el.removeAttribute("chartx_version");this.canvax.destroy();this.el=null}this._destroy&&this._destroy();this.fire("destroy")}},{key:"clean",value:function t(){for(var e=0,n=this.canvax.children.length;e<n;e++){var i=this.canvax.getChildAt(e);for(var r=0,a=i.children.length;r<a;r++){i.getChildAt(r).destroy();r--;a--}}this.setCoord_Graphs_Sp();this.components=[];this.canvax.domView.innerHTML=""}},{key:"resize",value:function t(){var e=parseInt(this.el.offsetWidth);var n=parseInt(this.el.offsetHeight);if(e==this.width&&n==this.height)return;this.width=e;this.height=n;this.canvax.resize();this.inited=false;this.clean();this.init();this.draw({resize:true});this.inited=true}},{key:"reset",value:function t(e,n){e&&(this._opt=e);n&&(this._data=n);this.dataFrame=this.initData(this._data,e);this.clean();this.init();this.draw()}},{key:"resetData",value:function t(e,n){var i=this;this._data=e;var r=this.dataFrame.org.length;this.dataFrame.resetData(e);if(!r){this.clean();this.init();this.draw(this._opt);return}var a=this.getComponent({name:"coord"});if(a){a.resetData(this.dataFrame,n)}h._.each(this.getComponents({name:"graphs"}),function(t){t.resetData(i.dataFrame,n)});this.componentsReset(n);if(a&&a.horizontal){this._horizontalGraphsText()}this.fire("resetData")}},{key:"initData",value:function t(){return h.dataFrame.apply(this,arguments)}},{key:"componentsReset",value:function t(n){var i=this;h._.each(this.components,function(t,e){if(h._.indexOf(i.__highModules,t.name)!=-1){return}if(n&&n.comp&&n.comp.__cid==t.__cid){return}t.reset&&t.reset(i[t.type]||{},i.dataFrame)})}},{key:"getComponentById",value:function t(e){var n;h._.each(this.components,function(t){if(t.id&&t.id==e){n=t;return false}});return n}},{key:"getComponent",value:function t(e){return this.getComponents(e)[0]}},{key:"getComponents",value:function t(i,e){var r=[];var a=0;if(!e){e=this.components}for(var n in i){a++}if(!a){return e}h._.each(e,function(t){var e=0;for(var n in i){if(JSON.stringify(t[n])==JSON.stringify(i[n])){e++}}if(a==e){r.push(t)}});return r}},{key:"getGraph",value:function t(e){var n=this.getGraphs(e);return n[0]}},{key:"getGraphs",value:function t(e){return this.getComponents(e,this.getComponents({name:"graphs"}))}},{key:"getGraphById",value:function t(e){var n;h._.each(this.getComponents({name:"graphs"}),function(t){if(t.id==e){n=t;return false}});return n}},{key:"getCoord",value:function t(e){return this.getComponent(h._.extend(true,{name:"coord"},e))}},{key:"getLegendData",value:function t(){var i=this;var r=[];h._.each(this.getComponents({name:"graphs"}),function(t){h._.each(t.getLegendData(),function(e){if(h._.find(r,function(t){return t.name==e.name}))return;var t=h._.extend(true,{},e);t.color=e.fillStyle||e.color||e.style;r.push(t)})});if(r.length){return r}var e=i.getComponent({name:"coord"});h._.each(h._.flatten(e.fieldsMap),function(e,t){var n=false;h._.each(i._opt.graphs,function(t){if(h._.indexOf(h._.flatten([t.field]),e.field)>-1){n=true;return false}});if(n){r.push({enabled:e.enabled,name:e.field,field:e.field,ind:e.ind,color:e.color,yAxis:e.yAxis})}});return r}},{key:"show",value:function t(e,n){var i=this.getComponent({name:"coord"});i&&i.show(e,n);h._.each(this.getComponents({name:"graphs"}),function(t){t.show(e,n)});this.componentsReset(n)}},{key:"hide",value:function t(e,n){var i=this;var r=i.getComponent({name:"coord"});r&&r.hide(e,n);h._.each(this.getComponents({name:"graphs"}),function(t){t.hide(e,n)});this.componentsReset(n)}},{key:"_bindEvent",value:function t(){var i=this;this.on(h.event.types.get(),function(e){if(e.eventInfo){h._.each(this.getGraphs(),function(t){t.triggerEvent(e)})}var t=i.getComponent({name:"tips"});var n=i.getComponent({name:"coord"});if(t){i._setGraphsTipsInfo.apply(i,[e]);if(e.type=="mouseover"||e.type=="mousedown"){t.show(e);i._tipsPointerAtAllGraphs(e)}if(e.type=="mousemove"){t.move(e);i._tipsPointerAtAllGraphs(e)}if(e.type=="mouseout"&&!(e.toTarget&&n&&n.induce&&n.induce.containsPoint(n.induce.globalToLocal(e.target.localToGlobal(e.point))))){t.hide(e);i._tipsPointerHideAtAllGraphs(e)}}})}},{key:"_setGraphsTipsInfo",value:function t(e){if(!e.eventInfo){e.eventInfo={}}var n=this.getComponent({name:"coord"});if(n){e.eventInfo=n.getTipsInfoHandler(e)}if(!("tipsEnabled"in e.eventInfo)){e.eventInfo.tipsEnabled=true}if(!e.eventInfo.nodes||!e.eventInfo.nodes.length){var i=[];var r=e.eventInfo.iNode;h._.each(this.getComponents({name:"graphs"}),function(t){i=i.concat(t.getNodesAt(r,e))});e.eventInfo.nodes=i}}},{key:"_tipsPointerAtAllGraphs",value:function t(e){h._.each(this.getComponents({name:"graphs"}),function(t){t.tipsPointerOf(e)})}},{key:"_tipsPointerHideAtAllGraphs",value:function t(e){h._.each(this.getComponents({name:"graphs"}),function(t){t.tipsPointerHideOf(e)})}}]);return a}(h.event.Dispatcher);h.global.registerComponent(y,"chart"),t["default"]=y}(e,n,X)}));var i=e(function(t,e){!function(t,e,r){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var a=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function t(e){return typeof e}}else{i=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return i(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(i(e)==="object"||typeof e==="function")){return e}return u(t)}function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}var p=function(t){d(i,t);c(i,null,[{key:"defaultProps",value:function t(){return{enabled:{detail:"是否开启该组件",default:false}}}},{key:"_isComponentRoot",value:function t(){return true}}]);function i(t,e){var n;o(this,i);n=l(this,s(i).call(this,t,e));r._.extend(true,u(n),(0,r.getDefaultProps)(i.defaultProps()),t);n.name="component";n.type=null;n._opt=t;n.app=e;n.width=0;n.height=0;n.pos={x:0,y:0};n.margin={top:0,right:0,bottom:0,left:0};n.__cid=a["default"].utils.createId("comp_");return n}c(i,[{key:"init",value:function t(e,n){}},{key:"draw",value:function t(){}},{key:"destroy",value:function t(){}},{key:"reset",value:function t(){}},{key:"resetData",value:function t(){console.log((this.type||"")+"暂无resetData的实现")}},{key:"setPosition",value:function t(e){!e&&(e=this.pos);e.x&&(this.sprite.context.x=e.x);e.y&&(this.sprite.context.y=e.y)}},{key:"layout",value:function t(){}}]);return i}(r.event.Dispatcher);t.default=p}(e,n,X)});t(i);var a=e(function(t,e){!function(t,e,n,u){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{type:{detail:"坐标系组件",documentation:"坐标系组件，可选值有'rect'（二维直角坐标系）,'polar'（二维极坐标系）,'box'（三维直角坐标系） ",insertText:"type: ",default:"",values:["rect","polar","box","polar3d"]},width:{detail:"坐标系width",default:0},height:{detail:"坐标系height",default:0},origin:{detail:"坐标系原点",propertys:{x:{detail:"原点x位置",default:0},y:{detail:"原点x位置",default:0}}}}}}]);function i(t,e){var n;l(this,i);n=s(this,f(i).call(this,t,e));u._.extend(true,c(n),(0,u.getDefaultProps)(i.defaultProps()));n.name="coord";n._opt=t;n.app=e;n.dataFrame=n.app.dataFrame;n.sprite=new r["default"].Display.Sprite({name:"coord_"+t.type});n.app.coordSprite.addChild(n.sprite);n.fieldsMap=null;n.induce=null;n._axiss=[];return n}h(i,[{key:"setFieldsMap",value:function t(e){var r=this;var a=0;var o=e.type||"yAxis";var n=[];u._.each(this.getAxiss(e),function(t){if(t.field){n=n.concat(t.field)}});function l(t){if(u._.isString(t)){t=[t]}var e=u._.clone(t);for(var n=0,i=t.length;n<i;n++){if(u._.isString(t[n])){e[n]={field:t[n],enabled:true,color:r.app.getTheme(a),ind:a++};e[n][o]=r.getAxis({type:o,field:t[n]})}if(u._.isArray(t[n])){e[n]=l(t[n])}}return e}return l(n)}},{key:"setFieldEnabled",value:function t(n){var e=this;function i(t){u._.each(t,function(t,e){if(u._.isArray(t)){i(t)}else if(t.field&&t.field==n){t.enabled=!t.enabled}})}i(e.fieldsMap)}},{key:"getFieldMapOf",value:function t(n){var e=this;var i=null;function r(t){u._.each(t,function(t,e){if(u._.isArray(t)){r(t)}else if(t.field&&t.field==n){i=t;return false}})}r(e.fieldsMap);return i}},{key:"getEnabledFieldsOf",value:function t(i){var r=[];var a=i?i.type:"yAxis";u._.each(this.fieldsMap,function(t,e){if(u._.isArray(t)){var n=[];u._.each(t,function(t,e){if(t[a]===i&&t.field&&t.enabled){n.push(t.field)}});n.length&&r.push(n)}else{if(t[a]===i&&t.field&&t.enabled){r.push(t.field)}}});return r}},{key:"filterEnabledFields",value:function t(e){var n=this;var i=[];if(!u._.isArray(e))e=[e];u._.each(e,function(t){if(!u._.isArray(t)){if(n.getFieldMapOf(t).enabled){i.push(t)}}else{var e=[];u._.each(t,function(t){if(n.getFieldMapOf(t).enabled){e.push(t)}});if(e.length){i.push(e)}}});return i}},{key:"getAxisDataFrame",value:function t(e){return{field:e,org:this.dataFrame.getDataOrg(e,function(t){if(t===undefined||t===null||t==""){return t}return isNaN(Number(t))?t:Number(t)})}}},{key:"hide",value:function t(e){this.changeFieldEnabled(e)}},{key:"show",value:function t(e){this.changeFieldEnabled(e)}},{key:"getSizeAndOrigin",value:function t(){return{width:this.width,height:this.height,origin:this.origin}}},{key:"getPoint",value:function t(e){}},{key:"getAxisOriginPoint",value:function t(e){}},{key:"getOriginPos",value:function t(e){}},{key:"getAxis",value:function t(e){var n=this.getAxiss(e);return n[0]}},{key:"getAxiss",value:function t(o){var l=[];var s=0;for(var e in o){s++}u._.each(this._axiss,function(t){var e=0;for(var n in o){if(n=="field"){var i=u._.flatten([t[n]]);var r=u._.flatten([o[n]]);var a=true;u._.each(r,function(t){if(u._.indexOf(i,t)==-1){a=false}});if(a){e++}}else{if(JSON.stringify(t[n])==JSON.stringify(o[n])){e++}}}if(s==e){l.push(t)}});return l}}]);return i}(i["default"]);t.default=v}(e,i,n,X)});t(a);var o=e(function(t,e){var n,s;n=e,s=X,Object.defineProperty(n,"__esModule",{value:!0}),n.numAddSymbol=function(t,e){var n=Number(t),i=e||",";if(!n)return String(t);{if(1e3<=n){var r=parseInt(n/1e3);return String(t.toString().replace(r,r+i))}return String(t)}},n.getDisMinATArr=function(t,e){for(var n=0,i=Math.abs(t-e[0]),r=1,a=e.length;r<a;r++)i>Math.abs(t-e[r])&&(i=Math.abs(t-e[r]),n=r);return n},n.getPath=function(t){var e="",n={x:0,y:0};e=s._.isArray(t[0])?(n.x=t[0][0],n.y=t[0][1],"M"+t[0][0]+" "+t[0][1]):(n=t[0],"M"+t[0].x+" "+t[0].y);for(var i=1,r=t.length;i<r;i++){var a=0,o=0,l=t[i];o=s._.isArray(l)?(a=l[0],l[1]):(a=l.x,l.y),a==n.x&&o==n.y?e+=" z":e+=" L"+a+" "+o}return e}});t(o);var l=e(function(t,e){!function(t,a){function n(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){n=function t(e){return typeof e}}else{n=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return n(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(n(e)==="object"||typeof e==="function")){return e}return u(t)}function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function e(t,e,n){if(e)i(t.prototype,e);if(n)i(t,n);return t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)r(t,e)}function r(t,e){r=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return r(t,e)}Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var c=function(t){f(r,t);e(r,null,[{key:"defaultProps",value:function t(){return{field:{detail:"轴字段配置",documentation:"目前x轴的field只支持单维度设置，也就是说只支持一条x轴",default:[]},layoutType:{detail:"布局方式",default:"rule"},width:{detail:"轴宽",default:0},height:{detail:"轴高",default:0},enabled:{detail:"是否显示轴",default:true},animation:{detail:"是否开启动画",default:true},title:{detail:"轴名称",propertys:{shapeType:"text",textAlign:{detail:"水平对齐方式",default:"center"},textBaseline:{detail:"基线对齐方式",default:"middle"},strokeStyle:{detail:"文本描边颜色",default:null},lineHeight:{detail:"行高",default:0},text:{detail:"轴名称的内容",default:""},fontColor:{detail:"颜色",default:"#999"},fontSize:{detail:"字体大小",default:12}}},tickLine:{detail:"刻度线",propertys:{enabled:{detail:"是否开启",default:true},lineWidth:{detail:"刻度线宽",default:1},lineLength:{detail:"刻度线长度",default:4},distance:{detail:"和前面一个元素的距离",default:2},strokeStyle:{detail:"描边颜色",default:"#cccccc"}}},axisLine:{detail:"轴线配置",propertys:{enabled:{detail:"是否有轴线",default:true},position:{detail:"轴线的位置",documentation:'default在align的位置（left，right），可选 "center" 和 具体的值',default:"default"},lineWidth:{detail:"轴线宽度",default:1},strokeStyle:{detail:"轴线的颜色",default:"#cccccc"}}},label:{detail:"刻度文本",propertys:{enabled:{detail:"是否显示刻度文本",default:true},fontColor:{detail:"文本颜色",default:"#999"},fontSize:{detail:"字体大小",default:12},rotation:{detail:"旋转角度",default:0},format:{detail:"label文本的格式化处理函数",default:null},distance:{detail:"和轴线之间的间距",default:2},textAlign:{detail:"水平方向对齐方式",default:"center"},lineHeight:{detail:"文本的行高",default:1},evade:{detail:"是否开启逃避算法,目前的逃避只是隐藏",default:true}}},filter:{detail:"过滤函数",documentation:"可以用来过滤哪些yaxis 的 节点是否显示已经颜色之类的",default:null},trimLayout:{detail:"自定义的显示规则函数",documentation:"如果用户有手动的 trimLayout ，那么就全部visible为true，然后调用用户自己的过滤程序",default:null}}}}]);function r(t,e,n){var i;o(this,r);i=l(this,s(r).call(this,t,e));a._.extend(true,u(i),(0,a.getDefaultProps)(r.defaultProps()));return i}e(r,[{key:"drawWaterLine",value:function t(e){if(this.layoutType=="proportion"){if(e>=this._min&&e<=this._max){return}}this.dataSection=[];this.setWaterLine(e);this._initHandle();this.draw()}}]);return r}(a.axis);t.default=c}(e,X)});t(l);var u=e(function(t,e){!function(t,e,i,_,n){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var b=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return f(t)}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return u(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)p(t,e)}function p(t,e){p=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return p(t,e)}var x=b["default"].Shapes.Line,y=function(t){h(r,t);d(r,null,[{key:"defaultProps",value:function t(){return{}}}]);function r(t,e,n){var i;l(this,r);i=s(this,u(r).call(this,t,e.org));i.type="xAxis";i._coord=n||{};i._title=null;i._axisLine=null;i._formatTextSection=[];i._textElements=[];i.pos={x:0,y:0};i.layoutData=[];i.sprite=null;i.isH=false;_._.extend(true,f(i),(0,_.getDefaultProps)(r.defaultProps()),t);i.init(t);return i}d(r,[{key:"init",value:function t(e){this._setField();this._initHandle(e);this.sprite=new b["default"].Display.Sprite({id:"xAxisSprite_"+(new Date).getTime()});this.rulesSprite=new b["default"].Display.Sprite({id:"xRulesSprite_"+(new Date).getTime()});this.sprite.addChild(this.rulesSprite)}},{key:"_initHandle",value:function t(e){var i=this;if(e){if(e.isH&&(!e.label||e.label.rotaion===undefined)){this.label.rotation=90}}this.setDataSection();i._formatTextSection=[];i._textElements=[];_._.each(i.dataSection,function(t,e){i._formatTextSection[e]=i._getFormatText(t,e);var n=new b["default"].Display.Text(i._formatTextSection[e],{context:{fontSize:i.label.fontSize}});i._textElements[e]=n});if(this.label.rotation!=0){this.label.textAlign="right"}this._getTitle();this._setXAxisHeight()}},{key:"_setField",value:function t(e){if(e){this.field=e}this.field=_._.flatten([this.field])[0]}},{key:"draw",value:function t(e){e&&_._.extend(true,this,e);this.setAxisLength(this.width);this._trimXAxis();this._widget(e);this.setX(this.pos.x);this.setY(this.pos.y)}},{key:"resetData",value:function t(e){this._setField(e.field);this.resetDataOrg(e.org);this._initHandle();this.draw()}},{key:"setX",value:function t(e){this.sprite.context.x=e;this.pos.x=e}},{key:"setY",value:function t(e){this.sprite.context.y=e;this.pos.y=e}},{key:"_getTitle",value:function t(){if(this.title.text){if(!this._title){this._title=new b["default"].Display.Text(this.title.text,{context:{fontSize:this.title.fontSize,textAlign:this.title.textAlign,textBaseline:this.title.textBaseline,fillStyle:this.title.fontColor,strokeStyle:this.title.strokeStyle,lineWidth:this.title.lineWidth,rotation:this.isH?-180:0}})}else{this._title.resetText(this.title.text)}}}},{key:"_setXAxisHeight",value:function t(){var s=this;if(!s.enabled){s.height=0}else{var u=0;if(this.label.enabled){_._.each(s.dataSection,function(t,e){var n=s._textElements[e];var i=n.getTextWidth();var r=n.getTextHeight();var a=r;if(!!s.label.rotation){if(s.label.rotation==90){a=i}else{var o=Math.sin(Math.abs(s.label.rotation)*Math.PI/180);var l=Math.cos(Math.abs(s.label.rotation)*Math.PI/180);a=parseInt(o*i)}}u=Math.max(u,a)})}this.height=u+this.tickLine.lineLength+this.tickLine.distance+this.label.distance;if(this._title){this.height+=this._title.getTextHeight()}}}},{key:"getNodeInfoOfX",value:function t(e){var n=this.getIndexOfPos(e);var i=this.getValOfInd(n);var r=this.getPosOf({ind:n,val:i});return this._getNodeInfo(n,i,r)}},{key:"getNodeInfoOfVal",value:function t(e){var n=this.getIndexOfVal(e);var i=this.getPosOf({ind:n,val:e});return this._getNodeInfo(n,e,i)}},{key:"_getNodeInfo",value:function t(e,n,i){var r={ind:e,value:n,text:this._getFormatText(n,e),x:i,field:this.field,layoutType:this.layoutType};return r}},{key:"_trimXAxis",value:function t(){var e=[];var n=this.dataSection;for(var i=0,r=n.length;i<r;i++){var a=this._formatTextSection[i];var o=this._textElements[i];var l={ind:i,value:n[i],text:a,x:this.getPosOf({val:n[i],ind:i}),textWidth:o.getTextWidth(),field:this.field,visible:null};e.push(l)}this.layoutData=e;this._trimLayoutData();return e}},{key:"_getFormatText",value:function t(e){var n=e;if(_._.isFunction(this.label.format)){n=this.label.format.apply(this,arguments)}if(_._.isNumber(n)&&this.layoutType=="proportion"){n=(0,i.numAddSymbol)(n)}return n}},{key:"_widget",value:function t(e){var n=this;!e&&(e={});if(!n.enabled){n.height=0;return}var i=n.layoutData;var r=0;for(var a=0,o=i.length;a<o;a++){_._.isFunction(n.filter)&&n.filter({layoutData:i,index:a});var l=i[a];if(!l.visible){continue}var s=l.x,u=n.tickLine.lineLength+n.tickLine.distance+n.label.distance;var f=n.rulesSprite.getChildAt(r);var c={x:l._text_x||l.x,y:u,fillStyle:this.label.fontColor,fontSize:this.label.fontSize,rotation:-Math.abs(this.label.rotation),textAlign:this.label.textAlign,lineHeight:this.label.lineHeight,textBaseline:!!this.label.rotation?"middle":"top",globalAlpha:1};if(!!this.label.rotation&&this.label.rotation!=90){c.x+=5;c.y+=3}var d={x:s,y:this.tickLine.distance,end:{x:0,y:this.tickLine.lineLength},lineWidth:this.tickLine.lineWidth,strokeStyle:this.tickLine.strokeStyle};var h=300;var p=r*Math.min(1e3/i.length,25);if(!n.animation||e.resize){h=0;p=0}if(f){if(f._tickLine&&n.tickLine.enabled){f._tickLine.animate(d,{duration:h,id:f._tickLine.id})}if(f._txt&&n.label.enabled){f._txt.animate(c,{duration:h,id:f._txt.id});f._txt.resetText(l.text)}}else{f=new b["default"].Display.Sprite({id:"xNode"+r});if(n.tickLine.enabled){f._tickLine=new x({id:"xAxis_tickline_"+r,context:d});f.addChild(f._tickLine)}if(n.label.enabled){f._txt=new b["default"].Display.Text(l.text,{id:"xAxis_txt_"+r,context:c});f.addChild(f._txt);if(n.animation&&!e.resize){f._txt.context.y+=20;f._txt.context.globalAlpha=0;f._txt.animate({y:c.y,globalAlpha:1},{duration:500,delay:p,id:f._txt.id})}}n.rulesSprite.addChild(f)}r++}if(this.rulesSprite.children.length>=r){for(var o=r,y=this.rulesSprite.children.length;o<y;o++){this.rulesSprite.getChildAt(o).remove();o--,y--}}if(this.axisLine.enabled){var v={start:{x:0,y:0},end:{x:this.width,y:0},lineWidth:this.axisLine.lineWidth,strokeStyle:this.axisLine.strokeStyle};if(!this._axisLine){var g=new x({context:v});this.sprite.addChild(g);this._axisLine=g}else{this._axisLine.animate(v)}}if(this._title){this._title.context.y=this.height-this._title.getTextHeight()/2;this._title.context.x=this.width/2;this.sprite.addChild(this._title)}}},{key:"_trimLayoutData",value:function t(){var e=this;var n=this.layoutData;var i=n.length;if(!this.enabled||!i)return;if(e.layoutType=="proportion"){this._checkOver()}if(e.layoutType=="peak"){this._checkOver()}if(e.layoutType=="rule"){this._checkOver()}}},{key:"_getRootPR",value:function t(){var e=0;if(this._coord.app){e=this._coord.app.padding.right}return e}},{key:"_checkOver",value:function t(){var s=this;var u=s.layoutData;var f=u.length;var c=s.label.textAlign;if(!this.label.evade||s.trimLayout){_._.each(u,function(t){t.visible=true});if(s.trimLayout){s.trimLayout(u)}var e;for(var n=f-1;n>=0;n--){if(e)break;if(u[n].visible)e=u[n]}if(e){if(c=="center"&&e.x+e.textWidth/2>s.width){e._text_x=s.width-e.textWidth/2+s._getRootPR()}if(c=="left"&&e.x+e.textWidth>s.width){e._text_x=s.width-e.textWidth}}return}function d(t){var e=u[t];if(e===undefined){return}e.visible=true;for(var n=t;n<f-1;n++){var i=u[n+1];var r=i.textWidth;var a=e.textWidth;if(!!s.label.rotation){r=Math.min(r,22);a=Math.min(a,22)}var o=i.x;var l=e.x+a;if(c=="center"){o=i.x-r/2;l=e.x+a/2}if(c=="right"){o=i.x-r;l=e.x}if(n==f-2){if(o+r>s.width+s._getRootPR()){if(c=="center"&&i.x+r/2>s.width){o=s.width-r;i._text_x=s.width-r/2+s._getRootPR()}if(c=="left"&&i.x+r>s.width){o=s.width-r;i._text_x=s.width-r}}}if(o-l<1){if(n==f-2){i.visible=true;e.visible=false;return}else{i.visible=false}}else{d(n+1);break}}}d(0)}}]);return r}(r["default"]);t.default=y}(e,n,o,X,l)});t(u);var c=e(function(t,e){!function(t,e,f,w,n){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var S=r(e),i=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return u(t)}function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)p(t,e)}function p(t,e){p=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return p(t,e)}var k=S["default"].Shapes.Line,y=function(t){h(r,t);d(r,null,[{key:"defaultProps",value:function t(){return{align:{detail:"左右轴设置",default:"left"},layoutType:{detail:"布局方式",default:"proportion"}}}}]);function r(t,e,n){var i;o(this,r);i=l(this,s(r).call(this,t,e.org));i.type="yAxis";i._coord=n||{};i._title=null;i._axisLine=null;i.maxW=0;i.pos={x:0,y:0};i.yMaxHeight=0;i.layoutData=[];i.sprite=null;i.isH=false;w._.extend(true,u(i),(0,w.getDefaultProps)(r.defaultProps()),t);i.init(t);return i}d(r,[{key:"init",value:function t(e){this._setField();this._initHandle(e);this.sprite=new S["default"].Display.Sprite({id:"yAxisSprite_"+(new Date).getTime()});this.rulesSprite=new S["default"].Display.Sprite({id:"yRulesSprite_"+(new Date).getTime()});this.sprite.addChild(this.rulesSprite)}},{key:"_initHandle",value:function t(e){if(e){if(e.isH&&(!e.label||e.label.rotaion===undefined)){this.label.rotation=90}if(!e.label||!e.label.textAlign){this.label.textAlign=this.align=="left"?"right":"left"}}this.setDataSection();this._getTitle();this._setYaxisWidth()}},{key:"_setField",value:function t(e){if(e){this.field=e}if(!w._.isArray(this.field)){this.field=[this.field]}}},{key:"draw",value:function t(e){w._.extend(true,this,e||{});this.height=parseInt(this.yMaxHeight-this._getYAxisDisLine());this.setAxisLength(this.height);this.sprite.cleanAnimates();this._trimYAxis();this._widget(e);this.setX(this.pos.x);this.setY(this.pos.y)}},{key:"resetData",value:function t(e){this._setField(e.field);this.resetDataOrg(e.org);this._initHandle();this.draw()}},{key:"setX",value:function t(e){this.sprite.context.x=e;this.pos.x=e}},{key:"setY",value:function t(e){this.sprite.context.y=e;this.pos.y=e}},{key:"_getTitle",value:function t(){if(this.title.text){if(!this._title){var e=0;if(this.align=="left"){e=-90}else{e=90;if(this.isH){e=270}}this._title=new S["default"].Display.Text(this.title.text,{context:{fontSize:this.title.fontSize,textAlign:this.title.textAlign,textBaseline:this.title.textBaseline,fillStyle:this.title.fontColor,strokeStyle:this.title.strokeStyle,lineWidth:this.title.lineWidth,rotation:e}})}else{this._title.resetText(this.title.text)}}}},{key:"_setYaxisWidth",value:function t(){}},{key:"_trimYAxis",value:function t(){var e=this;var n=[];for(var i=0,r=this.dataSection.length;i<r;i++){var a={value:this.dataSection[i],y:-Math.abs(this.getPosOf({val:this.dataSection[i],ind:i})),visible:true,text:""};var o=a.value;if(w._.isFunction(e.label.format)){o=e.label.format.apply(this,[o,i])}if((o===undefined||o===null)&&e.layoutType=="proportion"){o=(0,f.numAddSymbol)(a.value)}a.text=o;n.push(a)}var l=0;for(var s=0,u=n.length;s<u;s++){if(s==0)continue;if(l==0){if(n[s].text==n[l].text){n[s].visible=false}else{l=s}}else{if(n[s].text==n[l].text){n[l].visible=false}l=s}}this.layoutData=n;if(this.trimLayout){this.trimLayout(n)}}},{key:"_getYAxisDisLine",value:function t(){var e=0;var n=2*e;var i=e;i=e+this.yMaxHeight%this.dataSection.length;i=i>n?n:i;return i}},{key:"resetWidth",value:function t(e){var n=this;n.width=e;if(n.align=="left"){n.rulesSprite.context.x=n.width}}},{key:"_widget",value:function t(e){var n=this;!e&&(e={});if(!n.enabled){n.width=0;return}var i=this.layoutData;var r=0;n.maxW=0;for(var a=0,o=i.length;a<o;a++){w._.isFunction(n.filter)&&n.filter({layoutData:i,index:a});var l=i[a];if(!l.visible){continue}var s=l.y;var u=n.label.textAlign;var f=s+(a==0?-3:0)+(a==i.length-1?3:0);if(n.label.rotation==90||n.label.rotation==-90){u="center";if(a==i.length-1){f=s-2;u="right"}if(a==0){f=s}}var c=16;if(l.value==n.origin){c=0}if(l.value<n.origin){c=-16}var d=0;var h;if(n.tickLine.enabled){d=n.align=="left"?-n.tickLine.lineLength-n.tickLine.distance:n.tickLine.distance;h={x:d,y:s,end:{x:n.tickLine.lineLength,y:0},lineWidth:n.tickLine.lineWidth,strokeStyle:n._getStyle(n.tickLine.strokeStyle)}}var p;if(n.label.enabled){var y=n.align=="left"?d-n.label.distance:d+n.tickLine.lineLength+n.label.distance;if(this.isH){y=y+(n.align=="left"?-1:1)*4}p={x:y,y:f,fillStyle:n._getStyle(n.label.fontColor),fontSize:n.label.fontSize,rotation:-Math.abs(n.label.rotation),textAlign:u,textBaseline:"middle",lineHeight:n.label.lineHeight,globalAlpha:1}}var v=300;if(!n.animation||e.resize){v=0}var g=this.rulesSprite.getChildAt(r);if(g){if(g._tickLine&&n.tickLine.enabled){g._tickLine.animate(h,{duration:v,id:g._tickLine.id})}if(g._txt&&n.label.enabled){g._txt.animate(p,{duration:v,id:g._txt.id});g._txt.resetText(l.text)}}else{g=new S["default"].Display.Sprite({id:"_node"+r});if(n.tickLine.enabled){g._tickLine=new k({id:"yAxis_tickline_"+r,context:h});g.addChild(g._tickLine)}if(n.label.enabled){g._txt=new S["default"].Display.Text(l.text,{id:"yAxis_txt_"+r,context:p});g.addChild(g._txt);if(n.label.rotation==90||n.label.rotation==-90){n.maxW=Math.max(n.maxW,g._txt.getTextHeight())}else{n.maxW=Math.max(n.maxW,g._txt.getTextWidth())}if(n.animation&&!e.resize){g._txt.context.y=s+c;g._txt.context.globalAlpha=0;g._txt.animate({y:p.y,globalAlpha:1},{duration:300,id:g._txt.id})}}n.rulesSprite.addChild(g)}r++}if(n.rulesSprite.children.length>=r){for(var o=r,_=n.rulesSprite.children.length;o<_;o++){n.rulesSprite.getChildAt(o).remove();o--,_--}}if(!n.width&&!("width"in n._opt)){n.width=parseInt(n.maxW+n.label.distance);if(n.tickLine.enabled){n.width+=parseInt(n.tickLine.lineLength+n.tickLine.distance)}if(n._title){n.width+=n._title.getTextHeight()}}var b=0;if(n.align=="left"){n.rulesSprite.context.x=n.width;b=n.width}if(n.axisLine.enabled){var x={start:{x:b,y:0},end:{x:b,y:-n.height},lineWidth:n.axisLine.lineWidth,strokeStyle:n._getStyle(n.axisLine.strokeStyle)};if(!this._axisLine){var m=new k({context:x});this.sprite.addChild(m);this._axisLine=m}else{this._axisLine.animate(x)}}if(this._title){this._title.context.y=-this.height/2;this._title.context.x=this._title.getTextHeight()/2;if(this.align=="right"){this._title.context.x=this.width-this._title.getTextHeight()/2}this.sprite.addChild(this._title)}}},{key:"_getStyle",value:function t(e){var n=e;if(w._.isFunction(e)){n=e.call(this,this)}if(!e){n="#999"}return n}}]);return r}(i["default"]);t.default=y}(e,n,o,X,l)});t(c);var d=e(function(t,e){!function(t,e,h){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var o=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function t(e){return typeof e}}else{i=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return i(t)}function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function a(t,e){if(e&&(i(e)==="object"||typeof e==="function")){return e}return s(t)}function l(t){l=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return l(t)}function s(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function f(t,e,n){if(e)u(t.prototype,e);if(n)u(t,n);return t}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)d(t,e)}function d(t,e){d=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return d(t,e)}var p=o["default"].Shapes.Line,y=o["default"].Shapes.Rect,v=function(t){c(i,t);f(i,null,[{key:"defaultProps",value:function t(){return{enabled:{detail:"是否开启grid绘制",default:true},line:{detail:"网格线条配置",propertys:{xDimension:{detail:"一维方向的网格线",propertys:{enabled:{detail:"是否开启",default:true},data:[],lineType:{detail:"线的样式，虚线或者实现",default:"solid"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#f0f0f0"}}},yDimension:{detail:"二维方向的网格线",propertys:{enabled:{detail:"是否开启",default:false},data:[],lineType:{detail:"线的样式，虚线或者实现",default:"solid"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#f0f0f0"}}}}},fill:{detail:"背景色配置",propertys:{xDimension:{detail:"以为方向的背景色块，x方向",propertys:{enabled:{detail:"是否开启",default:false},splitVals:{detail:"从x轴上面用来分割区块的vals",default:null},fillStyle:{detail:"背景颜色",default:null},alpha:{detail:"背景透明度",default:null}}},yDimension:{detail:"以为方向的背景色块，y方向",propertys:{enabled:{detail:"是否开启",default:false},splitVals:{detail:"从x轴上面用来分割区块的vals",default:null},fillStyle:{detail:"背景颜色",default:null},alpha:{detail:"背景透明度",default:null}}}}}}}}]);function i(t,e){var n;r(this,i);n=a(this,l(i).call(this,t,e));h._.extend(true,s(n),(0,h.getDefaultProps)(i.defaultProps()));n.width=0;n.height=0;n._coord=e;n.pos={x:0,y:0};n.sprite=null;n.xAxisSp=null;n.yAxisSp=null;n.init(t);return n}f(i,[{key:"init",value:function t(e){h._.extend(true,this,e);this.sprite=new o["default"].Display.Sprite}},{key:"setX",value:function t(e){this.sprite.context.x=e}},{key:"setY",value:function t(e){this.sprite.context.y=e}},{key:"draw",value:function t(e){h._.extend(true,this,e);this._widget();this.setX(this.pos.x);this.setY(this.pos.y)}},{key:"clean",value:function t(){this.sprite.removeAllChildren()}},{key:"reset",value:function t(e){this.sprite.removeAllChildren();this.draw(e)}},{key:"_widget",value:function t(){var f=this;if(!this.enabled){return}var c=f._coord._yAxis[0];var d=f._coord._xAxis;this.fillSp=new o["default"].Display.Sprite;this.sprite.addChild(this.fillSp);h._.each([f.fill.xDimension,f.fill.yDimension],function(r,a){var t=a?c:d;var e=[];if(r.enabled){if(!r.splitVals){e=t.dataSection}else{e=[t.dataSection[0]].concat(h._.flatten([r.splitVals]));e.push(t.dataSection.slice(-1)[0])}var n=[];if(e.length>=2){var i=[];for(var o=0,l=e.length;o<l;o++){var s=t.getPosOf({val:e[o]});if(!i.length){i.push(s);continue}if(i.length==1){if(s-i[0]<1){continue}else{i.push(s);n.push(i);var u=i[1];i=[u]}}}h._.each(n,function(t,e){var n={fillStyle:f.getProp(r.fillStyle,e,"#000"),fillAlpha:f.getProp(r.alpha,e,.02*(e%2))};if(!a){n.x=t[0];n.y=0;n.width=t[1]-t[0];n.height=-f.height}else{n.x=0;n.y=-t[0];n.width=f.width;n.height=-(t[1]-t[0])}var i=new y({context:n});f.fillSp.addChild(i)})}}});f.xAxisSp=new o["default"].Display.Sprite,f.sprite.addChild(f.xAxisSp);f.yAxisSp=new o["default"].Display.Sprite,f.sprite.addChild(f.yAxisSp);var e=c.layoutData;for(var n=0,i=e.length;n<i;n++){var r=e[n];if(!r.visible)continue;var a=new p({id:"back_line_"+n,context:{y:r.y,lineType:f.getProp(f.line.xDimension.lineType,n,"solid"),lineWidth:f.getProp(f.line.xDimension.lineWidth,n,1),strokeStyle:f.getProp(f.line.xDimension.strokeStyle,n,"#f0f0f0"),visible:true}});if(f.line.xDimension.enabled){f.xAxisSp.addChild(a);a.context.start.x=0;a.context.end.x=f.width}}var e=d.layoutData;for(var n=0,i=e.length;n<i;n++){var r=e[n];var a=new p({context:{x:r.x,start:{x:0,y:0},end:{x:0,y:-f.height},lineType:f.getProp(f.line.yDimension.lineType,n,"solid"),lineWidth:f.getProp(f.line.yDimension.lineWidth,n,1),strokeStyle:f.getProp(f.line.yDimension.strokeStyle,n,"#f0f0f0"),visible:true}});if(f.line.yDimension.enabled){f.yAxisSp.addChild(a)}}}},{key:"getProp",value:function t(e,n,i){var r=i;if(e!=null&&e!=undefined){if(h._.isString(e)||h._.isNumber(e)){r=e}if(h._.isFunction(e)){r=e.apply(this,[n,i])}if(h._.isArray(e)){r=e[n]}}return r}}]);return i}(h.event.Dispatcher);t.default=v}(e,n,X)});t(d),t(e(function(t,e){!function(t,e,n,i,r,a,d){Object.defineProperty(t,"__esModule",{value:true});var o=c(e),l=c(n),s=c(i),u=c(r),f=c(a);function c(t){return t&&t.__esModule?t:{default:t}}function h(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){h=function t(e){return typeof e}}else{h=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return h(t)}function p(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function y(t,e){if(e&&(h(e)==="object"||typeof e==="function")){return e}return g(t)}function v(t){v=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return v(t)}function g(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function b(t,e,n){if(e)_(t.prototype,e);if(n)_(t,n);return t}function x(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)m(t,e)}function m(t,e){m=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return m(t,e)}var w=function(t){x(i,t);b(i,null,[{key:"defaultProps",value:function t(){return{horizontal:{detail:"横向翻转坐标系",documentation:"横向翻转坐标系",insertText:"horizontal: ",default:false,values:[true,false]},_props:{xAxis:s["default"],yAxis:u["default"],grid:f["default"]}}}}]);function i(t,e){var n;p(this,i);n=y(this,v(i).call(this,t,e));d._.extend(true,g(n),(0,d.getDefaultProps)(i.defaultProps()),n.setDefaultOpt(t,e));n.type="rect";n._xAxis=null;n._yAxis=[];n._yAxisLeft=null;n._yAxisRight=null;n._grid=null;n.init(t);return n}b(i,[{key:"setDefaultOpt",value:function t(e,n){var i={field:this.dataFrame.fields[0],xAxis:{layoutType:"rule",posParseToInt:false},grid:{}};d._.extend(true,i,e);if(i.yAxis){var r=[];d._.each(d._.flatten([i.yAxis]),function(t){r.push(d._.clone(t))});i.yAxis=r}else{i.yAxis=[]}var a=d._.flatten([n._opt.graphs]);for(var o=0;o<a.length;o++){var l=a[o];if(l.type=="bar"){i.xAxis.layoutType="peak"}if(l.field){var s="left";if(l.yAxisAlign=="right"){s="right"}var u=null;u=d._.find(i.yAxis,function(t,e){return t.align==s||!t.align&&e==(s=="left"?0:1)});if(!u){u={align:s,field:[]};i.yAxis.push(u)}else{if(!u.align){u.align=s}}if(!u.field){u.field=[]}else{if(!d._.isArray(u.field)){u.field=[u.field]}}if(d._.isArray(l.field)){u.field=u.field.concat(l.field)}else{u.field.push(l.field)}}}var f=[],c=[];d._.each(i.yAxis,function(t,e){if(!t.align){t.align=e?"right":"left"}if(t.align=="left"){f.push(t)}else{c.push(t)}});i.yAxis=f.concat(c);if(i.horizontal){i.xAxis.isH=true;d._.each(i.yAxis,function(t){t.isH=true})}if("enabled"in i){d._.extend(true,i.xAxis,{enabled:i.enabled});d._.each(i.yAxis,function(t){d._.extend(true,t,{enabled:i.enabled})});i.grid.enabled=i.enabled}if("animation"in i){d._.extend(true,i.xAxis,{animation:i.animation});d._.each(i.yAxis,function(t){d._.extend(true,t,{animation:i.animation})});i.grid.animation=i.animation}return i}},{key:"init",value:function t(e){this._initModules();this.fieldsMap=this.setFieldsMap({type:"yAxis"})}},{key:"resetData",value:function t(e,n){var i=this;this.dataFrame=e;var r=this.getAxisDataFrame(this.xAxis.field);this._xAxis.resetData(r);d._.each(this._yAxis,function(t){var e=i.getAxisDataFrame(t.field);t.resetData(e)});this._resetXY_axisLine_pos();var a=this._yAxisLeft||this._yAxisRight;this._grid.reset({animation:false})}},{key:"draw",value:function t(e){!e&&(e={});var n=this.app.padding;var i=e.height||this.app.height;var r=e.width||this.app.width;if(this.horizontal){var a=r;r=i;i=a}var o=i-this._xAxis.height-n.bottom;var l=0;var s=0;if(this._yAxisLeft){this._yAxisLeft.draw({pos:{x:n.left,y:o},yMaxHeight:o-n.top,resize:e.resize});l=this._yAxisLeft.width}if(this._yAxisRight){this._yAxisRight.draw({pos:{x:0,y:o},yMaxHeight:o-n.top,resize:e.resize});s=this._yAxisRight.width}this._xAxis.draw({pos:{x:n.left+l,y:o},width:r-l-n.left-s-n.right,resize:e.resize});this._yAxisRight&&this._yAxisRight.setX(l+n.left+this._xAxis.width);this._grid.draw({width:this._xAxis.width,height:this._yAxis[0].height,pos:{x:l+n.left,y:o},resize:e.resize});this.width=this._xAxis.width;this.height=this._yAxis[0].height;this.origin.x=l+n.left;this.origin.y=o;this._initInduce();this._resetXY_axisLine_pos();if(this.horizontal){this._horizontal({w:r,h:i})}}},{key:"_resetXY_axisLine_pos",value:function t(){var n=this;var e;if(this._xAxis.enabled){if(this._xAxis.axisLine.position=="center"){e=-this._yAxis[0].height/2}if(this._xAxis.axisLine.position=="center"){e=-this._yAxis[0].height/2}if(d._.isNumber(this._xAxis.axisLine.position)){e=-this._yAxis[0].getPosOfVal(this._xAxis.axisLine.position)}if(e!==undefined){this._xAxis._axisLine.context.y=e}}d._.each(this._yAxis,function(t){var e;if(t.enabled){if(t.axisLine.position=="center"){e=n._xAxis.width/2}if(d._.isNumber(t.axisLine.position)){e=n._xAxis.getPosOfVal(t.axisLine.position)}if(e!==undefined){t._axisLine.context.x=e}}})}},{key:"getSizeAndOrigin",value:function t(){var e={width:this.width,height:this.height,origin:this.origin};if(this.horizontal){var n=this.app.padding;var i=n.bottom;var r=n.right;e={width:this._yAxis[0].height,height:this._xAxis.width,origin:{x:this._xAxis.height+i,y:this._yAxis[0].height+r}}}return e}},{key:"_initModules",value:function t(){this._grid=new f["default"](this.grid,this);this.sprite.addChild(this._grid.sprite);var e=this.getAxisDataFrame(this.xAxis.field);this._xAxis=new s["default"](this.xAxis,e,this);this._axiss.push(this._xAxis);this.sprite.addChild(this._xAxis.sprite);var n=this.yAxis;var i,r;var a,o;if(!d._.isArray(n)){n=[n]}i=d._.find(n,function(t){return t.align=="left"});if(i){a=this.getAxisDataFrame(i.field);this._yAxisLeft=new u["default"](i,a,this);this._yAxisLeft.axis=i;this.sprite.addChild(this._yAxisLeft.sprite);this._yAxis.push(this._yAxisLeft);this._axiss.push(this._yAxisLeft)}r=d._.find(n,function(t){return t.align=="right"});if(r){o=this.getAxisDataFrame(r.field);this._yAxisRight=new u["default"](r,o,this);this._yAxisRight.axis=r;this.sprite.addChild(this._yAxisRight.sprite);this._yAxis.push(this._yAxisRight);this._axiss.push(this._yAxisRight)}}},{key:"_horizontal",value:function t(e){var n=this;var i=e.h;var r=e.w;d._.each([n.sprite.context],function(t){t.x+=(i-r)/2;t.y+=(r-i)/2;var e={x:r/2,y:i/2};t.rotation=90;t.rotateOrigin=e})}},{key:"changeFieldEnabled",value:function t(e){this.setFieldEnabled(e);var n=this.getFieldMapOf(e);var i=n.yAxis||n.rAxis;var r=this.getEnabledFieldsOf(i);i.resetData(this.getAxisDataFrame(r));this._resetXY_axisLine_pos();this._grid.reset({animation:false})}},{key:"_initInduce",value:function t(){var e=this;e.induce=new l["default"].Shapes.Rect({id:"induce",context:{x:e.origin.x,y:e.origin.y-e.height,width:e.width,height:e.height,fillStyle:"#000000",globalAlpha:0,cursor:"pointer"}});if(!e.sprite.getChildById("induce")){e.sprite.addChild(e.induce)}e.induce.on(d.event.types.get(),function(t){e.fire(t.type,t);e.app.fire(t.type,t)})}},{key:"getTipsInfoHandler",value:function t(e){var n=e.point.x;if(e.target!==this.induce){n=this.induce.globalToLocal(e.target.localToGlobal(e.point)).x}var i=this._xAxis.getNodeInfoOfX(n);var r={xAxis:i,dimension_1:i,title:i.text,iNode:i.ind,nodes:[]};if(e.eventInfo){d._.extend(true,r,e.eventInfo);if(r.xAxis){e.eventInfo.xAxis=i}}return r}},{key:"getPoint",value:function t(e){var n={x:0,y:undefined};var i={type:"xAxis"};var r={type:"yAxis",field:e.field};var a=this.getAxis(i);var o=this.getAxis(r);var l=e.iNode||0;var s=e.value;if(!("x"in s)){s.x=d._.flatten(a.dataOrg)[l]}n.x=a.getPosOf({ind:l,val:s.x});var u=s.y;if(!isNaN(u)&&u!==null&&u!==undefined&&u!==""){n.y=-o.getPosOfVal(u)}else{n.y=undefined}return{pos:n,value:s}}},{key:"getAxisOriginPoint",value:function t(e){var n=this.getAxis(e);return{pos:-n.originPos,value:n.origin}}},{key:"getOriginPos",value:function t(e){var n={type:"xAxis"};var i={type:"yAxis",field:e.field};var r=this.getAxis(n);var a=this.getAxis(i);return{x:r.originPos,y:-a.originPos}}}]);return i}(o["default"]);d.global.registerComponent(w,"coord","rect"),t["default"]=w}(e,a,n,u,c,d,X)}));var h=e(function(t,e){!function(t,e,s){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){r=function t(e){return typeof e}}else{r=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return r(t)}function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(e&&(r(e)==="object"||typeof e==="function")){return e}return u(t)}function l(t){l=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return l(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}var p=n["default"].Shapes.Line,y=n["default"].Shapes.Circle,v=n["default"].Shapes.Polygon,g=function(t){d(i,t);c(i,null,[{key:"defaultProps",value:function t(){return{enabled:{detail:"是否开启grid",default:false},ring:{detail:"环背景线",propertys:{shapeType:{detail:"线的图形样式，默认poly，可选circle",default:"poly"},lineType:{detail:"线条样式，sold实线，dashed虚线",default:"sold"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#e5e5e5"},fillStyle:{detail:"环填充色,支持函数配置",default:null},fillAlpha:{detail:"环填充的透明度",default:.5}}},ray:{detail:"射线",propertys:{enabled:{detail:"是否开启",default:true},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#e5e5e5"}}}}}}]);function i(t,e){var n;a(this,i);n=o(this,l(i).call(this,t,e));n.width=0;n.height=0;n.app=e;n.pos={x:0,y:0};n.dataSection=[];n.sprite=null;n.induce=null;s._.extend(true,u(n),(0,s.getDefaultProps)(i.defaultProps()),t);n.init(t);return n}c(i,[{key:"init",value:function t(){this.sprite=new n["default"].Display.Sprite}},{key:"setX",value:function t(e){this.sprite.context.x=e}},{key:"setY",value:function t(e){this.sprite.context.y=e}},{key:"draw",value:function t(e){s._.extend(true,this,e);this._widget();this.setX(this.pos.x);this.setY(this.pos.y)}},{key:"clean",value:function t(){this.sprite.removeAllChildren()}},{key:"reset",value:function t(e){}},{key:"_widget",value:function t(){var l=this;s._.each(this.dataSection,function(t,e){if(t){var n=l.app.getROfNum(t);var i=l.app.getPointsOfR(n);var r={lineWidth:l.ring.lineWidth,strokeStyle:l._getStyle(l.ring.strokeStyle,e-1),fillStyle:l._getStyle(l.ring.fillStyle,e-1),fillAlpha:l.ring.fillAlpha};var a;var o=y;if(l.ring.shapeType=="circle"){r.r=n;a=new o({context:r})}else{r.pointList=[];s._.each(i,function(t,e){if(e<i.length){r.pointList.push([t.x,t.y])}});o=v;a=new o({context:r})}l.sprite.addChildAt(a,0);if(e==l.dataSection.length-1){r.fillAlpha=0;r.fillStyle="#ffffff";l.induce=new o({context:r});l.sprite.addChild(l.induce)}s._.each(i,function(t){var e=new p({context:{end:t,lineWidth:l.ring.lineWidth,strokeStyle:l.ring.strokeStyle}});l.sprite.addChild(e)})}})}},{key:"_getStyle",value:function t(e,n){if(s._.isArray(e)){return e[n%e.length]}return e}}]);return i}(s.event.Dispatcher);t.default=g}(e,n,X)});t(h),t(e(function(t,e){!function(t,e,n,i,O){Object.defineProperty(t,"__esModule",{value:true});var r=o(e),u=o(n),a=o(i);function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return d(t)}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function p(t,e,n){if(e)h(t.prototype,e);if(n)h(t,n);return t}function y(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)v(t,e)}function v(t,e){v=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return v(t,e)}var g=function(t){y(i,t);p(i,null,[{key:"defaultProps",value:function t(){return{allAngle:{detail:"坐标系总角度",documentation:"",default:360,values:[0,360]},startAngle:{detail:"坐标系起始角度",documentation:"",default:0,values:[0,360]},radius:{detail:"坐标系的最大半径",documentation:"默认自动计算view的高宽，如果squareRange==true，则会取Math.min(width,height)",default:"auto",values:null},aAxis:{detail:"角度轴",documentation:"类似直角坐标系中的x轴",propertys:{data:[],angleList:[],layoutData:[],field:{detail:"数据字段",documentation:"",default:""},layoutType:{detail:"布局类型",documentation:"",default:"proportion"},beginAngle:{detail:"起始角度",documentation:"",default:-90},enabled:{detail:"是否显示",documentation:"",default:false},label:{detail:"文本配置",documentation:"",propertys:{enabled:{detail:"是否显示",documentation:"",default:true},format:{detail:"label的格式化处理函数",documentation:"",default:null},fontColor:{detail:"label颜色",documentation:"",default:"#666"}}}}},rAxis:{detail:"半径维度轴",documentation:"类似直角坐标系中的y轴维度",propertys:{field:{detail:"数据字段",documentation:"",default:""},dataSection:{detail:"轴的显示数据",documentation:"默认根据源数据中自动计算，用户也可以手动指定",default:false},enabled:{detail:"是否显示",documentation:"",default:false}}}}}}]);function i(t,e){var n;s(this,i);n=f(this,c(i).call(this,t,e));n.type="polar";O._.extend(true,d(n),(0,O.getDefaultProps)(i.defaultProps()),n.setDefaultOpt(t,e));n.init(t);return n}p(i,[{key:"setDefaultOpt",value:function t(e,n){var i={rAxis:{field:[]},aAxis:{},grid:{}};O._.extend(true,i,e);if(!O._.isArray(i.rAxis.field)){i.rAxis.field=[i.rAxis.field]}var r=O._.flatten([n._opt.graphs]);var a=[];O._.each(r,function(t){if(t.field){var e=t.field;if(!O._.isArray(e)){e=[e]}a=a.concat(e)}});i.rAxis.field=i.rAxis.field.concat(a);if(e.aAxis&&e.aAxis.field){i.aAxis.enabled=true}else{i.grid.enabled=false}return i}},{key:"init",value:function t(e){this._initModules();this.fieldsMap=this.setFieldsMap({type:"rAxis"})}},{key:"_initModules",value:function t(){if(this.grid.enabled){this._grid=new a["default"](this.grid,this);this.sprite.addChild(this._grid.sprite)}if(this.aAxis.enabled&&this.grid.enabled){this._aAxisScaleSp=new u["default"].Display.Sprite({id:"aAxisScaleSp"});this.sprite.addChild(this._aAxisScaleSp)}this._axiss.push({type:"rAxis",field:this.rAxis.field})}},{key:"draw",value:function t(e){this._computeAttr();this.rAxis.dataSection=this._getRDataSection();this.aAxis.data=this.app.dataFrame.getFieldData(this.aAxis.field);this._setAAxisAngleList();if(this.grid.enabled){this._grid.draw({pos:this.origin,width:this.width,height:this.height,dataSection:this.rAxis.dataSection},this);if(this.aAxis.enabled){this._drawAAxis()}this._initInduce()}}},{key:"resetData",value:function t(e,n){}},{key:"changeFieldEnabled",value:function t(e){this.setFieldEnabled(e);this.rAxis.dataSection=this._getRDataSection();this.aAxis.data=this.app.dataFrame.getFieldData(this.aAxis.field);if(this.grid.enabled){this._grid.reset({dataSection:this.rAxis.dataSection},this)}}},{key:"_getRDataSection",value:function t(){var e=this;if(this._opt.rAxis&&this._opt.rAxis.dataSection){return this._opt.rAxis.dataSection}var n=[];O._.each(O._.flatten([e.rAxis.field]),function(t){n=n.concat(e.app.dataFrame.getFieldData(t))});n.push(0);return O.dataSection.section(n,3)}},{key:"_computeAttr",value:function t(){var e;var n=1;var i=this.app.padding;var r=this.app.width;var a=this.app.height;if(!("width"in this._opt)){this.width=r-i.left-i.right}if(!("height"in this._opt)){this.height=a-i.top-i.bottom}var o=this.width;var l=this.height;var s=0,u=0,f=0,c=0;var d=[this.startAngle];for(var h=0,p=parseInt((this.startAngle+this.allAngle)/90)-parseInt(this.startAngle/90);h<=p;h++){var y=parseInt(this.startAngle/90)*90+h*90;if(O._.indexOf(d,y)==-1&&y>d.slice(-1)[0]){d.push(y)}}var v=this.startAngle+this.allAngle;if(O._.indexOf(d,v)==-1){d.push(v)}O._.each(d,function(t){t=t%360;var e=Math.sin(t*Math.PI/180);if(t==180){e=0}var n=Math.cos(t*Math.PI/180);if(t==270||t==90){n=0}s=Math.min(s,e);u=Math.max(u,e);f=Math.min(f,n);c=Math.max(c,n)});n=(Math.abs(f)+Math.abs(c))/(Math.abs(s)+Math.abs(u));var g=Math.min(o,l);if(n==1){o=l=g}else{var _=l*n;var b=o/n;if(_>o){l=b}else{o=_}}var x=i.left+(this.width-o)/2;var m=i.top+(this.height-l)/2;this.origin={x:x+o*(f/(f-c)),y:m+l*(s/(s-u))};var w={top:this.origin.y-m,right:x+o-this.origin.x,bottom:m+l-this.origin.y,left:this.origin.x-x};var S=[];var k=[["right","bottom"],["bottom","left"],["left","top"],["top","right"]];O._.each(d,function(t){t=t%360;var e=parseInt(t/90);var n=k[e];if(t%90==0){n=[["right","bottom","left","top"][e]]}var i=Math.sin(t*Math.PI/180);if(t==180){i=0}var r=Math.cos(t*Math.PI/180);if(t==270||t==90){r=0}O._.each(n,function(t){var e;if(t=="top"||t=="bottom"){if(i){e=Math.abs(w[t]/i)}}if(t=="right"||t=="left"){if(r){e=Math.abs(w[t]/r)}}S.push(e)})});e=O._.min(S);if(this.aAxis.label.enabled){e-=20}this.radius=e}},{key:"getMaxDisToViewOfOrigin",value:function t(){var e=this.origin;var n=0;var i=this.app.padding;var r=this.app.width;var a=this.app.height;var o=r-i.left-i.right;var l=a-i.top-i.bottom;var s=[e.x-i.left,o+i.left-e.x,e.y-i.top,l+i.top-e.y];n=O._.max(s);return n}},{key:"getRadiansAtR",value:function t(e,n,i){var r=this;if(n==undefined){n=this.width}if(i==undefined){i=this.height}var a=[];var o=this.app.padding;var l={x:this.origin.x-o.left-(this.width-n)/2,y:this.origin.y-o.top-(this.height-i)/2};var s,u;var f=l.y;if(f<e){s=Math.sqrt(Math.pow(e,2)-Math.pow(f,2));a=a.concat(this._filterPointsInRect([{x:-s,y:-f},{x:s,y:-f}],l,n,i))}var c=n-l.x;if(c<e){u=Math.sqrt(Math.pow(e,2)-Math.pow(c,2));a=a.concat(this._filterPointsInRect([{x:c,y:-u},{x:c,y:u}],l,n,i))}var d=i-l.y;if(d<e){s=Math.sqrt(Math.pow(e,2)-Math.pow(d,2));a=a.concat(this._filterPointsInRect([{x:s,y:d},{x:-s,y:d}],l,n,i))}var h=l.x;if(h<e){u=Math.sqrt(Math.pow(e,2)-Math.pow(h,2));a=a.concat(this._filterPointsInRect([{x:-h,y:u},{x:-h,y:-u}],l,n,i))}var p=[];if(a.length==0){p.push([{point:{x:e,y:0},radian:0},{point:{x:e,y:0},radian:Math.PI*2}])}else{O._.each(a,function(t,e){var n=e==a.length-1?0:e+1;var i=a.slice(n,n+1)[0];p.push([{point:t,radian:r.getRadianInPoint(t)},{point:i,radian:r.getRadianInPoint(i)}])})}for(var y=0,v=p.length;y<v;y++){if(!this._checkArcInRect(p[y],e,l,n,i)){p.splice(y,1);y--,v--}}return p}},{key:"_filterPointsInRect",value:function t(e,n,i,r){for(var a=0,o=e.length;a<o;a++){if(!this._checkPointInRect(e[a],n,i,r)){e.splice(a,1);a--,o--}}return e}},{key:"_checkPointInRect",value:function t(e,n,i,r){var a={x:e.x+n.x,y:e.y+n.y};return!(a.x<0||a.x>i||a.y<0||a.y>r)}},{key:"_checkArcInRect",value:function t(e,n,i,r,a){var o=e[0];var l=e[1];var s=l.radian-o.radian;if(l.radian<o.radian){s=Math.PI*2+l.radian-o.radian}var u=(o.radian+s/2)%(Math.PI*2);return this._checkPointInRect(this.getPointInRadianOfR(u,n),i,r,a)}},{key:"getRadianInPoint",value:function t(e){var n=Math.PI*2;return(Math.atan2(e.y,e.x)+n)%n}},{key:"getPointInRadianOfR",value:function t(e,n){var i=Math.PI;var r=Math.cos(e)*n;if(e==i/2||e==i*3/2){r=0}var a=Math.sin(e)*n;if(e%i==0){a=0}return{x:r,y:a}}},{key:"getROfNum",value:function t(e){var n=0;var i=O._.max(this.rAxis.dataSection);var r=0;var a=this.radius;n=a*((e-r)/(i-r));return n}},{key:"getPointsOfR",value:function t(i){var r=this;var a=[];O._.each(r.aAxis.angleList,function(t){var e=Math.PI*t/180;var n=r.getPointInRadianOfR(e,i);a.push(n)});return a}},{key:"_setAAxisAngleList",value:function t(){var n=this;n.aAxis.angleList=[];var e=this.aAxis.data;if(this.aAxis.layoutType=="proportion"){e=[];for(var i=0,r=this.aAxis.data.length;i<r;i++){e.push(i)}}var a=this.allAngle;var o=0;var l=O._.max(e);if(this.aAxis.layoutType=="proportion"){l++}O._.each(e,function(t){var e=(a*((t-o)/(l-o))+n.aAxis.beginAngle+a)%a;n.aAxis.angleList.push(e)})}},{key:"_drawAAxis",value:function t(){var l=this;var e=l.getROfNum(O._.max(this.rAxis.dataSection));var s=l.getPointsOfR(e+3);l._aAxisScaleSp.context.x=this.origin.x;l._aAxisScaleSp.context.y=this.origin.y;O._.each(this.aAxis.data,function(t,e){var n=s[e];var i=O._.isFunction(l.aAxis.label.format)?l.aAxis.label.format(t):t;var r={value:t,text:i,iNode:e,field:l.aAxis.field};var a=l._getProp(l.aAxis.label.enabled,r);if(!a)return;var o={x:n.x,y:n.y,fillStyle:l._getProp(l.aAxis.label.fontColor,r)};O._.extend(o,l._getTextAlignForPoint(Math.atan2(n.y,n.x)));l._aAxisScaleSp.addChild(new u["default"].Display.Text(i,{context:o}));l.aAxis.layoutData.push(i)})}},{key:"_getTextAlignForPoint",value:function t(e){var n="center";var i="bottom";if(e>-Math.PI/2&&e<0){n="left";i="bottom"}if(e==0){n="left";i="middle"}if(e>0&&e<Math.PI/2){n="left";i="top"}if(e==Math.PI/2){n="center";i="top"}if(e>Math.PI/2&&e<Math.PI){n="right";i="top"}if(e==Math.PI||e==-Math.PI){n="right";i="middle"}if(e>-Math.PI&&e<-Math.PI/2){n="right";i="bottom"}return{textAlign:n,textBaseline:i}}},{key:"getAxisNodeOf",value:function t(e){var n=this;var i=n.getAAxisIndOf(e);if(i===undefined){return}var r={ind:i,value:n.aAxis.data[i],text:n.aAxis.layoutData[i],angle:n.aAxis.angleList[i]};return r}},{key:"getAAxisIndOf",value:function t(e){var r=this;if(e.aAxisInd!==undefined){return e.aAxisInd}if(!r.aAxis.angleList.length){return}var n=e.point;var a=(r.getRadianInPoint(n)*180/Math.PI-r.aAxis.beginAngle)%r.allAngle;var i=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));var o=0;var l=r.aAxis.angleList.length;O._.each(r.aAxis.angleList,function(t,e){t=(t-r.aAxis.beginAngle)%r.allAngle;var n=e+1;var i=(r.aAxis.angleList[n]-r.aAxis.beginAngle)%r.allAngle;if(e==l-1){n=0;i=r.allAngle}if(a>=t&&a<=i){if(a-t<i-a){o=e}else{o=n}return false}});return o}},{key:"_initInduce",value:function t(){var e=this;e.induce=this._grid.induce;e.induce&&e.induce.on(O.event.types.get(),function(t){e.fire(t.type,t);e.app.fire(t.type,t)})}},{key:"getTipsInfoHandler",value:function t(e){var n=this;var i=n.getAxisNodeOf(e);var r={nodes:[]};if(i){r.aAxis=i;r.title=i.text;r.iNode=i.ind}if(e.eventInfo){r=O._.extend(r,e.eventInfo)}return r}},{key:"getPoint",value:function t(e){}},{key:"getSizeAndOrigin",value:function t(){}},{key:"_getProp",value:function t(e,n,i){var r=e;if(O._.isFunction(e)){r=e.apply(this,[n])}if(!r&&i){r=i}return r}}]);return i}(r["default"]);O.global.registerComponent(g,"coord","polar"),t["default"]=g}(e,a,n,h,X)}));var p=e(function(t,e){!function(t,e,n,l){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var i=r(e),a=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=a["default"].AnimationFrame,g=function(t){p(r,t);h(r,null,[{key:"defaultProps",value:function t(){return{type:{detail:"绘图组件",default:"",insertText:"type: ",values:["bar","line","pie","scat"]},animation:{detail:"是否开启入场动画",default:true},aniDuration:{detail:"动画时长",default:500}}}}]);function r(t,e){var n;s(this,r);n=u(this,f(r).call(this,t,e));l._.extend(true,c(n),(0,l.getDefaultProps)(r.defaultProps()));n.name="graphs";n._opt=t||{};n.app=e;n.ctx=e.stage.canvas.getContext("2d");n.dataFrame=e.dataFrame;n.data=null;n.width=0;n.height=0;n.origin={x:0,y:0};n.inited=false;n.sprite=new a["default"].Display.Sprite({name:"graphs_"+t.type});n.app.graphsSprite.addChild(n.sprite);n._growTween=null;var i=c(n);n.sprite.on("destroy",function(){if(i._growTween){v.destroyTween(i._growTween);i._growTween=null}});return n}h(r,[{key:"tipsPointerOf",value:function t(e){}},{key:"tipsPointerHideOf",value:function t(e){}},{key:"focusAt",value:function t(e,n){}},{key:"unfocusAt",value:function t(e,n){}},{key:"selectAt",value:function t(e,n){}},{key:"unselectAt",value:function t(e,n){}},{key:"getSelectedList",value:function t(){return[]}},{key:"getSelectedRowList",value:function t(){return[]}},{key:"hide",value:function t(e){}},{key:"show",value:function t(e){}},{key:"getLegendData",value:function t(){}},{key:"triggerEvent",value:function t(e){var n=e.eventInfo.trigger||this;var i=n["on"+e.type];if(i&&l._.isFunction(i)){if(e.eventInfo&&e.eventInfo.nodes&&e.eventInfo.nodes.length){if(e.eventInfo.nodes.length==1){i.apply(this,[e,e.eventInfo.nodes[0]])}else{i.apply(this,[e,e.eventInfo.nodes])}}else{i.apply(this,arguments)}}}},{key:"grow",value:function t(n,e){!e&&(e={});var i=this;var r=this.aniDuration;if(!this.animation){r=0}var a=0;var o=1;if("from"in e)a=e.from;if("to"in e)o=e.to;this._growTween=v.registTween({from:{process:a},to:{process:o},duration:r,onUpdate:function t(e){l._.isFunction(n)&&n(e.process)},onComplete:function t(e){this._growTween=null;i.fire("complete")}})}}]);return r}(i["default"]);t.default=g}(e,i,n,X)});t(p),t(e(function(t,e){!function(t,e,E,n,I){Object.defineProperty(t,"__esModule",{value:true});var D=r(e),i=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return u(t)}function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}var p=D["default"].AnimationFrame,L=D["default"].Shapes.Rect,y=function(t){d(i,t);c(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段设置",documentation:"支持二维数组格式的设置，一维方向就是横向分组，二维方向就是纵向的堆叠",default:null},yAxisAlign:{detail:"绘制在哪根y轴上面",default:"left"},absolute:{detail:"是否脱离graphs的位置计算",documentation:"                    trimGraphs的时候是否需要和其他的 bar graphs一起并排计算，                    true的话这个就会和别的重叠,                    和css中得absolute概念一致，脱离文档流的绝对定位",default:false},proportion:{detail:"比例柱状图",default:false},node:{detail:"单个数据对应的图形设置",propertys:{width:{detail:"bar的宽度",default:0},maxWidth:{detail:"最大width",default:50},minWidth:{detail:"最小width",default:1},minHeight:{detail:"最小height",default:0},radius:{detail:"叶子节点的圆角半径",default:3},fillStyle:{detail:"bar填充色",default:null},fillAlpha:{detail:"bar透明度",default:.95},xDis:{detail:"单分组内bar之间的间隔",default:null},filter:{detail:"bar过滤处理器",default:null}}},label:{detail:"文本设置",propertys:{enabled:{detail:"是否开启",default:false},fontColor:{detail:"文本颜色",default:null,documentation:"如果有设置text.fontColor那么优先使用fontColor"},fontSize:{detail:"文本字体大小",default:12},format:{detail:"文本格式化处理函数",default:null},lineWidth:{detail:"文本描边线宽",default:0},strokeStyle:{detail:"文本描边颜色",default:null},rotation:{detail:"旋转角度",default:0},textAlign:{detail:"水平对齐方式",documentation:"left center right",default:"center"},verticalAlign:{detail:"垂直基线对齐方式",documentation:"top middle bottom",default:"bottom"},position:{detail:"文本布局位置",documentation:"top,topRight,right,rightBottom,bottom,bottomLeft,left,leftTop,center",default:"top"},offsetX:{detail:"x偏移量",default:0},offsetY:{detail:"y偏移量",default:0}}},select:{detail:"分组选中",documentation:"                    分组的选中，不是选中具体的某个node，这里的选中靠groupRegion来表现出来,                    目前只有在第一个graphs bar 上配置有效",propertys:{enabled:{detail:"是否开启",default:false},inds:{detail:"选中的分组索引集合",documentation:"选中的列的索引集合,注意，这里的ind不是当前视图的ind，而是加上了dataFrame.range.start的全局ind",default:[]},width:{detail:"选中态背景宽度",default:1},alpha:{detail:"选中态背景透明度",default:.2},fillStyle:{detail:"选中态背景填充色",default:null},triggerEventType:{detail:"触发选中效果的事件",default:"click"}}}}}}]);function i(t,e){var n;o(this,i);n=l(this,s(i).call(this,t,e));n.type="bar";n.enabledField=null;n.node={_width:0,_count:0};n.select={_fillStyle:"#092848"};n._barsLen=0;n.txtsSp=null;I._.extend(true,u(n),(0,I.getDefaultProps)(i.defaultProps()),t);n.init();return n}c(i,[{key:"init",value:function t(){this.barsSp=new D["default"].Display.Sprite({id:"barsSp"});this.txtsSp=new D["default"].Display.Sprite({id:"txtsSp",context:{}})}},{key:"getNodesAt",value:function t(i){var r=this.data;var a=[];I._.each(this.enabledField,function(t,e){if(I._.isArray(t)){I._.each(t,function(t,e){var n=r[t]?r[t][i]:null;n&&a.push(n)})}else{var n=r[t]?r[t][i]:null;n&&a.push(n)}});return a}},{key:"_getTargetField",value:function t(e,n,i,r){if(I._.isString(r)){return r}else if(I._.isArray(r)){var a=r[e];if(I._.isString(a)){return a}else if(I._.isArray(a)){return a[n]}}}},{key:"_getColor",value:function t(e,n){var i=this;var r=n.field;var a=I._.flatten([this.field]);var o=this.app.getComponent({name:"coord"}).getFieldMapOf(r);if(I._.isFunction(e)){e=e.apply(this,[n])}if(I._.isString(e)){e=e}if(I._.isArray(e)){e=I._.flatten(e)[I._.indexOf(a,r)]}if(e&&e.lineargradient&&e.lineargradient.length){if(n.rectHeight!=0){var l=i.ctx.createLinearGradient(n.x,n.fromY+n.rectHeight,n.x,n.fromY);I._.each(e.lineargradient,function(t){l.addColorStop(t.position,t.color)});e=l}else{e=e.lineargradient[parseInt(e.lineargradient.length/2)].color}}if(e===undefined||e===null){e=o.color}return e}},{key:"_getBarWidth",value:function t(e,n){if(this.node.width){if(I._.isFunction(this.node.width)){this.node._width=this.node.width(e)}else{this.node._width=this.node.width}}else{this.node._width=n-Math.max(1,n*.2);if(this.node._width==1&&e>3){this.node._width=e-2}}this.node._width<1&&(this.node._width=1);this.node._width=parseInt(this.node._width);if(this.node._width>this.node.maxWidth){this.node._width=this.node.maxWidth}return this.node._width}},{key:"show",value:function t(e){this.draw()}},{key:"hide",value:function t(i){I._.each(this.barsSp.children,function(t,e){var n=t.getChildById("bar_"+e+"_"+i);n&&n.destroy()});I._.each(this.txtsSp.children,function(t,e){var n=t.getChildById("text_"+e+"_"+i);n&&n.destroy()});this.draw()}},{key:"resetData",value:function t(e,n){this.dataFrame=e;this.draw()}},{key:"clean",value:function t(){this.data={};this.barsSp.removeAllChildren();if(this.label.enabled){this.txtsSp.removeAllChildren()}}},{key:"draw",value:function t(e){!e&&(e={});I._.extend(true,this,e);var O=this;var P=O.animation&&!e.resize;this.data=this._trimGraphs();if(this.enabledField.length==0||this._dataLen==0){O._preDataLen=0;this.clean();return}var A=O._preDataLen;var C=this.enabledField.length;var M=0;O.node._count=0;var j=0;var T=O.app.getComponents({name:"graphs",type:"bar"});I._.each(T,function(t,e){if(t==O){j=e}});I._.each(this.enabledField,function(t,e){t=I._.flatten([t]);var n=t.length;if(n==0)return;M=O.width/O._dataLen;O._barsLen=O._dataLen*C;function i(t){if(O.select.enabled&&t.type==O.select.triggerEventType){var e=O.dataFrame.range.start+this.iNode;if(I._.indexOf(O.select.inds,e)>-1){I._.each(T,function(t){t.unselectAt(e)})}else{I._.each(T,function(t){t.selectAt(e)})}}}for(var r=0;r<O._dataLen;r++){var a=null;if(e==0){if(r<=A-1){a=O.barsSp.getChildById("barGroup_"+r)}else{a=new D["default"].Display.Sprite({id:"barGroup_"+r});O.barsSp.addChild(a);a.iNode=r}if(!j){var o;var l=M*O.select.width;if(O.select.width>1){l=O.select.width}if(r<=A-1){o=a.getChildById("group_region_"+r);o.context.width=l;o.context.x=M*r+(M-l)/2;o.context.globalAlpha=I._.indexOf(O.select.inds,O.dataFrame.range.start+r)>-1?O.select.alpha:0}else{o=new L({id:"group_region_"+r,pointChkPriority:false,hoverClone:false,xyToInt:false,context:{x:M*r+(M-l)/2,y:-O.height,width:l,height:O.height,fillStyle:O._getGroupRegionStyle(r),globalAlpha:I._.indexOf(O.select.inds,O.dataFrame.range.start+r)>-1?O.select.alpha:0}});a.addChild(o);o.iNode=r;o.on(I.event.types.get(),function(t){t.eventInfo={iNode:this.iNode};i.bind(this)(t);O.app.fire(t.type,t)})}}}else{a=O.barsSp.getChildById("barGroup_"+r)}var s=null;if(e==0){if(r<=A-1){s=O.txtsSp.getChildById("txtGroup_"+r)}else{s=new D["default"].Display.Sprite({id:"txtGroup_"+r});O.txtsSp.addChild(s);s.iGroup=e}}else{s=O.txtsSp.getChildById("txtGroup_"+r)}for(var u=0;u<n;u++){O.node._count++;var f=O.data[t[u]][r];f.iGroup=e,f.iNode=r,f.iLay=u;var c=f.y-f.fromY;if(isNaN(f.value)){c=0}else{if(Math.abs(c)<O.node.minHeight){c=O.node.minHeight}}f.rectHeight=c;var d=O._getColor(O.node.fillStyle,f);f.color=d;if(d instanceof CanvasGradient){if(O.node.fillStyle.lineargradient){var h=O.node.fillStyle.lineargradient[parseInt(O.node.fillStyle.lineargradient.length/2)];if(h){f.color=h.color}}}var p={x:Math.round(f.x),y:f.fromY,width:O.node._width,height:c,fillStyle:d,fillAlpha:O.node.fillAlpha,scaleY:-1};f.width=p.width;var y={x:p.x,y:f.yOriginPoint.pos,width:p.width,height:p.height,fillStyle:p.fillStyle,fillAlpha:O.node.fillAlpha,scaleY:0};if(!!O.node.radius&&f.isLeaf&&!O.proportion){var v=Math.min(O.node._width/2,Math.abs(c));v=Math.min(v,O.node.radius);y.radius=[v,v,0,0]}if(!P){delete y.scaleY;y.y=p.y}var g=null;var _="bar_"+r+"_"+f.field;if(r<=A-1){g=a.getChildById(_)}if(g){g.context.fillStyle=d}else{g=new L({id:_,context:y});g.field=f.field;a.addChild(g);g.on(I.event.types.get(),function(t){t.eventInfo={trigger:O.node,nodes:[this.nodeData]};i.bind(this)(t);O.app.fire(t.type,t)})}g.finalPos=p;g.iGroup=e,g.iNode=r,g.iLay=u;g.nodeData=f;f.nodeElement=g;O.node.filter&&O.node.filter.apply(g,[f,O]);if(O.label.enabled){var b=f.value;if(I._.isFunction(O.label.format)){var x=O.label.format(b,f);if(x!==undefined||x!==null){b=x}}if(b===undefined||b===null||b===""){continue}if(I._.isNumber(b)){b=(0,E.numAddSymbol)(b)}var m={fillStyle:O.label.fontColor||p.fillStyle,fontSize:O.label.fontSize,lineWidth:O.label.lineWidth,strokeStyle:O.label.strokeStyle||p.fillStyle,textBaseline:O.label.verticalAlign,rotation:O.label.rotation};var w=O._getTextPos(p,f);m.x=w.x;m.y=w.y;m.textAlign=O._getTextAlign(p,f);var S=null;var k="text_"+r+"_"+f.field;if(r<=A-1){S=s.getChildById(k)}if(S){S.resetText(b);S.context.x=m.x;S.context.y=m.y}else{S=new D["default"].Display.Text(b,{id:k,context:m});S.field=f.field;s.addChild(S)}}}}});this.sprite.addChild(this.barsSp);if(this.label.enabled){this.sprite.addChild(this.txtsSp)}this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y;this.grow(function(){O.fire("complete")},{delay:0,duration:300,animate:P});O._preDataLen=O._dataLen}},{key:"setEnabledField",value:function t(){this.enabledField=this.app.getComponent({name:"coord"}).filterEnabledFields(this.field)}},{key:"_getGroupRegionStyle",value:function t(e){var n=this;var i=n.select.fillStyle;if(I._.isArray(n.select.fillStyle)){i=n.select.fillStyle[e]}if(I._.isFunction(n.select.fillStyle)){i=n.select.fillStyle.apply(this,[{iNode:e,rowData:n.dataFrame.getRowDataAt(e)}])}if(i===undefined||i===null){return n.select._fillStyle}return i}},{key:"_trimGraphs",value:function t(){var v=this;var g=this.app.getComponent({name:"coord"});this.setEnabledField();this.data={};var e=[];var n=0;var i=0;var r=false;if(!this.absolute){I._.each(v.app.getComponents({name:"graphs",type:"bar"}),function(t){if(!t.absolute){if(t===v){r=true}if(r){t.setEnabledField()}else{i+=t.enabledField.length}n+=t.enabledField.length;e.push(t)}})}else{e=[this];n=this.enabledField.length}var _=g.getAxis({type:"xAxis"}).getCellLength();var a=_/(n+1);var b=this._getBarWidth(_,a);var x=a-b;if(this.node.xDis!=null){x=this.node.xDis}var m=(_-b*n-x*(n-1))/2;if(i){m+=(x+b)*i}var o=this.dataFrame.getDataOrg(this.enabledField);var l=v.getGraphSelectOpt();if(!v.select.inds.length&&l&&l.inds&&l.inds.length){v.select.inds=I._.clone(l.inds)}I._.each(o,function(h,p){var y=[];I._.each(h,function(t,d){y[d]=[];v._dataLen=t.length;I._.each(t,function(t,n){var i=t;if(v.proportion){i=0;I._.each(h,function(t,e){i+=t[n]})}var e=v._getTargetField(p,d,n,v.enabledField);var r=g.getPoint({iNode:n,field:e,value:{y:t}});var a=r.pos.x;var o=a-_/2+m+(b+x)*p;var l=0;if(v.proportion){l=-t/i*g.height}else{l=r.pos.y}if(isNaN(l)){l=0}var u=g.getAxisOriginPoint({field:e});function f(t,e,n,i,r){var a=t[e-1];if(!a){return u.pos}var o=a[n].y;var l=a[n].value;var s=u.value;if(i>=s){if(l>=s){a[n].isLeaf=false;return o}else{return f(t,e-1,n,i)}}else{if(l<s){a[n].isLeaf=false;return o}else{return f(t,e-1,n,i)}}}var s=f(y,d,n,t);l+=s-u.pos;var c={type:"bar",value:t,vInd:d,vCount:i,field:e,fromX:o,fromY:s,x:o,y:l,width:b,yOriginPoint:u,isLeaf:true,xAxis:g.getAxis({type:"xAxis"}).getNodeInfoOfX(a),iNode:n,rowData:v.dataFrame.getRowDataAt(n),color:null,selected:false};if(!v.data[c.field]){v.data[c.field]=y[d]}if(I._.indexOf(v.select.inds,n)>-1){c.selected=true}y[d].push(c)})})});return v.data}},{key:"_getTextAlign",value:function t(e,n){var i=this.label.textAlign;if(n.value<n.yOriginPoint.value){if(i=="left"){i="right"}else if(i=="right"){i="left"}}return i}},{key:"_getTextPos",value:function t(e,n){var i=this;var r={x:0,y:0};var a=e.x,o=e.y;var l=true;if(e.y>=n.y){l=false}switch(i.label.position){case"top":a=e.x+e.width/2;o=e.y+e.height;if(l){o+=16}break;case"topRight":a=e.x+e.width;o=e.y+e.height;if(l){o+=16}break;case"right":a=e.x+e.width;o=e.y+e.height/2;break;case"rightBottom":a=e.x+e.width;o=e.y;break;case"bottom":a=e.x+e.width/2;o=e.y;break;case"bottomLeft":a=e.x;o=e.y;break;case"left":a=e.x;o=e.y+e.height/2;break;case"leftTop":a=e.x;o=e.y+e.height;if(l){o+=16}break;case"center":a=e.x+e.width/2;o=e.y+e.height/2;break}a-=i.label.offsetX;var s=1;if(n.value<n.yOriginPoint.value){s=-1}o-=s*i.label.offsetY;r.x=a;r.y=o;return r}},{key:"grow",value:function t(s,e){var u=this;if(u._preDataLen>u._dataLen){for(var n=u._dataLen,i=u._preDataLen;n<i;n++){u.barsSp.getChildAt(n).destroy();u.label.enabled&&u.txtsSp.getChildAt(n).destroy();n--;i--}}if(!e.animate){s&&s(u);return}var f=1;var c=I._.extend({delay:Math.min(1e3/this._barsLen,80),easing:"Linear.None",duration:500},e);var d=0;I._.each(u.enabledField,function(t,e){t=I._.flatten([t]);var n=t.length;if(n==0)return;for(var i=0;i<u._dataLen;i++){for(var r=0;r<n;r++){var a=u.data[t[r]][i];var o=u.barsSp.getChildById("barGroup_"+i);var l=o.getChildById("bar_"+i+"_"+a.field);if(c.duration==0){l.context.scaleY=f;l.context.y=f*f*l.finalPos.y;l.context.x=l.finalPos.x;l.context.width=l.finalPos.width;l.context.height=l.finalPos.height}else{if(l._tweenObj){p.destroyTween(l._tweenObj)}l._tweenObj=l.animate({scaleY:f,y:f*l.finalPos.y,x:l.finalPos.x,width:l.finalPos.width,height:l.finalPos.height},{duration:c.duration,easing:c.easing,delay:i*c.delay,onUpdate:function t(e){},onComplete:function t(e){if(e.width<3&&this.context){this.context.radius=0}d++;if(d===u.node._count){s&&s(u)}},id:l.id})}}}})}},{key:"selectAt",value:function t(e){var i=this;if(I._.indexOf(this.select.inds,e)>-1)return;this.select.inds.push(e);var r=e-this.dataFrame.range.start;I._.each(this.data,function(t,e){var n=t[r];n.selected=true;i.setNodeElementStyle(n)});var n=this.barsSp.getChildById("barGroup_"+r);if(n){var a=n.getChildById("group_region_"+r);if(a){a.context.globalAlpha=this.select.alpha}}}},{key:"unselectAt",value:function t(e){var i=this;if(I._.indexOf(this.select.inds,e)==-1)return;var n=I._.indexOf(this.select.inds,e);this.select.inds.splice(n,1);var r=e-this.dataFrame.range.start;I._.each(this.data,function(t,e){var n=t[r];n.selected=false;i.setNodeElementStyle(n)});var a=this.barsSp.getChildById("barGroup_"+r);if(a){var o=a.getChildById("group_region_"+r);if(o){o.context.globalAlpha=0}}}},{key:"getSelectedRowList",value:function t(){var e=[];var n=this;I._.each(n.select.inds,function(t){e.push(n.dataFrame.jsonOrg[t])});return e}},{key:"setNodeElementStyle",value:function t(e){var n=this;var i=n._getColor(n.node.fillStyle,e);e.nodeElement.context.fillStyle=i}},{key:"getGraphSelectOpt",value:function t(){var e=this;var n=e._opt.select;if(!n){var i=e.app.getComponents({name:"graphs",type:"bar"});I._.each(i,function(t){if(n)return false;if(!n&&t._opt.select){n=t.select}})}return n}}]);return i}(i["default"]);I.global.registerComponent(y,"graphs","bar"),t["default"]=y}(e,n,o,p,X)}));var y=e(function(t,e){!function(t,e,l,g){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var _=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function t(e){return typeof e}}else{i=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return i(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(e&&(i(e)==="object"||typeof e==="function")){return e}return d(t)}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function a(t,e,n){if(e)r(t.prototype,e);if(n)r(t,n);return t}function o(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)s(t,e)}function s(t,e){s=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return s(t,e)}var h=_["default"].AnimationFrame,p=_["default"].Shapes.BrokenLine,b=_["default"].Shapes.Circle,x=_["default"].Shapes.Isogon,m=_["default"].Shapes.Path,y=function(t){o(s,t);a(s,null,[{key:"defaultProps",value:function t(){return{line:{detail:"线配置",propertys:{enabled:{detail:"是否开启",default:true},strokeStyle:{detail:"线的颜色",default:undefined},lineWidth:{detail:"线的宽度",default:2},lineType:{detail:"线的样式",default:"solid"},smooth:{detail:"是否平滑处理",default:true}}},node:{detail:"单个数据节点配置，对应线上的小icon图形",propertys:{enabled:{detail:"是否开启",default:true},shapeType:{detail:"节点icon的图形类型，默认circle",documentation:'可选有"isogon"(正多边形)，"path"（自定义path路径，待实现）',default:"circle"},isogonPointNum:{detail:'shapeType为"isogon"时有效，描述正多边形的边数',default:3},path:{detail:"shapeType为path的时候，描述图形的path路径",default:null},corner:{detail:"拐角才有节点",default:false},radius:{detail:"节点半径",default:3},fillStyle:{detail:"节点图形的背景色",default:"#ffffff"},strokeStyle:{detail:"节点图形的描边色，默认和line.strokeStyle保持一致",default:null},lineWidth:{detail:"节点图形边宽大小",default:2},visible:{detail:"节点是否显示,支持函数",default:true}}},label:{detail:"文本配置",propertys:{enabled:{detail:"是否开启",default:false},fontColor:{detail:"文本颜色",default:null},strokeStyle:{detail:"文本描边色",default:null},fontSize:{detail:"文本字体大小",default:12},format:{detail:"文本格式化处理函数",default:null}}},area:{detail:"面积区域配置",propertys:{enabled:{detail:"是否开启",default:true},fillStyle:{detail:"面积背景色",default:null},alpha:{detail:"面积透明度",default:.2}}}}}}]);function s(t,e,n,i,r,a,o){var l;u(this,s);l=f(this,c(s).call(this));l._graphs=o;l._opt=n;l.fieldMap=t;l.field=null;l.iGroup=e;l._yAxis=t.yAxis;l.ctx=i;l.w=a;l.h=r;l.y=0;l.line={strokeStyle:t.color};l.data=[];l.sprite=null;l._pointList=[];l._currPointList=[];l._bline=null;g._.extend(true,d(l),(0,g.getDefaultProps)(s.defaultProps()),n);l.field=t.field;l.init(n);return l}a(s,[{key:"init",value:function t(e){this.sprite=new _["default"].Display.Sprite}},{key:"draw",value:function t(e,n){g._.extend(true,this,e);this.data=n;this._widget(e)}},{key:"destroy",value:function t(){var e=this;e.sprite.animate({globalAlpha:0},{duration:300,onComplete:function t(){e.sprite.remove()}})}},{key:"_getColor",value:function t(e,n){var i=this._getProp(e,n);if(i===undefined||i===null){i=this._getLineStrokeStyle();if(e&&e.lineargradient){i=e.lineargradient[parseInt(e.lineargradient.length/2)].color}if(!i||!g._.isString(i)){i=this.fieldMap.color}}return i}},{key:"_getProp",value:function t(e,n){if(g._.isArray(e)){return e[this.iGroup]}if(g._.isFunction(e)){var i=[];if(n!=undefined){i.push(this.data[n])}return e.apply(this,i)}return e}},{key:"getNodeInfoAt",value:function t(e,n){var i=this.data[e];if(n&&n.eventInfo&&n.eventInfo.dimension_1){var r=n.eventInfo.dimension_1.layoutType;if(r=="proportion"){var a;for(var o=0,l=this.data.length;o<l;o++){var s=this.data[o];var u=Math.abs(s.x-e);if(a==undefined||u<a){a=u;i=s;continue}}}}return i}},{key:"resetData",value:function t(e,n){var i=this;if(e){this.data=e}i._pointList=this._getPointList(this.data);var r=i._pointList.length;var a=i._currPointList.length;var o={left:0,right:r-a};if(n){g._.extend(o,n.params)}if(o.left){if(o.left>0){this._currPointList=this._pointList.slice(0,o.left).concat(this._currPointList)}if(o.left<0){this._currPointList.splice(0,Math.abs(o.left))}}if(o.right){if(o.right>0){this._currPointList=this._currPointList.concat(this._pointList.slice(-o.right))}if(o.right<0){this._currPointList.splice(this._currPointList.length-Math.abs(o.right))}}i._createNodes();i._createTexts();i._grow()}},{key:"_grow",value:function t(e,n){var a=this;if(!a.data.length){e&&e(a);return}function o(t){a._bline.context.pointList=g._.clone(t);a._bline.context.strokeStyle=a._getLineStrokeStyle(t);a._area.context.path=a._fillLine(a._bline);a._area.context.fillStyle=a._getFillStyle();var r=0;g._.each(t,function(t,e){if(g._.isNumber(t[1])){if(a._nodes){var n=a._nodes.getChildAt(r);if(n){n.context.x=t[0];n.context.y=t[1]}}if(a._labels){var i=a._labels.getChildAt(r);if(i){i.context.x=t[0];i.context.y=t[1]-3;a._checkTextPos(i,e)}}r++}})}this._growTween=h.registTween({from:a._getPointPosStr(a._currPointList),to:a._getPointPosStr(a._pointList),desc:a.field,onUpdate:function t(e){for(var n in e){var i=parseInt(n.split("_")[2]);var r=parseInt(n.split("_")[1]);a._currPointList[i]&&(a._currPointList[i][r]=e[n])}o(a._currPointList)},onComplete:function t(){a.sprite._removeTween(a._growTween);a._growTween=null;o(a._pointList);e&&e(a)}});this.sprite._tweens.push(this._growTween)}},{key:"_getPointPosStr",value:function t(e){var n={};g._.each(e,function(t,e){if(!t){return}n["p_1_"+e]=t[1];n["p_0_"+e]=t[0]});return n}},{key:"_getPointList",value:function t(e){var n=[];for(var i=0,r=e.length;i<r;i++){var a=e[i];n.push([a.x,a.y])}return n}},{key:"_widget",value:function t(e){var n=this;!e&&(e={});n._pointList=this._getPointList(n.data);if(n._pointList.length==0){return}var i=[];if(e.animation){var r=this._getFirstNode();var a=r?r.y:undefined;for(var o=0,l=n.data.length;o<l;o++){var s=n.data[o];i.push([s.x,g._.isNumber(s.y)?a:s.y])}}else{i=n._pointList}n._currPointList=i;var u={pointList:i,lineWidth:n.line.lineWidth,y:n.y,strokeStyle:n._getLineStrokeStyle(i),smooth:n.line.smooth,lineType:n._getProp(n.line.lineType),smoothFilter:function t(e){if(e[1]>0){e[1]=0}else if(Math.abs(e[1])>n.h){e[1]=-n.h}},lineCap:"round"};var f=new p({context:u});f.on(g.event.types.get(),function(t){t.eventInfo={trigger:n.line,nodes:[]};n._graphs.app.fire(t.type,t)});if(!this.line.enabled){f.context.visible=false}n.sprite.addChild(f);n._bline=f;var c=new m({context:{path:n._fillLine(f),fillStyle:n._getFillStyle(),globalAlpha:g._.isArray(n.area.alpha)?1:n.area.alpha}});c.on(g.event.types.get(),function(t){t.eventInfo={trigger:n.area,nodes:[]};n._graphs.app.fire(t.type,t)});if(!this.area.enabled){c.context.visible=false}n.sprite.addChild(c);n._area=c;n._createNodes();n._createTexts()}},{key:"_getFirstNode",value:function t(){var e=null;for(var n=0,i=this.data.length;n<i;n++){var r=this.data[n];if(g._.isNumber(r.y)){if(e===null||this._yAxis.align=="right"){e=r}if(this._yAxis.align!=="right"&&e!==null){break}}}return e}},{key:"_getFillStyle",value:function t(){var e=this;var n=null;var i=e._getProp(e.area.fillStyle)||e._getLineStrokeStyle(null,"fillStyle");if(g._.isArray(e.area.alpha)&&!(i instanceof CanvasGradient)){e.area.alpha.length=2;if(e.area.alpha[0]==undefined){e.area.alpha[0]=0}if(e.area.alpha[1]==undefined){e.area.alpha[1]=0}var r=g._.min(e._bline.context.pointList,function(t){return t[1]});if(r[0]===undefined||r[1]===undefined){return null}n=e.ctx.createLinearGradient(r[0],r[1],r[0],0);var a=g.color.colorRgb(i);var o=a.replace(")",", "+e._getProp(e.area.alpha[0])+")").replace("RGB","RGBA");n.addColorStop(0,o);var l=a.replace(")",", "+e.area.alpha[1]+")").replace("RGB","RGBA");n.addColorStop(1,l);i=n}return i}},{key:"_getLineStrokeStyle",value:function t(e,n){var i=this;var r;if(!this._opt.line||!this._opt.line.strokeStyle){return this.line.strokeStyle}if(this._opt.line.strokeStyle.lineargradient){!e&&(e=this._bline.context.pointList);var a=g._.min(e,function(t){return t[1]});var o=g._.max(e,function(t){return t[1]});if(n=="fillStyle"){o=[0,0]}if(a[0]===undefined||a[1]===undefined||o[1]===undefined){return null}r=i.ctx.createLinearGradient(a[0],a[1],a[0],o[1]);g._.each(this._opt.line.strokeStyle.lineargradient,function(t,e){r.addColorStop(t.position,t.color)});return r}else{r=this._getColor(this._opt.line.strokeStyle);return r}}},{key:"_createNodes",value:function t(){var e=this;var n=e._currPointList;if(!this._nodes){this._nodes=new _["default"].Display.Sprite({});this.sprite.addChild(this._nodes)}var i=0;for(var r=0,a=n.length;r<a;r++){var o=e._getColor(e.node.strokeStyle||e.line.strokeStyle,r);e.data[r].color=o;if(!e.node.enabled){continue}var l=e._currPointList[r];if(!l||!g._.isNumber(l[1])){continue}var s={x:l[0],y:l[1],r:e._getProp(e.node.radius,r),lineWidth:e._getProp(e.node.lineWidth,r)||2,strokeStyle:o,fillStyle:e._getProp(e.node.fillStyle,r),visible:!!e._getProp(e.node.visible,r)};var u=b;var f=e._getProp(e.node.shapeType,r);if(f=="isogon"){u=x;s.n=e._getProp(e.node.isogonPointNum,r)}if(f=="path"){u=m;s.path=e._getProp(e.node.path,r)}var c=e._nodes.children[i];if(c){if(c.type==f){g._.extend(c.context,s)}else{c.destroy();c=new u({context:s});e._nodes.addChildAt(c,i)}}else{c=new u({context:s});e._nodes.addChild(c)}if(e.node.corner){var d=e._pointList[r][1];var h=e._pointList[r-1];var p=e._pointList[r+1];if(h&&p){if(d==h[1]&&d==p[1]){c.context.visible=false}}}i++}if(e._nodes.children.length>i){for(var y=i,v=e._nodes.children.length;y<v;y++){e._nodes.children[y].destroy();y--;v--}}}},{key:"_createTexts",value:function t(){var e=this;var n=e._currPointList;if(e.label.enabled){if(!this._labels){this._labels=new _["default"].Display.Sprite({});this.sprite.addChild(this._labels)}var i=0;for(var r=0,a=n.length;r<a;r++){var o=n[r];if(!o||!g._.isNumber(o[1])){continue}var l={x:o[0],y:o[1]-3,fontSize:this.label.fontSize,textAlign:"center",textBaseline:"bottom",fillStyle:e._getColor(e.label.fontColor,r),lineWidth:1,strokeStyle:"#ffffff"};var s=e.data[r].value;if(g._.isFunction(e.label.format)){s=e.label.format(s,e.data[r])||s}if(s==undefined||s==null){continue}var u=this._labels.children[i];if(u){u.resetText(s);g._.extend(u.context,l)}else{u=new _["default"].Display.Text(s,{context:l});e._labels.addChild(u);e._checkTextPos(u,r)}i++}if(e._labels.children.length>i){for(var f=i,c=e._labels.children.length;f<c;f++){e._labels.children[f].destroy();f--;c--}}}}},{key:"_checkTextPos",value:function t(e,n){var i=this;var r=i._currPointList;var a=r[n-1];var o=r[n+1];if(a&&o&&a[1]<e.context.y&&o[1]<e.context.y){e.context.y+=7;e.context.textBaseline="top"}}},{key:"_fillLine",value:function t(e){var n=g._.clone(e.context.pointList);var i="";var r=-this._yAxis.originPos;var a=null;g._.each(n,function(t,e){if(g._.isNumber(t[1])){if(a===null){a=[]}a.push(t)}else{if(a&&a.length){o()}}if(e==n.length-1&&g._.isNumber(t[1])){o()}});function o(){a.push([a[a.length-1][0],r],[a[0][0],r],[a[0][0],a[0][1]]);i+=(0,l.getPath)(a);a=null}return i}},{key:"getNodeInfoOfX",value:function t(r){var e=this;var n;for(var i=0,a=this.data.length;i<a;i++){if(this.data[i].value!==null&&Math.abs(this.data[i].x-r)<=1){n=this.data[i];return n}}var o=function t(e,n){var i={x:e,y:0};i.y=n[0][1]+(n[1][1]-n[0][1])/(n[1][0]-n[0][0])*(e-n[0][0]);return i};var l;var s=function t(e){if(r<e[0][0]||r>e.slice(-1)[0][0]){return}var n=parseInt(e.length/2);if(Math.abs(e[n][0]-r)<=1){l={x:e[n][0],y:e[n][1]};return}var i=[];if(r>e[n][0]){if(r<e[n+1][0]){l=o(r,[e[n],e[n+1]]);return}else{i=e.slice(n+1)}}else{if(r>e[n-1][0]){l=o(r,[e[n-1],e[n]]);return}else{i=e.slice(0,n)}}t(i)};this._bline&&s(this._bline.context.pointList);if(!l||l.y==undefined){return null}var u={type:"line",iGroup:e.iGroup,iNode:-1,field:e.field,value:this._yAxis.getValOfPos(-l.y),x:l.x,y:l.y,rowData:null,color:e._getProp(e.node.strokeStyle)||e._getLineStrokeStyle()};return u}}]);return s}(g.event.Dispatcher);t.default=y}(e,n,o,X)});t(y),t(e(function(t,e){!function(t,e,n,d){Object.defineProperty(t,"__esModule",{value:true});var h=r(e),i;function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return u(t)}function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(i,t);c(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置，支持二维数组格式",default:null},yAxisAlign:{detail:"绘制在哪根y轴上面",default:"left"},_props:[h["default"]]}}}]);function i(t,e){var n;o(this,i);n=l(this,s(i).call(this,t,e));n.type="line";n.enabledField=null;n.groups=[];d._.extend(true,u(n),(0,d.getDefaultProps)(i.defaultProps()),t);n.init();return n}c(i,[{key:"init",value:function t(){}},{key:"draw",value:function t(e){!e&&(e={});this.width=e.width;this.height=e.height;d._.extend(true,this.origin,e.origin);this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y;this.data=this._trimGraphs();this._setGroupsForYfield(this.data,null,e);if(this.animation&&!e.resize){this.grow()}else{this.fire("complete")}return this}},{key:"resetData",value:function t(e,n){var i=this;if(e){i.dataFrame=e;i.data=i._trimGraphs()}d._.each(i.groups,function(t){t.resetData(i.data[t.field].data,n)})}},{key:"setEnabledField",value:function t(){this.enabledField=this.app.getComponent({name:"coord"}).filterEnabledFields(this.field)}},{key:"_trimGraphs",value:function t(){var u=this;var f=this.app.getComponent({name:"coord"});var c={};u.setEnabledField();d._.each(d._.flatten(u.enabledField),function(t,e){var n=u.app.getComponent({name:"coord"}).getFieldMapOf(t);var i=u.dataFrame.getFieldData(t);if(!i)return;var r=[];for(var a=0,o=i.length;a<o;a++){var l=f.getPoint({iNode:a,field:t,value:{y:i[a]}});var s={type:"line",iGroup:e,iNode:a,field:t,value:i[a],x:l.pos.x,y:l.pos.y,rowData:u.dataFrame.getRowDataAt(a),color:n.color};r.push(s)}c[t]={yAxis:n.yAxis,field:t,data:r}});return c}},{key:"grow",value:function t(n){var i=0;var r=this.groups.length;var a=this;d._.each(this.groups,function(t,e){t._grow(function(){i++;n&&n(t);if(i==r){a.fire("complete")}})});return this}},{key:"show",value:function t(e){var n=this;if(d._.indexOf(d._.flatten([n.field]),e)==-1){return}this.data=this._trimGraphs();this._setGroupsForYfield(this.data,e);d._.each(this.groups,function(t,e){t.resetData(n.data[t.field].data)})}},{key:"hide",value:function t(e){var n=this;var i=n.getGroupIndex(e);if(!this.groups.length||i<0){return}this.groups.splice(i,1)[0].destroy();this.data=this._trimGraphs();d._.each(this.groups,function(t,e){t.resetData(n.data[t.field].data)})}},{key:"getGroupIndex",value:function t(e){var n=-1;for(var i=0,r=this.groups.length;i<r;i++){if(this.groups[i].field===e){n=i;break}}return n}},{key:"getGroup",value:function t(e){return this.groups[this.getGroupIndex(e)]}},{key:"_setGroupsForYfield",value:function t(e,s,u){var f=this;!u&&(u={});if(s){s=d._.flatten([s])}var c=d._.flatten([this.field]);d._.each(e,function(t,e){if(s&&d._.indexOf(s,e)==-1){return}var n=f.app.getComponent({name:"coord"}).getFieldMapOf(e);var i=d._.indexOf(c,e);var r=new h["default"](n,i,f._opt,f.ctx,f.height,f.width,f);r.draw({animation:f.animation&&!u.resize},t.data);var a=false;for(var o=0,l=f.groups.length;o<l;o++){if(i<f.groups[o].iGroup){f.groups.splice(o,0,r);a=true;f.sprite.addChildAt(r.sprite,o);break}}if(!a){f.groups.push(r);f.sprite.addChild(r.sprite)}})}},{key:"getNodesAt",value:function t(n,i){var r=[];d._.each(this.groups,function(t){var e=t.getNodeInfoAt(n,i);e&&r.push(e)});return r}},{key:"getNodesOfPos",value:function t(n){var i=[];d._.each(this.groups,function(t){var e=t.getNodeInfoOfX(n);e&&i.push(e)});return i}}]);return i}(r(n)["default"]);d.global.registerComponent(v,"graphs","line"),t["default"]=v}(e,y,p,X)}));var v=e(function(t,e){function f(t,e,n,i,r,a){var o=(a-e)*(n-t)-(i-e)*(r-t);return 0<o||!(o<0)}var n;n=e,Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=t[0][0],i=t[0][1],r=t[1][0],a=t[1][1],o=e[0][0],l=e[0][1],s=e[1][0],u=e[1][1];return f(n,i,o,l,s,u)!==f(r,a,o,l,s,u)&&f(n,i,r,a,o,l)!==f(n,i,r,a,s,u)}});t(v);var g=e(function(t,e){function n(t,e){this._cells=[],this._cellSize=e,this._reverseCellSize=1/e;for(var n=0;n<t.length;n++){var i=t[n],r=this.coordToCellNum(i[0]),a=this.coordToCellNum(i[1]);if(this._cells[r])this._cells[r][a]?this._cells[r][a].push(i):this._cells[r][a]=[i];else{var o=[];o[a]=[i],this._cells[r]=o}}}var i;i=e,Object.defineProperty(i,"__esModule",{value:!0}),n.prototype={cellPoints:function(t,e){return void 0!==this._cells[t]&&void 0!==this._cells[t][e]?this._cells[t][e]:[]},rangePoints:function(t){for(var e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),i=this.coordToCellNum(t[2]),r=this.coordToCellNum(t[3]),a=[],o=e;o<=i;o++)for(var l=n;l<=r;l++)Array.prototype.push.apply(a,this.cellPoints(o,l));return a},removePoint:function(t){for(var e,n=this.coordToCellNum(t[0]),i=this.coordToCellNum(t[1]),r=this._cells[n][i],a=0;a<r.length;a++)if(r[a][0]===t[0]&&r[a][1]===t[1]){e=a;break}return r.splice(e,1),r},trunc:Math.trunc||function(t){return t-t%1},coordToCellNum:function(t){return this.trunc(t*this._reverseCellSize)},extendBbox:function(t,e){return[t[0]-e*this._cellSize,t[1]-e*this._cellSize,t[2]+e*this._cellSize,t[3]+e*this._cellSize]}},i.default=function(t,e){return new n(t,e)}});t(g);var _=e(function(t,e){var n;n=e,Object.defineProperty(n,"__esModule",{value:!0}),n.default={toXy:function(t,e){return void 0===e?t.slice():t.map(function(t){return new Function("pt","return [pt"+e[0]+",pt"+e[1]+"];")(t)})},fromXy:function(t,e){return void 0===e?t.slice():t.map(function(t){return new Function("pt","const o = {}; o"+e[0]+"= pt[0]; o"+e[1]+"= pt[1]; return o;")(t)})}}});t(_);var b=e(function(t,e){function r(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}var n;n=e,Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=function(t){for(var e=[],n=0;n<t.length;n++){for(;2<=e.length&&r(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}return e.pop(),e}(t),n=function(t){for(var e=t.reverse(),n=[],i=0;i<e.length;i++){for(;2<=n.length&&r(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}return n.pop(),n}(t).concat(e);return n.push(t[0]),n}});t(b);var x=e(function(t,e){!function(t,e,n,i,r){Object.defineProperty(t,"__esModule",{value:true});var a=o(e),c=o(n),d=o(i),h=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function p(t){var e=[t[0]];var n=t[0];for(var i=1;i<t.length;i++){var r=t[i];if(n[0]!==r[0]||n[1]!==r[1]){e.push(r)}n=r}return e}function y(t){return t.sort(function(t,e){return t[0]-e[0]||t[1]-e[1]})}function v(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function u(t,e,n){var i=[e[0]-t[0],e[1]-t[1]],r=[n[0]-t[0],n[1]-t[1]],a=v(t,e),o=v(t,n),l=i[0]*r[0]+i[1]*r[1];return l/Math.sqrt(a*o)}function f(t,e){for(var n=0;n<e.length-1;n++){var i=[e[n],e[n+1]];if(t[0][0]===i[0][0]&&t[0][1]===i[0][1]||t[0][0]===i[1][0]&&t[0][1]===i[1][1]){continue}if((0,a["default"])(t,i)){return true}}return false}function g(t){var e=Infinity;var n=Infinity;var i=-Infinity;var r=-Infinity;for(var a=t.length-1;a>=0;a--){if(t[a][0]<e){e=t[a][0]}if(t[a][1]<n){n=t[a][1]}if(t[a][0]>i){i=t[a][0]}if(t[a][1]>r){r=t[a][1]}}return[i-e,r-n]}function _(t){return[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]}function b(t,e,n){var i=null,r=m,a=m,o,l;for(var s=0;s<e.length;s++){o=u(t[0],t[1],e[s]);l=u(t[1],t[0],e[s]);if(o>r&&l>a&&!f([t[0],e[s]],n)&&!f([t[1],e[s]],n)){r=o;a=l;i=e[s]}}return i}function x(t,e,n,i,r){var a=false;for(var o=0;o<t.length-1;o++){var l=[t[o],t[o+1]];var s=l[0][0]+","+l[0][1]+","+l[1][0]+","+l[1][1];if(v(l[0],l[1])<e||r.has(s)){continue}var u=0;var f=_(l);var c=void 0;var d=void 0;var h=void 0;do{f=i.extendBbox(f,u);c=f[2]-f[0];d=f[3]-f[1];h=b(l,i.rangePoints(f),t);u++}while(h===null&&(n[0]>c||n[1]>d));if(c>=n[0]&&d>=n[1]){r.add(s)}if(h!==null){t.splice(o+1,0,h);i.removePoint(h);a=true}}if(a){return x(t,e,n,i,r)}return t}function l(t,e,n){var i=e||20;var r=p(y(d["default"].toXy(t,n)));if(r.length<4){return r.concat([r[0]])}var a=g(r);var o=[a[0]*w,a[1]*w];var l=(0,h["default"])(r);var s=r.filter(function(t){return l.indexOf(t)<0});var u=Math.ceil(1/(r.length/(a[0]*a[1])));var f=x(l,Math.pow(i,2),o,(0,c["default"])(s,u),new Set);if(n){return d["default"].fromXy(f,n)}else{return f}}var m=Math.cos(90/(180/Math.PI)),w=.6;t["default"]=l}(e,v,g,_,b)});t(x),t(e(function(t,e){!function(t,e,n,g,i){Object.defineProperty(t,"__esModule",{value:true});var _=a(e),r=a(n),b=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return f(t)}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return u(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)p(t,e)}function p(t,e){p=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return p(t,e)}var x=_["default"].Shapes.Circle,m=_["default"].Shapes.Rect,w=_["default"].Shapes.Line,S=_["default"].Shapes.Polygon,y=function(t){h(i,t);d(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置",default:null},groupField:{detail:"分组字段",default:null,documentation:"分组字段，如果area配置enabled为true，那么需要groupField来构建几个area"},dataFilter:{detail:"散点过滤数据",default:null,documentation:"数据过滤器，可以和groupField实现交叉过滤"},aniOrigin:{detail:"节点动画的原点",default:"default",documentation:"可选的还有center（坐标正中）、origin（坐标原点）"},node:{detail:"单数据节点图形设置",propertys:{dataKey:{detail:"元素的数据id，默认索引匹配",default:"__index__"},shapeType:{detail:"图形类型",default:"circle",documentation:"节点的现状可以是圆 ，也可以是rect，也可以是三角形，后面两种后面实现"},maxRadius:{detail:"节点最大半径",default:25},minRadius:{detail:"节点最小半径",default:5},radius:{detail:"半径",default:null},radiusScale:{detail:"半径缩放比例",documentation:"在计算好真实半径后缩放，主要用在,缩略图中，比如datazoom的缩略图",default:1},normalRadius:{detail:"默认半径",default:15},fillStyle:{detail:"节点景色",default:null},fillAlpha:{detail:"节点透明度",default:.8},strokeStyle:{detail:"节点描边颜色",default:null},lineWidth:{detail:"节点描边线宽",default:0},strokeAlpha:{detail:"节点描边透明度",default:1},focus:{detail:"节点hover态设置",propertys:{enabled:{detail:"是否开启",default:true},lineWidth:{detail:"hover后的边框大小",default:6},strokeAlpha:{detail:"hover后的边框透明度",default:.2},fillAlpha:{detail:"hover后的背景透明度",default:.8}}},select:{detail:"节点选中态设置",propertys:{enabled:{detail:"是否开启",default:false},lineWidth:{detail:"选中后的边框大小",default:8},strokeAlpha:{detail:"选中后的边框透明度",default:.4},fillAlpha:{detail:"选中后的背景透明度",default:1}}}}},line:{detail:"每个节点和指标轴线的连线",propertys:{enabled:{detail:"是否开启",default:false},lineWidth:{detail:"连线宽",default:1},strokeStyle:{detail:"连线颜色",default:"#ccc"},lineType:{detail:"连线类型",default:"dashed"}}},area:{detail:"散点集合组成的面",propertys:{enabled:{detail:"是否开启",default:false},concavity:{detail:"凹凸系数，默认80，越大越凸",default:88},quantile:{detail:"散点用来计入面积的分位数",default:8},fillStyle:{detail:"散点集合面的背景色",default:null},fillAlpha:{detail:"散点集合面的透明度",default:.15},strokeStyle:{detail:"散点集合面的描边颜色",default:null},lineWidth:{detail:"散点集合面的描边线宽",default:0},strokeAlpha:{detail:"散点集合面的描边透明度",default:.5}}},label:{detail:"文本设置",propertys:{enabled:{detail:"是否开启",default:true},field:{detail:"获取label的字段",default:null},format:{detail:"label格式化处理函数",default:function t(e,n){return e}},fontSize:{detail:"label字体大小",default:13},fontColor:{detail:"字体颜色",default:"#888"},strokeStyle:{detail:"字体描边颜色",default:"#ffffff"},lineWidth:{detail:"描边大小",default:0},textAlign:{detail:"水平对齐方式",default:"center"},verticalAlign:{detail:"垂直基线对齐方式",default:"middle"},position:{detail:"文本布局位置",documentation:"auto(目前等于center，还未实现),center,top,right,bottom,left",default:"center"},offsetX:{detail:"x方向偏移量",default:0},offsetY:{detail:"y方向偏移量",default:0}}}}}}]);function i(t,e){var n;l(this,i);n=s(this,u(i).call(this,t,e));n.type="scat";n._rData=null;n._rMaxValue=null;n._rMinValue=null;n._groupData={};g._.extend(true,f(n),(0,g.getDefaultProps)(i.defaultProps()),t);n.init();return n}d(i,[{key:"init",value:function t(){this._shapesp=new _["default"].Display.Sprite({id:"scat_shapesp"});this._textsp=new _["default"].Display.Sprite({id:"textsp"});this._linesp=new _["default"].Display.Sprite({id:"textsp"});this._areasp=new _["default"].Display.Sprite({id:"areasp"});this.sprite.addChild(this._areasp);this.sprite.addChild(this._linesp);this.sprite.addChild(this._shapesp);this.sprite.addChild(this._textsp)}},{key:"draw",value:function t(e){!e&&(e={});g._.extend(true,this,e);this.data=this._trimGraphs();this._widget();this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y;var n=this;if(this.animation&&!e.resize&&!n.inited){this.grow(function(){n.fire("complete")})}else{this.fire("complete")}return this}},{key:"resetData",value:function t(e,n){this.dataFrame=e;this.data=this._trimGraphs();this._widget();this.grow()}},{key:"getNodesAt",value:function t(){return[]}},{key:"_trimGraphs",value:function t(){var e=[];this._groupData={};var n=this.app.getComponent({name:"coord"});var i=this.dataFrame.length;this._rData=null;this._rMaxValue=null;this._rMinValue=null;for(var r=0;r<i;r++){var a=this.dataFrame.getRowDataAt(r);var o=n.getFieldMapOf(this.field);var l=n.getPoint({iNode:r,field:this.field,value:{y:a[this.field]}});if(l.pos.x==undefined||l.pos.y==undefined){continue}var s={type:"scat",rowData:a,x:l.pos.x,y:l.pos.y,value:l.value,field:this.field,fieldColor:o.color,iNode:r,focused:false,selected:false,radius:null,fillStyle:null,color:null,strokeStyle:null,strokeAlpha:1,lineWidth:0,shapeType:null,label:null,fillAlpha:1,nodeElement:null};this._setR(s);this._setFillStyle(s);this._setFillAlpha(s);this._setStrokeStyle(s);this._setLineWidth(s);this._setStrokeAlpha(s);this._setNodeType(s);this._setText(s);if(this.dataFilter){if(g._.isFunction(this.dataFilter)){if(!this.dataFilter.apply(this,[s])){continue}}}if(this.groupField){var u=a[this.groupField];if(u){if(!this._groupData[u]){this._groupData[u]=[]}!this._groupData[u].push(s)}}else{if(!this._groupData.all){this._groupData.all=[]}this._groupData.all.push(s)}e.push(s)}return e}},{key:"_setR",value:function t(e){var n=this.node.normalRadius;var i=e.rowData;if(this.node.radius!=null){if(g._.isString(this.node.radius)&&i[this.node.radius]){if(!this._rData&&!this._rMaxValue&&!this._rMinValue){this._rData=this.dataFrame.getFieldData(this.node.radius);this._rMaxValue=g._.max(this._rData);this._rMinValue=g._.min(this._rData)}var r=i[this.node.radius];if(this._rMaxValue==this._rMinValue){n=this.node.minRadius+(this.node.maxRadius-this.node.minRadius)/2}else{n=this.node.minRadius+(r-this._rMinValue)/(this._rMaxValue-this._rMinValue)*(this.node.maxRadius-this.node.minRadius)}}if(g._.isFunction(this.node.radius)){n=this.node.radius(i)}if(!isNaN(parseInt(this.node.radius))){n=parseInt(this.node.radius)}}n=Math.max(n*this.node.radiusScale,2);e.radius=n;return this}},{key:"_setText",value:function t(e){if(this.label.field!=null){if(g._.isString(this.label.field)&&e.rowData[this.label.field]){e.label=this.label.format(e.rowData[this.label.field],e)}}}},{key:"_setFillStyle",value:function t(e){e.color=e.fillStyle=this._getStyle(this.node.fillStyle,e);return this}},{key:"_setFillAlpha",value:function t(e){e.fillAlpha=this._getProp(this.node.fillAlpha,e);return this}},{key:"_setStrokeAlpha",value:function t(e){e.strokeAlpha=this._getProp(this.node.strokeAlpha,e);return this}},{key:"_setStrokeStyle",value:function t(e){e.strokeStyle=this._getStyle(this.node.strokeStyle||this.node.fillStyle,e);return this}},{key:"_getProp",value:function t(e,n){var i=e;if(g._.isArray(e)){i=e[n.iGroup]}if(g._.isFunction(e)){i=e.apply(this,[n])}return i}},{key:"_getStyle",value:function t(e,n){var i=e;if(g._.isArray(e)){i=e[n.iGroup]}if(g._.isFunction(e)){i=e.apply(this,[n])}if(!i){i=n.fieldColor}return i}},{key:"_setLineWidth",value:function t(e){e.lineWidth=this._getProp(this.node.lineWidth,e);return this}},{key:"_setNodeType",value:function t(e){var n=this.node.shapeType;if(g._.isArray(n)){n=n[e.iGroup]}if(g._.isFunction(n)){n=n(e)}if(!n){n="circle"}e.shapeType=n;return this}},{key:"_widget",value:function t(){var n=this;var u=this;g._.each(g._.flatten([u._shapesp.children,u._textsp.children,u._linesp.children]),function(t){t.__used=false});g._.each(u.data,function(t,e){var n=u._getNodeElement(t,e);if(!n){t.__isNew=true}var i=u._getNodeContext(t);var r=t.shapeType=="circle"?x:m;if(!n){n=new r({id:"shape_"+e,hoverClone:false,context:i});u._shapesp.addChild(n);n.on(g.event.types.get(),function(t){t.eventInfo={title:null,trigger:u.node,nodes:[this.nodeData]};if(this.nodeData.label){t.eventInfo.title=this.nodeData.label}if(t.type=="mouseover"){u.focusAt(this.nodeData.iNode)}if(t.type=="mouseout"){!this.nodeData.selected&&u.unfocusAt(this.nodeData.iNode)}u.app.fire(t.type,t)})}else{n.animate(i)}n.__used=true;n.nodeData=t;n.iNode=e;t.nodeElement=n;if(u.line.enabled){var a=n.lineElement;var o={start:{x:i.x,y:i.y+i.r},end:{x:i.x,y:0},lineWidth:u.line.lineWidth,strokeStyle:u.line.strokeStyle,lineType:u.line.lineType};if(!a){a=new w({context:o});u._linesp.addChild(a)}else{a.animate(o)}a.__used=true;n.lineElement=a}if(t.label&&u.label.enabled){var l=n.labelElement;var s={};if(!l){l=new _["default"].Display.Text(t.label,{id:"scat_text_"+e,context:{}});s=u._getTextContext(l,i);g._.extend(l.context,s);u._textsp.addChild(l)}else{l.resetText(t.label);s=u._getTextContext(l,i);l.animate(s)}l.__used=true;n.labelElement=l;l.nodeElement=n}});if(u.area.enabled){u._areasp.removeAllChildren();var i=0;var e=function t(){a=n._groupData[r];o={name:r,iGroup:i,data:a};l=[];function e(t,e){if(!e||e==1){return[[t.x,t.y]]}var n=[];for(var i=0;i<e;i++){var r=360/(e-1)*i;var a=t.radius+3;var o=t.x+Math.cos(Math.PI*2/360*r)*a;var l=t.y+Math.sin(Math.PI*2/360*r)*a;n.push([o,l])}return n}g._.each(a,function(t){l=l.concat(e(t,u.area.quantile))});s=(0,b["default"])(l,u.area.concavity);f=u.app.getTheme(i);c=u._getStyle(u.area.fillStyle,o)||f;d=u._getProp(u.area.fillAlpha,o);h=u._getStyle(u.area.strokeStyle,o)||f;p=u._getProp(u.area.lineWidth,o);y=u._getProp(u.area.strokeAlpha,o);v=new S({context:{pointList:s,fillStyle:c,fillAlpha:d,strokeStyle:h,lineWidth:p,strokeAlpha:y,smooth:false}});u._areasp.addChild(v);i++};for(var r in this._groupData){var a;var o;var l;var s;var f;var c;var d;var h;var p;var y;var v;e()}}g._.each(g._.flatten([u._shapesp.children,u._textsp.children,u._linesp.children]),function(e){if(!e.__used){e.animate({globalAlpha:0,r:0},{onComplete:function t(){e.destroy()}})}})}},{key:"_getNodeElement",value:function t(e,n){var i=this;var r;var a=i.node.dataKey;if(!a){r=i._shapesp.getChildAt(n)}else{if(g._.isString(a)){a=a.split(",")}for(var o=0,l=this._shapesp.children.length;o<l;o++){var s=this._shapesp.children[o];var u=true;for(var f=0,c=a.length;f<c;f++){var d=a[f];if(s.nodeData.rowData[d]!=e.rowData[d]){u=false;break}}if(u&&a.length){r=s;break}}}return r}},{key:"_getTextPosition",value:function t(e,n){var i=0,r=0;switch(this.label.position){case"center":i=n.x;r=n.y;break;case"top":i=n.x;r=n.y-n.r;break;case"right":i=n.x+n.r;r=n.y;break;case"bottom":i=n.x;r=n.y+n.r;break;case"left":i=n.x-n.r;r=n.y;break;case"auto":i=n.x;r=n.y;if(e.getTextWidth()>n.r*2){r=n.y+n.r+e.getTextHeight()*.5}break}var a={x:i+this.label.offsetX,y:r+this.label.offsetY};return a}},{key:"_getTextContext",value:function t(e,n){var i=this._getTextPosition(e,n);var r=this.label.fontSize;if(e.getTextWidth()>n.r*2){r-=2}var a={x:i.x,y:i.y,fillStyle:this.label.fontColor||n.fillStyle,fontSize:r,strokeStyle:this.label.strokeStyle||n.fillStyle,lineWidth:this.label.lineWidth,textAlign:this.label.textAlign,textBaseline:this.label.verticalAlign};if(this.animation&&!this.inited){this._setCtxAniOrigin(a)}return a}},{key:"_setCtxAniOrigin",value:function t(e){if(this.aniOrigin=="default"){e.y=0}if(this.aniOrigin=="origin"){var n=this.app.getComponent({name:"coord"});var i=n.getOriginPos({field:this.field});e.x=i.x;e.y=i.y}if(this.aniOrigin=="center"){e.x=this.width/2;e.y=-(this.height/2)}}},{key:"_getNodeContext",value:function t(e){if(e.shapeType=="circle"){return this._getCircleContext(e)}}},{key:"_getCircleContext",value:function t(e){var n={x:e.x,y:e.y,r:e.radius,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle,strokeAlpha:e.strokeAlpha,lineWidth:e.lineWidth,fillAlpha:e.fillAlpha,cursor:"pointer"};if(this.animation&&(!this.inited||e.__isNew)){this._setCtxAniOrigin(n);n.r=1}return n}},{key:"grow",value:function t(e){var n=0;var i=this.data.length-1;var r=this;g._.each(this.data,function(t){if(t.__isNew){r._growNode(t,function(){n=n+1;delete t.__isNew;if(n==i){e&&e()}})}})}},{key:"_growNode",value:function t(e,n){var i=this;e.nodeElement.animate({x:e.x,y:e.y,r:e.radius},{onUpdate:function t(e){if(this.labelElement&&this.labelElement.context){var n=i._getTextPosition(this.labelElement,e);this.labelElement.context.x=n.x;this.labelElement.context.y=n.y}if(this.lineElement&&this.lineElement.context){this.lineElement.context.start.y=e.y+e.r}},delay:Math.round(Math.random()*300),onComplete:function t(){n&&n()}})}},{key:"focusAt",value:function t(e){var n=this.data[e];if(!this.node.focus.enabled||n.focused)return;var i=n.nodeElement.context;i.lineWidth=this.node.focus.lineWidth;i.strokeAlpha=this.node.focus.strokeAlpha;i.fillAlpha=this.node.focus.fillAlpha;n.focused=true}},{key:"unfocusAt",value:function t(e){var n=this.data[e];if(!this.node.focus.enabled||!n.focused)return;var i=n.nodeElement.context;i.lineWidth=n.lineWidth;i.strokeAlpha=n.strokeAlpha;i.fillAlpha=n.fillAlpha;i.strokeStyle=n.strokeStyle;n.focused=false}},{key:"selectAt",value:function t(e){var n=this.data[e];if(!this.node.select.enabled||n.selected)return;var i=n.nodeElement.context;i.lineWidth=this.node.select.lineWidth;i.strokeAlpha=this.node.select.strokeAlpha;i.fillAlpha=this.node.select.fillAlpha;n.selected=true}},{key:"unselectAt",value:function t(e){var n=this.data[e];if(!this.node.select.enabled||!n.selected)return;var i=n.nodeElement.context;if(n.focused){i.lineWidth=this.node.focus.lineWidth;i.strokeAlpha=this.node.focus.strokeAlpha;i.fillAlpha=this.node.focus.fillAlpha}else{i.lineWidth=n.lineWidth;i.strokeAlpha=n.strokeAlpha;i.fillAlpha=n.fillAlpha}n.selected=false}},{key:"getNodesOfPos",value:function t(e,n){var i=[];return i}}]);return i}(r["default"]);g.global.registerComponent(y,"graphs","scat"),t["default"]=y}(e,n,p,X,x)}));var m=e(function(t,e){!function(t,e,l){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){r=function t(e){return typeof e}}else{r=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return r(t)}function a(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function s(t,e,n){if(e)o(t.prototype,e);if(n)o(t,n);return t}function u(t,e){if(e&&(r(e)==="object"||typeof e==="function")){return e}return f(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}var p=n["default"].Shapes.Sector,F=n["default"].Shapes.Path,y=n["default"].AnimationFrame,v=function(t){d(i,t);function i(t,e){var n;a(this,i);n=u(this,c(i).call(this));n.width=0;n.height=0;n.origin={x:0,y:0};n._graphs=t;n.domContainer=t.app.canvax.domView;n.data=e;n.sprite=null;n.textSp=null;n.sectorsSp=null;n.selectedSp=null;n.init();n.sectors=[];n.textMaxCount=15;n.textList=[];n.completed=false;return n}s(i,[{key:"init",value:function t(){this.sprite=new n["default"].Display.Sprite;this.sectorsSp=new n["default"].Display.Sprite;this.sprite.addChild(this.sectorsSp);this.selectedSp=new n["default"].Display.Sprite;this.sprite.addChild(this.selectedSp);if(this._graphs.label.enabled){this.textSp=new n["default"].Display.Sprite}}},{key:"draw",value:function t(e){var n=this;l._.extend(true,this,e);this.sprite.context.x=n.origin.x;this.sprite.context.y=n.origin.y;n._widget()}},{key:"resetData",value:function t(e){var n=this;this.data=e;n.destroyLabel();var i=0;for(var r=0;r<n.sectors.length;r++){var a=n.sectors[r];var o=this.data.list[r];a.animate({r:o.outRadius,startAngle:o.startAngle,endAngle:o.endAngle},{duration:280,onComplete:function t(){i++;if(i==n.sectors.length){if(n._graphs.label.enabled){n._startWidgetLabel()}}}})}}},{key:"_widget",value:function t(){var e=this;var n=e.data.list;var i=e.data.total;if(n.length>0&&i>0){e.textSp&&e.sprite.addChild(e.textSp);for(var r=0;r<n.length;r++){var a=n[r];var o=new p({hoverClone:false,xyToInt:false,context:{x:a.focused?a.outOffsetx:0,y:a.focused?a.outOffsety:0,r0:a.innerRadius,r:a.outRadius,startAngle:a.startAngle,endAngle:a.endAngle,fillStyle:a.fillStyle,cursor:"pointer"},id:"sector"+r});o.nodeData=a;a.focusEnabled&&o.hover(function(t){e.focusOf(this.nodeData)},function(t){!this.nodeData.selected&&e.unfocusOf(this.nodeData)});o.on(l.event.types.get(),function(t){t.eventInfo={trigger:e._graphs.node,nodes:[this.nodeData]};e._graphs.app.fire(t.type,t)});e.sectorsSp.addChildAt(o,0);e.sectors.push(o)}if(e._graphs.label.enabled){e._startWidgetLabel()}}}},{key:"focusOf",value:function t(e,n){if(e.focused)return;var i=this;var r=i.sectors[e.iNode];r.animate({x:e.outOffsetx,y:e.outOffsety},{duration:100,onComplete:function t(){n&&n()}});e.focused=true}},{key:"unfocusOf",value:function t(e,n){if(!e.focused)return;var i=this;var r=i.sectors[e.iNode];r.animate({x:0,y:0},{duration:100,onComplete:function t(){n&&n()}});e.focused=false}},{key:"selectOf",value:function t(e,n){var i=this;if(!this.sectors.length||!e.selectEnabled){return}var r=this.sectors[e.iNode];if(e.selected){return}if(!e.focused){e._focusTigger="select";this.focusOf(e,function(){i.addCheckedSec(r)})}else{this.addCheckedSec(r)}e.selected=true}},{key:"unselectOf",value:function t(e,n){var i=this.sectors[e.iNode];if(!e.selected||!e.selectEnabled){return}var r=this;r.cancelCheckedSec(i,function(){if(e._focusTigger=="select"){r.unfocusOf(e)}});e.selected=false}},{key:"addCheckedSec",value:function t(e,n){var i=e.context;var r=e.nodeData;if(!i)return;var a=new p({xyToInt:false,context:{x:i.x,y:i.y,r0:i.r-1,r:i.r+r.selectedR,startAngle:i.startAngle,endAngle:i.startAngle,fillStyle:i.fillStyle,globalAlpha:r.selectedAlpha},id:"selected_"+e.id});e._selectedSec=a;this.selectedSp.addChild(a);if(this.completed){a.animate({endAngle:i.endAngle},{duration:this._getAngleTime(i),onComplete:function t(){n&&n()}})}else{a.context.endAngle=i.endAngle}}},{key:"cancelCheckedSec",value:function t(e,n){var i=e._selectedSec;i.animate({startAngle:i.context.endAngle-.5},{duration:this._getAngleTime(e.context),onComplete:function t(){delete e._selectedSec;i.destroy();n&&n()}})}},{key:"_getAngleTime",value:function t(e){return Math.abs(e.startAngle-e.endAngle)/360*500}},{key:"grow",value:function t(e){var c=this;l._.each(c.sectors,function(t,e){if(t.context){t.context.r0=0;t.context.r=0;t.context.startAngle=c._graphs.startAngle;t.context.endAngle=c._graphs.startAngle}});c._hideGrowLabel();var n=y.registTween({from:{process:0},to:{process:1},duration:500,onUpdate:function t(e){for(var n=0;n<c.sectors.length;n++){var i=c.sectors[n];var r=i.nodeData;var a=i.context;var o=r.startAngle;var l=r.endAngle;var s=r.outRadius;var u=r.innerRadius;if(a){a.r=s*e.process;a.r0=u*e.process;if(n==0){a.startAngle=o;a.endAngle=o+(l-o)*e.process}else{var f=function(t){var e=t-1;var n=c.sectors[e].context;if(e==0){return n?n.endAngle:0}if(n){return n.endAngle}else{return arguments.callee(e)}}(n);a.startAngle=f;a.endAngle=a.startAngle+(l-o)*e.process}if(i._selectedSec){i._selectedSec.context.r0=a.r-1;i._selectedSec.context.r=a.r+r.selectedR;i._selectedSec.context.startAngle=a.startAngle;i._selectedSec.context.endAngle=a.endAngle}}}},onComplete:function t(){c.sprite._removeTween(n);c._showGrowLabel();c.completed=true;e&&e()}});c.sprite._tweens.push(n)}},{key:"_widgetLabel",value:function t(e,n,i,r,a,o){var l=this;var s=0;var u=l.data.list;var f=15;var c=5;var d;var h,p,y,v,g,_,b,x;var m,w,S;var k=e==2||e==3;var O=e==3||e==4;var P=k?i:r;if(n.length>0){n.sort(function(t,e){return O?u[t].edgey-u[e].edgey:u[e].edgey-u[t].edgey})}for(var A=0;A<n.length;A++){d=n[A];var C=u[d];var M=C.outRadius+C.moveDis;if(!C.enabled||C.y<P||s>=l.textMaxCount)continue;s++;p=C.edgey;y=Math.abs(C.edgex);v=p-h;if(A!=0&&(Math.abs(v)<f||O&&v<0||!O&&v>0)){p=O?h+f:h-f;if(M-Math.abs(p)>0){y=Math.sqrt(Math.pow(M,2)-Math.pow(p,2))}if(k&&-y>C.edgex||!k&&y<C.edgex){y=Math.abs(C.edgex)}}if(a){m=k?o.left:o.right;w=n.length-A;S=O?m-w*f:m+w*f;if(O&&p>S||!O&&p<S){p=S}}h=p;if(!a){if(k){o.left=h}else{o.right=h}}var j=k?-y-c:y+c;var T=j+l.origin.x;var E=p+l.origin.y;if(T>l._graphs.app.width||E<0||E>l._graphs.app.height){return}var I="M"+C.centerx+","+C.centery;I+="Q"+C.outx+","+C.outy+","+j+","+p;var D=new F({context:{lineType:"solid",path:I,lineWidth:1,strokeStyle:C.fillStyle}});var L=C.labelText;var R=document.createElement("div");R.style.cssText=" ;position:absolute;left:-1000px;top:-1000px;color:"+C.fillStyle+"";R.innerHTML=L;l.domContainer.appendChild(R);g=R.offsetWidth;_=R.offsetHeight;b=k?-y:y;x=p;switch(e){case 1:b+=c;x-=_/2;break;case 2:b-=g+c;x-=_/2;break;case 3:b-=g+c;x-=_/2;break;case 4:b+=c;x-=_/2;break}R.style.left=b+l.origin.x+"px";R.style.top=x+l.origin.y+"px";l.textSp.addChild(D);l.textList.push({width:g,height:_,x:b+l.origin.x,y:x+l.origin.y,data:C,textTxt:L,textEle:R})}}},{key:"_startWidgetLabel",value:function t(){var e=this;var n=e.data.list;var i=0,r=0,a=0,o=0;var l=[];var s=[{indexs:[],count:0},{indexs:[],count:0},{indexs:[],count:0},{indexs:[],count:0}];var u={right:{startQuadrant:4,endQuadrant:1,clockwise:true,indexs:[]},left:{startQuadrant:3,endQuadrant:2,clockwise:false,indexs:[]}};for(var f=0;f<n.length;f++){var c=n[f].quadrant;s[c-1].indexs.push(f);s[c-1].count++}if(s[0].count>1)s[0].indexs.reverse();if(s[2].count>1)s[2].indexs.reverse();if(s[0].count>s[3].count){u.right.startQuadrant=1;u.right.endQuadrant=4;u.right.clockwise=false}if(s[1].count>s[2].count){u.left.startQuadrant=2;u.left.endQuadrant=3;u.left.clockwise=true}u.right.indexs=s[u.right.startQuadrant-1].indexs.concat(s[u.right.endQuadrant-1].indexs);u.left.indexs=s[u.left.startQuadrant-1].indexs.concat(s[u.left.endQuadrant-1].indexs);var d,h;if(u.right.indexs.length>e.textMaxCount){h=u.right.indexs.slice(0);h.sort(function(t,e){return n[e].y-n[t].y});d=h.slice(e.textMaxCount);i=n[d[0]].percentage;a=n[d[0]].y}if(u.left.indexs.length>e.textMaxCount){h=u.left.indexs.slice(0);h.sort(function(t,e){return n[e].y-n[t].y});d=h.slice(e.textMaxCount);r=n[d[0]].percentage;o=n[d[0]].y}l.push(u.right.startQuadrant);l.push(u.right.endQuadrant);l.push(u.left.startQuadrant);l.push(u.left.endQuadrant);var p={};for(var f=0;f<l.length;f++){var y=f==1||f==3;e._widgetLabel(l[f],s[l[f]-1].indexs,o,a,y,p)}}},{key:"destroyLabel",value:function t(){var e=this;if(this.textSp){this.textSp.removeAllChildren()}l._.each(this.textList,function(t){e.domContainer.removeChild(t.textEle)});this.textList=[]}},{key:"_showGrowLabel",value:function t(){if(this.textSp&&this.textSp.context){this.textSp.context.globalAlpha=1;l._.each(this.textList,function(t){t.textEle.style.visibility="visible"})}}},{key:"_hideGrowLabel",value:function t(){if(this.textSp&&this.textSp.context){this.textSp.context.globalAlpha=0;l._.each(this.textList,function(t){t.textEle.style.visibility="hidden"})}}}]);return i}(l.event.Dispatcher);t.default=v}(e,n,X)});t(m),t(e(function(t,e){!function(t,e,n,w){Object.defineProperty(t,"__esModule",{value:true});var r=a(e),i;function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置",default:null},groupField:{detail:"分组字段",default:null,documentation:"groupField主要是给legend用的， 所有在legend中需要显示的分组数据，都用groupField"},sort:{detail:"排序，默认不排序，可以配置为asc,desc",default:null},startAngle:{detail:"起始角度",default:-90},allAngle:{detail:"全部角度",default:360},node:{detail:"单个节点（扇形）配置",propertys:{radius:{detail:"半径",default:null,documentation:"每个扇形单元的半径，也可以配置一个字段，就成了丁格尔玫瑰图"},innerRadius:{detail:"内径",default:0},outRadius:{detail:"外径",default:null},minRadius:{detail:"最小的半径厚度",default:10,documentation:"outRadius - innerRadius ， 也就是radius的最小值"},moveDis:{detail:"hover偏移量",default:15,documentation:"要预留moveDis位置来hover sector 的时候外扩"},fillStyle:{detail:"单个图形背景色",default:null},focus:{detail:"图形的hover设置",propertys:{enabled:{detail:"是否开启",default:true}}},select:{detail:"图形的选中效果",propertys:{enabled:{detail:"是否开启",default:true},radius:{detail:"选中效果图形的半径厚度",default:5},alpha:{detail:"选中效果图形的透明度",default:.7}}}}},label:{detail:"label",propertys:{field:{detail:"获取label的字段",default:null},enabled:{detail:"是否开启",default:false},format:{detail:"label的格式化函数，支持html",default:null}}}}}}]);function i(t,e){var n;l(this,i);n=u(this,f(i).call(this,t,e));n.type="pie";w._.extend(true,c(n),(0,w.getDefaultProps)(i.defaultProps()),t);n.init();return n}h(i,[{key:"init",value:function t(){this.data=this._dataHandle()}},{key:"_computerProps",value:function t(){var e=this.width;var n=this.height;if(!this.node.outRadius){var i=Math.min(e,n)/2;if(this.label.enabled){i-=this.node.moveDis}this.node.outRadius=parseInt(i)}if(this.node.radius!==null&&w._.isNumber(this.node.radius)){this.node.radius=Math.max(this.node.radius,this.node.minRadius);this.node.innerRadius=this.node.outRadius-this.node.radius}if(this.node.outRadius-this.node.innerRadius<this.node.minRadius){this.node.innerRadius=this.node.outRadius-this.node.minRadius}if(this.node.innerRadius<0){this.node.innerRadius=0}}},{key:"draw",value:function t(e){!e&&(e={});w._.extend(true,this,e);this._computerProps();this._pie=new r["default"](this,this._trimGraphs(this.data));this._pie.draw(e);var n=this;if(this.animation&&!e.resize){this._pie.grow(function(){n.fire("complete")})}else{this.fire("complete")}this.sprite.addChild(this._pie.sprite)}},{key:"show",value:function t(e){this._setEnabled(e,true)}},{key:"hide",value:function t(e){this._setEnabled(e,false)}},{key:"_setEnabled",value:function t(e,n){var i=this;w._.each(this.data,function(t){if(t.label===e){t.enabled=n;return false}});i._pie.resetData(i._trimGraphs(i.data))}},{key:"_dataHandle",value:function t(){var n=this;var e=[];var i=n.dataFrame;for(var r=0,a=i.length;r<a;r++){var o=i.getRowDataAt(r);var l={type:"pie",rowData:o,focused:false,focusEnabled:n.node.focus.enabled,selected:false,selectEnabled:n.node.select.enabled,selectedR:n.node.select.radius,selectedAlpha:n.node.select.alpha,enabled:true,fillStyle:null,color:null,value:o[n.field],label:o[n.groupField||n.label.field||n.field],labelText:null,iNode:r};var s=n._getColor(n.node.fillStyle,l);l.fillStyle=l.color=s;e.push(l)}if(e.length&&n.sort){e.sort(function(t,e){if(n.sort=="asc"){return t.value-e.value}else{return e.value-t.value}});w._.each(e,function(t,e){t.iNode=e})}return e}},{key:"_trimGraphs",value:function t(e){var n=this;var i=0;n.currentAngle=0+n.startAngle%360;var r=n.allAngle+n.startAngle%n.allAngle;var a=2;var o=0;var l=0;if(e.length){for(var s=0;s<e.length;s++){if(!e[s].enabled)continue;i+=e[s].value;if(n.node.radius&&w._.isString(n.node.radius)&&n.node.radius in e[s].rowData){var u=Number(e[s].rowData[n.node.radius]);o=Math.max(o,u);l=Math.min(l,u)}}if(i>0){for(var f=0;f<e.length;f++){var c=e[f].value/i;if(!e[f].enabled){c=0}var d=+(c*100).toFixed(a);var h=n.allAngle*c;var p=n.currentAngle+h>r?r:n.currentAngle+h;var y=Math.cos((n.currentAngle+h/2)/180*Math.PI);var v=Math.sin((n.currentAngle+h/2)/180*Math.PI);var g=n.currentAngle+h/2;y=y.toFixed(5);v=v.toFixed(5);var _=function(t){if(t>=r){t=r}t=t%n.allAngle;var e=parseInt(t/90);if(t>=0){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:case 4:return 4}}else if(t<0){switch(e){case 0:return 4;case-1:return 3;case-2:return 2;case-3:case-4:return 1}}}(g);var b=n.node.outRadius;if(n.node.radius&&w._.isString(n.node.radius)&&n.node.radius in e[f].rowData){var x=Number(e[f].rowData[n.node.radius]);b=parseInt((n.node.outRadius-n.node.innerRadius)*((x-l)/(o-l))+n.node.innerRadius)}var m=n.node.moveDis;w._.extend(e[f],{outRadius:b,innerRadius:n.node.innerRadius,startAngle:n.currentAngle,endAngle:p,midAngle:g,moveDis:m,outOffsetx:m*.7*y,outOffsety:m*.7*v,centerx:b*y,centery:b*v,outx:(b+m)*y,outy:(b+m)*v,edgex:(b+m)*y,edgey:(b+m)*v,orginPercentage:c,percentage:d,quadrant:_,labelDirection:_==1||_==4?1:0,iNode:f});e[f].labelText=n._getLabelText(e[f]);n.currentAngle+=h;if(n.currentAngle>r){n.currentAngle=r}}}}return{list:e,total:i}}},{key:"_getColor",value:function t(e,n){var i=this;var r=n.iNode;var a=e;if(w._.isArray(e)){a=e[r]}if(w._.isFunction(e)){a=s.apply(this,[n])}if(!a){a=i.app.getTheme(r)}return a}},{key:"_getLabelText",value:function t(e){var n;if(this.label.enabled){if(this.label.format){if(w._.isFunction(this.label.format)){n=this.label.format(e.label,e)}}else{var i=this.label.field||this.groupField;if(i){n=e.rowData[i]+"："+e.percentage+"%"}else{n=e.percentage+"%"}}}return n}},{key:"getList",value:function t(){return this.data}},{key:"getLegendData",value:function t(){var e=[];w._.each(this.data,function(t){e.push({name:t.label,color:t.fillStyle,enabled:t.enabled})});return e}},{key:"tipsPointerOf",value:function t(e){}},{key:"tipsPointerHideOf",value:function t(e){}},{key:"focusAt",value:function t(e){var n=this._pie.data.list[e];if(!this.node.focus.enabled)return;this._pie.focusOf(n)}},{key:"unfocusAt",value:function t(e){var n=this._pie.data.list[e];if(!n.node.focus.enabled)return;this._pie.unfocusOf(n)}},{key:"selectAt",value:function t(e){var n=this._pie.data.list[e];if(!this.node.select.enabled)return;this._pie.selectOf(n)}},{key:"unselectAt",value:function t(e){var n=this._pie.data.list[e];if(!this.node.select.enabled)return;this._pie.unselectOf(n)}}]);return i}(a(n)["default"]);w.global.registerComponent(v,"graphs","pie"),t["default"]=v}(e,m,p,X)})),t(e(function(t,e){!function(t,e,n,d){Object.defineProperty(t,"__esModule",{value:true});var i=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return f(t)}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return u(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=i["default"].Shapes.Polygon,g=i["default"].Shapes.Circle,_=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置",default:null},line:{detail:"线配置",propertys:{enabled:{detail:"是否显示",default:true},lineWidth:{detail:"线宽",default:2},strokeStyle:{detail:"线颜色",default:null}}},area:{detail:"面积区域配置",propertys:{enabled:{detail:"是否显示",default:true},fillStyle:{detail:"面积背景色",default:null},fillAlpha:{detail:"面积透明度",default:.1}}},node:{detail:"线上面的单数据节点图形配置",propertys:{enabled:{detail:"是否显示",default:true},strokeStyle:{detail:"边框色",default:"#ffffff"},radius:{detail:"半径",default:4},lineWidth:{detail:"边框大小",default:1}}}}}}]);function i(t,e){var n;l(this,i);n=s(this,u(i).call(this,t,e));n.type="radar";n.enabledField=null;n.groups={};d._.extend(true,f(n),(0,d.getDefaultProps)(i.defaultProps()),t);n.init();return n}h(i,[{key:"init",value:function t(){}},{key:"draw",value:function t(e){!e&&(e={});d._.extend(true,this,e);this.data=this._trimGraphs();this._widget();this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y;this.fire("complete")}},{key:"_widget",value:function t(){var u=this;var f=this.app.getComponent({name:"coord"});var c=0;d._.each(this.data,function(t,e){var n={};var i=[];d._.each(t,function(t,e){i.push([t.point.x,t.point.y])});var r=f.getFieldMapOf(e);var a=u._getStyle(u.line.strokeStyle,c,r.color,r);var o={pointList:i,cursor:"pointer"};if(u.line.enabled){o.lineWidth=u.line.lineWidth;o.strokeStyle=a}if(u.area.enabled){o.fillStyle=u._getStyle(u.area.fillStyle,c,r.color,r);o.fillAlpha=u._getStyle(u.area.fillAlpha,c,1,r)}var l=new v({hoverClone:false,context:o});n.area=l;u.sprite.addChild(l);l.__hoverFillAlpha=l.context.fillAlpha+.2;l.__fillAlpha=l.context.fillAlpha;l.on(d.event.types.get(),function(t){if(t.type=="mouseover"){this.context.fillAlpha=this.__hoverFillAlpha}if(t.type=="mouseout"){this.context.fillAlpha=this.__fillAlpha}u.app.fire(t.type,t)});if(u.node.enabled){var s=[];d._.each(t,function(t,e){i.push([t.point.x,t.point.y]);var n=new g({context:{cursor:"pointer",x:t.point.x,y:t.point.y,r:u.node.radius,lineWidth:u.node.lineWidth,strokeStyle:u.node.strokeStyle,fillStyle:a}});u.sprite.addChild(n);n.iNode=e;n.nodeData=t;n._strokeStyle=a;n.on(d.event.types.get(),function(t){t.aAxisInd=this.iNode;t.eventInfo={trigger:u.node,nodes:[this.nodeData]};u.app.fire(t.type,t)});s.push(n)});n.nodes=s}u.groups[e]=n;c++})}},{key:"tipsPointerOf",value:function t(e){var i=this;i.tipsPointerHideOf(e);if(e.eventInfo&&e.eventInfo.nodes){d._.each(e.eventInfo.nodes,function(n){if(i.data[n.field]){d._.each(i.data[n.field],function(t,e){if(n.iNode==e){i.focusOf(t)}})}})}}},{key:"tipsPointerHideOf",value:function t(e){var n=this;d._.each(n.data,function(t,e){d._.each(t,function(t){n.unfocusOf(t)})})}},{key:"focusOf",value:function t(e){if(e.focused)return;var n=this;var i=n.groups[e.field].nodes[e.iNode];i.context.r+=1;i.context.fillStyle=n.node.strokeStyle;i.context.strokeStyle=i._strokeStyle;e.focused=true}},{key:"unfocusOf",value:function t(e){if(!e.focused)return;var n=this;var i=n.groups[e.field].nodes[e.iNode];i.context.r-=1;i.context.fillStyle=i._strokeStyle;i.context.strokeStyle=n.node.strokeStyle;e.focused=false}},{key:"hide",value:function t(e){var n=this.app.getComponent({name:"coord"});this.enabledField=n.filterEnabledFields(this.field);var i=this.groups[e];if(i){i.area.context.visible=false;d._.each(i.nodes,function(t){t.context.visible=false})}}},{key:"show",value:function t(e){var n=this.app.getComponent({name:"coord"});this.enabledField=n.filterEnabledFields(this.field);var i=this.groups[e];if(i){i.area.context.visible=true;d._.each(i.nodes,function(t){t.context.visible=true})}}},{key:"_trimGraphs",value:function t(){var s=this;var u=this.app.getComponent({name:"coord"});this.enabledField=u.filterEnabledFields(this.field);var e={};d._.each(this.enabledField,function(r){var a=s.dataFrame.getFieldData(r);var o=u.getFieldMapOf(r);var l=[];d._.each(u.aAxis.angleList,function(t,e){var n=Math.PI*t/180;var i=u.getPointInRadianOfR(n,u.getROfNum(a[e]));l.push({type:"radar",field:r,iNode:e,rowData:s.dataFrame.getRowDataAt(e),focused:false,value:a[e],point:i,color:o.color})});e[r]=l});return e}},{key:"_getStyle",value:function t(e,n,i,r){var a=i;if(d._.isString(e)||d._.isNumber(e)){a=e}if(d._.isArray(e)){a=e[n]}if(d._.isFunction(e)){a=e(n,r)}if(a===undefined||a===null){a=i}return a}},{key:"getNodesAt",value:function t(i){var r=this.data;var a=[];d._.each(this.enabledField,function(t,e){if(d._.isArray(t)){d._.each(t,function(t,e){var n=r[t][i];n&&a.push(n)})}else{var n=r[t][i];n&&a.push(n)}});return a}}]);return i}(r["default"]);d.global.registerComponent(_,"graphs","radar"),t["default"]=_}(e,n,p,X)}));var w=e(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true});var a={value:function t(){}};function e(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n)throw new Error("illegal type: "+i);n[i]=[]}return new r(n)}function r(t){this._=t}function s(t,i){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0)e=t.slice(n+1),t=t.slice(0,n);if(t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function u(t,e){for(var n=0,i=t.length,r;n<i;++n){if((r=t[n]).name===e){return r.value}}}function f(t,e,n){for(var i=0,r=t.length;i<r;++i){if(t[i].name===e){t[i]=a,t=t.slice(0,i).concat(t.slice(i+1));break}}if(n!=null)t.push({name:e,value:n});return t}r.prototype=e.prototype={constructor:r,on:function t(e,n){var i=this._,r=s(e+"",i),a,o=-1,l=r.length;if(arguments.length<2){while(++o<l){if((a=(e=r[o]).type)&&(a=u(i[a],e.name)))return a}return}if(n!=null&&typeof n!=="function")throw new Error("invalid callback: "+n);while(++o<l){if(a=(e=r[o]).type)i[a]=f(i[a],e.name,n);else if(n==null)for(a in i){i[a]=f(i[a],e.name,null)}}return this},copy:function t(){var t={},e=this._;for(var n in e){t[n]=e[n].slice()}return new r(t)},call:function t(e,n){if((a=arguments.length-2)>0)for(var i=new Array(a),r=0,a,o;r<a;++r){i[r]=arguments[r+2]}if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r){o[r].value.apply(n,i)}},apply:function t(e,n,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a){r[a].value.apply(n,i)}}},t["default"]=e}(e)});t(w);var S=e(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}var A=Math.PI/180,C=1<<11>>5,M=1<<11,r=function u(){var k=[256,256],f=a,c=o,d=s,h=l,p=l,y=S,v=j,O=L,e=[],g=Infinity,_=(0,n["default"])("word","end"),b=null,P=Math.random,u={},x=F;u.canvas=function(t){return arguments.length?(x=N(t),u):x};u.start=function(){var n=m(x()),i=R((k[0]>>5)*k[1]),r=null,a=e.length,o=-1,l=[],s=e.map(function(t,e){t.text=f.call(this,t,e);t.font=c.call(this,t,e);t.style=h.call(this,t,e);t.weight=p.call(this,t,e);t.rotate=y.call(this,t,e);t.size=~~d.call(this,t,e);t.padding=v.call(this,t,e);return t}).sort(function(t,e){return e.size-t.size});if(b)clearInterval(b);b=setInterval(t,0);t();return u;function t(){var t=Date.now();while(Date.now()-t<g&&++o<a&&b){var e=s[o];e.x=k[0]*(P()+.5)>>1;e.y=k[1]*(P()+.5)>>1;T(n,e,s,o);if(e.hasText&&w(i,e,r)){l.push(e);_.call("word",u,e);if(r)I(r,e);else r=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}];e.x-=k[0]>>1;e.y-=k[1]>>1}}if(o>=a){u.stop();_.call("end",u,l,r)}}};u.stop=function(){if(b){clearInterval(b);b=null}return u};function m(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(C<<5)/e;t.height=M/e;var n=t.getContext("2d");n.fillStyle=n.strokeStyle="red";n.textAlign="center";return{context:n,ratio:e}}function w(t,e,n){var i=[{x:0,y:0},{x:k[0],y:k[1]}],r=e.x,a=e.y,o=Math.sqrt(k[0]*k[0]+k[1]*k[1]),l=O(k),s=P()<.5?1:-1,u=-s,f,c,d;while(f=l(u+=s)){c=~~f[0];d=~~f[1];if(Math.min(Math.abs(c),Math.abs(d))>=o)break;e.x=r+c;e.y=a+d;if(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>k[0]||e.y+e.y1>k[1])continue;if(!n||!E(e,t,k[0])){if(!n||D(e,n)){var h=e.sprite,p=e.width>>5,y=k[0]>>5,v=e.x-(p<<4),g=v&127,_=32-g,b=e.y1-e.y0,x=(e.y+e.y0)*y+(v>>5),m;for(var w=0;w<b;w++){m=0;for(var S=0;S<=p;S++){t[x+S]|=m<<_|(S<p?(m=h[w*p+S])>>>g:0)}x+=y}delete e.sprite;return true}}}return false}u.timeInterval=function(t){return arguments.length?(g=t==null?Infinity:t,u):g};u.words=function(t){return arguments.length?(e=t,u):e};u.size=function(t){return arguments.length?(k=[+t[0],+t[1]],u):k};u.font=function(t){return arguments.length?(c=N(t),u):c};u.fontStyle=function(t){return arguments.length?(h=N(t),u):h};u.fontWeight=function(t){return arguments.length?(p=N(t),u):p};u.rotate=function(t){return arguments.length?(y=N(t),u):y};u.text=function(t){return arguments.length?(f=N(t),u):f};u.spiral=function(t){return arguments.length?(O=W[t]||t,u):O};u.fontSize=function(t){return arguments.length?(d=N(t),u):d};u.padding=function(t){return arguments.length?(v=N(t),u):v};u.random=function(t){return arguments.length?(P=t,u):P};u.on=function(){var t=_.on.apply(_,arguments);return t===_?u:t};return u};function a(t){return t.text}function o(){return"serif"}function l(){return"normal"}function s(t){return Math.sqrt(t.value)}function S(){return(~~(Math.random()*6)-3)*30}function j(){return 1}function T(t,e,n,i){if(e.sprite)return;var r=t.context,a=t.ratio;r.clearRect(0,0,(C<<5)/a,M/a);var o=0,l=0,s=0,u=n.length;--i;while(++i<u){e=n[i];r.save();r.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var f=r.measureText(e.text+"m").width*a,c=e.size<<1;if(e.rotate){var d=Math.sin(e.rotate*A),h=Math.cos(e.rotate*A),p=f*h,y=f*d,v=c*h,g=c*d;f=Math.max(Math.abs(p+g),Math.abs(p-g))+31>>5<<5;c=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else{f=f+31>>5<<5}if(c>s)s=c;if(o+f>=C<<5){o=0;l+=s;s=0}if(l+c>=M)break;r.translate((o+(f>>1))/a,(l+(c>>1))/a);if(e.rotate)r.rotate(e.rotate*A);r.fillText(e.text,0,0);if(e.padding)r.lineWidth=2*e.padding,r.strokeText(e.text,0,0);r.restore();e.width=f;e.height=c;e.xoff=o;e.yoff=l;e.x1=f>>1;e.y1=c>>1;e.x0=-e.x1;e.y0=-e.y1;e.hasText=true;o+=f}var _=r.getImageData(0,0,(C<<5)/a,M/a).data,b=[];while(--i>=0){e=n[i];if(!e.hasText)continue;var f=e.width,x=f>>5,c=e.y1-e.y0;for(var m=0;m<c*x;m++){b[m]=0}o=e.xoff;if(o==null)return;l=e.yoff;var w=0,S=-1;for(var k=0;k<c;k++){for(var m=0;m<f;m++){var O=x*k+(m>>5),P=_[(l+k)*(C<<5)+(o+m)<<2]?1<<31-m%32:0;b[O]|=P;w|=P}if(w)S=k;else{e.y0++;c--;k--;l++}}e.y1=e.y0+S;e.sprite=b.slice(0,(e.y1-e.y0)*x)}}function E(t,e,n){n>>=5;var i=t.sprite,r=t.width>>5,a=t.x-(r<<4),o=a&127,l=32-o,s=t.y1-t.y0,u=(t.y+t.y0)*n+(a>>5),f;for(var c=0;c<s;c++){f=0;for(var d=0;d<=r;d++){if((f<<l|(d<r?(f=i[c*r+d])>>>o:0))&e[u+d])return true}u+=n}return false}function I(t,e){var n=t[0],i=t[1];if(e.x+e.x0<n.x)n.x=e.x+e.x0;if(e.y+e.y0<n.y)n.y=e.y+e.y0;if(e.x+e.x1>i.x)i.x=e.x+e.x1;if(e.y+e.y1>i.y)i.y=e.y+e.y1}function D(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function L(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function u(t){var n=4,i=n*t[0]/t[1],r=0,a=0;return function(t){var e=t<0?-1:1;switch(Math.sqrt(1+4*e*t)-e&3){case 0:r+=i;break;case 1:a+=n;break;case 2:r-=i;break;default:a-=n;break}return[r,a]}}function R(t){var e=[],n=-1;while(++n<t){e[n]=0}return e}function F(){return document.createElement("canvas")}function N(t){return typeof t==="function"?t:function(){return t}}var W={archimedean:L,rectangular:u};t["default"]=r}(e,w)});t(S),t(e(function(t,e){!function(t,e,n,i,o){Object.defineProperty(t,"__esModule",{value:true});var r=s(e),a=s(n),l=s(i);function s(t){return t&&t.__esModule?t:{default:t}}function u(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){u=function t(e){return typeof e}}else{u=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return u(t)}function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){if(e&&(u(e)==="object"||typeof e==="function")){return e}return h(t)}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return d(t)}function h(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function y(t,e,n){if(e)p(t.prototype,e);if(n)p(t,n);return t}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=r["default"].Display.Text,b=function(t){v(r,t);y(r,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置",default:null},node:{detail:"节点文字配置",propertys:{fontFamily:{detail:"字体设置",default:"Impact"},fontColor:{detail:"文字颜色",default:"#999"},fontSize:{detail:"文本字体大小",default:function t(){return this.minFontSize+Math.random()*this.maxFontSize}},maxFontSize:{detail:"文本最大字体大小",default:30},minFontSize:{detail:"文本最小字体大小",default:16},fontWeight:{detail:"fontWeight",default:"normal"},format:{detail:"文本格式化处理函数",default:null},padding:{detail:"文本间距",default:10},rotation:{detail:"文本旋转角度",default:function t(){return(~~(Math.random()*6)-3)*30}},strokeStyle:{detail:"文本描边颜色",default:null},select:{detail:"文本选中效果",propertys:{enabled:{detail:"是否开启选中",default:true},lineWidth:{detail:"选中后的文本描边宽",default:2},strokeStyle:{detail:"选中后的文本描边色",default:"#666"}}},focus:{detail:"文本hover效果",propertys:{enabled:{detail:"是否开启hover效果",default:true}}}}}}}}]);function r(t,e){var n;f(this,r);n=c(this,d(r).call(this,t,e));n.type="cloud";var i=h(n);n.node={_maxFontSizeVal:0,_minFontSizeVal:null};o._.extend(true,h(n),(0,o.getDefaultProps)(r.defaultProps()),t);n.node.fontColor=function(t){return i.app.getTheme(t.iNode)};n.init();return n}y(r,[{key:"init",value:function t(){}},{key:"draw",value:function t(e){!e&&(e={});o._.extend(true,this,e);this._drawGraphs();this.sprite.context.x=this.width/2;this.sprite.context.y=this.height/2;this.fire("complete")}},{key:"getDaraFrameIndOfVal",value:function t(e){var n=this;var i=this.dataFrame;var r=o._.find(i.data,function(t){return t.field==n.field});var a=o._.indexOf(r.data,e);return a}},{key:"_getFontSize",value:function t(e,n){var i=this.node.minFontSize;if(o._.isFunction(this.node.fontSize)){i=this.node.fontSize(e)}if(o._.isString(this.node.fontSize)&&this.node.fontSize in e){var n=Number(e[this.node.fontSize]);if(!isNaN(n)){i=this.node.minFontSize+(this.node.maxFontSize-this.node.minFontSize)/(this.node._maxFontSizeVal-this.node._minFontSizeVal)*(n-this.node._minFontSizeVal)}}if(o._.isNumber(this.node.fontSize)){i=this.node.fontSize}return i}},{key:"_getRotate",value:function t(e,n){var i=this.node.rotation;if(o._.isFunction(this.node.rotation)){i=this.node.rotation(e,n)||0}return i}},{key:"_getFontColor",value:function t(e){var n;if(o._.isString(this.node.fontColor)){n=this.node.fontColor}if(o._.isFunction(this.node.fontColor)){n=this.node.fontColor(e)}if(n===undefined||n===null){n="#ccc"}return n}},{key:"_drawGraphs",value:function t(){var a=this;if(o._.isString(this.node.fontSize)){o._.each(a.dataFrame.getFieldData(this.node.fontSize),function(t){a.node._maxFontSizeVal=Math.max(a.node._maxFontSizeVal,t);a.node._minFontSizeVal=Math.min(a.node._minFontSizeVal,t)})}var e=(0,l["default"])().size([a.width,a.height]).words(a.dataFrame.getFieldData(a.field).map(function(t,e){var n=a.app.dataFrame.getRowDataAt(a.getDaraFrameIndOfVal(t));var i={type:"cloud",rowData:n,field:a.field,value:t,text:null,size:a._getFontSize(n,t),iNode:e,color:null};i.fontColor=a._getFontColor(i);var r=t;if(a.node.format){r=a.node.format(t,i)}i.text=r||t;return i})).padding(a.node.padding).rotate(function(t,e){return a._getRotate(t,e)}).font(a.node.fontFamily).fontSize(function(t){return t.size}).on("end",n);e.start();function n(i,t){a.data=i;a.sprite.removeAllChildren();o._.each(i,function(t,e){t.iNode=e;t.dataLen=i.length;t.focused=false;t.selected=false;var n=new _(t.text,{context:{x:t.x,y:t.y,fontSize:t.size,fontFamily:t.font,rotation:t.rotate,textBaseline:"middle",textAlign:"center",cursor:"pointer",fontWeight:a.node.fontWeight,fillStyle:t.fontColor}});a.sprite.addChild(n);a.node.focus.enabled&&n.hover(function(t){a.focusAt(this.nodeData.iNode)},function(t){!this.nodeData.selected&&a.unfocusAt(this.nodeData.iNode)});n.nodeData=t;t._node=n;n.on(o.event.types.get(),function(t){t.eventInfo={trigger:a.node,title:null,nodes:[this.nodeData]};if(this.nodeData.text){t.eventInfo.title=this.nodeData.text}a.app.fire(t.type,t)})})}}},{key:"focusAt",value:function t(e){var n=this.data[e];if(!this.node.focus.enabled||n.focused)return;var i=n._node.context;i.fontSize+=3;n.focused=true}},{key:"unfocusAt",value:function t(e){var n=this.data[e];if(!this.node.focus.enabled||!n.focused)return;var i=n._node.context;i.fontSize-=3;n.focused=false}},{key:"selectAt",value:function t(e){var n=this.data[e];if(!this.node.select.enabled||n.selected)return;var i=n._node.context;i.lineWidth=this.node.select.lineWidth;i.strokeAlpha=this.node.select.strokeAlpha;i.strokeStyle=this.node.select.strokeStyle;n.selected=true}},{key:"unselectAt",value:function t(e){var n=this.data[e];if(!this.node.select.enabled||!n.selected)return;var i=n._node.context;i.strokeStyle=this.node.strokeStyle;n.selected=false}}]);return r}(a["default"]);o.global.registerComponent(b,"graphs","cloud"),t["default"]=b}(e,n,p,S,X)}));var k=e(function(t,e){!function(t,e,M){Object.defineProperty(t,"__esModule",{value:true}),t.default=undefined;var j=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function a(t,e,n){if(e)i(t.prototype,e);if(n)i(t,n);return t}var T=j["default"].Shapes.Circle,o=function(){a(i,null,[{key:"defaultProps",value:function t(){return{sort:{detail:"排序",default:"desc"},sortField:{detail:"用来排序的字段",default:"null"},node:{detail:"单个数据节点图形配置",propertys:{maxRadius:{detail:"最大半径",default:30},minRadius:{detail:"最小半径",default:5},radius:{detail:"半径",default:15,documentation:'也可以是个function,也可以配置{field:"pv"}来设置字段， 自动计算r'},lineWidth:{detail:"描边线宽",default:1},strokeStyle:{detail:"描边颜色",default:"#ffffff"},fillStyle:{detail:"图形填充色",default:"#f2fbfb"},strokeAlpha:{detail:"边框透明度",default:.6},focus:{detail:"hover态设置",propertys:{enabled:{detail:"是否开启",default:true},strokeAlpha:{detail:"hover时候边框透明度",default:.7},lineWidth:{detail:"hover时候边框大小",default:2},strokeStyle:{detail:"hover时候边框颜色",default:"#fff"}}},select:{detail:"选中态设置",propertys:{enabled:{detail:"是否开启",default:false},strokeAlpha:{detail:"选中时候边框透明度",default:1},lineWidth:{detail:"选中时候边框大小",default:2},strokeStyle:{detail:"选中时候边框颜色",default:"#fff"},triggerEventType:{detail:"触发事件",default:"click"}}}}},label:{detail:"文本设置",propertys:{enabled:{detail:"是否开启",default:true},fontColor:{detail:"文本颜色",default:"#666666"},fontSize:{detail:"文本字体大小",default:13},textAlign:{detail:"水平对齐方式",default:"center"},verticalAlign:{detail:"基线对齐方式",default:"middle"},position:{detail:"文本布局位置",default:"center"},offsetX:{detail:"x方向偏移量",default:0},offsetY:{detail:"y方向偏移量",default:0}}}}}}]);function i(t,e,n){r(this,i);this._opt=t;this.dataFrame=e;this._graphs=n;this.app=n.app;this.field=null;this.iGroup=0;this.groupLen=1;this.rRange={start:0,to:0};this.width=0;this.height=0;this.selectInds=[];this.layoutType="radian";this.pit={radius:30};this.planets=[];this.maxRingNum=0;this.ringNum=0;M._.extend(true,this,(0,M.getDefaultProps)(i.defaultProps()),t);if(this.node.maxRadius>this.pit.radius){this.pit.radius=this.node.maxRadius}this.init()}a(i,[{key:"init",value:function t(){var e=this.app.getComponent({name:"coord"});this.sprite=new j["default"].Display.Sprite({id:"group_"+this.iGroup,context:{x:e.origin.x,y:e.origin.y}});this._trimGraphs();this.draw()}},{key:"_trimGraphs",value:function t(){var i=this;var e=this.app.getComponent({name:"coord"});var n=e.getMaxDisToViewOfOrigin();if((n-this.rRange.to)/(this.pit.radius*2)<this.groupLen-1-this.iGroup){this.rRange.to=n-(this.groupLen-1-this.iGroup)*this.pit.radius*2}if(this.rRange.to-this.rRange.start<this.pit.radius*2){this.rRange.to=this.rRange.start+this.pit.radius*2}if(!this.maxRingNum){this.maxRingNum=parseInt((this.rRange.to-this.rRange.start)/(this.pit.radius*2),10);this.ringNum=this.maxRingNum}this.rRange.to=this.rRange.start+this.ringNum*this.pit.radius*2;var r=[];var a=this.dataFrame.length;for(var o=0;o<a;o++){var l=this.dataFrame.getRowDataAt(o);var s={type:"planet",groupLen:this.groupLen,iGroup:i.iGroup,iNode:o,nodeElement:null,labelElement:null,rowData:l,iRing:null,iPlanet:null,fillStyle:null,color:null,strokeStyle:null,pit:null,ringInd:-1,field:i.field,label:l[i.field],focused:false,selected:!!~M._.indexOf(this.selectInds,l.__index__)};r.push(s)}if(i.sortField){r=r.sort(function(t,e){var n=i.sortField;if(i.sort=="desc"){return e.rowData[n]-t.rowData[n]}else{return t.rowData[n]-e.rowData[n]}});M._.each(r,function(t,e){t.iNode=e})}this._rings=this["_setRings_"+this.layoutType+"Range"](r);this.planets=r}},{key:"_setRings_radianRange",value:function t(n){var s=this;var i=[];var e=this.app.getComponent({name:"coord"});for(var r=0,a=this.ringNum;r<a;r++){var o=r*this.pit.radius*2+this.pit.radius+this.rRange.start;if(!s._graphs.center.enabled){o=r*this.pit.radius*2+this.rRange.start}var l=e.getRadiansAtR(o,s.width,s.height);var u=Math.atan(this.pit.radius/o);i.push({arcs:l,pits:[],planets:[],radius:o,max:0})}var f=0;M._.each(i,function(a,t){var o=Math.asin(s.pit.radius/a.radius)*2;if(a.radius==0){o=Math.PI*2}var l=0;M._.each(a.arcs,function(t){var e=s._getDiffRadian(t[0].radian,t[1].radian);if(e>=o){var n=parseInt(e/o,10);l+=n;for(var i=0;i<n;i++){var r={hasRadish:false,start:(t[0].radian+o*i+Math.PI*2)%(Math.PI*2)};r.middle=(r.start+o/2+Math.PI*2)%(Math.PI*2);r.to=(r.start+o+Math.PI*2)%(Math.PI*2);a.pits.push(r)}}});a.max=l;f+=l;a.pits=M._.shuffle(a.pits)});var c=0;M._.each(i,function(r,t){if(c>=n.length){return false}var e=Math.ceil(r.max/f*n.length);e=Math.min(r.max,e);r.planets=n.slice(c,c+e);if(t==i.length-1){r.planets=n.slice(c)}c+=e;M._.each(r.planets,function(t,e){if(e>=r.pits.length){return}var n=M._.filter(r.pits,function(t){return!t.hasRadish});var i=n[parseInt(Math.random()*n.length)];i.hasRadish=true;t.pit=i})});return i}},{key:"_getDiffRadian",value:function t(e,n){var i=n-e;if(n<e){i=(n+Math.PI*2-e)%(Math.PI*2)}return i}},{key:"_setRings_indexRange",value:function t(e){}},{key:"_setRings_valRange",value:function t(e){}},{key:"draw",value:function t(){var A=this;var C=this.app.getComponent({name:"coord"});M._.each(this._rings,function(S,k){var O={rotation:0};if(S.arcs.length==1&&S.arcs[0][0].radian==0&&S.arcs[0][1].radian==Math.PI*2){O.rotation=parseInt(Math.random()*360)}var P=new j["default"].Display.Sprite({context:O});M._.each(S.planets,function(t,e){if(!t.pit){return}var n=C.getPointInRadianOfR(t.pit.middle,S.radius);var i=A._getRProp(A.node.radius,k,e,t);var r=A.node.maxRadius-i;var a=parseInt(Math.random()*r);var o=parseInt(Math.random()*360);var l=o*Math.PI/180;if(a!=0){n.x+=Math.sin(l)*a;n.y+=Math.cos(l)*a}var s=A.node;if(t.selected){s=A.node.select}var u=A._getProp(A.node.fillStyle,t);var f=A._getProp(s.strokeStyle,t);var c=A._getProp(s.strokeAlpha,t);var d=A._getProp(s.lineWidth,t);var h={x:n.x,y:n.y,r:i,fillStyle:u,lineWidth:d,strokeStyle:f,strokeAlpha:c,cursor:"pointer"};t.color=t.fillStyle=u;t.strokeStyle=f;t.iRing=k;t.iPlanet=e;var p=new T({hoverClone:false,context:h});p.on(M.event.types.get(),function(t){t.eventInfo={title:null,trigger:A.node,nodes:[this.nodeData]};if(this.nodeData.label){t.eventInfo.title=this.nodeData.label}if(A.node.focus.enabled){if(t.type=="mouseover"){A.focusAt(this.nodeData)}if(t.type=="mouseout"){A.unfocusAt(this.nodeData)}}if(A.node.select.enabled&&t.type==A.node.select.triggerEventType){if(this.nodeData.selected){A.unselectAt(this.nodeData)}else{A.selectAt(this.nodeData)}}A.app.fire(t.type,t)});p.nodeData=t;t.nodeElement=p;p.ringInd=k;p.planetIndInRing=e;P.addChild(p);if(A._graphs.animation){var y=p.context.r;var v=p.context.globalAlpha;p.context.r=1;p.context.globalAlpha=.1;p.animate({r:y,globalAlpha:v},{delay:Math.round(Math.random()*1500),onComplete:function t(){p.labelElement&&(p.labelElement.context.visible=true);var e=p.clone();P.addChildAt(e,0);e.animate({r:y+10,globalAlpha:0},{onComplete:function t(){e.destroy()}})}})}var g={x:n.x,y:n.y,fontSize:A.label.fontSize,textAlign:A.label.textAlign,textBaseline:A.label.verticalAlign,fillStyle:A.label.fontColor,rotation:-O.rotation,rotateOrigin:{x:0,y:0}};var _=new j["default"].Display.Text(t.label,{context:g});var b=_.getTextWidth();var x=_.getTextHeight();if(b>i*2){g.fontSize=A.label.fontSize-3}if(M._.isFunction(A.label.position)){var m=A.label.position({node:p,circleR:i,circleCenter:{x:n.x,y:n.y},textWidth:b,textHeight:x});g.rotation=-O.rotation;g.rotateOrigin={x:-(m.x-g.x),y:-(m.y-g.y)};g.x=m.x;g.y=m.y}if(A.label.position=="auto"){if(b>i*2){w()}}if(A.label.position=="bottom"){w()}function w(){g.y=n.y+i+3;g.rotation=-O.rotation;g.rotateOrigin={x:0,y:-(i+x*.7)}}g.x+=A.label.offsetX;g.y+=A.label.offsetY;_=new j["default"].Display.Text(t.label,{context:g});p.labelElement=_;_.nodeData=t;t.labelElement=_;if(A._graphs.animation){_.context.visible=false}P.addChild(_)});A.sprite.addChild(P)})}},{key:"_getRProp",value:function t(e,n,i,r){var a=this;if(M._.isString(e)&&M._.indexOf(a.dataFrame.fields,e)>-1){if(this.__rValMax==undefined&&this.__rValMax==undefined){this.__rValMax=0;this.__rValMin=0;M._.each(a.planets,function(t){a.__rValMax=Math.max(a.__rValMax,t.rowData[e]);a.__rValMin=Math.min(a.__rValMin,t.rowData[e])})}var o=r.rowData[e];return a.node.minRadius+(o-this.__rValMin)/(this.__rValMax-this.__rValMin)*(a.node.maxRadius-a.node.minRadius)}return a._getProp(e,r)}},{key:"_getProp",value:function t(e,n){var i=this.iGroup;if(M._.isFunction(e)){return e.apply(this,[n,i])}return e}},{key:"getPlanetAt",value:function t(e){var n=e;if(M._.isNumber(e)){M._.each(this.planets,function(t){if(t.rowData.__index__==e){n=t;return false}})}return n}},{key:"selectAt",value:function t(e){if(!this.node.select.enabled)return;var n=this.getPlanetAt(e);n.selected=true;if(n.nodeElement){n.nodeElement.context.lineWidth=this._getProp(this.node.select.lineWidth,n);n.nodeElement.context.strokeStyle=this._getProp(this.node.select.strokeStyle,n);n.nodeElement.context.strokeAlpha=this._getProp(this.node.select.strokeAlpha,n)}for(var i=0;i<this.selectInds.length;i++){if(e===this.selectInds[i]){this.selectInds.splice(i--,1);break}}}},{key:"unselectAt",value:function t(e){if(!this.node.select.enabled)return;var n=this.getPlanetAt(e);n.selected=false;if(n.nodeElement){n.nodeElement.context.lineWidth=this._getProp(this.node.lineWidth,n);n.nodeElement.context.strokeAlpha=this._getProp(this.node.strokeAlpha,n)}this.selectInds.push(e)}},{key:"getSelectedNodes",value:function t(){return M._.filter(this.planets,function(t){return t.selected})}},{key:"focusAt",value:function t(e){if(!this.node.focus.enabled)return;var n=this.getPlanetAt(e);if(n.selected)return;n.focused=true;if(n.nodeElement){n.nodeElement.context.lineWidth=this._getProp(this.node.focus.lineWidth,n);n.nodeElement.context.strokeStyle=this._getProp(this.node.focus.strokeStyle,n);n.nodeElement.context.strokeAlpha=this._getProp(this.node.focus.strokeAlpha,n)}}},{key:"unfocusAt",value:function t(e){if(!this.node.focus.enabled)return;var n=this.getPlanetAt(e);if(n.selected)return;n.focused=false;if(n.nodeElement){n.nodeElement.context.lineWidth=this._getProp(this.node.lineWidth,n);n.nodeElement.context.strokeAlpha=this._getProp(this.node.strokeAlpha,n)}}}]);return i}();t.default=o}(e,n,X)});t(k),t(e(function(t,e){!function(t,e,n,i,s){Object.defineProperty(t,"__esModule",{value:true});var f=a(e),r=a(n),u=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return h(t)}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return d(t)}function h(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function y(t,e,n){if(e)p(t.prototype,e);if(n)p(t,n);return t}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=f["default"].Display.Text,b=f["default"].Shapes.Circle,x=f["default"].Shapes.Line,m=f["default"].Shapes.Rect,w=f["default"].Shapes.Sector,S=function(t){v(i,t);y(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段设置",default:null},center:{detail:"中心点设置",propertys:{enabled:{detail:"是否显示中心",default:true},text:{detail:"中心区域文本",default:"center"},radius:{detail:"中心圆半径",default:30},fillStyle:{detail:"中心背景色",default:"#70629e"},fontSize:{detail:"中心字体大小",default:15},fontColor:{detail:"中心字体颜色",default:"#ffffff"},margin:{detail:"中区区域和外围可绘图区域距离",default:20},cursor:{detail:"中心节点的鼠标手势",default:"default"}}},selectInds:{detail:"选中的数据索引",default:[]},grid:{detail:"星系图自己的grid",propertys:{rings:{detail:"环配置",propertys:{fillStyle:{detail:"背景色",default:null},strokeStyle:{detail:"环线色",default:null},lineWidth:{detail:"环线宽",default:1},count:{detail:"分几环",default:3}}},rays:{detail:"射线配置",propertys:{count:{detail:"射线数量",default:0},globalAlpha:{detail:"线透明度",default:.4},strokeStyle:{detail:"线色",default:"#10519D"},lineWidth:{detail:"线宽",default:1}}}}},bewrite:{detail:"planet的趋势描述",propertys:{enabled:{detail:"是否开启趋势描述",default:false},text:{detail:"描述文本",default:null},fontColor:{detail:"fontColor",default:"#999"},fontSize:{detail:"fontSize",default:12}}},scan:{detail:"扫描效果",propertys:{enabled:{detail:"是否开启扫描效果",default:false},fillStyle:{detail:"扫描效果颜色",default:null},alpha:{detail:"起始透明度",default:.6},angle:{detail:"扫描效果的覆盖角度",default:90},r:{detail:"扫描效果覆盖的半径",default:null},repeat:{detail:"扫描次数",default:3}}},_props:[u["default"]]}}}]);function i(t,e){var n;l(this,i);n=c(this,d(i).call(this,t,e));n.type="planet";n.groupDataFrames=[];n.groupField=null;n._ringGroups=[];n.grid={rings:{_section:[]}};s._.extend(true,h(n),(0,s.getDefaultProps)(i.defaultProps()),t);if(n.center.radius==0||!n.center.enabled){n.center.radius=0;n.center.margin=0;n.center.enabled=false}n.__scanIngCurOration=0;n.init();return n}y(i,[{key:"init",value:function t(){this.gridSp=new f["default"].Display.Sprite({id:"gridSp"});this.groupSp=new f["default"].Display.Sprite({id:"groupSp"});this.scanSp=new f["default"].Display.Sprite({id:"scanSp"});this.centerSp=new f["default"].Display.Sprite({id:"centerSp"});this.sprite.addChild(this.gridSp);this.sprite.addChild(this.groupSp);this.sprite.addChild(this.scanSp);this.sprite.addChild(this.centerSp)}},{key:"draw",value:function t(e){!e&&(e={});s._.extend(true,this,e);this._dataGroupHandle();this._drawGroups();this._drawBack();this._drawBewrite();this._drawCenter();this._drawScan();this.fire("complete")}},{key:"_getMaxR",value:function t(){var e;try{e=this.graphs.group.circle.maxRadius}catch(t){}if(e==undefined){e=30}return e}},{key:"_drawGroups",value:function t(){var r=this;var a=this.center.radius+this.center.margin;var o=r.app.getComponent({name:"coord"}).getMaxDisToViewOfOrigin()-r.center.radius-r.center.margin;var l=this._getMaxR();s._.each(this.groupDataFrames,function(t,e){var n=a+o*(t.length/r.dataFrame.length);var i=new u["default"](s._.extend(true,{iGroup:e,groupLen:r.groupDataFrames.length,rRange:{start:a,to:n},width:r.width-l*2,height:r.height-l*2,selectInds:r.selectInds},r._opt),t,r);a=i.rRange.to;r._ringGroups.push(i);r.grid.rings._section.push({radius:i.rRange.to})});s._.each(r._ringGroups,function(t){r.sprite.addChild(t.sprite)})}},{key:"_drawCenter",value:function t(){var e=this;if(this.center.enabled){this._center=new b({hoverClone:false,context:{x:this.origin.x,y:this.origin.y,fillStyle:this.center.fillStyle,r:this.center.radius,cursor:this.center.cursor}});this._centerTxt=new _(this.center.text,{context:{x:this.origin.x,y:this.origin.y,fontSize:this.center.fontSize,textAlign:"center",textBaseline:"middle",fillStyle:this.center.fontColor}});this._center.on(s.event.types.get(),function(t){t.eventInfo={title:e.center.text,trigger:e.center,nodes:[e.center]};if(e.center["onclick"]){if(t.type=="mousedown"){e._center.context.r+=2}if(t.type=="mouseup"){e._center.context.r-=2}}e.app.fire(t.type,t)});this.centerSp.addChild(this._center);this.centerSp.addChild(this._centerTxt)}}},{key:"_drawBack",value:function t(){var e=this;var n=this.app.getComponent({name:"coord"});if(e.grid.rings._section.length==1){var i=(e.grid.rings._section[0].radius-e.center.radius)/e.grid.rings.count;e.grid.rings._section=[];for(var r=0;r<e.grid.rings.count;r++){e.grid.rings._section.push({radius:e.center.radius+i*(r+1)})}}else{e.grid.rings.count=e.grid.rings._section.length}for(var r=e.grid.rings._section.length-1;r>=0;r--){var a=e.grid.rings._section[r];e.gridSp.addChild(new b({context:{x:n.origin.x,y:n.origin.y,r:a.radius,lineWidth:e._getBackProp(e.grid.rings.lineWidth,r),strokeStyle:e._getBackProp(e.grid.rings.strokeStyle,r),fillStyle:e._getBackProp(e.grid.rings.fillStyle,r)}}))}if(e.grid.rays.count>1){var o=n.origin.x;var l=n.origin.y;var s=360/e.grid.rays.count;var u=n.getMaxDisToViewOfOrigin();if(e.grid.rings._section.length){u=e.grid.rings._section.slice(-1)[0].radius}for(var r=0,f=e.grid.rays.count;r<f;r++){var c=s*r/180*Math.PI;var d=o+u*Math.cos(c);var h=l+u*Math.sin(c);e.gridSp.addChild(new x({context:{start:{x:o,y:l},end:{x:d,y:h},lineWidth:e._getBackProp(e.grid.rays.lineWidth,r),strokeStyle:e._getBackProp(e.grid.rays.strokeStyle,r),globalAlpha:e.grid.rays.globalAlpha}}))}}var p=new m({name:"clipRect",context:{x:n.origin.x-e.app.width/2,y:n.origin.y-e.height/2,width:e.app.width,height:e.height}});e.gridSp.clipTo(p);e.sprite.addChild(p)}},{key:"_getBackProp",value:function t(e,n){var i=null;if(s._.isFunction(e)){i=e.apply(this,[{scaleInd:n,count:this.grid.rings._section.length,groups:this._ringGroups,graphs:this}])}if(s._.isString(e)||s._.isNumber(e)){i=e}if(s._.isArray(e)){i=e[n]}return i}},{key:"_drawBewrite",value:function t(){var a=this;if(a.bewrite.enabled){var e=function t(e,n,i,r){i.context.x=e*a.center.radius+e*20;l.addChild(i);l.addChild(new x({context:{lineType:"dashed",start:{x:i.context.x,y:0},end:{x:e*(n?s/2-o/2:s),y:0},lineWidth:1,strokeStyle:"#ccc"}}));if(n){n.context.x=e*(s/2);l.addChild(n);l.addChild(new x({context:{lineType:"dashed",start:{x:e*(s/2+o/2),y:0},end:{x:e*s,y:0},lineWidth:1,strokeStyle:"#ccc"}}))}r.context.x=e*s;l.addChild(r)};var n,o,i,r;if(a.bewrite.text){n=new f["default"].Display.Text(a.bewrite.text,{context:{fillStyle:a.bewrite.fontColor,fontSize:a.bewrite.fontSize,textBaseline:"middle",textAlign:"center"}});o=n.getTextWidth()}i=new f["default"].Display.Text("强",{context:{fillStyle:a.bewrite.fontColor,fontSize:a.bewrite.fontSize,textBaseline:"middle",textAlign:"center"}});r=new f["default"].Display.Text("弱",{context:{fillStyle:a.bewrite.fontColor,fontSize:a.bewrite.fontSize,textBaseline:"middle",textAlign:"center"}});var l=new f["default"].Display.Sprite({context:{x:this.origin.x,y:this.origin.y}});a.sprite.addChild(l);var s=a.width/2;e(1,n.clone(),i.clone(),r.clone());e(-1,n.clone(),i.clone(),r.clone())}}},{key:"scan",value:function t(){var n=this;this._scanAnim&&this._scanAnim.stop();var e=n._getScanSp();if(n.__scanIngCurOration==360){e.context.rotation=0}n._scanAnim=e.animate({rotation:360,globalAlpha:1},{duration:1e3*((360-n.__scanIngCurOration)/360),onUpdate:function t(e){n.__scanIngCurOration=e.rotation},onComplete:function t(){e.context.rotation=0;n._scanAnim=e.animate({rotation:360},{duration:1e3,repeat:1e3,onUpdate:function t(e){n.__scanIngCurOration=e.rotation}})}})}},{key:"_drawScan",value:function t(e){var n=this;if(n.scan.enabled){var i=n._getScanSp();if(n.__scanIngCurOration==360){i.context.rotation=0}n._scanAnim&&n._scanAnim.stop();n._scanAnim=i.animate({rotation:360,globalAlpha:1},{duration:1e3*((360-n.__scanIngCurOration)/360),onUpdate:function t(e){n.__scanIngCurOration=e.rotation},onComplete:function t(){i.context.rotation=0;n._scanAnim=i.animate({rotation:360},{duration:1e3,repeat:n.scan.repeat-2,onUpdate:function t(e){n.__scanIngCurOration=e.rotation},onComplete:function t(){i.context.rotation=0;n._scanAnim=i.animate({rotation:360,globalAlpha:0},{duration:1e3,onUpdate:function t(e){n.__scanIngCurOration=e.rotation},onComplete:function t(){i.destroy();n.__scanSp=null;delete n.__scanSp;n.__scanIngCurOration=0;e&&e()}})}})}})}}},{key:"_getScanSp",value:function t(){var e=this;var n=e.__scanSp;if(!n){n=new f["default"].Display.Sprite({context:{x:this.origin.x,y:this.origin.y,globalAlpha:0,rotation:e.__scanIngCurOration}});e.scanSp.addChild(n);e.__scanSp=n;var i=e.scan.r||e.height/2-10;var r=e.scan.fillStyle||e.center.fillStyle;var a=e.scan.angle;for(var o=0,l=a;o<l;o++){var s=new w({context:{r:i,fillStyle:r,clockwise:true,startAngle:360-o,endAngle:359-o,globalAlpha:e.scan.alpha-e.scan.alpha/a*o}});n.addChild(s)}var u=new x({context:{end:{x:i,y:0},lineWidth:1,strokeStyle:r}});n.addChild(u)}return n}},{key:"_dataGroupHandle",value:function t(){var n=s._.indexOf(this.dataFrame.fields,this.groupField);if(n>=0){var i=this.dataFrame.org[0];var r={};s._.each(this.dataFrame.org,function(t,e){if(e){if(!r[t[n]]){r[t[n]]=[s._.clone(i)]}r[t[n]].push(t)}});for(var e in r){this.groupDataFrames.push((0,s.dataFrame)(r[e]))}}else{this.groupDataFrames.push(this.dataFrame)}}},{key:"show",value:function t(e,n){this.getAgreeNodeData(n,function(t){t.nodeElement&&(t.nodeElement.context.visible=true);t.labelElement&&(t.labelElement.context.visible=true)})}},{key:"hide",value:function t(e,n){this.getAgreeNodeData(n,function(t){t.nodeElement&&(t.nodeElement.context.visible=false);t.labelElement&&(t.labelElement.context.visible=false)})}},{key:"getAgreeNodeData",value:function t(i,r){s._.each(this._ringGroups,function(t){s._.each(t._rings,function(t,e){s._.each(t.planets,function(t,e){var n=t.rowData;if(i.params.name==n[i.params.field]){r&&r(t)}})})})}},{key:"getLayoutNodes",value:function t(){var e=[];s._.each(this._ringGroups,function(t){s._.each(t.planets,function(t){if(t.pit){e.push(t)}})});return e}},{key:"getInvalidNodes",value:function t(){var e=[];s._.each(this._ringGroups,function(t){s._.each(t.planets,function(t){if(!t.pit){e.push(t)}})});return e}},{key:"selectAt",value:function t(e){var n=this;s._.each(n._ringGroups,function(t){t.selectAt(e)})}},{key:"selectAll",value:function t(){var e=this;s._.each(e.dataFrame.getFieldData("__index__"),function(t){e.selectAt(t)})}},{key:"unselectAt",value:function t(e){var n=this;s._.each(n._ringGroups,function(t){t.unselectAt(e)})}},{key:"unselectAll",value:function t(e){var n=this;s._.each(n.dataFrame.getFieldData("__index__"),function(t){n.unselectAt(t)})}},{key:"getSelectedNodes",value:function t(){var e=[];s._.each(this._ringGroups,function(t){e=e.concat(t.getSelectedNodes())});return e}},{key:"getSelectedRowList",value:function t(){var n=[];s._.each(this._ringGroups,function(t){var e=[];s._.each(t.getSelectedNodes(),function(t){e.push(t.rowData)});n=n.concat(e)});return n}},{key:"getNodesAt",value:function t(){}},{key:"resetData",value:function t(e,n){this.clean();this.dataFrame=e;this._dataGroupHandle();this._drawGroups();this._drawScan()}},{key:"clean",value:function t(){var e=this;e.groupDataFrames=[];s._.each(e._ringGroups,function(t){t.sprite.destroy()});e._ringGroups=[]}}]);return i}(r["default"]);s.global.registerComponent(S,"graphs","planet"),t["default"]=S}(e,n,p,k,X)})),t(e(function(t,e){!function(t,e,n,r,o){Object.defineProperty(t,"__esModule",{value:true});var i=l(e),a=l(n);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function t(e){return typeof e}}else{s=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return s(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(e&&(s(e)==="object"||typeof e==="function")){return e}return d(t)}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function p(t,e,n){if(e)h(t.prototype,e);if(n)h(t,n);return t}function y(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)v(t,e)}function v(t,e){v=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return v(t,e)}var g=i["default"].Display.Text,_=i["default"].Shapes.Polygon,b=function(t){y(i,t);p(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置",default:null},sort:{detail:"排序规则",default:null},maxNodeWidth:{detail:"最大的元素宽",default:null},minNodeWidth:{detail:"最小的元素宽",default:0},minVal:{detail:"漏斗的塔尖",default:0},node:{detail:"单个元素图形配置",propertys:{height:{detail:"高",default:0,documentation:"漏斗单元高，如果options没有设定， 就会被自动计算为 this.height/dataOrg.length"}}},label:{detail:"文本配置",propertys:{enabled:{detail:"是否开启文本",default:true},textAlign:{detail:"文本布局位置(left,center,right)",default:"center"},textBaseline:{detail:"文本基线对齐方式",default:"middle"},format:{detail:"文本格式化处理函数",default:function t(e){return(0,r.numAddSymbol)(e)}},fontSize:{detail:"文本字体大小",default:13},fontColor:{detail:"文本颜色",default:"#ffffff",documentation:"align为center的时候的颜色，align为其他属性时候取node的颜色"}}}}}}]);function i(t,e){var n;u(this,i);n=f(this,c(i).call(this,t,e));n.type="funnel";n.dataOrg=[];n.data=[];n._maxVal=null;n._minVal=null;o._.extend(true,d(n),(0,o.getDefaultProps)(i.defaultProps()),t);n.init();return n}p(i,[{key:"init",value:function t(){}},{key:"_computerAttr",value:function t(){if(this.field){this.dataOrg=this.dataFrame.getFieldData(this.field)}this._maxVal=o._.max(this.dataOrg);this._minVal=o._.min(this.dataOrg);if(!this.maxNodeWidth){this.maxNodeWidth=this.width*.7}if(!this.node.height){this.node.height=this.height/this.dataOrg.length}}},{key:"draw",value:function t(e){!e&&(e={});o._.extend(true,this,e);var n=this;var i=n.animation&&!e.resize;this._computerAttr();this.data=this._trimGraphs();this._drawGraphs();this.sprite.context.x=this.origin.x+this.width/2;this.sprite.context.y=this.origin.y}},{key:"_trimGraphs",value:function t(){if(!this.field)return;var i=this;var r=[];o._.each(this.dataOrg,function(t,e){var n={type:"funnel",field:i.field,rowData:i.dataFrame.getRowDataAt(e),value:t,width:i._getNodeWidth(t),color:i.app.getTheme(e),cursor:"pointer",label:"",middlePoint:null,iNode:-1,points:[]};r.push(n)});if(this.sort){r=r.sort(function(t,e){if(i.sort=="desc"){return e.value-t.value}else{return t.value-e.value}})}o._.each(r,function(t,e){t.iNode=e;t.label=i.label.format(t.value,t)});o._.each(r,function(t,e){t.points=i._getPoints(t,r[e+1],r[e-1]);t.middlePoint={x:0,y:(t.iNode+.5)*i.node.height}});return r}},{key:"_getNodeWidth",value:function t(e){var n=this.minNodeWidth+(this.maxNodeWidth-this.minNodeWidth)/(this._maxVal-this.minVal)*(e-this.minVal);return parseInt(n)}},{key:"_getPoints",value:function t(e,n,i){var r=[];var a=e.iNode*this.node.height;var o=a+this.node.height;if(this.sort!=="asc"){r.push([-e.width/2,a]);r.push([e.width/2,a]);var l=this.minNodeWidth;if(n){l=n.width}r.push([l/2,o]);r.push([-l/2,o])}else{var s=this.minNodeWidth;if(i){s=i.width}r.push([-s/2,a]);r.push([s/2,a]);r.push([e.width/2,o]);r.push([-e.width/2,o])}return r}},{key:"_drawGraphs",value:function t(){var a=this;o._.each(this.data,function(t){var e=new _({context:{pointList:t.points,fillStyle:t.color,cursor:t.cursor}});a.sprite.addChild(e);e.nodeData=t;e.on(o.event.types.get(),function(t){t.eventInfo={trigger:a.node,title:a.field,nodes:[this.nodeData]};a.app.fire(t.type,t)});var n="center";var i={x:t.middlePoint.x,y:t.middlePoint.y};if(a.label.textAlign=="left"){i.x=t.points[0][0]-(t.points[0][0]-t.points[3][0])/2;i.x-=15;n="right"}if(a.label.textAlign=="right"){i.x=t.points[1][0]-(t.points[1][0]-t.points[2][0])/2;i.x+=15;n="left"}var r=new g(t.label,{context:{x:i.x,y:i.y,fontSize:a.label.fontSize,fillStyle:a.label.textAlign=="center"?a.label.fontColor:t.color,textAlign:n,textBaseline:a.label.textBaseline}});a.sprite.addChild(r)})}}]);return i}(a["default"]);o.global.registerComponent(b,"graphs","funnel"),t["default"]=b}(e,n,p,o,X)}));var O=e(function(t,e){function n(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function y(t,e){for(var n=0,i=0;i<t.length;++i)n+=t[i]*e[i];return n}function p(t){return Math.sqrt(y(t,t))}function v(t,e,n){for(var i=0;i<e.length;++i)t[i]=e[i]*n}function C(t,e,n,i,r){for(var a=0;a<t.length;++a)t[a]=e*n[a]+i*r[a]}function g(r,a,o,l,s,u,f){var c=o.fx,d=y(o.fxprime,a),h=c,t=c,p=d,e=0;function n(t,e,n){for(var i=0;i<16;++i)if(s=(t+e)/2,C(l.x,1,o.x,s,a),h=l.fx=r(l.x,l.fxprime),p=y(l.fxprime,a),c+u*s*d<h||n<=h)e=s;else{if(Math.abs(p)<=-f*d)return s;0<=p*(e-t)&&(e=t),t=s,n=h}return 0}s=s||1,u=u||1e-6,f=f||.1;for(var i=0;i<10;++i){if(C(l.x,1,o.x,s,a),h=l.fx=r(l.x,l.fxprime),p=y(l.fxprime,a),c+u*s*d<h||i&&t<=h)return n(e,s,t);if(Math.abs(p)<=-f*d)return s;if(0<=p)return n(s,e,h);t=h,e=s,s*=2}return s}var i;(i=e).bisect=function(t,e,n,i){var r=(i=i||{}).maxIterations||100,a=i.tolerance||1e-10,o=t(e),l=t(n),s=n-e;if(0<o*l)throw"Initial bisect points must have opposite signs";if(0===o)return e;if(0===l)return n;for(var u=0;u<r;++u){var f=e+(s/=2),c=t(f);if(0<=c*o&&(e=f),Math.abs(s)<a||0===c)return f}return e+s},i.nelderMead=function(t,e,n){var i,r=(n=n||{}).maxIterations||200*e.length,a=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,f=void 0!==n.chi?n.chi:2,c=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,h=e.length,p=new Array(h+1);p[0]=e,p[0].fx=t(e);for(var y=p[0].id=0;y<h;++y){var v=e.slice();v[y]=v[y]?v[y]*a:o,p[y+1]=v,p[y+1].fx=t(v),p[y+1].id=y+1}function g(t){for(var e=0;e<t.length;e++)p[h][e]=t[e];p[h].fx=t.fx}for(var _=function(t,e){return t.fx-e.fx},b=e.slice(),x=e.slice(),m=e.slice(),w=e.slice(),S=0;S<r;++S){if(p.sort(_),n.history){var k=p.map(function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e});k.sort(function(t,e){return t.id-e.id}),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:k})}for(y=i=0;y<h;++y)i=Math.max(i,Math.abs(p[0][y]-p[1][y]));if(Math.abs(p[0].fx-p[h].fx)<l&&i<s)break;for(y=0;y<h;++y){for(var O=b[y]=0;O<h;++O)b[y]+=p[O][y];b[y]/=h}var P=p[h];if(C(x,1+u,b,-u,P),x.fx=t(x),x.fx<p[0].fx)C(w,1+f,b,-f,P),w.fx=t(w),w.fx<x.fx?g(w):g(x);else if(x.fx>=p[h-1].fx){var A=!1;if(x.fx>P.fx?(C(m,1+c,b,-c,P),m.fx=t(m),m.fx<P.fx?g(m):A=!0):(C(m,1-c*u,b,c*u,P),m.fx=t(m),m.fx<x.fx?g(m):A=!0),A){if(1<=d)break;for(y=1;y<p.length;++y)C(p[y],1-d,p[0],d,p[y]),p[y].fx=t(p[y])}}else g(x)}return p.sort(_),{fx:p[0].fx,x:p[0]}},i.conjugateGradient=function(t,e,n){var i,r,a,o={x:e.slice(),fx:0,fxprime:e.slice()},l={x:e.slice(),fx:0,fxprime:e.slice()},s=e.slice(),u=1;a=(n=n||{}).maxIterations||20*e.length,o.fx=t(o.x,o.fxprime),v(i=o.fxprime.slice(),o.fxprime,-1);for(var f=0;f<a;++f){if(u=g(t,i,o,l,u),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:u}),u){C(s,1,l.fxprime,-1,o.fxprime);var c=y(o.fxprime,o.fxprime),d=Math.max(0,y(s,l.fxprime)/c);C(i,d,i,-1,l.fxprime),r=o,o=l,l=r}else v(i,o.fxprime,-1);if(p(o.fxprime)<=1e-5)break}n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:u});return o},i.gradientDescent=function(t,e,n){for(var i=(n=n||{}).maxIterations||100*e.length,r=n.learnRate||.001,a={x:e.slice(),fx:0,fxprime:e.slice()},o=0;o<i&&(a.fx=t(a.x,a.fxprime),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice()}),C(a.x,1,a.x,-r,a.fxprime),!(p(a.fxprime)<=1e-5));++o);return a},i.gradientDescentLineSearch=function(t,e,n){n=n||{};var i,r={x:e.slice(),fx:0,fxprime:e.slice()},a={x:e.slice(),fx:0,fxprime:e.slice()},o=n.maxIterations||100*e.length,l=n.learnRate||1,s=e.slice(),u=n.c1||.001,f=n.c2||.1,c=[];if(n.history){var d=t;t=function(t,e){return c.push(t.slice()),d(t,e)}}r.fx=t(r.x,r.fxprime);for(var h=0;h<o&&(v(s,r.fxprime,-1),l=g(t,s,r,a,l,u,f),n.history&&(n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),functionCalls:c,learnRate:l,alpha:l}),c=[]),i=r,r=a,a=i,!(0===l||p(r.fxprime)<1e-5));++h);return r},i.zeros=n,i.zerosM=function(t,e){return n(t).map(function(){return n(e)})},i.norm2=p,i.weightedSum=C,i.scale=v}),P=e(function(t,e){!function(t){Object.defineProperty(t,"__esModule",{value:true}),t.intersectionArea=e,t.containedInCircles=k,t.circleArea=P,t.distance=A,t.circleOverlap=n,t.circleCircleIntersection=l,t.getCenter=C;var S=1e-10;function e(e,t){var n=O(e);var i=n.filter(function(t){return k(t,e)});var r=0,a=0,o=[],l;if(i.length>1){var s=C(i);for(l=0;l<i.length;++l){var u=i[l];u.angle=Math.atan2(u.x-s.x,u.y-s.y)}i.sort(function(t,e){return e.angle-t.angle});var f=i[i.length-1];for(l=0;l<i.length;++l){var c=i[l];a+=(f.x+c.x)*(c.y-f.y);var d={x:(c.x+f.x)/2,y:(c.y+f.y)/2},h=null;for(var p=0;p<c.parentIndex.length;++p){if(f.parentIndex.indexOf(c.parentIndex[p])>-1){var y=e[c.parentIndex[p]],v=Math.atan2(c.x-y.x,c.y-y.y),g=Math.atan2(f.x-y.x,f.y-y.y);var _=g-v;if(_<0){_+=2*Math.PI}var b=g-_/2,x=A(d,{x:y.x+y.radius*Math.sin(b),y:y.y+y.radius*Math.cos(b)});if(x>y.radius*2){x=y.radius*2}if(h===null||h.width>x){h={circle:y,width:x,p1:c,p2:f}}}}if(h!==null){o.push(h);r+=P(h.circle.radius,h.width);f=c}}}else{var m=e[0];for(l=1;l<e.length;++l){if(e[l].radius<m.radius){m=e[l]}}var w=false;for(l=0;l<e.length;++l){if(A(e[l],m)>Math.abs(m.radius-e[l].radius)){w=true;break}}if(w){r=a=0}else{r=m.radius*m.radius*Math.PI;o.push({circle:m,p1:{x:m.x,y:m.y+m.radius},p2:{x:m.x-S,y:m.y+m.radius},width:m.radius*2})}}a/=2;if(t){t.area=r+a;t.arcArea=r;t.polygonArea=a;t.arcs=o;t.innerPoints=i;t.intersectionPoints=n}return r+a}function k(t,e){for(var n=0;n<e.length;++n){if(A(t,e[n])>e[n].radius+S){return false}}return true}function O(t){var e=[];for(var n=0;n<t.length;++n){for(var i=n+1;i<t.length;++i){var r=l(t[n],t[i]);for(var a=0;a<r.length;++a){var o=r[a];o.parentIndex=[n,i];e.push(o)}}}return e}function P(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function A(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function n(t,e,n){if(n>=t+e){return 0}if(n<=Math.abs(t-e)){return Math.PI*Math.min(t,e)*Math.min(t,e)}var i=t-(n*n-e*e+t*t)/(2*n),r=e-(n*n-t*t+e*e)/(2*n);return P(t,i)+P(e,r)}function l(t,e){var n=A(t,e),i=t.radius,r=e.radius;if(n>=i+r||n<=Math.abs(i-r)){return[]}var a=(i*i-r*r+n*n)/(2*n),o=Math.sqrt(i*i-a*a),l=t.x+a*(e.x-t.x)/n,s=t.y+a*(e.y-t.y)/n,u=-(e.y-t.y)*(o/n),f=-(e.x-t.x)*(o/n);return[{x:l+u,y:s-f},{x:l-u,y:s+f}]}function C(t){var e={x:0,y:0};for(var n=0;n<t.length;++n){e.x+=t[n].x;e.y+=t[n].y}e.x/=t.length;e.y/=t.length;return e}}(e)});t(P);var A=e(function(t,e){!function(t,_,E){function e(r,t){t=t||{};t.maxIterations=t.maxIterations||500;var e=t.initialLayout||d;var a=t.lossFunction||L;r=c(r);var o=e(r,t);var n=[],l=[],i;for(i in o){if(o.hasOwnProperty(i)){n.push(o[i].x);n.push(o[i].y);l.push(i)}}var s=(0,_.nelderMead)(function(t){var e={};for(var n=0;n<l.length;++n){var i=l[n];e[i]={x:t[2*n],y:t[2*n+1],radius:o[i].radius}}return a(e,r)},n,t);var u=s.x;for(var f=0;f<l.length;++f){i=l[f];o[i].x=u[2*f];o[i].y=u[2*f+1]}return o}Object.defineProperty(t,"__esModule",{value:true}),t.venn=e,t.distanceFromIntersectArea=D,t.getDistanceMatrices=b,t.bestInitialLayout=d,t.constrainedMDSLayout=l,t.greedyLayout=s,t.lossFunction=L,t.disjointCluster=y,t.normalizeSolution=n,t.scaleSolution=i;var I=1e-10;function D(e,n,i){if(Math.min(e,n)*Math.min(e,n)*Math.PI<=i+I){return Math.abs(e-n)}return(0,_.bisect)(function(t){return(0,E.circleOverlap)(e,n,t)-i},0,e+n)}function c(t){t=t.slice();var e=[],n={},i,r,a,o;for(i=0;i<t.length;++i){var l=t[i];if(l.sets.length==1){e.push(l.sets[0])}else if(l.sets.length==2){a=l.sets[0];o=l.sets[1];n[[a,o]]=true;n[[o,a]]=true}}e.sort(function(t,e){return t>e});for(i=0;i<e.length;++i){a=e[i];for(r=i+1;r<e.length;++r){o=e[r];if(!([a,o]in n)){t.push({sets:[a,o],size:0})}}}return t}function b(t,l,s){var u=(0,_.zerosM)(l.length,l.length),f=(0,_.zerosM)(l.length,l.length);t.filter(function(t){return t.sets.length==2}).map(function(t){var e=s[t.sets[0]],n=s[t.sets[1]],i=Math.sqrt(l[e].size/Math.PI),r=Math.sqrt(l[n].size/Math.PI),a=D(i,r,t.size);u[e][n]=u[n][e]=a;var o=0;if(t.size+1e-10>=Math.min(l[e].size,l[n].size)){o=1}else if(t.size<=1e-10){o=-1}f[e][n]=f[n][e]=o});return{distances:u,constraints:f}}function x(t,e,n,i){var r=0,a;for(a=0;a<e.length;++a){e[a]=0}for(a=0;a<n.length;++a){var o=t[2*a],l=t[2*a+1];for(var s=a+1;s<n.length;++s){var u=t[2*s],f=t[2*s+1],c=n[a][s],d=i[a][s];var h=(u-o)*(u-o)+(f-l)*(f-l),p=Math.sqrt(h),y=h-c*c;if(d>0&&p<=c||d<0&&p>=c){continue}r+=2*y*y;e[2*a]+=4*y*(o-u);e[2*a+1]+=4*y*(l-f);e[2*s]+=4*y*(u-o);e[2*s+1]+=4*y*(f-l)}}return r}function d(t,e){var n=s(t,e);var i=e.lossFunction||L;if(t.length>=8){var r=l(t,e),a=i(r,t),o=i(n,t);if(a+1e-8<o){n=r}}return n}function l(t,e){e=e||{};var n=e.restarts||10;var i=[],r={},a;for(a=0;a<t.length;++a){var o=t[a];if(o.sets.length==1){r[o.sets[0]]=i.length;i.push(o)}}var l=b(t,i,r),s=l.distances,u=l.constraints;var f=(0,_.norm2)(s.map(_.norm2))/s.length;s=s.map(function(t){return t.map(function(t){return t/f})});var c=function t(e,n){return x(e,n,s,u)};var d,h;for(a=0;a<n;++a){var p=(0,_.zeros)(s.length*2).map(Math.random);h=(0,_.conjugateGradient)(c,p,e);if(!d||h.fx<d.fx){d=h}}var y=d.x;var v={};for(a=0;a<i.length;++a){var g=i[a];v[g.sets[0]]={x:y[2*a]*f,y:y[2*a+1]*f,radius:Math.sqrt(g.size/Math.PI)}}if(e.history){for(a=0;a<e.history.length;++a){(0,_.scale)(e.history[a].x,f)}}return v}function s(t,e){var n=e&&e.lossFunction?e.lossFunction:L;var i={},r={},a;for(var o=0;o<t.length;++o){var l=t[o];if(l.sets.length==1){a=l.sets[0];i[a]={x:1e10,y:1e10,rowid:i.length,size:l.size,radius:Math.sqrt(l.size/Math.PI)};r[a]=[]}}t=t.filter(function(t){return t.sets.length==2});for(o=0;o<t.length;++o){var s=t[o];var u=s.hasOwnProperty("weight")?s.weight:1;var f=s.sets[0],c=s.sets[1];if(s.size+I>=Math.min(i[f].size,i[c].size)){u=0}r[f].push({set:c,size:s.size,weight:u});r[c].push({set:f,size:s.size,weight:u})}var d=[];for(a in r){if(r.hasOwnProperty(a)){var h=0;for(o=0;o<r[a].length;++o){h+=r[a][o].size*r[a][o].weight}d.push({set:a,size:h})}}function p(t,e){return e.size-t.size}d.sort(p);var y={};function v(t){return t.set in y}function g(t,e){i[e].x=t.x;i[e].y=t.y;y[e]=true}g({x:0,y:0},d[0].set);for(o=1;o<d.length;++o){var _=d[o].set,b=r[_].filter(v);a=i[_];b.sort(p);if(b.length===0){throw"ERROR: missing pairwise overlap information"}var x=[];for(var m=0;m<b.length;++m){var w=i[b[m].set],S=D(a.radius,w.radius,b[m].size);x.push({x:w.x+S,y:w.y});x.push({x:w.x-S,y:w.y});x.push({y:w.y+S,x:w.x});x.push({y:w.y-S,x:w.x});for(var k=m+1;k<b.length;++k){var O=i[b[k].set],P=D(a.radius,O.radius,b[k].size);var A=(0,E.circleCircleIntersection)({x:w.x,y:w.y,radius:S},{x:O.x,y:O.y,radius:P});for(var C=0;C<A.length;++C){x.push(A[C])}}}var M=1e50,j=x[0];for(m=0;m<x.length;++m){i[_].x=x[m].x;i[_].y=x[m].y;var T=n(i,t);if(T<M){M=T;j=x[m]}}g(j,_)}return i}function L(e,t){var n=0;function i(t){return t.map(function(t){return e[t]})}for(var r=0;r<t.length;++r){var a=t[r],o;if(a.sets.length==1){continue}else if(a.sets.length==2){var l=e[a.sets[0]],s=e[a.sets[1]];o=(0,E.circleOverlap)(l.radius,s.radius,(0,E.distance)(l,s))}else{o=(0,E.intersectionArea)(i(a.sets))}var u=a.hasOwnProperty("weight")?a.weight:1;n+=u*(o-a.size)*(o-a.size)}return n}function p(t,e,n){if(n===null){t.sort(function(t,e){return e.radius-t.radius})}else{t.sort(n)}var i;if(t.length>0){var r=t[0].x,a=t[0].y;for(i=0;i<t.length;++i){t[i].x-=r;t[i].y-=a}}if(t.length==2){var o=(0,E.distance)(t[0],t[1]);if(o<Math.abs(t[1].radius-t[0].radius)){t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10;t[1].y=t[0].y}}if(t.length>1){var l=Math.atan2(t[1].x,t[1].y)-e,s=Math.cos(l),u=Math.sin(l),f,c;for(i=0;i<t.length;++i){f=t[i].x;c=t[i].y;t[i].x=s*f-u*c;t[i].y=u*f+s*c}}if(t.length>2){var d=Math.atan2(t[2].x,t[2].y)-e;while(d<0){d+=2*Math.PI}while(d>2*Math.PI){d-=2*Math.PI}if(d>Math.PI){var h=t[1].y/(1e-10+t[1].x);for(i=0;i<t.length;++i){var p=(t[i].x+h*t[i].y)/(1+h*h);t[i].x=2*p-t[i].x;t[i].y=2*p*h-t[i].y}}}}function y(t){t.map(function(t){t.parent=t});function r(t){if(t.parent!==t){t.parent=r(t.parent)}return t.parent}function e(t,e){var n=r(t),i=r(e);n.parent=i}for(var n=0;n<t.length;++n){for(var i=n+1;i<t.length;++i){var a=t[n].radius+t[i].radius;if((0,E.distance)(t[n],t[i])+1e-10<a){e(t[i],t[n])}}}var o={},l;for(n=0;n<t.length;++n){l=r(t[n]).parent.setid;if(!(l in o)){o[l]=[]}o[l].push(t[n])}t.map(function(t){delete t.parent});var s=[];for(l in o){if(o.hasOwnProperty(l)){s.push(o[l])}}return s}function m(r){var t=function t(e){var n=Math.max.apply(null,r.map(function(t){return t[e]+t.radius})),i=Math.min.apply(null,r.map(function(t){return t[e]-t.radius}));return{max:n,min:i}};return{xRange:t("x"),yRange:t("y")}}function n(t,e,n){if(e===null){e=Math.PI/2}var s=[],i,r;for(r in t){if(t.hasOwnProperty(r)){var a=t[r];s.push({x:a.x,y:a.y,radius:a.radius,setid:r})}}var o=y(s);for(i=0;i<o.length;++i){p(o[i],e,n);var l=m(o[i]);o[i].size=(l.xRange.max-l.xRange.min)*(l.yRange.max-l.yRange.min);o[i].bounds=l}o.sort(function(t,e){return e.size-t.size});s=o[0];var u=s.bounds;var f=(u.xRange.max-u.xRange.min)/50;function c(t,e,n){if(!t)return;var i=t.bounds,r,a,o;if(e){r=u.xRange.max-i.xRange.min+f}else{r=u.xRange.max-i.xRange.max;o=(i.xRange.max-i.xRange.min)/2-(u.xRange.max-u.xRange.min)/2;if(o<0)r+=o}if(n){a=u.yRange.max-i.yRange.min+f}else{a=u.yRange.max-i.yRange.max;o=(i.yRange.max-i.yRange.min)/2-(u.yRange.max-u.yRange.min)/2;if(o<0)a+=o}for(var l=0;l<t.length;++l){t[l].x+=r;t[l].y+=a;s.push(t[l])}}var d=1;while(d<o.length){c(o[d],true,false);c(o[d+1],false,true);c(o[d+2],true,true);d+=3;u=m(s)}var h={};for(i=0;i<s.length;++i){h[s[i].setid]=s[i]}return h}function i(t,e,n,i){var r=[],a=[];for(var o in t){if(t.hasOwnProperty(o)){a.push(o);r.push(t[o])}}e-=2*i;n-=2*i;var l=m(r),s=l.xRange,u=l.yRange;if(s.max==s.min||u.max==u.min){console.log("not scaling solution: zero size detected");return t}var f=e/(s.max-s.min),c=n/(u.max-u.min),d=Math.min(c,f),h=(e-(s.max-s.min)*d)/2,p=(n-(u.max-u.min)*d)/2;var y={};for(var v=0;v<r.length;++v){var g=r[v];y[a[v]]={radius:d*g.radius,x:i+h+(g.x-s.min)*d,y:i+p+(g.y-u.min)*d}}return y}}(e,O,P)});t(A),t(e(function(t,e){!function(t,e,n,d,h,p,v){Object.defineProperty(t,"__esModule",{value:true});var r=a(e),i=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return f(t)}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return u(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function y(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function g(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)_(t,e)}function _(t,e){_=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return _(t,e)}var b=r["default"].Display.Text,x=r["default"].Shapes.Path,m=r["default"].Shapes.Circle,w=function(t){g(i,t);y(i,null,[{key:"defaultProps",value:function t(){return{keyField:{detail:"key字段",default:"name"},valueField:{detail:"value字段",default:"value"},node:{detail:"单个节点配置",propertys:{strokeStyle:{detail:"边框颜色",default:null},lineWidth:{detail:"边框大小",default:2},strokeAlpha:{detail:"边框透明度",default:0},fillStyle:{detail:"背景色",default:null},fillAlpha:{detail:"背景透明度",default:.25},focus:{detail:"hover设置",propertys:{enabled:{detail:"是否开启",default:true},strokeAlpha:{detail:"边框透明度",default:.3}}},select:{detail:"选中设置",propertys:{enabled:{detail:"是否开启",default:true},lineWidth:{detail:"描边宽度",default:2},strokeStyle:{detail:"描边颜色",default:"#666666"}}}}},label:{detail:"文本设置",propertys:{field:{detail:"获取文本的字段",default:null},fontSize:{detail:"字体大小",default:14},fontColor:{detail:"文本颜色",default:null},fontWeight:{detail:"fontWeight",default:"normal"},showInter:{detail:"是否显示相交部分的文本",default:true}}}}}}]);function i(t,e){var n;l(this,i);n=s(this,u(i).call(this,t,e));n.type="venn";n.vennData=null;v._.extend(true,f(n),(0,v.getDefaultProps)(i.defaultProps()),t);n._dataCircleLen=0;n._dataLabelLen=0;n._dataPathLen=0;n.init();return n}y(i,[{key:"init",value:function t(){this.venn_circles=new r["default"].Display.Sprite({id:"venn_circles"});this.sprite.addChild(this.venn_circles);this.venn_paths=new r["default"].Display.Sprite({id:"venn_paths"});this.sprite.addChild(this.venn_paths);this.venn_labels=new r["default"].Display.Sprite({id:"venn_labels"});this.sprite.addChild(this.venn_labels)}},{key:"draw",value:function t(e){!e&&(e={});v._.extend(true,this,e);this.data=this._trimGraphs();this._widget();this.sprite.context.x=this.app.padding.left;this.sprite.context.y=this.app.padding.top;this.fire("complete")}},{key:"resetData",value:function t(e,n){this.dataFrame=e;this.data=this._trimGraphs();this._widget()}},{key:"_trimGraphs",value:function t(){var i=this;var e=i._vennData();var n=d.venn;var r=d.lossFunction;var a=Math.PI/2;var o=null;var l={};var s={};this._dataCircleLen=0;this._dataLabelLen=0;this._dataPathLen=0;if(e.length>0){var u=n(e,{lossFunction:r});{u=(0,d.normalizeSolution)(u,a,o)}l=(0,d.scaleSolution)(u,this.width,this.height,0);s=k(l,e)}var f=0;var c=0;v._.each(e,function(t,e){if(t.label){if(t.sets.length>1&&!i.label.showInter);else{t.labelPosition=s[t.nodeId];i._dataLabelLen++}}if(t.sets.length>1){var n=C(t.sets.map(function(t){return l[t]}));t.shape={type:"path",path:n,pathInd:c++};i._dataPathLen++}else if(t.sets.length==1){t.shape=v._.extend({type:"circle",circleInd:f++},l[t.nodeId]);i._dataCircleLen++}});return e}},{key:"_vennData",value:function t(){var e=[];var n=this;for(var i=0,r=this.dataFrame.length;i<r;i++){var a=n.dataFrame.getRowDataAt(i);var o={type:"venn",iNode:i,nodeId:null,rowData:a,sets:null,size:null,value:null,fillStyle:null,strokeStyle:null,label:null,labelPosition:null};for(var l in a){var s=a[l];if(l==n.keyField){if(!v._.isArray(s)){s=s.split(/[,|]/)}o.sets=s;o.nodeId=s.join()}else if(l==n.valueField){o.size=s;o.value=s}else if(l==n.label.field){o.label=s}}e.push(o)}return e}},{key:"_getStyle",value:function t(e,n,i,r){var a;if(v._.isString(e)){a=e}if(v._.isFunction(e)){a=e(i)}if(!a&&n!=undefined){a=this.app.getTheme(n)}if(!a&&r!=undefined){a=r}return a}},{key:"_widget",value:function t(){var d=this;if(d.venn_circles.children.length>d._dataCircleLen){for(var e=d._dataCircleLen;e<d.venn_circles.children.length;e++){d.venn_circles.getChildAt(e--).destroy()}}if(d.venn_paths.children.length>d._dataPathLen){for(var e=d._dataPathLen;e<d.venn_paths.children.length;e++){d.venn_paths.getChildAt(e--).destroy()}}if(d.venn_labels.children.length>d._dataLabelLen){for(var e=d._dataLabelLen;e<d.venn_labels.children.length;e++){d.venn_labels.getChildAt(e--).destroy()}}var h=0;var p=0;var y=0;v._.each(this.data,function(t,e){var n=t.shape;var i;var r=true;if(n){var a;if(n.type=="circle"){var o=d._getStyle(d.node.fillStyle,n.circleInd,t);var l=d._getStyle(d.node.strokeStyle,n.circleInd,t);t.fillStyle=o;t.strokeStyle=l;a={x:n.x,y:n.y,r:n.radius,fillStyle:o,fillAlpha:d.node.fillAlpha,lineWidth:d.node.lineWidth,strokeStyle:l,strokeAlpha:d.node.strokeAlpha};i=d.venn_circles.getChildAt(h++);if(!i){i=new m({pointChkPriority:false,hoverClone:false,context:a});d.venn_circles.addChild(i)}else{r=false;i.animate(a)}}if(t.shape.type=="path"){a={path:n.path,fillStyle:"#ffffff",fillAlpha:0,lineWidth:d.node.lineWidth,strokeStyle:"#ffffff",strokeAlpha:0};i=d.venn_paths.getChildAt(p++);if(!i){i=new x({pointChkPriority:false,context:a});d.venn_paths.addChild(i)}else{r=false;i.context.path=n.path}}i.nodeData=t;t._node=i;d.node.focus.enabled&&i.hover(function(t){d.focusAt(this.nodeData.iNode)},function(t){!this.nodeData.selected&&d.unfocusAt(this.nodeData.iNode)});if(r){i.on(v.event.types.get(),function(t){t.eventInfo={trigger:d.node,title:null,nodes:[this.nodeData]};d.app.fire(t.type,t)})}}if(t.label&&d.label.enabled){var s=d._getStyle(d.label.fontColor,n.circleInd,t,"#999");var u=d.label.fontSize;if(t.sets.length>1){if(!d.label.showInter){u=0}else{u-=2}}if(u){var f={x:t.labelPosition.x,y:t.labelPosition.y,fontSize:u,textBaseline:"middle",textAlign:"center",fontWeight:d.label.fontWeight,fillStyle:s};var c=d.venn_labels.getChildAt(y++);if(!c){c=new b(t.label,{context:f});d.venn_labels.addChild(c)}else{c.resetText(t.label);c.animate(f)}}}})}},{key:"focusAt",value:function t(e){var n=this.data[e];if(!this.node.focus.enabled||n.focused)return;var i=n._node.context;if(n.sets.length>1){i.strokeAlpha=1}else{i.strokeAlpha=this.node.focus.strokeAlpha}n.focused=true}},{key:"unfocusAt",value:function t(e){var n=this.data[e];if(!this.node.focus.enabled||!n.focused)return;var i=n._node.context;i.strokeAlpha=this.node.strokeAlpha;n.focused=false}},{key:"selectAt",value:function t(e){var n=this.data[e];if(!this.node.select.enabled||n.selected)return;var i=n._node.context;i.lineWidth=this.node.select.lineWidth;i.strokeAlpha=this.node.select.strokeAlpha;i.strokeStyle=this.node.select.strokeStyle;n.selected=true}},{key:"unselectAt",value:function t(e){var n=this.data[e];if(!this.node.select.enabled||!n.selected)return;var i=n._node.context;i.strokeStyle=this.node.strokeStyle;n.selected=false}}]);return i}(i["default"]);function S(t){var e={},n=[];for(var i in t){n.push(i);e[i]=[]}for(var r=0;r<n.length;r++){var a=t[n[r]];for(var o=r+1;o<n.length;++o){var l=t[n[o]],s=(0,h.distance)(a,l);if(s+l.radius<=a.radius+1e-10){e[n[o]].push(n[r])}else if(s+a.radius<=l.radius+1e-10){e[n[r]].push(n[o])}}}return e}function k(t,e){var n={},i=S(t);for(var r=0;r<e.length;++r){var a=e[r].sets,o={},l={};for(var s=0;s<a.length;++s){o[a[s]]=true;var u=i[a[s]];for(var f=0;f<u.length;++f){l[u[f]]=true}}var c=[],d=[];for(var h in t){if(h in o){c.push(t[h])}else if(!(h in l)){d.push(t[h])}}var p=O(c,d);n[a]=p;if(p.disjoint&&e[r].size>0){console.log("WARNING: area "+a+" not represented on screen")}}return n}function O(e,n){var t=[],i;for(i=0;i<e.length;++i){var r=e[i];t.push({x:r.x,y:r.y});t.push({x:r.x+r.radius/2,y:r.y});t.push({x:r.x-r.radius/2,y:r.y});t.push({x:r.x,y:r.y+r.radius/2});t.push({x:r.x,y:r.y-r.radius/2})}var a=t[0],o=P(t[0],e,n);for(i=1;i<t.length;++i){var l=P(t[i],e,n);if(l>=o){a=t[i];o=l}}var s=(0,p.nelderMead)(function(t){return-1*P({x:t[0],y:t[1]},e,n)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x;var u={x:s[0],y:s[1]};var f=true;for(i=0;i<e.length;++i){if((0,h.distance)(u,e[i])>e[i].radius){f=false;break}}for(i=0;i<n.length;++i){if((0,h.distance)(u,n[i])<n[i].radius){f=false;break}}if(!f){if(e.length==1){u={x:e[0].x,y:e[0].y}}else{var c={};(0,h.intersectionArea)(e,c);if(c.arcs.length===0){u={x:0,y:-1e3,disjoint:true}}else if(c.arcs.length==1){u={x:c.arcs[0].circle.x,y:c.arcs[0].circle.y}}else if(n.length){u=O(e,[])}else{u=(0,h.getCenter)(c.arcs.map(function(t){return t.p1}))}}}return u}function P(t,e,n){var i=e[0].radius-(0,h.distance)(e[0],t),r,a;for(r=1;r<e.length;++r){a=e[r].radius-(0,h.distance)(e[r],t);if(a<=i){i=a}}for(r=0;r<n.length;++r){a=(0,h.distance)(n[r],t)-n[r].radius;if(a<=i){i=a}}return i}function A(t,e,n){var i=[];i.push("\nM",t,e);i.push("\nm",-n,0);i.push("\na",n,n,0,1,0,n*2,0);i.push("\na",n,n,0,1,0,-n*2,0);return i.join(" ")}function C(t){var e={};(0,h.intersectionArea)(t,e);var n=e.arcs;if(n.length===0){return"M 0 0"}else if(n.length==1){var i=n[0].circle;return A(i.x,i.y,i.radius)}else{var r=["\nM",n[0].p2.x,n[0].p2.y];for(var a=0;a<n.length;++a){var o=n[a],l=o.circle.radius,s=o.width>l;r.push("\nA",l,l,0,s?1:0,1,o.p1.x,o.p1.y)}return r.join(" ")+" z"}}v.global.registerComponent(w,"graphs","venn"),t["default"]=w}(e,n,p,A,P,O,X)}));var C=e(function(t,e){function a(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}var n;n=e,Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=a(t,e,e[n]);return t}});t(C);var M=e(function(t,e){var n;n=e,Object.defineProperty(n,"__esModule",{value:!0}),n.default={merge:function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--o]=i[e];return n}}});t(M);var j=e(function(t,e){!function(t,e,n){Object.defineProperty(t,"__esModule",{value:true});var i=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var o=function s(){var u=p,f=l,c=h;function d(t){var e=[t],n=[],i;t.depth=0;while((i=e.pop())!=null){n.push(i);if((a=f.call(d,i,i.depth))&&(r=a.length)){var r,a,o;while(--r>=0){e.push(o=a[r]);o.parent=i;o.depth=i.depth+1}if(c){var l=+c.call(d,i,i.depth);if(l&&!isNaN(l)){i._value=l}}if(c)i.value=0;i.children=a}else{if(c)i.value=+c.call(d,i,i.depth)||0;delete i.children}}s.layout_hierarchyVisitAfter(t,function(t){var e,n;if(u&&(e=t.children))e.sort(u);if(c&&(n=t.parent))n.value+=t.value;if(t._value&&t._value>t.value){t.value=t._value}delete t._value});return n}d.sort=function(t){if(!arguments.length)return u;u=t;return d};d.children=function(t){if(!arguments.length)return f;f=t;return d};d.value=function(t){if(!arguments.length)return c;c=t;return d};d.revalue=function(t){if(c){s.layout_hierarchyVisitBefore(t,function(t){if(t.children)t.value=0});s.layout_hierarchyVisitAfter(t,function(t){var e;if(!t.children)t.value=+c.call(d,t,t.depth)||0;if(e=t.parent)e.value+=t.value;if(t._value&&t._value>t.value){t.value=t._value}delete t._value})}return t};return d};function l(t){return t.children}function h(t){return t.value}function p(t,e){return e.value-t.value}function s(t){return r["default"].merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}o.layout_hierarchyRebind=function(t,e){(0,i["default"])(t,e,"sort","children","value");t.nodes=t;t.links=s;return t},o.layout_hierarchyVisitBefore=function(t,e){var n=[t];while((t=n.pop())!=null){e(t);if((r=t.children)&&(i=r.length)){var i,r;while(--i>=0){n.push(r[i])}}}},o.layout_hierarchyVisitAfter=function(t,e){var n=[t],i=[];while((t=n.pop())!=null){i.push(t);if((o=t.children)&&(a=o.length)){var r=-1,a,o;while(++r<a){n.push(o[r])}}}while((t=i.pop())!=null){e(t)}},t["default"]=o}(e,C,M)});t(j);var T=e(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true}),t.default=function(){var i=(0,n["default"])(),r=[1,1];function u(t,e,n,i){var r=t.children;t.x=e;t.y=t.depth*i;t.dx=n;t.dy=i;if(r&&(o=r.length)){var a=-1,o,l,s;n=t.value?n/t.value:0;while(++a<o){u(l=r[a],e,s=l.value*n,i);e+=s}}}function a(t){var e=t.children,n=0;if(e&&(r=e.length)){var i=-1,r;while(++i<r){n=Math.max(n,a(e[i]))}}return 1+n}function e(t,e){var n=i.call(this,t,e);u(n[0],0,r[0],r[1]/a(n[0]));return n}e.size=function(t){if(!arguments.length)return r;r=t;return e};return n["default"].layout_hierarchyRebind(e,i)};var n=i(e);function i(t){return t&&t.__esModule?t:{default:t}}}(e,j)});t(T),t(e(function(t,e){!function(t,e,n,i,c){Object.defineProperty(t,"__esModule",{value:true});var r=l(e),a=l(n),o=l(i);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function t(e){return typeof e}}else{s=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return s(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(e&&(s(e)==="object"||typeof e==="function")){return e}return h(t)}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return d(t)}function h(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function y(t,e,n){if(e)p(t.prototype,e);if(n)p(t,n);return t}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=r["default"].Shapes.Sector,b=function(t){v(i,t);y(i,null,[{key:"defaultProps",value:function t(){return{keyField:{detail:"key字段",default:"name"},valueField:{detail:"value字段",default:"value"},parentField:{detail:"parent字段",default:"parent"},node:{detail:"单个节点图形设置",propertys:{strokeStyle:{detail:"描边色",default:"#ffffff"},lineWidth:{detail:"描边线宽",default:1},strokeAlpha:{detail:"描边边框透明度",default:1},fillStyle:{detail:"背景色",default:null},fillAlpha:{detail:"背景透明度",default:1},blurAlpha:{detail:"非激活状态透明度",documentation:"比如选中其中一项，其他不先关的要降低透明度",default:.4}}}}}}]);function i(t,e){var n;u(this,i);n=f(this,d(i).call(this,t,e));n.type="sunburst";c._.extend(true,h(n),(0,c.getDefaultProps)(i.defaultProps()),t);n.data=[];n.dataGroup=[];n.init();return n}y(i,[{key:"init",value:function t(){}},{key:"draw",value:function t(e){!e&&(e={});c._.extend(true,this,e);this.data=this._trimGraphs();this.dataGroup=this._getDataGroupOfDepth();this._widget();this.sprite.context.x=this.width/2+this.origin.x;this.sprite.context.y=this.height/2+this.origin.y;this.fire("complete")}},{key:"_trimGraphs",value:function t(){var e=this;var n=parseInt(Math.min(this.width,this.height)/2);var i=(0,o["default"])().sort(null).size([2*Math.PI,n*n]).value(function(t){return t[e.valueField]});var r=this._tansTreeData();this.data=i(r,0);return this.data}},{key:"_getDataGroupOfDepth",value:function t(){var e={};c._.each(this.data,function(t){e[t.depth]=[]});c._.each(this.data,function(t){e[t.depth].push(t)});var n=[];for(var i in e){n.push(e[i])}return n}},{key:"_tansTreeData",value:function t(){var e=this.dataFrame;var n={};var l=e.getFieldData(this.keyField);var s=e.getFieldData(this.valueField);var u=e.getFieldData(this.parentField);function f(i,t,e){var n=t?t.name:undefined;for(var r=e||0;r<u.length;r++){var a=u[r];if(!a&&a!==0){a=undefined}if(n===a){i.name=l[r];i.iNode=r;var o=s[r];if(!!o||o===0){i.value=o}c._.each(u,function(t,e){if(t===i.name){if(!i.children){i.children=[]}var n={};f(n,i,e);i.children.push(n)}});break}}}f(n);return n}},{key:"_widget",value:function t(){var l=this;c._.each(this.dataGroup,function(a,o){c._.each(a,function(e,t){if(!e.depth){return}var n=Math.sqrt(e.y+e.dy);var i={r0:Math.sqrt(e.y),r:Math.sqrt(e.y)+2,startAngle:e.x*180/Math.PI,endAngle:(e.x+e.dx)*180/Math.PI,fillStyle:e.color||l.app.getTheme(e.iNode),strokeStyle:l.node.strokeStyle,lineWidth:l.node.lineWidth,globalAlpha:0};var r=new _({id:"sector_"+o+"_"+t,context:i});r.layoutData=e;e.sector=r;e.group=a;l.sprite.addChild(r);r.hover(function(t){l._focus(e,a)},function(t){l._unfocus(e,a)});r.on(c.event.types.get(),function(t){t.eventInfo={trigger:l.node,iNode:e.iNode};l.app.fire(t.type,t)});if(o<=1){r.context.r=n;r.context.globalAlpha=1}else{setTimeout(function(){if(!r.context){return}r.context.globalAlpha=1;r.animate({r:n},{duration:350})},350*(o-1))}})})}},{key:"getNodesAt",value:function t(e){var n=[];if(e!==undefined){var i=c._.find(this.data,function(t){return t.iNode==e});i.type="sunburst";i&&n.push(i)}return n}},{key:"_focus",value:function t(e,n){var i=this;c._.each(n,function(t){if(t!==e){t.sector.context.globalAlpha=i.node.blurAlpha;i._focusChildren(t,function(t){t.sector.context.globalAlpha=i.node.blurAlpha})}});i._focusParent(e)}},{key:"_unfocus",value:function t(e,n){c._.each(this.data,function(t){t.sector&&(t.sector.context.globalAlpha=1)})}},{key:"_focusChildren",value:function t(e,n){var i=this;if(e.children&&e.children.length){c._.each(e.children,function(t){n(t);i._focusChildren(t,n)})}}},{key:"_focusParent",value:function t(e){var n=this;if(e.parent&&e.parent.sector&&e.parent.group){c._.each(e.parent.group,function(t){if(t===e.parent){t.sector.context.globalAlpha=1;n._focusParent(e.parent)}else{t.sector.context.globalAlpha=n.node.blurAlpha}})}}}]);return i}(a["default"]);c.global.registerComponent(b,"graphs","sunburst"),t["default"]=b}(e,n,p,T,X)}));var E=e(function(t,e){var n,x;n=e,x=X,Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e={},i=24,o=8,l=[1,1],s=[],u=function(t,e){return t.y-e.y},f=[];function c(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)isNaN(n=+t[a])||(i+=n);else for(;++a<r;)isNaN(n=+e.call(t,t[a],a))||(i+=n);return i}e.nodeWidth=function(t){return arguments.length?(i=+t,e):i},e.nodeSort=function(t){return arguments.length?(u=t,e):u},e.nodePadding=function(t){return arguments.length?(o=+t,e):o},e.nodes=function(t){return arguments.length?(s=t,e):s},e.links=function(t){return arguments.length?(f=t,e):f},e.size=function(t){return arguments.length?(l=t,e):l},e.layout=function(t){return s.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),f.forEach(function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=s[t.source]),"number"==typeof n&&(n=t.target=s[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)}),s.forEach(function(t){t.value=Math.max(c(t.sourceLinks,b),c(t.targetLinks,b))}),function(){var e,t=s,n=0;for(;t.length;)e=[],t.forEach(function(t){t.x=n,t.dx=i,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++n;(function(e){s.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})})(n),function(e){s.forEach(function(t){t.x*=e})}((l[0]-i)/(n-1))}(),function(t){var e=d().key(function(t){return t.x}).sortKeys(y).entries(s).map(function(t){return t.values});(function(){var n=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&(null==(n=t[r])||n!=n);)n=void 0;for(;++r<a;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<a&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n}(e,function(t){return(l[1]-(t.length-1)*o)/c(t,b)});e.forEach(function(t){t.forEach(function(t,e){t.y=e,t.dy=t.value*n})}),f.forEach(function(t){t.dy=t.value*n})})(),a();for(var n=1;0<t;--t)r(n*=.99),a(),i(n),a();function i(n){function i(t){return _(t.source)*t.value}e.forEach(function(t,e){t.forEach(function(t){if(t.targetLinks.length){var e=c(t.targetLinks,i)/c(t.targetLinks,b);t.y+=(e-_(t))*n}})})}function r(n){function i(t){return _(t.target)*t.value}e.slice().reverse().forEach(function(t){t.forEach(function(t){if(t.sourceLinks.length){var e=c(t.sourceLinks,i)/c(t.sourceLinks,b);t.y+=(e-_(t))*n}})})}function a(){e.forEach(function(t){var e,n,i,r=0,a=t.length;for(u&&t.sort(u),i=0;i<a;++i)0<(n=r-(e=t[i]).y)&&(e.y+=n),r=e.y+e.dy+o;if(0<(n=r-o-l[1]))for(r=e.y-=n,i=a-2;0<=i;--i)0<(n=(e=t[i]).y+e.dy+o-r)&&(e.y-=n),r=e.y})}}(t),g(),e},e.relayout=function(){return g(),e},e.link=function(){var d=.5;function e(t){var e,n,i=t.source.x+t.source.dx,r=t.target.x,a=(e=+(e=i),n=+(n=r),function(t){return e*(1-t)+n*t}),o=a(d),l=a(1-d),s=t.source.y+t.sy,u=t.target.y+t.ty,f=t.dy;f<1&&(f=1);var c="M"+i+","+s+"C"+o+","+s+" "+l+","+u+" "+r+","+u;return c+="v"+f,c+="C"+l+","+(u+f)+" "+o+","+(s+f)+" "+i+","+(s+f),c+="v"+-f+"z"}return e.curvature=function(t){return arguments.length?(d=+t,e):d},e};var d=function(){var c,d,h={},p=[],e=[];function y(n,t,i){if(i>=p.length)return d?d.call(h,t):c?t.sort(c):t;for(var e,r,a,o,l=-1,s=t.length,u=p[i++],f=new v;++l<s;)(o=f.get(e=u(r=t[l])))?o.push(r):f.set(e,[r]);return a=n?(r=n(),function(t,e){r.set(t,y(n,e,i))}):(r={},function(t,e){r[t]=y(n,e,i)}),f.forEach(a),r}return h.map=function(t,e){return y(e,t,0)},h.entries=function(t){return function n(t,i){if(i>=p.length)return t;var r=[],a=e[i++];return t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}(y(n,t,0),0)},h.key=function(t){return p.push(t),h},h.sortKeys=function(t){return e[p.length-1]=t,h},h.sortValues=function(t){return c=t,h},h.rollup=function(t){return d=t,h},h},n=function(t,e){var n=new v;if(t instanceof v)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};function v(){this._=Object.create(null)}var r="__proto__",a="\0";function h(t){return(t+="")===r||t[0]===a?a+t:t}function p(t){return(t+="")[0]===a?t.slice(1):t}function y(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function g(){function e(t,e){return t.source.y-e.source.y}function n(t,e){return t.target.y-e.target.y}s.forEach(function(t){t.sourceLinks.sort(n),t.targetLinks.sort(e)}),s.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}function _(t){return t.y+t.dy/2}function b(t){return t.value}return function(t,e){if(Object.defineProperty)for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1});else x._.extend(t.prototype,e)}(v,{has:function(t){return h(t)in this._},get:function(t){return this._[h(t)]},set:function(t,e){return this._[h(t)]=e},remove:function(t){return(t=h(t))in this._&&delete this._[t]},keys:function(){var t=[];for(var e in this._)t.push(p(e));return t},values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:p(e),value:this._[e]});return t},size:function(){var t=0;for(var e in this._)++t;return t},empty:function(){for(var t in this._)return!1;return!0},forEach:function(t){for(var e in this._)t.call(this,p(e),this._[e])}}),e}});t(E),t(e(function(t,e){!function(t,e,n,i,u){Object.defineProperty(t,"__esModule",{value:true});var l=a(e),r=a(n),f=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return h(t)}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return d(t)}function h(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function y(t,e,n){if(e)p(t.prototype,e);if(n)p(t,n);return t}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=l["default"].Shapes.Path,b=l["default"].Shapes.Rect,x=function(t){v(i,t);y(i,null,[{key:"defaultProps",value:function t(){return{keyField:{detail:"key字段",default:null},valueField:{detail:"value字段",default:"value"},parentField:{detail:"parent字段",default:null},node:{detail:"node",propertys:{width:{detail:"节点宽",default:18},padding:{detail:"节点间距",default:10},sort:{detail:"节点排序字段",default:function t(e,n){return e.y-n.y}},fillStyle:{detail:"节点背景色",default:null}}},line:{detail:"线设置",propertys:{strokeStyle:{detail:"线颜色",default:"blue"},alpha:{detail:"线透明度",default:.3},focus:{detail:"图形的hover设置",propertys:{enabled:{detail:"是否开启",default:true}}}}},label:{detail:"文本设置",propertys:{fontColor:{detail:"文本颜色",default:"#666666"},fontSize:{detail:"文本字体大小",default:12},textAlign:{detail:"水平对齐方式",default:"left"},verticalAlign:{detail:"垂直对齐方式",default:"middle"},format:{detail:"文本格式函数",default:null}}}}}}]);function i(t,e){var n;s(this,i);n=c(this,d(i).call(this,t,e));n.type="sankey";u._.extend(true,h(n),(0,u.getDefaultProps)(i.defaultProps()),t);n.init();return n}y(i,[{key:"init",value:function t(){this._links=new l["default"].Display.Sprite;this._nodes=new l["default"].Display.Sprite;this._labels=new l["default"].Display.Sprite;this.sprite.addChild(this._links);this.sprite.addChild(this._nodes);this.sprite.addChild(this._labels)}},{key:"draw",value:function t(e){!e&&(e={});u._.extend(true,this,e);this.data=this._trimGraphs();this._widget();this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y;this.fire("complete")}},{key:"_trimGraphs",value:function t(){var i=this;var r=[];var a=[];var e=i.dataFrame.getFieldData(i.keyField);var o=i.dataFrame.getFieldData(i.valueField);var l=i.dataFrame.getFieldData(i.parentField);var s={};u._.each(e,function(t,e){var n=[];if(i.parentField){n.push(l[e])}n=n.concat(t.split(/[|]/));u._.each(n,function(t){if(s[t]===undefined){s[t]=r.length;r.push({name:t})}})});u._.each(e,function(t,e){var n=[];if(i.parentField){n.push(l[e])}n=n.concat(t.split(/[|]/));if(n.length==2){a.push({source:s[n[0]],target:s[n[1]],value:o[e]})}});return(0,f["default"])().nodeWidth(this.node.width).nodePadding(this.node.padding).nodeSort(this.node.sort).size([this.width,this.height]).nodes(r).links(a).layout(16)}},{key:"_widget",value:function t(){this._drawNodes();this._drawLinks();this._drawLabels()}},{key:"_getColor",value:function t(e,n,i){var r=this;var a=e;if(u._.isArray(a)){a=a[i]}if(u._.isFunction(a)){a=a(n)}if(!a){a=r.app.getTheme(i)}return a}},{key:"_drawNodes",value:function t(){var e=this.data.nodes();var r=this;u._.each(e,function(t,e){var n=r._getColor(r.node.fillStyle,t,e);var i=new b({xyToInt:false,context:{x:t.x,y:t.y,width:r.data.nodeWidth(),height:Math.max(t.dy,1),fillStyle:n}});i.data=t;r._nodes.addChild(i)})}},{key:"_drawLinks",value:function t(){var e=this.data.links();var a=this;u._.each(e,function(t,e){var n=a._getColor(a.line.strokeStyle,t,e);var i=a.data.link()(t);var r=new _({xyToInt:false,context:{path:i,fillStyle:n,globalAlpha:a.line.alpha,cursor:"pointer"}});r.__glpha=a.line.alpha;r.link=t;r.on(u.event.types.get(),function(t){if(a.line.focus.enabled){if(t.type=="mouseover"){this.__glpha+=.1}if(t.type=="mouseout"){this.__glpha-=.1}}var e=this.link;e.type="sankey";t.eventInfo={trigger:a.node,title:e.source.name+" --<span style='position:relative;top:-0.5px;font-size:16px;left:-3px;'>></span> "+e.target.name,nodes:[e]};a.app.fire(t.type,t)});a._links.addChild(r)})}},{key:"_drawLabels",value:function t(){var e=this.data.nodes();var o=this;u._.each(e,function(t){var e=o.label.textAlign;var n=t.x+o.data.nodeWidth()+4;var i=t.y+Math.max(t.dy/2,1);var r=o.label.format?o.label.format(t.name,t):t.name;var a=new l["default"].Display.Text(r,{context:{x:n,y:i,fillStyle:o.label.fontColor,fontSize:o.label.fontSize,textAlign:e,textBaseline:o.label.verticalAlign}});o._labels.addChild(a);if(a.getTextWidth()+n>o.width){a.context.x=t.x-4;a.context.textAlign="right"}})}}]);return i}(r["default"]);u.global.registerComponent(x,"graphs","sankey"),t["default"]=x}(e,n,p,E,X)})),t(e(function(t,e){!function(t,e,n,w){Object.defineProperty(t,"__esModule",{value:true});var y=r(e),i;function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return u(t)}function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}var p=function(t){d(i,t);c(i,null,[{key:"defaultProps",value:function t(){return{node:{detail:"进度条设置",propertys:{width:{detail:"进度条的宽度",default:20},radius:{detail:"进度条两端的圆角半径",default:10},fillStyle:{detail:"进度条的填充色",documentation:"可以是单个颜色，也可以是数组，也可以是一个函数,也可以是个lineargradient",default:null}}},label:{detail:"进度值文本",propertys:{enabled:{detail:"是否启用label",default:"true"},unit:{detail:"单位值，默认%",default:"%"},unitColor:{detail:"单位值的颜色",default:null},unitFontSize:{detail:"单位值的大小",default:14},fontColor:{detail:"label颜色",default:null},fontSize:{detail:"label文本大小",default:26},fixNum:{detail:"toFixed的位数",default:2},format:{detail:"label格式化处理函数",default:function t(e,n){return e.toFixed(this.label.fixNum)}},lineWidth:{detail:"label文本描边线宽",default:null},strokeStyle:{detail:"label描边颜色",default:null},rotation:{detail:"label旋转角度",default:0},textAlign:{detail:"label textAlign",default:"center",values:["left","center","right"]},verticalAlign:{detail:"label verticalAlign",default:"middle",values:["top","middle","bottom"]},position:{detail:"label位置",default:"origin"},offsetX:{detail:"label在x方向的偏移量",default:0},offsetY:{detail:"label在y方向的偏移量",default:0}}},bgEnabled:{detail:"是否开启背景",default:true},bgColor:{detail:"进度条背景颜色",default:"#f7f7f7"},radius:{detail:"半径",default:null},allAngle:{detail:"总角度",documentation:"默认为null，则和坐标系同步",default:null},startAngle:{detail:"其实角度",documentation:"默认为null，则和坐标系同步",default:null}}}}]);function i(t,e){var n;o(this,i);n=l(this,s(i).call(this,t,e));n.type="progress";w._.extend(true,u(n),(0,w.getDefaultProps)(i.defaultProps()),t);n.bgNodeData=null;n.init();return n}c(i,[{key:"init",value:function t(){}},{key:"draw",value:function t(e){!e&&(e={});var n=this;w._.extend(true,this,e);n.grow(function(t){n.data=n._trimGraphs(t);n._widget()});this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y}},{key:"_trimGraphs",value:function t(s){var u=this;if(s==undefined){s=1}var e=this.app.getComponent({name:"coord"});this.enabledField=e.filterEnabledFields(this.field);var f=u.startAngle||e.startAngle;var c=u.allAngle||e.allAngle;var n=startAngle+allAngle;this.bgNodeData=this._getNodeData(f,c);this.bgNodeData.fillStyle=this._getStyle(this.bgNodeData,this.bgColor);var i={};w._.each(this.enabledField,function(o){var t=u.dataFrame.getFieldData(o);var l=[];w._.each(t,function(t,e){t*=s;var n=l.slice(-1)[0];var i=n?n.endAngle:f;var r=c*(t/100);var a=u._getNodeData(i,r,o,t,e);a.fillStyle=u._getStyle(a,u.node.fillStyle);l.push(a)});i[o]=l});return i}},{key:"_getNodeData",value:function t(e,n,i,r,a){var o=this;var l=this.app.getComponent({name:"coord"});var s=e+n/2;var u=e+n;var f=Math.PI*e/180;var c=Math.PI*s/180;var d=Math.PI*u/180;var h=o.radius||l.radius;var p=h-o.node.width;var y=l.getPointInRadianOfR(f,h);var v=l.getPointInRadianOfR(c,h);var g=l.getPointInRadianOfR(d,h);var _=l.getPointInRadianOfR(f,p);var b=l.getPointInRadianOfR(c,p);var x=l.getPointInRadianOfR(d,p);var m={field:i,value:r,text:r,iNode:a,allAngle:n,startAngle:e,middleAngle:s,endAngle:u,startRadian:f,middleRadian:c,endRadian:d,outRadius:h,innerRadius:p,startOutPoint:y,middleOutPoint:v,endOutPoint:g,startInnerPoint:_,middleInnerPoint:b,endInnerPoint:x,rowData:o.dataFrame.getRowDataAt(a),fillStyle:null};if(i){if(o.label.format&&w._.isFunction(o.label.format)){m.text=o.label.format.apply(this,[r,m])}}return m}},{key:"_widget",value:function t(){var p=this;if(p.bgEnabled){var e=p._getPathStr(this.bgNodeData);if(p._bgPathElement){p._bgPathElement.context.path=e}else{p._bgPathElement=new y["default"].Shapes.Path({context:{path:e}});p.sprite.addChild(p._bgPathElement)}p._bgPathElement.context.fillStyle=this.bgNodeData.fillStyle}w._.each(this.data,function(t){w._.each(t,function(t,e){var n=p._getPathStr(t);var i="progress_bar_"+t.field+"_"+e;var r=p.sprite.getChildById(i);if(r){r.context.path=n}else{r=new y["default"].Shapes.Path({id:i,context:{path:n}});p.sprite.addChild(r)}r.context.fillStyle=t.fillStyle;if(p.label.enabled){var a="progress_label_"+t.field+"_sprite_"+e;var o=p.sprite.getChildById(a);if(o);else{o=new y["default"].Display.Sprite({id:a});p.sprite.addChild(o)}o.context.x=p.label.offsetX-6;o.context.y=p.label.offsetY;var l={fillStyle:p.label.fontColor||t.fillStyle,fontSize:p.label.fontSize,lineWidth:p.label.lineWidth,strokeStyle:p.label.strokeStyle,textAlign:p.label.textAlign,textBaseline:p.label.verticalAlign,rotation:p.label.rotation};var s="progress_label_"+t.field+"_"+e;var u=o.getChildById(s);if(u){u.resetText(t.text);w._.extend(u.context,l)}else{var u=new y["default"].Display.Text(t.text,{id:s,context:l});o.addChild(u)}var f="progress_label_"+t.field+"_symbol_"+e;var c=o.getChildById(f);var d={x:u.getTextWidth()/2+2,y:3,fillStyle:p.label.unitColor||p.label.fontColor||t.fillStyle,fontSize:p.label.unitFontSize,textAlign:"left",textBaseline:p.label.verticalAlign};if(c){w._.extend(c.context,d)}else{var h=p.label.unit;var c=new y["default"].Display.Text(h,{id:f,context:d});o.addChild(c)}}})})}},{key:"_getPathStr",value:function t(e){var n="M"+e.startOutPoint.x+" "+e.startOutPoint.y;n+="A"+e.outRadius+" "+e.outRadius+" 0 0 1 "+e.middleOutPoint.x+" "+e.middleOutPoint.y;n+="A"+e.outRadius+" "+e.outRadius+" 0 0 1 "+e.endOutPoint.x+" "+e.endOutPoint.y;var i="L";if(e.allAngle%360==0);n+=i+e.endInnerPoint.x+" "+e.endInnerPoint.y;n+="A"+e.innerRadius+" "+e.innerRadius+" 0 0 0 "+e.middleInnerPoint.x+" "+e.middleInnerPoint.y;n+="A"+e.innerRadius+" "+e.innerRadius+" 0 0 0 "+e.startInnerPoint.x+" "+e.startInnerPoint.y;n+="Z";return n}},{key:"_getStyle",value:function t(e,n,i){var r=this;var a=this.app.getComponent({name:"coord"});var o=a.getFieldMapOf(e.field);i=i||(o?o.color:"#171717");var l;if(n){if(w._.isString(n)){l=n}if(w._.isArray(n)){l=n[e.iNode]}if(w._.isFunction(n)){l=n.apply(this,arguments)}if(n&&n.lineargradient){var l=r.ctx.createLinearGradient(e.startOutPoint.x,e.startOutPoint.y,e.endOutPoint.x,e.endOutPoint.y);w._.each(n.lineargradient,function(t,e){l.addColorStop(t.position,t.color)})}}if(!l){l=i}return l}}]);return i}(r(n)["default"]);w.global.registerComponent(p,"graphs","progress"),t["default"]=p}(e,n,p,X)}));var I=e(function(t,e){!function(t,p){Object.defineProperty(t,"__esModule",{value:true}),t.arrayToTreeJsonForRelation=t.jsonToArrayForRelation=t.checkDataIsJson=undefined;var r="__key__",y="children";function a(t,e,n){y=n;var i=false;if(!p._.isArray(t))return false;i=p._.every(t,function(t){return p._.isObject(t)});if(i){i=p._.every(t,function(t){return!p._.isArray(t[e])})}i=p._.some(t,function(t){return y in t});return i}function e(t,e,n){y=n;var l=[];var s=new WeakMap;var u=e.field||r;var f=e.node&&e.node.content&&e.node.content.field;if(!a(t,u,y)){console.error("该数据不能正确绘制，请提供数组对象形式的数据！");return l}var c=[];var d=0;var h=undefined;p._.each(t,function(t){c.push(t)});var i=function t(){if(!h[u])h[u]=d;var e=h[y];if(e){p._.each(e,function(t){s.set(t,{parentIndex:d,parentNode:h})});c=c.concat(e.reverse())}var n={};p._.each(h,function(t,e){if(e!==y){n[e]=t}});l.push(n);var i=s.get(h);if(i){var r=i.parentIndex;var a=i.parentNode;var o={};o.key=[r,d].join(",");if(f){o[f]=[a[f],h[f]].join("_")}l.push(o)}d++};while(h=c.pop()){i()}return l}function n(t,n){var a={};var o={};p._.each(t,function(t){var e=t[n.field];if(e.split(",").length==1){a[e]=t}else{o[e]=t}});var e=[];p._.each(a,function(t,n){var i=true;p._.each(o,function(t,e){if(e.split(",")[1]==n){i=false;return false}});if(i){e.push(t);t.__inRelation=true}});function l(t){p._.each(t,function(i,t){if(i.__cycle)return;var r=i[n.field];p._.each(o,function(t,e){if(e.split(",")[0]==r){var n=a[e.split(",")[1]];if(n){if(!i.children)i.children=[];i.children.push(n);if(n.__inRelation){n.__cycle=true}}}});if(i.children&&i.children.length){l(i.children)}})}l(e);return e}t.checkDataIsJson=a,t.jsonToArrayForRelation=e,t.arrayToTreeJsonForRelation=n}(e,X)});t(I),t(e(function(t,e){!function(t,e,n,h,u){Object.defineProperty(t,"__esModule",{value:true});var s=r(e),i=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t){return c(t)||f(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++){n[e]=t[e]}return n}}function d(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function p(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return v(t)}function y(t){y=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return y(t)}function v(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function _(t,e,n){if(e)g(t.prototype,e);if(n)g(t,n);return t}function b(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)x(t,e)}function x(t,e){x=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return x(t,e)}var m=s["default"].Shapes.Rect,w=s["default"].Shapes.Path,S=s["default"].Shapes.Arrow,k=s["default"].Shapes.Circle,O=function(t){b(r,t);_(r,null,[{key:"defaultProps",value:function t(){return{field:{detail:"key字段设置",documentation:"",default:null},childrenField:{detail:"树结构数据的关联字段",documentation:"如果是树结构的关联数据，不是行列式，那么就通过这个字段来建立父子关系",default:"children"},rankdir:{detail:"布局方向",default:null},node:{detail:"单个节点的配置",propertys:{shapeType:{detail:"节点图形，目前只支持rect",default:"rect"},maxWidth:{detail:"节点最大的width",default:200},width:{detail:"内容的width",default:null},height:{detail:"内容的height",default:null},radius:{detail:"圆角角度",default:6},fillStyle:{detail:"节点背景色",default:"#ffffff"},strokeStyle:{detail:"描边颜色",default:"#e5e5e5"},padding:{detail:"node节点容器到内容的边距",default:10},content:{detail:"节点内容配置",propertys:{field:{detail:"内容字段",documentation:"默认content字段",default:"content"},fontColor:{detail:"内容文本颜色",default:"#666"},format:{detail:"内容格式化处理函数",default:null},textAlign:{detail:"textAlign",default:"center"},textBaseline:{detail:"textBaseline",default:"middle"}}}}},line:{detail:"两个节点连线配置",propertys:{isTree:{detail:"是否树结构的连线",documentation:"非树结构启用该配置可能会有意想不到的惊喜，慎用",default:false},inflectionRadius:{detail:"树状连线的拐点圆角半径",default:0},shapeType:{detail:"连线的图形样式 brokenLine or bezier",default:"bezier"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"连线的颜色",default:"#e5e5e5"},lineType:{detail:"连线样式（虚线等）",default:"solid"},arrow:{detail:"是否有箭头",default:true}}},layout:{detail:"采用的布局引擎,比如dagre",default:"dagre"},layoutOpts:{detail:"布局引擎对应的配置,dagre详见dagre的官方wiki",propertys:{}},status:{detail:"一些开关配置",propertys:{transform:{detail:"是否启动拖拽缩放整个画布",propertys:{fitView:{detail:"自动缩放",default:""},enabled:{detail:"是否开启",default:true},scale:{detail:"缩放值",default:1},scaleOrigin:{detail:"缩放原点",default:{x:0,y:0}}}}}}}}}]);function r(t,e){var n;d(this,r);n=p(this,y(r).call(this,t,e));n.type="relation";h._.extend(true,v(n),(0,h.getDefaultProps)(r.defaultProps()),t);if(n.layout==="dagre"){var i={graph:{rankdir:"TB",nodesep:10,ranksep:10,edgesep:10,acyclicer:"greedy"},node:{},edge:{}};h._.extend(true,i,n.layoutOpts);h._.extend(true,n.layoutOpts,i);if(!n.rankdir){n.rankdir=n.layoutOpts.graph.rankdir}else{n.layoutOpts.graph.rankdir=n.rankdir}}n.domContainer=e.canvax.domView;n.induce=null;n.init();return n}_(r,[{key:"init",value:function t(){this.initInduce();this.nodesSp=new s["default"].Display.Sprite({id:"nodesSp"});this.edgesSp=new s["default"].Display.Sprite({id:"edgesSp"});this.graphsSp=new s["default"].Display.Sprite({id:"graphsSp"});this.graphsSp.addChild(this.edgesSp);this.graphsSp.addChild(this.nodesSp);this._grahsSpClone=new s["default"].Display.Sprite({id:"graphsSp_clone"});this.sprite.addChild(this.graphsSp);this.sprite.addChild(this._grahsSpClone);window.gsp=this.graphsSp}},{key:"initInduce",value:function t(){var a=this;this.induce=new m({id:"induce",context:{width:0,height:0,fillStyle:"#000000",globalAlpha:0}});this.sprite.addChild(this.induce);var e=false;var n=null;var i=a.app.canvax.domView.style.cursor;var o=32;var l=null;var s=0;this.induce.on(h.event.types.get(),function(r){if(a.status.transform.enabled){if(r.type=="mousedown"){a.induce.toFront();e=true;n=r.point;a.app.canvax.domView.style.cursor="move"}if(r.type=="mouseup"||r.type=="mouseout"){a.induce.toBack();e=false;n=null;a.app.canvax.domView.style.cursor=i}if(r.type=="mousemove"){if(e){a.graphsSp.context.x+=r.point.x-n.x;a.graphsSp.context.y+=r.point.y-n.y;n=r.point}}if(r.type=="wheel"){if(Math.abs(r.deltaY)>Math.abs(s)){s=r.deltaY}if(!l){l=setTimeout(function(){var t=.02;var e=r.deltaY/30*t;if(Math.abs(e)<.04){e=Math.sign(e)*.04}if(Math.abs(e)>.08){e=Math.sign(e)*.08}var n=a.status.transform.scale+e;if(n<=.1){n=.1}if(n>=1){n=1}var i=r.target.localToGlobal(r.point);a.scale(n,i);l=null;s=0},o)}r.preventDefault()}}})}},{key:"scale",value:function t(e,n){return}},{key:"draw",value:function t(e){!e&&(e={});h._.extend(true,this,e);this.data=e.data||this._initData();if(this.layout=="dagre"){this.dagreLayout(this.data)}else if(this.layout=="tree"){this.treeLayout(this.data)}else if(h._.isFunction(this.layout)){this.layout(this.data)}this.widget();this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y;if(this.status.transform.fitView=="autoZoom"){this.sprite.context.scaleX=this.width/this.data.size.width;this.sprite.context.scaleY=this.height/this.data.size.height}var n=(this.width-this.data.size.width)/2;if(n<0){n=0}this.graphsSp.context.x=n;this._grahsSpClone.context.x=n}},{key:"_initData",value:function t(){var e={nodes:[],edges:[],size:{width:0,height:0}};var n=this.app._data;if((0,u.checkDataIsJson)(n,this.field,this.childrenField)){this.jsonData=(0,u.jsonToArrayForRelation)(n,this,this.childrenField);this.dataFrame=this.app.dataFrame=(0,h.dataFrame)(this.jsonData)}else{if(this.layout=="tree"){this.jsonData=(0,u.arrayToTreeJsonForRelation)(this.app.dataFrame.jsonOrg,this)}}var i={};for(var r=0;r<this.dataFrame.length;r++){var a=this.dataFrame.getRowDataAt(r);var o=h._.flatten([(a[this.field]+"").split(",")]);var l=this._getContent(a);var s={type:"relation",iNode:r,rowData:a,key:o.length==1?o[0]:o,content:l,ctype:this._checkHtml(l)?"html":"canvas",element:null,width:null,height:null,x:null,y:null,shapeType:null,source:null,target:null};h._.extend(s,this._getElementAndSize(s));if(o.length==1){s.shapeType=this.getProp(this.node.shapeType,s);e.nodes.push(s);i[s.key]=s}else{s.shapeType=this.getProp(this.line.shapeType,s);e.edges.push(s)}}h._.each(e.edges,function(t){var e=t.key;t.source=i[e[0]];t.target=i[e[1]]});return e}},{key:"dagreLayout",value:function t(e){var n=h.global.layout.dagre;var i=new n.graphlib.Graph;i.setGraph(this.layoutOpts.graph);i.setDefaultEdgeLabel(function(){return{}});h._.each(e.nodes,function(t){i.setNode(t.key,t)});h._.each(e.edges,function(t){i.setEdge.apply(i,o(t.key).concat([t]))});n.layout(i);e.size.width=i.graph().width;e.size.height=i.graph().height;return e}},{key:"treeLayout",value:function t(e){var n=h.global.layout.tree().separation(function(t,e){var n=t.width+e.width;return n/2+10});var i=n.nodes(this.jsonData[0]).reverse();var r=n.links(i)}},{key:"widget",value:function t(){var o=this;h._.each(this.data.edges,function(t){if(o.line.isTree){o._setTreePoints(t)}var e=o.getProp(o.line.lineWidth,t);var n=o.getProp(o.line.strokeStyle,t);var i=new w({context:{path:o._getPathStr(t,o.line.inflectionRadius),lineWidth:e,strokeStyle:n}});var r=t.points.slice(-2,-1)[0];if(o.line.shapeType=="bezier"){if(o.rankdir=="TB"||o.rankdir=="BT"){r.x+=(t.source.x-t.target.x)/20}if(o.rankdir=="LR"||o.rankdir=="RL"){r.y+=(t.source.y-t.target.y)/20}}o.edgesSp.addChild(i);if(o.line.arrow){var a=new S({context:{control:r,point:t.points.slice(-1)[0],strokeStyle:n}});o.edgesSp.addChild(a)}});h._.each(this.data.nodes,function(e){var n=new m({context:{x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height,lineWidth:1,fillStyle:o.getProp(o.node.fillStyle,e),strokeStyle:o.getProp(o.node.strokeStyle,e),radius:h._.flatten([o.getProp(o.node.radius,e)])}});n.nodeData=e;o.nodesSp.addChild(n);n.on(h.event.types.get(),function(t){t.eventInfo={trigger:o.node,nodes:[this.nodeData]};o.app.fire(t.type,t)});if(e.ctype=="canvas"){e.element.context.x=e.x-e.width/2;e.element.context.y=e.y-e.height/2;o.nodesSp.addChild(e.element)}if(e.ctype=="html"){n.on("transform",function(){var t=typeof window!=="undefined"?window.devicePixelRatio:1;e.element.style.transform="matrix("+n.worldTransform.clone().scale(1/t,1/t).toArray().join()+")";e.element.style.transformOrigin="left top";e.element.style.marginLeft=o.getProp(o.node.padding,e)*o.status.transform.scale+"px";e.element.style.marginTop=o.getProp(o.node.padding,e)*o.status.transform.scale+"px";e.element.style.visibility="visible"})}});this.induce.context.width=this.width;this.induce.context.height=this.height}},{key:"_setTreePoints",value:function t(e){var n=e.points;if(this.rankdir=="TB"||this.rankdir=="BT"){n[0]={x:e.source.x,y:e.source.y+(this.rankdir=="BT"?-1:1)*e.source.height/2};n.splice(1,0,{x:e.source.x,y:n.slice(-2,-1)[0].y})}if(this.rankdir=="LR"||this.rankdir=="RL"){n[0]={x:e.source.x+(this.rankdir=="RL"?-1:1)*e.source.width/2,y:e.source.y};n.splice(1,0,{x:n.slice(-2,-1)[0].x,y:e.source.y})}e.points=n}},{key:"_getPathStr",value:function t(e,f){var c=e.points;var n=c[0];var i=c.slice(-1)[0];var d="M"+n.x+" "+n.y;if(e.shapeType=="bezier"){if(c.length==3){d+=",Q"+c[1].x+" "+c[1].y+" "+i.x+" "+i.y}if(c.length==4){d+=",C"+c[1].x+" "+c[1].y+" "+c[2].x+" "+c[2].y+" "+i.x+" "+i.y}}if(e.shapeType=="brokenLine"){h._.each(c,function(i,t){if(t){if(f&&t<c.length-1){var e=c[t-1];var n=c[t+1];var r=f;var a=Math.max(Math.abs(e.x-i.x)/2,Math.abs(e.y-i.y)/2);var o=Math.max(Math.abs(n.x-i.x)/2,Math.abs(n.y-i.y)/2);r=h._.min([r,a,o]);if(i.x==e.x&&i.y==e.y||i.x==n.x&&i.y==n.y||Math.atan2(i.y-e.y,i.x-e.x)==Math.atan2(n.y-i.y,n.x-i.x)){return}else{var l=function t(e){var n=Math.atan2(e.y-i.y,e.x-i.x);return{x:i.x+r*Math.cos(n),y:i.y+r*Math.sin(n)}};var s=l(e);var u=l(n);d+=",L"+s.x+" "+s.y+",Q"+i.x+" "+i.y+" "+u.x+" "+u.y}}else{d+=",L"+i.x+" "+i.y}}})}return d}},{key:"_checkHtml",value:function t(e){var n=/<[^>]+>/g;return n.test(e)}},{key:"_getContent",value:function t(e){var n=this;var i;if(this._isField(this.node.content.field)){i=e[this.node.content.field]}if(n.node.content.format&&h._.isFunction(n.node.content.format)){i=n.node.content.format.apply(this,[i,e])}return i}},{key:"_isField",value:function t(e){return~this.dataFrame.fields.indexOf(e)}},{key:"_getElementAndSize",value:function t(e){var n=this;var i=e.ctype;if(n._isField(i)){i=e.rowData[i]}!i&&(i="canvas");if(i=="canvas"){return n._getEleAndsetCanvasSize(e)}if(i=="html"){return n._getEleAndsetHtmlSize(e)}}},{key:"_getEleAndsetCanvasSize",value:function t(e){var n=this;var i=e.content;var r=e.rowData.width,a=e.rowData.height;var o=new s["default"].Display.Sprite({});var l=new s["default"].Display.Text(i,{context:{fillStyle:n.getProp(n.node.content.fontColor,e),textAlign:n.getProp(n.node.content.textAlign,e),textBaseline:n.getProp(n.node.content.textBaseline,e)}});if(!r){r=l.getTextWidth()+n.getProp(n.node.padding,e)*n.status.transform.scale*2}if(!a){a=l.getTextHeight()+n.getProp(n.node.padding,e)*n.status.transform.scale*2}o.addChild(l);o.context.width=parseInt(r);o.context.height=parseInt(a);l.context.x=parseInt(r/2);l.context.y=parseInt(a/2);return{element:o,width:r,height:a}}},{key:"_getEleAndsetHtmlSize",value:function t(e){var n=this;var i=e.content;var r=e.rowData.width,a=e.rowData.height;var o=document.createElement("div");o.className="chartx_relation_node";o.style.cssText+="; position:absolute;visibility:hidden;";o.style.cssText+="; color:"+n.getProp(n.node.content.fontColor,e)+";";o.style.cssText+="; text-align:"+n.getProp(n.node.content.textAlign,e)+";";o.style.cssText+="; vertical-align:"+n.getProp(n.node.content.textBaseline,e)+";";o.innerHTML=i;this.domContainer.appendChild(o);if(!r){r=o.offsetWidth+n.getProp(n.node.padding,e)*n.status.transform.scale*2}if(!a){a=o.offsetHeight+n.getProp(n.node.padding,e)*n.status.transform.scale*2}return{element:o,width:r,height:a}}},{key:"getNodesAt",value:function t(e){}},{key:"getProp",value:function t(e,n){var i=e;if(this._isField(e)){i=n.rowData[e]}else{if(h._.isArray(e)){i=e[n.iNode]}if(h._.isFunction(e)){i=e.apply(this,[n])}}return i}}]);return r}(i["default"]);h.global.registerComponent(O,"graphs","relation"),t["default"]=O}(e,n,p,X,I)}));var D=e(function(t,e){!function(t){function f(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){f=function t(e){return typeof e}}else{f=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return f(t)}function e(a,o){var l;if(a==null)a=0;if(o==null)o=0;function e(){var t,e=l.length,n,i=0,r=0;for(t=0;t<e;++t){n=l[t],i+=n.x,r+=n.y}for(i=i/e-a,r=r/e-o,t=0;t<e;++t){n=l[t],n.x-=i,n.y-=r}}e.initialize=function(t){l=t};e.x=function(t){return arguments.length?(a=+t,e):a};e.y=function(t){return arguments.length?(o=+t,e):o};return e}function n(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return d(this.cover(e,n),e,n,t)}function d(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a=t._root,o={data:i},l=t._x0,s=t._y0,u=t._x1,f=t._y1,c,d,h,p,y,v,g,_;if(!a)return t._root=o,t;while(a.length){if(y=e>=(c=(l+u)/2))l=c;else u=c;if(v=n>=(d=(s+f)/2))s=d;else f=d;if(r=a,!(a=a[g=v<<1|y]))return r[g]=o,t}h=+t._x.call(null,a.data);p=+t._y.call(null,a.data);if(e===h&&n===p)return o.next=a,r?r[g]=o:t._root=o,t;do{r=r?r[g]=new Array(4):t._root=new Array(4);if(y=e>=(c=(l+u)/2))l=c;else u=c;if(v=n>=(d=(s+f)/2))s=d;else f=d}while((g=v<<1|y)===(_=(p>=d)<<1|h>=c));return r[_]=a,r[g]=o,t}function i(t){var e,n,i=t.length,r,a,o=new Array(i),l=new Array(i),s=Infinity,u=Infinity,f=-Infinity,c=-Infinity;for(n=0;n<i;++n){if(isNaN(r=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e)))continue;o[n]=r;l[n]=a;if(r<s)s=r;if(r>f)f=r;if(a<u)u=a;if(a>c)c=a}if(s>f||u>c)return this;this.cover(s,u).cover(f,c);for(n=0;n<i;++n){d(this,o[n],l[n],t[n])}return this}function r(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n)){r=(n=Math.floor(t))+1;a=(i=Math.floor(e))+1}else{var o=r-n,l=this._root,s,u;while(n>t||t>=r||i>e||e>=a){u=(e<i)<<1|t<n;s=new Array(4),s[u]=l,l=s,o*=2;switch(u){case 0:r=n+o,a=i+o;break;case 1:n=r-o,a=i+o;break;case 2:r=n+o,i=a-o;break;case 3:n=r-o,i=a-o;break}}if(this._root&&this._root.length)this._root=l}this._x0=n;this._y0=i;this._x1=r;this._y1=a;return this}function a(){var e=[];this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)});return e}function o(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]}function w(t,e,n,i,r){this.node=t;this.x0=e;this.y0=n;this.x1=i;this.y1=r}function l(t,e,n){var i,r=this._x0,a=this._y0,o,l,s,u,f=this._x1,c=this._y1,d=[],h=this._root,p,y;if(h)d.push(new w(h,r,a,f,c));if(n==null)n=Infinity;else{r=t-n,a=e-n;f=t+n,c=e+n;n*=n}while(p=d.pop()){if(!(h=p.node)||(o=p.x0)>f||(l=p.y0)>c||(s=p.x1)<r||(u=p.y1)<a)continue;if(h.length){var v=(o+s)/2,g=(l+u)/2;d.push(new w(h[3],v,g,s,u),new w(h[2],o,g,v,u),new w(h[1],v,l,s,g),new w(h[0],o,l,v,g));if(y=(e>=g)<<1|t>=v){p=d[d.length-1];d[d.length-1]=d[d.length-1-y];d[d.length-1-y]=p}}else{var _=t-+this._x.call(null,h.data),b=e-+this._y.call(null,h.data),x=_*_+b*b;if(x<n){var m=Math.sqrt(n=x);r=t-m,a=e-m;f=t+m,c=e+m;i=h.data}}}return i}function s(t){if(isNaN(f=+this._x.call(null,t))||isNaN(c=+this._y.call(null,t)))return this;var e,n=this._root,i,r,a,o=this._x0,l=this._y0,s=this._x1,u=this._y1,f,c,d,h,p,y,v,g;if(!n)return this;if(n.length)while(true){if(p=f>=(d=(o+s)/2))o=d;else s=d;if(y=c>=(h=(l+u)/2))l=h;else u=h;if(!(e=n,n=n[v=y<<1|p]))return this;if(!n.length)break;if(e[v+1&3]||e[v+2&3]||e[v+3&3])i=e,g=v}while(n.data!==t){if(!(r=n,n=n.next))return this}if(a=n.next)delete n.next;if(r)return a?r.next=a:delete r.next,this;if(!e)return this._root=a,this;a?e[v]=a:delete e[v];if((n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length){if(i)i[g]=n;else this._root=n}return this}function u(t){for(var e=0,n=t.length;e<n;++e){this.remove(t[e])}return this}function c(){return this._root}function h(){var e=0;this.visit(function(t){if(!t.length)do{++e}while(t=t.next)});return e}function p(t){var e=[],n,i=this._root,r,a,o,l,s;if(i)e.push(new w(i,this._x0,this._y0,this._x1,this._y1));while(n=e.pop()){if(!t(i=n.node,a=n.x0,o=n.y0,l=n.x1,s=n.y1)&&i.length){var u=(a+l)/2,f=(o+s)/2;if(r=i[3])e.push(new w(r,u,f,l,s));if(r=i[2])e.push(new w(r,a,f,u,s));if(r=i[1])e.push(new w(r,u,o,l,f));if(r=i[0])e.push(new w(r,a,o,u,f))}}return this}function y(t){var e=[],n=[],i;if(this._root)e.push(new w(this._root,this._x0,this._y0,this._x1,this._y1));while(i=e.pop()){var r=i.node;if(r.length){var a,o=i.x0,l=i.y0,s=i.x1,u=i.y1,f=(o+s)/2,c=(l+u)/2;if(a=r[0])e.push(new w(a,o,l,f,c));if(a=r[1])e.push(new w(a,f,l,s,c));if(a=r[2])e.push(new w(a,o,c,f,u));if(a=r[3])e.push(new w(a,f,c,s,u))}n.push(i)}while(i=n.pop()){t(i.node,i.x0,i.y0,i.x1,i.y1)}return this}function v(t){return t[0]}function g(t){return arguments.length?(this._x=t,this):this._x}function _(t){return t[1]}function b(t){return arguments.length?(this._y=t,this):this._y}function x(t,e,n){var i=new m(e==null?v:e,n==null?_:n,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function m(t,e,n,i,r,a){this._x=t;this._y=e;this._x0=n;this._y0=i;this._x1=r;this._y1=a;this._root=undefined}function S(t){var e={data:t.data},n=e;while(t=t.next){n=n.next={data:t.data}}return e}Object.defineProperty(t,"__esModule",{value:true});var k=x.prototype=m.prototype;function O(t){return function(){return t}}function P(){return(Math.random()-.5)*1e-6}function A(t){return t.x+t.vx}function C(t){return t.y+t.vy}function M(i){var a,o,v=1,l=1;if(typeof i!=="function")i=O(i==null?1:+i);function e(){var t,e=a.length,n,c,d,h,p,y;for(var i=0;i<l;++i){n=x(a,A,C).visitAfter(s);for(t=0;t<e;++t){c=a[t];p=o[c.index],y=p*p;d=c.x+c.vx;h=c.y+c.vy;n.visit(r)}}function r(t,e,n,i,r){var a=t.data,o=t.r,l=p+o;if(a){if(a.index>c.index){var s=d-a.x-a.vx,u=h-a.y-a.vy,f=s*s+u*u;if(f<l*l){if(s===0)s=P(),f+=s*s;if(u===0)u=P(),f+=u*u;f=(l-(f=Math.sqrt(f)))/f*v;c.vx+=(s*=f)*(l=(o*=o)/(y+o));c.vy+=(u*=f)*l;a.vx-=s*(l=1-l);a.vy-=u*l}}return}return e>d+l||i<d-l||n>h+l||r<h-l}}function s(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e){if(t[e]&&t[e].r>t.r){t.r=t[e].r}}}function n(){if(!a)return;var t,e=a.length,n;o=new Array(e);for(t=0;t<e;++t){n=a[t],o[n.index]=+i(n,t,a)}}e.initialize=function(t){a=t;n()};e.iterations=function(t){return arguments.length?(l=+t,e):l};e.strength=function(t){return arguments.length?(v=+t,e):v};e.radius=function(t){return arguments.length?(i=typeof t==="function"?t:O(+t),n(),e):i};return e}function j(t){return t.index}function T(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function E(c){var a=j,n=t,d,i=O(30),h,o,l,p,y=1;if(c==null)c=[];function t(t){return 1/Math.min(l[t.source.index],l[t.target.index])}function e(t){for(var e=0,n=c.length;e<y;++e){for(var i=0,r,a,o,l,s,u,f;i<n;++i){r=c[i],a=r.source,o=r.target;l=o.x+o.vx-a.x-a.vx||P();s=o.y+o.vy-a.y-a.vy||P();u=Math.sqrt(l*l+s*s);u=(u-h[i])/u*t*d[i];l*=u,s*=u;o.vx-=l*(f=p[i]);o.vy-=s*f;a.vx+=l*(f=1-f);a.vy+=s*f}}}function r(){if(!o)return;var t,e=o.length,n=c.length,i=new Map(o.map(function(t,e){return[a(t,e,o),t]})),r;for(t=0,l=new Array(e);t<n;++t){r=c[t],r.index=t;if(f(r.source)!=="object")r.source=T(i,r.source);if(f(r.target)!=="object")r.target=T(i,r.target);l[r.source.index]=(l[r.source.index]||0)+1;l[r.target.index]=(l[r.target.index]||0)+1}for(t=0,p=new Array(n);t<n;++t){r=c[t],p[t]=l[r.source.index]/(l[r.source.index]+l[r.target.index])}d=new Array(n),s();h=new Array(n),u()}function s(){if(!o)return;for(var t=0,e=c.length;t<e;++t){d[t]=+n(c[t],t,c)}}function u(){if(!o)return;for(var t=0,e=c.length;t<e;++t){h[t]=+i(c[t],t,c)}}e.initialize=function(t){o=t;r()};e.links=function(t){return arguments.length?(c=t,r(),e):c};e.id=function(t){return arguments.length?(a=t,e):a};e.iterations=function(t){return arguments.length?(y=+t,e):y};e.strength=function(t){return arguments.length?(n=typeof t==="function"?t:O(+t),s(),e):n};e.distance=function(t){return arguments.length?(i=typeof t==="function"?t:O(+t),u(),e):i};return e}k.copy=function(){var t=new m(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=S(e),t;n=[{source:e,target:t._root=new Array(4)}];while(e=n.pop()){for(var r=0;r<4;++r){if(i=e.source[r]){if(i.length)n.push({source:i,target:e.target[r]=new Array(4)});else e.target[r]=S(i)}}}return t},k.add=n,k.addAll=i,k.cover=r,k.data=a,k.extent=o,k.find=l,k.remove=s,k.removeAll=u,k.root=c,k.size=h,k.visit=p,k.visitAfter=y,k.x=g,k.y=b;var I={value:function t(){}};function D(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new L(n)}function L(t){this._=t}function R(t,i){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0)e=t.slice(n+1),t=t.slice(0,n);if(t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function F(t,e){for(var n=0,i=t.length,r;n<i;++n){if((r=t[n]).name===e){return r.value}}}function N(t,e,n){for(var i=0,r=t.length;i<r;++i){if(t[i].name===e){t[i]=I,t=t.slice(0,i).concat(t.slice(i+1));break}}if(n!=null)t.push({name:e,value:n});return t}L.prototype=D.prototype={constructor:L,on:function t(e,n){var i=this._,r=R(e+"",i),a,o=-1,l=r.length;if(arguments.length<2){while(++o<l){if((a=(e=r[o]).type)&&(a=F(i[a],e.name)))return a}return}if(n!=null&&typeof n!=="function")throw new Error("invalid callback: "+n);while(++o<l){if(a=(e=r[o]).type)i[a]=N(i[a],e.name,n);else if(n==null)for(a in i){i[a]=N(i[a],e.name,null)}}return this},copy:function t(){var t={},e=this._;for(var n in e){t[n]=e[n].slice()}return new L(t)},call:function t(e,n){if((a=arguments.length-2)>0)for(var i=new Array(a),r=0,a,o;r<a;++r){i[r]=arguments[r+2]}if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r){o[r].value.apply(n,i)}},apply:function t(e,n,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a){r[a].value.apply(n,i)}}};var W=0,z=0,G=0,B=1e3,V,H,U=0,q=0,Y=0,$=(typeof performance==="undefined"?"undefined":f(performance))==="object"&&performance.now?performance:Date,X=(typeof window==="undefined"?"undefined":f(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function K(){return q||(X(Z),q=$.now()+Y)}function Z(){q=0}function Q(){this._call=this._time=this._next=null}function J(t,e,n){var i=new Q;i.restart(t,e,n);return i}function tt(){K();++W;var t=V,e;while(t){if((e=q-t._time)>=0)t._call.call(null,e);t=t._next}--W}function et(){q=(U=$.now())+Y;W=z=0;try{tt()}finally{W=0;it();q=0}}function nt(){var t=$.now(),e=t-U;if(e>B)Y-=e,U=t}function it(){var t,e=V,n,i=Infinity;while(e){if(e._call){if(i>e._time)i=e._time;t=e,e=e._next}else{n=e._next,e._next=null;e=t?t._next=n:V=n}}H=t;rt(i)}function rt(t){if(W)return;if(z)z=clearTimeout(z);var e=t-q;if(e>24){if(t<Infinity)z=setTimeout(et,t-$.now()-Y);if(G)G=clearInterval(G)}else{if(!G)U=$.now(),G=setInterval(nt,B);W=1,X(et)}}function at(t){return t.x}function ot(t){return t.y}Q.prototype=J.prototype={constructor:Q,restart:function t(e,n,i){if(typeof e!=="function")throw new TypeError("callback is not a function");i=(i==null?K():+i)+(n==null?0:+n);if(!this._next&&H!==this){if(H)H._next=this;else V=this;H=this}this._call=e;this._time=i;rt()},stop:function t(){if(this._call){this._call=null;this._time=Infinity;rt()}}};var lt=10,st=Math.PI*(3-Math.sqrt(5));function ut(c){var a,o=1,n=.001,l=1-Math.pow(n,1/300),s=0,u=.6,f=new Map,e=J(r),i=D("tick","end");if(c==null)c=[];function r(){t();i.call("tick",a);if(o<n){e.stop();i.call("end",a)}}function t(t){var e,n=c.length,i;if(t===undefined)t=1;for(var r=0;r<t;++r){o+=(s-o)*l;f.forEach(function(t){t(o)});for(e=0;e<n;++e){i=c[e];if(i.fx==null)i.x+=i.vx*=u;else i.x=i.fx,i.vx=0;if(i.fy==null)i.y+=i.vy*=u;else i.y=i.fy,i.vy=0}}return a}function d(){for(var t=0,e=c.length,n;t<e;++t){n=c[t],n.index=t;if(n.fx!=null)n.x=n.fx;if(n.fy!=null)n.y=n.fy;if(isNaN(n.x)||isNaN(n.y)){var i=lt*Math.sqrt(t),r=t*st;n.x=i*Math.cos(r);n.y=i*Math.sin(r)}if(isNaN(n.vx)||isNaN(n.vy)){n.vx=n.vy=0}}}function h(t){if(t.initialize)t.initialize(c);return t}d();return a={tick:t,restart:function t(){return e.restart(r),a},stop:function t(){return e.stop(),a},nodes:function t(e){return arguments.length?(c=e,d(),f.forEach(h),a):c},alpha:function t(e){return arguments.length?(o=+e,a):o},alphaMin:function t(e){return arguments.length?(n=+e,a):n},alphaDecay:function t(e){return arguments.length?(l=+e,a):+l},alphaTarget:function t(e){return arguments.length?(s=+e,a):s},velocityDecay:function t(e){return arguments.length?(u=1-e,a):1-u},force:function t(e,n){return arguments.length>1?(n==null?f["delete"](e):f.set(e,h(n)),a):f.get(e)},find:function t(e,n,i){var r=0,a=c.length,o,l,s,u,f;if(i==null)i=Infinity;else i*=i;for(r=0;r<a;++r){u=c[r];o=e-u.x;l=n-u.y;s=o*o+l*l;if(s<i)f=u,i=s}return f},on:function t(e,n){return arguments.length>1?(i.on(e,n),a):i.on(e)}}}function ft(){var r,s,u,i=O(-30),f,c=1,d=Infinity,h=.81;function e(t){var e,n=r.length,i=x(r,at,ot).visitAfter(a);for(u=t,e=0;e<n;++e){s=r[e],i.visit(o)}}function n(){if(!r)return;var t,e=r.length,n;f=new Array(e);for(t=0;t<e;++t){n=r[t],f[n.index]=+i(n,t,r)}}function a(t){var e=0,n,i,r=0,a,o,l;if(t.length){for(a=o=l=0;l<4;++l){if((n=t[l])&&(i=Math.abs(n.value))){e+=n.value,r+=i,a+=i*n.x,o+=i*n.y}}t.x=a/r;t.y=o/r}else{n=t;n.x=n.data.x;n.y=n.data.y;do{e+=f[n.data.index]}while(n=n.next)}t.value=e}function o(t,e,n,i){if(!t.value)return true;var r=t.x-s.x,a=t.y-s.y,o=i-e,l=r*r+a*a;if(o*o/h<l){if(l<d){if(r===0)r=P(),l+=r*r;if(a===0)a=P(),l+=a*a;if(l<c)l=Math.sqrt(c*l);s.vx+=r*t.value*u/l;s.vy+=a*t.value*u/l}return true}else if(t.length||l>=d)return;if(t.data!==s||t.next){if(r===0)r=P(),l+=r*r;if(a===0)a=P(),l+=a*a;if(l<c)l=Math.sqrt(c*l)}do{if(t.data!==s){o=f[t.data.index]*u/l;s.vx+=r*o;s.vy+=a*o}}while(t=t.next)}e.initialize=function(t){r=t;n()};e.strength=function(t){return arguments.length?(i=typeof t==="function"?t:O(+t),n(),e):i};e.distanceMin=function(t){return arguments.length?(c=t*t,e):Math.sqrt(c)};e.distanceMax=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)};e.theta=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)};return e}function ct(n,s,u){var f,i=O(.1),c,d;if(typeof n!=="function")n=O(+n);if(s==null)s=0;if(u==null)u=0;function e(t){for(var e=0,n=f.length;e<n;++e){var i=f[e],r=i.x-s||1e-6,a=i.y-u||1e-6,o=Math.sqrt(r*r+a*a),l=(d[e]-o)*c[e]*t/o;i.vx+=r*l;i.vy+=a*l}}function r(){if(!f)return;var t,e=f.length;c=new Array(e);d=new Array(e);for(t=0;t<e;++t){d[t]=+n(f[t],t,f);c[t]=isNaN(d[t])?0:+i(f[t],t,f)}}e.initialize=function(t){f=t,r()};e.strength=function(t){return arguments.length?(i=typeof t==="function"?t:O(+t),r(),e):i};e.radius=function(t){return arguments.length?(n=typeof t==="function"?t:O(+t),r(),e):n};e.x=function(t){return arguments.length?(s=+t,e):s};e.y=function(t){return arguments.length?(u=+t,e):u};return e}function dt(n){var i=O(.1),r,a,o;if(typeof n!=="function")n=O(n==null?0:+n);function e(t){for(var e=0,n=r.length,i;e<n;++e){i=r[e],i.vx+=(o[e]-i.x)*a[e]*t}}function l(){if(!r)return;var t,e=r.length;a=new Array(e);o=new Array(e);for(t=0;t<e;++t){a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}e.initialize=function(t){r=t;l()};e.strength=function(t){return arguments.length?(i=typeof t==="function"?t:O(+t),l(),e):i};e.x=function(t){return arguments.length?(n=typeof t==="function"?t:O(+t),l(),e):n};return e}function ht(n){var i=O(.1),r,a,o;if(typeof n!=="function")n=O(n==null?0:+n);function e(t){for(var e=0,n=r.length,i;e<n;++e){i=r[e],i.vy+=(o[e]-i.y)*a[e]*t}}function l(){if(!r)return;var t,e=r.length;a=new Array(e);o=new Array(e);for(t=0;t<e;++t){a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}e.initialize=function(t){r=t;l()};e.strength=function(t){return arguments.length?(i=typeof t==="function"?t:O(+t),l(),e):i};e.y=function(t){return arguments.length?(n=typeof t==="function"?t:O(+t),l(),e):n};return e}t.forceCenter=e,t.forceCollide=M,t.forceLink=E,t.forceManyBody=ft,t.forceRadial=ct,t.forceSimulation=ut,t.forceX=dt,t.forceY=ht}(e)});t(D),t(e(function(t,e){!function(t,e,n,f,i){Object.defineProperty(t,"__esModule",{value:true});var c=l(e),r=l(n),d=a(i);function o(){if(typeof WeakMap!=="function")return null;var t=new WeakMap;o=function(){return t};return t}function a(t){if(t&&t.__esModule){return t}if(t===null||typeof t!=="object"&&typeof t!=="function"){return{default:t}}var e=o();if(e&&e.has(t)){return e.get(t)}var n={};var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;if(a&&(a.get||a.set)){Object.defineProperty(n,r,a)}else{n[r]=t[r]}}}n.default=t;if(e){e.set(t,n)}return n}function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function t(e){return typeof e}}else{s=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return s(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function h(t,e){if(e&&(s(e)==="object"||typeof e==="function")){return e}return y(t)}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return p(t)}function y(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function g(t,e,n){if(e)v(t.prototype,e);if(n)v(t,n);return t}function _(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)b(t,e)}function b(t,e){b=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return b(t,e)}var x=c["default"].Shapes.Rect,m=c["default"].Shapes.Path,w=c["default"].Shapes.Arrow,S=c["default"].Shapes.Circle,k=c["default"].Display.Text,O=c["default"].Shapes.Line,P=function(t){_(i,t);g(i,null,[{key:"defaultProps",value:function t(){return{keyField:{detail:"key字段",default:"key"},valueField:{detail:"value字段",default:"value"},node:{detail:"单个节点的配置",propertys:{shapeType:{detail:"节点图形",default:"circle"},maxWidth:{detail:"节点最大的width",default:200},width:{detail:"内容的width",default:null},height:{detail:"内容的height",default:null},radius:{detail:"圆角角度",default:6},fillStyle:{detail:"节点背景色",default:"#acdf7d"},strokeStyle:{detail:"描边颜色",default:"#e5e5e5"},padding:{detail:"node节点容器到内容的边距",default:10},content:{detail:"节点内容配置",propertys:{field:{detail:"内容字段",documentation:"默认content字段",default:"content"},fontColor:{detail:"内容文本颜色",default:"#666"},format:{detail:"内容格式化处理函数",default:null},textAlign:{detail:"textAlign",default:"center"},textBaseline:{detail:"textBaseline",default:"middle"}}}}},line:{detail:"两个节点连线配置",propertys:{lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"连线的颜色",default:"#e5e5e5"},lineType:{detail:"连线样式（虚线等）",default:"solid"},arrow:{detail:"是否有箭头",default:true}}},status:{detail:"一些开关配置",propertys:{transform:{detail:"是否启动拖拽缩放整个画布",propertys:{fitView:{detail:"自动缩放",default:""},enabled:{detail:"是否开启",default:true},scale:{detail:"缩放值",default:1},scaleOrigin:{detail:"缩放原点",default:{x:0,y:0}}}}}}}}}]);function i(t,e){var n;u(this,i);n=h(this,p(i).call(this,t,e));n.type="force";f._.extend(true,y(n),(0,f.getDefaultProps)(i.defaultProps()),t);n.domContainer=e.canvax.domView;n.init();return n}g(i,[{key:"init",value:function t(){this.nodesSp=new c["default"].Display.Sprite({id:"nodesSp"});this.edgesSp=new c["default"].Display.Sprite({id:"edgesSp"});this.graphsSp=new c["default"].Display.Sprite({id:"graphsSp"});this.graphsSp.addChild(this.edgesSp);this.graphsSp.addChild(this.nodesSp);this.sprite.addChild(this.graphsSp)}},{key:"draw",value:function t(e){!e&&(e={});f._.extend(true,this,e);this.data=e.data||this._initData();this.widget()}},{key:"_initData",value:function t(){var e={nodes:[],edges:[],size:{width:this.app.width,height:this.app.height}};var n={};for(var i=0;i<this.dataFrame.length;i++){var r=this.dataFrame.getRowDataAt(i);var a=f._.flatten([(r[this.keyField]+"").split(",")]);var o=this._getContent(r);var l=a.length==1?a[0]:a;var s=new c["default"].Display.Sprite({id:"nodeSp_"+l});this.graphsSp.addChild(s);var u={type:"force",iNode:i,rowData:r,key:l,content:o,ctype:this._checkHtml(o)?"html":"canvas",element:s,width:null,height:null,radius:1,x:null,y:null,shapeType:null,source:null,target:null};if(a.length==1){u.shapeType=this.getProp(this.node.shapeType,u);e.nodes.push(u);n[u.key]=u}else{u.shapeType="line";e.edges.push(u)}}f._.each(e.edges,function(t){var e=t.key;t.source=n[e[0]];t.target=n[e[1]]});return e}},{key:"widget",value:function t(){var r=this;var a=this;var e=this.keyField;var n=this.valueField;var i=this.data.edges.map(function(t){return{source:t.source[e],target:t.target[e],value:t.rowData[n],nodeData:t}});var o=this.data.nodes.map(function(t){var e=Object.create(t);e.id=t.key;e.nodeData=t;return e});var l=this.data.size,s=l.width,u=l.height;var f=d.forceSimulation(o).force("link",d.forceLink(i).id(function(t){return t.id})).force("charge",d.forceManyBody()).force("center",d.forceCenter(s/2,u/2)).force("x",d.forceX(s/2).strength(.045)).force("y",d.forceY(u/2).strength(.045));o.forEach(function(t){var e=a.getProp(a.node.fillStyle,t.nodeData);var n=a.getProp(a.node.strokeStyle,t.nodeData);var i=new S({context:{r:8,fillStyle:e,strokeStyle:n}});t.nodeData.element.addChild(i);var r=new k(t.nodeData.rowData.label,{context:{fontSize:11,fillStyle:"#bfa08b",textBaseline:"middle",textAlign:"center",globalAlpha:.7}});t.nodeData.element.addChild(r)});i.forEach(function(t){var e=a.getProp(a.line.lineWidth,t.nodeData);var n=a.getProp(a.line.strokeStyle,t.nodeData);var i=new O({context:{lineWidth:e,strokeStyle:n,start:{x:0,y:0},end:{x:0,y:0},globalAlpha:.4}});r.edgesSp.addChild(i);t.line=i});f.on("tick",function(){if(f.alpha()<=.05){f.stop();return}o.forEach(function(t){var e=t.nodeData.element.context;if(e){e.x=t.x;e.y=t.y}});i.forEach(function(t){var e=t.line.context;if(e){e.start.x=t.source.x;e.start.y=t.source.y;e.end.x=t.target.x;e.end.y=t.target.y}})})}},{key:"_checkHtml",value:function t(e){var n=/<[^>]+>/g;return n.test(e)}},{key:"_getContent",value:function t(e){var n=this;var i;if(this._isField(this.node.content.field)){i=e[this.node.content.field]}if(n.node.content.format&&f._.isFunction(n.node.content.format)){i=n.node.content.format.apply(this,[i,e])}return i}},{key:"_isField",value:function t(e){return~this.dataFrame.fields.indexOf(e)}},{key:"getNodesAt",value:function t(e){}},{key:"getProp",value:function t(e,n){var i=e;if(this._isField(e)&&n.rowData){i=n.rowData[e]}else{if(f._.isArray(e)){i=e[n.iNode]}if(f._.isFunction(e)){i=e.apply(this,[n])}}return i}}]);return i}(r["default"]);f.global.registerComponent(P,"graphs","force"),t["default"]=P}(e,n,p,X,D)}));var L=e(function(t,e){function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,i;n=t,i=e,function(t){"object"===(void 0===i?"undefined":d(i))&&void 0!==n?n.exports=t():("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).dagre=t()}(function(){return function r(a,o,l){function s(e,t){if(!o[e]){if(!a[e]){if(!t&&f)return f();if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[e]={exports:{}};a[e][0].call(i.exports,function(t){return s(a[e][1][t]||t)},i,i.exports,r,a,o,l)}return o[e].exports}for(var u=f,t=0;t<l.length;t++)s(l[t]);return s}({1:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(t,e,n){var o=t("./lodash"),i=t("./greedy-fas");e.exports={run:function(n){var t="greedy"===n.graph().acyclicer?i(n,function(e){return function(t){return e.edge(t).weight}}(n)):function(n){var i=[],r={},a={};return o.forEach(n.nodes(),function e(t){if(o.has(a,t))return;a[t]=!0;r[t]=!0;o.forEach(n.outEdges(t),function(t){o.has(r,t.w)?i.push(t):e(t.w)});delete r[t]}),i}(n);o.forEach(t,function(t){var e=n.edge(t);n.removeEdge(t),e.forwardName=t.name,e.reversed=!0,n.setEdge(t.w,t.v,e,o.uniqueId("rev"))})},undo:function(i){o.forEach(i.edges(),function(t){var e=i.edge(t);if(e.reversed){i.removeEdge(t);var n=e.forwardName;delete e.reversed,delete e.forwardName,i.setEdge(t.w,t.v,e,n)}})}}},{"./greedy-fas":8,"./lodash":10}],3:[function(t,e,n){var l=t("./lodash"),u=t("./util");function s(t,e,n,i,r,a){var o={width:0,height:0,rank:a,borderType:e},l=r[e][a-1],s=u.addDummyNode(t,"border",o,n);r[e][a]=s,t.setParent(s,i),l&&t.setEdge(l,s,{weight:1})}e.exports=function(o){l.forEach(o.children(),function t(e){var n=o.children(e),i=o.node(e);if(n.length&&l.forEach(n,t),l.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var r=i.minRank,a=i.maxRank+1;r<a;++r)s(o,"borderLeft","_bl",e,i,r),s(o,"borderRight","_br",e,i,r)}})}},{"./lodash":10,"./util":29}],4:[function(t,e,n){var i=t("./lodash");function r(e){i.forEach(e.nodes(),function(t){a(e.node(t))}),i.forEach(e.edges(),function(t){a(e.edge(t))})}function a(t){var e=t.width;t.width=t.height,t.height=e}function o(t){t.y=-t.y}function l(t){var e=t.x;t.x=t.y,t.y=e}e.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||r(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(n){i.forEach(n.nodes(),function(t){o(n.node(t))}),i.forEach(n.edges(),function(t){var e=n.edge(t);i.forEach(e.points,o),i.has(e,"y")&&o(e)})}(t);"lr"!==e&&"rl"!==e||(function(n){i.forEach(n.nodes(),function(t){l(n.node(t))}),i.forEach(n.edges(),function(t){var e=n.edge(t);i.forEach(e.points,l),i.has(e,"x")&&l(e)})}(t),r(t))}}},{"./lodash":10}],5:[function(t,e,n){function i(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function a(t,e){if("_next"!==t&&"_prev"!==t)return e}(e.exports=i).prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},i.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,(e._next=t)._prev=e},i.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,a)),n=n._prev;return"["+t.join(", ")+"]"}},{}],6:[function(t,e,n){var r=t("./lodash"),a=t("./util"),o=t("./graphlib").Graph;e.exports={debugOrdering:function(e){var t=a.buildLayerMatrix(e),i=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),function(t){i.setNode(t,{label:t}),i.setParent(t,"layer"+e.node(t).rank)}),r.forEach(e.edges(),function(t){i.setEdge(t.v,t.w,{},t.name)}),r.forEach(t,function(t,e){var n="layer"+e;i.setNode(n,{rank:"same"}),r.reduce(t,function(t,e){return i.setEdge(t,e,{style:"invis"}),e})}),i}}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(t,e,n){var i;if("function"==typeof t)try{i=t("graphlib")}catch(t){}i=i||window.graphlib,e.exports=i},{graphlib:31}],8:[function(t,e,n){var s=t("./lodash"),u=t("./graphlib").Graph,f=t("./data/list");e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(t,r){var a=new u,o=0,l=0;s.forEach(t.nodes(),function(t){a.setNode(t,{v:t,in:0,out:0})}),s.forEach(t.edges(),function(t){var e=a.edge(t.v,t.w)||0,n=r(t),i=e+n;a.setEdge(t.v,t.w,i),l=Math.max(l,a.node(t.v).out+=n),o=Math.max(o,a.node(t.w).in+=n)});var e=s.range(l+o+3).map(function(){return new f}),n=o+1;return s.forEach(a.nodes(),function(t){d(e,n,a.node(t))}),{graph:a,buckets:e,zeroIdx:n}}(e,t||r),i=function(t,e,n){var i,r=[],a=e[e.length-1],o=e[0];for(;t.nodeCount();){for(;i=o.dequeue();)c(t,e,n,i);for(;i=a.dequeue();)c(t,e,n,i);if(t.nodeCount())for(var l=e.length-2;0<l;--l)if(i=e[l].dequeue()){r=r.concat(c(t,e,n,i,!0));break}}return r}(n.graph,n.buckets,n.zeroIdx);return s.flatten(s.map(i,function(t){return e.outEdges(t.v,t.w)}),!0)};var r=s.constant(1);function c(r,a,o,t,i){var l=i?[]:void 0;return s.forEach(r.inEdges(t.v),function(t){var e=r.edge(t),n=r.node(t.v);i&&l.push({v:t.v,w:t.w}),n.out-=e,d(a,o,n)}),s.forEach(r.outEdges(t.v),function(t){var e=r.edge(t),n=t.w,i=r.node(n);i.in-=e,d(a,o,i)}),r.removeNode(t.v),l}function d(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(t,e,n){var f=t("./lodash"),i=t("./acyclic"),r=t("./normalize"),o=t("./rank"),l=t("./util").normalizeRanks,s=t("./parent-dummy-chains"),c=t("./util").removeEmptyRanks,d=t("./nesting-graph"),h=t("./add-border-segments"),p=t("./coordinate-system"),y=t("./order"),v=t("./position"),g=t("./util"),u=t("./graphlib").Graph;e.exports=function(a,t){var n=t&&t.debugTiming?g.time:g.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return n=a,i=new u({multigraph:!0,compound:!0}),t=A(n.graph()),i.setGraph(f.merge({},b,P(t,_),f.pick(t,x))),f.forEach(n.nodes(),function(t){var e=A(n.node(t));i.setNode(t,f.defaults(P(e,m),w)),i.setParent(t,n.parent(t))}),f.forEach(n.edges(),function(t){var e=A(n.edge(t));i.setEdge(t,f.merge({},k,P(e,S),f.pick(e,O)))}),i;var n,i,t});n("  runLayout",function(){var u,t;u=e,(t=n)("    makeSpaceForEdgeLabels",function(){var n,i;(i=(n=u).graph()).ranksep/=2,f.forEach(n.edges(),function(t){var e=n.edge(t);e.minlen*=2,"c"!==e.labelpos.toLowerCase()&&("TB"===i.rankdir||"BT"===i.rankdir?e.width+=e.labeloffset:e.height+=e.labeloffset)})}),t("    removeSelfEdges",function(){var n;n=u,f.forEach(n.edges(),function(t){if(t.v===t.w){var e=n.node(t.v);e.selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:n.edge(t)}),n.removeEdge(t)}})}),t("    acyclic",function(){i.run(u)}),t("    nestingGraph.run",function(){d.run(u)}),t("    rank",function(){o(g.asNonCompoundGraph(u))}),t("    injectEdgeLabelProxies",function(){var r;r=u,f.forEach(r.edges(),function(t){var e=r.edge(t);if(e.width&&e.height){var n=r.node(t.v),i={rank:(r.node(t.w).rank-n.rank)/2+n.rank,e:t};g.addDummyNode(r,"edge-proxy",i,"_ep")}})}),t("    removeEmptyRanks",function(){c(u)}),t("    nestingGraph.cleanup",function(){d.cleanup(u)}),t("    normalizeRanks",function(){l(u)}),t("    assignRankMinMax",function(){var n,i;n=u,i=0,f.forEach(n.nodes(),function(t){var e=n.node(t);e.borderTop&&(e.minRank=n.node(e.borderTop).rank,e.maxRank=n.node(e.borderBottom).rank,i=f.max(i,e.maxRank))}),n.graph().maxRank=i}),t("    removeEdgeLabelProxies",function(){var n;n=u,f.forEach(n.nodes(),function(t){var e=n.node(t);"edge-proxy"===e.dummy&&(n.edge(e.e).labelRank=e.rank,n.removeNode(t))})}),t("    normalize.run",function(){r.run(u)}),t("    parentDummyChains",function(){s(u)}),t("    addBorderSegments",function(){h(u)}),t("    order",function(){y(u)}),t("    insertSelfEdges",function(){var r,t;r=u,t=g.buildLayerMatrix(r),f.forEach(t,function(t){var i=0;f.forEach(t,function(t,e){var n=r.node(t);n.order=e+i,f.forEach(n.selfEdges,function(t){g.addDummyNode(r,"selfedge",{width:t.label.width,height:t.label.height,rank:n.rank,order:e+ ++i,e:t.e,label:t.label},"_se")}),delete n.selfEdges})})}),t("    adjustCoordinateSystem",function(){p.adjust(u)}),t("    position",function(){v(u)}),t("    positionSelfEdges",function(){var l;l=u,f.forEach(l.nodes(),function(t){var e=l.node(t);if("selfedge"===e.dummy){var n=l.node(e.e.v),i=n.x+n.width/2,r=n.y,a=e.x-i,o=n.height/2;l.setEdge(e.e,e.label),l.removeNode(t),e.label.points=[{x:i+2*a/3,y:r-o},{x:i+5*a/6,y:r-o},{x:i+a,y:r},{x:i+5*a/6,y:r+o},{x:i+2*a/3,y:r+o}],e.label.x=e.x,e.label.y=e.y}})}),t("    removeBorderNodes",function(){var o;o=u,f.forEach(o.nodes(),function(t){if(o.children(t).length){var e=o.node(t),n=o.node(e.borderTop),i=o.node(e.borderBottom),r=o.node(f.last(e.borderLeft)),a=o.node(f.last(e.borderRight));e.width=Math.abs(a.x-r.x),e.height=Math.abs(i.y-n.y),e.x=r.x+e.width/2,e.y=n.y+e.height/2}}),f.forEach(o.nodes(),function(t){"border"===o.node(t).dummy&&o.removeNode(t)})}),t("    normalize.undo",function(){r.undo(u)}),t("    fixupEdgeLabelCoords",function(){var n;n=u,f.forEach(n.edges(),function(t){var e=n.edge(t);if(f.has(e,"x"))switch("l"!==e.labelpos&&"r"!==e.labelpos||(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset}})}),t("    undoCoordinateSystem",function(){p.undo(u)}),t("    translateGraph",function(){function n(t){var e=t.x,n=t.y,i=t.width,r=t.height;a=Math.min(a,e-i/2),o=Math.max(o,e+i/2),l=Math.min(l,n-r/2),s=Math.max(s,n+r/2)}var i,a,o,l,s,t,e,r;i=u,a=Number.POSITIVE_INFINITY,o=0,l=Number.POSITIVE_INFINITY,s=0,t=i.graph(),e=t.marginx||0,r=t.marginy||0,f.forEach(i.nodes(),function(t){n(i.node(t))}),f.forEach(i.edges(),function(t){var e=i.edge(t);f.has(e,"x")&&n(e)}),a-=e,l-=r,f.forEach(i.nodes(),function(t){var e=i.node(t);e.x-=a,e.y-=l}),f.forEach(i.edges(),function(t){var e=i.edge(t);f.forEach(e.points,function(t){t.x-=a,t.y-=l}),f.has(e,"x")&&(e.x-=a),f.has(e,"y")&&(e.y-=l)}),t.width=o-a+e,t.height=s-l+r}),t("    assignNodeIntersects",function(){var o;o=u,f.forEach(o.edges(),function(t){var e,n,i=o.edge(t),r=o.node(t.v),a=o.node(t.w);n=i.points?(e=i.points[0],i.points[i.points.length-1]):(i.points=[],e=a,r),i.points.unshift(g.intersectRect(r,e)),i.points.push(g.intersectRect(a,n))})}),t("    reversePoints",function(){var n;n=u,f.forEach(n.edges(),function(t){var e=n.edge(t);e.reversed&&e.points.reverse()})}),t("    acyclic.undo",function(){i.undo(u)})}),n("  updateInputGraph",function(){var i,r;i=a,r=e,f.forEach(i.nodes(),function(t){var e=i.node(t),n=r.node(t);e&&(e.x=n.x,e.y=n.y,r.children(t).length&&(e.width=n.width,e.height=n.height))}),f.forEach(i.edges(),function(t){var e=i.edge(t),n=r.edge(t);e.points=n.points,f.has(n,"x")&&(e.x=n.x,e.y=n.y)}),i.graph().width=r.graph().width,i.graph().height=r.graph().height})})};var _=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],m=["width","height"],w={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function P(t,e){return f.mapValues(f.pick(t,e),Number)}function A(t){var n={};return f.forEach(t,function(t,e){n[e.toLowerCase()]=t}),n}},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(t,e,n){var i;if("function"==typeof t)try{i={cloneDeep:t("lodash/cloneDeep"),constant:t("lodash/constant"),defaults:t("lodash/defaults"),each:t("lodash/each"),filter:t("lodash/filter"),find:t("lodash/find"),flatten:t("lodash/flatten"),forEach:t("lodash/forEach"),forIn:t("lodash/forIn"),has:t("lodash/has"),isUndefined:t("lodash/isUndefined"),last:t("lodash/last"),map:t("lodash/map"),mapValues:t("lodash/mapValues"),max:t("lodash/max"),merge:t("lodash/merge"),min:t("lodash/min"),minBy:t("lodash/minBy"),now:t("lodash/now"),pick:t("lodash/pick"),range:t("lodash/range"),reduce:t("lodash/reduce"),sortBy:t("lodash/sortBy"),uniqueId:t("lodash/uniqueId"),values:t("lodash/values"),zipObject:t("lodash/zipObject")}}catch(t){}i=i||window._,e.exports=i},{"lodash/cloneDeep":227,"lodash/constant":228,"lodash/defaults":229,"lodash/each":230,"lodash/filter":232,"lodash/find":233,"lodash/flatten":235,"lodash/forEach":236,"lodash/forIn":237,"lodash/has":239,"lodash/isUndefined":258,"lodash/last":261,"lodash/map":262,"lodash/mapValues":263,"lodash/max":264,"lodash/merge":266,"lodash/min":267,"lodash/minBy":268,"lodash/now":270,"lodash/pick":271,"lodash/range":273,"lodash/reduce":274,"lodash/sortBy":276,"lodash/uniqueId":286,"lodash/values":287,"lodash/zipObject":288}],11:[function(t,e,n){var v=t("./lodash"),g=t("./util");e.exports={run:function(e){var n=g.addDummyNode(e,"root",{},"_root"),i=function(r){var a={};return v.forEach(r.children(),function(t){!function e(t,n){var i=r.children(t);i&&i.length&&v.forEach(i,function(t){e(t,n+1)});a[t]=n}(t,1)}),a}(e),r=v.max(v.values(i))-1,a=2*r+1;e.graph().nestingRoot=n,v.forEach(e.edges(),function(t){e.edge(t).minlen*=a});var o=function(n){return v.reduce(n.edges(),function(t,e){return t+n.edge(e).weight},0)}(e)+1;v.forEach(e.children(),function(t){!function o(l,s,u,f,c,d,h){var t=l.children(h);if(!t.length)return void(h!==s&&l.setEdge(s,h,{weight:0,minlen:u}));var p=g.addBorderNode(l,"_bt"),y=g.addBorderNode(l,"_bb"),e=l.node(h);l.setParent(p,h);e.borderTop=p;l.setParent(y,h);e.borderBottom=y;v.forEach(t,function(t){o(l,s,u,f,c,d,t);var e=l.node(t),n=e.borderTop?e.borderTop:t,i=e.borderBottom?e.borderBottom:t,r=e.borderTop?f:2*f,a=n!==i?1:c-d[h]+1;l.setEdge(p,n,{weight:r,minlen:a,nestingEdge:!0}),l.setEdge(i,y,{weight:r,minlen:a,nestingEdge:!0})});l.parent(h)||l.setEdge(s,p,{weight:0,minlen:c+d[h]})}(e,n,a,o,r,i,t)}),e.graph().nodeRankFactor=a},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,v.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},{"./lodash":10,"./util":29}],12:[function(t,e,n){var i=t("./lodash"),d=t("./util");e.exports={run:function(e){e.graph().dummyChains=[],i.forEach(e.edges(),function(t){!function(t,e){var n,i,r,a=e.v,o=t.node(a).rank,l=e.w,s=t.node(l).rank,u=e.name,f=t.edge(e),c=f.labelRank;if(s===o+1)return;for(t.removeEdge(e),r=0,++o;o<s;++r,++o)f.points=[],i={width:0,height:0,edgeLabel:f,edgeObj:e,rank:o},n=d.addDummyNode(t,"edge",i,"_d"),o===c&&(i.width=f.width,i.height=f.height,i.dummy="edge-label",i.labelpos=f.labelpos),t.setEdge(a,n,{weight:f.weight},u),0===r&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,l,{weight:f.weight},u)}(e,t)})},undo:function(r){i.forEach(r.graph().dummyChains,function(t){var e,n=r.node(t),i=n.edgeLabel;for(r.setEdge(n.edgeObj,i);n.dummy;)e=r.successors(t)[0],r.removeNode(t),i.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),t=e,n=r.node(t)})}}},{"./lodash":10,"./util":29}],13:[function(t,e,n){var i=t("../lodash");e.exports=function(r,a,t){var o,l={};i.forEach(t,function(t){for(var e,n,i=r.parent(t);i;){if((e=r.parent(i))?(n=l[e],l[e]=i):(n=o,o=i),n&&n!==i)return void a.setEdge(n,i);i=e}})}},{"../lodash":10}],14:[function(t,e,n){var i=t("../lodash");e.exports=function(r,t){return i.map(t,function(t){var e=r.inEdges(t);if(e.length){var n=i.reduce(e,function(t,e){var n=r.edge(e),i=r.node(e.v);return{sum:t.sum+n.weight*i.order,weight:t.weight+n.weight}},{sum:0,weight:0});return{v:t,barycenter:n.sum/n.weight,weight:n.weight}}return{v:t}})}},{"../lodash":10}],15:[function(t,e,n){var s=t("../lodash"),r=t("../graphlib").Graph;e.exports=function(a,n,i){var o=function(t){var e;for(;t.hasNode(e=s.uniqueId("_root")););return e}(a),l=new r({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(t){return a.node(t)});return s.forEach(a.nodes(),function(r){var t=a.node(r),e=a.parent(r);(t.rank===n||t.minRank<=n&&n<=t.maxRank)&&(l.setNode(r),l.setParent(r,e||o),s.forEach(a[i](r),function(t){var e=t.v===r?t.w:t.v,n=l.edge(e,r),i=s.isUndefined(n)?0:n.weight;l.setEdge(e,r,{weight:a.edge(t).weight+i})}),s.has(t,"minRank")&&l.setNode(r,{borderLeft:t.borderLeft[n],borderRight:t.borderRight[n]}))}),l}},{"../graphlib":7,"../lodash":10}],16:[function(t,e,n){var u=t("../lodash");function r(e,t,n){for(var i=u.zipObject(n,u.map(n,function(t,e){return e})),r=u.flatten(u.map(t,function(t){return u.sortBy(u.map(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var o=2*a-1;--a;var l=u.map(new Array(o),function(){return 0}),s=0;return u.forEach(r.forEach(function(t){var e=t.pos+a;l[e]+=t.weight;for(var n=0;0<e;)e%2&&(n+=l[e+1]),l[e=e-1>>1]+=t.weight;s+=t.weight*n})),s}e.exports=function(t,e){for(var n=0,i=1;i<e.length;++i)n+=r(t,e[i-1],e[i]);return n}},{"../lodash":10}],17:[function(t,e,n){var f=t("../lodash"),c=t("./init-order"),d=t("./cross-count"),a=t("./sort-subgraph"),i=t("./build-layer-graph"),o=t("./add-subgraph-constraints"),l=t("../graphlib").Graph,h=t("../util");function p(e,t,n){return f.map(t,function(t){return i(e,t,n)})}function y(t,i){var r=new l;f.forEach(t,function(n){var t=n.graph().root,e=a(n,t,r,i);f.forEach(e.vs,function(t,e){n.node(t).order=e}),o(n,r,e.vs)})}function v(n,t){f.forEach(t,function(t){f.forEach(t,function(t,e){n.node(t).order=e})})}e.exports=function(t){var e=h.maxRank(t),n=p(t,f.range(1,e+1),"inEdges"),i=p(t,f.range(e-1,-1,-1),"outEdges"),r=c(t);v(t,r);for(var a,o=Number.POSITIVE_INFINITY,l=0,s=0;s<4;++l,++s){y(l%2?n:i,2<=l%4),r=h.buildLayerMatrix(t);var u=d(t,r);u<o&&(s=0,a=f.cloneDeep(r),o=u)}v(t,a)}},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(t,e,n){var o=t("../lodash");e.exports=function(i){var r={},t=o.filter(i.nodes(),function(t){return!i.children(t).length}),e=o.max(o.map(t,function(t){return i.node(t).rank})),a=o.map(o.range(e+1),function(){return[]});var n=o.sortBy(t,function(t){return i.node(t).rank});return o.forEach(n,function t(e){if(o.has(r,e))return;r[e]=!0;var n=i.node(e);a[n.rank].push(e);o.forEach(i.successors(e),t)}),a}},{"../lodash":10}],19:[function(t,e,n){var a=t("../lodash");e.exports=function(t,e){var i={};return a.forEach(t,function(t,e){var n=i[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};a.isUndefined(t.barycenter)||(n.barycenter=t.barycenter,n.weight=t.weight)}),a.forEach(e.edges(),function(t){var e=i[t.v],n=i[t.w];a.isUndefined(e)||a.isUndefined(n)||(n.indegree++,e.out.push(i[t.w]))}),function(n){var t=[];function e(e){return function(t){t.merged||(a.isUndefined(t.barycenter)||a.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(t,e){var n=0,i=0;t.weight&&(n+=t.barycenter*t.weight,i+=t.weight);e.weight&&(n+=e.barycenter*e.weight,i+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0}(e,t)}}function i(e){return function(t){t.in.push(e),0==--t.indegree&&n.push(t)}}for(;n.length;){var r=n.pop();t.push(r),a.forEach(r.in.reverse(),e(r)),a.forEach(r.out,i(r))}return a.map(a.filter(t,function(t){return!t.merged}),function(t){return a.pick(t,["vs","i","barycenter","weight"])})}(a.filter(i,function(t){return!t.indegree}))}},{"../lodash":10}],20:[function(t,e,n){var g=t("../lodash"),_=t("./barycenter"),b=t("./resolve-conflicts"),x=t("./sort");function m(t,e){g.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}e.exports=function n(i,t,r,a){var e=i.children(t),o=i.node(t),l=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,u={};l&&(e=g.filter(e,function(t){return t!==l&&t!==s}));var f=_(i,e);g.forEach(f,function(t){if(i.children(t.v).length){var e=n(i,t.v,r,a);u[t.v]=e,g.has(e,"barycenter")&&m(t,e)}});var c=b(f,r);d=c,h=u,g.forEach(d,function(t){t.vs=g.flatten(t.vs.map(function(t){return h[t]?h[t].vs:t}),!0)});var d,h;var p=x(c,a);if(l&&(p.vs=g.flatten([l,p.vs,s],!0),i.predecessors(l).length)){var y=i.node(i.predecessors(l)[0]),v=i.node(i.predecessors(s)[0]);g.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+y.order+v.order)/(p.weight+2),p.weight+=2}return p}},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(t,e,n){var f=t("../lodash"),c=t("../util");function d(t,e,n){for(var i;e.length&&(i=f.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}e.exports=function(t,e){var n=c.partition(t,function(t){return f.has(t,"barycenter")}),i=n.lhs,r=f.sortBy(n.rhs,function(t){return-t.i}),a=[],o=0,l=0,s=0;i.sort(function(n){return function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i}}(!!e)),s=d(a,r,s),f.forEach(i,function(t){s+=t.vs.length,a.push(t.vs),o+=t.barycenter*t.weight,l+=t.weight,s=d(a,r,s)});var u={vs:f.flatten(a,!0)};l&&(u.barycenter=o/l,u.weight=l);return u}},{"../lodash":10,"../util":29}],22:[function(t,e,n){var o=t("./lodash");e.exports=function(u){var f=function(i){var r={},a=0;return o.forEach(i.children(),function t(e){var n=a;o.forEach(i.children(e),t);r[e]={low:n,lim:a++}}),r}(u);o.forEach(u.graph().dummyChains,function(t){for(var e=u.node(t),n=e.edgeObj,i=function(t,e,n,i){var r,a,o=[],l=[],s=Math.min(e[n].low,e[i].low),u=Math.max(e[n].lim,e[i].lim);r=n;for(;r=t.parent(r),o.push(r),r&&(e[r].low>s||u>e[r].lim););a=r,r=i;for(;(r=t.parent(r))!==a;)l.push(r);return{path:o.concat(l.reverse()),lca:a}}(u,f,n.v,n.w),r=i.path,a=i.lca,o=0,l=r[o],s=!0;t!==n.w;){if(e=u.node(t),s){for(;(l=r[o])!==a&&u.node(l).maxRank<e.rank;)o++;l===a&&(s=!1)}if(!s){for(;o<r.length-1&&u.node(l=r[o+1]).minRank<=e.rank;)o++;l=r[o]}u.setParent(t,l),t=u.successors(t)[0]}})}},{"./lodash":10}],23:[function(t,e,n){var v=t("../lodash"),g=t("../graphlib").Graph,i=t("../util");function r(u,t){var f={};return v.reduce(t,function(t,i){var a=0,o=0,l=t.length,s=v.last(i);return v.forEach(i,function(t,e){var n=function(e,t){if(e.node(t).dummy)return v.find(e.predecessors(t),function(t){return e.node(t).dummy})}(u,t),r=n?u.node(n).order:l;!n&&t!==s||(v.forEach(i.slice(o,e+1),function(i){v.forEach(u.predecessors(i),function(t){var e=u.node(t),n=e.order;!(n<a||r<n)||e.dummy&&u.node(i).dummy||c(f,t,i)})}),o=e+1,a=r)}),i}),f}function u(s,t){var o={};function u(e,t,n,i,r){var a;v.forEach(v.range(t,n),function(t){a=e[t],s.node(a).dummy&&v.forEach(s.predecessors(a),function(t){var e=s.node(t);e.dummy&&(e.order<i||e.order>r)&&c(o,t,a)})})}return v.reduce(t,function(i,r){var a,o=-1,l=0;return v.forEach(r,function(t,e){if("border"===s.node(t).dummy){var n=s.predecessors(t);n.length&&(a=s.node(n[0]).order,u(r,l,e,o,a),l=e,o=a)}u(r,l,r.length,a,i.length)}),r}),o}function c(t,e,n){if(n<e){var i=e;e=n,n=i}var r=t[e];r||(t[e]=r={}),r[n]=!0}function d(t,e,n){if(n<e){var i=e;e=n,n=i}return v.has(t[e],n)}function f(t,e,l,s){var u={},f={},c={};return v.forEach(e,function(t){v.forEach(t,function(t,e){u[t]=t,f[t]=t,c[t]=e})}),v.forEach(e,function(t){var o=-1;v.forEach(t,function(t){var e=s(t);if(e.length)for(var n=((e=v.sortBy(e,function(t){return c[t]})).length-1)/2,i=Math.floor(n),r=Math.ceil(n);i<=r;++i){var a=e[i];f[t]===t&&o<c[a]&&!d(l,t,a)&&(f[a]=t,f[t]=u[t]=u[a],o=c[a])}})}),{root:u,align:f}}function h(i,t,e,n,r){var a,o,l,s,u,f,c,d={},h=(a=i,o=t,l=e,s=r,u=new g,f=a.graph(),c=function(l,s,u){return function(t,e,n){var i,r=t.node(e),a=t.node(n),o=0;if(o+=r.width/2,v.has(r,"labelpos"))switch(r.labelpos.toLowerCase()){case"l":i=-r.width/2;break;case"r":i=r.width/2}if(i&&(o+=u?i:-i),i=0,o+=(r.dummy?s:l)/2,o+=(a.dummy?s:l)/2,o+=a.width/2,v.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":i=a.width/2;break;case"r":i=-a.width/2}return i&&(o+=u?i:-i),i=0,o}}(f.nodesep,f.edgesep,s),v.forEach(o,function(t){var r;v.forEach(t,function(t){var e=l[t];if(u.setNode(e),r){var n=l[r],i=u.edge(n,e);u.setEdge(n,e,Math.max(c(a,t,r),i||0))}r=t})}),u),p=r?"borderLeft":"borderRight";function y(t,e){for(var n=h.nodes(),i=n.pop(),r={};i;)r[i]?t(i):(r[i]=!0,n.push(i),n=n.concat(e(i))),i=n.pop()}return y(function(t){d[t]=h.inEdges(t).reduce(function(t,e){return Math.max(t,d[e.v]+h.edge(e))},0)},h.predecessors.bind(h)),y(function(t){var e=h.outEdges(t).reduce(function(t,e){return Math.min(t,d[e.w]-h.edge(e))},Number.POSITIVE_INFINITY),n=i.node(t);e!==Number.POSITIVE_INFINITY&&n.borderType!==p&&(d[t]=Math.max(d[t],e))},h.successors.bind(h)),v.forEach(n,function(t){d[t]=d[e[t]]}),d}function p(o,t){return v.minBy(v.values(t),function(t){var r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return v.forIn(t,function(t,e){var n,i=(n=e,o.node(n).width/2);r=Math.max(t+i,r),a=Math.min(t-i,a)}),r-a})}function y(o,l){var t=v.values(l),s=v.min(t),u=v.max(t);v.forEach(["u","d"],function(a){v.forEach(["l","r"],function(t){var e,n=a+t,i=o[n];if(i!==l){var r=v.values(i);(e="l"===t?s-v.min(r):u-v.max(r))&&(o[n]=v.mapValues(i,function(t){return t+e}))}})})}function _(i,r){return v.mapValues(i.ul,function(t,e){if(r)return i[r.toLowerCase()][e];var n=v.sortBy(v.map(i,e));return(n[1]+n[2])/2})}e.exports={positionX:function(a){var o,t=i.buildLayerMatrix(a),l=v.merge(r(a,t),u(a,t)),s={};v.forEach(["u","d"],function(r){o="u"===r?t:v.values(t).reverse(),v.forEach(["l","r"],function(t){"r"===t&&(o=v.map(o,function(t){return v.values(t).reverse()}));var e=("u"===r?a.predecessors:a.successors).bind(a),n=f(a,o,l,e),i=h(a,o,n.root,n.align,"r"===t);"r"===t&&(i=v.mapValues(i,function(t){return-t})),s[r+t]=i})});var e=p(a,s);return y(s,e),_(s,a.graph().align)},findType1Conflicts:r,findType2Conflicts:u,addConflict:c,hasConflict:d,verticalAlignment:f,horizontalCompaction:h,alignCoordinates:y,findSmallestWidthAlignment:p,balance:_}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(t,e,n){var a=t("../lodash"),o=t("../util"),i=t("./bk").positionX;e.exports=function(n){(function(n){var t=o.buildLayerMatrix(n),i=n.graph().ranksep,r=0;a.forEach(t,function(t){var e=a.max(a.map(t,function(t){return n.node(t).height}));a.forEach(t,function(t){n.node(t).y=r+e/2}),r+=e+i})})(n=o.asNonCompoundGraph(n)),a.forEach(i(n),function(t,e){n.node(e).x=t})}},{"../lodash":10,"../util":29,"./bk":23}],25:[function(t,e,n){var l=t("../lodash"),o=t("../graphlib").Graph,s=t("./util").slack;function u(a,o){return l.forEach(a.nodes(),function i(r){l.forEach(o.nodeEdges(r),function(t){var e=t.v,n=r===e?t.w:e;a.hasNode(n)||s(o,t)||(a.setNode(n,{}),a.setEdge(r,n,{}),i(n))})}),a.nodeCount()}function f(e,n){return l.minBy(n.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return s(n,t)})}function c(t,e,n){l.forEach(t.nodes(),function(t){e.node(t).rank+=n})}e.exports=function(t){var e,n,i=new o({directed:!1}),r=t.nodes()[0],a=t.nodeCount();i.setNode(r,{});for(;u(i,t)<a;)e=f(i,t),n=i.hasNode(e.v)?s(t,e):-s(t,e),c(i,t,n);return i}},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(t,e,n){var i=t("./util").longestPath,r=t("./feasible-tree"),a=t("./network-simplex");e.exports=function(t){switch(t.graph().ranker){case"network-simplex":l(t);break;case"tight-tree":!function(t){i(t),r(t)}(t);break;case"longest-path":o(t);break;default:l(t)}};var o=i;function l(t){a(t)}},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(t,e,n){var p=t("../lodash"),i=t("./feasible-tree"),f=t("./util").slack,r=t("./util").longestPath,c=t("../graphlib").alg.preorder,l=t("../graphlib").alg.postorder,a=t("../util").simplify;function o(t){t=a(t),r(t);var e,n=i(t);for(h(n),d(n,t);e=u(n);)v(n,t,e,y(n,t,e))}function d(a,o){var t=l(a,a.nodes());t=t.slice(0,t.length-1),p.forEach(t,function(t){var e,n,i,r;n=o,i=t,r=(e=a).node(i).parent,e.edge(i,r).cutvalue=s(e,n,i)})}function s(s,u,f){var c=s.node(f).parent,d=!0,t=u.edge(f,c),h=0;return t||(d=!1,t=u.edge(c,f)),h=t.weight,p.forEach(u.nodeEdges(f),function(t){var e,n,i=t.v===f,r=i?t.w:t.v;if(r!==c){var a=i===d,o=u.edge(t).weight;if(h+=a?o:-o,e=f,n=r,s.hasEdge(e,n)){var l=s.edge(f,r).cutvalue;h+=a?-l:l}}}),h}function h(t,e){arguments.length<2&&(e=t.nodes()[0]),function e(n,i,r,a,t){var o=r,l=n.node(a);i[a]=!0;p.forEach(n.neighbors(a),function(t){p.has(i,t)||(r=e(n,i,r,t,a))});l.low=o;l.lim=r++;t?l.parent=t:delete l.parent;return r}(t,{},1,e)}function u(e){return p.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function y(e,n,t){var i=t.v,r=t.w;n.hasEdge(i,r)||(i=t.w,r=t.v);var a=e.node(i),o=e.node(r),l=a,s=!1;a.lim>o.lim&&(l=o,s=!0);var u=p.filter(n.edges(),function(t){return s===g(e,e.node(t.v),l)&&s!==g(e,e.node(t.w),l)});return p.minBy(u,function(t){return f(n,t)})}function v(t,e,n,i){var r,a,o,l,s=n.v,u=n.w;t.removeEdge(s,u),t.setEdge(i.v,i.w,{}),h(t),d(t,e),r=t,a=e,o=p.find(r.nodes(),function(t){return!a.node(t).parent}),l=(l=c(r,o)).slice(1),p.forEach(l,function(t){var e=r.node(t).parent,n=a.edge(t,e),i=!1;n||(n=a.edge(e,t),i=!0),a.node(t).rank=a.node(e).rank+(i?n.minlen:-n.minlen)})}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}(e.exports=o).initLowLimValues=h,o.initCutValues=d,o.calcCutValue=s,o.leaveEdge=u,o.enterEdge=y,o.exchangeEdges=v},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(t,e,n){var o=t("../lodash");e.exports={longestPath:function(r){var a={};o.forEach(r.sources(),function e(t){var n=r.node(t);if(o.has(a,t))return n.rank;a[t]=!0;var i=o.min(o.map(r.outEdges(t),function(t){return e(t.w)-r.edge(t).minlen}));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),n.rank=i})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},{"../lodash":10}],29:[function(t,e,n){var l=t("./lodash"),a=t("./graphlib").Graph;function o(t,e,n,i){for(var r;r=l.uniqueId(i),t.hasNode(r););return n.dummy=e,t.setNode(r,n),r}function s(n){return l.max(l.map(n.nodes(),function(t){var e=n.node(t).rank;if(!l.isUndefined(e))return e}))}e.exports={addDummyNode:o,simplify:function(i){var r=(new a).setGraph(i.graph());return l.forEach(i.nodes(),function(t){r.setNode(t,i.node(t))}),l.forEach(i.edges(),function(t){var e=r.edge(t.v,t.w)||{weight:0,minlen:1},n=i.edge(t);r.setEdge(t.v,t.w,{weight:e.weight+n.weight,minlen:Math.max(e.minlen,n.minlen)})}),r},asNonCompoundGraph:function(e){var n=new a({multigraph:e.isMultigraph()}).setGraph(e.graph());return l.forEach(e.nodes(),function(t){e.children(t).length||n.setNode(t,e.node(t))}),l.forEach(e.edges(),function(t){n.setEdge(t,e.edge(t))}),n},successorWeights:function(n){var t=l.map(n.nodes(),function(t){var e={};return l.forEach(n.outEdges(t),function(t){e[t.w]=(e[t.w]||0)+n.edge(t).weight}),e});return l.zipObject(n.nodes(),t)},predecessorWeights:function(n){var t=l.map(n.nodes(),function(t){var e={};return l.forEach(n.inEdges(t),function(t){e[t.v]=(e[t.v]||0)+n.edge(t).weight}),e});return l.zipObject(n.nodes(),t)},intersectRect:function(t,e){var n,i,r=t.x,a=t.y,o=e.x-r,l=e.y-a,s=t.width/2,u=t.height/2;if(!o&&!l)throw new Error("Not possible to find intersection inside of the rectangle");i=Math.abs(l)*s>Math.abs(o)*u?(l<0&&(u=-u),n=u*o/l,u):(o<0&&(s=-s),(n=s)*l/o);return{x:r+n,y:a+i}},buildLayerMatrix:function(i){var r=l.map(l.range(s(i)+1),function(){return[]});return l.forEach(i.nodes(),function(t){var e=i.node(t),n=e.rank;l.isUndefined(n)||(r[n][e.order]=t)}),r},normalizeRanks:function(n){var i=l.min(l.map(n.nodes(),function(t){return n.node(t).rank}));l.forEach(n.nodes(),function(t){var e=n.node(t);l.has(e,"rank")&&(e.rank-=i)})},removeEmptyRanks:function(n){var i=l.min(l.map(n.nodes(),function(t){return n.node(t).rank})),r=[];l.forEach(n.nodes(),function(t){var e=n.node(t).rank-i;r[e]||(r[e]=[]),r[e].push(t)});var a=0,o=n.graph().nodeRankFactor;l.forEach(r,function(t,e){l.isUndefined(t)&&e%o!=0?--a:a&&l.forEach(t,function(t){n.node(t).rank+=a})})},addBorderNode:function(t,e,n,i){var r={width:0,height:0};4<=arguments.length&&(r.rank=n,r.order=i);return o(t,"border",r,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return l.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=l.now();try{return e()}finally{console.log(t+" time: "+(l.now()-n)+"ms")}},notime:function(t,e){return e()}}},{"./graphlib":7,"./lodash":10}],30:[function(t,e,n){e.exports="0.8.4"},{}],31:[function(t,e,n){var i=t("./lib");e.exports={Graph:i.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:i.version}},{"./lib":47,"./lib/alg":38,"./lib/json":48}],32:[function(t,e,n){var o=t("../lodash");e.exports=function(e){var n,i={},r=[];function a(t){o.has(i,t)||(i[t]=!0,n.push(t),o.each(e.successors(t),a),o.each(e.predecessors(t),a))}return o.each(e.nodes(),function(t){n=[],a(t),n.length&&r.push(n)}),r}},{"../lodash":49}],33:[function(t,e,n){var l=t("../lodash");e.exports=function(e,t,n){l.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],a={};return l.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(n,t,i,r,a,o){l.has(r,t)||(r[t]=!0,i||o.push(t),l.each(a(t),function(t){e(n,t,i,r,a,o)}),i&&o.push(t))}(e,t,"post"===n,a,i,r)}),r}},{"../lodash":49}],34:[function(t,e,n){var a=t("./dijkstra"),o=t("../lodash");e.exports=function(n,i,r){return o.transform(n.nodes(),function(t,e){t[e]=a(n,e,i,r)},{})}},{"../lodash":49,"./dijkstra":35}],35:[function(t,e,n){var i=t("../lodash"),r=t("../data/priority-queue");e.exports=function(e,t,n,i){return function(t,n,a,e){function i(t){var e=t.v!==o?t.v:t.w,n=s[e],i=a(t),r=l.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);r<n.distance&&(n.distance=r,n.predecessor=o,u.decrease(e,r))}var o,l,s={},u=new r;t.nodes().forEach(function(t){var e=t===n?0:Number.POSITIVE_INFINITY;s[t]={distance:e},u.add(t,e)});for(;0<u.size()&&(o=u.removeMin(),(l=s[o]).distance!==Number.POSITIVE_INFINITY);)e(o).forEach(i);return s}(e,String(t),n||a,i||function(t){return e.outEdges(t)})};var a=i.constant(1)},{"../data/priority-queue":45,"../lodash":49}],36:[function(t,e,n){var i=t("../lodash"),r=t("./tarjan");e.exports=function(e){return i.filter(r(e),function(t){return 1<t.length||1===t.length&&e.hasEdge(t[0],t[0])})}},{"../lodash":49,"./tarjan":43}],37:[function(t,e,n){var i=t("../lodash");e.exports=function(e,t,n){return function(t,r,e){var s={},n=t.nodes();return n.forEach(function(i){s[i]={},s[i][i]={distance:0},n.forEach(function(t){i!==t&&(s[i][t]={distance:Number.POSITIVE_INFINITY})}),e(i).forEach(function(t){var e=t.v===i?t.w:t.v,n=r(t);s[i][e]={distance:n,predecessor:i}})}),n.forEach(function(o){var l=s[o];n.forEach(function(t){var a=s[t];n.forEach(function(t){var e=a[o],n=l[t],i=a[t],r=e.distance+n.distance;r<i.distance&&(i.distance=r,i.predecessor=n.predecessor)})})}),s}(e,t||r,n||function(t){return e.outEdges(t)})};var r=i.constant(1)},{"../lodash":49}],38:[function(t,e,n){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":32,"./dijkstra":35,"./dijkstra-all":34,"./find-cycles":36,"./floyd-warshall":37,"./is-acyclic":39,"./postorder":40,"./preorder":41,"./prim":42,"./tarjan":43,"./topsort":44}],39:[function(t,e,n){var i=t("./topsort");e.exports=function(t){try{i(t)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}},{"./topsort":44}],40:[function(t,e,n){var i=t("./dfs");e.exports=function(t,e){return i(t,e,"post")}},{"./dfs":33}],41:[function(t,e,n){var i=t("./dfs");e.exports=function(t,e){return i(t,e,"pre")}},{"./dfs":33}],42:[function(t,e,n){var s=t("../lodash"),u=t("../graph"),f=t("../data/priority-queue");e.exports=function(t,r){var a,e=new u,o={},l=new f;function n(t){var e=t.v===a?t.w:t.v,n=l.priority(e);if(void 0!==n){var i=r(t);i<n&&(o[e]=a,l.decrease(e,i))}}if(0===t.nodeCount())return e;s.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),e.setNode(t)}),l.decrease(t.nodes()[0],0);var i=!1;for(;0<l.size();){if(a=l.removeMin(),s.has(o,a))e.setEdge(a,o[a]);else{if(i)throw new Error("Input graph is not connected: "+t);i=!0}t.nodeEdges(a).forEach(n)}return e}},{"../data/priority-queue":45,"../graph":46,"../lodash":49}],43:[function(t,e,n){var f=t("../lodash");e.exports=function(a){var o=0,l=[],s={},u=[];return a.nodes().forEach(function(t){f.has(s,t)||!function e(t){var n=s[t]={onStack:!0,lowlink:o,index:o++};l.push(t);a.successors(t).forEach(function(t){f.has(s,t)?s[t].onStack&&(n.lowlink=Math.min(n.lowlink,s[t].index)):(e(t),n.lowlink=Math.min(n.lowlink,s[t].lowlink))});if(n.lowlink===n.index){for(var i,r=[];i=l.pop(),s[i].onStack=!1,r.push(i),t!==i;);u.push(r)}}(t)}),u}},{"../lodash":49}],44:[function(t,e,n){var o=t("../lodash");function i(n){var i={},r={},a=[];if(o.each(n.sinks(),function t(e){if(o.has(r,e))throw new l;o.has(i,e)||(r[e]=!0,i[e]=!0,o.each(n.predecessors(e),t),delete r[e],a.push(e))}),o.size(i)!==n.nodeCount())throw new l;return a}function l(){}((e.exports=i).CycleException=l).prototype=new Error},{"../lodash":49}],45:[function(t,e,n){var a=t("../lodash");function i(){this._arr=[],this._keyIndices={}}(e.exports=i).prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return a.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),a.has(n,t))return!1;var i=this._arr,r=i.length;return n[t]=r,i.push({key:t,priority:e}),this._decrease(r),!0},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,i=1+n,r=t;n<e.length&&(r=e[n].priority<e[r].priority?n:r,i<e.length&&(r=e[i].priority<e[r].priority?i:r),r!==t&&(this._swap(t,r),this._heapify(r)))},i.prototype._decrease=function(t){for(var e,n=this._arr,i=n[t].priority;0!==t&&!(n[e=t>>1].priority<i);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,i=this._keyIndices,r=n[t],a=n[e];n[t]=a,n[e]=r,i[a.key]=t,i[r.key]=e}},{"../lodash":49}],46:[function(t,e,n){var s=t("./lodash");e.exports=r;var l="\0",i="\0",u="";function r(t){this._isDirected=!s.has(t,"directed")||t.directed,this._isMultigraph=!!s.has(t,"multigraph")&&t.multigraph,this._isCompound=!!s.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=s.constant(void 0),this._defaultEdgeLabelFn=s.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function f(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function c(t,e,n,i){var r=""+e,a=""+n;if(!t&&a<r){var o=r;r=a,a=o}return r+u+a+u+(s.isUndefined(i)?l:i)}function o(t,e){return c(t,e.v,e.w,e.name)}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(t){return this._label=t,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(t){return s.isFunction(t)||(t=s.constant(t)),this._defaultNodeLabelFn=t,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return s.keys(this._nodes)},r.prototype.sources=function(){var e=this;return s.filter(this.nodes(),function(t){return s.isEmpty(e._in[t])})},r.prototype.sinks=function(){var e=this;return s.filter(this.nodes(),function(t){return s.isEmpty(e._out[t])})},r.prototype.setNodes=function(t,e){var n=arguments,i=this;return s.each(t,function(t){1<n.length?i.setNode(t,e):i.setNode(t)}),this},r.prototype.setNode=function(t,e){return s.has(this._nodes,t)?1<arguments.length&&(this._nodes[t]=e):(this._nodes[t]=1<arguments.length?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children[i][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this},r.prototype.node=function(t){return this._nodes[t]},r.prototype.hasNode=function(t){return s.has(this._nodes,t)},r.prototype.removeNode=function(t){var e=this;if(s.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],s.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),s.each(s.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],s.each(s.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},r.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(s.isUndefined(e))e=i;else{for(var n=e+="";!s.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},r.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},r.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},r.prototype.children=function(t){if(s.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return s.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},r.prototype.predecessors=function(t){var e=this._preds[t];if(e)return s.keys(e)},r.prototype.successors=function(t){var e=this._sucs[t];if(e)return s.keys(e)},r.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return s.union(e,this.successors(t))},r.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},r.prototype.filterNodes=function(n){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph());var r=this;s.each(this._nodes,function(t,e){n(e)&&i.setNode(e,t)}),s.each(this._edgeObjs,function(t){i.hasNode(t.v)&&i.hasNode(t.w)&&i.setEdge(t,r.edge(t))});var a={};return this._isCompound&&s.each(i.nodes(),function(t){i.setParent(t,function t(e){var n=r.parent(e);return void 0===n||i.hasNode(n)?a[e]=n:n in a?a[n]:t(n)}(t))}),i},r.prototype.setDefaultEdgeLabel=function(t){return s.isFunction(t)||(t=s.constant(t)),this._defaultEdgeLabelFn=t,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return s.values(this._edgeObjs)},r.prototype.setPath=function(t,n){var i=this,r=arguments;return s.reduce(t,function(t,e){return 1<r.length?i.setEdge(t,e,n):i.setEdge(t,e),e}),this},r.prototype.setEdge=function(){var t,e,n,i,r=!1,a=arguments[0];"object"===d(a)&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],r=!0)):(t=a,e=arguments[1],n=arguments[3],2<arguments.length&&(i=arguments[2],r=!0)),t=""+t,e=""+e,s.isUndefined(n)||(n=""+n);var o=c(this._isDirected,t,e,n);if(s.has(this._edgeLabels,o))return r&&(this._edgeLabels[o]=i),this;if(!s.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[o]=r?i:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,n,i){var r=""+e,a=""+n;if(!t&&a<r){var o=r;r=a,a=o}var l={v:r,w:a};i&&(l.name=i);return l}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[o]=l,f(this._preds[e],t),f(this._sucs[t],e),this._in[e][o]=l,this._out[t][o]=l,this._edgeCount++,this},r.prototype.edge=function(t,e,n){var i=1===arguments.length?o(this._isDirected,t):c(this._isDirected,t,e,n);return this._edgeLabels[i]},r.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?o(this._isDirected,t):c(this._isDirected,t,e,n);return s.has(this._edgeLabels,i)},r.prototype.removeEdge=function(t,e,n){var i=1===arguments.length?o(this._isDirected,arguments[0]):c(this._isDirected,t,e,n),r=this._edgeObjs[i];return r&&(t=r.v,e=r.w,delete this._edgeLabels[i],delete this._edgeObjs[i],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][i],delete this._out[t][i],this._edgeCount--),this},r.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=s.values(n);return e?s.filter(i,function(t){return t.v===e}):i}},r.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=s.values(n);return e?s.filter(i,function(t){return t.w===e}):i}},r.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},{"./lodash":49}],47:[function(t,e,n){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":46,"./version":50}],48:[function(t,e,n){var a=t("./lodash"),i=t("./graph");e.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(r){return a.map(r.nodes(),function(t){var e=r.node(t),n=r.parent(t),i={v:t};return a.isUndefined(e)||(i.value=e),a.isUndefined(n)||(i.parent=n),i})}(t),edges:function(i){return a.map(i.edges(),function(t){var e=i.edge(t),n={v:t.v,w:t.w};return a.isUndefined(t.name)||(n.name=t.name),a.isUndefined(e)||(n.value=e),n})}(t)};a.isUndefined(t.graph())||(e.value=a.clone(t.graph()));return e},read:function(t){var e=new i(t.options).setGraph(t.value);return a.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),a.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},{"./graph":46,"./lodash":49}],49:[function(t,e,n){var i;if("function"==typeof t)try{i={clone:t("lodash/clone"),constant:t("lodash/constant"),each:t("lodash/each"),filter:t("lodash/filter"),has:t("lodash/has"),isArray:t("lodash/isArray"),isEmpty:t("lodash/isEmpty"),isFunction:t("lodash/isFunction"),isUndefined:t("lodash/isUndefined"),keys:t("lodash/keys"),map:t("lodash/map"),reduce:t("lodash/reduce"),size:t("lodash/size"),transform:t("lodash/transform"),union:t("lodash/union"),values:t("lodash/values")}}catch(t){}i=i||window._,e.exports=i},{"lodash/clone":226,"lodash/constant":228,"lodash/each":230,"lodash/filter":232,"lodash/has":239,"lodash/isArray":243,"lodash/isEmpty":247,"lodash/isFunction":248,"lodash/isUndefined":258,"lodash/keys":259,"lodash/map":262,"lodash/reduce":274,"lodash/size":275,"lodash/transform":284,"lodash/union":285,"lodash/values":287}],50:[function(t,e,n){e.exports="2.1.7"},{}],51:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"DataView");e.exports=i},{"./_getNative":163,"./_root":208}],52:[function(t,e,n){var i=t("./_hashClear"),r=t("./_hashDelete"),a=t("./_hashGet"),o=t("./_hashHas"),l=t("./_hashSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}s.prototype.clear=i,s.prototype.delete=r,s.prototype.get=a,s.prototype.has=o,s.prototype.set=l,e.exports=s},{"./_hashClear":172,"./_hashDelete":173,"./_hashGet":174,"./_hashHas":175,"./_hashSet":176}],53:[function(t,e,n){var i=t("./_listCacheClear"),r=t("./_listCacheDelete"),a=t("./_listCacheGet"),o=t("./_listCacheHas"),l=t("./_listCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}s.prototype.clear=i,s.prototype.delete=r,s.prototype.get=a,s.prototype.has=o,s.prototype.set=l,e.exports=s},{"./_listCacheClear":188,"./_listCacheDelete":189,"./_listCacheGet":190,"./_listCacheHas":191,"./_listCacheSet":192}],54:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Map");e.exports=i},{"./_getNative":163,"./_root":208}],55:[function(t,e,n){var i=t("./_mapCacheClear"),r=t("./_mapCacheDelete"),a=t("./_mapCacheGet"),o=t("./_mapCacheHas"),l=t("./_mapCacheSet");function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}s.prototype.clear=i,s.prototype.delete=r,s.prototype.get=a,s.prototype.has=o,s.prototype.set=l,e.exports=s},{"./_mapCacheClear":193,"./_mapCacheDelete":194,"./_mapCacheGet":195,"./_mapCacheHas":196,"./_mapCacheSet":197}],56:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Promise");e.exports=i},{"./_getNative":163,"./_root":208}],57:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"Set");e.exports=i},{"./_getNative":163,"./_root":208}],58:[function(t,e,n){var i=t("./_MapCache"),r=t("./_setCacheAdd"),a=t("./_setCacheHas");function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=a,e.exports=o},{"./_MapCache":55,"./_setCacheAdd":210,"./_setCacheHas":211}],59:[function(t,e,n){var i=t("./_ListCache"),r=t("./_stackClear"),a=t("./_stackDelete"),o=t("./_stackGet"),l=t("./_stackHas"),s=t("./_stackSet");function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=l,u.prototype.set=s,e.exports=u},{"./_ListCache":53,"./_stackClear":215,"./_stackDelete":216,"./_stackGet":217,"./_stackHas":218,"./_stackSet":219}],60:[function(t,e,n){var i=t("./_root").Symbol;e.exports=i},{"./_root":208}],61:[function(t,e,n){var i=t("./_root").Uint8Array;e.exports=i},{"./_root":208}],62:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"WeakMap");e.exports=i},{"./_getNative":163,"./_root":208}],63:[function(t,e,n){e.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},{}],64:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},{}],65:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}},{}],66:[function(t,e,n){var i=t("./_baseIndexOf");e.exports=function(t,e){return!!(null==t?0:t.length)&&-1<i(t,e,0)}},{"./_baseIndexOf":95}],67:[function(t,e,n){e.exports=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}},{}],68:[function(t,e,n){var f=t("./_baseTimes"),c=t("./isArguments"),d=t("./isArray"),h=t("./isBuffer"),p=t("./_isIndex"),y=t("./isTypedArray"),v=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n=d(t),i=!n&&c(t),r=!n&&!i&&h(t),a=!n&&!i&&!r&&y(t),o=n||i||r||a,l=o?f(t.length,String):[],s=l.length;for(var u in t)!e&&!v.call(t,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||p(u,s))||l.push(u);return l}},{"./_baseTimes":125,"./_isIndex":181,"./isArguments":242,"./isArray":243,"./isBuffer":246,"./isTypedArray":257}],69:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},{}],70:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},{}],71:[function(t,e,n){e.exports=function(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}},{}],72:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},{}],73:[function(t,e,n){var i=t("./_baseProperty")("length");e.exports=i},{"./_baseProperty":117}],74:[function(t,e,n){var i=t("./_baseAssignValue"),r=t("./eq");e.exports=function(t,e,n){(void 0===n||r(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}},{"./_baseAssignValue":79,"./eq":231}],75:[function(t,e,n){var r=t("./_baseAssignValue"),a=t("./eq"),o=Object.prototype.hasOwnProperty;e.exports=function(t,e,n){var i=t[e];o.call(t,e)&&a(i,n)&&(void 0!==n||e in t)||r(t,e,n)}},{"./_baseAssignValue":79,"./eq":231}],76:[function(t,e,n){var i=t("./eq");e.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},{"./eq":231}],77:[function(t,e,n){var i=t("./_copyObject"),r=t("./keys");e.exports=function(t,e){return t&&i(e,r(e),t)}},{"./_copyObject":143,"./keys":259}],78:[function(t,e,n){var i=t("./_copyObject"),r=t("./keysIn");e.exports=function(t,e){return t&&i(e,r(e),t)}},{"./_copyObject":143,"./keysIn":260}],79:[function(t,e,n){var i=t("./_defineProperty");e.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},{"./_defineProperty":153}],80:[function(t,e,n){var g=t("./_Stack"),_=t("./_arrayEach"),b=t("./_assignValue"),x=t("./_baseAssign"),m=t("./_baseAssignIn"),w=t("./_cloneBuffer"),S=t("./_copyArray"),k=t("./_copySymbols"),O=t("./_copySymbolsIn"),P=t("./_getAllKeys"),A=t("./_getAllKeysIn"),C=t("./_getTag"),M=t("./_initCloneArray"),j=t("./_initCloneByTag"),T=t("./_initCloneObject"),E=t("./isArray"),I=t("./isBuffer"),D=t("./isMap"),L=t("./isObject"),R=t("./isSet"),F=t("./keys"),N=1,W=2,z=4,G="[object Arguments]",B="[object Function]",V="[object GeneratorFunction]",H="[object Object]",U={};U[G]=U["[object Array]"]=U["[object ArrayBuffer]"]=U["[object DataView]"]=U["[object Boolean]"]=U["[object Date]"]=U["[object Float32Array]"]=U["[object Float64Array]"]=U["[object Int8Array]"]=U["[object Int16Array]"]=U["[object Int32Array]"]=U["[object Map]"]=U["[object Number]"]=U[H]=U["[object RegExp]"]=U["[object Set]"]=U["[object String]"]=U["[object Symbol]"]=U["[object Uint8Array]"]=U["[object Uint8ClampedArray]"]=U["[object Uint16Array]"]=U["[object Uint32Array]"]=!0,U["[object Error]"]=U[B]=U["[object WeakMap]"]=!1,e.exports=function n(i,r,a,t,e,o){var l,s=r&N,u=r&W,f=r&z;if(a&&(l=e?a(i,t,e,o):a(i)),void 0!==l)return l;if(!L(i))return i;var c=E(i);if(c){if(l=M(i),!s)return S(i,l)}else{var d=C(i),h=d==B||d==V;if(I(i))return w(i,s);if(d==H||d==G||h&&!e){if(l=u||h?{}:T(i),!s)return u?O(i,m(l,i)):k(i,x(l,i))}else{if(!U[d])return e?i:{};l=j(i,d,s)}}var p=(o=o||new g).get(i);if(p)return p;if(o.set(i,l),R(i))return i.forEach(function(t){l.add(n(t,r,a,t,i,o))}),l;if(D(i))return i.forEach(function(t,e){l.set(e,n(t,r,a,e,i,o))}),l;var y=f?u?A:P:u?keysIn:F,v=c?void 0:y(i);return _(v||i,function(t,e){v&&(t=i[e=t]),b(l,e,n(t,r,a,e,i,o))}),l}},{"./_Stack":59,"./_arrayEach":64,"./_assignValue":75,"./_baseAssign":77,"./_baseAssignIn":78,"./_cloneBuffer":135,"./_copyArray":142,"./_copySymbols":144,"./_copySymbolsIn":145,"./_getAllKeys":159,"./_getAllKeysIn":160,"./_getTag":168,"./_initCloneArray":177,"./_initCloneByTag":178,"./_initCloneObject":179,"./isArray":243,"./isBuffer":246,"./isMap":250,"./isObject":251,"./isSet":254,"./keys":259}],81:[function(t,e,n){function i(t){if(!r(t))return{};if(a)return a(t);o.prototype=t;var e=new o;return o.prototype=void 0,e}var r=t("./isObject"),a=Object.create;function o(){}e.exports=i},{"./isObject":251}],82:[function(t,e,n){var i=t("./_baseForOwn"),r=t("./_createBaseEach")(i);e.exports=r},{"./_baseForOwn":88,"./_createBaseEach":148}],83:[function(t,e,n){var u=t("./isSymbol");e.exports=function(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],o=e(a);if(null!=o&&(void 0===l?o==o&&!u(o):n(o,l)))var l=o,s=a}return s}},{"./isSymbol":256}],84:[function(t,e,n){var a=t("./_baseEach");e.exports=function(t,i){var r=[];return a(t,function(t,e,n){i(t,e,n)&&r.push(t)}),r}},{"./_baseEach":82}],85:[function(t,e,n){e.exports=function(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}},{}],86:[function(t,e,n){var u=t("./_arrayPush"),f=t("./_isFlattenable");e.exports=function t(e,n,i,r,a){var o=-1,l=e.length;for(i=i||f,a=a||[];++o<l;){var s=e[o];0<n&&i(s)?1<n?t(s,n-1,i,r,a):u(a,s):r||(a[a.length]=s)}return a}},{"./_arrayPush":70,"./_isFlattenable":180}],87:[function(t,e,n){var i=t("./_createBaseFor")();e.exports=i},{"./_createBaseFor":149}],88:[function(t,e,n){var i=t("./_baseFor"),r=t("./keys");e.exports=function(t,e){return t&&i(t,e,r)}},{"./_baseFor":87,"./keys":259}],89:[function(t,e,n){var r=t("./_castPath"),a=t("./_toKey");e.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[a(e[n++])];return n&&n==i?t:void 0}},{"./_castPath":133,"./_toKey":223}],90:[function(t,e,n){var r=t("./_arrayPush"),a=t("./isArray");e.exports=function(t,e,n){var i=e(t);return a(t)?i:r(i,n(t))}},{"./_arrayPush":70,"./isArray":243}],91:[function(t,e,n){var i=t("./_Symbol"),r=t("./_getRawTag"),a=t("./_objectToString"),o=i?i.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):a(t)}},{"./_Symbol":60,"./_getRawTag":165,"./_objectToString":205}],92:[function(t,e,n){e.exports=function(t,e){return e<t}},{}],93:[function(t,e,n){var i=Object.prototype.hasOwnProperty;e.exports=function(t,e){return null!=t&&i.call(t,e)}},{}],94:[function(t,e,n){e.exports=function(t,e){return null!=t&&e in Object(t)}},{}],95:[function(t,e,n){var i=t("./_baseFindIndex"),r=t("./_baseIsNaN"),a=t("./_strictIndexOf");e.exports=function(t,e,n){return e==e?a(t,e,n):i(t,r,n)}},{"./_baseFindIndex":85,"./_baseIsNaN":101,"./_strictIndexOf":220}],96:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObjectLike");e.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},{"./_baseGetTag":91,"./isObjectLike":252}],97:[function(t,e,n){var o=t("./_baseIsEqualDeep"),l=t("./isObjectLike");e.exports=function t(e,n,i,r,a){return e===n||(null==e||null==n||!l(e)&&!l(n)?e!=e&&n!=n:o(e,n,i,r,t,a))}},{"./_baseIsEqualDeep":98,"./isObjectLike":252}],98:[function(t,e,n){var y=t("./_Stack"),v=t("./_equalArrays"),g=t("./_equalByTag"),_=t("./_equalObjects"),b=t("./_getTag"),x=t("./isArray"),m=t("./isBuffer"),w=t("./isTypedArray"),S="[object Arguments]",k="[object Array]",O="[object Object]",P=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,i,r,a){var o=x(t),l=x(e),s=o?k:b(t),u=l?k:b(e),f=(s=s==S?O:s)==O,c=(u=u==S?O:u)==O,d=s==u;if(d&&m(t)){if(!m(e))return!1;f=!(o=!0)}if(d&&!f)return a=a||new y,o||w(t)?v(t,e,n,i,r,a):g(t,e,s,n,i,r,a);if(!(1&n)){var h=f&&P.call(t,"__wrapped__"),p=c&&P.call(e,"__wrapped__");if(h||p)return r(h?t.value():t,p?e.value():e,n,i,a=a||new y)}return d&&(a=a||new y,_(t,e,n,i,r,a))}},{"./_Stack":59,"./_equalArrays":154,"./_equalByTag":155,"./_equalObjects":156,"./_getTag":168,"./isArray":243,"./isBuffer":246,"./isTypedArray":257}],99:[function(t,e,n){var i=t("./_getTag"),r=t("./isObjectLike");e.exports=function(t){return r(t)&&"[object Map]"==i(t)}},{"./_getTag":168,"./isObjectLike":252}],100:[function(t,e,n){var h=t("./_Stack"),p=t("./_baseIsEqual");e.exports=function(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=Object(t);r--;){var l=n[r];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++r<a;){var s=(l=n[r])[0],u=t[s],f=l[1];if(o&&l[2]){if(void 0===u&&!(s in t))return!1}else{var c=new h;if(i)var d=i(u,f,s,t,e,c);if(!(void 0===d?p(f,u,3,i,c):d))return!1}}return!0}},{"./_Stack":59,"./_baseIsEqual":97}],101:[function(t,e,n){e.exports=function(t){return t!=t}},{}],102:[function(t,e,n){var i=t("./isFunction"),r=t("./_isMasked"),a=t("./isObject"),o=t("./_toSource"),l=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,f=s.toString,c=u.hasOwnProperty,d=RegExp("^"+f.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!a(t)||r(t))&&(i(t)?d:l).test(o(t))}},{"./_isMasked":185,"./_toSource":224,"./isFunction":248,"./isObject":251}],103:[function(t,e,n){var i=t("./_getTag"),r=t("./isObjectLike");e.exports=function(t){return r(t)&&"[object Set]"==i(t)}},{"./_getTag":168,"./isObjectLike":252}],104:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isLength"),a=t("./isObjectLike"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(t){return a(t)&&r(t.length)&&!!o[i(t)]}},{"./_baseGetTag":91,"./isLength":249,"./isObjectLike":252}],105:[function(t,e,n){var i=t("./_baseMatches"),r=t("./_baseMatchesProperty"),a=t("./identity"),o=t("./isArray"),l=t("./property");e.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==d(t)?o(t)?r(t[0],t[1]):i(t):l(t)}},{"./_baseMatches":110,"./_baseMatchesProperty":111,"./identity":241,"./isArray":243,"./property":272}],106:[function(t,e,n){var i=t("./_isPrototype"),r=t("./_nativeKeys"),a=Object.prototype.hasOwnProperty;e.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},{"./_isPrototype":186,"./_nativeKeys":202}],107:[function(t,e,n){var r=t("./isObject"),a=t("./_isPrototype"),o=t("./_nativeKeysIn"),l=Object.prototype.hasOwnProperty;e.exports=function(t){if(!r(t))return o(t);var e=a(t),n=[];for(var i in t)("constructor"!=i||!e&&l.call(t,i))&&n.push(i);return n}},{"./_isPrototype":186,"./_nativeKeysIn":203,"./isObject":251}],108:[function(t,e,n){e.exports=function(t,e){return t<e}},{}],109:[function(t,e,n){var o=t("./_baseEach"),l=t("./isArrayLike");e.exports=function(t,i){var r=-1,a=l(t)?Array(t.length):[];return o(t,function(t,e,n){a[++r]=i(t,e,n)}),a}},{"./_baseEach":82,"./isArrayLike":244}],110:[function(t,e,n){var i=t("./_baseIsMatch"),r=t("./_getMatchData"),a=t("./_matchesStrictComparable");e.exports=function(e){var n=r(e);return 1==n.length&&n[0][2]?a(n[0][0],n[0][1]):function(t){return t===e||i(t,e,n)}}},{"./_baseIsMatch":100,"./_getMatchData":162,"./_matchesStrictComparable":199}],111:[function(t,e,n){var r=t("./_baseIsEqual"),a=t("./get"),o=t("./hasIn"),l=t("./_isKey"),s=t("./_isStrictComparable"),u=t("./_matchesStrictComparable"),f=t("./_toKey");e.exports=function(n,i){return l(n)&&s(i)?u(f(n),i):function(t){var e=a(t,n);return void 0===e&&e===i?o(t,n):r(i,e,3)}}},{"./_baseIsEqual":97,"./_isKey":183,"./_isStrictComparable":187,"./_matchesStrictComparable":199,"./_toKey":223,"./get":238,"./hasIn":240}],112:[function(t,e,n){var u=t("./_Stack"),f=t("./_assignMergeValue"),c=t("./_baseFor"),d=t("./_baseMergeDeep"),h=t("./isObject"),p=t("./keysIn"),y=t("./_safeGet");e.exports=function i(r,a,o,l,s){r!==a&&c(a,function(t,e){if(h(t))s=s||new u,d(r,a,e,o,i,l,s);else{var n=l?l(y(r,e),t,e+"",r,a,s):void 0;void 0===n&&(n=t),f(r,e,n)}},p)}},{"./_Stack":59,"./_assignMergeValue":74,"./_baseFor":87,"./_baseMergeDeep":113,"./_safeGet":209,"./isObject":251,"./keysIn":260}],113:[function(t,e,n){var y=t("./_assignMergeValue"),v=t("./_cloneBuffer"),g=t("./_cloneTypedArray"),_=t("./_copyArray"),b=t("./_initCloneObject"),x=t("./isArguments"),m=t("./isArray"),w=t("./isArrayLikeObject"),S=t("./isBuffer"),k=t("./isFunction"),O=t("./isObject"),P=t("./isPlainObject"),A=t("./isTypedArray"),C=t("./_safeGet"),M=t("./toPlainObject");e.exports=function(t,e,n,i,r,a,o){var l=C(t,n),s=C(e,n),u=o.get(s);if(u)y(t,n,u);else{var f=a?a(l,s,n+"",t,e,o):void 0,c=void 0===f;if(c){var d=m(s),h=!d&&S(s),p=!d&&!h&&A(s);f=s,d||h||p?f=m(l)?l:w(l)?_(l):h?v(s,!(c=!1)):p?g(s,!(c=!1)):[]:P(s)||x(s)?x(f=l)?f=M(l):(!O(l)||i&&k(l))&&(f=b(s)):c=!1}c&&(o.set(s,f),r(f,s,i,a,o),o.delete(s)),y(t,n,f)}}},{"./_assignMergeValue":74,"./_cloneBuffer":135,"./_cloneTypedArray":139,"./_copyArray":142,"./_initCloneObject":179,"./_safeGet":209,"./isArguments":242,"./isArray":243,"./isArrayLikeObject":245,"./isBuffer":246,"./isFunction":248,"./isObject":251,"./isPlainObject":253,"./isTypedArray":257,"./toPlainObject":282}],114:[function(t,e,n){var a=t("./_arrayMap"),o=t("./_baseIteratee"),l=t("./_baseMap"),s=t("./_baseSortBy"),u=t("./_baseUnary"),f=t("./_compareMultiple"),c=t("./identity");e.exports=function(t,i,n){var r=-1;i=a(i.length?i:[c],u(o));var e=l(t,function(e,t,n){return{criteria:a(i,function(t){return t(e)}),index:++r,value:e}});return s(e,function(t,e){return f(t,e,n)})}},{"./_arrayMap":69,"./_baseIteratee":105,"./_baseMap":109,"./_baseSortBy":124,"./_baseUnary":127,"./_compareMultiple":141,"./identity":241}],115:[function(t,e,n){var i=t("./_basePickBy"),r=t("./hasIn");e.exports=function(n,t){return i(n,t,function(t,e){return r(n,e)})}},{"./_basePickBy":116,"./hasIn":240}],116:[function(t,e,n){var s=t("./_baseGet"),u=t("./_baseSet"),f=t("./_castPath");e.exports=function(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],l=s(t,o);n(l,o)&&u(a,f(o,t),l)}return a}},{"./_baseGet":89,"./_baseSet":122,"./_castPath":133}],117:[function(t,e,n){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],118:[function(t,e,n){var i=t("./_baseGet");e.exports=function(e){return function(t){return i(t,e)}}},{"./_baseGet":89}],119:[function(t,e,n){var l=Math.ceil,s=Math.max;e.exports=function(t,e,n,i){for(var r=-1,a=s(l((e-t)/(n||1)),0),o=Array(a);a--;)o[i?a:++r]=t,t+=n;return o}},{}],120:[function(t,e,n){e.exports=function(t,i,r,a,e){return e(t,function(t,e,n){r=a?(a=!1,t):i(r,t,e,n)}),r}},{}],121:[function(t,e,n){var i=t("./identity"),r=t("./_overRest"),a=t("./_setToString");e.exports=function(t,e){return a(r(t,e,i),t+"")}},{"./_overRest":207,"./_setToString":213,"./identity":241}],122:[function(t,e,n){var c=t("./_assignValue"),d=t("./_castPath"),h=t("./_isIndex"),p=t("./isObject"),y=t("./_toKey");e.exports=function(t,e,n,i){if(!p(t))return t;for(var r=-1,a=(e=d(e,t)).length,o=a-1,l=t;null!=l&&++r<a;){var s=y(e[r]),u=n;if(r!=o){var f=l[s];void 0===(u=i?i(f,s,l):void 0)&&(u=p(f)?f:h(e[r+1])?[]:{})}c(l,s,u),l=l[s]}return t}},{"./_assignValue":75,"./_castPath":133,"./_isIndex":181,"./_toKey":223,"./isObject":251}],123:[function(t,e,n){var i=t("./constant"),r=t("./_defineProperty"),a=t("./identity"),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:a;e.exports=o},{"./_defineProperty":153,"./constant":228,"./identity":241}],124:[function(t,e,n){e.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},{}],125:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},{}],126:[function(t,e,n){var i=t("./_Symbol"),r=t("./_arrayMap"),a=t("./isArray"),o=t("./isSymbol"),l=1/0,s=i?i.prototype:void 0,u=s?s.toString:void 0;e.exports=function t(e){if("string"==typeof e)return e;if(a(e))return r(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-l?"-0":n}},{"./_Symbol":60,"./_arrayMap":69,"./isArray":243,"./isSymbol":256}],127:[function(t,e,n){e.exports=function(e){return function(t){return e(t)}}},{}],128:[function(t,e,n){var h=t("./_SetCache"),p=t("./_arrayIncludes"),y=t("./_arrayIncludesWith"),v=t("./_cacheHas"),g=t("./_createSet"),_=t("./_setToArray");e.exports=function(t,e,n){var i=-1,r=p,a=t.length,o=!0,l=[],s=l;if(n)o=!1,r=y;else if(200<=a){var u=e?null:g(t);if(u)return _(u);o=!1,r=v,s=new h}else s=e?[]:l;t:for(;++i<a;){var f=t[i],c=e?e(f):f;if(f=n||0!==f?f:0,o&&c==c){for(var d=s.length;d--;)if(s[d]===c)continue t;e&&s.push(c),l.push(f)}else r(s,c,n)||(s!==l&&s.push(c),l.push(f))}return l}},{"./_SetCache":58,"./_arrayIncludes":66,"./_arrayIncludesWith":67,"./_cacheHas":131,"./_createSet":152,"./_setToArray":212}],129:[function(t,e,n){var i=t("./_arrayMap");e.exports=function(e,t){return i(t,function(t){return e[t]})}},{"./_arrayMap":69}],130:[function(t,e,n){e.exports=function(t,e,n){for(var i=-1,r=t.length,a=e.length,o={};++i<r;){var l=i<a?e[i]:void 0;n(o,t[i],l)}return o}},{}],131:[function(t,e,n){e.exports=function(t,e){return t.has(e)}},{}],132:[function(t,e,n){var i=t("./identity");e.exports=function(t){return"function"==typeof t?t:i}},{"./identity":241}],133:[function(t,e,n){var i=t("./isArray"),r=t("./_isKey"),a=t("./_stringToPath"),o=t("./toString");e.exports=function(t,e){return i(t)?t:r(t,e)?[t]:a(o(t))}},{"./_isKey":183,"./_stringToPath":222,"./isArray":243,"./toString":283}],134:[function(t,e,n){var i=t("./_Uint8Array");e.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},{"./_Uint8Array":61}],135:[function(t,e,n){var i=t("./_root"),r="object"==d(n)&&n&&!n.nodeType&&n,a=r&&"object"==d(e)&&e&&!e.nodeType&&e,o=a&&a.exports===r?i.Buffer:void 0,l=o?o.allocUnsafe:void 0;e.exports=function(t,e){if(e)return t.slice();var n=t.length,i=l?l(n):new t.constructor(n);return t.copy(i),i}},{"./_root":208}],136:[function(t,e,n){var i=t("./_cloneArrayBuffer");e.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},{"./_cloneArrayBuffer":134}],137:[function(t,e,n){var i=/\w*$/;e.exports=function(t){var e=new t.constructor(t.source,i.exec(t));return e.lastIndex=t.lastIndex,e}},{}],138:[function(t,e,n){var i=t("./_Symbol"),r=i?i.prototype:void 0,a=r?r.valueOf:void 0;e.exports=function(t){return a?Object(a.call(t)):{}}},{"./_Symbol":60}],139:[function(t,e,n){var i=t("./_cloneArrayBuffer");e.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},{"./_cloneArrayBuffer":134}],140:[function(t,e,n){var f=t("./isSymbol");e.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,r=t==t,a=f(t),o=void 0!==e,l=null===e,s=e==e,u=f(e);if(!l&&!u&&!a&&e<t||a&&o&&s&&!l&&!u||i&&o&&s||!n&&s||!r)return 1;if(!i&&!a&&!u&&t<e||u&&n&&r&&!i&&!a||l&&n&&r||!o&&r||!s)return-1}return 0}},{"./isSymbol":256}],141:[function(t,e,n){var u=t("./_compareAscending");e.exports=function(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,l=n.length;++i<o;){var s=u(r[i],a[i]);if(s)return l<=i?s:s*("desc"==n[i]?-1:1)}return t.index-e.index}},{"./_compareAscending":140}],142:[function(t,e,n){e.exports=function(t,e){var n=-1,i=t.length;for(e=e||Array(i);++n<i;)e[n]=t[n];return e}},{}],143:[function(t,e,n){var u=t("./_assignValue"),f=t("./_baseAssignValue");e.exports=function(t,e,n,i){var r=!n;n=n||{};for(var a=-1,o=e.length;++a<o;){var l=e[a],s=i?i(n[l],t[l],l,n,t):void 0;void 0===s&&(s=t[l]),r?f(n,l,s):u(n,l,s)}return n}},{"./_assignValue":75,"./_baseAssignValue":79}],144:[function(t,e,n){var i=t("./_copyObject"),r=t("./_getSymbols");e.exports=function(t,e){return i(t,r(t),e)}},{"./_copyObject":143,"./_getSymbols":166}],145:[function(t,e,n){var i=t("./_copyObject"),r=t("./_getSymbolsIn");e.exports=function(t,e){return i(t,r(t),e)}},{"./_copyObject":143,"./_getSymbolsIn":167}],146:[function(t,e,n){var i=t("./_root")["__core-js_shared__"];e.exports=i},{"./_root":208}],147:[function(t,e,n){var i=t("./_baseRest"),s=t("./_isIterateeCall");e.exports=function(l){return i(function(t,e){var n=-1,i=e.length,r=1<i?e[i-1]:void 0,a=2<i?e[2]:void 0;for(r=3<l.length&&"function"==typeof r?(i--,r):void 0,a&&s(e[0],e[1],a)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var o=e[n];o&&l(t,o,n,r)}return t})}},{"./_baseRest":121,"./_isIterateeCall":182}],148:[function(t,e,n){var l=t("./isArrayLike");e.exports=function(a,o){return function(t,e){if(null==t)return t;if(!l(t))return a(t,e);for(var n=t.length,i=o?n:-1,r=Object(t);(o?i--:++i<n)&&!1!==e(r[i],i,r););return t}}},{"./isArrayLike":244}],149:[function(t,e,n){e.exports=function(s){return function(t,e,n){for(var i=-1,r=Object(t),a=n(t),o=a.length;o--;){var l=a[s?o:++i];if(!1===e(r[l],l,r))break}return t}}},{}],150:[function(t,e,n){var l=t("./_baseIteratee"),s=t("./isArrayLike"),u=t("./keys");e.exports=function(o){return function(t,e,n){var i=Object(t);if(!s(t)){var r=l(e,3);t=u(t),e=function(t){return r(i[t],t,i)}}var a=o(t,e,n);return-1<a?i[r?t[a]:a]:void 0}}},{"./_baseIteratee":105,"./isArrayLike":244,"./keys":259}],151:[function(t,e,n){var r=t("./_baseRange"),a=t("./_isIterateeCall"),o=t("./toFinite");e.exports=function(i){return function(t,e,n){return n&&"number"!=typeof n&&a(t,e,n)&&(e=n=void 0),t=o(t),void 0===e?(e=t,t=0):e=o(e),n=void 0===n?t<e?1:-1:o(n),r(t,e,n,i)}}},{"./_baseRange":119,"./_isIterateeCall":182,"./toFinite":279}],152:[function(t,e,n){var i=t("./_Set"),r=t("./noop"),a=t("./_setToArray"),o=i&&1/a(new i([,-0]))[1]==1/0?function(t){return new i(t)}:r;e.exports=o},{"./_Set":57,"./_setToArray":212,"./noop":269}],153:[function(t,e,n){var i=t("./_getNative"),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=r},{"./_getNative":163}],154:[function(t,e,n){var v=t("./_SetCache"),g=t("./_arraySome"),_=t("./_cacheHas");e.exports=function(t,e,n,i,r,a){var o=1&n,l=t.length,s=e.length;if(l!=s&&!(o&&l<s))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var f=-1,c=!0,d=2&n?new v:void 0;for(a.set(t,e),a.set(e,t);++f<l;){var h=t[f],p=e[f];if(i)var y=o?i(p,h,f,e,t,a):i(h,p,f,t,e,a);if(void 0!==y){if(y)continue;c=!1;break}if(d){if(!g(e,function(t,e){if(!_(d,e)&&(h===t||r(h,t,n,i,a)))return d.push(e)})){c=!1;break}}else if(h!==p&&!r(h,p,n,i,a)){c=!1;break}}return a.delete(t),a.delete(e),c}},{"./_SetCache":58,"./_arraySome":72,"./_cacheHas":131}],155:[function(t,e,n){var i=t("./_Symbol"),c=t("./_Uint8Array"),d=t("./eq"),h=t("./_equalArrays"),p=t("./_mapToArray"),y=t("./_setToArray"),r=i?i.prototype:void 0,v=r?r.valueOf:void 0;e.exports=function(t,e,n,i,r,a,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new c(t),new c(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return d(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var l=p;case"[object Set]":var s=1&i;if(l=l||y,t.size!=e.size&&!s)return!1;var u=o.get(t);if(u)return u==e;i|=2,o.set(t,e);var f=h(l(t),l(e),i,r,a,o);return o.delete(t),f;case"[object Symbol]":if(v)return v.call(t)==v.call(e)}return!1}},{"./_Symbol":60,"./_Uint8Array":61,"./_equalArrays":154,"./_mapToArray":198,"./_setToArray":212,"./eq":231}],156:[function(t,e,n){var b=t("./_getAllKeys"),x=Object.prototype.hasOwnProperty;e.exports=function(t,e,n,i,r,a){var o=1&n,l=b(t),s=l.length;if(s!=b(e).length&&!o)return!1;for(var u=s;u--;){var f=l[u];if(!(o?f in e:x.call(e,f)))return!1}var c=a.get(t);if(c&&a.get(e))return c==e;var d=!0;a.set(t,e),a.set(e,t);for(var h=o;++u<s;){var p=t[f=l[u]],y=e[f];if(i)var v=o?i(y,p,f,e,t,a):i(p,y,f,t,e,a);if(!(void 0===v?p===y||r(p,y,n,i,a):v)){d=!1;break}h=h||"constructor"==f}if(d&&!h){var g=t.constructor,_=e.constructor;g!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d}},{"./_getAllKeys":159}],157:[function(t,e,n){var i=t("./flatten"),r=t("./_overRest"),a=t("./_setToString");e.exports=function(t){return a(r(t,void 0,i),t+"")}},{"./_overRest":207,"./_setToString":213,"./flatten":235}],158:[function(t,n,e){(function(t){var e="object"==d(t)&&t&&t.Object===Object&&t;n.exports=e}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],159:[function(t,e,n){var i=t("./_baseGetAllKeys"),r=t("./_getSymbols"),a=t("./keys");e.exports=function(t){return i(t,a,r)}},{"./_baseGetAllKeys":90,"./_getSymbols":166,"./keys":259}],160:[function(t,e,n){var i=t("./_baseGetAllKeys"),r=t("./_getSymbolsIn"),a=t("./keysIn");e.exports=function(t){return i(t,a,r)}},{"./_baseGetAllKeys":90,"./_getSymbolsIn":167,"./keysIn":260}],161:[function(t,e,n){var i=t("./_isKeyable");e.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},{"./_isKeyable":184}],162:[function(t,e,n){var a=t("./_isStrictComparable"),o=t("./keys");e.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,a(r)]}return e}},{"./_isStrictComparable":187,"./keys":259}],163:[function(t,e,n){var i=t("./_baseIsNative"),r=t("./_getValue");e.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},{"./_baseIsNative":102,"./_getValue":169}],164:[function(t,e,n){var i=t("./_overArg")(Object.getPrototypeOf,Object);e.exports=i},{"./_overArg":206}],165:[function(t,e,n){var i=t("./_Symbol"),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,l=i?i.toStringTag:void 0;e.exports=function(t){var e=a.call(t,l),n=t[l];try{var i=!(t[l]=void 0)}catch(t){}var r=o.call(t);return i&&(e?t[l]=n:delete t[l]),r}},{"./_Symbol":60}],166:[function(t,e,n){var i=t("./_arrayFilter"),r=t("./stubArray"),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,l=o?function(e){return null==e?[]:(e=Object(e),i(o(e),function(t){return a.call(e,t)}))}:r;e.exports=l},{"./_arrayFilter":65,"./stubArray":277}],167:[function(t,e,n){var i=t("./_arrayPush"),r=t("./_getPrototype"),a=t("./_getSymbols"),o=t("./stubArray"),l=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,a(t)),t=r(t);return e}:o;e.exports=l},{"./_arrayPush":70,"./_getPrototype":164,"./_getSymbols":166,"./stubArray":277}],168:[function(t,e,n){var i=t("./_DataView"),r=t("./_Map"),a=t("./_Promise"),o=t("./_Set"),l=t("./_WeakMap"),s=t("./_baseGetTag"),u=t("./_toSource"),f="[object Map]",c="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",y=u(i),v=u(r),g=u(a),_=u(o),b=u(l),x=s;(i&&x(new i(new ArrayBuffer(1)))!=p||r&&x(new r)!=f||a&&x(a.resolve())!=c||o&&x(new o)!=d||l&&x(new l)!=h)&&(x=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case y:return p;case v:return f;case g:return c;case _:return d;case b:return h}return e}),e.exports=x},{"./_DataView":51,"./_Map":54,"./_Promise":56,"./_Set":57,"./_WeakMap":62,"./_baseGetTag":91,"./_toSource":224}],169:[function(t,e,n){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],170:[function(t,e,n){var l=t("./_castPath"),s=t("./isArguments"),u=t("./isArray"),f=t("./_isIndex"),c=t("./isLength"),d=t("./_toKey");e.exports=function(t,e,n){for(var i=-1,r=(e=l(e,t)).length,a=!1;++i<r;){var o=d(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&c(r)&&f(o,r)&&(u(t)||s(t))}},{"./_castPath":133,"./_isIndex":181,"./_toKey":223,"./isArguments":242,"./isArray":243,"./isLength":249}],171:[function(t,e,n){var i=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(t){return i.test(t)}},{}],172:[function(t,e,n){var i=t("./_nativeCreate");e.exports=function(){this.__data__=i?i(null):{},this.size=0}},{"./_nativeCreate":201}],173:[function(t,e,n){e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},{}],174:[function(t,e,n){var i=t("./_nativeCreate"),r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},{"./_nativeCreate":201}],175:[function(t,e,n){var i=t("./_nativeCreate"),r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},{"./_nativeCreate":201}],176:[function(t,e,n){var i=t("./_nativeCreate");e.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},{"./_nativeCreate":201}],177:[function(t,e,n){var i=Object.prototype.hasOwnProperty;e.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&i.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},{}],178:[function(t,e,n){var r=t("./_cloneArrayBuffer"),a=t("./_cloneDataView"),o=t("./_cloneRegExp"),l=t("./_cloneSymbol"),s=t("./_cloneTypedArray");e.exports=function(t,e,n){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return a(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return o(t);case"[object Set]":return new i;case"[object Symbol]":return l(t)}}},{"./_cloneArrayBuffer":134,"./_cloneDataView":136,"./_cloneRegExp":137,"./_cloneSymbol":138,"./_cloneTypedArray":139}],179:[function(t,e,n){var i=t("./_baseCreate"),r=t("./_getPrototype"),a=t("./_isPrototype");e.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:i(r(t))}},{"./_baseCreate":81,"./_getPrototype":164,"./_isPrototype":186}],180:[function(t,e,n){var i=t("./_Symbol"),r=t("./isArguments"),a=t("./isArray"),o=i?i.isConcatSpreadable:void 0;e.exports=function(t){return a(t)||r(t)||!!(o&&t&&t[o])}},{"./_Symbol":60,"./isArguments":242,"./isArray":243}],181:[function(t,e,n){var i=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var n=d(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&i.test(t))&&-1<t&&t%1==0&&t<e}},{}],182:[function(t,e,n){var r=t("./eq"),a=t("./isArrayLike"),o=t("./_isIndex"),l=t("./isObject");e.exports=function(t,e,n){if(!l(n))return!1;var i=d(e);return!!("number"==i?a(n)&&o(e,n.length):"string"==i&&e in n)&&r(n[e],t)}},{"./_isIndex":181,"./eq":231,"./isArrayLike":244,"./isObject":251}],183:[function(t,e,n){var i=t("./isArray"),r=t("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(t,e){if(i(t))return!1;var n=d(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(o.test(t)||!a.test(t)||null!=e&&t in Object(e))}},{"./isArray":243,"./isSymbol":256}],184:[function(t,e,n){e.exports=function(t){var e=d(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},{}],185:[function(t,e,n){var i,r=t("./_coreJsData"),a=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(t){return!!a&&a in t}},{"./_coreJsData":146}],186:[function(t,e,n){var i=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},{}],187:[function(t,e,n){var i=t("./isObject");e.exports=function(t){return t==t&&!i(t)}},{"./isObject":251}],188:[function(t,e,n){e.exports=function(){this.__data__=[],this.size=0}},{}],189:[function(t,e,n){var i=t("./_assocIndexOf"),r=Array.prototype.splice;e.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():r.call(e,n,1),--this.size,!0)}},{"./_assocIndexOf":76}],190:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},{"./_assocIndexOf":76}],191:[function(t,e,n){var i=t("./_assocIndexOf");e.exports=function(t){return-1<i(this.__data__,t)}},{"./_assocIndexOf":76}],192:[function(t,e,n){var r=t("./_assocIndexOf");e.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},{"./_assocIndexOf":76}],193:[function(t,e,n){var i=t("./_Hash"),r=t("./_ListCache"),a=t("./_Map");e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(a||r),string:new i}}},{"./_Hash":52,"./_ListCache":53,"./_Map":54}],194:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},{"./_getMapData":161}],195:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){return i(this,t).get(t)}},{"./_getMapData":161}],196:[function(t,e,n){var i=t("./_getMapData");e.exports=function(t){return i(this,t).has(t)}},{"./_getMapData":161}],197:[function(t,e,n){var r=t("./_getMapData");e.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},{"./_getMapData":161}],198:[function(t,e,n){e.exports=function(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i}},{}],199:[function(t,e,n){e.exports=function(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in Object(t)))}}},{}],200:[function(t,e,n){var i=t("./memoize");e.exports=function(t){var e=i(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},{"./memoize":265}],201:[function(t,e,n){var i=t("./_getNative")(Object,"create");e.exports=i},{"./_getNative":163}],202:[function(t,e,n){var i=t("./_overArg")(Object.keys,Object);e.exports=i},{"./_overArg":206}],203:[function(t,e,n){e.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},{}],204:[function(t,e,n){var i=t("./_freeGlobal"),r="object"==d(n)&&n&&!n.nodeType&&n,a=r&&"object"==d(e)&&e&&!e.nodeType&&e,o=a&&a.exports===r&&i.process,l=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=l},{"./_freeGlobal":158}],205:[function(t,e,n){var i=Object.prototype.toString;e.exports=function(t){return i.call(t)}},{}],206:[function(t,e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},{}],207:[function(t,e,n){var s=t("./_apply"),u=Math.max;e.exports=function(a,o,l){return o=u(void 0===o?a.length-1:o,0),function(){for(var t=arguments,e=-1,n=u(t.length-o,0),i=Array(n);++e<n;)i[e]=t[o+e];e=-1;for(var r=Array(o+1);++e<o;)r[e]=t[e];return r[o]=l(i),s(a,this,r)}}},{"./_apply":63}],208:[function(t,e,n){var i=t("./_freeGlobal"),r="object"==("undefined"==typeof self?"undefined":d(self))&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},{"./_freeGlobal":158}],209:[function(t,e,n){e.exports=function(t,e){return"__proto__"==e?void 0:t[e]}},{}],210:[function(t,e,n){e.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},{}],211:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],212:[function(t,e,n){e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},{}],213:[function(t,e,n){var i=t("./_baseSetToString"),r=t("./_shortOut")(i);e.exports=r},{"./_baseSetToString":123,"./_shortOut":214}],214:[function(t,e,n){var a=Date.now;e.exports=function(n){var i=0,r=0;return function(){var t=a(),e=16-(t-r);if(r=t,0<e){if(800<=++i)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}},{}],215:[function(t,e,n){var i=t("./_ListCache");e.exports=function(){this.__data__=new i,this.size=0}},{"./_ListCache":53}],216:[function(t,e,n){e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},{}],217:[function(t,e,n){e.exports=function(t){return this.__data__.get(t)}},{}],218:[function(t,e,n){e.exports=function(t){return this.__data__.has(t)}},{}],219:[function(t,e,n){var r=t("./_ListCache"),a=t("./_Map"),o=t("./_MapCache");e.exports=function(t,e){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!a||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(t,e),this.size=n.size,this}},{"./_ListCache":53,"./_Map":54,"./_MapCache":55}],220:[function(t,e,n){e.exports=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}},{}],221:[function(t,e,n){var i=t("./_asciiSize"),r=t("./_hasUnicode"),a=t("./_unicodeSize");e.exports=function(t){return r(t)?a(t):i(t)}},{"./_asciiSize":73,"./_hasUnicode":171,"./_unicodeSize":225}],222:[function(t,e,n){var i=t("./_memoizeCapped"),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,r=i(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(a,function(t,e,n,i){r.push(n?i.replace(o,"$1"):e||t)}),r});e.exports=r},{"./_memoizeCapped":200}],223:[function(t,e,n){var i=t("./isSymbol");e.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},{"./isSymbol":256}],224:[function(t,e,n){var i=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],225:[function(t,e,n){var i="\\ud800-\\udfff",r="["+i+"]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",l="[^"+i+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",f="(?:"+a+"|"+o+")"+"?",c="[\\ufe0e\\ufe0f]?",d=c+f+("(?:\\u200d(?:"+[l,s,u].join("|")+")"+c+f+")*"),h="(?:"+[l+a+"?",a,s,u,r].join("|")+")",p=RegExp(o+"(?="+o+")|"+h+d,"g");e.exports=function(t){for(var e=p.lastIndex=0;p.test(t);)++e;return e}},{}],226:[function(t,e,n){var i=t("./_baseClone");e.exports=function(t){return i(t,4)}},{"./_baseClone":80}],227:[function(t,e,n){var i=t("./_baseClone");e.exports=function(t){return i(t,5)}},{"./_baseClone":80}],228:[function(t,e,n){e.exports=function(t){return function(){return t}}},{}],229:[function(t,e,n){var i=t("./_baseRest"),c=t("./eq"),d=t("./_isIterateeCall"),h=t("./keysIn"),p=Object.prototype,y=p.hasOwnProperty,r=i(function(t,e){t=Object(t);var n=-1,i=e.length,r=2<i?e[2]:void 0;for(r&&d(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],o=h(a),l=-1,s=o.length;++l<s;){var u=o[l],f=t[u];(void 0===f||c(f,p[u])&&!y.call(t,u))&&(t[u]=a[u])}return t});e.exports=r},{"./_baseRest":121,"./_isIterateeCall":182,"./eq":231,"./keysIn":260}],230:[function(t,e,n){e.exports=t("./forEach")},{"./forEach":236}],231:[function(t,e,n){e.exports=function(t,e){return t===e||t!=t&&e!=e}},{}],232:[function(t,e,n){var i=t("./_arrayFilter"),r=t("./_baseFilter"),a=t("./_baseIteratee"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:r)(t,a(e,3))}},{"./_arrayFilter":65,"./_baseFilter":84,"./_baseIteratee":105,"./isArray":243}],233:[function(t,e,n){var i=t("./_createFind")(t("./findIndex"));e.exports=i},{"./_createFind":150,"./findIndex":234}],234:[function(t,e,n){var a=t("./_baseFindIndex"),o=t("./_baseIteratee"),l=t("./toInteger"),s=Math.max;e.exports=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:l(n);return r<0&&(r=s(i+r,0)),a(t,o(e,3),r)}},{"./_baseFindIndex":85,"./_baseIteratee":105,"./toInteger":280}],235:[function(t,e,n){var i=t("./_baseFlatten");e.exports=function(t){return(null==t?0:t.length)?i(t,1):[]}},{"./_baseFlatten":86}],236:[function(t,e,n){var i=t("./_arrayEach"),r=t("./_baseEach"),a=t("./_castFunction"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:r)(t,a(e))}},{"./_arrayEach":64,"./_baseEach":82,"./_castFunction":132,"./isArray":243}],237:[function(t,e,n){var i=t("./_baseFor"),r=t("./_castFunction"),a=t("./keysIn");e.exports=function(t,e){return null==t?t:i(t,r(e),a)}},{"./_baseFor":87,"./_castFunction":132,"./keysIn":260}],238:[function(t,e,n){var r=t("./_baseGet");e.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},{"./_baseGet":89}],239:[function(t,e,n){var i=t("./_baseHas"),r=t("./_hasPath");e.exports=function(t,e){return null!=t&&r(t,e,i)}},{"./_baseHas":93,"./_hasPath":170}],240:[function(t,e,n){var i=t("./_baseHasIn"),r=t("./_hasPath");e.exports=function(t,e){return null!=t&&r(t,e,i)}},{"./_baseHasIn":94,"./_hasPath":170}],241:[function(t,e,n){e.exports=function(t){return t}},{}],242:[function(t,e,n){var i=t("./_baseIsArguments"),r=t("./isObjectLike"),a=Object.prototype,o=a.hasOwnProperty,l=a.propertyIsEnumerable,s=i(function(){return arguments}())?i:function(t){return r(t)&&o.call(t,"callee")&&!l.call(t,"callee")};e.exports=s},{"./_baseIsArguments":96,"./isObjectLike":252}],243:[function(t,e,n){var i=Array.isArray;e.exports=i},{}],244:[function(t,e,n){var i=t("./isFunction"),r=t("./isLength");e.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},{"./isFunction":248,"./isLength":249}],245:[function(t,e,n){var i=t("./isArrayLike"),r=t("./isObjectLike");e.exports=function(t){return r(t)&&i(t)}},{"./isArrayLike":244,"./isObjectLike":252}],246:[function(t,e,n){var i=t("./_root"),r=t("./stubFalse"),a="object"==d(n)&&n&&!n.nodeType&&n,o=a&&"object"==d(e)&&e&&!e.nodeType&&e,l=o&&o.exports===a?i.Buffer:void 0,s=(l?l.isBuffer:void 0)||r;e.exports=s},{"./_root":208,"./stubFalse":278}],247:[function(t,e,n){var i=t("./_baseKeys"),r=t("./_getTag"),a=t("./isArguments"),o=t("./isArray"),l=t("./isArrayLike"),s=t("./isBuffer"),u=t("./_isPrototype"),f=t("./isTypedArray"),c=Object.prototype.hasOwnProperty;e.exports=function(t){if(null==t)return!0;if(l(t)&&(o(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||a(t)))return!t.length;var e=r(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(u(t))return!i(t).length;for(var n in t)if(c.call(t,n))return!1;return!0}},{"./_baseKeys":106,"./_getTag":168,"./_isPrototype":186,"./isArguments":242,"./isArray":243,"./isArrayLike":244,"./isBuffer":246,"./isTypedArray":257}],248:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObject");e.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},{"./_baseGetTag":91,"./isObject":251}],249:[function(t,e,n){e.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},{}],250:[function(t,e,n){var i=t("./_baseIsMap"),r=t("./_baseUnary"),a=t("./_nodeUtil"),o=a&&a.isMap,l=o?r(o):i;e.exports=l},{"./_baseIsMap":99,"./_baseUnary":127,"./_nodeUtil":204}],251:[function(t,e,n){e.exports=function(t){var e=d(t);return null!=t&&("object"==e||"function"==e)}},{}],252:[function(t,e,n){e.exports=function(t){return null!=t&&"object"==d(t)}},{}],253:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./_getPrototype"),a=t("./isObjectLike"),o=Function.prototype,l=Object.prototype,s=o.toString,u=l.hasOwnProperty,f=s.call(Object);e.exports=function(t){if(!a(t)||"[object Object]"!=i(t))return!1;var e=r(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f}},{"./_baseGetTag":91,"./_getPrototype":164,"./isObjectLike":252}],254:[function(t,e,n){var i=t("./_baseIsSet"),r=t("./_baseUnary"),a=t("./_nodeUtil"),o=a&&a.isSet,l=o?r(o):i;e.exports=l},{"./_baseIsSet":103,"./_baseUnary":127,"./_nodeUtil":204}],255:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isArray"),a=t("./isObjectLike");e.exports=function(t){return"string"==typeof t||!r(t)&&a(t)&&"[object String]"==i(t)}},{"./_baseGetTag":91,"./isArray":243,"./isObjectLike":252}],256:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObjectLike");e.exports=function(t){return"symbol"==d(t)||r(t)&&"[object Symbol]"==i(t)}},{"./_baseGetTag":91,"./isObjectLike":252}],257:[function(t,e,n){var i=t("./_baseIsTypedArray"),r=t("./_baseUnary"),a=t("./_nodeUtil"),o=a&&a.isTypedArray,l=o?r(o):i;e.exports=l},{"./_baseIsTypedArray":104,"./_baseUnary":127,"./_nodeUtil":204}],258:[function(t,e,n){e.exports=function(t){return void 0===t}},{}],259:[function(t,e,n){var i=t("./_arrayLikeKeys"),r=t("./_baseKeys"),a=t("./isArrayLike");e.exports=function(t){return a(t)?i(t):r(t)}},{"./_arrayLikeKeys":68,"./_baseKeys":106,"./isArrayLike":244}],260:[function(t,e,n){var i=t("./_arrayLikeKeys"),r=t("./_baseKeysIn"),a=t("./isArrayLike");e.exports=function(t){return a(t)?i(t,!0):r(t)}},{"./_arrayLikeKeys":68,"./_baseKeysIn":107,"./isArrayLike":244}],261:[function(t,e,n){e.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},{}],262:[function(t,e,n){var i=t("./_arrayMap"),r=t("./_baseIteratee"),a=t("./_baseMap"),o=t("./isArray");e.exports=function(t,e){return(o(t)?i:a)(t,r(e,3))}},{"./_arrayMap":69,"./_baseIteratee":105,"./_baseMap":109,"./isArray":243}],263:[function(t,e,n){var a=t("./_baseAssignValue"),o=t("./_baseForOwn"),l=t("./_baseIteratee");e.exports=function(t,i){var r={};return i=l(i,3),o(t,function(t,e,n){a(r,e,i(t,e,n))}),r}},{"./_baseAssignValue":79,"./_baseForOwn":88,"./_baseIteratee":105}],264:[function(t,e,n){var i=t("./_baseExtremum"),r=t("./_baseGt"),a=t("./identity");e.exports=function(t){return t&&t.length?i(t,a,r):void 0}},{"./_baseExtremum":83,"./_baseGt":92,"./identity":241}],265:[function(t,e,n){var i=t("./_MapCache"),l="Expected a function";function s(r,a){if("function"!=typeof r||null!=a&&"function"!=typeof a)throw new TypeError(l);function o(){var t=arguments,e=a?a.apply(this,t):t[0],n=o.cache;if(n.has(e))return n.get(e);var i=r.apply(this,t);return o.cache=n.set(e,i)||n,i}return o.cache=new(s.Cache||i),o}s.Cache=i,e.exports=s},{"./_MapCache":55}],266:[function(t,e,n){var i=t("./_baseMerge"),r=t("./_createAssigner")(function(t,e,n){i(t,e,n)});e.exports=r},{"./_baseMerge":112,"./_createAssigner":147}],267:[function(t,e,n){var i=t("./_baseExtremum"),r=t("./_baseLt"),a=t("./identity");e.exports=function(t){return t&&t.length?i(t,a,r):void 0}},{"./_baseExtremum":83,"./_baseLt":108,"./identity":241}],268:[function(t,e,n){var i=t("./_baseExtremum"),r=t("./_baseIteratee"),a=t("./_baseLt");e.exports=function(t,e){return t&&t.length?i(t,r(e,2),a):void 0}},{"./_baseExtremum":83,"./_baseIteratee":105,"./_baseLt":108}],269:[function(t,e,n){e.exports=function(){}},{}],270:[function(t,e,n){var i=t("./_root");e.exports=function(){return i.Date.now()}},{"./_root":208}],271:[function(t,e,n){var i=t("./_basePick"),r=t("./_flatRest")(function(t,e){return null==t?{}:i(t,e)});e.exports=r},{"./_basePick":115,"./_flatRest":157}],272:[function(t,e,n){var i=t("./_baseProperty"),r=t("./_basePropertyDeep"),a=t("./_isKey"),o=t("./_toKey");e.exports=function(t){return a(t)?i(o(t)):r(t)}},{"./_baseProperty":117,"./_basePropertyDeep":118,"./_isKey":183,"./_toKey":223}],273:[function(t,e,n){var i=t("./_createRange")();e.exports=i},{"./_createRange":151}],274:[function(t,e,n){var a=t("./_arrayReduce"),o=t("./_baseEach"),l=t("./_baseIteratee"),s=t("./_baseReduce"),u=t("./isArray");e.exports=function(t,e,n){var i=u(t)?a:s,r=arguments.length<3;return i(t,l(e,4),n,r,o)}},{"./_arrayReduce":71,"./_baseEach":82,"./_baseIteratee":105,"./_baseReduce":120,"./isArray":243}],275:[function(t,e,n){var i=t("./_baseKeys"),r=t("./_getTag"),a=t("./isArrayLike"),o=t("./isString"),l=t("./_stringSize");e.exports=function(t){if(null==t)return 0;if(a(t))return o(t)?l(t):t.length;var e=r(t);return"[object Map]"==e||"[object Set]"==e?t.size:i(t).length}},{"./_baseKeys":106,"./_getTag":168,"./_stringSize":221,"./isArrayLike":244,"./isString":255}],276:[function(t,e,n){var i=t("./_baseFlatten"),r=t("./_baseOrderBy"),a=t("./_baseRest"),o=t("./_isIterateeCall"),l=a(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&o(t,e[0],e[1])?e=[]:2<n&&o(e[0],e[1],e[2])&&(e=[e[0]]),r(t,i(e,1),[])});e.exports=l},{"./_baseFlatten":86,"./_baseOrderBy":114,"./_baseRest":121,"./_isIterateeCall":182}],277:[function(t,e,n){e.exports=function(){return[]}},{}],278:[function(t,e,n){e.exports=function(){return!1}},{}],279:[function(t,e,n){var i=t("./toNumber");e.exports=function(t){return t?(t=i(t))!==1/0&&t!==-1/0?t==t?t:0:17976931348623157e292*(t<0?-1:1):0===t?t:0}},{"./toNumber":281}],280:[function(t,e,n){var i=t("./toFinite");e.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},{"./toFinite":279}],281:[function(t,e,n){var i=t("./isObject"),r=t("./isSymbol"),a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(t){if("number"==typeof t)return t;if(r(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=l.test(t);return n||s.test(t)?u(t.slice(2),n?2:8):o.test(t)?NaN:+t}},{"./isObject":251,"./isSymbol":256}],282:[function(t,e,n){var i=t("./_copyObject"),r=t("./keysIn");e.exports=function(t){return i(t,r(t))}},{"./_copyObject":143,"./keysIn":260}],283:[function(t,e,n){var i=t("./_baseToString");e.exports=function(t){return null==t?"":i(t)}},{"./_baseToString":126}],284:[function(t,e,n){var o=t("./_arrayEach"),l=t("./_baseCreate"),s=t("./_baseForOwn"),u=t("./_baseIteratee"),f=t("./_getPrototype"),c=t("./isArray"),d=t("./isBuffer"),h=t("./isFunction"),p=t("./isObject"),y=t("./isTypedArray");e.exports=function(t,i,r){var e=c(t),n=e||d(t)||y(t);if(i=u(i,4),null==r){var a=t&&t.constructor;r=n?e?new a:[]:p(t)&&h(a)?l(f(t)):{}}return(n?o:s)(t,function(t,e,n){return i(r,t,e,n)}),r}},{"./_arrayEach":64,"./_baseCreate":81,"./_baseForOwn":88,"./_baseIteratee":105,"./_getPrototype":164,"./isArray":243,"./isBuffer":246,"./isFunction":248,"./isObject":251,"./isTypedArray":257}],285:[function(t,e,n){var i=t("./_baseFlatten"),r=t("./_baseRest"),a=t("./_baseUniq"),o=t("./isArrayLikeObject"),l=r(function(t){return a(i(t,1,o,!0))});e.exports=l},{"./_baseFlatten":86,"./_baseRest":121,"./_baseUniq":128,"./isArrayLikeObject":245}],286:[function(t,e,n){var i=t("./toString"),r=0;e.exports=function(t){var e=++r;return i(t)+e}},{"./toString":283}],287:[function(t,e,n){var i=t("./_baseValues"),r=t("./keys");e.exports=function(t){return null==t?[]:i(t,r(t))}},{"./_baseValues":129,"./keys":259}],288:[function(t,e,n){var i=t("./_assignValue"),r=t("./_baseZipObject");e.exports=function(t,e){return r(t||[],e||[],i)}},{"./_assignValue":75,"./_baseZipObject":130}]},{},[1])(1)})});t(e(function(t,e){!function(t,e,n){Object.defineProperty(t,"__esModule",{value:true});var i=r(n);function r(t){return t&&t.__esModule?t:{default:t}}e.global.registerLayout("dagre",i["default"]),t["default"]=i["default"]}(e,X,L)})),t(e(function(t,e){!function(t,e,n){Object.defineProperty(t,"__esModule",{value:true});var b=i(e);function i(t){return t&&t.__esModule?t:{default:t}}var r=function t(){var c=(0,b["default"])().sort(null).value(null),d=o,h=[1,1],p=null;function e(t,e){var n=c.call(this,t,e),i=n[0],r=y(i);b["default"].layout_hierarchyVisitAfter(r,v),r.parent.m=-r.z;b["default"].layout_hierarchyVisitBefore(r,g);if(p)b["default"].layout_hierarchyVisitBefore(i,_);else{var a=i,o=i,l=i;b["default"].layout_hierarchyVisitBefore(i,function(t){if(t.x<a.x)a=t;if(t.x>o.x)o=t;if(t.depth>l.depth)l=t});var s=d(a,o)/2-a.x,u=h[0]/(o.x+d(o,a)/2+s),f=h[1]/(l.depth||1);b["default"].layout_hierarchyVisitBefore(i,function(t){t.x=(t.x+s)*u;t.y=t.depth*f})}return n}function y(t){var e={A:null,children:[t]},n=[e],i;while((i=n.pop())!=null){for(var r=i.children,a,o=0,l=r.length;o<l;++o){n.push((r[o]=a={_:r[o],parent:i,children:(a=r[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a)}}return e.children[0]}function v(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){l(t);var r=(e[0].z+e[e.length-1].z)/2;if(i){t.z=i.z+d(t._,i._);t.m=t.z-r}else{t.z=r}}else if(i){t.z=i.z+d(t._,i._)}t.parent.A=a(t,i,t.parent.A||n[0])}function g(t){t._.x=t.z+t.parent.m;t.m+=t.parent.m}function a(t,e,n){if(e){var i=t,r=t,a=e,o=i.parent.children[0],l=i.m,s=r.m,u=a.m,f=o.m,c;while(a=m(a),i=x(i),a&&i){o=x(o);r=m(r);r.a=t;c=a.z+u-i.z-l+d(a._,i._);if(c>0){w(S(a,t,n),t,c);l+=c;s+=c}u+=a.m;l+=i.m;f+=o.m;s+=r.m}if(a&&!m(r)){r.t=a;r.m+=u-s}if(i&&!x(o)){o.t=i;o.m+=l-f;n=t}}return n}function _(t){t.x*=h[0];t.y=t.depth*h[1]}e.separation=function(t){if(!arguments.length)return d;d=t;return e};e.size=function(t){if(!arguments.length)return p?null:h;p=(h=t)==null?_:null;return e};e.nodeSize=function(t){if(!arguments.length)return p?h:null;p=(h=t)==null?null:_;return e};return b["default"].layout_hierarchyRebind(e,c)};function o(t,e){return t.parent==e.parent?1:2}function x(t){var e=t.children;return e.length?e[0]:t.t}function m(t){var e=t.children,n;return(n=e.length)?e[n-1]:t.t}function w(t,e,n){var i=n/(e.i-t.i);e.c-=i;e.s+=n;t.c+=i;e.z+=n;e.m+=n}function l(t){var e=0,n=0,i=t.children,r=i.length,a;while(--r>=0){a=i[r];a.z+=e;a.m+=e;e+=a.s+(n+=a.c)}}function S(t,e,n){return t.a.parent===e.parent?t.a:n}n.global.registerLayout("tree",r),t["default"]=r}(e,j,X)}));var R=e(function(t,e){!function(t){function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var e=function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,t);this.comp=e;this.params=n};t.default=e}(e)});return t(R),t(e(function(t,e){!function(t,e,n,b,i){Object.defineProperty(t,"__esModule",{value:true});var r=a(e),x=a(n),m=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return f(t)}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return u(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function d(t,e,n){if(e)c(t.prototype,e);if(n)c(t,n);return t}function h(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)p(t,e)}function p(t,e){p=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return p(t,e)}var w=x["default"].Shapes.Circle,y=function(t){h(i,t);d(i,null,[{key:"defaultProps",value:function t(){return{data:{detail:"图例数据",default:[],documentation:'                    数据结构为：{name: "uv", color: "#ff8533", field: "" ...}                    如果手动传入数据只需要前面这三个 enabled: true, ind: 0                    外部只需要传field和fillStyle就行了                    '},position:{detail:"图例位置",documentation:"图例所在的方向top,right,bottom,left",default:"top"},direction:{detail:"图例布局方向",default:"h",documentation:"横向 top,bottom --\x3e h left,right -- >v"},textAlign:{detail:"水平方向的对其，默认居左对其",default:"left",documentation:"可选left，center，right"},verticalAlign:{detail:"垂直方向的对其方式，默认居中（待实现）",default:"middle",documentation:"可选top，middle，bottom"},icon:{detail:"图标设置",propertys:{height:{detail:"高",default:26},width:{detail:"图标宽",default:"auto"},shapeType:{detail:"图标的图形类型，目前只实现了圆形",default:"circle"},radius:{detail:"图标（circle）半径",default:5},lineWidth:{detail:"图标描边宽度",default:1},fillStyle:{detail:"图标颜色，一般会从data里面取，这里是默认色",default:"#999"}}},label:{detail:"文本配置",propertys:{textAlign:{detail:"水平对齐方式",default:"left"},textBaseline:{detail:"文本基线对齐方式",default:"middle"},fontColor:{detail:"文本颜色",default:"#333333"},cursor:{detail:"鼠标样式",default:"pointer"},format:{detail:"文本格式化处理函数",default:null}}},activeEnabled:{detail:"是否启动图例的",default:true},tipsEnabled:{detail:"是否开启图例的tips",default:false}}}}]);function i(t,e){var n;l(this,i);n=s(this,u(i).call(this,t,e));n.name="legend";b._.extend(true,f(n),(0,b.getDefaultProps)(i.defaultProps()),t);n.data=n._getLegendData(t);if(!t.direction&&t.position){if(n.position=="left"||n.position=="right"){n.direction="v"}else{n.direction="h"}}n.sprite=new x["default"].Display.Sprite({id:"LegendSprite",context:{x:n.pos.x,y:n.pos.y}});n.app.stage.addChild(n.sprite);n.widget();n.layout();return n}d(i,[{key:"_getLegendData",value:function t(e){var n=e.data;if(n){b._.each(n,function(t,e){t.enabled=true;t.ind=e})}else{n=this.app.getLegendData()}return n||[]}},{key:"layout",value:function t(){var e=this.app;var n=this.width+this.margin.left+this.margin.right;var i=this.height+this.margin.top+this.margin.bottom;var r=e.padding.left;var a=e.padding.top;if(this.position=="right"){r=e.width-e.padding.right-n}if(this.position=="bottom"){a=e.height-e.padding.bottom-i/2}var o,l;if(this.position=="left"||this.position=="right"){e.padding[this.position]+=n;o=n;l=e.height-e.padding.top-e.padding.bottom}else if(this.position=="top"||this.position=="bottom"){e.padding[this.position]+=i;o=e.width-e.padding.right-e.padding.left;l=i}if(this.textAlign=="center"){r+=o/2-this.width/2}if(this.textAlign=="right"){r+=o-this.width}this.pos={x:r,y:a};return this.pos}},{key:"draw",value:function t(){var e=this.app.getComponent({name:"coord"});if(e&&e.type=="rect"){if(this.textAlign=="left"&&(this.position=="top"||this.position=="bottom")){this.pos.x=e.getSizeAndOrigin().origin.x+this.icon.radius}}this.setPosition()}},{key:"widget",value:function t(){var u=this;var f=this.app.width-this.app.padding.left-this.app.padding.right;var c=this.app.height-this.app.padding.top-this.app.padding.bottom;var d=0;var h=0,p=0;var y=0,v=0;var g=1;var _=false;b._.each(this.data,function(e,t){if(_)return;var n=new w({id:"legend_field_icon_"+t,context:{x:0,y:u.icon.height/3,fillStyle:!e.enabled?"#ccc":e.color||"#999",r:u.icon.radius,cursor:"pointer"}});n.on(b.event.types.get(),function(t){});var i=e.name;if(u.label.format){i=u.label.format(e.name,e)}var r=new x["default"].Display.Text(i,{id:"legend_field_txt_"+t,context:{x:u.icon.radius+3,y:u.icon.height/3,textAlign:u.label.textAlign,textBaseline:u.label.textBaseline,fillStyle:u.label.fontColor,cursor:u.label.cursor}});r.on(b.event.types.get(),function(t){});var a=r.getTextWidth();var o=a+u.icon.radius*2+20;d=Math.max(d,o);var l={height:u.icon.height};if(u.direction=="v"){if(v+u.icon.height>c){if(y>f*.3){_=true;return}y+=d;v=0}l.x=y;l.y=v;v+=u.icon.height;p=Math.max(p,v)}else{if(y+o>f){if(u.icon.height*(g+1)>c*.3){_=true;return}y=0;g++}l.x=y;l.y=u.icon.height*(g-1);y+=o;h=Math.max(h,y)}var s=new x["default"].Display.Sprite({id:"legend_field_"+t,context:l});s.addChild(n);s.addChild(r);s.context.width=o;u.sprite.addChild(s);s.on(b.event.types.get(),function(t){if(t.type=="click"&&u.activeEnabled){if(b._.filter(u.data,function(t){return t.enabled}).length==1){if(e.enabled){return}}e.enabled=!e.enabled;n.context.fillStyle=!e.enabled?"#ccc":e.color||"#999";if(e.enabled){u.app.show(e.name,new m["default"](this,e))}else{u.app.hide(e.name,new m["default"](this,e))}}if(u.tipsEnabled){if(t.type=="mouseover"||t.type=="mousemove"){t.eventInfo=u._getInfoHandler(t,e)}if(t.type=="mouseout"){delete t.eventInfo}u.app.fire(t.type,t)}})});if(this.direction=="h"){u.width=u.sprite.context.width=h;u.height=u.sprite.context.height=u.icon.height*g}else{u.width=u.sprite.context.width=y+d;u.height=u.sprite.context.height=p}}},{key:"_getInfoHandler",value:function t(e,n){return{type:"legend",triggerType:"legend",trigger:this,tipsEnabled:this.tipsEnabled,nodes:[{name:n.name,fillStyle:n.color}]}}}]);return i}(r["default"]);b.global.registerComponent(y,"legend"),t["default"]=y}(e,i,n,X,R)})),t(e(function(t,e){!function(t,e,n,f,i){Object.defineProperty(t,"__esModule",{value:true});var r=a(e),s=a(n),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return h(t)}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return d(t)}function h(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function y(t,e,n){if(e)p(t.prototype,e);if(n)p(t,n);return t}function v(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)g(t,e)}function g(t,e){g=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return g(t,e)}var _=s["default"].Shapes.Line,b=s["default"].Shapes.Rect,x=function(t){v(i,t);y(i,null,[{key:"defaultProps",value:function t(){return{position:{detail:"位置",default:"bottom"},direction:{detail:"方向",default:"h"},height:{detail:"高",default:26},width:{detail:"宽",default:100},color:{detail:"颜色",default:"#008ae6"},range:{detail:"范围设置",propertys:{start:{detail:"开始位置",default:0},end:{detail:"结束位置，默认为null，表示到最后",default:null},max:{detail:"可以外围控制智能在哪个区间拖动",default:null},min:{detail:"最少至少选中了几个数据",default:1}}},left:{detail:"左边按钮",propertys:{eventEnabled:{detail:"是否响应事件",default:true},fillStyle:{detail:"颜色，默认取组件.color",default:null}}},right:{detail:"右边按钮",propertys:{eventEnabled:{detail:"是否响应事件",default:true},fillStyle:{detail:"颜色，默认取组件.color",default:null}}},center:{detail:"中间位置设置",propertys:{eventEnabled:{detail:"是否响应事件",default:true},fillStyle:{detail:"填充色",default:"#000000"},alpha:{detail:"透明度",default:.015}}},bg:{detail:"背景设置",propertys:{enabled:{detail:"是否开启",default:true},fillStyle:{detail:"填充色",default:""},strokeStyle:{detail:"边框色",default:"#e6e6e6"},lineWidth:{detail:"线宽",default:1}}},graphAlpha:{detail:"图形的透明度",default:.6},graphStyle:{detail:"图形的颜色",default:"#dddddd"},underline:{detail:"underline",propertys:{enabled:{detail:"是否开启",default:true},strokeStyle:{detail:"线条色",default:null},lineWidth:{detail:"线宽",default:2}}},btnOut:{detail:"left,right按钮突出的大小",default:6},btnHeight:{detail:"left,right按钮高",default:20,documentation:"left,right按钮的高，不在left，right下面，统一在这个属性里， 以为要强制保持一致"},btnWidth:{detail:"left,right按钮的宽",default:8,documentation:"left,right按钮的宽，不在left，right下面，统一在这个属性里， 以为要强制保持一致"}}}}]);function i(t,e){var n;u(this,i);n=c(this,d(i).call(this,t,e));n.name="dataZoom";n._cloneChart=null;n.count=1;n.dataLen=1;n.axisLayoutType=null;n.dragIng=function(){};n.dragEnd=function(){};n.disPart={};n._btnLeft=null;n._btnRight=null;n._underline=null;n.sprite=new s["default"].Display.Sprite({id:"dataZoom",context:{x:n.pos.x,y:n.pos.y}});n.sprite.noSkip=true;n.dataZoomBg=new s["default"].Display.Sprite({id:"dataZoomBg"});n.dataZoomBtns=new s["default"].Display.Sprite({id:"dataZoomBtns"});n.sprite.addChild(n.dataZoomBg);n.sprite.addChild(n.dataZoomBtns);e.stage.addChild(n.sprite);f._.extend(true,h(n),(0,f.getDefaultProps)(i.defaultProps()),t);if(!("margin"in t)){if(n.position=="bottom"){n.margin.top=10}if(n.position=="top"){n.margin.bottom=10}}n.axis=null;n.layout();return n}y(i,[{key:"layout",value:function t(){var e=this.app;if(this.position=="bottom"){this.pos.y=e.height-(this.height+e.padding.bottom+this.margin.bottom);e.padding.bottom+=this.height+this.margin.top+this.margin.bottom}if(this.position=="top"){this.pos.y=e.padding.top+this.margin.top;e.padding.top+=this.height+this.margin.top+this.margin.bottom}}},{key:"_getCloneChart",value:function t(){var o=this;var l=this.app;var s=l.getCoord();var e=l.constructor;var n=l.el.cloneNode();n.innerHTML="";n.id=l.el.id+"_currclone";n.style.position="absolute";n.style.width=this.width+"px";n.style.height=this.btnHeight+"px";n.style.top="10000px";document.body.appendChild(n);var u=[];f._.each(l.getComponents({name:"graphs"}),function(t){var e=t.enabledField||t.field;if(f._.flatten([e]).length){var n=f._.extend(true,{},t._opt);n.field=e;var i={};if(t.type=="bar"){i={node:{}};if(o.graphStyle){i.node.fillStyle=o.graphStyle}}if(t.type=="line"){i={line:{lineWidth:1},node:{enabled:false},area:{}};if(o.graphStyle){i.line.strokeStyle=o.graphStyle;i.area.fillStyle=o.graphStyle}}var r=s.height||l.el.offsetHeight;var a=o.btnHeight/r||1;if(t.type=="scat"){i={node:{radiusScale:a}};if(o.graphStyle);}u.push(f._.extend(true,n,i,{label:{enabled:false},animation:false}))}});var i={coord:l._opt.coord,graphs:u};if(i.coord.horizontal){delete i.coord.horizontal}i.coord.enabled=false;i.coord.padding=0;var r=new e(n,l._data,i,l.componentModules);r.draw();return{thumbChart:r,cloneEl:n}}},{key:"_setDataZoomOpt",value:function t(){var n=this.app;var e=n.getComponent({name:"coord"}).getSizeAndOrigin();var a=this;f._.extend(true,this,{width:parseInt(e.width),pos:{x:e.origin.x},dragIng:function t(r){var e;if(a.axisLayoutType=="proportion"){e=new o["default"](a,{min:r.start,max:r.end});n.dataFrame.filters["datazoom"]=function(t){var e=t[a.axis.field];var n=a.axis.getValOfPos(r.start);var i=a.axis.getValOfPos(r.end);return e>=n&&e<=i}}else{e=new o["default"](a,{left:n.dataFrame.range.start-r.start,right:r.end-n.dataFrame.range.end});f._.extend(n.dataFrame.range,r)}n.resetData(null,e);n.fire("dataZoomDragIng")},dragEnd:function t(e){n.updateChecked&&n.updateChecked();n.fire("dataZoomDragEnd")}})}},{key:"draw",value:function t(){this._setDataZoomOpt();this._cloneChart=this._getCloneChart();this.axis=this._cloneChart.thumbChart.getComponent({name:"coord"})._xAxis;this.axisLayoutType=this.axis.layoutType;this._computeAttrs();this.widget();this._setLines();this.setZoomBg();this.setPosition()}},{key:"destroy",value:function t(){this.sprite.destroy()}},{key:"reset",value:function t(e,n){!e&&(e={});var i=this.count;var r=this.range.start;var a=this.range.end;e&&f._.extend(true,this,e);this._cloneChart=this._getCloneChart();this._computeAttrs(e);if(i!=this.count||e.range&&(e.range.start!=r||e.range.end!=a)){this.widget();this._setLines()}this.setZoomBg()}},{key:"_computeAttrs",value:function t(){var e=this._cloneChart.thumbChart;this.dataLen=e.dataFrame.length;switch(this.axisLayoutType){case"rule":this.count=this.dataLen-1;break;case"peak":this.count=this.dataLen;break;case"proportion":this.count=this.width;break}if(!this._opt.range||this._opt.range&&!this._opt.range.max||this.range.max>this.count){this.range.max=this.count-1}if(!this._opt.range||this._opt.range&&!this._opt.range.end||this.range.end>this.dataLen-1){this.range.end=this.dataLen-1;if(this.axisLayoutType=="proportion"){this.range.end=this.count-1}}if(!this.direction&&this.position){if(this.position=="left"||this.position=="right"){this.direction="v"}else{this.direction="h"}}this.disPart=this._getDisPart();this.btnHeight=this.height-this.btnOut}},{key:"_getDisPart",value:function t(){var e=this;var n=Math.max(parseInt(e.range.min/2/e.count*e.width),23);var i=parseInt((e.range.max+1)/e.count*e.width);if(this.axisLayoutType=="peak"){n=Math.max(parseInt(e.range.min/e.count*e.width),23)}if(this.axisLayoutType=="proportion"){i=e.width}return{min:n,max:i}}},{key:"_getRangeEnd",value:function t(e){if(e===undefined){e=this.range.end}if(this.axisLayoutType=="peak"){e+=1}if(this.axisLayoutType=="proportion"){e+=1}return e}},{key:"widget",value:function t(){var e=this;var n=function t(){e._setLines.apply(e,arguments)};if(e.bg.enabled){var i={x:0,y:0,width:e.width,height:e.btnHeight,lineWidth:e.bg.lineWidth,strokeStyle:e.bg.strokeStyle,fillStyle:e.bg.fillStyle};if(e._bgRect){e._bgRect.animate(i,{onUpdate:n})}else{e._bgRect=new b({context:i});e.dataZoomBg.addChild(e._bgRect)}}if(e.underline.enabled){var r={start:{x:e.range.start/e.count*e.width+e.btnWidth/2,y:e.btnHeight},end:{x:e._getRangeEnd()/e.count*e.width-e.btnWidth/2,y:e.btnHeight},lineWidth:e.underline.lineWidth,strokeStyle:e.underline.strokeStyle||e.color};if(e._underline){e._underline.animate(r,{onUpdate:n})}else{e._underline=e._addLine(r);e.dataZoomBg.addChild(e._underline)}}var a={x:e.range.start/e.count*e.width,y:-e.btnOut/2+1,width:e.btnWidth,height:e.btnHeight+e.btnOut,fillStyle:e.left.fillStyle||e.color,cursor:e.left.eventEnabled&&"move"};if(e._btnLeft){e._btnLeft.animate(a,{onUpdate:n})}else{e._btnLeft=new b({id:"btnLeft",dragEnabled:e.left.eventEnabled,context:a});e._btnLeft.on("draging",function(t){this.context.y=-e.btnOut/2+1;if(this.context.x<0){this.context.x=0}if(this.context.x>e._btnRight.context.x-e.btnWidth-2){this.context.x=e._btnRight.context.x-e.btnWidth-2}if(e._btnRight.context.x+e.btnWidth-this.context.x>=e.disPart.max){this.context.x=e._btnRight.context.x+e.btnWidth-e.disPart.max}if(e._btnRight.context.x+e.btnWidth-this.context.x<e.disPart.min){this.context.x=e._btnRight.context.x+e.btnWidth-e.disPart.min}e.rangeRect.context.width=e._btnRight.context.x-this.context.x-e.btnWidth;e.rangeRect.context.x=this.context.x+e.btnWidth;e._setRange()});e._btnLeft.on("dragend",function(t){e.dragEnd(e.range)});this.dataZoomBtns.addChild(this._btnLeft)}var o={x:e._getRangeEnd()/e.count*e.width-e.btnWidth,y:-e.btnOut/2+1,width:e.btnWidth,height:e.btnHeight+e.btnOut,fillStyle:e.right.fillStyle||e.color,cursor:e.right.eventEnabled&&"move"};if(e._btnRight){e._btnRight.animate(o,{onUpdate:n})}else{e._btnRight=new b({id:"btnRight",dragEnabled:e.right.eventEnabled,context:o});e._btnRight.on("draging",function(t){this.context.y=-e.btnOut/2+1;if(this.context.x>e.width-e.btnWidth){this.context.x=e.width-e.btnWidth}if(this.context.x+e.btnWidth-e._btnLeft.context.x>=e.disPart.max){this.context.x=e.disPart.max-(e.btnWidth-e._btnLeft.context.x)}if(this.context.x+e.btnWidth-e._btnLeft.context.x<e.disPart.min){this.context.x=e.disPart.min-e.btnWidth+e._btnLeft.context.x}e.rangeRect.context.width=this.context.x-e._btnLeft.context.x-e.btnWidth;e._setRange()});e._btnRight.on("dragend",function(t){e.dragEnd(e.range)});this.dataZoomBtns.addChild(this._btnRight)}var l={x:a.x+e.btnWidth,y:1,width:o.x-a.x-e.btnWidth,height:this.btnHeight-1,fillStyle:e.center.fillStyle,fillAlpha:e.center.alpha,cursor:"move"};if(this.rangeRect){this.rangeRect.animate(l,{onUpdate:n})}else{this.rangeRect=new b({id:"btnCenter",dragEnabled:true,context:l});this.rangeRect.on("draging",function(t){this.context.y=1;if(this.context.x<e.btnWidth){this.context.x=e.btnWidth}if(this.context.x>e.width-this.context.width-e.btnWidth){this.context.x=e.width-this.context.width-e.btnWidth}e._btnLeft.context.x=this.context.x-e.btnWidth;e._btnRight.context.x=this.context.x+this.context.width;e._setRange("btnCenter")});this.rangeRect.on("dragend",function(t){e.dragEnd(e.range)});this.dataZoomBtns.addChild(this.rangeRect)}if(!this.linesLeft){this.linesLeft=new s["default"].Display.Sprite({id:"linesLeft"});if(this.left.eventEnabled){this._addLines({sprite:this.linesLeft})}this.dataZoomBtns.addChild(this.linesLeft)}if(!this.linesRight){this.linesRight=new s["default"].Display.Sprite({id:"linesRight"});if(this.right.eventEnabled){this._addLines({sprite:this.linesRight})}this.dataZoomBtns.addChild(this.linesRight)}if(!this.linesCenter){this.linesCenter=new s["default"].Display.Sprite({id:"linesCenter"});this._addLines({count:3,sprite:this.linesCenter,strokeStyle:this.color});this.dataZoomBtns.addChild(this.linesCenter)}}},{key:"_setRange",value:function t(e){var n=this;var i=n._getRangeEnd();var r=i-n.range.start;var a=n._btnLeft.context.x/n.width*n.count;var o=(n._btnRight.context.x+n.btnWidth)/n.width*n.count;if(this.axisLayoutType=="peak"){a=Math.round(a);o=Math.round(o)}else if(this.axisLayoutType=="rule"){a=parseInt(a);o=parseInt(o)}else{a=parseInt(a);o=parseInt(o)}if(e=="btnCenter"){if(o-a!=r){o=a+r}}if(a!=n.range.start||o!=i){n.range.start=a;if(n.axisLayoutType=="peak"){o-=1}n.range.end=o;n.dragIng(n.range)}n._setLines()}},{key:"_setLines",value:function t(){var e=this;var n=this.linesLeft;var i=this.linesRight;var r=this.linesCenter;var a=this._btnLeft;var o=this._btnRight;var l=this.rangeRect;n.context.x=a.context.x+(a.context.width-n.context.width)/2;n.context.y=a.context.y+(a.context.height-n.context.height)/2;i.context.x=o.context.x+(o.context.width-i.context.width)/2;i.context.y=o.context.y+(o.context.height-i.context.height)/2;r.context.x=l.context.x+(l.context.width-r.context.width)/2;r.context.y=l.context.y+(l.context.height-r.context.height)/2;if(e.underline.enabled){e._underline.context.start.x=n.context.x+e.btnWidth/2;e._underline.context.end.x=i.context.x+e.btnWidth/2}}},{key:"_addLines",value:function t(e){var n=this;var i=e.count||2;var r=e.sprite;var a=e.dis||2;for(var o=0,l=i;o<l;o++){r.addChild(n._addLine({x:o*a,strokeStyle:e.strokeStyle||""}))}r.context.width=o*a-1,r.context.height=6}},{key:"_addLine",value:function t(e){var n=e||{};var i=new _({id:n.id||"",context:{x:n.x||0,y:n.y||0,start:{x:n.start?n.start.x:0,y:n.start?n.start.y:0},end:{x:n.end?n.end.x:0,y:n.end?n.end.y:6},lineWidth:n.lineWidth||1,strokeStyle:n.strokeStyle||"#ffffff"}});return i}},{key:"setZoomBg",value:function t(){if(this.__graphssp){this.__graphssp.destroy()}var e=this._cloneChart.thumbChart.graphsSprite;e.setEventEnable(false);var n=this._cloneChart.thumbChart.getComponent({name:"coord"});e.id=e.id+"_datazoomthumbChartbg";e.context.x=-n.origin.x;e.context.scaleY=this.btnHeight/n.height;e.context.scaleX=this.width/n.width;e.context.globalAlpha=this.graphAlpha;this.dataZoomBg.addChild(e,0);this.__graphssp=e;this._cloneChart.thumbChart.destroy();this._cloneChart.cloneEl.parentNode.removeChild(this._cloneChart.cloneEl)}}]);return i}(r["default"]);f.global.registerComponent(x,"dataZoom"),t["default"]=x}(e,i,n,X,R)})),t(e(function(t,e){!function(t,e,n,f){Object.defineProperty(t,"__esModule",{value:true});var i=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return c(t)}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return u(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=r["default"].Shapes.BrokenLine,g=r["default"].Display.Sprite,_=r["default"].Display.Text,b=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{markTo:{detail:"标准哪个目标字段",default:null},yVal:{detail:"组件的值",default:0,documentation:"可能是个function，均值计算就是个function"},line:{detail:"线的配置",propertys:{strokeStyle:{detail:"线的颜色",default:"#999999"},lineWidth:{detail:"线宽",default:1},lineType:{detail:"线样式",default:"dashed"}}},label:{detail:"文本",propertys:{enabled:{detail:"是否开启",default:false},fontColor:{detail:"文本字体颜色",default:"#999999"},fontSize:{detail:"文本字体大小",default:12},text:{detail:"文本内容",default:null},format:{detail:"文本格式化函数",default:null}}}}}}]);function i(t,e){var n;l(this,i);n=s(this,u(i).call(this,t,e));n.name="markLine";n._yAxis=null;n.line={y:0,list:[]};n._txt=null;n._line=null;n.sprite=new g;n.app.graphsSprite.addChild(n.sprite);f._.extend(true,c(n),(0,f.getDefaultProps)(i.defaultProps()),t);return n}h(i,[{key:"draw",value:function t(){this._calculateProps();this.setPosition();this.widget()}},{key:"_calculateProps",value:function t(){var e=this._opt;var i=e.markTo;var n=this.app.getComponent({name:"coord"});if(i&&f._.indexOf(this.app.dataFrame.fields,i)==-1){return}var r=n._yAxis[0];if(i){f._.each(n._yAxis,function(t,e){var n=f._.flatten([t.field]);if(f._.indexOf(n,i)>=0){r=t}})}if(e.yAxisAlign){r=n._yAxis[e.yAxisAlign=="left"?0:1]}var a;if(e.y!==undefined&&e.y!==null){a=Number(e.y)}else{a=function t(){var e=this.app.dataFrame.getFieldData(i);var n=0;f._.each(e,function(t){if(Number(t)){n+=t}});return n/e.length}}if(!isNaN(a)){r.drawWaterLine(a)}var o="#777";var l=n.getFieldMapOf(i);if(l){o=l.color}var s=e.line&&e.line.strokeStyle||o;var u=e.label&&e.label.fontColor||o;this._yAxis=r;this.width=n.width;this.height=n.height;this.yVal=a;this.pos={x:n.origin.x,y:n.origin.y};this.line.list=[[0,0],[this.width,0]];this.label.fontColor=u;if(s){this.line.strokeStyle=s}}},{key:"widget",value:function t(){var e=this;var n=this._getYPos();var i=new v({id:"line",context:{y:n,pointList:e.line.list,strokeStyle:e.line.strokeStyle,lineWidth:e.line.lineWidth,lineType:e.line.lineType}});e.sprite.addChild(i);e._line=i;if(e.label.enabled){var r=new _(e._getLabel(),{context:e.label});this._txt=r;e.sprite.addChild(r);e._setTxtPos(n)}this.line.y=n}},{key:"reset",value:function t(e){e&&f._.extend(true,this,e);var n=this;var i=this._getYPos();if(i!=this.line.y){this._line.animate({y:i},{duration:300,onUpdate:function t(e){if(n.label.enabled){n._txt.resetText(n._getLabel());n._setTxtPos(e.y)}}})}this._line.context.strokeStyle=this.line.strokeStyle;this.line.y=i}},{key:"_setTxtPos",value:function t(e){var n=this;var i=n._txt;if(this._yAxis.align=="left"){i.context.x=5}else{i.context.x=this.width-i.getTextWidth()-5}if(f._.isNumber(n.label.y)){i.context.y=n.label.y}else{i.context.y=e-i.getTextHeight()}}},{key:"_getYVal",value:function t(e){var e=e||this.yVal;var n=e;if(f._.isFunction(e)){n=e.apply(this)}return n}},{key:"_getYPos",value:function t(){return-this._yAxis.getPosOfVal(this._getYVal())}},{key:"_getLabel",value:function t(){var e;var n=this._getYVal();if(f._.isFunction(this.label.format)){e=this.label.format(n,this)}else{if(f._.isString(this.label.text)){e=this.label.text}else{e=n}}return e}}]);return i}(i["default"]);f.global.registerComponent(b,"markLine"),t["default"]=b}(e,i,n,X)})),t(e(function(t,e){!function(t,e,n,l,a){Object.defineProperty(t,"__esModule",{value:true});var i=r(e),o=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function s(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){s=function t(e){return typeof e}}else{s=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return s(t)}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(e&&(s(e)==="object"||typeof e==="function")){return e}return d(t)}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function p(t,e,n){if(e)h(t.prototype,e);if(n)h(t,n);return t}function y(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)v(t,e)}function v(t,e){v=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return v(t,e)}var g=o["default"].Shapes.Rect,_=o["default"].Shapes.Line,b=function(t){y(r,t);p(r,null,[{key:"defaultProps",value:function t(){return{enabled:{detail:"是否开启Tips",default:true},content:{detail:"自定义tips的内容（html）",default:null},borderRadius:{detail:"tips的边框圆角半径",default:5},strokeStyle:{detail:"tips边框颜色",default:"#ccc"},fillStyle:{detail:"tips背景色",default:"rgba(255,255,255,0.95)"},fontColor:{detail:"tips文本颜色",default:"#999999"},positionOfPoint:{detail:"tips在触发点的位置，默认在右侧",default:"right"},offsetX:{detail:"tips内容到鼠标位置的偏移量x",default:10},offsetY:{detail:"tips内容到鼠标位置的偏移量y",default:10},positionInRange:{detail:"tip的浮层是否限定在画布区域",default:true},pointer:{detail:"触发tips的时候的指针样式",default:"line",documentation:'tips的指针,默认为直线，可选为："line" | "region"(柱状图中一般用region)'},pointerAnim:{detail:"tips移动的时候，指针是否开启动画",default:true}}}}]);function r(t,e){var n;u(this,r);n=f(this,c(r).call(this,t,e));n.name="tips";n.tipDomContainer=n.app.canvax.domView;n.cW=0;n.cH=0;n.dW=0;n.dH=0;n._tipDom=null;n._tipsPointer=null;n.eventInfo=null;n.sprite=null;n.sprite=new o["default"].Display.Sprite({id:"TipSprite"});n.app.stage.addChild(n.sprite);var i=d(n);n.sprite.on("destroy",function(){i._tipDom=null});a._.extend(true,d(n),(0,a.getDefaultProps)(r.defaultProps()),t);return n}p(r,[{key:"show",value:function t(e){if(!this.enabled)return;if(e.eventInfo){this.eventInfo=e.eventInfo;var n=e.target.getStage();if(n){this.cW=n.context.width;this.cH=n.context.height}else{if(e.target.type=="canvax"){this.cW=e.target.width;this.cH=e.target.height}}var i=this._setContent(e);if(i){this._setPosition(e);this.sprite.toFront()}else{this.hide(e)}}this._tipsPointerShow(e)}},{key:"move",value:function t(e){if(!this.enabled)return;if(e.eventInfo){this.eventInfo=e.eventInfo;var n=this._setContent(e);if(n){this._setPosition(e)}else{this._hideDialogTips()}}this._tipsPointerMove(e)}},{key:"hide",value:function t(e){if(!this.enabled)return;this._hideDialogTips(e);this._tipsPointerHide(e)}},{key:"_hideDialogTips",value:function t(){if(this.eventInfo){this.eventInfo=null;this.sprite.removeAllChildren();this._removeContent()}}},{key:"_setPosition",value:function t(e){if(!this.enabled)return;if(!this._tipDom)return;var n=e.pos||e.target.localToGlobal(e.point);var i=this._checkX(n.x+this.offsetX);var r=this._checkY(n.y+this.offsetY);this._tipDom.style.cssText+=";visibility:visible;left:"+i+"px;top:"+r+"px;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;";if(this.positionOfPoint=="left"){this._tipDom.style.left=this._checkX(n.x-this.offsetX-this._tipDom.offsetWidth)+"px"}}},{key:"_creatTipDom",value:function t(e){this._tipDom=document.createElement("div");this._tipDom.className="chart-tips";this._tipDom.style.cssText+="; border-radius:"+this.borderRadius+"px;background:"+this.fillStyle+";border:1px solid "+this.strokeStyle+";visibility:hidden;position:absolute;enabled:inline-block;*enabled:inline;*zoom:1;padding:6px;color:"+this.fontColor+";line-height:1.5";this._tipDom.style.cssText+="; box-shadow:1px 1px 3px "+this.strokeStyle+";";this._tipDom.style.cssText+="; border:none;white-space:nowrap;word-wrap:normal;";this._tipDom.style.cssText+="; text-align:left;";this.tipDomContainer.appendChild(this._tipDom)}},{key:"_removeContent",value:function t(){if(!this._tipDom)return;this.tipDomContainer.removeChild(this._tipDom);this._tipDom=null}},{key:"_setContent",value:function t(e){var n=this._getContent(e);if(!n&&n!==0){return}if(!this._tipDom){this._creatTipDom(e)}this._tipDom.innerHTML=n;this.dW=this._tipDom.offsetWidth;this.dH=this._tipDom.offsetHeight;return n}},{key:"_getContent",value:function t(e){var n;if(this.content){n=a._.isFunction(this.content)?this.content(e.eventInfo,e):this.content}else{n=this._getDefaultContent(e.eventInfo)}return n}},{key:"_getDefaultContent",value:function t(e){var o="";if(!e.nodes.length){return o}if(e.title!==undefined&&e.title!==null&&e.title!==""){o+="<div style='font-size:14px;border-bottom:1px solid #f0f0f0;padding:4px;margin-bottom:6px;'>"+e.title+"</div>"}a._.each(e.nodes,function(t,e){var n=t.color||t.fillStyle||t.strokeStyle;var i=t.name||t.field||t.content;var r=s(t.value)=="object"?JSON.stringify(t.value):(0,l.numAddSymbol)(t.value);var a=t.value||t.value==0;o+="<div style='line-height:1.5;font-size:12px;padding:0 4px;'>";if(n){o+="<span style='background:"+n+";margin-right:8px;margin-top:7px;float:left;width:8px;height:8px;border-radius:4px;overflow:hidden;font-size:0;'></span>"}if(i){o+="<span style='margin-right:5px;'>"+i;a&&(o+="：");o+="</span>"}a&&(o+=r);o+="</div>"});return o}},{key:"_checkX",value:function t(e){if(this.positionInRange){var n=this.dW+2;if(e<0){e=0}if(e+n>this.cW){e=this.cW-n}}return e}},{key:"_checkY",value:function t(e){if(this.positionInRange){var n=this.dH+2;if(e<0){e=0}if(e+n>this.cH){e=this.cH-n}}return e}},{key:"_tipsPointerShow",value:function t(e){if(!e.eventInfo||!e.eventInfo.xAxis){return}var n=this.app.getComponent({name:"coord"});if(!n||n.type!="rect")return;if(!this.pointer)return;var i=this._tipsPointer;var r=n.origin.y-n.height;var a=0;if(this.pointer=="line"){a=n.origin.x+e.eventInfo.xAxis.x}if(this.pointer=="region"){var o=n._xAxis.getCellLengthOfPos(e.eventInfo.xAxis.x);a=n.origin.x+e.eventInfo.xAxis.x-o/2;if(e.eventInfo.xAxis.ind<0){a=n.origin.x}}if(!i){if(this.pointer=="line"){i=new _({context:{x:a,y:r,start:{x:0,y:0},end:{x:0,y:n.height},lineWidth:1,strokeStyle:"#cccccc"}})}if(this.pointer=="region"){var o=n._xAxis.getCellLengthOfPos(a);i=new g({context:{width:o,height:n.height,x:a,y:r,fillStyle:"#cccccc",globalAlpha:.3}})}this.app.graphsSprite.addChild(i,0);this._tipsPointer=i}else{if(this.pointerAnim&&n._xAxis.layoutType!="proportion"){if(i.__animation){i.__animation.stop()}i.__animation=i.animate({x:a,y:r},{duration:200})}else{i.context.x=a;i.context.y=r}}}},{key:"_tipsPointerHide",value:function t(e){if(!e.eventInfo||!e.eventInfo.xAxis){return}var n=this.app.getComponent({name:"coord"});if(!n||n.type!="rect")return;if(!this.pointer||!this._tipsPointer)return;this._tipsPointer.destroy();this._tipsPointer=null}},{key:"_tipsPointerMove",value:function t(e){if(!e.eventInfo||!e.eventInfo.xAxis){return}var n=this.app.getComponent({name:"coord"});if(!n||n.type!="rect")return;if(!this.pointer||!this._tipsPointer)return;var i=this._tipsPointer;var r=n.origin.x+e.eventInfo.xAxis.x;if(this.pointer=="region"){var a=n._xAxis.getCellLengthOfPos(e.eventInfo.xAxis.x);r=n.origin.x+e.eventInfo.xAxis.x-a/2;if(e.eventInfo.xAxis.ind<0){r=n.origin.x}}var o=n.origin.y-n.height;if(r==i.__targetX){return}if(this.pointerAnim&&n._xAxis.layoutType!="proportion"){if(i.__animation){i.__animation.stop()}i.__targetX=r;i.__animation=i.animate({x:r,y:o},{duration:200,onComplete:function t(){delete i.__targetX;delete i.__animation}})}else{i.context.x=r;i.context.y=o}}}]);return r}(i["default"]);a.global.registerComponent(b,"tips"),t["default"]=b}(e,i,n,o,X)})),t(e(function(t,e){!function(t,e,n,o){Object.defineProperty(t,"__esModule",{value:true});var i=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=r["default"].Shapes.Line,g=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置",default:null},barField:{detail:"这个bartgi组件对应的bar Graph 的field",default:null},yAxisAlign:{detail:"这个bartgi组件回到到哪个y轴",default:"left"},standardVal:{detail:"tgi标准线",default:100},line:{detail:"bar对应的tgi线配置",propertys:{lineWidth:{detail:"线宽",default:3},strokeStyle:{detail:"线颜色",default:function t(e,n){if(e>=this.standardVal){return"#43cbb5"}else{return"#ff6060"}}}}}}}}]);function i(t,e){var n;s(this,i);n=u(this,f(i).call(this,t,e));n.name="barTgi";n.data=null;n.barDatas=null;n._yAxis=null;n.sprite=null;n.pos={x:0,y:0};o._.extend(true,c(n),(0,o.getDefaultProps)(i.defaultProps()),t);n._yAxis=n.app.getComponent({name:"coord"})._yAxis[n.yAxisAlign=="left"?0:1];n.sprite=new r["default"].Display.Sprite;n.app.graphsSprite.addChild(n.sprite);return n}h(i,[{key:"reset",value:function t(e){o._.extend(true,this,e);this.barDatas=null;this.data=null;this.sprite.removeAllChildren();this.draw()}},{key:"draw",value:function t(){var a=this;var e=this.app.getComponent({name:"coord"});this.pos={x:e.origin.x,y:e.origin.y};this.setPosition();o._.each(a.app.getComponents({name:"graphs"}),function(t){if(t.type=="bar"&&t.data[a.barField]){a.barDatas=t.data[a.barField];return false}});this.data=o._.flatten(a.app.dataFrame.getDataOrg(a.field));if(!this.barDatas){return}o._.each(this.data,function(t,e){var n=-a._yAxis.getPosOfVal(t);var i=a.barDatas[e];var r=new v({context:{start:{x:i.x,y:n},end:{x:i.x+i.width,y:n},lineWidth:2,strokeStyle:a._getProp(a.line.strokeStyle,t,e)}});a.sprite.addChild(r)})}},{key:"_getProp",value:function t(e,n,i){var r=e;if(o._.isFunction(e)){r=e.apply(this,[n,i])}return r}}]);return i}(i["default"]);o.global.registerComponent(g,"barTgi"),t["default"]=g}(e,i,n,X)})),t(e(function(t,e){!function(t,e,n,s){Object.defineProperty(t,"__esModule",{value:true});var i=r(e),u=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{field:{detail:"字段配置",default:null},barField:{detail:"这个guide对应的bar Graph 的field",default:null},yAxisAlign:{detail:"这个guide组件回到到哪个y轴",default:"left"},node:{detail:"单个节点配置",propertys:{shapeType:{detail:"节点绘制的图形类型",default:"circle"},lineWidth:{detail:"图表描边线宽",default:3},radius:{detail:"图形半径",default:6},fillStyle:{detail:"填充色",default:"#19dea1"},strokeStyle:{detail:"描边色",default:"#fff"}}},label:{detail:"文本配置",propertys:{fontSize:{detail:"字体大小",default:12},fontColor:{detail:"字体颜色",default:"#19dea1"},verticalAlign:{detail:"垂直对齐方式",default:"bottom"},textAlign:{detail:"水平对齐方式",default:"center"},strokeStyle:{detail:"文本描边颜色",default:"#fff"},lineWidth:{detail:"文本描边线宽",default:0},format:{detail:"文本格式处理函数",default:null}}}}}}]);function i(t,e){var n;o(this,i);n=l(this,f(i).call(this,t,e));n.name="barGuide";n.data=null;n.barDatas=null;n._yAxis=null;n.sprite=null;s._.extend(true,c(n),(0,s.getDefaultProps)(i.defaultProps()),t);n._yAxis=n.app.getComponent({name:"coord"})._yAxis[n.yAxisAlign=="left"?0:1];n.sprite=new u["default"].Display.Sprite;n.app.graphsSprite.addChild(n.sprite);return n}h(i,[{key:"reset",value:function t(e){s._.extend(true,this,e);this.barDatas=null;this.data=null;this.sprite.removeAllChildren();this.draw()}},{key:"draw",value:function t(){var l=this;var e=this.app.getComponent({name:"coord"});this.pos={x:e.origin.x,y:e.origin.y};this.setPosition();s._.each(l.app.getComponents({name:"graphs"}),function(t){if(t.type=="bar"&&t.data[l.barField]){l.barDatas=t.data[l.barField];return false}});this.data=s._.flatten(l.app.dataFrame.getDataOrg(l.field));if(!this.barDatas){return}s._.each(this.data,function(t,e){var n=-l._yAxis.getPosOfVal(t);var i=l.barDatas[e];var r=new u["default"].Shapes.Circle({context:{x:i.x+i.width/2,y:n,r:l.node.radius,fillStyle:l.node.fillStyle,strokeStyle:l.node.strokeStyle,lineWidth:l.node.lineWidth}});var a=t;if(s._.isFunction(l.label.format)){a=l.label.format(t,i)}var o=new u["default"].Display.Text(a,{context:{x:i.x+i.width/2,y:n-l.node.radius-1,fillStyle:l.label.fontColor,lineWidth:l.label.lineWidth,strokeStyle:l.label.strokeStyle,fontSize:l.label.fontSize,textAlign:l.label.textAlign,textBaseline:l.label.verticalAlign}});l.sprite.addChild(r);l.sprite.addChild(o)})}},{key:"_getProp",value:function t(e,n,i){var r=e;if(s._.isFunction(e)){r=e.apply(this,[n,i])}return r}}]);return i}(i["default"]);s.global.registerComponent(v,"barGuide"),t["default"]=v}(e,i,n,X)})),t(e(function(t,e){!function(t,e,r){var n;function i(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function s(t,e,n){if(e)l(t.prototype,e);if(n)l(t,n);return t}function u(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return f(t)}function f(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return c(t)}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}Object.defineProperty(t,"__esModule",{value:true});var p=function(t){d(i,t);function i(t,e){var n;o(this,i);n=u(this,c(i).call(this,t,e));n.name="theme";n.colors=t||[];return n}s(i,[{key:"set",value:function t(e){this.colors=e;return this.colors}},{key:"get",value:function t(e){var n=this.colors;if(!r._.isArray(n)){n=[n]}return n}},{key:"mergeTo",value:function t(e){if(!e){e=[]}for(var n=0,i=this.colors.length;n<i;n++){if(e[n]){e[n]=this.colors[n]}else{e.push(this.colors[n])}}return e}}]);return i}(i(e)["default"]);r.global.registerComponent(p,"theme"),t["default"]=p}(e,i,X)})),t(e(function(t,e){!function(t,e,r,n){Object.defineProperty(t,"__esModule",{value:true});var u=a(e),i;function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function l(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function s(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{text:{detail:"水印内容",default:"chartx"},fontSize:{detail:"字体大小",default:20},fontColor:{detail:"水印颜色",default:"#cccccc"},alpha:{detail:"水印透明度",default:.2},rotation:{detail:"水印旋转角度",default:45}}}}]);function i(t,e){var n;l(this,i);n=s(this,f(i).call(this,t,e));n.name="waterMark";n.width=n.app.width;n.height=n.app.height;r._.extend(true,c(n),(0,r.getDefaultProps)(i.defaultProps()),t);n.spripte=new u["default"].Display.Sprite({id:"watermark"});n.app.stage.addChild(n.spripte);n.draw();return n}h(i,[{key:"draw",value:function t(){var e=new u["default"].Display.Text(this.text,{context:{fontSize:this.fontSize,fillStyle:this.fontColor}});var n=e.getTextWidth();var i=e.getTextHeight();var r=parseInt(this.height/(i*5))+1;var a=parseInt(this.width/(n*1.5))+1;for(var o=0;o<r;o++){for(var l=0;l<a;l++){var s=new u["default"].Display.Text(this.text,{context:{rotation:this.rotation,fontSize:this.fontSize,fillStyle:this.fontColor,globalAlpha:this.alpha}});s.context.x=n*1.5*l+n*.25;s.context.y=i*5*o;this.spripte.addChild(s)}}}}]);return i}(a(n)["default"]);r.global.registerComponent(v,"waterMark"),t["default"]=v}(e,n,X,i)})),t(e(function(t,e){!function(t,e,n,r){Object.defineProperty(t,"__esModule",{value:true});var i=o(e),a=o(n);function o(t){return t&&t.__esModule?t:{default:t}}function l(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){l=function t(e){return typeof e}}else{l=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return l(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(e&&(l(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=a["default"].Shapes.Line,g=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{aimPoint:{detail:"准心位置",propertys:{x:{detail:"x",default:0},y:{detail:"y",default:0}}},line:{detail:"线配置",propertys:{strokeStyle:{detail:"线颜色",default:"#cccccc"},lineWidth:{detail:"线宽",default:1},lineType:{detail:"线样式类型",default:"solid"}}}}}}]);function i(t,e){var n;s(this,i);n=u(this,f(i).call(this,t,e));n.name="cross";n.width=t.width||0;n.height=t.height||0;n.x=null;n.y=null;n._hLine=null;n._vLine=null;r._.extend(true,c(n),(0,r.getDefaultProps)(i.defaultProps()),t);n._yAxis=n.app.getComponent({name:"coord"})._yAxis[n.yAxisAlign=="left"?0:1];n.sprite=new a["default"].Display.Sprite;n.app.graphsSprite.addChild(n.sprite);return n}h(i,[{key:"draw",value:function t(){var e=this;var n=this.app.getComponent({name:"coord"});this.pos={x:n.origin.x,y:n.origin.y};this.width=n.width;this.height=n.height;this.aimPoint={x:this.width/2,y:this.height/2};this.setPosition();e._hLine=new v({context:{start:{x:0,y:-this.aimPoint.y},end:{x:e.width,y:-this.aimPoint.y},strokeStyle:e.line.strokeStyle,lineWidth:e.line.lineWidth,lineType:e.line.lineType}});e.sprite.addChild(e._hLine);e._vLine=new v({context:{start:{x:this.aimPoint.x,y:0},end:{x:this.aimPoint.x,y:-e.height},strokeStyle:e.line.strokeStyle,lineWidth:e.line.lineWidth,lineType:e.line.lineType}});e.sprite.addChild(e._vLine)}}]);return i}(i["default"]);r.global.registerComponent(g,"cross"),t["default"]=g}(e,i,n,X)})),t(e(function(t,e){!function(t,e,n,v){Object.defineProperty(t,"__esModule",{value:true});var i=r(e),g=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){a=function t(e){return typeof e}}else{a=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return a(t)}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(t,e){if(e&&(a(e)==="object"||typeof e==="function")){return e}return u(t)}function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return s(t)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function c(t,e,n){if(e)f(t.prototype,e);if(n)f(t,n);return t}function d(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)h(t,e)}function h(t,e){h=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return h(t,e)}var p=function(t){d(i,t);c(i,null,[{key:"defaultProps",value:function t(){return{lineField:{detail:"对应的line字段",default:null},style:{detail:"默认色",default:"#3995ff"},fillStyle:{detail:"节点填充色",default:"#ffffff"},lineWidth:{detail:"线宽",default:2},radius:{detail:"圆点半径",default:6},timeFontSize:{detail:"时间文本大小",default:14},timeFontColor:{detail:"时间文本颜色",default:"#606060"},listFontSize:{detail:"列表信息文本大小",default:12}}}}]);function i(t,e){var n;o(this,i);n=l(this,s(i).call(this,t,e));n.name="lineSchedu";v._.extend(true,u(n),(0,v.getDefaultProps)(i.defaultProps()),t);n.lineDatas=null;n.sprite=new g["default"].Display.Sprite;n.app.graphsSprite.addChild(n.sprite);return n}c(i,[{key:"reset",value:function t(e){v._.extend(true,this,e);this.lineDatas=null;this.sprite.removeAllChildren();this.draw()}},{key:"draw",value:function t(){var e=this;var n=this.app.getComponent({name:"coord"});this.pos={x:n.origin.x,y:n.origin.y};this.setPosition();var i=e.app.getComponent({name:"graphs",type:"line",field:e.lineField});e.lineDatas=i.data[e.lineField].data;var r=this.app.getComponent({name:"coord"}).getAxis({type:"xAxis"}).getIndexOfVal(this.time);if(r==-1){return}var a=this.lineDatas[r];if(a.y!=undefined){var o=e._getNodeY(a,n);var l=a.x;var s=new g["default"].Display.Sprite({context:{x:l-20}});this.sprite.addChild(s);var u=0;var f=new g["default"].Display.Text(e.time,{context:{fillStyle:this.timeFontColor||this.style,fontSize:this.timeFontSize}});s.addChild(f);var u=f.getTextHeight();var c=f.getTextWidth();var d=new g["default"].Display.Text(v._.flatten([e.list]).join("\n"),{context:{y:u,fillStyle:this.listFontColor||this.style,fontSize:this.listFontSize}});s.addChild(d);u+=d.getTextHeight();c=Math.max(c,d.getTextWidth());if(c+l-20>n.width+e.app.padding.right){s.context.x=n.width+e.app.padding.right;f.context.textAlign="right";d.context.textAlign="right"}var h=0;if(e.status=="online"){h=o-(this.radius+3)-u;if(Math.abs(h)>n.origin.y){h=-n.origin.y;o=-(n.origin.y-(this.radius+3)-u)}}else{h=o+(this.radius+3);if(h+u>0){h=-u;o=-(this.radius+3)-u}}s.context.y=h;var p=new g["default"].Shapes.BrokenLine({context:{pointList:[[l,o],[l,a.y]],strokeStyle:e.style,lineWidth:e.lineWidth}});e.sprite.addChild(p);var y=new g["default"].Shapes.Circle({context:{x:l,y:o,r:e.radius,fillStyle:e.fillStyle,strokeStyle:e.style,lineWidth:e.lineWidth}});e.sprite.addChild(y)}}},{key:"_getNodeY",value:function t(e,n){var i=this.app.height;var r=n.height;var a=e.y;if(this.status=="online"){a-=Math.min(50,(i-Math.abs(a))*.3)}else{a+=Math.min(50,Math.abs(a)*.3)}return a}}]);return i}(i["default"]);v.global.registerComponent(p,"lineSchedu"),t["default"]=p}(e,i,n,X)})),t(e(function(t,e){!function(t,e,n,l){Object.defineProperty(t,"__esModule",{value:true});var i=a(e),r=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}function s(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(e&&(o(e)==="object"||typeof e==="function")){return e}return c(t)}function f(t){f=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return f(t)}function c(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,i.key,i)}}function h(t,e,n){if(e)d(t.prototype,e);if(n)d(t,n);return t}function p(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)y(t,e)}function y(t,e){y=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return y(t,e)}var v=r["default"].Shapes.Line,g=r["default"].Shapes.Circle,_=r["default"].Display.Text,b=function(t){p(i,t);h(i,null,[{key:"defaultProps",value:function t(){return{xVal:{detail:"x的value值",default:null},x:{detail:"x的像素值",default:null},markTo:{detail:"标准哪个目标字段",documentation:"如果设置了这个字段，那么line的起点将是这个graphs上的node节点",default:null},line:{detail:"线的配置",propertys:{enabled:{detail:"是否开启",default:true},lineWidth:{detail:"线宽",default:2},strokeStyle:{detail:"线的颜色",default:"#d5d5d5"},lineType:{detail:"线的样式，虚线(dashed)实线(solid)",default:"solid"},startY:{detail:"startY",default:0},endY:{detail:"startY",default:null}}},node:{detail:"数据图形节点",propertys:{enabled:{detail:"是否开启",default:true},radius:{detail:"节点半径",default:5},fillStyle:{detail:"节点图形的背景色",default:"#ffffff"},strokeStyle:{detail:"节点图形的描边色，默认和line.strokeStyle保持一致",default:null},lineWidth:{detail:"节点图形边宽大小",default:2}}},label:{detail:"文本",propertys:{enabled:{detail:"是否开启",default:false},fontColor:{detail:"文本字体颜色",default:null},fontSize:{detail:"文本字体大小",default:12},text:{detail:"文本内容",documentation:"可以是函数",default:null},format:{detail:"文本格式化函数",default:null}}}}}}]);function i(t,e){var n;s(this,i);n=u(this,f(i).call(this,t,e));n.name="markcloumn";l._.extend(true,c(n),(0,l.getDefaultProps)(i.defaultProps()),t);n.sprite=new r["default"].Display.Sprite;n.app.graphsSprite.addChild(n.sprite);n._line=null;n._lineSp=new r["default"].Display.Sprite;n.sprite.addChild(n._lineSp);n.nodes=[];n._nodes=new r["default"].Display.Sprite;n.sprite.addChild(n._nodes);n._labels=new r["default"].Display.Sprite;n.sprite.addChild(n._labels);return n}h(i,[{key:"draw",value:function t(e){!e&&(e={});this.width=e.width;this.height=e.height;this.origin=e.origin;this.sprite.context.x=this.origin.x;this.sprite.context.y=this.origin.y;this._widget()}},{key:"reset",value:function t(e){e&&l._.extend(true,this,e);this._widget()}},{key:"_widget",value:function t(){var i=this;var e=this.app.getComponent({name:"coord"});var n=e._xAxis;var r;if(this.xVal!=null){r=n.getNodeInfoOfVal(this.xVal)}if(this.x!=null){r=n.getNodeInfoOfPos(this.x)}if(!r){return}i.nodes=[];i.on("complete",function(){i._drawLine(r);i._drawNodes(r);i._drawLabels(r)});var a=0;var o=this.app.getGraphs();l._.each(o,function(n){function t(){a++;if(i.markTo&&l._.flatten([n.field]).indexOf(i.markTo)==-1);else{var t=n.getNodesOfPos(r.x);if(i.markTo){var e=l._.find(t,function(t){return t.field==i.markTo});e&&(i.nodes=[e])}else{i.nodes=i.nodes.concat(t)}}if(a==o.length){i.fire("complete")}}if(n.inited){t()}else{n.on("complete",function(){t()})}})}},{key:"_drawLine",value:function t(e){var n=this;if(!n.line.enabled)return;var i=l._.extend(true,{x:parseInt(e.x),start:{x:0,y:0},end:{x:0,y:-n.height},lineWidth:1,strokeStyle:"#cccccc"},this.line);if(n.line.endY!=null){var r=0;if(l._.isNumber(n.line.endY)){r=n.line.endY}if(n.line.endY=="auto"){l._.each(n.nodes,function(t){r=Math.min(t.y)})}i.end.y=r}if(this._line){l._.extend(this._line.context,i)}else{this._line=new v({context:i});this._lineSp.addChild(this._line);this._line.on(l.event.types.get(),function(t){t.eventInfo={xAxis:{},nodes:n.nodes};if(n.xVal!=null){t.eventInfo.xAxis.value=n.xVal;t.eventInfo.xAxis.text=n.xVal+"";t.eventInfo.title=n.xVal+""}n.app.fire(t.type,t)})}}},{key:"_drawNodes",value:function t(){var i=this;if(!i.node.enabled)return;i._nodes.removeAllChildren();l._.each(i.nodes,function(e){var t=l._.extend({x:e.x,y:e.y,cursor:"pointer",r:i.node.radius,lineWidth:i.node.lineWidth||e.lineWidth,strokeStyle:i.node.strokeStyle||e.color,fillStyle:i.node.fillStyle||e.fillStyle});var n=new g({context:t});n.nodeData=e;n.on(l.event.types.get(),function(t){t.eventInfo={xAxis:{},nodes:[e]};if(i.xVal!=null){t.eventInfo.xAxis.value=i.xVal;t.eventInfo.xAxis.text=i.xVal+"";t.eventInfo.title=i.xVal+""}i.app.fire(t.type,t)});i._nodes.addChild(n)})}},{key:"_drawLabels",value:function t(){var r=this;if(!r.node.enabled)return;r._labels.removeAllChildren();l._.each(r.nodes,function(t){var e={x:t.x,y:t.y-r.node.radius-2,fillStyle:r.label.fontColor||t.color,fontSize:r.label.fontSize,textAlign:"center",textBaseline:"bottom"};var n=r.label.text;if(l._.isFunction(n)){n=n.apply(r,[t])}if(!n)return;var i=new _(n,{context:e});r._labels.addChild(i);if(i.localToGlobal().x+i.getTextWidth()/2>r.app.width){i.context.x=r.app.width-i.getTextWidth()/2-i.parent.localToGlobal().x}})}}]);return i}(i["default"]);l.global.registerComponent(b,"markcloumn"),t["default"]=b}(e,i,n,X)})),t(e(function(t,e){!function(t,e){Object.defineProperty(t,"__esModule",{value:true});var n=[];if(n&&n.length){e.global.setGlobalTheme(n)}var i={version:"1.0.167",options:{}};for(var r in e.global){i[r]=e.global[r]}t["default"]=i}(e,X)}))}();