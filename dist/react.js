"use strict";!function(t,e){if("function"==typeof define&&define.amd)define(["exports","react","./index"],e);else if("undefined"!=typeof exports)e(exports,require("react"),require("./index"));else{var r={};e(r,t.react,t.index),t.undefined=r}}(void 0,function(t,e,r){Object.defineProperty(t,"__esModule",{value:!0});var i=o(e),n=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h,p,l,d,y,v,b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(O,i.default.Component),h=O,(p=[{key:"componentDidUpdate",value:function(t){var e=this.myRef.current,r=this.getChartOptions(this.props),i=this.props.data;if(!this.chart)return"{}"!==JSON.stringify(r)&&void this.createChart(e,i,r);t.width==this.props.width&&t.height==this.props.height&&t.className==this.props.className||this.chart&&this.chart.resize();var n=JSON.stringify(this.getChartOptions(t))!=JSON.stringify(r),o=JSON.stringify(i)!=JSON.stringify(t.data);n?(this.chartOptions=r,this.chart&&this.chart.reset(r,i)):o&&this.chart&&this.chart.resetData(i)}},{key:"render",value:function(){var t=this.getStyles();return i.default.createElement("div",{ref:this.myRef,className:"chartx-react "+(this.props.className||""),style:t})}},{key:"componentDidMount",value:function(){var t=this.myRef.current,e=this.props.data;if("{}"===JSON.stringify(this.chartOptions))return!1;this.createChart(t,e,this.chartOptions)}},{key:"createChart",value:function(t,e,r){this.chart=n.default.create(t,e,r),n.default._registWindowOnResize||(window.addEventListener("resize",function(t){n.default.resize()},!1),n.default._registWindowOnResize=!0)}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.destroy()}},{key:"getChartOptions",value:function(t){var e=t?t.options:this.props.options,r=t?t.variables:this.props.variables,i=t?t.data:this.props.data;return this.props.chartId&&(e=n.default.getOptions(this.props.chartId,e,i,r)),e}},{key:"getStyles",value:function(){var t={};return this.setSize("width",t),this.setSize("height",t),t}},{key:"setSize",value:function(t,e){if(null!=this.props[t]){var r=this.props[t];isNaN(r)?"string"==typeof r&&(e[t]=r):e[t]=r<1?100*r+"%":r+"px"}}},{key:"getOptions",value:function(t){return n.default.getOptions(t)}}])&&a(h.prototype,p),void(l&&a(h,l)),O);function O(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,O),(e=u(this,c(O).call(this,t))).myRef=i.default.createRef(),e.chart=null,e.chartOptions=e.getChartOptions(),e}v={chartId:null,width:null,height:null,className:"",options:{},data:[],variables:{}},(y="defaultProps")in(d=b)?Object.defineProperty(d,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):d[y]=v,t.default=b});