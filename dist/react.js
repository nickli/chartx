"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_react=_interopRequireDefault(require("react")),_index=_interopRequireDefault(require("./index")),chartxReact=function(e){function r(e){var t;return(0,_classCallCheck2.default)(this,r),(t=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(r).call(this,e))).myRef=_react.default.createRef(),t.chart=null,t.chartOptions=t.getChartOptions(),t}return(0,_inherits2.default)(r,e),(0,_createClass2.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.myRef.current,r=this.getChartOptions(this.props),i=this.props.data;if(!this.chart)return"{}"!==JSON.stringify(r)&&void this.createChart(t,i,r);e.width==this.props.width&&e.height==this.props.height&&e.className==this.props.className||this.chart&&this.chart.resize();var a=JSON.stringify(this.getChartOptions(e))!=JSON.stringify(r),s=JSON.stringify(i)!=JSON.stringify(e.data);a?(this.chartOptions=r,this.chart&&this.chart.reset(r,i)):s&&this.chart&&this.chart.resetData(i)}},{key:"render",value:function(){var e=this.getStyles();return _react.default.createElement("div",{ref:this.myRef,className:"chartx-react "+(this.props.className||""),style:e})}},{key:"componentDidMount",value:function(){var e=this.myRef.current,t=this.props.data;if("{}"===JSON.stringify(this.chartOptions))return!1;this.createChart(e,t,this.chartOptions)}},{key:"createChart",value:function(e,t,r){this.chart=_index.default.create(e,t,r),_index.default._registWindowOnResize||(window.addEventListener("resize",function(e){_index.default.resize()},!1),_index.default._registWindowOnResize=!0)}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.destroy()}},{key:"getChartOptions",value:function(e){var t=e?e.options:this.props.options,r=e?e.variables:this.props.variables,i=e?e.data:this.props.data;return this.props.chartId&&(t=_index.default.getOptions(this.props.chartId,t,i,r)),t}},{key:"getStyles",value:function(){var e={};return this.setSize("width",e),this.setSize("height",e),e}},{key:"setSize",value:function(e,t){if(null!=this.props[e]){var r=this.props[e];isNaN(r)?"string"==typeof r&&(t[e]=r):t[e]=r<1?100*r+"%":r+"px"}}},{key:"getOptions",value:function(e){return _index.default.getOptions(e)}}]),r}(_react.default.Component);(0,_defineProperty2.default)(chartxReact,"defaultProps",{chartId:null,width:null,height:null,className:"",options:{},data:[],variables:{}});var _default=chartxReact;exports.default=_default;