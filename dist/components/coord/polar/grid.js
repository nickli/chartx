"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_canvax=_interopRequireDefault(require("canvax")),_mmvis=require("mmvis"),Line=_canvax.default.Shapes.Line,Circle=_canvax.default.Shapes.Circle,Polygon=_canvax.default.Shapes.Polygon,polarGrid=function(e){function l(e,t){var i;return(0,_classCallCheck2.default)(this,l),(i=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(l).call(this,e,t))).width=0,i.height=0,i.app=t,i.pos={x:0,y:0},i.dataSection=[],i.sprite=null,i.induce=null,_mmvis._.extend(!0,(0,_assertThisInitialized2.default)(i),(0,_mmvis.getDefaultProps)(l.defaultProps()),e),i.init(e),i}return(0,_inherits2.default)(l,e),(0,_createClass2.default)(l,null,[{key:"defaultProps",value:function(){return{enabled:{detail:"是否开启grid",default:!1},ring:{detail:"环背景线",propertys:{shapeType:{detail:"线的图形样式，默认poly，可选circle",default:"poly"},lineType:{detail:"线条样式，sold实线，dashed虚线",default:"sold"},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#e5e5e5"},fillStyle:{detail:"环填充色,支持函数配置",default:null},fillAlpha:{detail:"环填充的透明度",default:.5}}},ray:{detail:"射线",propertys:{enabled:{detail:"是否开启",default:!0},lineWidth:{detail:"线宽",default:1},strokeStyle:{detail:"线颜色",default:"#e5e5e5"}}}}}}]),(0,_createClass2.default)(l,[{key:"init",value:function(){this.sprite=new _canvax.default.Display.Sprite}},{key:"setX",value:function(e){this.sprite.context.x=e}},{key:"setY",value:function(e){this.sprite.context.y=e}},{key:"draw",value:function(e){_mmvis._.extend(!0,this,e),this._widget(),this.setX(this.pos.x),this.setY(this.pos.y)}},{key:"clean",value:function(){this.sprite.removeAllChildren()}},{key:"reset",value:function(){}},{key:"_widget",value:function(){var s=this;_mmvis._.each(this.dataSection,function(e,t){if(e){var i,l=s.app.getROfNum(e),r=s.app.getPointsOfR(l),a={lineWidth:s.ring.lineWidth,strokeStyle:s._getStyle(s.ring.strokeStyle,t-1),fillStyle:s._getStyle(s.ring.fillStyle,t-1),fillAlpha:s.ring.fillAlpha},n=Circle;i="circle"==s.ring.shapeType?(a.r=l,new n({context:a})):(a.pointList=[],_mmvis._.each(r,function(e,t){t<r.length&&a.pointList.push([e.x,e.y])}),new(n=Polygon)({context:a})),s.sprite.addChildAt(i,0),t==s.dataSection.length-1&&(a.fillAlpha=0,a.fillStyle="#ffffff",s.induce=new n({context:a}),s.sprite.addChild(s.induce));_mmvis._.each(r,function(e){var t=new Line({context:{end:e,lineWidth:s.ring.lineWidth,strokeStyle:s.ring.strokeStyle}});s.sprite.addChild(t)})}})}},{key:"_getStyle",value:function(e,t){return _mmvis._.isArray(e)?e[t%e.length]:e}}]),l}(_mmvis.event.Dispatcher);exports.default=polarGrid;