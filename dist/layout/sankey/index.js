"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _mmvis=require("mmvis");function _default(){var t={},e=24,i=8,f=[1,1],c=[],a=function(n,t){return n.y-t.y},s=[];function l(n,t){var r,e=0,u=n.length,o=-1;if(1===arguments.length)for(;++o<u;)isNaN(r=+n[o])||(e+=r);else for(;++o<u;)isNaN(r=+t.call(n,n[o],o))||(e+=r);return e}function h(n,t){var r,e,u=-1,o=n.length;if(1===arguments.length){for(;++u<o&&(null==(r=n[u])||r!=r);)r=void 0;for(;++u<o;)null!=(e=n[u])&&e<r&&(r=e)}else{for(;++u<o&&(null==(r=t.call(n,n[u],u))||r!=r);)r=void 0;for(;++u<o;)null!=(e=t.call(n,n[u],u))&&e<r&&(r=e)}return r}t.nodeWidth=function(n){return arguments.length?(e=+n,t):e},t.nodeSort=function(n){return arguments.length?(a=n,t):a},t.nodePadding=function(n){return arguments.length?(i=+n,t):i},t.nodes=function(n){return arguments.length?(c=n,t):c},t.links=function(n){return arguments.length?(s=n,t):s},t.size=function(n){return arguments.length?(f=n,t):f},t.layout=function(n){return c.forEach(function(n){n.sourceLinks=[],n.targetLinks=[]}),s.forEach(function(n){var t=n.source,r=n.target;"number"==typeof t&&(t=n.source=c[n.source]),"number"==typeof r&&(r=n.target=c[n.target]),t.sourceLinks.push(n),r.targetLinks.push(n)}),c.forEach(function(n){n.value=Math.max(l(n.sourceLinks,E),l(n.targetLinks,E))}),function(){var t,n=c,r=0;for(;n.length;)t=[],n.forEach(function(n){n.x=r,n.dx=e,n.sourceLinks.forEach(function(n){t.indexOf(n.target)<0&&t.push(n.target)})}),n=t,++r;(function(t){c.forEach(function(n){n.sourceLinks.length||(n.x=t-1)})})(r),function(t){c.forEach(function(n){n.x*=t})}((f[0]-e)/(r-1))}(),function(n){var t=v().key(function(n){return n.x}).sortKeys(k).entries(c).map(function(n){return n.values});(function(){var r=h(t,function(n){return(f[1]-(n.length-1)*i)/l(n,E)});t.forEach(function(n){n.forEach(function(n,t){n.y=t,n.dy=n.value*r})}),s.forEach(function(n){n.dy=n.value*r})})(),o();for(var r=1;0<n;--n)u(r*=.99),o(),e(r),o();function e(r){function e(n){return p(n.source)*n.value}t.forEach(function(n,t){n.forEach(function(n){if(n.targetLinks.length){var t=l(n.targetLinks,e)/l(n.targetLinks,E);n.y+=(t-p(n))*r}})})}function u(r){function e(n){return p(n.target)*n.value}t.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var t=l(n.sourceLinks,e)/l(n.sourceLinks,E);n.y+=(t-p(n))*r}})})}function o(){t.forEach(function(n){var t,r,e,u=0,o=n.length;for(a&&n.sort(a),e=0;e<o;++e)0<(r=u-(t=n[e]).y)&&(t.y+=r),u=t.y+t.dy+i;if(0<(r=u-i-f[1]))for(u=t.y-=r,e=o-2;0<=e;--e)0<(r=(t=n[e]).y+t.dy+i-u)&&(t.y-=r),u=t.y})}}(n),_(),t},t.relayout=function(){return _(),t},t.link=function(){var h=.5;function t(n){var t,r,e=n.source.x+n.source.dx,u=n.target.x,o=(t=+(t=e),r=+(r=u),function(n){return t*(1-n)+r*n}),i=o(h),f=o(1-h),c=n.source.y+n.sy,a=n.target.y+n.ty,s=n.dy;s<1&&(s=1);var l="M"+e+","+c+"C"+i+","+c+" "+f+","+a+" "+u+","+a;return l+="v"+s,l+="C"+f+","+(a+s)+" "+i+","+(c+s)+" "+e+","+(c+s),l+="v"+-s+"z"}return t.curvature=function(n){return arguments.length?(h=+n,t):h},t};var v=function(){var l,h,v={},y=[],t=[];function g(r,n,e){if(e>=y.length)return h?h.call(v,n):l?n.sort(l):n;for(var t,u,o,i,f=-1,c=n.length,a=y[e++],s=new d;++f<c;)(i=s.get(t=a(u=n[f])))?i.push(u):s.set(t,[u]);return o=r?(u=r(),function(n,t){u.set(n,g(r,t,e))}):(u={},function(n,t){u[n]=g(r,t,e)}),s.forEach(o),u}return v.map=function(n,t){return g(t,n,0)},v.entries=function(n){return function r(n,e){if(e>=y.length)return n;var u=[],o=t[e++];return n.forEach(function(n,t){u.push({key:n,values:r(t,e)})}),o?u.sort(function(n,t){return o(n.key,t.key)}):u}(g(r,n,0),0)},v.key=function(n){return y.push(n),v},v.sortKeys=function(n){return t[y.length-1]=n,v},v.sortValues=function(n){return l=n,v},v.rollup=function(n){return h=n,v},v},r=function(n,t){var r=new d;if(n instanceof d)n.forEach(function(n,t){r.set(n,t)});else if(Array.isArray(n)){var e,u=-1,o=n.length;if(1===arguments.length)for(;++u<o;)r.set(u,n[u]);else for(;++u<o;)r.set(t.call(n,e=n[u],u),e)}else for(var i in n)r.set(i,n[i]);return r};function d(){this._=Object.create(null)}var u="__proto__",o="\0";function y(n){return(n+="")===u||n[0]===o?o+n:n}function g(n){return(n+="")[0]===o?n.slice(1):n}function k(n,t){return n<t?-1:t<n?1:t<=n?0:NaN}function _(){function t(n,t){return n.source.y-t.source.y}function r(n,t){return n.target.y-t.target.y}c.forEach(function(n){n.sourceLinks.sort(r),n.targetLinks.sort(t)}),c.forEach(function(n){var t=0,r=0;n.sourceLinks.forEach(function(n){n.sy=t,t+=n.dy}),n.targetLinks.forEach(function(n){n.ty=r,r+=n.dy})})}function p(n){return n.y+n.dy/2}function E(n){return n.value}return function(n,t){if(Object.defineProperty)for(var r in t)Object.defineProperty(n.prototype,r,{value:t[r],enumerable:!1});else _mmvis._.extend(n.prototype,t)}(d,{has:function(n){return y(n)in this._},get:function(n){return this._[y(n)]},set:function(n,t){return this._[y(n)]=t},remove:function(n){return(n=y(n))in this._&&delete this._[n]},keys:function(){var n=[];for(var t in this._)n.push(g(t));return n},values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:g(t),value:this._[t]});return n},size:function(){var n=0;for(var t in this._)++n;return n},empty:function(){for(var n in this._)return!1;return!0},forEach:function(n){for(var t in this._)n.call(this,g(t),this._[t])}}),t}