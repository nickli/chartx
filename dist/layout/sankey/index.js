"use strict";!function(n,t){if("function"==typeof define&&define.amd)define(["exports","mmvis"],t);else if("undefined"!=typeof exports)t(exports,require("mmvis"));else{var r={};t(r,n.mmvis),n.undefined=r}}(void 0,function(n,L){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t={},e=24,i=8,f=[1,1],c=[],s=function(n,t){return n.y-t.y},a=[];function l(n,t){var r,e=0,u=n.length,o=-1;if(1===arguments.length)for(;++o<u;)isNaN(r=+n[o])||(e+=r);else for(;++o<u;)isNaN(r=+t.call(n,n[o],o))||(e+=r);return e}function h(n,t){var r,e,u=-1,o=n.length;if(1===arguments.length){for(;++u<o&&(null==(r=n[u])||r!=r);)r=void 0;for(;++u<o;)null!=(e=n[u])&&e<r&&(r=e)}else{for(;++u<o&&(null==(r=t.call(n,n[u],u))||r!=r);)r=void 0;for(;++u<o;)null!=(e=t.call(n,n[u],u))&&e<r&&(r=e)}return r}t.nodeWidth=function(n){return arguments.length?(e=+n,t):e},t.nodeSort=function(n){return arguments.length?(s=n,t):s},t.nodePadding=function(n){return arguments.length?(i=+n,t):i},t.nodes=function(n){return arguments.length?(c=n,t):c},t.links=function(n){return arguments.length?(a=n,t):a},t.size=function(n){return arguments.length?(f=n,t):f},t.layout=function(n){return c.forEach(function(n){n.sourceLinks=[],n.targetLinks=[]}),a.forEach(function(n){var t=n.source,r=n.target;"number"==typeof t&&(t=n.source=c[n.source]),"number"==typeof r&&(r=n.target=c[n.target]),t.sourceLinks.push(n),r.targetLinks.push(n)}),c.forEach(function(n){n.value=Math.max(l(n.sourceLinks,_),l(n.targetLinks,_))}),function(){var t,n=c,r=0;for(;n.length;)t=[],n.forEach(function(n){n.x=r,n.dx=e,n.sourceLinks.forEach(function(n){t.indexOf(n.target)<0&&t.push(n.target)})}),n=t,++r;(function(t){c.forEach(function(n){n.sourceLinks.length||(n.x=t-1)})})(r),function(t){c.forEach(function(n){n.x*=t})}((f[0]-e)/(r-1))}(),function(n){var t=v().key(function(n){return n.x}).sortKeys(p).entries(c).map(function(n){return n.values});(function(){var r=h(t,function(n){return(f[1]-(n.length-1)*i)/l(n,_)});t.forEach(function(n){n.forEach(function(n,t){n.y=t,n.dy=n.value*r})}),a.forEach(function(n){n.dy=n.value*r})})(),o();for(var r=1;0<n;--n)u(r*=.99),o(),e(r),o();function e(r){function e(n){return E(n.source)*n.value}t.forEach(function(n,t){n.forEach(function(n){if(n.targetLinks.length){var t=l(n.targetLinks,e)/l(n.targetLinks,_);n.y+=(t-E(n))*r}})})}function u(r){function e(n){return E(n.target)*n.value}t.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var t=l(n.sourceLinks,e)/l(n.sourceLinks,_);n.y+=(t-E(n))*r}})})}function o(){t.forEach(function(n){var t,r,e,u=0,o=n.length;for(s&&n.sort(s),e=0;e<o;++e)0<(r=u-(t=n[e]).y)&&(t.y+=r),u=t.y+t.dy+i;if(0<(r=u-i-f[1]))for(u=t.y-=r,e=o-2;0<=e;--e)0<(r=(t=n[e]).y+t.dy+i-u)&&(t.y-=r),u=t.y})}}(n),k(),t},t.relayout=function(){return k(),t},t.link=function(){var a=.5;function t(n){var t=n.source.x+n.source.dx,r=n.target.x,e=function(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}(t,r),u=e(a),o=e(1-a),i=n.source.y+n.sy,f=n.target.y+n.ty,c=n.dy;c<1&&(c=1);var s="M"+t+","+i+"C"+u+","+i+" "+o+","+f+" "+r+","+f;return s+="v"+c,s+="C"+o+","+(f+c)+" "+u+","+(i+c)+" "+t+","+(i+c),s+="v"+-c+"z"}return t.curvature=function(n){return arguments.length?(a=+n,t):a},t};var v=function(){var l,h,v={},y=[],t=[];function g(r,n,e){if(e>=y.length)return h?h.call(v,n):l?n.sort(l):n;for(var t,u,o,i,f=-1,c=n.length,s=y[e++],a=new d;++f<c;)(i=a.get(t=s(u=n[f])))?i.push(u):a.set(t,[u]);return o=r?(u=r(),function(n,t){u.set(n,g(r,t,e))}):(u={},function(n,t){u[n]=g(r,t,e)}),a.forEach(o),u}return v.map=function(n,t){return g(t,n,0)},v.entries=function(n){return function r(n,e){if(e>=y.length)return n;var u=[],o=t[e++];return n.forEach(function(n,t){u.push({key:n,values:r(t,e)})}),o?u.sort(function(n,t){return o(n.key,t.key)}):u}(g(r,n,0),0)},v.key=function(n){return y.push(n),v},v.sortKeys=function(n){return t[y.length-1]=n,v},v.sortValues=function(n){return l=n,v},v.rollup=function(n){return h=n,v},v},r=function(n,t){var r=new d;if(n instanceof d)n.forEach(function(n,t){r.set(n,t)});else if(Array.isArray(n)){var e,u=-1,o=n.length;if(1===arguments.length)for(;++u<o;)r.set(u,n[u]);else for(;++u<o;)r.set(t.call(n,e=n[u],u),e)}else for(var i in n)r.set(i,n[i]);return r};function d(){this._=Object.create(null)}var u="__proto__",o="\0";function y(n){return(n+="")===u||n[0]===o?o+n:n}function g(n){return(n+="")[0]===o?n.slice(1):n}function p(n,t){return n<t?-1:t<n?1:t<=n?0:NaN}function k(){function t(n,t){return n.source.y-t.source.y}function r(n,t){return n.target.y-t.target.y}c.forEach(function(n){n.sourceLinks.sort(r),n.targetLinks.sort(t)}),c.forEach(function(n){var t=0,r=0;n.sourceLinks.forEach(function(n){n.sy=t,t+=n.dy}),n.targetLinks.forEach(function(n){n.ty=r,r+=n.dy})})}function E(n){return n.y+n.dy/2}function _(n){return n.value}return function(n,t){if(Object.defineProperty)for(var r in t)Object.defineProperty(n.prototype,r,{value:t[r],enumerable:!1});else L._.extend(n.prototype,t)}(d,{has:function(n){return y(n)in this._},get:function(n){return this._[y(n)]},set:function(n,t){return this._[y(n)]=t},remove:function(n){return(n=y(n))in this._&&delete this._[n]},keys:function(){var n=[];for(var t in this._)n.push(g(t));return n},values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:g(t),value:this._[t]});return n},size:function(){var n=0;for(var t in this._)++n;return n},empty:function(){for(var n in this._)return!1;return!0},forEach:function(n){for(var t in this._)n.call(this,g(t),this._[t])}}),t}});