"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.forceCenter=center,exports.forceCollide=collide,exports.forceLink=link,exports.forceManyBody=manyBody,exports.forceRadial=radial,exports.forceSimulation=simulation,exports.forceX=x$2,exports.forceY=y$2;var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));function center(o,a){var u;function n(){var t,n,e=u.length,r=0,i=0;for(t=0;t<e;++t)r+=(n=u[t]).x,i+=n.y;for(r=r/e-o,i=i/e-a,t=0;t<e;++t)(n=u[t]).x-=r,n.y-=i}return null==o&&(o=0),null==a&&(a=0),n.initialize=function(t){u=t},n.x=function(t){return arguments.length?(o=+t,n):o},n.y=function(t){return arguments.length?(a=+t,n):a},n}function tree_add(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return add(this.cover(n,e),n,e,t)}function add(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,l,f,c,s,h,y=t._root,d={data:r},v=t._x0,x=t._y0,p=t._x1,_=t._y1;if(!y)return t._root=d,t;for(;y.length;)if((f=n>=(o=(v+p)/2))?v=o:p=o,(c=e>=(a=(x+_)/2))?x=a:_=a,!(y=(i=y)[s=c<<1|f]))return i[s]=d,t;if(u=+t._x.call(null,y.data),l=+t._y.call(null,y.data),n===u&&e===l)return d.next=y,i?i[s]=d:t._root=d,t;for(;i=i?i[s]=new Array(4):t._root=new Array(4),(f=n>=(o=(v+p)/2))?v=o:p=o,(c=e>=(a=(x+_)/2))?x=a:_=a,(s=c<<1|f)==(h=(a<=l)<<1|o<=u););return i[h]=y,i[s]=d,t}function addAll(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),l=1/0,f=1/0,c=-1/0,s=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||((a[e]=r)<l&&(l=r),c<r&&(c=r),(u[e]=i)<f&&(f=i),s<i&&(s=i));if(c<l||s<f)return this;for(this.cover(l,f).cover(c,s),e=0;e<o;++e)add(this,a[e],u[e],t[e]);return this}function tree_cover(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a,u,l=i-e,f=this._root;t<e||i<=t||n<r||o<=n;)switch(u=(n<r)<<1|t<e,(a=new Array(4))[u]=f,f=a,l*=2,u){case 0:i=e+l,o=r+l;break;case 1:e=i-l,o=r+l;break;case 2:i=e+l,r=o-l;break;case 3:e=i-l,r=o-l}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this}function tree_data(){var n=[];return this.visit(function(t){if(!t.length)for(;n.push(t.data),t=t.next;);}),n}function tree_extent(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function tree_find(t,n,e){var r,i,o,a,u,l,f,c=this._x0,s=this._y0,h=this._x1,y=this._y1,d=[],v=this._root;for(v&&d.push(new Quad(v,c,s,h,y)),null==e?e=1/0:(c=t-e,s=n-e,h=t+e,y=n+e,e*=e);l=d.pop();)if(!(!(v=l.node)||(i=l.x0)>h||(o=l.y0)>y||(a=l.x1)<c||(u=l.y1)<s))if(v.length){var x=(i+a)/2,p=(o+u)/2;d.push(new Quad(v[3],x,p,a,u),new Quad(v[2],i,p,x,u),new Quad(v[1],x,o,a,p),new Quad(v[0],i,o,x,p)),(f=(p<=n)<<1|x<=t)&&(l=d[d.length-1],d[d.length-1]=d[d.length-1-f],d[d.length-1-f]=l)}else{var _=t-this._x.call(null,v.data),g=n-this._y.call(null,v.data),w=_*_+g*g;if(w<e){var m=Math.sqrt(e=w);c=t-m,s=n-m,h=t+m,y=n+m,r=v.data}}return r}function tree_remove(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,l,f,c,s,h,y=this._root,d=this._x0,v=this._y0,x=this._x1,p=this._y1;if(!y)return this;if(y.length)for(;;){if((f=o>=(u=(d+x)/2))?d=u:x=u,(c=a>=(l=(v+p)/2))?v=l:p=l,!(y=(n=y)[s=c<<1|f]))return this;if(!y.length)break;(n[s+1&3]||n[s+2&3]||n[s+3&3])&&(e=n,h=s)}for(;y.data!==t;)if(!(y=(r=y).next))return this;return(i=y.next)&&delete y.next,r?i?r.next=i:delete r.next:n?(i?n[s]=i:delete n[s],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(e?e[h]=y:this._root=y)):this._root=i,this}function removeAll(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function tree_root(){return this._root}function tree_size(){var n=0;return this.visit(function(t){if(!t.length)for(;++n,t=t.next;);}),n}function tree_visit(t){var n,e,r,i,o,a,u=[],l=this._root;for(l&&u.push(new Quad(l,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(l=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&l.length){var f=(r+o)/2,c=(i+a)/2;(e=l[3])&&u.push(new Quad(e,f,c,o,a)),(e=l[2])&&u.push(new Quad(e,r,c,f,a)),(e=l[1])&&u.push(new Quad(e,f,i,o,c)),(e=l[0])&&u.push(new Quad(e,r,i,f,c))}return this}function tree_visitAfter(t){var n,e=[],r=[];for(this._root&&e.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,l=n.x1,f=n.y1,c=(a+l)/2,s=(u+f)/2;(o=i[0])&&e.push(new Quad(o,a,u,c,s)),(o=i[1])&&e.push(new Quad(o,c,u,l,s)),(o=i[2])&&e.push(new Quad(o,a,s,c,f)),(o=i[3])&&e.push(new Quad(o,c,s,l,f))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function defaultX(t){return t[0]}function tree_x(t){return arguments.length?(this._x=t,this):this._x}function defaultY(t){return t[1]}function tree_y(t){return arguments.length?(this._y=t,this):this._y}function quadtree(t,n,e){var r=new Quadtree(null==n?defaultX:n,null==e?defaultY:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Quadtree(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var treeProto=quadtree.prototype=Quadtree.prototype;function constant(t){return function(){return t}}function jiggle(){return 1e-6*(Math.random()-.5)}function x(t){return t.x+t.vx}function y(t){return t.y+t.vy}function collide(r){var o,a,_=1,u=1;function n(){for(var t,n,s,h,d,v,p,e=o.length,r=0;r<u;++r)for(n=quadtree(o,x,y).visitAfter(l),t=0;t<e;++t)s=o[t],v=a[s.index],p=v*v,h=s.x+s.vx,d=s.y+s.vy,n.visit(i);function i(t,n,e,r,i){var o=t.data,a=t.r,u=v+a;if(!o)return h+u<n||r<h-u||d+u<e||i<d-u;if(o.index>s.index){var l=h-o.x-o.vx,f=d-o.y-o.vy,c=l*l+f*f;c<u*u&&(0===l&&(c+=(l=jiggle())*l),0===f&&(c+=(f=jiggle())*f),c=(u-(c=Math.sqrt(c)))/c*_,s.vx+=(l*=c)*(u=(a*=a)/(p+a)),s.vy+=(f*=c)*u,o.vx-=l*(u=1-u),o.vy-=f*u)}}}function l(t){if(t.data)return t.r=a[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function e(){if(o){var t,n,e=o.length;for(a=new Array(e),t=0;t<e;++t)n=o[t],a[n.index]=+r(n,t,o)}}return"function"!=typeof r&&(r=constant(null==r?1:+r)),n.initialize=function(t){o=t,e()},n.iterations=function(t){return arguments.length?(u=+t,n):u},n.strength=function(t){return arguments.length?(_=+t,n):_},n.radius=function(t){return arguments.length?(r="function"==typeof t?t:constant(+t),e(),n):r},n}function index(t){return t.index}function find(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function link(s){var h,y,o,a,d,u=index,e=function(t){return 1/Math.min(a[t.source.index],a[t.target.index])},r=constant(30),v=1;function n(t){for(var n=0,e=s.length;n<v;++n)for(var r,i,o,a,u,l,f,c=0;c<e;++c)i=(r=s[c]).source,a=(o=r.target).x+o.vx-i.x-i.vx||jiggle(),u=o.y+o.vy-i.y-i.vy||jiggle(),a*=l=((l=Math.sqrt(a*a+u*u))-y[c])/l*t*h[c],u*=l,o.vx-=a*(f=d[c]),o.vy-=u*f,i.vx+=a*(f=1-f),i.vy+=u*f}function i(){if(o){var t,n,e=o.length,r=s.length,i=new Map(o.map(function(t,n){return[u(t,n,o),t]}));for(t=0,a=new Array(e);t<r;++t)(n=s[t]).index=t,"object"!==(0,_typeof2.default)(n.source)&&(n.source=find(i,n.source)),"object"!==(0,_typeof2.default)(n.target)&&(n.target=find(i,n.target)),a[n.source.index]=(a[n.source.index]||0)+1,a[n.target.index]=(a[n.target.index]||0)+1;for(t=0,d=new Array(r);t<r;++t)n=s[t],d[t]=a[n.source.index]/(a[n.source.index]+a[n.target.index]);h=new Array(r),l(),y=new Array(r),f()}}function l(){if(o)for(var t=0,n=s.length;t<n;++t)h[t]=+e(s[t],t,s)}function f(){if(o)for(var t=0,n=s.length;t<n;++t)y[t]=+r(s[t],t,s)}return null==s&&(s=[]),n.initialize=function(t){o=t,i()},n.links=function(t){return arguments.length?(s=t,i(),n):s},n.id=function(t){return arguments.length?(u=t,n):u},n.iterations=function(t){return arguments.length?(v=+t,n):v},n.strength=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),l(),n):e},n.distance=function(t){return arguments.length?(r="function"==typeof t?t:constant(+t),f(),n):r},n}treeProto.copy=function(){var t,n,e=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=leaf_copy(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=leaf_copy(n));return e},treeProto.add=tree_add,treeProto.addAll=addAll,treeProto.cover=tree_cover,treeProto.data=tree_data,treeProto.extent=tree_extent,treeProto.find=tree_find,treeProto.remove=tree_remove,treeProto.removeAll=removeAll,treeProto.root=tree_root,treeProto.size=tree_size,treeProto.visit=tree_visit,treeProto.visitAfter=tree_visitAfter,treeProto.x=tree_x,treeProto.y=tree_y;var noop={value:function(){}};function dispatch(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Dispatch(r)}function Dispatch(t){this._=t}function parseTypenames(t,r){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function get(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function set(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=noop,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,n){var e,r=this._,i=parseTypenames(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<a;)if(e=(t=i[o]).type)r[e]=set(r[e],t.name,n);else if(null==n)for(e in r)r[e]=set(r[e],t.name,null);return this}for(;++o<a;)if((e=(t=i[o]).type)&&(e=get(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Dispatch(t)},call:function(t,n){if(0<(e=arguments.length-2))for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var taskHead,taskTail,frame=0,timeout=0,interval=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"===("undefined"==typeof performance?"undefined":(0,_typeof2.default)(performance))&&performance.now?performance:Date,setFrame="object"===("undefined"==typeof window?"undefined":(0,_typeof2.default)(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(t,n,e){var r=new Timer;return r.restart(t,n,e),r}function timerFlush(){now(),++frame;for(var t,n=taskHead;n;)0<=(t=clockNow-n._time)&&n._call.call(null,t),n=n._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var t=clock.now(),n=t-clockLast;pokeDelay<n&&(clockSkew-=n,clockLast=t)}function nap(){for(var t,n,e=taskHead,r=1/0;e;)e=e._call?(r>e._time&&(r=e._time),(t=e)._next):(n=e._next,e._next=null,t?t._next=n:taskHead=n);taskTail=t,sleep(r)}function sleep(t){frame||(timeout=timeout&&clearTimeout(timeout),24<t-clockNow?(t<1/0&&(timeout=setTimeout(wake,t-clock.now()-clockSkew)),interval=interval&&clearInterval(interval)):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}function x$1(t){return t.x}function y$1(t){return t.y}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?now():+e)+(null==n?0:+n),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=e,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(c){var o,a=1,n=.001,u=1-Math.pow(n,1/300),l=0,f=.6,s=new Map,t=timer(r),e=dispatch("tick","end");function r(){i(),e.call("tick",o),a<n&&(t.stop(),e.call("end",o))}function i(t){var n,e,r=c.length;void 0===t&&(t=1);for(var i=0;i<t;++i)for(a+=(l-a)*u,s.forEach(function(t){t(a)}),n=0;n<r;++n)null==(e=c[n]).fx?e.x+=e.vx*=f:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=f:(e.y=e.fy,e.vy=0);return o}function h(){for(var t,n=0,e=c.length;n<e;++n){if((t=c[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var r=initialRadius*Math.sqrt(n),i=n*initialAngle;t.x=r*Math.cos(i),t.y=r*Math.sin(i)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function y(t){return t.initialize&&t.initialize(c),t}return null==c&&(c=[]),h(),o={tick:i,restart:function(){return t.restart(r),o},stop:function(){return t.stop(),o},nodes:function(t){return arguments.length?(c=t,h(),s.forEach(y),o):c},alpha:function(t){return arguments.length?(a=+t,o):a},alphaMin:function(t){return arguments.length?(n=+t,o):n},alphaDecay:function(t){return arguments.length?(u=+t,o):+u},alphaTarget:function(t){return arguments.length?(l=+t,o):l},velocityDecay:function(t){return arguments.length?(f=1-t,o):1-f},force:function(t,n){return 1<arguments.length?(null==n?s.delete(t):s.set(t,y(n)),o):s.get(t)},find:function(t,n,e){var r,i,o,a,u,l=0,f=c.length;for(null==e?e=1/0:e*=e,l=0;l<f;++l)(o=(r=t-(a=c[l]).x)*r+(i=n-a.y)*i)<e&&(u=a,e=o);return u},on:function(t,n){return 1<arguments.length?(e.on(t,n),o):e.on(t)}}}function manyBody(){var i,l,f,c,r=constant(-30),s=1,h=1/0,y=.81;function n(t){var n,e=i.length,r=quadtree(i,x$1,y$1).visitAfter(o);for(f=t,n=0;n<e;++n)l=i[n],r.visit(a)}function e(){if(i){var t,n,e=i.length;for(c=new Array(e),t=0;t<e;++t)n=i[t],c[n.index]=+r(n,t,i)}}function o(t){var n,e,r,i,o,a=0,u=0;if(t.length){for(r=i=o=0;o<4;++o)(n=t[o])&&(e=Math.abs(n.value))&&(a+=n.value,u+=e,r+=e*n.x,i+=e*n.y);t.x=r/u,t.y=i/u}else for((n=t).x=n.data.x,n.y=n.data.y;a+=c[n.data.index],n=n.next;);t.value=a}function a(t,n,e,r){if(!t.value)return!0;var i=t.x-l.x,o=t.y-l.y,a=r-n,u=i*i+o*o;if(a*a/y<u)return u<h&&(0===i&&(u+=(i=jiggle())*i),0===o&&(u+=(o=jiggle())*o),u<s&&(u=Math.sqrt(s*u)),l.vx+=i*t.value*f/u,l.vy+=o*t.value*f/u),!0;if(!(t.length||h<=u))for(t.data===l&&!t.next||(0===i&&(u+=(i=jiggle())*i),0===o&&(u+=(o=jiggle())*o),u<s&&(u=Math.sqrt(s*u)));t.data!==l&&(a=c[t.data.index]*f/u,l.vx+=i*a,l.vy+=o*a),t=t.next;);}return n.initialize=function(t){i=t,e()},n.strength=function(t){return arguments.length?(r="function"==typeof t?t:constant(+t),e(),n):r},n.distanceMin=function(t){return arguments.length?(s=t*t,n):Math.sqrt(s)},n.distanceMax=function(t){return arguments.length?(h=t*t,n):Math.sqrt(h)},n.theta=function(t){return arguments.length?(y=t*t,n):Math.sqrt(y)},n}function radial(e,l,f){var c,s,h,r=constant(.1);function n(t){for(var n=0,e=c.length;n<e;++n){var r=c[n],i=r.x-l||1e-6,o=r.y-f||1e-6,a=Math.sqrt(i*i+o*o),u=(h[n]-a)*s[n]*t/a;r.vx+=i*u,r.vy+=o*u}}function i(){if(c){var t,n=c.length;for(s=new Array(n),h=new Array(n),t=0;t<n;++t)h[t]=+e(c[t],t,c),s[t]=isNaN(h[t])?0:+r(c[t],t,c)}}return"function"!=typeof e&&(e=constant(+e)),null==l&&(l=0),null==f&&(f=0),n.initialize=function(t){c=t,i()},n.strength=function(t){return arguments.length?(r="function"==typeof t?t:constant(+t),i(),n):r},n.radius=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),i(),n):e},n.x=function(t){return arguments.length?(l=+t,n):l},n.y=function(t){return arguments.length?(f=+t,n):f},n}function x$2(e){var i,o,a,r=constant(.1);function n(t){for(var n,e=0,r=i.length;e<r;++e)(n=i[e]).vx+=(a[e]-n.x)*o[e]*t}function u(){if(i){var t,n=i.length;for(o=new Array(n),a=new Array(n),t=0;t<n;++t)o[t]=isNaN(a[t]=+e(i[t],t,i))?0:+r(i[t],t,i)}}return"function"!=typeof e&&(e=constant(null==e?0:+e)),n.initialize=function(t){i=t,u()},n.strength=function(t){return arguments.length?(r="function"==typeof t?t:constant(+t),u(),n):r},n.x=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),u(),n):e},n}function y$2(e){var i,o,a,r=constant(.1);function n(t){for(var n,e=0,r=i.length;e<r;++e)(n=i[e]).vy+=(a[e]-n.y)*o[e]*t}function u(){if(i){var t,n=i.length;for(o=new Array(n),a=new Array(n),t=0;t<n;++t)o[t]=isNaN(a[t]=+e(i[t],t,i))?0:+r(i[t],t,i)}}return"function"!=typeof e&&(e=constant(null==e?0:+e)),n.initialize=function(t){i=t,u()},n.strength=function(t){return arguments.length?(r="function"==typeof t?t:constant(+t),u(),n):r},n.y=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),u(),n):e},n}