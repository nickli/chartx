{"version":3,"file":"chartx.js","sources":["../node_modules/mmvis/src/underscore.js","../node_modules/mmvis/src/dataSection.js","../node_modules/mmvis/src/axis.js","../node_modules/mmvis/src/dataFrame.js","../node_modules/mmvis/src/dom.js","../node_modules/mmvis/src/theme.js","../node_modules/mmvis/src/tools.js","../node_modules/mmvis/src/global.js","../node_modules/mmvis/src/color.js","../node_modules/mmvis/src/polar.js","../node_modules/mmvis/src/event/Event.js","../node_modules/mmvis/src/event/types.js","../node_modules/mmvis/src/event/Manager.js","../node_modules/mmvis/src/event/Dispatcher.js","../node_modules/mmvis/src/event/Handler.js","../node_modules/canvax/node_modules/mmvis/src/underscore.js","../node_modules/canvax/node_modules/mmvis/src/dataSection.js","../node_modules/canvax/node_modules/mmvis/src/axis.js","../node_modules/canvax/node_modules/mmvis/src/dataFrame.js","../node_modules/canvax/node_modules/mmvis/src/dom.js","../node_modules/canvax/node_modules/mmvis/src/theme.js","../node_modules/canvax/node_modules/mmvis/src/global.js","../node_modules/canvax/node_modules/mmvis/src/color.js","../node_modules/canvax/node_modules/mmvis/src/polar.js","../node_modules/canvax/node_modules/mmvis/src/event/Event.js","../node_modules/canvax/node_modules/mmvis/src/event/types.js","../node_modules/canvax/node_modules/mmvis/src/event/Manager.js","../node_modules/canvax/node_modules/mmvis/src/event/Dispatcher.js","../node_modules/canvax/node_modules/mmvis/src/event/Handler.js","../node_modules/canvax/src/utils/index.js","../node_modules/canvax/src/geom/Matrix.js","../node_modules/canvax/src/display/Point.js","../node_modules/@tweenjs/tween.js/src/Tween.js","../node_modules/canvax/src/animation/AnimationFrame.js","../node_modules/canvax/src/utils/observe.js","../node_modules/canvax/src/const.js","../node_modules/canvax/src/geom/InsideLine.js","../node_modules/canvax/src/settings.js","../node_modules/canvax/src/display/DisplayObject.js","../node_modules/canvax/src/display/DisplayObjectContainer.js","../node_modules/canvax/src/display/Stage.js","../node_modules/canvax/src/renderers/SystemRenderer.js","../node_modules/canvax/src/graphics/canvas/GraphicsRenderer.js","../node_modules/canvax/src/renderers/canvas/CanvasRenderer.js","../node_modules/canvax/src/renderers/autoRenderer.js","../node_modules/canvax/src/Application.js","../node_modules/canvax/src/display/Sprite.js","../node_modules/canvax/src/graphics/GraphicsData.js","../node_modules/canvax/src/math/Arc.js","../node_modules/canvax/src/math/shapes/Rectangle.js","../node_modules/canvax/src/math/shapes/Circle.js","../node_modules/canvax/src/math/shapes/Ellipse.js","../node_modules/canvax/src/math/shapes/Polygon.js","../node_modules/canvax/src/graphics/utils/bezierCurveTo.js","../node_modules/canvax/src/graphics/Graphics.js","../node_modules/canvax/src/display/Shape.js","../node_modules/canvax/src/display/Text.js","../node_modules/canvax/src/geom/Vector.js","../node_modules/canvax/src/geom/SmoothSpline.js","../node_modules/canvax/src/geom/Math.js","../node_modules/canvax/src/shape/BrokenLine.js","../node_modules/canvax/src/shape/Circle.js","../node_modules/canvax/src/shape/Path.js","../node_modules/canvax/src/shape/Droplet.js","../node_modules/canvax/src/shape/Ellipse.js","../node_modules/canvax/src/shape/Polygon.js","../node_modules/canvax/src/shape/Isogon.js","../node_modules/canvax/src/shape/Line.js","../node_modules/canvax/src/shape/Rect.js","../node_modules/canvax/src/shape/Sector.js","../node_modules/canvax/src/index.js","../src/chart.js","../src/components/component.js","../src/components/coord/index.js","../src/utils/tools.js","../src/components/coord/xaxis.js","../src/components/coord/yaxis.js","../src/components/coord/grid.js","../src/components/coord/rect.js","../src/components/coord/polar/grid.js","../src/components/coord/polar.js","../src/components/graphs/index.js","../src/components/graphs/bar/index.js","../src/components/graphs/line/group.js","../src/components/graphs/line/index.js","../src/components/graphs/scat/index.js","../src/components/graphs/pie/pie.js","../src/components/graphs/pie/index.js","../src/components/graphs/radar/index.js","../src/utils/dispatch.js","../src/layout/cloud.js","../src/components/graphs/cloud/index.js","../src/components/graphs/planet/group.js","../src/components/graphs/planet/index.js","../src/components/graphs/funnel/index.js","../node_modules/fmin/src/bisect.js","../node_modules/fmin/src/blas1.js","../node_modules/fmin/src/nelderMead.js","../node_modules/fmin/src/linesearch.js","../node_modules/fmin/src/conjugateGradient.js","../src/layout/venn/circleintersection.js","../src/layout/venn/layout.js","../src/components/graphs/venn/index.js","../src/layout/utils/rebind.js","../src/layout/utils/arrays.js","../src/layout/hierarchy.js","../src/layout/partition.js","../src/components/graphs/sunburst/index.js","../src/layout/sankey/index.js","../src/components/graphs/sankey/index.js","../src/components/graphs/progress/index.js","../src/components/trigger.js","../src/components/legend/index.js","../src/components/datazoom/index.js","../src/components/markline/index.js","../src/components/tips/index.js","../src/components/bartgi/index.js","../src/components/barguide/index.js","../src/components/theme/index.js","../src/components/watermark/index.js","../src/components/cross/index.js","../src/components/lineschedu/index.js","../src/index.js"],"sourcesContent":["var _ = {}\nvar breaker = {};\nvar ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n\n// Create quick reference variables for speed access to core prototypes.\nvar\n  push = ArrayProto.push,\n  slice = ArrayProto.slice,\n  concat = ArrayProto.concat,\n  toString = ObjProto.toString,\n  hasOwnProperty = ObjProto.hasOwnProperty;\n\n// All **ECMAScript 5** native function implementations that we hope to use\n// are declared here.\nvar\n  nativeForEach = ArrayProto.forEach,\n  nativeMap = ArrayProto.map,\n  nativeReduce = ArrayProto.reduce,\n  nativeReduceRight = ArrayProto.reduceRight,\n  nativeFilter = ArrayProto.filter,\n  nativeEvery = ArrayProto.every,\n  nativeSome = ArrayProto.some,\n  nativeIndexOf = ArrayProto.indexOf,\n  nativeLastIndexOf = ArrayProto.lastIndexOf,\n  nativeIsArray = Array.isArray,\n  nativeKeys = Object.keys,\n  nativeBind = FuncProto.bind;\n\n\nvar shallowProperty = function (key) {\n  return function (obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n};\nvar MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\nvar getLength = shallowProperty('length');\nvar isArrayLike = function (collection) {\n  var length = getLength(collection);\n  return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n};\n\n\n\n_.values = function (obj) {\n  var keys = _.keys(obj);\n  var length = keys.length;\n  var values = new Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[keys[i]];\n  }\n  return values;\n};\n\n_.keys = nativeKeys || function (obj) {\n  if (obj !== Object(obj)) throw new TypeError('Invalid object');\n  var keys = [];\n  for (var key in obj) if (_.has(obj, key)) keys.push(key);\n  return keys;\n};\n\n_.has = function (obj, key) {\n  return hasOwnProperty.call(obj, key);\n};\n\nvar each = _.each = _.forEach = function (obj, iterator, context) {\n  if (obj == null) return;\n  if (nativeForEach && obj.forEach === nativeForEach) {\n    obj.forEach(iterator, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, length = obj.length; i < length; i++) {\n      if (iterator.call(context, obj[i], i, obj) === breaker) return;\n    }\n  } else {\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n    }\n  }\n};\n\n_.compact = function (array) {\n  return _.filter(array, _.identity);\n};\n\n_.filter = _.select = function (obj, iterator, context) {\n  var results = [];\n  if (obj == null) return results;\n  if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);\n  each(obj, function (value, index, list) {\n    if (iterator.call(context, value, index, list)) results.push(value);\n  });\n  return results;\n};\n\neach(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function (name) {\n  _['is' + name] = function (obj) {\n    return toString.call(obj) == '[object ' + name + ']';\n  };\n});\n\n//if (!_.isArguments(arguments)) {\n_.isArguments = function (obj) {\n  return !!(obj && _.has(obj, 'callee'));\n};\n//}\n\nif (typeof (/./) !== 'function') {\n  _.isFunction = function (obj) {\n    return typeof obj === 'function';\n  };\n};\n\n_.isFinite = function (obj) {\n  return isFinite(obj) && !isNaN(parseFloat(obj));\n};\n\n_.isNaN = function (obj) {\n  return _.isNumber(obj) && obj != +obj;\n};\n\n_.isBoolean = function (obj) {\n  return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n};\n\n_.isNull = function (obj) {\n  return obj === null;\n};\n\n_.isEmpty = function (obj) {\n  if (obj == null) return true;\n  if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n  for (var key in obj) if (_.has(obj, key)) return false;\n  return true;\n};\n\n_.isElement = function (obj) {\n  return !!(obj && obj.nodeType === 1);\n};\n\n_.isArray = nativeIsArray || function (obj) {\n  return toString.call(obj) == '[object Array]';\n};\n\n_.isObject = function (obj) {\n  return obj === Object(obj);\n};\n\n_.identity = function (value) {\n  return value;\n};\n\n_.indexOf = function (array, item, isSorted) {\n  if (array == null) return -1;\n  var i = 0, length = array.length;\n  if (isSorted) {\n    if (typeof isSorted == 'number') {\n      i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n    } else {\n      i = _.sortedIndex(array, item);\n      return array[i] === item ? i : -1;\n    }\n  }\n  if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n  for (; i < length; i++) if (array[i] === item) return i;\n  return -1;\n};\n\n_.isWindow = function (obj) {\n  return obj != null && obj == obj.window;\n};\n\n// Internal implementation of a recursive `flatten` function.\nvar flatten = function (input, shallow, output) {\n  if (shallow && _.every(input, _.isArray)) {\n    return concat.apply(output, input);\n  }\n  each(input, function (value) {\n    if (_.isArray(value) || _.isArguments(value)) {\n      shallow ? push.apply(output, value) : flatten(value, shallow, output);\n    } else {\n      output.push(value);\n    }\n  });\n  return output;\n};\n\n// Flatten out an array, either recursively (by default), or just one level.\n_.flatten = function (array, shallow) {\n  return flatten(array, shallow, []);\n};\n\n_.every = _.all = function (obj, iterator, context) {\n  iterator || (iterator = _.identity);\n  var result = true;\n  if (obj == null) return result;\n  if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);\n  each(obj, function (value, index, list) {\n    if (!(result = result && iterator.call(context, value, index, list))) return breaker;\n  });\n  return !!result;\n};\n\n\n\n\n\n\n// Return the minimum element (or element-based computation).\n_.min = function (obj, iterator, context) {\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n    return Math.min.apply(Math, obj);\n  }\n  if (!iterator && _.isEmpty(obj)) return Infinity;\n  var result = { computed: Infinity, value: Infinity };\n  each(obj, function (value, index, list) {\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\n    computed < result.computed && (result = { value: value, computed: computed });\n  });\n  return result.value;\n};\n// Return the maximum element or (element-based computation).\n// Can't optimize arrays of integers longer than 65,535 elements.\n// See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n_.max = function (obj, iterator, context) {\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n    return Math.max.apply(Math, obj);\n  }\n  if (!iterator && _.isEmpty(obj)) return -Infinity;\n  var result = { computed: -Infinity, value: -Infinity };\n  each(obj, function (value, index, list) {\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\n    computed > result.computed && (result = { value: value, computed: computed });\n  });\n  return result.value;\n};\n\n// Return the first value which passes a truth test. Aliased as `detect`.\n_.find = _.detect = function (obj, iterator, context) {\n  var result;\n  any(obj, function (value, index, list) {\n    if (iterator.call(context, value, index, list)) {\n      result = value;\n      return true;\n    }\n  });\n  return result;\n};\n// Determine if at least one element in the object matches a truth test.\n// Delegates to **ECMAScript 5**'s native `some` if available.\n// Aliased as `any`.\nvar any = _.some = _.any = function (obj, iterator, context) {\n  iterator || (iterator = _.identity);\n  var result = false;\n  if (obj == null) return result;\n  if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);\n  each(obj, function (value, index, list) {\n    if (result || (result = iterator.call(context, value, index, list))) return breaker;\n  });\n  return !!result;\n};\n// Return a version of the array that does not contain the specified value(s).\n_.without = function (array) {\n  return _.difference(array, slice.call(arguments, 1));\n};\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\n_.difference = function (array) {\n  var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n  return _.filter(array, function (value) { return !_.contains(rest, value); });\n};\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// Aliased as `unique`.\n_.uniq = _.unique = function (array, isSorted, iterator, context) {\n  if (_.isFunction(isSorted)) {\n    context = iterator;\n    iterator = isSorted;\n    isSorted = false;\n  }\n  var initial = iterator ? _.map(array, iterator, context) : array;\n  var results = [];\n  var seen = [];\n  each(initial, function (value, index) {\n    if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n      seen.push(value);\n      results.push(array[index]);\n    }\n  });\n  return results;\n};\n// Return the results of applying the iterator to each element.\n// Delegates to **ECMAScript 5**'s native `map` if available.\n_.map = _.collect = function (obj, iterator, context) {\n  var results = [];\n  if (obj == null) return results;\n  if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n  each(obj, function (value, index, list) {\n    results.push(iterator.call(context, value, index, list));\n  });\n  return results;\n};\n// Determine if the array or object contains a given value (using `===`).\n// Aliased as `include`.\n_.contains = _.include = function (obj, target) {\n  if (obj == null) return false;\n  if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n  return any(obj, function (value) {\n    return value === target;\n  });\n};\n\n// Convenience version of a common use case of `map`: fetching a property.\n_.pluck = function (obj, key) {\n  return _.map(obj, function (value) { return value[key]; });\n};\n\n// Return a random integer between min and max (inclusive).\n_.random = function (min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n};\n\n// Shuffle a collection.\n_.shuffle = function (obj) {\n  return _.sample(obj, Infinity);\n};\n\n_.sample = function (obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    return obj[_.random(obj.length - 1)];\n  }\n  var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = _.random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n};\n\n\n\n\n\n/**\n*\n*如果是深度extend，第一个参数就设置为true\n*/\n_.extend = function () {\n  var options, name, src, copy,\n    target = arguments[0] || {},\n    i = 1,\n    length = arguments.length,\n    deep = false;\n  if (typeof target === \"boolean\") {\n    deep = target;\n    target = arguments[1] || {};\n    i = 2;\n  };\n  if (typeof target !== \"object\" && !_.isFunction(target)) {\n    target = {};\n  };\n  if (length === i) {\n    target = this;\n    --i;\n  };\n  for (; i < length; i++) {\n    if ((options = arguments[i]) != null) {\n      for (name in options) {\n        src = target[name];\n        copy = options[name];\n        if (target === copy) {\n          continue;\n        };\n\n        //if( deep && copy && _.isObject( copy ) &&  && !_.isArray( copy ) && !_.isFunction( copy ) ){\n        if (deep && copy && _.isObject(copy) && copy.constructor === Object) {\n          target[name] = _.extend(deep, src, copy);\n        } else {\n          target[name] = copy;\n        };\n      }\n    }\n  }\n  return target;\n};\n\n_.clone = function (obj) {\n  if (!_.isObject(obj)) return obj;\n  return _.isArray(obj) ? obj.slice() : _.extend(true, {}, obj);\n};\n\n//********补存一些数学常用方法,暂放在这里文件下,后期多了单独成立一个类库  */\n// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\n_.euclideanModulo = (n, m) => {\n  return ((n % m) + m) % m;\n};\n\n_.DEG2RAD = Math.PI / 180;\n_.RAD2DEG = 180 / Math.PI;\n\n_.degToRad = (degrees) => {\n  return degrees * _.DEG2RAD;\n};\n\n_.radToDeg = (radians) => {\n  return radians * _.RAD2DEG;\n};\n\nexport default _;","import _ from \"./underscore\"\n\nfunction normalizeTickInterval(interval, magnitude) {\n    var normalized, i;\n    // var multiples = [1, 2, 2.5, 5, 10];\n    var multiples = [1, 2, 5, 10];\n    // round to a tenfold of 1, 2, 2.5 or 5\n    normalized = interval / magnitude;\n\n    // normalize the interval to the nearest multiple\n    for (var i = 0; i < multiples.length; i++) {\n        interval = multiples[i];\n        if (normalized <= (multiples[i] + (multiples[i + 1] || multiples[i])) / 2) {\n            break;\n        }\n    }\n\n    // multiply back to the correct magnitude\n    interval *= magnitude;\n\n    return interval;\n}\n\nfunction correctFloat(num) {\n    return parseFloat(\n        num.toPrecision(14));\n}\n\nfunction getLinearTickPositions(arr,$maxPart,$cfg) {\n\n    arr = _.without( arr , undefined , null , \"\" );\n    \n\tvar scale = $cfg && $cfg.scale ? parseFloat($cfg.scale) :1\n\t//返回的数组中的值 是否都为整数(思霏)  防止返回[8, 8.2, 8.4, 8.6, 8.8, 9]   应该返回[8, 9]\n\tvar isInt = $cfg && $cfg.isInt ? 1 : 0 \n\n\tif(isNaN(scale)){\n\t\tscale = 1\n\t};\n\n    var max = _.max(arr);\n    var initMax = max\n    max *= scale\n    var min = _.min(arr); \n\n    if(min==max){\n    \tif(max > 0){\n    \t\tmin = 0;\n            return [ min , max ];\n    \t\t// min= Math.round(max/2);\n    \t} else if(max < 0){\n            return [ max , 0 ];\n    \t\t//min = max*2;\n    \t} else {\n            max = 1;\n            return [0 , max];\n        }\n    }\n\n    \n\n    var length = max - min;\n    if (length) {\n    \tvar tempmin = min //保证min>0的时候不会出现负数\n    \tmin -= length * 0.05;\n        // S.log(min +\":\"+ tempmin)\n        if(min<0 && tempmin>=0){\n        \tmin=0\n        }\n        max += length * 0.05;\n    }\n    \n    var tickInterval = (max - min) * 0.3;//72 / 365;\n    var magnitude = Math.pow(10, Math.floor(Math.log(tickInterval) / Math.LN10));\n\n    tickInterval = normalizeTickInterval(tickInterval, magnitude);\n    if(isInt){\n    \ttickInterval = Math.ceil(tickInterval)\n    }\n\n    var pos,\n        lastPos,\n        roundedMin = correctFloat(Math.floor(min / tickInterval) * tickInterval),\n        roundedMax = correctFloat(Math.ceil(max / tickInterval) * tickInterval),\n        tickPositions = [];\n\n    // Populate the intermediate values\n    pos = roundedMin;\n    while (pos <= roundedMax) {\n\n        // Place the tick on the rounded value\n        tickPositions.push(pos);\n\n        // Always add the raw tickInterval, not the corrected one.\n        pos = correctFloat(pos + tickInterval) \n\n        // If the interval is not big enough in the current min - max range to actually increase\n        // the loop variable, we need to break out to prevent endless loop. Issue #619\n        if (pos === lastPos) {\n            break;\n        }\n\n        // Record the last value\n        lastPos = pos;\n    }\n    if(tickPositions.length >= 3){\n    \tif(tickPositions[tickPositions.length - 2] >= initMax){\n\t\t\ttickPositions.pop()\n\t\t}\n    }\n    return tickPositions;\n}\n\nvar dataSection  = {\n\tsection:function($arr,$maxPart,$cfg){\n        return _.uniq( getLinearTickPositions($arr,$maxPart,$cfg));\n\t}\n};\n\nexport default dataSection","//TODO 所有的get xxx OfVal 在非proportion下面如果数据有相同的情况，就会有风险\nimport _ from \"./underscore\"\nimport dataSection from \"./dataSection\"\n\nexport default class axis {\n    constructor(opt, dataOrg) {\n        //super();\n        this.layoutType = opt.layoutType || \"proportion\"; // rule , peak, proportion\n\n        //源数据\n        //这个是一个一定会有两层数组的数据结构，是一个标准的dataFrame数据\n        // [ \n        //    [   \n        //        [1,2,3],  \n        //        [1,2,3]    //这样有堆叠的数据只会出现在proportion的axis里，至少目前是这样\n        //    ] \n        //   ,[    \n        //        [1,2,3] \n        //    ]   \n        // ]\n        this._opt = _.clone(opt);\n        this.dataOrg = dataOrg || [];\n        this.sectionHandler = null;\n        this.dataSection = []; //从原数据 dataOrg 中 结果 datasection 重新计算后的数据\n        this.dataSectionLayout = []; //和dataSection一一对应的，每个值的pos，//get xxx OfPos的时候，要先来这里做一次寻找\n\n        //轴总长\n        this.axisLength = 1;\n\n        this._cellCount = null;\n        this._cellLength = null; //数据变动的时候要置空\n\n        //下面三个目前yAxis中实现了，后续统一都会实现\n\n        //水位data，需要混入 计算 dataSection， 如果有设置waterLine， dataSection的最高水位不会低于这个值\n        //这个值主要用于第三方的markline等组件， 自己的y值超过了yaxis的范围的时候，需要纳入来修复yaxis的section区间\n        this.waterLine = null;\n        //默认的 dataSectionGroup = [ dataSection ], dataSection 其实就是 dataSectionGroup 去重后的一维版本\n        this.dataSectionGroup = [];\n        //如果middleweight有设置的话 dataSectionGroup 为被middleweight分割出来的n个数组>..[ [0,50 , 100],[100,500,1000] ]\n        this.middleweight = null;\n\n        this.symmetric = false; //proportion下，是否需要设置数据为正负对称的数据，比如 [ 0,5,10 ] = > [ -10, 0 10 ]，象限坐标系的时候需要\n\n        //1，如果数据中又正数和负数，则默认为0，\n        //2，如果dataSection最小值小于0，则baseNumber为最小值，\n        //3，如果dataSection最大值大于0，则baseNumber为最大值\n        //也可以由用户在第2、3种情况下强制配置为0，则section会补充满从0开始的刻度值\n        this.origin = null;\n        this.originPos = 0; //value为 origin 对应的pos位置\n        this._originTrans = 0;//当设置的 origin 和datasection的min不同的时候，\n\n        //min,max不需要外面配置，没意义\n        this._min = null;\n        this._max = null;\n\n        //\"asc\" 排序，默认从小到大, desc为从大到小\n        //之所以不设置默认值为asc，是要用 null 来判断用户是否进行了配置\n        this.sort = null;\n\n        this.posParseToInt = false; //比如在柱状图中，有得时候需要高精度的能间隔1px的柱子，那么x轴的计算也必须要都是整除的\n\n    }\n\n    resetDataOrg(dataOrg) {\n        //配置和数据变化\n\n        this.dataSection = [];\n        this.dataSectionGroup = [];\n\n        this.dataOrg = dataOrg;\n\n        this._cellCount = null;\n        this._cellLength = null;\n\n    }\n\n    setAxisLength(length) {\n        this.axisLength = length;\n        this.calculateProps();\n    }\n\n    calculateProps() {\n\n        var me = this;\n\n        if (this.layoutType == \"proportion\") {\n\n            if (this._min == null) {\n                this._min = _.min(this.dataSection);\n            };\n            if (this._max == null) {\n                this._max = _.max(this.dataSection);\n            };\n\n            //默认情况下 origin 就是datasection的最小值\n            //如果用户设置了origin，那么就已用户的设置为准\n            if (!(\"origin\" in this._opt)) {\n                this.origin = 0;//this.dataSection[0];//_.min( this.dataSection );\n                if (_.max(this.dataSection) < 0) {\n                    this.origin = _.max(this.dataSection);\n                };\n                if (_.min(this.dataSection) > 0) {\n                    this.origin = _.min(this.dataSection);\n                };\n            };\n\n            this._originTrans = this._getOriginTrans(this.origin);\n            this.originPos = this.getPosOfVal(this.origin);\n\n        };\n\n\n\n        //get xxx OfPos的时候，要先来这里做一次寻找\n        this.dataSectionLayout = [];\n        _.each(this.dataSection, function (val, i) {\n\n            var ind = i;\n            if (me.layoutType == \"proportion\") {\n                ind = me.getIndexOfVal(val);\n            };\n\n            var pos = parseInt(me.getPosOf({\n                ind: i,\n                val: val\n            }), 10);\n\n            me.dataSectionLayout.push({\n                val: val,\n                ind: ind,\n                pos: pos\n            });\n\n        });\n\n    }\n    getDataSection() {\n        //对外返回的dataSection\n        return this.dataSection;\n    }\n    setDataSection(_dataSection) {\n        var me = this;\n\n        //如果用户没有配置dataSection，或者用户传了，但是传了个空数组，则自己组装dataSection\n        if (_.isEmpty(_dataSection) && _.isEmpty(this._opt.dataSection)) {\n            if (this.layoutType == \"proportion\") {\n\n                var arr = this._getDataSection();\n\n                if (\"origin\" in me._opt) {\n                    arr.push(me._opt.origin);\n                };\n\n                if (arr.length == 1) {\n                    arr.push(arr[0] * 2);\n                };\n\n                if (this.waterLine) {\n                    arr.push(this.waterLine);\n                };\n\n                if (this.symmetric) {\n                    //如果需要处理为对称数据\n                    var _min = _.min(arr);\n                    var _max = _.max(arr);\n                    if (Math.abs(_min) > Math.abs(_max)) {\n                        arr.push(Math.abs(_min));\n                    } else {\n                        arr.push(-Math.abs(_max));\n                    };\n                };\n\n                for (var ai = 0, al = arr.length; ai < al; ai++) {\n                    arr[ai] = Number(arr[ai]);\n                    if (isNaN(arr[ai])) {\n                        arr.splice(ai, 1);\n                        ai--;\n                        al--;\n                    };\n                };\n\n                if( _.isFunction( this.sectionHandler ) ){\n                    this.dataSection = this.sectionHandler( arr );\n                };\n\n                if( !this.dataSection || !this.dataSection.length ){\n                    this.dataSection = dataSection.section(arr, 3);\n                };\n\n                if (this.symmetric) {\n                    //可能得到的区间是偶数， 非对称，强行补上\n                    var _min = _.min(this.dataSection);\n                    var _max = _.max(this.dataSection);\n                    if (Math.abs(_min) > Math.abs(_max)) {\n                        this.dataSection.push(Math.abs(_min));\n                    } else {\n                        this.dataSection.unshift(-Math.abs(_max));\n                    };\n                };\n\n                //如果还是0\n                if (this.dataSection.length == 0) {\n                    this.dataSection = [0];\n                };\n\n                //如果有 middleweight 设置，就会重新设置dataSectionGroup\n                this.dataSectionGroup = [_.clone(this.dataSection)];\n\n                this._middleweight(); //如果有middleweight配置，需要根据配置来重新矫正下datasection\n\n                this._sort();\n\n            } else {\n\n                //非proportion 也就是 rule peak 模式下面\n                this.dataSection = _.flatten(this.dataOrg);//this._getDataSection();\n                this.dataSectionGroup = [this.dataSection];\n\n            };\n        } else {\n            this.dataSection = _dataSection || this._opt.dataSection;\n            this.dataSectionGroup = [this.dataSection];\n        };\n\n    }\n    _getDataSection() {\n        //如果有堆叠，比如[ [\"uv\",\"pv\"], \"click\" ]\n        //那么这个 this.dataOrg， 也是个对应的结构\n        //vLen就会等于2\n        var vLen = 1;\n\n        _.each(this.dataOrg, function (arr) {\n            vLen = Math.max(arr.length, vLen);\n        });\n\n        if (vLen == 1) {\n            return this._oneDimensional();\n        };\n        if (vLen > 1) {\n            return this._twoDimensional();\n        };\n\n    }\n    _oneDimensional() {\n        var arr = _.flatten(this.dataOrg); //_.flatten( data.org );\n\n        for (var i = 0, il = arr.length; i < il; i++) {\n            arr[i] = arr[i] || 0;\n        };\n\n        return arr;\n    }\n    //二维的yAxis设置，肯定是堆叠的比如柱状图，后续也会做堆叠的折线图， 就是面积图\n    _twoDimensional() {\n        var d = this.dataOrg;\n        var arr = [];\n        var min;\n        _.each(d, function (d, i) {\n            if (!d.length) {\n                return\n            };\n\n            //有数据的情况下 \n            if (!_.isArray(d[0])) {\n                arr.push(d);\n                return;\n            };\n\n            var varr = [];\n            var len = d[0].length;\n            var vLen = d.length;\n\n            for (var i = 0; i < len; i++) {\n                var up_count = 0;\n                var up_i = 0;\n\n                var down_count = 0;\n                var down_i = 0;\n\n                for (var ii = 0; ii < vLen; ii++) {\n\n                    var _val = d[ii][i];\n                    if (!_val && _val !== 0) {\n                        continue;\n                    };\n\n                    min == undefined && (min = _val)\n                    min = Math.min(min, _val);\n\n                    if (_val >= 0) {\n                        up_count += _val;\n                        up_i++\n                    } else {\n                        down_count += _val;\n                        down_i++\n                    }\n                }\n                up_i && varr.push(up_count);\n                down_i && varr.push(down_count);\n            };\n            arr.push(varr);\n        });\n        arr.push(min);\n        return _.flatten(arr);\n    }\n\n    //val 要被push到datasection 中去的 值\n    //主要是用在markline等组件中，当自己的y值超出了yaxis的范围\n    setWaterLine(val) {\n        if (val <= this.waterLine) return;\n        this.waterLine = val;\n        if (val < _.min(this.dataSection) || val > _.max(this.dataSection)) {\n            //waterLine不再当前section的区间内，需要重新计算整个datasection    \n            this.setDataSection();\n            this.calculateProps();\n        };\n    }\n\n    _sort() {\n        if (this.sort) {\n            var sort = this._getSortType();\n            if (sort == \"desc\") {\n\n                this.dataSection.reverse();\n\n                //dataSectionGroup 从里到外全部都要做一次 reverse， 这样就可以对应上 dataSection.reverse()\n                _.each(this.dataSectionGroup, function (dsg, i) {\n                    dsg.reverse();\n                });\n                this.dataSectionGroup.reverse();\n                //dataSectionGroup reverse end\n            };\n        };\n    }\n\n    _getSortType() {\n        var _sort;\n        if (_.isString(this.sort)) {\n            _sort = this.sort;\n        }\n        if (!_sort) {\n            _sort = \"asc\";\n        }\n        return _sort;\n    }\n\n    _middleweight() {\n        if (this.middleweight) {\n            //支持多个量级的设置\n\n            if (!_.isArray(this.middleweight)) {\n                this.middleweight = [this.middleweight];\n            };\n\n            //拿到dataSection中的min和 max 后，用middleweight数据重新设置一遍dataSection\n            var dMin = _.min(this.dataSection);\n            var dMax = _.max(this.dataSection);\n            var newDS = [dMin];\n            var newDSG = [];\n\n            for (var i = 0, l = this.middleweight.length; i < l; i++) {\n                var preMiddleweight = dMin;\n                if (i > 0) {\n                    preMiddleweight = this.middleweight[i - 1];\n                };\n                var middleVal = preMiddleweight + parseInt((this.middleweight[i] - preMiddleweight) / 2);\n\n                newDS.push(middleVal);\n                newDS.push(this.middleweight[i]);\n\n                newDSG.push([\n                    preMiddleweight,\n                    middleVal,\n                    this.middleweight[i]\n                ]);\n            };\n            var lastMW = this.middleweight.slice(-1)[0];\n\n            if (dMax > lastMW) {\n                newDS.push(lastMW + (dMax - lastMW) / 2);\n                newDS.push(dMax);\n                newDSG.push([\n                    lastMW,\n                    lastMW + (dMax - lastMW) / 2,\n                    dMax\n                ]);\n            }\n\n            //好了。 到这里用简单的规则重新拼接好了新的 dataSection\n            this.dataSection = newDS;\n            this.dataSectionGroup = newDSG;\n\n        };\n    }\n\n    //origin 对应 this.origin 的值\n    _getOriginTrans(origin) {\n        var pos = 0;\n\n        var dsgLen = this.dataSectionGroup.length;\n        var groupLength = this.axisLength / dsgLen;\n\n        for (var i = 0, l = dsgLen; i < l; i++) {\n\n            var ds = this.dataSectionGroup[i];\n\n            if (this.layoutType == \"proportion\") {\n                var min = _.min(ds);\n                var max = _.max(ds);\n\n                var amountABS = Math.abs(max - min);\n\n                if (origin >= min && origin <= max) {\n                    pos = ((origin - min) / amountABS * groupLength + i * groupLength);\n                    break;\n                };\n\n\n            } else {\n                /* TODO: 貌似 非proportion 布局 下面的_originTrans 没毛意义啊，先注释掉\n                var valInd = _.indexOf(ds , origin);\n                if( valInd != -1 ){\n                    if( this.layoutType == \"rule\" ){\n                        pos = valInd / (ds.length - 1) * groupLength; \n                    };\n                    if( this.layoutType == \"peak\" ){\n                        pos = ( groupLength/ds.length ) * (valInd+1) - ( groupLength/ds.length )/2;\n                    };\n                };\n                */\n            }\n        };\n\n        if (this.sort == \"desc\") {\n            //如果是倒序的\n            pos = -(groupLength - pos);\n        };\n\n        return parseInt(pos);\n    }\n\n    //opt { val ind pos } 一次只能传一个\n    _getLayoutDataOf(opt) {\n        var props = [\"val\", \"ind\", \"pos\"];\n        var prop;\n        _.each(props, function (_p) {\n            if (_p in opt) {\n                prop = _p;\n            }\n        });\n\n        var layoutData;\n        _.each(this.dataSectionLayout, function (item) {\n            if (item[prop] === opt[prop]) {\n                layoutData = item;\n            };\n        });\n\n        return layoutData || {};\n    }\n\n    getPosOfVal(val) {\n\n        /* val可能会重复，so 这里得到的会有问题，先去掉\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _pos = this._getLayoutDataOf({ val : val }).pos;\n        if( _pos != undefined ){\n            return _pos;\n        };\n        */\n\n        return this.getPosOf({\n            val: val\n        });\n    }\n    getPosOfInd(ind) {\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _pos = this._getLayoutDataOf({ ind: ind }).pos;\n        if (_pos != undefined) {\n            return _pos;\n        };\n\n        return this.getPosOf({\n            ind: ind\n        });\n    }\n\n    //opt {val, ind} val 或者ind 一定有一个\n    getPosOf(opt) {\n        var pos;\n\n        var cellCount = this._getCellCount(); //dataOrg上面的真实数据节点数，把轴分成了多少个节点\n\n        if (this.layoutType == \"proportion\") {\n            var dsgLen = this.dataSectionGroup.length;\n            var groupLength = this.axisLength / dsgLen;\n            for (var i = 0, l = dsgLen; i < l; i++) {\n                var ds = this.dataSectionGroup[i];\n                var min = _.min(ds);\n                var max = _.max(ds);\n                var val = \"val\" in opt ? opt.val : this.getValOfInd(opt.ind);\n                if (val >= min && val <= max) {\n                    var _origin = this.origin;\n                    //如果 origin 并不在这个区间\n                    if (_origin < min || _origin > max) {\n                        _origin = min;\n                    } else {\n                        //如果刚好在这个区间Group\n\n                    };\n                    var maxGroupDisABS = Math.max(Math.abs(max - _origin), Math.abs(_origin - min));\n                    var amountABS = Math.abs(max - min);\n                    var h = (maxGroupDisABS / amountABS) * groupLength;\n                    pos = (val - _origin) / maxGroupDisABS * h + i * groupLength;\n\n                    if (isNaN(pos)) {\n                        pos = parseInt(i * groupLength);\n                    };\n\n                    break;\n                }\n            }\n        } else {\n\n            if (cellCount == 1) {\n                //如果只有一数据，那么就全部默认在正中间\n                pos = this.axisLength / 2;\n            } else {\n                //TODO 这里在非proportion情况下，如果没有opt.ind 那么getIndexOfVal 其实是有风险的，\n                //因为可能有多个数据的val一样\n\n                var valInd = \"ind\" in opt ? opt.ind : this.getIndexOfVal(opt.val);\n                if (valInd != -1) {\n                    if (this.layoutType == \"rule\") {\n                        //line 的xaxis就是 rule\n                        pos = valInd / (cellCount - 1) * this.axisLength;\n                    };\n                    if (this.layoutType == \"peak\") {\n                        //bar的xaxis就是 peak\n                        /*\n                        pos = (this.axisLength/cellCount) \n                              * (valInd+1) \n                              - (this.axisLength/cellCount)/2;\n                        */\n                        var _cellLength = this.getCellLength();\n                        pos = _cellLength * (valInd + 1) - _cellLength / 2;\n                    };\n                };\n            };\n\n        };\n\n        !pos && (pos = 0);\n\n        pos = Number(pos.toFixed(1)) + this._originTrans;\n\n        return Math.abs(pos);\n    }\n\n    getValOfPos(pos) {\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _val = this._getLayoutDataOf({ pos: pos }).val;\n        if (_val != undefined) {\n            return _val;\n        };\n\n        return this._getValOfInd(this.getIndexOfPos(pos));\n    }\n\n    //ds可选\n    getValOfInd(ind) {\n\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _val = this._getLayoutDataOf({ ind: ind }).val;\n        if (_val != undefined) {\n            return _val;\n        };\n\n        return this._getValOfInd(ind);\n\n        /*\n        if (this.layoutType == \"proportion\") {\n        \n        } else {\n            //这里的index是直接的对应dataOrg的索引\n            var org = ds ? ds : _.flatten(this.dataOrg);\n            return org[ind];\n        };\n        */\n\n    }\n\n    //这里的ind\n    _getValOfInd(ind, ds) {\n        var me = this;\n\n        var org = _.flatten(this.dataOrg);\n        var val;\n\n        if (this.layoutType == \"proportion\") {\n\n            var groupLength = this.axisLength / this.dataSectionGroup.length;\n            _.each(this.dataSectionGroup, function (ds, i) {\n                if (parseInt(ind / groupLength) == i || i == me.dataSectionGroup.length - 1) {\n                    var min = _.min(ds);\n                    var max = _.max(ds);\n                    val = min + (max - min) / groupLength * (ind - groupLength * i);\n                    return false;\n                }\n            });\n\n        } else {\n            val = org[ind];\n        };\n        return val;\n    }\n\n    getIndexOfPos(pos) {\n\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _ind = this._getLayoutDataOf({ pos: pos }).ind;\n        if (_ind != undefined) {\n            return _ind;\n        };\n\n        var ind = 0;\n\n        var cellLength = this.getCellLengthOfPos(pos);\n        var cellCount = this._getCellCount();\n\n        if (this.layoutType == \"proportion\") {\n            //proportion中的index以像素为单位 所以，传入的像素值就是index\n            return pos;\n        } else {\n\n            if (this.layoutType == \"peak\") {\n                ind = parseInt(pos / cellLength);\n                if (ind == cellCount) {\n                    ind = cellCount - 1;\n                }\n            };\n\n            if (this.layoutType == \"rule\") {\n                ind = parseInt((pos + (cellLength / 2)) / cellLength);\n                if (cellCount == 1) {\n                    //如果只有一个数据\n                    ind = 0;\n                }\n            };\n        };\n\n        return ind\n    }\n\n    getIndexOfVal(val) {\n\n        var valInd = -1;\n        if (this.layoutType == \"proportion\") {\n\n            //先检查下 dataSectionLayout 中有没有对应的记录\n            var _ind = this._getLayoutDataOf({ val: val }).ind;\n            if (_ind != undefined) {\n                return _ind;\n            };\n\n            //因为在proportion中index 就是 pos\n            //所以这里要返回pos\n            valInd = this.getPosOfVal(val);\n        } else {\n            _.each(this.dataOrg, function (arr) {\n                _.each(arr, function (list) {\n                    var _ind = _.indexOf(list, val);\n                    if (_ind != -1) {\n                        valInd = _ind;\n                    };\n                });\n            });\n        }\n\n\n        return valInd;\n    }\n\n    getCellLength() {\n\n        if (this._cellLength !== null) {\n            return this._cellLength;\n        };\n\n        //ceilWidth默认按照peak算, 而且不能按照dataSection的length来做分母\n        var axisLength = this.axisLength;\n        var cellLength = axisLength;\n        var cellCount = this._getCellCount();\n\n        if (cellCount) {\n\n            if (this.layoutType == \"proportion\") {\n                cellLength = 1;\n            } else {\n                //默认按照 peak 也就是柱状图的需要的布局方式\n                cellLength = axisLength / cellCount;\n                if (this.layoutType == \"rule\") {\n                    if (cellCount == 1) {\n                        cellLength = axisLength / 2;\n                    } else {\n                        cellLength = axisLength / (cellCount - 1)\n                    };\n                };\n\n                if (this.posParseToInt) {\n                    cellLength = parseInt(cellLength);\n                };\n            }\n        };\n\n        this._cellLength = cellLength;\n\n        return cellLength;\n\n    }\n\n    //这个getCellLengthOfPos接口主要是给tips用，因为tips中只有x信息\n    getCellLengthOfPos(pos) {\n        return this.getCellLength();\n    }\n\n    //pos目前没用到，给后续的高级功能预留接口\n    getCellLengthOfInd(pos) {\n        return this.getCellLength();\n    }\n\n    _getCellCount() {\n\n        if (this._cellCount !== null) {\n            return this._cellCount;\n        };\n\n        //总共有几个数据节点，默认平铺整个dataOrg，和x轴的需求刚好契合，而y轴目前不怎么需要用到这个\n        var cellCount = 0;\n        if (this.layoutType == \"proportion\") {\n            cellCount = this.axisLength;\n        } else {\n\n            if (this.dataOrg.length && this.dataOrg[0].length && this.dataOrg[0][0].length) {\n                cellCount = this.dataOrg[0][0].length;\n            }\n        };\n        this._cellCount = cellCount;\n        return cellCount;\n    }\n\n}","/**\n* 把原始的数据\n* field1 field2 field3\n*   1      2      3\n*   2      3      4\n* 这样的数据格式转换为内部的\n* [{field:'field1',index:0,data:[1,2]} ......]\n* 这样的结构化数据格式。\n*/\nimport _ from \"./underscore\"\n\n//如果应用传入的数据是[{name:name, sex:sex ...} , ...] 这样的数据，就自动转换为chartx需要的矩阵格式数据\nfunction parse2MatrixData( list )\n{\n    if( list === undefined || list === null ){\n        list = [];\n    };\n    //检测第一个数据是否为一个array, 否就是传入了一个json格式的数据\n    if( list.length > 0 && !_.isArray( list[0] ) ){\n        var newArr = [];\n        var fields = [];\n        var fieldNum = 0;\n        for( var i=0,l=list.length ; i<l ; i++ ){\n            var row = list[i];\n            if( i == 0 ){\n                for( var f in row ){\n                    fields.push( f ); \n                };\n                newArr.push( fields );\n                fieldNum = fields.length;\n            };\n            var _rowData = [];\n            for( var ii=0 ; ii<fieldNum ; ii++ ){\n                _rowData.push( row[ fields[ii] ] );\n            };\n            newArr.push( _rowData );\n        };\n        \n        return newArr;\n    } else {\n        return list\n    }\n} \n\nexport default function( data, opt ){\n\n    //数据做一份拷贝，避免污染源数据\n    data = JSON.parse( JSON.stringify( data ) );\n    \n    var dataFrame  = {        //数据框架集合\n        length        : 0,\n        org           : [],   //最原始的数据，一定是个行列式，因为如果发现是json格式数据，会自动转换为行列式\n        data          : [],   //最原始的数据转化后的数据格式：[o,o,o] o={field:'val1',index:0,data:[1,2,3]}\n        getRowDataAt  : _getRowDataAt,\n        getRowDataOf  : _getRowDataOf,\n        getFieldData  : _getFieldData,\n        getDataOrg    : getDataOrg,\n        fields        : [],\n        range         : {\n            start     : 0,\n            end       : 0\n        }\n    };\n\n    if( !data || data.length == 0 ){\n        return dataFrame\n    };\n\n    //检测第一个数据是否为一个array, 否就是传入了一个json格式的数据\n    if( data.length > 0 && !_.isArray( data[0] ) ){\n        data = parse2MatrixData( data );\n    };\n    dataFrame.length = data.length - 1;\n\n    //设置好数据区间end值\n    dataFrame.range.end = dataFrame.length - 1;\n    //然后检查opts中是否有dataZoom.range\n    if( opt && opt.dataZoom && opt.dataZoom.range ){\n        _.extend( dataFrame.range, opt.dataZoom.range );\n    };\n\n    if( data.length && data[0].length && !~data[0].indexOf(\"__index__\") ){\n        //如果数据中没有用户自己设置的__index__，那么就主动添加一个__index__，来记录元数据中的index\n        for( var i=0,l=data.length; i<l; i++ ){\n            if( !i ){\n                data[0].push( \"__index__\" );\n            } else {\n                data[i].push( i-1 );\n            }\n        }\n    }\n\n    dataFrame.org = data;\n    dataFrame.fields = data[0] ? data[0] : []; //所有的字段集合;\n\n    \n\n    var total = [];//已经处理成[o,o,o]   o={field:'val1',index:0,data:[1,2,3]}\n    for(var a = 0, al = dataFrame.fields.length; a < al; a++){\n        var o = {};\n        o.field = dataFrame.fields[a];\n        o.index = a;\n        o.data  = [];\n        total.push(o);\n    };\n    dataFrame.data = total;\n\n    //填充好total的data并且把属于yAxis的设置为number\n    for(var a = 1, al = data.length; a < al; a++){\n        for(var b = 0, bl = data[a].length; b < bl; b++){\n            var _val = data[a][b];\n            //如果用户传入的数据是个number，那么就转换为真正的Number吧\n            //‘223’ --》 223\n            if( !isNaN( _val ) && _val !== \"\" && _val !== null ){\n                _val = Number( _val );\n            };\n            total[b].data.push( _val );\n            //total[b].data.push( data[a][b] );\n        }\n    };\n\n    //会按照$field的格式转换成对应一一对应的 org 的结构\n    function getDataOrg( $field, format, totalList , lev){\n        \n        if( !lev ) lev = 0;\n\n        var arr = totalList || total;\n        if( !arr ){\n            return;\n        }\n        if( !format ){\n            format = function( e ){ return e }\n        };\n\n        function _format( data ){\n            for( var i=0,l=data.length; i<l; i++ ){\n                data[i] = format( data[i] );\n            };\n            return data;\n        };\n\n        if( !_.isArray($field) ){\n            $field = [$field];\n        };\n\n        //这个时候的arr只是totalList的过滤，还没有完全的按照$field 中的排序\n        var newData = [];\n        for( var i=0,l=$field.length; i<l ; i++ ){\n            var fieldInTotal = false; //如果该field在数据里面根本没有，那么就说明是无效的field配置\n            if( _.isArray($field[i]) ){\n                newData.push( getDataOrg( $field[i], format, totalList , lev+1) );\n            } else {\n            \n                var _fieldData = newData;\n                if( !lev ){\n                    _fieldData = [];\n                };\n                for( var ii=0,iil=arr.length ; ii<iil ; ii++ ){\n                     if( $field[i] == arr[ii].field ){\n                         fieldInTotal = true;\n                         _fieldData.push( _format( arr[ii].data.slice( dataFrame.range.start, dataFrame.range.end+1 ) ) );\n                         break;\n                     }\n                };\n                if( !lev ){\n                    newData.push( _fieldData );\n                };\n            };\n        }\n        return newData;\n    };\n\n    /*\n     * 获取某一行数据\n    */ \n    function _getRowDataAt(index){\n        var o = {}\n        var data = dataFrame.data\n        for(var a = 0; a < data.length; a++){\n            o[data[a].field] = data[a].data[ dataFrame.range.start + index ]\n        };\n        return o\n    }\n\n    /**\n     * obj => {uv: 100, pv: 10 ...}\n     */\n    function _getRowDataOf( obj ){\n        !obj && (obj={});\n        var arr = [];\n\n        var expCount = 0;\n        for( var p in obj ){\n            expCount++;\n        };\n\n        if( expCount ){\n            for( var i=dataFrame.range.start; i< dataFrame.range.end; i++ ){\n                var matchNum = 0;\n                _.each( dataFrame.data, function( fd ){\n                    if( fd.field in obj && fd.data[i] == obj[ fd.field ] ){\n                        matchNum++;\n                    }\n                } );\n                if( matchNum == expCount ){\n                    //说明这条数据是完全和查询\n                    arr.push( _getRowDataAt(i) );\n                };\n            };\n        };\n\n        return arr;\n    }\n\n    function _getFieldData( field ){\n        var data;\n        _.each( dataFrame.data , function( d ){\n            if( d.field == field ){\n                data = d;\n            }\n        } ); \n        if( data ){\n            return data.data.slice( dataFrame.range.start, dataFrame.range.end+1 );\n        } else {\n            return []\n        }\n    }\n\n    return dataFrame;\n}","import _ from \"./underscore\";\n\nconst RESOLUTION = window.devicePixelRatio || 1;\n\nvar addOrRmoveEventHand = function( domHand , ieHand ){\n    if( document[ domHand ] ){\n        function eventDomFn( el , type , fn ){\n            if( el.length ){\n                for(var i=0 ; i < el.length ; i++){\n                    eventDomFn( el[i] , type , fn );\n                }\n            } else {\n                el[ domHand ]( type , fn , false );\n            }\n        };\n        return eventDomFn\n    } else {\n        function eventFn( el , type , fn ){\n            if( el.length ){\n                for(var i=0 ; i < el.length ; i++){\n                    eventFn( el[i],type,fn );\n                }\n            } else {\n                el[ ieHand ]( \"on\"+type , function(){\n                    return fn.call( el , window.event );\n                });\n            }\n        };\n        return eventFn\n    }\n};\n\nexport default {\n    // dom操作相关代码\n    query : function(el){\n        if(_.isString(el)){\n           return document.getElementById(el)\n        }\n        if(el.nodeType == 1){\n           //则为一个element本身\n           return el\n        }\n        if(el.length){\n           return el[0]\n        }\n        return null;\n    },\n    offset : function(el){\n        var box = el.getBoundingClientRect(), \n        doc = el.ownerDocument, \n        body = doc.body, \n        docElem = doc.documentElement, \n\n        // for ie  \n        clientTop = docElem.clientTop || body.clientTop || 0, \n        clientLeft = docElem.clientLeft || body.clientLeft || 0, \n\n        // In Internet Explorer 7 getBoundingClientRect property is treated as physical, \n        // while others are logical. Make all logical, like in IE8. \n        zoom = 1; \n        if (body.getBoundingClientRect) { \n            var bound = body.getBoundingClientRect(); \n            zoom = (bound.right - bound.left)/body.clientWidth; \n        } \n        if (zoom > 1){ \n            clientTop = 0; \n            clientLeft = 0; \n        } \n        var top = box.top/zoom + (window.pageYOffset || docElem && docElem.scrollTop/zoom || body.scrollTop/zoom) - clientTop, \n            left = box.left/zoom + (window.pageXOffset|| docElem && docElem.scrollLeft/zoom || body.scrollLeft/zoom) - clientLeft; \n\n        return { \n            top: top, \n            left: left \n        }; \n    },\n    addEvent : addOrRmoveEventHand( \"addEventListener\" , \"attachEvent\" ),\n    removeEvent : addOrRmoveEventHand( \"removeEventListener\" , \"detachEvent\" ),\n    pageX: function(e) {\n        if (e.pageX) return e.pageX;\n        else if (e.clientX)\n            return e.clientX + (document.documentElement.scrollLeft ?\n                    document.documentElement.scrollLeft : document.body.scrollLeft);\n        else return null;\n    },\n    pageY: function(e) {\n        if (e.pageY) return e.pageY;\n        else if (e.clientY)\n            return e.clientY + (document.documentElement.scrollTop ?\n                    document.documentElement.scrollTop : document.body.scrollTop);\n        else return null;\n    },\n    /**\n     * 创建dom\n     * @param {string} id dom id 待用\n     * @param {string} type : dom type， such as canvas, div etc.\n     */\n    createCanvas : function( _width , _height , id) {\n        var canvas = document.createElement(\"canvas\");\n        canvas.style.position = 'absolute';\n        canvas.style.width  = _width + 'px';\n        canvas.style.height = _height + 'px';\n        canvas.style.left   = 0;\n        canvas.style.top    = 0;\n        canvas.setAttribute('width', _width * RESOLUTION);\n        canvas.setAttribute('height', _height * RESOLUTION);\n        canvas.setAttribute('id', id);\n        return canvas;\n    },\n    createView: function(_width , _height, id){\n        var view = document.createElement(\"div\");\n        view.className = \"canvax-view\";\n        view.style.cssText += \"position:relative;width:100%;height:100%;\"\n\n        var stageView = document.createElement(\"div\");\n        stageView.style.cssText += \"position:absolute;width:\" + _width + \"px;height:\" + _height +\"px;\"\n\n        //用来存放一些dom元素\n        var domView = document.createElement(\"div\");\n        domView.style.cssText += \"position:absolute;width:\" + _width + \"px;height:\" + _height +\"px;\"\n\n        view.appendChild(stageView);\n        view.appendChild(domView);\n        \n        return {\n            view : view,\n            stageView: stageView,\n            domView: domView\n        }\n    }\n    //dom相关代码结束\n};","/**\n * 系统皮肤\n */\nconst _colors = [\"#ff8533\",\"#73ace6\",\"#82d982\",\"#e673ac\",\"#cd6bed\",\"#8282d9\",\"#c0e650\",\"#e6ac73\",\"#6bcded\",\"#73e6ac\",\"#ed6bcd\",\"#9966cc\"];\nexport default {\n    colors : _colors,\n    set : function( colors ){\n        this.colors = colors;\n        /*\n        var me = this;\n        _.each( colors, function( color , i ){\n            me.colors[i] = color;\n        } );\n        */\n        return this.colors;\n    },\n    get : function( ){\n        return this.colors\n    }\n}","import _ from \"./underscore\";\n\nlet cloneOptions = (opt) => {\n    return _.clone(opt);\n};\n\nlet cloneData = (data) => {\n    return JSON.parse(JSON.stringify(data));\n};\n\nlet is3dOpt = (opt) => {\n    var chartx3dCoordTypes = [\"box\", \"polar3d\"];\n    return opt.coord && opt.coord.type && chartx3dCoordTypes.indexOf(opt.coord.type) > -1;\n};\n\nlet getDefaultProps = ( dProps, target={} ) => {\n    for( var p in dProps ){\n        if( !!p.indexOf( \"_\" ) ){\n            if( !dProps[ p ].propertys ){\n                //如果这个属性没有子属性了，那么就说明这个已经是叶子节点了\n                if( _.isObject( dProps[ p ] ) && !_.isFunction(dProps[ p ]) && !_.isArray(dProps[ p ]) ){\n                    target[ p ] = dProps[ p ].default;\n                } else {\n                    target[ p ] = dProps[ p ];\n                };\n            } else {\n                target[ p ] = {};\n                getDefaultProps( dProps[ p ].propertys, target[ p ] );\n            }\n        };\n    }\n    return target;\n};\n\nexport { cloneOptions, cloneData, is3dOpt, getDefaultProps }","//图表皮肤\nimport globalTheme from \"./theme\";\nimport _ from \"./underscore\";\nimport dom from \"./dom\";\nimport {is3dOpt,cloneData,cloneOptions} from \"./tools\";\n\nexport default {\n    create : function( el, _data, _opt ){\n        var chart = null;\n        var me = this;\n\n        var data = cloneData( _data );\n        var opt  = cloneOptions( _opt );  \n\n        var _destroy = function(){\n            me.instances[ chart.id ] = null;\n            delete me.instances[ chart.id ];\n        };\n\n        //这个el如果之前有绘制过图表，那么就要在instances中找到图表实例，然后销毁\n        var chart_id = dom.query(el).getAttribute(\"chart_id\");\n        if( chart_id != undefined ){\n            var _chart = me.instances[ chart_id ];\n            if( _chart ){\n                _chart.destroy();\n                _chart.off && _chart.off(\"destroy\" , _destroy)\n            };\n            delete me.instances[ chart_id ];\n        };\n\n        //图表维度\n        var dimension = 2;\n        if( is3dOpt( _opt ) ){\n            dimension = 3;\n        };\n\n        var componentModules = me._getComponentModules( dimension );\n\n        //如果用户没有配置coord，说明这个图表是一个默认目标系的图表，比如标签云\n        var Chart = me._getComponentModule('chart', dimension);\n\n        //try {\n            chart = new Chart( el, data, opt, componentModules );\n            if( chart ){\n                chart.draw();\n                \n                me.instances[ chart.id ] = chart;\n                chart.on(\"destroy\" , _destroy);\n            };\n        //} catch(err){\n        //    throw \"Chatx Error：\" + err\n        //};\n\n        return chart;\n    },\n    setGlobalTheme: function( colors ){\n        globalTheme.set( colors );\n    },\n    getGlobalTheme: function(){\n        return globalTheme.get();\n    },\n    \n    instances : {},\n    getChart : function( chartId ){\n        return this.instances[ chartId ];\n    },\n    resize : function(){\n        //调用全局的这个resize方法，会把当前所有的 chart instances 都执行一遍resize\n        for( var c in this.instances ){\n            this.instances[ c ].resize();\n        }\n    },\n    \n    //第二个参数是用户要用来覆盖chartpark中的配置的options\n    getOptions : function( chartPark_cid , userOptions ){\n        //chartPark_cid,chartpark中的图表id\n        if( !this.options[ chartPark_cid ] ){\n            return userOptions || {};\n        };\n        var JsonSerialize = {\n            prefix: '[[JSON_FUN_PREFIX_',\n            suffix: '_JSON_FUN_SUFFIX]]'\n        };\n        var parse = function(string){\n            return JSON.parse( string ,function(key, value){\n                if((typeof value === 'string') && \n                   (value.indexOf(JsonSerialize.suffix) > 0) && \n                   (value.indexOf(JsonSerialize.prefix) == 0)\n                ){\n                    return (new Function('return ' + value.replace(JsonSerialize.prefix, '').replace(JsonSerialize.suffix, '')))();\n                };\n                return value;\n            }) || {};\n        };\n        var opt = parse( decodeURIComponent( this.options[ chartPark_cid ] || {} ) );\n        if( userOptions ){\n            opt = _.extend( true, opt, userOptions );\n        };\n        return opt;\n    },\n\n    components: {\n        c_2d : {\n            /*\n            modules:{\n                coord : {\n                    empty : ..,\n                    rect  : ..,\n                    ...\n                },\n                graphs : {\n                    //empty : .., //一般只有coord才会有empty\n                    bar   : ..,\n                    ...\n                }\n            },\n            get: function( name, type ){}\n            */\n        },\n        c_3d : {\n            //所有3d组件,同上\n        }\n    },\n    _getComponentModules( dimension ){\n        var comps = this.components.c_2d;\n        if( dimension == 3 ){\n            comps = this.components.c_3d;\n        };\n        if( !comps.modules ){\n            comps.modules = {};\n        };\n        if( !comps.get ){\n            comps.get = function( name, type ){\n                if( !type ){\n                    type = \"empty\";\n                }; \n                name = name.toLowerCase();\n                type = type.toLowerCase();\n                var _module = comps.modules[ name ];\n                if( _module && _module[type] ){\n                    return _module[type]\n                };\n            };\n        };\n        return comps;\n    },\n    /**\n     * @param {compModule} 要注册进去的模块名称\n     * @param {name} 要获取的comp名称\n     * @param { dimension,type } 后面可以传传两个参数 \n     * @param { dimension } 如果有四个参数，那么第三个肯定是type，第四个肯定是dimension \n     */\n    registerComponent( compModule, name )\n    {\n        var dimension = 2;\n        var type = \"empty\";\n        \n\n        if( arguments.length == 3 ){\n            var arg2 = arguments[2]\n            if( _.isNumber( arg2 ) ){\n                if( arg2 == 3 ){\n                    dimension = 3\n                }\n            };\n            if( _.isString( arg2 ) ){\n                type = arg2;\n            };\n        };\n        if( arguments.length == 4 ){\n            //那么肯定是有传 type  dimension 两个值\n            type = arguments[ 2 ];\n            if( arguments[3] == 3 ){\n                dimension = 3;\n            };\n        };\n        \n        var comps = this._getComponentModules( dimension ).modules;\n\n        name = name.toLowerCase();\n        type = type.toLowerCase();\n\n        var _comp = comps[ name ];\n        if( !_comp ){\n            _comp = comps[ name ] = {\n                \n            };\n        };\n\n        if( !_comp[ type ] ){\n            _comp[ type ] = compModule;\n        };\n        return comps;\n    },\n    /**\n     * \n     * @param {name} 要获取的comp名称\n     * @param { dimension,type } 后面可以传传两个参数 \n     * @param { dimension } 如果有三个参数，那么第二个肯定是type，第三个肯定是dimension \n     */\n    _getComponentModule( name ){\n        var dimension = 2;\n        var type = \"empty\";\n\n        if( arguments.length == 2 ){\n            var arg1 = arguments[1]\n            if( _.isNumber( arg1 ) ){\n                if( arg1 == 3 ){\n                    dimension = 3\n                }\n            };\n            if( _.isString( arg1 ) ){\n                type = arg1;\n            };\n        };\n        if( arguments.length == 3 ){\n            //那么肯定是有传 type  dimension 两个值\n            type = arguments[ 1 ];\n            if( arguments[2] == 3 ){\n                dimension = 3;\n            };\n        };\n\n        name = name.toLowerCase();\n        type = type.toLowerCase();\n        var _comp = this._getComponentModules( dimension ).modules[ name ];\n        return _comp ? _comp[ type ] : undefined;\n    }\n};","//十六进制颜色值的正则表达式 \nvar reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/; \n\n/*16进制颜色转为RGB格式*/  \nexport function colorRgb( hex ){  \n    var sColor = hex.toLowerCase();  \n    if(sColor && reg.test(sColor)){  \n        if(sColor.length === 4){  \n            var sColorNew = \"#\";  \n            for(var i=1; i<4; i+=1){  \n                sColorNew += sColor.slice(i,i+1).concat(sColor.slice(i,i+1));     \n            }  \n            sColor = sColorNew;  \n        }  \n        //处理六位的颜色值  \n        var sColorChange = [];\n        for(var i=1; i<7; i+=2){  \n            sColorChange.push(parseInt(\"0x\"+sColor.slice(i,i+2)));    \n        }  \n        return \"RGB(\" + sColorChange.join(\",\") + \")\";  \n    } else {  \n        return sColor;    \n    }  \n};\n\nexport function colorRgba(hex , a){\n    return colorRgb( hex ).replace(')', ','+a+')').replace('RGB', 'RGBA');\n};\n\nexport function hexTorgb(hex, out){\n\t//hex可能是“#ff0000” 也可能是 0xff0000\n\tif( hex.replace ){\n\t   hex = parseInt( hex.replace(\"#\" , \"0X\") , 16 );\n    };\n\n    out = out || [];\n\n    out[0] = ((hex >> 16) & 0xFF) / 255;\n    out[1] = ((hex >> 8) & 0xFF) / 255;\n    out[2] = (hex & 0xFF) / 255;\n\n    return out;\n}\n\nexport function hexTostring(hex){\n     hex = hex.toString(16);\n     hex = '000000'.substr(0, 6 - hex.length) + hex;\n\n     return `#${hex}`;\n}\n\nexport function rgbTohex(rgb){\n\treturn (((rgb[0] * 255) << 16) + ((rgb[1] * 255) << 8) + (rgb[2] * 255));\n}\n","import _ from \"./underscore\"\n\nconst aRound = 360; //一圈的度数\nconst Cos = Math.cos;\nconst Sin = Math.sin;\n\nexport default class Polar {\n    constructor(opt = {}, dataFrame = []) {\n\n        this._opt = _.clone(opt);\n        this.dataFrame = dataFrame;\n\n        this.axisLength = 1;\n\n        this.dataOrg = [];\n\n        this.startAngle = this._opt.startAngle;\n        this.allAngles = Math.min(360, this._opt.allAngles);\n        this.sort = this._opt.sort;\n\n        this.layoutData = []; //和dataSection一一对应的，每个值的pos,agend,dregg,centerPos\n\n\n\n        this.maxRadius = 0; //最大半径值\n        this.minRadius = 0; //最小半径值 \n\n    }\n\n    calculateProps() {\n        let axisLength = 0;\n        let percentage = 0;\n        let currentAngle = 0;\n        let opt = this._opt;\n        let angle, endAngle, cosV, sinV, midAngle, quadrant;\n        let percentFixedNum = 2;\n\n        let outRadius = opt.node.outRadius;\n        let innerRadius = opt.node.innerRadius;\n        let moveDis = opt.node.moveDis;\n\n        this.layoutData.forEach((item, i) => {\n            if (!item.enabled) return;\n            axisLength += isNaN(+item.value) ? 0 : +item.value;\n\n            if (item.radiusField) {\n                this.maxRadius = Math.max(item.radiusValue, axisLength);\n                this.minRadius = Math.min(item.radiusValue, axisLength);\n            }\n        })\n\n        this.axisLength = axisLength;\n\n        if (axisLength > 0) {\n\n            //原始算法\n            // currentAngle = + opt.startAngle % 360;\n            // limitAngle = opt.allAngles + me.startAngle % me.allAngles;\n\n            //新的算法\n            //这里只是计算每个扇区的初始位置,所以这里求模就可以啦\n            currentAngle = _.euclideanModulo(this.startAngle, aRound);\n            // opt.allAngles = opt.allAngles > 0 ? opt.allAngles : aRound;\n            // limitAngle = opt.allAngles + _.euclideanModulo(opt.startAngle, opt.allAngles);\n\n            this.layoutData.forEach((item, i) => {\n                percentage = item.value / axisLength;\n                //enabled为false的sec，比率就设置为0\n                if (!item.enabled) {\n                    percentage = 0;\n                };\n\n                angle = this.allAngles * percentage;\n                //旧的算法\n                // endAngle = currentAngle + angle > limitAngle ? limitAngle : me.currentAngle + angle;\n                endAngle = currentAngle + angle;\n                midAngle = currentAngle + angle * 0.5;\n\n                cosV = Cos(_.degToRad(midAngle));\n                sinV = Sin(_.degToRad(midAngle));\n\n                cosV = cosV.toFixed(5);\n                sinV = sinV.toFixed(5);\n                quadrant = this.getAuadrant(midAngle);\n\n                //如果用户在配置中制定了半径字段,这里需要计算相对的半径比例值\n                if (!!item.radiusField) {\n                    // var _rr = Number(item.rowData[opt.node.radius]);\n                    outRadius = parseInt((opt.node.outRadius - opt.node.innerRadius) * ((item.radiusValue - this.minRadius) / (this.maxRadius - this.minRadius)) + opt.node.innerRadius);\n                };\n                _.extend(item, {\n                    outRadius,\n                    innerRadius,\n                    startAngle: currentAngle, //起始角度\n                    endAngle, //结束角度\n                    midAngle,  //中间角度\n\n                    moveDis,\n\n                    outOffsetx: moveDis * 0.7 * cosV, //focus的事实外扩后圆心的坐标x\n                    outOffsety: moveDis * 0.7 * sinV, //focus的事实外扩后圆心的坐标y\n\n                    centerx: outRadius * cosV,\n                    centery: outRadius * sinV,\n                    outx: (outRadius + moveDis) * cosV,\n                    outy: (outRadius + moveDis) * sinV,\n                    edgex: (outRadius + moveDis) * cosV,\n                    edgey: (outRadius + moveDis) * sinV,\n\n\n                    orginPercentage: percentage,\n                    percentage: (percentage * 100).toFixed(percentFixedNum),\n\n                    quadrant, //象限\n                    isRightSide: quadrant == 1 || quadrant == 4 ? 1 : 0,\n                    cosV,\n                    sinV\n                });\n\n                currentAngle += angle;\n\n\n            })\n\n        }\n\n\n    }\n    /**\n     *  重设数据后,需要调用setDataFrame与calculateProps 重新计算layoutData\n     * @param {ArryObject} dataFrame \n     */\n    resetData(dataFrame) {\n        this.dataFrame = dataFrame || [];\n\n        this.axisLength = 1;\n\n        this.dataOrg = [];\n        this.startAngle = this._opt.startAngle || -90;\n        this.allAngles = this._opt.allAngles || 360;\n\n        this.layoutData = [];\n    }\n    setOption(opt = {}) {\n        Object.assign(this._opt, opt);\n        this.startAngle = this._opt.startAngle;\n        this.allAngles = Math.min(360, this._opt.allAngles);\n        this.sort = this._opt.sort;\n    }\n    setDataFrame(dataFrame) {\n\n        let data = [];\n        let opt = this._opt;\n        let field = opt.field;\n        let labelField = opt.groupField || opt.label.field || opt.field;\n        let radiusField = opt.node.radius;\n\n        dataFrame = dataFrame || this.dataFrame;\n        this.dataFrame = dataFrame;\n\n        this.dataOrg = [];\n\n        for (let i = 0, l = dataFrame.length; i < l; i++) {\n            let rowData = dataFrame.getRowDataAt(i);\n\n            let layoutData = {\n                rowData: rowData,//把这一行数据给到layoutData引用起来\n                enabled: true,   //是否启用，显示在列表中\n\n                value: rowData[field],\n                label: rowData[labelField],\n                iNode: i\n            };\n\n            this.dataOrg.push(rowData[field]);\n\n            if (this._isFiled(radiusField, layoutData)) {\n                layoutData.radiusField = radiusField;\n                layoutData.radiusValue = rowData[radiusField];\n            }\n            data.push(layoutData);\n        };\n\n        if (this.sort) {\n            this.dataOrg = [];\n            data.sort((a, b) => {\n                if (this.sort == 'asc') {\n                    return a.value - b.value;\n                } else {\n                    return b.value - a.value;\n                }\n            });\n\n            //重新设定下ind\n            _.each(data, (d, i) => {\n                d.iNode = i;\n                this.dataOrg.push(d);\n            });\n        };\n\n        this.layoutData = data;\n        return data;\n    }\n\n    getLayoutData() {\n        return this.layoutData || [];\n    }\n\n    _isFiled(field, layoutData) {\n        return field && (_.isString(field) && field in layoutData.rowData)\n    }\n    getAuadrant(ang) { //获取象限\n\n        ang = _.euclideanModulo(ang, aRound);\n        let angleRatio = parseInt(ang / 90);\n        let _quadrant = 0;\n        switch (angleRatio) {\n            case 0:\n                _quadrant = 1;\n                break;\n            case 1:\n                _quadrant = 2;\n                break;\n            case 2:\n                _quadrant = 3;\n                break;\n            case 3:\n            case 4:\n                _quadrant = 4;\n                break;\n        }\n        return _quadrant;\n    }\n\n    /**\n     * 通过值或者索引返回数据集对象\n     * @param {Object} opt {val:xxx} 或 {ind:xxx} \n     */\n    _getLayoutDataOf(opt) {\n        //先提供 具体值 和 索引的计算\n        var props = [{ val: \"value\" }, { ind: \"iNode\" }];\n        var prop = props[Object.keys(opt)[0]];\n\n        var layoutData;\n        _.each(this.layoutData, function (item) {\n            if (item[prop] === opt[prop]) {\n                layoutData = item;\n            };\n        });\n\n        return layoutData || {};\n    }\n\n    getRadiansAtR() {\n        //基类不实现\n    }\n\n    static filterPointsInRect(points, origin, width, height) {\n        for (var i = 0, l = points.length; i < l; i++) {\n            if (!Polar.checkPointInRect(points[i], origin, width, height)) {\n                //该点不在root rect范围内，去掉\n                points.splice(i, 1);\n                i-- , l--;\n            }\n        };\n        return points;\n    }\n\n    static checkPointInRect(p, origin, width, height) {\n        var _tansRoot = { x: p.x + origin.x, y: p.y + origin.y };\n        return !(_tansRoot.x < 0 || _tansRoot.x > width || _tansRoot.y < 0 || _tansRoot.y > height);\n    }\n\n    //检查由n个相交点分割出来的圆弧是否在rect内\n    static checkArcInRect(arc, r, origin, width, height) {\n        var start = arc[0];\n        var to = arc[1];\n        var differenceR = to.radian - start.radian;\n        if (to.radian < start.radian) {\n            differenceR = (Math.PI * 2 + to.radian) - start.radian;\n        };\n        var middleR = (start.radian + differenceR / 2) % (Math.PI * 2);\n        return Polar.checkPointInRect(Polar.getPointInRadianOfR(middleR, r), origin, width, height);\n    }\n\n    //获取某个点相对圆心的弧度值\n    static getRadianInPoint(point) {\n        var pi2 = Math.PI * 2;\n        return (Math.atan2(point.y, point.x) + pi2) % pi2;\n    }\n\n    //获取某个弧度方向，半径为r的时候的point坐标点位置\n    static getPointInRadianOfR(radian, r) {\n        var pi = Math.PI;\n        var x = Math.cos(radian) * r;\n        if (radian == (pi / 2) || radian == pi * 3 / 2) {\n            //90度或者270度的时候\n            x = 0;\n        };\n        var y = Math.sin(radian) * r;\n        if (radian % pi == 0) {\n            y = 0;\n        };\n        return {\n            x: x,\n            y: y\n        };\n    }\n\n    static getROfNum(num, dataSection, width, height) {\n        var r = 0;\n        var maxNum = _.max(dataSection);\n        var minNum = 0; //Math.min( this.rAxis.dataSection );\n        var maxR = parseInt(Math.max(width, height) / 2);\n\n        r = maxR * ((num - minNum) / (maxNum - minNum));\n        return r;\n    }\n\n    getPointsOfR(r, angleList) {\n        var points = [];\n        _.each(angleList, function (_a) {\n            //弧度\n            var _r = Math.PI * _a / 180;\n            var point = Polar.getPointInRadianOfR(_r, r);\n            points.push(point)\n        });\n        return points;\n    }\n\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * canvas 上委托的事件管理\n */\nimport _ from \"../underscore\";\n\nvar Event = function( evt ) {\n\tvar eventType = \"CanvaxEvent\"; \n    if( _.isString( evt ) ){\n    \teventType = evt;\n    };\n    if( _.isObject( evt ) && evt.type ){\n    \teventType = evt.type;\n    };\n\n    this.target = null;\n    this.currentTarget = null;\n    this.type   = eventType;\n    this.point  = null;\n\n    this._stopPropagation = false; //默认不阻止事件冒泡\n};\nEvent.prototype = {\n    stopPropagation : function() {\n        this._stopPropagation = true;\n    }\n};\n\nexport default Event","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * canvas 上委托的事件管理\n */\nimport _ from \"../underscore\";\n\nconst _mouseEvents = 'mousedown mouseup mouseover mousemove mouseout click dblclick'\n\nexport default {\n    _types : _mouseEvents.split(/,| /),\n    register : function( evts ){\n        if( !evts ) {\n            return;\n        };\n        if( _.isString( evts ) ){\n            evts = evts.split(/,| /);\n        };\n        this._types = _mouseEvents.split(/,| /).concat( evts );\n    },\n    get: function(){\n        return this._types;\n    }\n};","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 事件管理类\n */\nimport types from \"./types\";\nimport _ from \"../underscore\";\n\n\n/**\n * 构造函数.\n * @name EventDispatcher\n * @class EventDispatcher类是可调度事件的类的基类，它允许显示列表上的任何对象都是一个事件目标。\n */\nvar Manager = function() {\n    //事件映射表，格式为：{type1:[listener1, listener2], type2:[listener3, listener4]}\n    this._eventMap = {};\n};\n\nManager.prototype = { \n    /**\n     * 判断events里面是否有用户交互事件\n     */\n    _setEventEnable : function(){\n        var hasInteractionEvent = false;\n      \n        for( var t in this._eventMap ){\n            if( _.indexOf( types.get(), t ) > -1 ){\n                hasInteractionEvent = true;\n            };\n        };\n        this._eventEnabled = hasInteractionEvent;\n    },\n    /*\n     * 注册事件侦听器对象，以使侦听器能够接收事件通知。\n     */\n    _addEventListener : function( _type, listener) {\n\n        if( typeof listener != \"function\" ){\n          //listener必须是个function呐亲\n          return false;\n        }\n        var addResult = true;\n        var self      = this;\n        var types     = _type;\n        if( _.isString( _type ) ){\n            types = _type.split(/,| /);\n        };\n        _.each( types , function(type){\n            var map = self._eventMap[type];\n            if(!map){\n                map = self._eventMap[type] = [];\n                map.push(listener);\n                //self._eventEnabled = true;\n                self._setEventEnable();\n                return true;\n            }\n\n            if(_.indexOf(map ,listener) == -1) {\n                map.push(listener);\n                //self._eventEnabled = true;\n                self._setEventEnable();\n                return true;\n            }\n\n            addResult = false;\n        });\n        return addResult;\n    },\n    /**\n     * 删除事件侦听器。\n     */\n    _removeEventListener : function(type, listener) {\n        if(arguments.length == 1) return this.removeEventListenerByType(type);\n\n        var map = this._eventMap[type];\n        if(!map){\n            return false;\n        }\n\n        for(var i = 0; i < map.length; i++) {\n            var li = map[i];\n            if(li === listener) {\n                map.splice(i, 1);\n                if(map.length    == 0) { \n                    delete this._eventMap[type];\n                    this._setEventEnable();\n                    //如果这个如果这个时候child没有任何事件侦听\n                    /*\n                    if(_.isEmpty(this._eventMap)){\n                        //那么该元素不再接受事件的检测\n                        this._eventEnabled = false;\n                    }\n                    */\n                }\n                return true;\n            }\n        }\n        \n        return false;\n    },\n    /**\n     * 删除指定类型的所有事件侦听器。\n     */\n    _removeEventListenerByType : function(type) {\n        var map = this._eventMap[type];\n        if(!map) {\n            delete this._eventMap[type];\n            this._setEventEnable();\n            //如果这个如果这个时候child没有任何事件侦听\n            /*\n            if(_.isEmpty(this._eventMap)){\n                //那么该元素不再接受事件的检测\n                this._eventEnabled = false;\n            }\n            */\n            return true;\n        }\n        return false;\n    },\n    /**\n     * 删除所有事件侦听器。\n     */\n    _removeAllEventListeners : function() {\t\n        this._eventMap = {};\n        this._eventEnabled = false;\n    },\n    /**\n    * 派发事件，调用事件侦听器。\n    */\n    _dispatchEvent : function(e) {\n        var map = this._eventMap[e.type];\n        \n        if( map ){\n            if(!e.target) e.target = this;\n            map = map.slice();\n\n            for(var i = 0; i < map.length; i++) {\n                var listener = map[i];\n                if(typeof(listener) == \"function\") {\n                    listener.call(this, e);\n                }\n            }\n        }\n\n        if( !e._stopPropagation ) {\n            //向上冒泡\n            if( this.parent ){\n                e.currentTarget = this.parent;\n                this.parent._dispatchEvent( e );\n            }\n        } \n        return true;\n    },\n    /**\n       * 检查是否为指定事件类型注册了任何侦听器。\n       */\n    _hasEventListener : function(type) {\n        var map = this._eventMap[type];\n        return map != null && map.length > 0;\n    }\n}\n\nexport default Manager;\n","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 事件派发类\n */\nimport Manager from \"./Manager\";\nimport Event from \"./Event\";\nimport _ from \"../underscore\";\n\n\nexport default class Dispatcher extends Manager\n{\n    constructor()\n    {\n        super();\n    }\n\n    on(type, listener)\n    {\n        this._addEventListener( type, listener);\n        return this;\n    }\n\n    addEventListener(type, listener)\n    {\n        this._addEventListener( type, listener);\n        return this;\n    }\n\n    un(type,listener)\n    {\n        this._removeEventListener( type, listener);\n        return this;\n    }\n\n    removeEventListener(type,listener)\n    {\n        this._removeEventListener( type, listener);\n        return this;\n    }\n\n    removeEventListenerByType(type)\n    {\n        this._removeEventListenerByType( type);\n        return this;\n    }\n\n    removeAllEventListeners()\n    {\n        this._removeAllEventListeners();\n        return this;\n    }\n\n    //params 要传给evt的eventhandler处理函数的参数，会被merge到Canvax event中\n    fire(eventType , params)\n    {\n        //{currentTarget,point,target,type,_stopPropagation}\n        var e = new Event( eventType );\n\n        if( params ){\n            for( var p in params ){\n                if( p != \"type\" ){\n                    e[p] = params[p];\n                }\n                //然后，currentTarget要修正为自己\n                e.currentTarget = this;\n            }\n        };\n\n        var me = this;\n        _.each( eventType.split(\" \") , function(eType){\n            e.currentTarget = me;\n            me.dispatchEvent( e );\n        } );\n        return this;\n    }\n\n    dispatchEvent(evt)\n    {\n        //this instanceof DisplayObjectContainer ==> this.children\n        //TODO: 这里import DisplayObjectContainer 的话，在displayObject里面的import EventDispatcher from \"../event/EventDispatcher\";\n        //会得到一个undefined，感觉是成了一个循环依赖的问题，所以这里换用简单的判断来判断自己是一个容易，拥有children\n        if( this.children  && evt.point ){\n            var target = this.getObjectsUnderPoint( evt.point , 1)[0];\n            if( target ){\n                target.dispatchEvent( evt );\n            }\n            return;\n        };\n        \n        if(this.context && evt.type == \"mouseover\"){\n            //记录dispatchEvent之前的心跳\n            var preHeartBeat = this._heartBeatNum;\n            var pregAlpha    = this.context.$model.globalAlpha;\n            this._dispatchEvent( evt );\n            if( preHeartBeat != this._heartBeatNum ){\n                this._hoverClass = true;\n                if( this.hoverClone ){\n                    var canvax = this.getStage().parent;\n                    //然后clone一份obj，添加到_bufferStage 中\n                    var activShape = this.clone(true);  \n                    activShape._transform = this.getConcatenatedMatrix();\n                    canvax._bufferStage.addChildAt( activShape , 0 ); \n                    //然后把自己隐藏了\n\n                    //用一个临时变量_globalAlpha 来存储自己之前的alpha\n                    this._globalAlpha = pregAlpha;\n                    this.context.globalAlpha = 0;\n                }\n            }\n            return;\n        };\n\n        this._dispatchEvent( evt );\n\n        if( this.context && evt.type == \"mouseout\"){\n            if(this._hoverClass && this.hoverClone){\n                //说明刚刚over的时候有添加样式\n                var canvax = this.getStage().parent;\n                this._hoverClass = false;\n\n                canvax._bufferStage.removeChildById(this.id);\n                \n                if( this._globalAlpha ){\n                    this.context.globalAlpha = this._globalAlpha;\n                    delete this._globalAlpha;\n                }\n            }\n        }\n\n        return this;\n    }\n\n    hasEvent(type)\n    {\n        return this._hasEventListener(type);\n    }\n\n    hasEventListener(type)\n    {\n        return this._hasEventListener(type);\n    }\n\n    hover( overFun , outFun )\n    {\n        this.on(\"mouseover\" , overFun);\n        this.on(\"mouseout\"  , outFun );\n        return this;\n    }\n\n    once(type, listener)\n    {\n        var me = this;\n        var onceHandle = function(){\n            listener.apply(me , arguments);\n            this.un(type , onceHandle);\n        };\n        this.on(type , onceHandle);\n        return this;\n    }\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n */\nimport Event from \"./Event\";\nimport types from \"./types\";\nimport _ from \"../underscore\";\nimport $ from \"../dom\";\n\nvar _hammerEventTypes = [ \n    \"pan\",\"panstart\",\"panmove\",\"panend\",\"pancancel\",\"panleft\",\"panright\",\"panup\",\"pandown\",\n    \"press\" , \"pressup\",\n    \"swipe\" , \"swipeleft\" , \"swiperight\" , \"swipeup\" , \"swipedown\",\n    \"tap\"\n];\n\nvar Handler = function(canvax , opt) {\n    this.canvax = canvax;\n\n    this.curPoints = [{\n        x : 0, y: 0\n    }] //X,Y 的 point 集合, 在touch下面则为 touch的集合，只是这个touch被添加了对应的x，y\n    //当前激活的点对应的obj，在touch下可以是个数组,和上面的 curPoints 对应\n    this.curPointsTarget = [];\n\n    this._touching = false;\n    //正在拖动，前提是_touching=true\n    this._draging = false;\n\n    //当前的鼠标状态\n    this._cursor = \"default\";\n\n    this.target = this.canvax.view;\n\n    //mouse体统中不需要配置drag,touch中会用到第三方的touch库，每个库的事件名称可能不一样，\n    //就要这里配置，默认实现的是hammerjs的,所以默认可以在项目里引入hammerjs http://hammerjs.github.io/\n    this.drag = {\n        start : \"panstart\",\n        move : \"panmove\",\n        end : \"panend\"\n    };\n\n    _.extend( true , this , opt );\n\n};\n\n//这样的好处是document.compareDocumentPosition只会在定义的时候执行一次。\nvar contains = document.compareDocumentPosition ? function (parent, child) {\n    if( !child ){\n        return false;\n    }\n    return !!(parent.compareDocumentPosition(child) & 16);\n} : function (parent, child) {\n    if( !child ){\n        return false;\n    }\n    return child !== child && (parent.contains ? parent.contains(child) : true);\n};\n\nHandler.prototype = {\n    init : function(){\n        \n        //依次添加上浏览器的自带事件侦听\n        var me   = this;\n        if( me.target.nodeType == undefined ){\n            //如果target.nodeType没有的话， 说明该target为一个jQuery对象 or kissy 对象or hammer对象\n            //即为第三方库，那么就要对接第三方库的事件系统。默认实现hammer的大部分事件系统\n            types.register( _hammerEventTypes );\n        };\n\n        _.each( types.get() , function( type ){\n            //不再关心浏览器环境是否 'ontouchstart' in window \n            //而是直接只管传给事件模块的是一个原生dom还是 jq对象 or hammer对象等\n            if( me.target.nodeType == 1 ){\n                $.addEvent( me.target , type , function( e ){\n                    me.__mouseHandler( e );\n                } );\n            } else {\n                me.target.on( type , function( e ){\n                    me.__libHandler( e );\n                });\n            };\n        } );\n    },\n    /*\n    * 原生事件系统------------------------------------------------begin\n    * 鼠标事件处理函数\n    **/\n    __mouseHandler : function(e) {\n        var me = this;\n        var root = me.canvax;\n\n        root.updateViewOffset();\n    \n        me.curPoints = [ {\n           x : $.pageX( e ) - root.viewOffset.left , \n           y : $.pageY( e ) - root.viewOffset.top\n        }];\n\n        //理论上来说，这里拿到point了后，就要计算这个point对应的target来push到curPointsTarget里，\n        //但是因为在drag的时候其实是可以不用计算对应target的。\n        //所以放在了下面的me.__getcurPointsTarget( e , curMousePoint );常规mousemove中执行\n\n        var curMousePoint  = me.curPoints[0]; \n        var curMouseTarget = me.curPointsTarget[0];\n\n        //模拟drag,mouseover,mouseout 部分代码 begin-------------------------------------------------\n\n        //mousedown的时候 如果 curMouseTarget.dragEnabled 为true。就要开始准备drag了\n        if( e.type == \"mousedown\" ){\n           //如果curTarget 的数组为空或者第一个为false ，，，\n           if( !curMouseTarget ){\n             var obj = root.getObjectsUnderPoint( curMousePoint , 1)[0];\n             if(obj){\n               me.curPointsTarget = [ obj ];\n             }\n           };\n           curMouseTarget = me.curPointsTarget[0];\n           if ( curMouseTarget && curMouseTarget.dragEnabled ){\n               //鼠标事件已经摸到了一个\n               me._touching = true;\n           };\n        };\n\n        if( e.type == \"mouseup\" || (e.type == \"mouseout\" && !contains(root.view , (e.toElement || e.relatedTarget) )) ){\n            if(me._draging == true){\n                //说明刚刚在拖动\n                me._dragEnd( e , curMouseTarget , 0 );\n                curMouseTarget.fire(\"dragend\");\n            };\n            me._draging  = false;\n            me._touching = false;\n        };\n\n        if( e.type == \"mouseout\" ){\n            if( !contains(root.view , (e.toElement || e.relatedTarget) ) ){\n                me.__getcurPointsTarget(e, curMousePoint, true);\n            }\n        } else if( e.type == \"mousemove\" ){  //|| e.type == \"mousedown\" ){\n            //拖动过程中就不在做其他的mouseover检测，drag优先\n            if(me._touching && e.type == \"mousemove\" && curMouseTarget){\n                //说明正在拖动啊\n                if(!me._draging){\n\n                    //begin drag\n                    curMouseTarget.fire(\"dragstart\");\n                    //有可能该child没有hover style\n                    if( !curMouseTarget._globalAlpha ){\n                        curMouseTarget._globalAlpha = curMouseTarget.context.$model.globalAlpha;\n                    };\n\n                    //先把本尊给隐藏了\n                    curMouseTarget.context.globalAlpha = 0;\n                    //然后克隆一个副本到activeStage\n                    \n                    var cloneObject = me._clone2hoverStage( curMouseTarget , 0 );\n                    cloneObject.context.globalAlpha = curMouseTarget._globalAlpha;\n                } else {\n                    //drag move ing\n                    me._dragIngHander( e , curMouseTarget , 0 );\n                };\n                me._draging = true;\n            } else {\n                //常规mousemove检测\n                //move事件中，需要不停的搜索target，这个开销挺大，\n                //后续可以优化，加上和帧率相当的延迟处理\n                me.__getcurPointsTarget( e , curMousePoint );\n            }\n\n        } else {\n            //其他的事件就直接在target上面派发事件\n            var child = curMouseTarget;\n            if( !child ){\n                child = root;\n            };\n            me.__dispatchEventInChilds( e , [ child ] );\n            me._cursorHander( child );\n        };\n\n        if( root.preventDefault ) {\n            //阻止默认浏览器动作(W3C) \n            if ( e && e.preventDefault ) {\n                e.preventDefault(); \n            } else {\n                window.event.returnValue = false;\n            }\n        }; \n    },\n\n    //notInRootView 真正的mouseout,鼠标已经不在图表的节点内了\n    __getcurPointsTarget : function(e, point, notInRootView ) {\n        var me     = this;\n        var root   = me.canvax;\n        var oldObj = me.curPointsTarget[0];\n\n        if( oldObj && !oldObj.context ){\n            oldObj = null;\n        };\n\n        var e = new Event( e );\n\n        if( e.type==\"mousemove\"\n            && oldObj && (oldObj._hoverClass && oldObj.hoverClone) && oldObj.pointChkPriority\n            && oldObj.getChildInPoint( point ) ){\n            //小优化,鼠标move的时候。计算频率太大，所以。做此优化\n            //如果有target存在，而且当前元素正在hoverStage中，而且当前鼠标还在target内,就没必要取检测整个displayList了\n            //开发派发常规mousemove事件\n            e.target = e.currentTarget = oldObj;\n            e.point  = oldObj.globalToLocal( point );\n            oldObj.dispatchEvent( e );\n            return;\n        };\n        var obj = notInRootView ? null: root.getObjectsUnderPoint( point , 1)[0];\n\n        if(oldObj && oldObj != obj || e.type==\"mouseout\") {\n            if( oldObj && oldObj.context ){\n                me.curPointsTarget[0] = null;\n                e.type     = \"mouseout\";\n                e.toTarget = obj; \n                e.target   = e.currentTarget = oldObj;\n                e.point    = oldObj.globalToLocal( point );\n                oldObj.dispatchEvent( e );\n            }\n        };\n\n        if( obj && oldObj != obj ){\n            me.curPointsTarget[0] = obj;\n            e.type       = \"mouseover\";\n            e.fromTarget = oldObj;\n            e.target     = e.currentTarget = obj;\n            e.point      = obj.globalToLocal( point );\n            obj.dispatchEvent( e );\n        };\n\n        if( e.type == \"mousemove\" && obj ){\n            e.target = e.currentTarget = oldObj;\n            e.point  = oldObj.globalToLocal( point );\n            oldObj.dispatchEvent( e );\n        };\n        me._cursorHander( obj , oldObj );\n    },\n    _cursorHander    : function( obj , oldObj ){\n        if(!obj && !oldObj ){\n            this._setCursor(\"default\");\n        }\n        if(obj && oldObj != obj && obj.context){\n            this._setCursor(obj.context.$model.cursor);\n        }\n    },\n    _setCursor : function(cursor) {\n        if(this._cursor == cursor){\n          //如果两次要设置的鼠标状态是一样的\n          return;\n        };\n        this.canvax.view.style.cursor = cursor;\n        this._cursor = cursor;\n    },\n    /*\n    * 原生事件系统------------------------------------------------end\n    */\n\n    /*\n     *第三方库的事件系统------------------------------------------------begin\n     *触屏事件处理函数\n     * */\n    __libHandler : function( e ) {\n        var me   = this;\n        var root = me.canvax;\n        root.updateViewOffset();\n        // touch 下的 curPointsTarget 从touches中来\n        //获取canvax坐标系统里面的坐标\n        me.curPoints = me.__getCanvaxPointInTouchs( e );\n        if( !me._draging ){\n            //如果在draging的话，target已经是选中了的，可以不用 检测了\n            me.curPointsTarget = me.__getChildInTouchs( me.curPoints );\n        };\n        if( me.curPointsTarget.length > 0 ){\n            //drag开始\n            if( e.type == me.drag.start){\n                //dragstart的时候touch已经准备好了target， curPointsTarget 里面只要有一个是有效的\n                //就认为drags开始\n                _.each( me.curPointsTarget , function( child , i ){\n                    if( child && child.dragEnabled ){\n                       //只要有一个元素就认为正在准备drag了\n                       me._draging = true;\n\n                       //有可能该child没有hover style\n                       if( !child._globalAlpha ){\n                           child._globalAlpha = child.context.$model.globalAlpha;\n                       };\n\n                       //然后克隆一个副本到activeStage\n                       me._clone2hoverStage( child , i );\n\n                       //先把本尊给隐藏了\n                       child.context.globalAlpha = 0;\n\n                       child.fire(\"dragstart\");\n\n                       return false;\n                    }\n                } ) \n            };\n\n            //dragIng\n            if( e.type == me.drag.move){\n                if( me._draging ){\n                    _.each( me.curPointsTarget , function( child , i ){\n                        if( child && child.dragEnabled) {\n                           me._dragIngHander( e , child , i);\n                        }\n                    } )\n                }\n            };\n\n            //drag结束\n            if( e.type == me.drag.end){\n                if( me._draging ){\n                    _.each( me.curPointsTarget , function( child , i ){\n                        if( child && child.dragEnabled) {\n                            me._dragEnd( e , child , 0 );\n                            child.fire(\"dragend\");\n                        }\n                    } );\n                    me._draging = false;\n                }\n            };\n            me.__dispatchEventInChilds( e , me.curPointsTarget );\n        } else {\n            //如果当前没有一个target，就把事件派发到canvax上面\n            me.__dispatchEventInChilds( e , [ root ] );\n        };\n    },\n    //从touchs中获取到对应touch , 在上面添加上canvax坐标系统的x，y\n    __getCanvaxPointInTouchs : function( e ){\n        var me        = this;\n        var root      = me.canvax;\n        var curTouchs = [];\n        _.each( e.point , function( touch ){\n           curTouchs.push( {\n               x : $.pageX( touch ) - root.viewOffset.left,\n               y : $.pageY( touch ) - root.viewOffset.top\n           } );\n        });\n        return curTouchs;\n    },\n    __getChildInTouchs : function( touchs ){\n        var me   = this;\n        var root = me.canvax;\n        var touchesTarget = [];\n        _.each( touchs , function(touch){\n            touchesTarget.push( root.getObjectsUnderPoint( touch , 1)[0] );\n        } );\n        return touchesTarget;\n    },\n    /*\n    *第三方库的事件系统------------------------------------------------end\n    */\n\n\n    /*\n     *@param {array} childs \n     * */\n    __dispatchEventInChilds: function(e, childs) {\n        if (!childs && !(\"length\" in childs)) {\n            return false;\n        }\n        var me = this;\n        var hasChild = false;\n        _.each(childs, function(child, i) {\n            if (child) {\n                hasChild = true;\n                var ce = new Event(e);\n                ce.target = ce.currentTarget = child || this;\n                ce.stagePoint = me.curPoints[i];\n                ce.point = ce.target.globalToLocal(ce.stagePoint);\n                child.dispatchEvent(ce);\n            }\n        });\n        return hasChild;\n    },\n    //克隆一个元素到hover stage中去\n    _clone2hoverStage: function(target, i) {\n        var me = this;\n        var root = me.canvax;\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        if (!_dragDuplicate) {\n            _dragDuplicate = target.clone(true);\n            _dragDuplicate._transform = target.getConcatenatedMatrix();\n\n            /**\n             *TODO: 因为后续可能会有手动添加的 元素到_bufferStage 里面来\n             *比如tips\n             *这类手动添加进来的肯定是因为需要显示在最外层的。在hover元素之上。\n             *所有自动添加的hover元素都默认添加在_bufferStage的最底层\n             **/\n            root._bufferStage.addChildAt(_dragDuplicate, 0);\n        }\n        _dragDuplicate.context.globalAlpha = target._globalAlpha;\n        target._dragPoint = target.globalToLocal(me.curPoints[i]);\n        return _dragDuplicate;\n    },\n    //drag 中 的处理函数\n    _dragIngHander: function(e, target, i) {\n        \n        var me = this;\n        var root = me.canvax;\n        var _point = target.globalToLocal( me.curPoints[i] );\n\n        //要对应的修改本尊的位置，但是要告诉引擎不要watch这个时候的变化\n        target._noHeart = true;\n        var _moveStage = target.moveing;\n        target.moveing = true;\n        target.context.x += (_point.x - target._dragPoint.x);\n        target.context.y += (_point.y - target._dragPoint.y);\n        target.fire(\"draging\");\n        target.moveing = _moveStage;\n        target._noHeart = false;\n        //同步完毕本尊的位置\n\n        //这里只能直接修改_transform 。 不能用下面的修改x，y的方式。\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        _dragDuplicate._transform = target.getConcatenatedMatrix();\n\n        //worldTransform在renderer的时候计算\n        _dragDuplicate.worldTransform = null;\n\n        //setWorldTransform都统一在render中执行，这里注释掉\n        //_dragDuplicate.setWorldTransform();\n\n        //直接修改的_transform不会出发心跳上报， 渲染引擎不制动这个stage需要绘制。\n        //所以要手动出发心跳包\n        _dragDuplicate.heartBeat();\n    },\n    //drag结束的处理函数\n    //TODO: dragend的还需要处理end的点是否还在元素上面，要恢复hover状态\n    _dragEnd: function(e, target, i) {\n        var me = this;\n        var root = me.canvax;\n\n        //_dragDuplicate 复制在_bufferStage 中的副本\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        _dragDuplicate && _dragDuplicate.destroy();\n\n        target.context.globalAlpha = target._globalAlpha;\n    }\n};\nexport default Handler;","var _ = {}\nvar breaker = {};\nvar ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n\n// Create quick reference variables for speed access to core prototypes.\nvar\n  push = ArrayProto.push,\n  slice = ArrayProto.slice,\n  concat = ArrayProto.concat,\n  toString = ObjProto.toString,\n  hasOwnProperty = ObjProto.hasOwnProperty;\n\n// All **ECMAScript 5** native function implementations that we hope to use\n// are declared here.\nvar\n  nativeForEach = ArrayProto.forEach,\n  nativeMap = ArrayProto.map,\n  nativeReduce = ArrayProto.reduce,\n  nativeReduceRight = ArrayProto.reduceRight,\n  nativeFilter = ArrayProto.filter,\n  nativeEvery = ArrayProto.every,\n  nativeSome = ArrayProto.some,\n  nativeIndexOf = ArrayProto.indexOf,\n  nativeLastIndexOf = ArrayProto.lastIndexOf,\n  nativeIsArray = Array.isArray,\n  nativeKeys = Object.keys,\n  nativeBind = FuncProto.bind;\n\n\nvar shallowProperty = function (key) {\n  return function (obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n};\nvar MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\nvar getLength = shallowProperty('length');\nvar isArrayLike = function (collection) {\n  var length = getLength(collection);\n  return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n};\n\n\n\n_.values = function (obj) {\n  var keys = _.keys(obj);\n  var length = keys.length;\n  var values = new Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[keys[i]];\n  }\n  return values;\n};\n\n_.keys = nativeKeys || function (obj) {\n  if (obj !== Object(obj)) throw new TypeError('Invalid object');\n  var keys = [];\n  for (var key in obj) if (_.has(obj, key)) keys.push(key);\n  return keys;\n};\n\n_.has = function (obj, key) {\n  return hasOwnProperty.call(obj, key);\n};\n\nvar each = _.each = _.forEach = function (obj, iterator, context) {\n  if (obj == null) return;\n  if (nativeForEach && obj.forEach === nativeForEach) {\n    obj.forEach(iterator, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, length = obj.length; i < length; i++) {\n      if (iterator.call(context, obj[i], i, obj) === breaker) return;\n    }\n  } else {\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n    }\n  }\n};\n\n_.compact = function (array) {\n  return _.filter(array, _.identity);\n};\n\n_.filter = _.select = function (obj, iterator, context) {\n  var results = [];\n  if (obj == null) return results;\n  if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);\n  each(obj, function (value, index, list) {\n    if (iterator.call(context, value, index, list)) results.push(value);\n  });\n  return results;\n};\n\neach(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function (name) {\n  _['is' + name] = function (obj) {\n    return toString.call(obj) == '[object ' + name + ']';\n  };\n});\n\n//if (!_.isArguments(arguments)) {\n_.isArguments = function (obj) {\n  return !!(obj && _.has(obj, 'callee'));\n};\n//}\n\nif (typeof (/./) !== 'function') {\n  _.isFunction = function (obj) {\n    return typeof obj === 'function';\n  };\n};\n\n_.isFinite = function (obj) {\n  return isFinite(obj) && !isNaN(parseFloat(obj));\n};\n\n_.isNaN = function (obj) {\n  return _.isNumber(obj) && obj != +obj;\n};\n\n_.isBoolean = function (obj) {\n  return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n};\n\n_.isNull = function (obj) {\n  return obj === null;\n};\n\n_.isEmpty = function (obj) {\n  if (obj == null) return true;\n  if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n  for (var key in obj) if (_.has(obj, key)) return false;\n  return true;\n};\n\n_.isElement = function (obj) {\n  return !!(obj && obj.nodeType === 1);\n};\n\n_.isArray = nativeIsArray || function (obj) {\n  return toString.call(obj) == '[object Array]';\n};\n\n_.isObject = function (obj) {\n  return obj === Object(obj);\n};\n\n_.identity = function (value) {\n  return value;\n};\n\n_.indexOf = function (array, item, isSorted) {\n  if (array == null) return -1;\n  var i = 0, length = array.length;\n  if (isSorted) {\n    if (typeof isSorted == 'number') {\n      i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n    } else {\n      i = _.sortedIndex(array, item);\n      return array[i] === item ? i : -1;\n    }\n  }\n  if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n  for (; i < length; i++) if (array[i] === item) return i;\n  return -1;\n};\n\n_.isWindow = function (obj) {\n  return obj != null && obj == obj.window;\n};\n\n// Internal implementation of a recursive `flatten` function.\nvar flatten = function (input, shallow, output) {\n  if (shallow && _.every(input, _.isArray)) {\n    return concat.apply(output, input);\n  }\n  each(input, function (value) {\n    if (_.isArray(value) || _.isArguments(value)) {\n      shallow ? push.apply(output, value) : flatten(value, shallow, output);\n    } else {\n      output.push(value);\n    }\n  });\n  return output;\n};\n\n// Flatten out an array, either recursively (by default), or just one level.\n_.flatten = function (array, shallow) {\n  return flatten(array, shallow, []);\n};\n\n_.every = _.all = function (obj, iterator, context) {\n  iterator || (iterator = _.identity);\n  var result = true;\n  if (obj == null) return result;\n  if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);\n  each(obj, function (value, index, list) {\n    if (!(result = result && iterator.call(context, value, index, list))) return breaker;\n  });\n  return !!result;\n};\n\n\n\n\n\n\n// Return the minimum element (or element-based computation).\n_.min = function (obj, iterator, context) {\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n    return Math.min.apply(Math, obj);\n  }\n  if (!iterator && _.isEmpty(obj)) return Infinity;\n  var result = { computed: Infinity, value: Infinity };\n  each(obj, function (value, index, list) {\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\n    computed < result.computed && (result = { value: value, computed: computed });\n  });\n  return result.value;\n};\n// Return the maximum element or (element-based computation).\n// Can't optimize arrays of integers longer than 65,535 elements.\n// See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n_.max = function (obj, iterator, context) {\n  if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n    return Math.max.apply(Math, obj);\n  }\n  if (!iterator && _.isEmpty(obj)) return -Infinity;\n  var result = { computed: -Infinity, value: -Infinity };\n  each(obj, function (value, index, list) {\n    var computed = iterator ? iterator.call(context, value, index, list) : value;\n    computed > result.computed && (result = { value: value, computed: computed });\n  });\n  return result.value;\n};\n\n// Return the first value which passes a truth test. Aliased as `detect`.\n_.find = _.detect = function (obj, iterator, context) {\n  var result;\n  any(obj, function (value, index, list) {\n    if (iterator.call(context, value, index, list)) {\n      result = value;\n      return true;\n    }\n  });\n  return result;\n};\n// Determine if at least one element in the object matches a truth test.\n// Delegates to **ECMAScript 5**'s native `some` if available.\n// Aliased as `any`.\nvar any = _.some = _.any = function (obj, iterator, context) {\n  iterator || (iterator = _.identity);\n  var result = false;\n  if (obj == null) return result;\n  if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);\n  each(obj, function (value, index, list) {\n    if (result || (result = iterator.call(context, value, index, list))) return breaker;\n  });\n  return !!result;\n};\n// Return a version of the array that does not contain the specified value(s).\n_.without = function (array) {\n  return _.difference(array, slice.call(arguments, 1));\n};\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\n_.difference = function (array) {\n  var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n  return _.filter(array, function (value) { return !_.contains(rest, value); });\n};\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// Aliased as `unique`.\n_.uniq = _.unique = function (array, isSorted, iterator, context) {\n  if (_.isFunction(isSorted)) {\n    context = iterator;\n    iterator = isSorted;\n    isSorted = false;\n  }\n  var initial = iterator ? _.map(array, iterator, context) : array;\n  var results = [];\n  var seen = [];\n  each(initial, function (value, index) {\n    if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n      seen.push(value);\n      results.push(array[index]);\n    }\n  });\n  return results;\n};\n// Return the results of applying the iterator to each element.\n// Delegates to **ECMAScript 5**'s native `map` if available.\n_.map = _.collect = function (obj, iterator, context) {\n  var results = [];\n  if (obj == null) return results;\n  if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n  each(obj, function (value, index, list) {\n    results.push(iterator.call(context, value, index, list));\n  });\n  return results;\n};\n// Determine if the array or object contains a given value (using `===`).\n// Aliased as `include`.\n_.contains = _.include = function (obj, target) {\n  if (obj == null) return false;\n  if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n  return any(obj, function (value) {\n    return value === target;\n  });\n};\n\n// Convenience version of a common use case of `map`: fetching a property.\n_.pluck = function (obj, key) {\n  return _.map(obj, function (value) { return value[key]; });\n};\n\n// Return a random integer between min and max (inclusive).\n_.random = function (min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n};\n\n// Shuffle a collection.\n_.shuffle = function (obj) {\n  return _.sample(obj, Infinity);\n};\n\n_.sample = function (obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    return obj[_.random(obj.length - 1)];\n  }\n  var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = _.random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n};\n\n\n\n\n\n/**\n*\n*如果是深度extend，第一个参数就设置为true\n*/\n_.extend = function () {\n  var options, name, src, copy,\n    target = arguments[0] || {},\n    i = 1,\n    length = arguments.length,\n    deep = false;\n  if (typeof target === \"boolean\") {\n    deep = target;\n    target = arguments[1] || {};\n    i = 2;\n  };\n  if (typeof target !== \"object\" && !_.isFunction(target)) {\n    target = {};\n  };\n  if (length === i) {\n    target = this;\n    --i;\n  };\n  for (; i < length; i++) {\n    if ((options = arguments[i]) != null) {\n      for (name in options) {\n        src = target[name];\n        copy = options[name];\n        if (target === copy) {\n          continue;\n        };\n\n        //if( deep && copy && _.isObject( copy ) &&  && !_.isArray( copy ) && !_.isFunction( copy ) ){\n        if (deep && copy && _.isObject(copy) && copy.constructor === Object) {\n          target[name] = _.extend(deep, src, copy);\n        } else {\n          target[name] = copy;\n        };\n      }\n    }\n  }\n  return target;\n};\n\n_.clone = function (obj) {\n  if (!_.isObject(obj)) return obj;\n  return _.isArray(obj) ? obj.slice() : _.extend(true, {}, obj);\n};\n\n//********补存一些数学常用方法,暂放在这里文件下,后期多了单独成立一个类库  */\n// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\n_.euclideanModulo = (n, m) => {\n  return ((n % m) + m) % m;\n};\n\n_.DEG2RAD = Math.PI / 180;\n_.RAD2DEG = 180 / Math.PI;\n\n_.degToRad = (degrees) => {\n  return degrees * _.DEG2RAD;\n};\n\n_.radToDeg = (radians) => {\n  return radians * _.RAD2DEG;\n};\n\nexport default _;","import _ from \"./underscore\"\n\nfunction normalizeTickInterval(interval, magnitude) {\n    var normalized, i;\n    // var multiples = [1, 2, 2.5, 5, 10];\n    var multiples = [1, 2, 5, 10];\n    // round to a tenfold of 1, 2, 2.5 or 5\n    normalized = interval / magnitude;\n\n    // normalize the interval to the nearest multiple\n    for (var i = 0; i < multiples.length; i++) {\n        interval = multiples[i];\n        if (normalized <= (multiples[i] + (multiples[i + 1] || multiples[i])) / 2) {\n            break;\n        }\n    }\n\n    // multiply back to the correct magnitude\n    interval *= magnitude;\n\n    return interval;\n}\n\nfunction correctFloat(num) {\n    return parseFloat(\n        num.toPrecision(14));\n}\n\nfunction getLinearTickPositions(arr,$maxPart,$cfg) {\n\n    arr = _.without( arr , undefined , null , \"\" );\n    \n\tvar scale = $cfg && $cfg.scale ? parseFloat($cfg.scale) :1\n\t//返回的数组中的值 是否都为整数(思霏)  防止返回[8, 8.2, 8.4, 8.6, 8.8, 9]   应该返回[8, 9]\n\tvar isInt = $cfg && $cfg.isInt ? 1 : 0 \n\n\tif(isNaN(scale)){\n\t\tscale = 1\n\t};\n\n    var max = _.max(arr);\n    var initMax = max\n    max *= scale\n    var min = _.min(arr); \n\n    if(min==max){\n    \tif(max > 0){\n    \t\tmin = 0;\n            return [ min , max ];\n    \t\t// min= Math.round(max/2);\n    \t} else if(max < 0){\n            return [ max , 0 ];\n    \t\t//min = max*2;\n    \t} else {\n            max = 1;\n            return [0 , max];\n        }\n    }\n\n    \n\n    var length = max - min;\n    if (length) {\n    \tvar tempmin = min //保证min>0的时候不会出现负数\n    \tmin -= length * 0.05;\n        // S.log(min +\":\"+ tempmin)\n        if(min<0 && tempmin>=0){\n        \tmin=0\n        }\n        max += length * 0.05;\n    }\n    \n    var tickInterval = (max - min) * 0.3;//72 / 365;\n    var magnitude = Math.pow(10, Math.floor(Math.log(tickInterval) / Math.LN10));\n\n    tickInterval = normalizeTickInterval(tickInterval, magnitude);\n    if(isInt){\n    \ttickInterval = Math.ceil(tickInterval)\n    }\n\n    var pos,\n        lastPos,\n        roundedMin = correctFloat(Math.floor(min / tickInterval) * tickInterval),\n        roundedMax = correctFloat(Math.ceil(max / tickInterval) * tickInterval),\n        tickPositions = [];\n\n    // Populate the intermediate values\n    pos = roundedMin;\n    while (pos <= roundedMax) {\n\n        // Place the tick on the rounded value\n        tickPositions.push(pos);\n\n        // Always add the raw tickInterval, not the corrected one.\n        pos = correctFloat(pos + tickInterval) \n\n        // If the interval is not big enough in the current min - max range to actually increase\n        // the loop variable, we need to break out to prevent endless loop. Issue #619\n        if (pos === lastPos) {\n            break;\n        }\n\n        // Record the last value\n        lastPos = pos;\n    }\n    if(tickPositions.length >= 3){\n    \tif(tickPositions[tickPositions.length - 2] >= initMax){\n\t\t\ttickPositions.pop()\n\t\t}\n    }\n    return tickPositions;\n}\n\nvar dataSection  = {\n\tsection:function($arr,$maxPart,$cfg){\n        return _.uniq( getLinearTickPositions($arr,$maxPart,$cfg));\n\t}\n};\n\nexport default dataSection","//TODO 所有的get xxx OfVal 在非proportion下面如果数据有相同的情况，就会有风险\nimport _ from \"./underscore\"\nimport dataSection from \"./dataSection\"\n\nexport default class axis {\n    constructor(opt, dataOrg) {\n        //super();\n        this.layoutType = opt.layoutType || \"proportion\"; // rule , peak, proportion\n\n        //源数据\n        //这个是一个一定会有两层数组的数据结构，是一个标准的dataFrame数据\n        // [ \n        //    [   \n        //        [1,2,3],  \n        //        [1,2,3]    //这样有堆叠的数据只会出现在proportion的axis里，至少目前是这样\n        //    ] \n        //   ,[    \n        //        [1,2,3] \n        //    ]   \n        // ]\n        this._opt = _.clone(opt);\n        this.dataOrg = dataOrg || [];\n        this.sectionHandler = null;\n        this.dataSection = []; //从原数据 dataOrg 中 结果 datasection 重新计算后的数据\n        this.dataSectionLayout = []; //和dataSection一一对应的，每个值的pos，//get xxx OfPos的时候，要先来这里做一次寻找\n\n        //轴总长\n        this.axisLength = 1;\n\n        this._cellCount = null;\n        this._cellLength = null; //数据变动的时候要置空\n\n        //下面三个目前yAxis中实现了，后续统一都会实现\n\n        //水位data，需要混入 计算 dataSection， 如果有设置waterLine， dataSection的最高水位不会低于这个值\n        //这个值主要用于第三方的markline等组件， 自己的y值超过了yaxis的范围的时候，需要纳入来修复yaxis的section区间\n        this.waterLine = null;\n        //默认的 dataSectionGroup = [ dataSection ], dataSection 其实就是 dataSectionGroup 去重后的一维版本\n        this.dataSectionGroup = [];\n        //如果middleweight有设置的话 dataSectionGroup 为被middleweight分割出来的n个数组>..[ [0,50 , 100],[100,500,1000] ]\n        this.middleweight = null;\n\n        this.symmetric = false; //proportion下，是否需要设置数据为正负对称的数据，比如 [ 0,5,10 ] = > [ -10, 0 10 ]，象限坐标系的时候需要\n\n        //1，如果数据中又正数和负数，则默认为0，\n        //2，如果dataSection最小值小于0，则baseNumber为最小值，\n        //3，如果dataSection最大值大于0，则baseNumber为最大值\n        //也可以由用户在第2、3种情况下强制配置为0，则section会补充满从0开始的刻度值\n        this.origin = null;\n        this.originPos = 0; //value为 origin 对应的pos位置\n        this._originTrans = 0;//当设置的 origin 和datasection的min不同的时候，\n\n        //min,max不需要外面配置，没意义\n        this._min = null;\n        this._max = null;\n\n        //\"asc\" 排序，默认从小到大, desc为从大到小\n        //之所以不设置默认值为asc，是要用 null 来判断用户是否进行了配置\n        this.sort = null;\n\n        this.posParseToInt = false; //比如在柱状图中，有得时候需要高精度的能间隔1px的柱子，那么x轴的计算也必须要都是整除的\n\n    }\n\n    resetDataOrg(dataOrg) {\n        //配置和数据变化\n\n        this.dataSection = [];\n        this.dataSectionGroup = [];\n\n        this.dataOrg = dataOrg;\n\n        this._cellCount = null;\n        this._cellLength = null;\n\n    }\n\n    setAxisLength(length) {\n        this.axisLength = length;\n        this.calculateProps();\n    }\n\n    calculateProps() {\n\n        var me = this;\n\n        if (this.layoutType == \"proportion\") {\n\n            if (this._min == null) {\n                this._min = _.min(this.dataSection);\n            };\n            if (this._max == null) {\n                this._max = _.max(this.dataSection);\n            };\n\n            //默认情况下 origin 就是datasection的最小值\n            //如果用户设置了origin，那么就已用户的设置为准\n            if (!(\"origin\" in this._opt)) {\n                this.origin = 0;//this.dataSection[0];//_.min( this.dataSection );\n                if (_.max(this.dataSection) < 0) {\n                    this.origin = _.max(this.dataSection);\n                };\n                if (_.min(this.dataSection) > 0) {\n                    this.origin = _.min(this.dataSection);\n                };\n            };\n\n            this._originTrans = this._getOriginTrans(this.origin);\n            this.originPos = this.getPosOfVal(this.origin);\n\n        };\n\n\n\n        //get xxx OfPos的时候，要先来这里做一次寻找\n        this.dataSectionLayout = [];\n        _.each(this.dataSection, function (val, i) {\n\n            var ind = i;\n            if (me.layoutType == \"proportion\") {\n                ind = me.getIndexOfVal(val);\n            };\n\n            var pos = parseInt(me.getPosOf({\n                ind: i,\n                val: val\n            }), 10);\n\n            me.dataSectionLayout.push({\n                val: val,\n                ind: ind,\n                pos: pos\n            });\n\n        });\n\n    }\n    getDataSection() {\n        //对外返回的dataSection\n        return this.dataSection;\n    }\n    setDataSection(_dataSection) {\n        var me = this;\n\n        //如果用户没有配置dataSection，或者用户传了，但是传了个空数组，则自己组装dataSection\n        if (_.isEmpty(_dataSection) && _.isEmpty(this._opt.dataSection)) {\n            if (this.layoutType == \"proportion\") {\n\n                var arr = this._getDataSection();\n\n                if (\"origin\" in me._opt) {\n                    arr.push(me._opt.origin);\n                };\n\n                if (arr.length == 1) {\n                    arr.push(arr[0] * 2);\n                };\n\n                if (this.waterLine) {\n                    arr.push(this.waterLine);\n                };\n\n                if (this.symmetric) {\n                    //如果需要处理为对称数据\n                    var _min = _.min(arr);\n                    var _max = _.max(arr);\n                    if (Math.abs(_min) > Math.abs(_max)) {\n                        arr.push(Math.abs(_min));\n                    } else {\n                        arr.push(-Math.abs(_max));\n                    };\n                };\n\n                for (var ai = 0, al = arr.length; ai < al; ai++) {\n                    arr[ai] = Number(arr[ai]);\n                    if (isNaN(arr[ai])) {\n                        arr.splice(ai, 1);\n                        ai--;\n                        al--;\n                    };\n                };\n\n                if( _.isFunction( this.sectionHandler ) ){\n                    this.dataSection = this.sectionHandler( arr );\n                };\n\n                if( !this.dataSection || !this.dataSection.length ){\n                    this.dataSection = dataSection.section(arr, 3);\n                };\n\n                if (this.symmetric) {\n                    //可能得到的区间是偶数， 非对称，强行补上\n                    var _min = _.min(this.dataSection);\n                    var _max = _.max(this.dataSection);\n                    if (Math.abs(_min) > Math.abs(_max)) {\n                        this.dataSection.push(Math.abs(_min));\n                    } else {\n                        this.dataSection.unshift(-Math.abs(_max));\n                    };\n                };\n\n                //如果还是0\n                if (this.dataSection.length == 0) {\n                    this.dataSection = [0];\n                };\n\n                //如果有 middleweight 设置，就会重新设置dataSectionGroup\n                this.dataSectionGroup = [_.clone(this.dataSection)];\n\n                this._middleweight(); //如果有middleweight配置，需要根据配置来重新矫正下datasection\n\n                this._sort();\n\n            } else {\n\n                //非proportion 也就是 rule peak 模式下面\n                this.dataSection = _.flatten(this.dataOrg);//this._getDataSection();\n                this.dataSectionGroup = [this.dataSection];\n\n            };\n        } else {\n            this.dataSection = _dataSection || this._opt.dataSection;\n            this.dataSectionGroup = [this.dataSection];\n        };\n\n    }\n    _getDataSection() {\n        //如果有堆叠，比如[ [\"uv\",\"pv\"], \"click\" ]\n        //那么这个 this.dataOrg， 也是个对应的结构\n        //vLen就会等于2\n        var vLen = 1;\n\n        _.each(this.dataOrg, function (arr) {\n            vLen = Math.max(arr.length, vLen);\n        });\n\n        if (vLen == 1) {\n            return this._oneDimensional();\n        };\n        if (vLen > 1) {\n            return this._twoDimensional();\n        };\n\n    }\n    _oneDimensional() {\n        var arr = _.flatten(this.dataOrg); //_.flatten( data.org );\n\n        for (var i = 0, il = arr.length; i < il; i++) {\n            arr[i] = arr[i] || 0;\n        };\n\n        return arr;\n    }\n    //二维的yAxis设置，肯定是堆叠的比如柱状图，后续也会做堆叠的折线图， 就是面积图\n    _twoDimensional() {\n        var d = this.dataOrg;\n        var arr = [];\n        var min;\n        _.each(d, function (d, i) {\n            if (!d.length) {\n                return\n            };\n\n            //有数据的情况下 \n            if (!_.isArray(d[0])) {\n                arr.push(d);\n                return;\n            };\n\n            var varr = [];\n            var len = d[0].length;\n            var vLen = d.length;\n\n            for (var i = 0; i < len; i++) {\n                var up_count = 0;\n                var up_i = 0;\n\n                var down_count = 0;\n                var down_i = 0;\n\n                for (var ii = 0; ii < vLen; ii++) {\n\n                    var _val = d[ii][i];\n                    if (!_val && _val !== 0) {\n                        continue;\n                    };\n\n                    min == undefined && (min = _val)\n                    min = Math.min(min, _val);\n\n                    if (_val >= 0) {\n                        up_count += _val;\n                        up_i++\n                    } else {\n                        down_count += _val;\n                        down_i++\n                    }\n                }\n                up_i && varr.push(up_count);\n                down_i && varr.push(down_count);\n            };\n            arr.push(varr);\n        });\n        arr.push(min);\n        return _.flatten(arr);\n    }\n\n    //val 要被push到datasection 中去的 值\n    //主要是用在markline等组件中，当自己的y值超出了yaxis的范围\n    setWaterLine(val) {\n        if (val <= this.waterLine) return;\n        this.waterLine = val;\n        if (val < _.min(this.dataSection) || val > _.max(this.dataSection)) {\n            //waterLine不再当前section的区间内，需要重新计算整个datasection    \n            this.setDataSection();\n            this.calculateProps();\n        };\n    }\n\n    _sort() {\n        if (this.sort) {\n            var sort = this._getSortType();\n            if (sort == \"desc\") {\n\n                this.dataSection.reverse();\n\n                //dataSectionGroup 从里到外全部都要做一次 reverse， 这样就可以对应上 dataSection.reverse()\n                _.each(this.dataSectionGroup, function (dsg, i) {\n                    dsg.reverse();\n                });\n                this.dataSectionGroup.reverse();\n                //dataSectionGroup reverse end\n            };\n        };\n    }\n\n    _getSortType() {\n        var _sort;\n        if (_.isString(this.sort)) {\n            _sort = this.sort;\n        }\n        if (!_sort) {\n            _sort = \"asc\";\n        }\n        return _sort;\n    }\n\n    _middleweight() {\n        if (this.middleweight) {\n            //支持多个量级的设置\n\n            if (!_.isArray(this.middleweight)) {\n                this.middleweight = [this.middleweight];\n            };\n\n            //拿到dataSection中的min和 max 后，用middleweight数据重新设置一遍dataSection\n            var dMin = _.min(this.dataSection);\n            var dMax = _.max(this.dataSection);\n            var newDS = [dMin];\n            var newDSG = [];\n\n            for (var i = 0, l = this.middleweight.length; i < l; i++) {\n                var preMiddleweight = dMin;\n                if (i > 0) {\n                    preMiddleweight = this.middleweight[i - 1];\n                };\n                var middleVal = preMiddleweight + parseInt((this.middleweight[i] - preMiddleweight) / 2);\n\n                newDS.push(middleVal);\n                newDS.push(this.middleweight[i]);\n\n                newDSG.push([\n                    preMiddleweight,\n                    middleVal,\n                    this.middleweight[i]\n                ]);\n            };\n            var lastMW = this.middleweight.slice(-1)[0];\n\n            if (dMax > lastMW) {\n                newDS.push(lastMW + (dMax - lastMW) / 2);\n                newDS.push(dMax);\n                newDSG.push([\n                    lastMW,\n                    lastMW + (dMax - lastMW) / 2,\n                    dMax\n                ]);\n            }\n\n            //好了。 到这里用简单的规则重新拼接好了新的 dataSection\n            this.dataSection = newDS;\n            this.dataSectionGroup = newDSG;\n\n        };\n    }\n\n    //origin 对应 this.origin 的值\n    _getOriginTrans(origin) {\n        var pos = 0;\n\n        var dsgLen = this.dataSectionGroup.length;\n        var groupLength = this.axisLength / dsgLen;\n\n        for (var i = 0, l = dsgLen; i < l; i++) {\n\n            var ds = this.dataSectionGroup[i];\n\n            if (this.layoutType == \"proportion\") {\n                var min = _.min(ds);\n                var max = _.max(ds);\n\n                var amountABS = Math.abs(max - min);\n\n                if (origin >= min && origin <= max) {\n                    pos = ((origin - min) / amountABS * groupLength + i * groupLength);\n                    break;\n                };\n\n\n            } else {\n                /* TODO: 貌似 非proportion 布局 下面的_originTrans 没毛意义啊，先注释掉\n                var valInd = _.indexOf(ds , origin);\n                if( valInd != -1 ){\n                    if( this.layoutType == \"rule\" ){\n                        pos = valInd / (ds.length - 1) * groupLength; \n                    };\n                    if( this.layoutType == \"peak\" ){\n                        pos = ( groupLength/ds.length ) * (valInd+1) - ( groupLength/ds.length )/2;\n                    };\n                };\n                */\n            }\n        };\n\n        if (this.sort == \"desc\") {\n            //如果是倒序的\n            pos = -(groupLength - pos);\n        };\n\n        return parseInt(pos);\n    }\n\n    //opt { val ind pos } 一次只能传一个\n    _getLayoutDataOf(opt) {\n        var props = [\"val\", \"ind\", \"pos\"];\n        var prop;\n        _.each(props, function (_p) {\n            if (_p in opt) {\n                prop = _p;\n            }\n        });\n\n        var layoutData;\n        _.each(this.dataSectionLayout, function (item) {\n            if (item[prop] === opt[prop]) {\n                layoutData = item;\n            };\n        });\n\n        return layoutData || {};\n    }\n\n    getPosOfVal(val) {\n\n        /* val可能会重复，so 这里得到的会有问题，先去掉\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _pos = this._getLayoutDataOf({ val : val }).pos;\n        if( _pos != undefined ){\n            return _pos;\n        };\n        */\n\n        return this.getPosOf({\n            val: val\n        });\n    }\n    getPosOfInd(ind) {\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _pos = this._getLayoutDataOf({ ind: ind }).pos;\n        if (_pos != undefined) {\n            return _pos;\n        };\n\n        return this.getPosOf({\n            ind: ind\n        });\n    }\n\n    //opt {val, ind} val 或者ind 一定有一个\n    getPosOf(opt) {\n        var pos;\n\n        var cellCount = this._getCellCount(); //dataOrg上面的真实数据节点数，把轴分成了多少个节点\n\n        if (this.layoutType == \"proportion\") {\n            var dsgLen = this.dataSectionGroup.length;\n            var groupLength = this.axisLength / dsgLen;\n            for (var i = 0, l = dsgLen; i < l; i++) {\n                var ds = this.dataSectionGroup[i];\n                var min = _.min(ds);\n                var max = _.max(ds);\n                var val = \"val\" in opt ? opt.val : this.getValOfInd(opt.ind);\n                if (val >= min && val <= max) {\n                    var _origin = this.origin;\n                    //如果 origin 并不在这个区间\n                    if (_origin < min || _origin > max) {\n                        _origin = min;\n                    } else {\n                        //如果刚好在这个区间Group\n\n                    };\n                    var maxGroupDisABS = Math.max(Math.abs(max - _origin), Math.abs(_origin - min));\n                    var amountABS = Math.abs(max - min);\n                    var h = (maxGroupDisABS / amountABS) * groupLength;\n                    pos = (val - _origin) / maxGroupDisABS * h + i * groupLength;\n\n                    if (isNaN(pos)) {\n                        pos = parseInt(i * groupLength);\n                    };\n\n                    break;\n                }\n            }\n        } else {\n\n            if (cellCount == 1) {\n                //如果只有一数据，那么就全部默认在正中间\n                pos = this.axisLength / 2;\n            } else {\n                //TODO 这里在非proportion情况下，如果没有opt.ind 那么getIndexOfVal 其实是有风险的，\n                //因为可能有多个数据的val一样\n\n                var valInd = \"ind\" in opt ? opt.ind : this.getIndexOfVal(opt.val);\n                if (valInd != -1) {\n                    if (this.layoutType == \"rule\") {\n                        //line 的xaxis就是 rule\n                        pos = valInd / (cellCount - 1) * this.axisLength;\n                    };\n                    if (this.layoutType == \"peak\") {\n                        //bar的xaxis就是 peak\n                        /*\n                        pos = (this.axisLength/cellCount) \n                              * (valInd+1) \n                              - (this.axisLength/cellCount)/2;\n                        */\n                        var _cellLength = this.getCellLength();\n                        pos = _cellLength * (valInd + 1) - _cellLength / 2;\n                    };\n                };\n            };\n\n        };\n\n        !pos && (pos = 0);\n\n        pos = Number(pos.toFixed(1)) + this._originTrans;\n\n        return Math.abs(pos);\n    }\n\n    getValOfPos(pos) {\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _val = this._getLayoutDataOf({ pos: pos }).val;\n        if (_val != undefined) {\n            return _val;\n        };\n\n        return this._getValOfInd(this.getIndexOfPos(pos));\n    }\n\n    //ds可选\n    getValOfInd(ind) {\n\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _val = this._getLayoutDataOf({ ind: ind }).val;\n        if (_val != undefined) {\n            return _val;\n        };\n\n        return this._getValOfInd(ind);\n\n        /*\n        if (this.layoutType == \"proportion\") {\n        \n        } else {\n            //这里的index是直接的对应dataOrg的索引\n            var org = ds ? ds : _.flatten(this.dataOrg);\n            return org[ind];\n        };\n        */\n\n    }\n\n    //这里的ind\n    _getValOfInd(ind, ds) {\n        var me = this;\n\n        var org = _.flatten(this.dataOrg);\n        var val;\n\n        if (this.layoutType == \"proportion\") {\n\n            var groupLength = this.axisLength / this.dataSectionGroup.length;\n            _.each(this.dataSectionGroup, function (ds, i) {\n                if (parseInt(ind / groupLength) == i || i == me.dataSectionGroup.length - 1) {\n                    var min = _.min(ds);\n                    var max = _.max(ds);\n                    val = min + (max - min) / groupLength * (ind - groupLength * i);\n                    return false;\n                }\n            });\n\n        } else {\n            val = org[ind];\n        };\n        return val;\n    }\n\n    getIndexOfPos(pos) {\n\n        //先检查下 dataSectionLayout 中有没有对应的记录\n        var _ind = this._getLayoutDataOf({ pos: pos }).ind;\n        if (_ind != undefined) {\n            return _ind;\n        };\n\n        var ind = 0;\n\n        var cellLength = this.getCellLengthOfPos(pos);\n        var cellCount = this._getCellCount();\n\n        if (this.layoutType == \"proportion\") {\n            //proportion中的index以像素为单位 所以，传入的像素值就是index\n            return pos;\n        } else {\n\n            if (this.layoutType == \"peak\") {\n                ind = parseInt(pos / cellLength);\n                if (ind == cellCount) {\n                    ind = cellCount - 1;\n                }\n            };\n\n            if (this.layoutType == \"rule\") {\n                ind = parseInt((pos + (cellLength / 2)) / cellLength);\n                if (cellCount == 1) {\n                    //如果只有一个数据\n                    ind = 0;\n                }\n            };\n        };\n\n        return ind\n    }\n\n    getIndexOfVal(val) {\n\n        var valInd = -1;\n        if (this.layoutType == \"proportion\") {\n\n            //先检查下 dataSectionLayout 中有没有对应的记录\n            var _ind = this._getLayoutDataOf({ val: val }).ind;\n            if (_ind != undefined) {\n                return _ind;\n            };\n\n            //因为在proportion中index 就是 pos\n            //所以这里要返回pos\n            valInd = this.getPosOfVal(val);\n        } else {\n            _.each(this.dataOrg, function (arr) {\n                _.each(arr, function (list) {\n                    var _ind = _.indexOf(list, val);\n                    if (_ind != -1) {\n                        valInd = _ind;\n                    };\n                });\n            });\n        }\n\n\n        return valInd;\n    }\n\n    getCellLength() {\n\n        if (this._cellLength !== null) {\n            return this._cellLength;\n        };\n\n        //ceilWidth默认按照peak算, 而且不能按照dataSection的length来做分母\n        var axisLength = this.axisLength;\n        var cellLength = axisLength;\n        var cellCount = this._getCellCount();\n\n        if (cellCount) {\n\n            if (this.layoutType == \"proportion\") {\n                cellLength = 1;\n            } else {\n                //默认按照 peak 也就是柱状图的需要的布局方式\n                cellLength = axisLength / cellCount;\n                if (this.layoutType == \"rule\") {\n                    if (cellCount == 1) {\n                        cellLength = axisLength / 2;\n                    } else {\n                        cellLength = axisLength / (cellCount - 1)\n                    };\n                };\n\n                if (this.posParseToInt) {\n                    cellLength = parseInt(cellLength);\n                };\n            }\n        };\n\n        this._cellLength = cellLength;\n\n        return cellLength;\n\n    }\n\n    //这个getCellLengthOfPos接口主要是给tips用，因为tips中只有x信息\n    getCellLengthOfPos(pos) {\n        return this.getCellLength();\n    }\n\n    //pos目前没用到，给后续的高级功能预留接口\n    getCellLengthOfInd(pos) {\n        return this.getCellLength();\n    }\n\n    _getCellCount() {\n\n        if (this._cellCount !== null) {\n            return this._cellCount;\n        };\n\n        //总共有几个数据节点，默认平铺整个dataOrg，和x轴的需求刚好契合，而y轴目前不怎么需要用到这个\n        var cellCount = 0;\n        if (this.layoutType == \"proportion\") {\n            cellCount = this.axisLength;\n        } else {\n\n            if (this.dataOrg.length && this.dataOrg[0].length && this.dataOrg[0][0].length) {\n                cellCount = this.dataOrg[0][0].length;\n            }\n        };\n        this._cellCount = cellCount;\n        return cellCount;\n    }\n\n}","/**\n* 把原始的数据\n* field1 field2 field3\n*   1      2      3\n*   2      3      4\n* 这样的数据格式转换为内部的\n* [{field:'field1',index:0,data:[1,2]} ......]\n* 这样的结构化数据格式。\n*/\nimport _ from \"./underscore\"\n\n//如果应用传入的数据是[{name:name, sex:sex ...} , ...] 这样的数据，就自动转换为chartx需要的矩阵格式数据\nfunction parse2MatrixData( list )\n{\n    if( list === undefined || list === null ){\n        list = [];\n    };\n    //检测第一个数据是否为一个array, 否就是传入了一个json格式的数据\n    if( list.length > 0 && !_.isArray( list[0] ) ){\n        var newArr = [];\n        var fields = [];\n        var fieldNum = 0;\n        for( var i=0,l=list.length ; i<l ; i++ ){\n            var row = list[i];\n            if( i == 0 ){\n                for( var f in row ){\n                    fields.push( f ); \n                };\n                newArr.push( fields );\n                fieldNum = fields.length;\n            };\n            var _rowData = [];\n            for( var ii=0 ; ii<fieldNum ; ii++ ){\n                _rowData.push( row[ fields[ii] ] );\n            };\n            newArr.push( _rowData );\n        };\n        \n        return newArr;\n    } else {\n        return list\n    }\n} \n\nexport default function( data, opt ){\n\n    //数据做一份拷贝，避免污染源数据\n    data = JSON.parse( JSON.stringify( data ) );\n    \n    var dataFrame  = {        //数据框架集合\n        length        : 0,\n        org           : [],   //最原始的数据，一定是个行列式，因为如果发现是json格式数据，会自动转换为行列式\n        data          : [],   //最原始的数据转化后的数据格式：[o,o,o] o={field:'val1',index:0,data:[1,2,3]}\n        getRowDataAt  : _getRowDataAt,\n        getRowDataOf  : _getRowDataOf,\n        getFieldData  : _getFieldData,\n        getDataOrg    : getDataOrg,\n        fields        : [],\n        range         : {\n            start     : 0,\n            end       : 0\n        }\n    };\n\n    if( !data || data.length == 0 ){\n        return dataFrame\n    };\n\n    //检测第一个数据是否为一个array, 否就是传入了一个json格式的数据\n    if( data.length > 0 && !_.isArray( data[0] ) ){\n        data = parse2MatrixData( data );\n    };\n    dataFrame.length = data.length - 1;\n\n    //设置好数据区间end值\n    dataFrame.range.end = dataFrame.length - 1;\n    //然后检查opts中是否有dataZoom.range\n    if( opt && opt.dataZoom && opt.dataZoom.range ){\n        _.extend( dataFrame.range, opt.dataZoom.range );\n    };\n\n    if( data.length && data[0].length && !~data[0].indexOf(\"__index__\") ){\n        //如果数据中没有用户自己设置的__index__，那么就主动添加一个__index__，来记录元数据中的index\n        for( var i=0,l=data.length; i<l; i++ ){\n            if( !i ){\n                data[0].push( \"__index__\" );\n            } else {\n                data[i].push( i-1 );\n            }\n        }\n    }\n\n    dataFrame.org = data;\n    dataFrame.fields = data[0] ? data[0] : []; //所有的字段集合;\n\n    \n\n    var total = [];//已经处理成[o,o,o]   o={field:'val1',index:0,data:[1,2,3]}\n    for(var a = 0, al = dataFrame.fields.length; a < al; a++){\n        var o = {};\n        o.field = dataFrame.fields[a];\n        o.index = a;\n        o.data  = [];\n        total.push(o);\n    };\n    dataFrame.data = total;\n\n    //填充好total的data并且把属于yAxis的设置为number\n    for(var a = 1, al = data.length; a < al; a++){\n        for(var b = 0, bl = data[a].length; b < bl; b++){\n            var _val = data[a][b];\n            //如果用户传入的数据是个number，那么就转换为真正的Number吧\n            //‘223’ --》 223\n            if( !isNaN( _val ) && _val !== \"\" && _val !== null ){\n                _val = Number( _val );\n            };\n            total[b].data.push( _val );\n            //total[b].data.push( data[a][b] );\n        }\n    };\n\n    //会按照$field的格式转换成对应一一对应的 org 的结构\n    function getDataOrg( $field, format, totalList , lev){\n        \n        if( !lev ) lev = 0;\n\n        var arr = totalList || total;\n        if( !arr ){\n            return;\n        }\n        if( !format ){\n            format = function( e ){ return e }\n        };\n\n        function _format( data ){\n            for( var i=0,l=data.length; i<l; i++ ){\n                data[i] = format( data[i] );\n            };\n            return data;\n        };\n\n        if( !_.isArray($field) ){\n            $field = [$field];\n        };\n\n        //这个时候的arr只是totalList的过滤，还没有完全的按照$field 中的排序\n        var newData = [];\n        for( var i=0,l=$field.length; i<l ; i++ ){\n            var fieldInTotal = false; //如果该field在数据里面根本没有，那么就说明是无效的field配置\n            if( _.isArray($field[i]) ){\n                newData.push( getDataOrg( $field[i], format, totalList , lev+1) );\n            } else {\n            \n                var _fieldData = newData;\n                if( !lev ){\n                    _fieldData = [];\n                };\n                for( var ii=0,iil=arr.length ; ii<iil ; ii++ ){\n                     if( $field[i] == arr[ii].field ){\n                         fieldInTotal = true;\n                         _fieldData.push( _format( arr[ii].data.slice( dataFrame.range.start, dataFrame.range.end+1 ) ) );\n                         break;\n                     }\n                };\n                if( !lev ){\n                    newData.push( _fieldData );\n                };\n            };\n        }\n        return newData;\n    };\n\n    /*\n     * 获取某一行数据\n    */ \n    function _getRowDataAt(index){\n        var o = {}\n        var data = dataFrame.data\n        for(var a = 0; a < data.length; a++){\n            o[data[a].field] = data[a].data[ dataFrame.range.start + index ]\n        };\n        return o\n    }\n\n    /**\n     * obj => {uv: 100, pv: 10 ...}\n     */\n    function _getRowDataOf( obj ){\n        !obj && (obj={});\n        var arr = [];\n\n        var expCount = 0;\n        for( var p in obj ){\n            expCount++;\n        };\n\n        if( expCount ){\n            for( var i=dataFrame.range.start; i< dataFrame.range.end; i++ ){\n                var matchNum = 0;\n                _.each( dataFrame.data, function( fd ){\n                    if( fd.field in obj && fd.data[i] == obj[ fd.field ] ){\n                        matchNum++;\n                    }\n                } );\n                if( matchNum == expCount ){\n                    //说明这条数据是完全和查询\n                    arr.push( _getRowDataAt(i) );\n                };\n            };\n        };\n\n        return arr;\n    }\n\n    function _getFieldData( field ){\n        var data;\n        _.each( dataFrame.data , function( d ){\n            if( d.field == field ){\n                data = d;\n            }\n        } ); \n        if( data ){\n            return data.data.slice( dataFrame.range.start, dataFrame.range.end+1 );\n        } else {\n            return []\n        }\n    }\n\n    return dataFrame;\n}","import _ from \"./underscore\";\n\nconst RESOLUTION = window.devicePixelRatio || 1;\n\nvar addOrRmoveEventHand = function( domHand , ieHand ){\n    if( document[ domHand ] ){\n        function eventDomFn( el , type , fn ){\n            if( el.length ){\n                for(var i=0 ; i < el.length ; i++){\n                    eventDomFn( el[i] , type , fn );\n                }\n            } else {\n                el[ domHand ]( type , fn , false );\n            }\n        };\n        return eventDomFn\n    } else {\n        function eventFn( el , type , fn ){\n            if( el.length ){\n                for(var i=0 ; i < el.length ; i++){\n                    eventFn( el[i],type,fn );\n                }\n            } else {\n                el[ ieHand ]( \"on\"+type , function(){\n                    return fn.call( el , window.event );\n                });\n            }\n        };\n        return eventFn\n    }\n};\n\nexport default {\n    // dom操作相关代码\n    query : function(el){\n        if(_.isString(el)){\n           return document.getElementById(el)\n        }\n        if(el.nodeType == 1){\n           //则为一个element本身\n           return el\n        }\n        if(el.length){\n           return el[0]\n        }\n        return null;\n    },\n    offset : function(el){\n        var box = el.getBoundingClientRect(), \n        doc = el.ownerDocument, \n        body = doc.body, \n        docElem = doc.documentElement, \n\n        // for ie  \n        clientTop = docElem.clientTop || body.clientTop || 0, \n        clientLeft = docElem.clientLeft || body.clientLeft || 0, \n\n        // In Internet Explorer 7 getBoundingClientRect property is treated as physical, \n        // while others are logical. Make all logical, like in IE8. \n        zoom = 1; \n        if (body.getBoundingClientRect) { \n            var bound = body.getBoundingClientRect(); \n            zoom = (bound.right - bound.left)/body.clientWidth; \n        } \n        if (zoom > 1){ \n            clientTop = 0; \n            clientLeft = 0; \n        } \n        var top = box.top/zoom + (window.pageYOffset || docElem && docElem.scrollTop/zoom || body.scrollTop/zoom) - clientTop, \n            left = box.left/zoom + (window.pageXOffset|| docElem && docElem.scrollLeft/zoom || body.scrollLeft/zoom) - clientLeft; \n\n        return { \n            top: top, \n            left: left \n        }; \n    },\n    addEvent : addOrRmoveEventHand( \"addEventListener\" , \"attachEvent\" ),\n    removeEvent : addOrRmoveEventHand( \"removeEventListener\" , \"detachEvent\" ),\n    pageX: function(e) {\n        if (e.pageX) return e.pageX;\n        else if (e.clientX)\n            return e.clientX + (document.documentElement.scrollLeft ?\n                    document.documentElement.scrollLeft : document.body.scrollLeft);\n        else return null;\n    },\n    pageY: function(e) {\n        if (e.pageY) return e.pageY;\n        else if (e.clientY)\n            return e.clientY + (document.documentElement.scrollTop ?\n                    document.documentElement.scrollTop : document.body.scrollTop);\n        else return null;\n    },\n    /**\n     * 创建dom\n     * @param {string} id dom id 待用\n     * @param {string} type : dom type， such as canvas, div etc.\n     */\n    createCanvas : function( _width , _height , id) {\n        var canvas = document.createElement(\"canvas\");\n        canvas.style.position = 'absolute';\n        canvas.style.width  = _width + 'px';\n        canvas.style.height = _height + 'px';\n        canvas.style.left   = 0;\n        canvas.style.top    = 0;\n        canvas.setAttribute('width', _width * RESOLUTION);\n        canvas.setAttribute('height', _height * RESOLUTION);\n        canvas.setAttribute('id', id);\n        return canvas;\n    },\n    createView: function(_width , _height, id){\n        var view = document.createElement(\"div\");\n        view.className = \"canvax-view\";\n        view.style.cssText += \"position:relative;width:100%;height:100%;\"\n\n        var stageView = document.createElement(\"div\");\n        stageView.style.cssText += \"position:absolute;width:\" + _width + \"px;height:\" + _height +\"px;\"\n\n        //用来存放一些dom元素\n        var domView = document.createElement(\"div\");\n        domView.style.cssText += \"position:absolute;width:\" + _width + \"px;height:\" + _height +\"px;\"\n\n        view.appendChild(stageView);\n        view.appendChild(domView);\n        \n        return {\n            view : view,\n            stageView: stageView,\n            domView: domView\n        }\n    }\n    //dom相关代码结束\n};","/**\n * 系统皮肤\n */\nconst _colors = [\"#ff8533\",\"#73ace6\",\"#82d982\",\"#e673ac\",\"#cd6bed\",\"#8282d9\",\"#c0e650\",\"#e6ac73\",\"#6bcded\",\"#73e6ac\",\"#ed6bcd\",\"#9966cc\"];\nexport default {\n    colors : _colors,\n    set : function( colors ){\n        this.colors = colors;\n        /*\n        var me = this;\n        _.each( colors, function( color , i ){\n            me.colors[i] = color;\n        } );\n        */\n        return this.colors;\n    },\n    get : function( ){\n        return this.colors\n    }\n}","//图表皮肤\nimport globalTheme from \"./theme\";\nimport _ from \"./underscore\";\nimport dom from \"./dom\";\nimport {is3dOpt,cloneData,cloneOptions} from \"./tools\";\n\nexport default {\n    create : function( el, _data, _opt ){\n        var chart = null;\n        var me = this;\n\n        var data = cloneData( _data );\n        var opt  = cloneOptions( _opt );  \n\n        var _destroy = function(){\n            me.instances[ chart.id ] = null;\n            delete me.instances[ chart.id ];\n        };\n\n        //这个el如果之前有绘制过图表，那么就要在instances中找到图表实例，然后销毁\n        var chart_id = dom.query(el).getAttribute(\"chart_id\");\n        if( chart_id != undefined ){\n            var _chart = me.instances[ chart_id ];\n            if( _chart ){\n                _chart.destroy();\n                _chart.off && _chart.off(\"destroy\" , _destroy)\n            };\n            delete me.instances[ chart_id ];\n        };\n\n        //图表维度\n        var dimension = 2;\n        if( is3dOpt( _opt ) ){\n            dimension = 3;\n        };\n\n        var componentModules = me.getComponentModules( dimension );\n\n        //如果用户没有配置coord，说明这个图表是一个默认目标系的图表，比如标签云\n        var Chart = me.getComponentModule('chart', dimension);\n\n        //try {\n            chart = new Chart( el, data, opt, componentModules );\n            if( chart ){\n                chart.draw();\n                \n                me.instances[ chart.id ] = chart;\n                chart.on(\"destroy\" , _destroy);\n            };\n        //} catch(err){\n        //    throw \"Chatx Error：\" + err\n        //};\n\n        return chart;\n    },\n    setGlobalTheme: function( colors ){\n        globalTheme.set( colors );\n    },\n    getGlobalTheme: function(){\n        return globalTheme.get();\n    },\n    \n    instances : {},\n    getChart : function( chartId ){\n        return this.instances[ chartId ];\n    },\n    resize : function(){\n        //调用全局的这个resize方法，会把当前所有的 chart instances 都执行一遍resize\n        for( var c in this.instances ){\n            this.instances[ c ].resize();\n        }\n    },\n    \n    //第二个参数是用户要用来覆盖chartpark中的配置的options\n    getOptions : function( chartPark_cid , userOptions ){\n        //chartPark_cid,chartpark中的图表id\n        if( !this.options[ chartPark_cid ] ){\n            return userOptions || {};\n        };\n        var JsonSerialize = {\n            prefix: '[[JSON_FUN_PREFIX_',\n            suffix: '_JSON_FUN_SUFFIX]]'\n        };\n        var parse = function(string){\n            return JSON.parse( string ,function(key, value){\n                if((typeof value === 'string') && \n                   (value.indexOf(JsonSerialize.suffix) > 0) && \n                   (value.indexOf(JsonSerialize.prefix) == 0)\n                ){\n                    return (new Function('return ' + value.replace(JsonSerialize.prefix, '').replace(JsonSerialize.suffix, '')))();\n                };\n                return value;\n            }) || {};\n        };\n        var opt = parse( decodeURIComponent( this.options[ chartPark_cid ] || {} ) );\n        if( userOptions ){\n            opt = _.extend( true, opt, userOptions );\n        };\n        return opt;\n    },\n\n    components: {\n        c_2d : {\n            /*\n            modules:{\n                coord : {\n                    empty : ..,\n                    rect  : ..,\n                    ...\n                },\n                graphs : {\n                    //empty : .., //一般只有coord才会有empty\n                    bar   : ..,\n                    ...\n                }\n            },\n            get: function( name, type ){}\n            */\n        },\n        c_3d : {\n            //所有3d组件,同上\n        }\n    },\n    getComponentModules( dimension ){\n        var comps = this.components.c_2d;\n        if( dimension == 3 ){\n            comps = this.components.c_3d;\n        };\n        if( !comps.modules ){\n            comps.modules = {};\n        };\n        if( !comps.get ){\n            comps.get = function( name, type ){\n                if( !type ){\n                    type = \"empty\";\n                }; \n                var _module = comps.modules[ name ];\n                if( _module && _module[type] ){\n                    return _module[type]\n                };\n            };\n        };\n        return comps;\n    },\n    /**\n     * @param {compModule} 要注册进去的模块名称\n     * @param {name} 要获取的comp名称\n     * @param { dimension,type } 后面可以传传两个参数 \n     * @param { dimension } 如果有四个参数，那么第三个肯定是type，第四个肯定是dimension \n     */\n    registerComponent( compModule, name )\n    {\n        var dimension = 2;\n        var type = \"empty\";\n\n        if( arguments.length == 3 ){\n            var arg2 = arguments[2]\n            if( _.isNumber( arg2 ) ){\n                if( arg2 == 3 ){\n                    dimension = 3\n                }\n            };\n            if( _.isString( arg2 ) ){\n                type = arg2;\n            };\n        };\n        if( arguments.length == 4 ){\n            //那么肯定是有传 type  dimension 两个值\n            type = arguments[ 2 ];\n            if( arguments[3] == 3 ){\n                dimension = 3;\n            };\n        };\n        \n        var comps = this.getComponentModules( dimension ).modules;\n\n        var _comp = comps[ name ];\n        if( !_comp ){\n            _comp = comps[ name ] = {\n                \n            };\n        };\n        if( !_comp[ type ] ){\n            _comp[ type ] = compModule;\n        };\n        return comps;\n    },\n    /**\n     * \n     * @param {name} 要获取的comp名称\n     * @param { dimension,type } 后面可以传传两个参数 \n     * @param { dimension } 如果有三个参数，那么第二个肯定是type，第三个肯定是dimension \n     */\n    getComponentModule( name ){\n        var dimension = 2;\n        var type = \"empty\";\n\n        if( arguments.length == 2 ){\n            var arg1 = arguments[1]\n            if( _.isNumber( arg1 ) ){\n                if( arg1 == 3 ){\n                    dimension = 3\n                }\n            };\n            if( _.isString( arg1 ) ){\n                type = arg1;\n            };\n        };\n        if( arguments.length == 3 ){\n            //那么肯定是有传 type  dimension 两个值\n            type = arguments[ 1 ];\n            if( arguments[2] == 3 ){\n                dimension = 3;\n            };\n        };\n\n        var _comp = this.getComponentModules( dimension ).modules[ name ];\n\n        return _comp ? _comp[ type ] : undefined;\n    }\n};","//十六进制颜色值的正则表达式 \nvar reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/; \n\n/*16进制颜色转为RGB格式*/  \nexport function colorRgb( hex ){  \n    var sColor = hex.toLowerCase();  \n    if(sColor && reg.test(sColor)){  \n        if(sColor.length === 4){  \n            var sColorNew = \"#\";  \n            for(var i=1; i<4; i+=1){  \n                sColorNew += sColor.slice(i,i+1).concat(sColor.slice(i,i+1));     \n            }  \n            sColor = sColorNew;  \n        }  \n        //处理六位的颜色值  \n        var sColorChange = [];\n        for(var i=1; i<7; i+=2){  \n            sColorChange.push(parseInt(\"0x\"+sColor.slice(i,i+2)));    \n        }  \n        return \"RGB(\" + sColorChange.join(\",\") + \")\";  \n    } else {  \n        return sColor;    \n    }  \n};\n\nexport function colorRgba(hex , a){\n    return colorRgb( hex ).replace(')', ','+a+')').replace('RGB', 'RGBA');\n};\n\nexport function hexTorgb(hex, out){\n\t//hex可能是“#ff0000” 也可能是 0xff0000\n\tif( hex.replace ){\n\t   hex = parseInt( hex.replace(\"#\" , \"0X\") , 16 );\n    };\n\n    out = out || [];\n\n    out[0] = ((hex >> 16) & 0xFF) / 255;\n    out[1] = ((hex >> 8) & 0xFF) / 255;\n    out[2] = (hex & 0xFF) / 255;\n\n    return out;\n}\n\nexport function hexTostring(hex){\n     hex = hex.toString(16);\n     hex = '000000'.substr(0, 6 - hex.length) + hex;\n\n     return `#${hex}`;\n}\n\nexport function rgbTohex(rgb){\n\treturn (((rgb[0] * 255) << 16) + ((rgb[1] * 255) << 8) + (rgb[2] * 255));\n}\n","import _ from \"./underscore\"\n\nconst aRound = 360; //一圈的度数\nconst Cos = Math.cos;\nconst Sin = Math.sin;\n\nexport default class Polar {\n    constructor(opt = {}, dataFrame = []) {\n\n        this._opt = _.clone(opt);\n        this.dataFrame = dataFrame;\n\n        this.axisLength = 1;\n\n        this.dataOrg = [];\n\n        this.startAngle = this._opt.startAngle;\n        this.allAngles = Math.min(360, this._opt.allAngles);\n        this.sort = this._opt.sort;\n\n        this.layoutData = []; //和dataSection一一对应的，每个值的pos,agend,dregg,centerPos\n\n\n\n        this.maxRadius = 0; //最大半径值\n        this.minRadius = 0; //最小半径值 \n\n    }\n\n    calculateProps() {\n        let axisLength = 0;\n        let percentage = 0;\n        let currentAngle = 0;\n        let opt = this._opt;\n        let angle, endAngle, cosV, sinV, midAngle, quadrant;\n        let percentFixedNum = 2;\n\n        let outRadius = opt.node.outRadius;\n        let innerRadius = opt.node.innerRadius;\n        let moveDis = opt.node.moveDis;\n\n        this.layoutData.forEach((item, i) => {\n            if (!item.enabled) return;\n            axisLength += isNaN(+item.value) ? 0 : +item.value;\n\n            if (item.radiusField) {\n                this.maxRadius = Math.max(item.radiusValue, axisLength);\n                this.minRadius = Math.min(item.radiusValue, axisLength);\n            }\n        })\n\n        this.axisLength = axisLength;\n\n        if (axisLength > 0) {\n\n            //原始算法\n            // currentAngle = + opt.startAngle % 360;\n            // limitAngle = opt.allAngles + me.startAngle % me.allAngles;\n\n            //新的算法\n            //这里只是计算每个扇区的初始位置,所以这里求模就可以啦\n            currentAngle = _.euclideanModulo(this.startAngle, aRound);\n            // opt.allAngles = opt.allAngles > 0 ? opt.allAngles : aRound;\n            // limitAngle = opt.allAngles + _.euclideanModulo(opt.startAngle, opt.allAngles);\n\n            this.layoutData.forEach((item, i) => {\n                percentage = item.value / axisLength;\n                //enabled为false的sec，比率就设置为0\n                if (!item.enabled) {\n                    percentage = 0;\n                };\n\n                angle = this.allAngles * percentage;\n                //旧的算法\n                // endAngle = currentAngle + angle > limitAngle ? limitAngle : me.currentAngle + angle;\n                endAngle = currentAngle + angle;\n                midAngle = currentAngle + angle * 0.5;\n\n                cosV = Cos(_.degToRad(midAngle));\n                sinV = Sin(_.degToRad(midAngle));\n\n                cosV = cosV.toFixed(5);\n                sinV = sinV.toFixed(5);\n                quadrant = this.getAuadrant(midAngle);\n\n                //如果用户在配置中制定了半径字段,这里需要计算相对的半径比例值\n                if (!!item.radiusField) {\n                    // var _rr = Number(item.rowData[opt.node.radius]);\n                    outRadius = parseInt((opt.node.outRadius - opt.node.innerRadius) * ((item.radiusValue - this.minRadius) / (this.maxRadius - this.minRadius)) + opt.node.innerRadius);\n                };\n                _.extend(item, {\n                    outRadius,\n                    innerRadius,\n                    startAngle: currentAngle, //起始角度\n                    endAngle, //结束角度\n                    midAngle,  //中间角度\n\n                    moveDis,\n\n                    outOffsetx: moveDis * 0.7 * cosV, //focus的事实外扩后圆心的坐标x\n                    outOffsety: moveDis * 0.7 * sinV, //focus的事实外扩后圆心的坐标y\n\n                    centerx: outRadius * cosV,\n                    centery: outRadius * sinV,\n                    outx: (outRadius + moveDis) * cosV,\n                    outy: (outRadius + moveDis) * sinV,\n                    edgex: (outRadius + moveDis) * cosV,\n                    edgey: (outRadius + moveDis) * sinV,\n\n\n                    orginPercentage: percentage,\n                    percentage: (percentage * 100).toFixed(percentFixedNum),\n\n                    quadrant, //象限\n                    isRightSide: quadrant == 1 || quadrant == 4 ? 1 : 0,\n                    cosV,\n                    sinV\n                });\n\n                currentAngle += angle;\n\n\n            })\n\n        }\n\n\n    }\n    /**\n     *  重设数据后,需要调用setDataFrame与calculateProps 重新计算layoutData\n     * @param {ArryObject} dataFrame \n     */\n    resetData(dataFrame) {\n        this.dataFrame = dataFrame || [];\n\n        this.axisLength = 1;\n\n        this.dataOrg = [];\n        this.startAngle = this._opt.startAngle || -90;\n        this.allAngles = this._opt.allAngles || 360;\n\n        this.layoutData = [];\n    }\n    setOption(opt = {}) {\n        Object.assign(this._opt, opt);\n        this.startAngle = this._opt.startAngle;\n        this.allAngles = Math.min(360, this._opt.allAngles);\n        this.sort = this._opt.sort;\n    }\n    setDataFrame(dataFrame) {\n\n        let data = [];\n        let opt = this._opt;\n        let field = opt.field;\n        let labelField = opt.groupField || opt.label.field || opt.field;\n        let radiusField = opt.node.radius;\n\n        dataFrame = dataFrame || this.dataFrame;\n        this.dataFrame = dataFrame;\n\n        this.dataOrg = [];\n\n        for (let i = 0, l = dataFrame.length; i < l; i++) {\n            let rowData = dataFrame.getRowDataAt(i);\n\n            let layoutData = {\n                rowData: rowData,//把这一行数据给到layoutData引用起来\n                enabled: true,   //是否启用，显示在列表中\n\n                value: rowData[field],\n                label: rowData[labelField],\n                iNode: i\n            };\n\n            this.dataOrg.push(rowData[field]);\n\n            if (this._isFiled(radiusField, layoutData)) {\n                layoutData.radiusField = radiusField;\n                layoutData.radiusValue = rowData[radiusField];\n            }\n            data.push(layoutData);\n        };\n\n        if (this.sort) {\n            this.dataOrg = [];\n            data.sort((a, b) => {\n                if (this.sort == 'asc') {\n                    return a.value - b.value;\n                } else {\n                    return b.value - a.value;\n                }\n            });\n\n            //重新设定下ind\n            _.each(data, (d, i) => {\n                d.iNode = i;\n                this.dataOrg.push(d);\n            });\n        };\n\n        this.layoutData = data;\n        return data;\n    }\n\n    getLayoutData() {\n        return this.layoutData || [];\n    }\n\n    _isFiled(field, layoutData) {\n        return field && (_.isString(field) && field in layoutData.rowData)\n    }\n    getAuadrant(ang) { //获取象限\n\n        ang = _.euclideanModulo(ang, aRound);\n        let angleRatio = parseInt(ang / 90);\n        let _quadrant = 0;\n        switch (angleRatio) {\n            case 0:\n                _quadrant = 1;\n                break;\n            case 1:\n                _quadrant = 2;\n                break;\n            case 2:\n                _quadrant = 3;\n                break;\n            case 3:\n            case 4:\n                _quadrant = 4;\n                break;\n        }\n        return _quadrant;\n    }\n\n    /**\n     * 通过值或者索引返回数据集对象\n     * @param {Object} opt {val:xxx} 或 {ind:xxx} \n     */\n    _getLayoutDataOf(opt) {\n        //先提供 具体值 和 索引的计算\n        var props = [{ val: \"value\" }, { ind: \"iNode\" }];\n        var prop = props[Object.keys(opt)[0]];\n\n        var layoutData;\n        _.each(this.layoutData, function (item) {\n            if (item[prop] === opt[prop]) {\n                layoutData = item;\n            };\n        });\n\n        return layoutData || {};\n    }\n\n    getRadiansAtR() {\n        //基类不实现\n    }\n\n    static filterPointsInRect(points, origin, width, height) {\n        for (var i = 0, l = points.length; i < l; i++) {\n            if (!Polar.checkPointInRect(points[i], origin, width, height)) {\n                //该点不在root rect范围内，去掉\n                points.splice(i, 1);\n                i-- , l--;\n            }\n        };\n        return points;\n    }\n\n    static checkPointInRect(p, origin, width, height) {\n        var _tansRoot = { x: p.x + origin.x, y: p.y + origin.y };\n        return !(_tansRoot.x < 0 || _tansRoot.x > width || _tansRoot.y < 0 || _tansRoot.y > height);\n    }\n\n    //检查由n个相交点分割出来的圆弧是否在rect内\n    static checkArcInRect(arc, r, origin, width, height) {\n        var start = arc[0];\n        var to = arc[1];\n        var differenceR = to.radian - start.radian;\n        if (to.radian < start.radian) {\n            differenceR = (Math.PI * 2 + to.radian) - start.radian;\n        };\n        var middleR = (start.radian + differenceR / 2) % (Math.PI * 2);\n        return Polar.checkPointInRect(Polar.getPointInRadianOfR(middleR, r), origin, width, height);\n    }\n\n    //获取某个点相对圆心的弧度值\n    static getRadianInPoint(point) {\n        var pi2 = Math.PI * 2;\n        return (Math.atan2(point.y, point.x) + pi2) % pi2;\n    }\n\n    //获取某个弧度方向，半径为r的时候的point坐标点位置\n    static getPointInRadianOfR(radian, r) {\n        var pi = Math.PI;\n        var x = Math.cos(radian) * r;\n        if (radian == (pi / 2) || radian == pi * 3 / 2) {\n            //90度或者270度的时候\n            x = 0;\n        };\n        var y = Math.sin(radian) * r;\n        if (radian % pi == 0) {\n            y = 0;\n        };\n        return {\n            x: x,\n            y: y\n        };\n    }\n\n    static getROfNum(num, dataSection, width, height) {\n        var r = 0;\n        var maxNum = _.max(dataSection);\n        var minNum = 0; //Math.min( this.rAxis.dataSection );\n        var maxR = parseInt(Math.max(width, height) / 2);\n\n        r = maxR * ((num - minNum) / (maxNum - minNum));\n        return r;\n    }\n\n    getPointsOfR(r, angleList) {\n        var points = [];\n        _.each(angleList, function (_a) {\n            //弧度\n            var _r = Math.PI * _a / 180;\n            var point = Polar.getPointInRadianOfR(_r, r);\n            points.push(point)\n        });\n        return points;\n    }\n\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * canvas 上委托的事件管理\n */\nimport _ from \"../underscore\";\n\nvar Event = function( evt ) {\n\tvar eventType = \"CanvaxEvent\"; \n    if( _.isString( evt ) ){\n    \teventType = evt;\n    };\n    if( _.isObject( evt ) && evt.type ){\n    \teventType = evt.type;\n    };\n\n    this.target = null;\n    this.currentTarget = null;\n    this.type   = eventType;\n    this.point  = null;\n\n    this._stopPropagation = false; //默认不阻止事件冒泡\n};\nEvent.prototype = {\n    stopPropagation : function() {\n        this._stopPropagation = true;\n    }\n};\n\nexport default Event","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * canvas 上委托的事件管理\n */\nimport _ from \"../underscore\";\n\nconst _mouseEvents = 'mousedown mouseup mouseover mousemove mouseout click dblclick'\n\nexport default {\n    _types : _mouseEvents.split(/,| /),\n    register : function( evts ){\n        if( !evts ) {\n            return;\n        };\n        if( _.isString( evts ) ){\n            evts = evts.split(/,| /);\n        };\n        this._types = _mouseEvents.split(/,| /).concat( evts );\n    },\n    get: function(){\n        return this._types;\n    }\n};","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 事件管理类\n */\nimport types from \"./types\";\nimport _ from \"../underscore\";\n\n\n/**\n * 构造函数.\n * @name EventDispatcher\n * @class EventDispatcher类是可调度事件的类的基类，它允许显示列表上的任何对象都是一个事件目标。\n */\nvar Manager = function() {\n    //事件映射表，格式为：{type1:[listener1, listener2], type2:[listener3, listener4]}\n    this._eventMap = {};\n};\n\nManager.prototype = { \n    /**\n     * 判断events里面是否有用户交互事件\n     */\n    _setEventEnable : function(){\n        var hasInteractionEvent = false;\n      \n        for( var t in this._eventMap ){\n            if( _.indexOf( types.get(), t ) > -1 ){\n                hasInteractionEvent = true;\n            };\n        };\n        this._eventEnabled = hasInteractionEvent;\n    },\n    /*\n     * 注册事件侦听器对象，以使侦听器能够接收事件通知。\n     */\n    _addEventListener : function( _type, listener) {\n\n        if( typeof listener != \"function\" ){\n          //listener必须是个function呐亲\n          return false;\n        }\n        var addResult = true;\n        var self      = this;\n        var types     = _type;\n        if( _.isString( _type ) ){\n            types = _type.split(/,| /);\n        };\n        _.each( types , function(type){\n            var map = self._eventMap[type];\n            if(!map){\n                map = self._eventMap[type] = [];\n                map.push(listener);\n                //self._eventEnabled = true;\n                self._setEventEnable();\n                return true;\n            }\n\n            if(_.indexOf(map ,listener) == -1) {\n                map.push(listener);\n                //self._eventEnabled = true;\n                self._setEventEnable();\n                return true;\n            }\n\n            addResult = false;\n        });\n        return addResult;\n    },\n    /**\n     * 删除事件侦听器。\n     */\n    _removeEventListener : function(type, listener) {\n        if(arguments.length == 1) return this.removeEventListenerByType(type);\n\n        var map = this._eventMap[type];\n        if(!map){\n            return false;\n        }\n\n        for(var i = 0; i < map.length; i++) {\n            var li = map[i];\n            if(li === listener) {\n                map.splice(i, 1);\n                if(map.length    == 0) { \n                    delete this._eventMap[type];\n                    this._setEventEnable();\n                    //如果这个如果这个时候child没有任何事件侦听\n                    /*\n                    if(_.isEmpty(this._eventMap)){\n                        //那么该元素不再接受事件的检测\n                        this._eventEnabled = false;\n                    }\n                    */\n                }\n                return true;\n            }\n        }\n        \n        return false;\n    },\n    /**\n     * 删除指定类型的所有事件侦听器。\n     */\n    _removeEventListenerByType : function(type) {\n        var map = this._eventMap[type];\n        if(!map) {\n            delete this._eventMap[type];\n            this._setEventEnable();\n            //如果这个如果这个时候child没有任何事件侦听\n            /*\n            if(_.isEmpty(this._eventMap)){\n                //那么该元素不再接受事件的检测\n                this._eventEnabled = false;\n            }\n            */\n            return true;\n        }\n        return false;\n    },\n    /**\n     * 删除所有事件侦听器。\n     */\n    _removeAllEventListeners : function() {\t\n        this._eventMap = {};\n        this._eventEnabled = false;\n    },\n    /**\n    * 派发事件，调用事件侦听器。\n    */\n    _dispatchEvent : function(e) {\n        var map = this._eventMap[e.type];\n        \n        if( map ){\n            if(!e.target) e.target = this;\n            map = map.slice();\n\n            for(var i = 0; i < map.length; i++) {\n                var listener = map[i];\n                if(typeof(listener) == \"function\") {\n                    listener.call(this, e);\n                }\n            }\n        }\n\n        if( !e._stopPropagation ) {\n            //向上冒泡\n            if( this.parent ){\n                e.currentTarget = this.parent;\n                this.parent._dispatchEvent( e );\n            }\n        } \n        return true;\n    },\n    /**\n       * 检查是否为指定事件类型注册了任何侦听器。\n       */\n    _hasEventListener : function(type) {\n        var map = this._eventMap[type];\n        return map != null && map.length > 0;\n    }\n}\n\nexport default Manager;\n","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 事件派发类\n */\nimport Manager from \"./Manager\";\nimport Event from \"./Event\";\nimport _ from \"../underscore\";\n\n\nexport default class Dispatcher extends Manager\n{\n    constructor()\n    {\n        super();\n    }\n\n    on(type, listener)\n    {\n        this._addEventListener( type, listener);\n        return this;\n    }\n\n    addEventListener(type, listener)\n    {\n        this._addEventListener( type, listener);\n        return this;\n    }\n\n    un(type,listener)\n    {\n        this._removeEventListener( type, listener);\n        return this;\n    }\n\n    removeEventListener(type,listener)\n    {\n        this._removeEventListener( type, listener);\n        return this;\n    }\n\n    removeEventListenerByType(type)\n    {\n        this._removeEventListenerByType( type);\n        return this;\n    }\n\n    removeAllEventListeners()\n    {\n        this._removeAllEventListeners();\n        return this;\n    }\n\n    //params 要传给evt的eventhandler处理函数的参数，会被merge到Canvax event中\n    fire(eventType , params)\n    {\n        //{currentTarget,point,target,type,_stopPropagation}\n        var e = new Event( eventType );\n\n        if( params ){\n            for( var p in params ){\n                if( p != \"type\" ){\n                    e[p] = params[p];\n                }\n                //然后，currentTarget要修正为自己\n                e.currentTarget = this;\n            }\n        };\n\n        var me = this;\n        _.each( eventType.split(\" \") , function(eType){\n            e.currentTarget = me;\n            me.dispatchEvent( e );\n        } );\n        return this;\n    }\n\n    dispatchEvent(evt)\n    {\n        //this instanceof DisplayObjectContainer ==> this.children\n        //TODO: 这里import DisplayObjectContainer 的话，在displayObject里面的import EventDispatcher from \"../event/EventDispatcher\";\n        //会得到一个undefined，感觉是成了一个循环依赖的问题，所以这里换用简单的判断来判断自己是一个容易，拥有children\n        if( this.children  && evt.point ){\n            var target = this.getObjectsUnderPoint( evt.point , 1)[0];\n            if( target ){\n                target.dispatchEvent( evt );\n            }\n            return;\n        };\n        \n        if(this.context && evt.type == \"mouseover\"){\n            //记录dispatchEvent之前的心跳\n            var preHeartBeat = this._heartBeatNum;\n            var pregAlpha    = this.context.$model.globalAlpha;\n            this._dispatchEvent( evt );\n            if( preHeartBeat != this._heartBeatNum ){\n                this._hoverClass = true;\n                if( this.hoverClone ){\n                    var canvax = this.getStage().parent;\n                    //然后clone一份obj，添加到_bufferStage 中\n                    var activShape = this.clone(true);  \n                    activShape._transform = this.getConcatenatedMatrix();\n                    canvax._bufferStage.addChildAt( activShape , 0 ); \n                    //然后把自己隐藏了\n\n                    //用一个临时变量_globalAlpha 来存储自己之前的alpha\n                    this._globalAlpha = pregAlpha;\n                    this.context.globalAlpha = 0;\n                }\n            }\n            return;\n        };\n\n        this._dispatchEvent( evt );\n\n        if( this.context && evt.type == \"mouseout\"){\n            if(this._hoverClass && this.hoverClone){\n                //说明刚刚over的时候有添加样式\n                var canvax = this.getStage().parent;\n                this._hoverClass = false;\n\n                canvax._bufferStage.removeChildById(this.id);\n                \n                if( this._globalAlpha ){\n                    this.context.globalAlpha = this._globalAlpha;\n                    delete this._globalAlpha;\n                }\n            }\n        }\n\n        return this;\n    }\n\n    hasEvent(type)\n    {\n        return this._hasEventListener(type);\n    }\n\n    hasEventListener(type)\n    {\n        return this._hasEventListener(type);\n    }\n\n    hover( overFun , outFun )\n    {\n        this.on(\"mouseover\" , overFun);\n        this.on(\"mouseout\"  , outFun );\n        return this;\n    }\n\n    once(type, listener)\n    {\n        var me = this;\n        var onceHandle = function(){\n            listener.apply(me , arguments);\n            this.un(type , onceHandle);\n        };\n        this.on(type , onceHandle);\n        return this;\n    }\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n */\nimport Event from \"./Event\";\nimport types from \"./types\";\nimport _ from \"../underscore\";\nimport $ from \"../dom\";\n\nvar _hammerEventTypes = [ \n    \"pan\",\"panstart\",\"panmove\",\"panend\",\"pancancel\",\"panleft\",\"panright\",\"panup\",\"pandown\",\n    \"press\" , \"pressup\",\n    \"swipe\" , \"swipeleft\" , \"swiperight\" , \"swipeup\" , \"swipedown\",\n    \"tap\"\n];\n\nvar Handler = function(canvax , opt) {\n    this.canvax = canvax;\n\n    this.curPoints = [{\n        x : 0, y: 0\n    }] //X,Y 的 point 集合, 在touch下面则为 touch的集合，只是这个touch被添加了对应的x，y\n    //当前激活的点对应的obj，在touch下可以是个数组,和上面的 curPoints 对应\n    this.curPointsTarget = [];\n\n    this._touching = false;\n    //正在拖动，前提是_touching=true\n    this._draging = false;\n\n    //当前的鼠标状态\n    this._cursor = \"default\";\n\n    this.target = this.canvax.view;\n\n    //mouse体统中不需要配置drag,touch中会用到第三方的touch库，每个库的事件名称可能不一样，\n    //就要这里配置，默认实现的是hammerjs的,所以默认可以在项目里引入hammerjs http://hammerjs.github.io/\n    this.drag = {\n        start : \"panstart\",\n        move : \"panmove\",\n        end : \"panend\"\n    };\n\n    _.extend( true , this , opt );\n\n};\n\n//这样的好处是document.compareDocumentPosition只会在定义的时候执行一次。\nvar contains = document.compareDocumentPosition ? function (parent, child) {\n    if( !child ){\n        return false;\n    }\n    return !!(parent.compareDocumentPosition(child) & 16);\n} : function (parent, child) {\n    if( !child ){\n        return false;\n    }\n    return child !== child && (parent.contains ? parent.contains(child) : true);\n};\n\nHandler.prototype = {\n    init : function(){\n        \n        //依次添加上浏览器的自带事件侦听\n        var me   = this;\n        if( me.target.nodeType == undefined ){\n            //如果target.nodeType没有的话， 说明该target为一个jQuery对象 or kissy 对象or hammer对象\n            //即为第三方库，那么就要对接第三方库的事件系统。默认实现hammer的大部分事件系统\n            types.register( _hammerEventTypes );\n        };\n\n        _.each( types.get() , function( type ){\n            //不再关心浏览器环境是否 'ontouchstart' in window \n            //而是直接只管传给事件模块的是一个原生dom还是 jq对象 or hammer对象等\n            if( me.target.nodeType == 1 ){\n                $.addEvent( me.target , type , function( e ){\n                    me.__mouseHandler( e );\n                } );\n            } else {\n                me.target.on( type , function( e ){\n                    me.__libHandler( e );\n                });\n            };\n        } );\n    },\n    /*\n    * 原生事件系统------------------------------------------------begin\n    * 鼠标事件处理函数\n    **/\n    __mouseHandler : function(e) {\n        var me = this;\n        var root = me.canvax;\n\n        root.updateViewOffset();\n    \n        me.curPoints = [ {\n           x : $.pageX( e ) - root.viewOffset.left , \n           y : $.pageY( e ) - root.viewOffset.top\n        }];\n\n        //理论上来说，这里拿到point了后，就要计算这个point对应的target来push到curPointsTarget里，\n        //但是因为在drag的时候其实是可以不用计算对应target的。\n        //所以放在了下面的me.__getcurPointsTarget( e , curMousePoint );常规mousemove中执行\n\n        var curMousePoint  = me.curPoints[0]; \n        var curMouseTarget = me.curPointsTarget[0];\n\n        //模拟drag,mouseover,mouseout 部分代码 begin-------------------------------------------------\n\n        //mousedown的时候 如果 curMouseTarget.dragEnabled 为true。就要开始准备drag了\n        if( e.type == \"mousedown\" ){\n           //如果curTarget 的数组为空或者第一个为false ，，，\n           if( !curMouseTarget ){\n             var obj = root.getObjectsUnderPoint( curMousePoint , 1)[0];\n             if(obj){\n               me.curPointsTarget = [ obj ];\n             }\n           };\n           curMouseTarget = me.curPointsTarget[0];\n           if ( curMouseTarget && curMouseTarget.dragEnabled ){\n               //鼠标事件已经摸到了一个\n               me._touching = true;\n           };\n        };\n\n        if( e.type == \"mouseup\" || (e.type == \"mouseout\" && !contains(root.view , (e.toElement || e.relatedTarget) )) ){\n            if(me._draging == true){\n                //说明刚刚在拖动\n                me._dragEnd( e , curMouseTarget , 0 );\n                curMouseTarget.fire(\"dragend\");\n            };\n            me._draging  = false;\n            me._touching = false;\n        };\n\n        if( e.type == \"mouseout\" ){\n            if( !contains(root.view , (e.toElement || e.relatedTarget) ) ){\n                me.__getcurPointsTarget(e, curMousePoint, true);\n            }\n        } else if( e.type == \"mousemove\" ){  //|| e.type == \"mousedown\" ){\n            //拖动过程中就不在做其他的mouseover检测，drag优先\n            if(me._touching && e.type == \"mousemove\" && curMouseTarget){\n                //说明正在拖动啊\n                if(!me._draging){\n\n                    //begin drag\n                    curMouseTarget.fire(\"dragstart\");\n                    //有可能该child没有hover style\n                    if( !curMouseTarget._globalAlpha ){\n                        curMouseTarget._globalAlpha = curMouseTarget.context.$model.globalAlpha;\n                    };\n\n                    //先把本尊给隐藏了\n                    curMouseTarget.context.globalAlpha = 0;\n                    //然后克隆一个副本到activeStage\n                    \n                    var cloneObject = me._clone2hoverStage( curMouseTarget , 0 );\n                    cloneObject.context.globalAlpha = curMouseTarget._globalAlpha;\n                } else {\n                    //drag move ing\n                    me._dragIngHander( e , curMouseTarget , 0 );\n                };\n                me._draging = true;\n            } else {\n                //常规mousemove检测\n                //move事件中，需要不停的搜索target，这个开销挺大，\n                //后续可以优化，加上和帧率相当的延迟处理\n                me.__getcurPointsTarget( e , curMousePoint );\n            }\n\n        } else {\n            //其他的事件就直接在target上面派发事件\n            var child = curMouseTarget;\n            if( !child ){\n                child = root;\n            };\n            me.__dispatchEventInChilds( e , [ child ] );\n            me._cursorHander( child );\n        };\n\n        if( root.preventDefault ) {\n            //阻止默认浏览器动作(W3C) \n            if ( e && e.preventDefault ) {\n                e.preventDefault(); \n            } else {\n                window.event.returnValue = false;\n            }\n        }; \n    },\n\n    //notInRootView 真正的mouseout,鼠标已经不在图表的节点内了\n    __getcurPointsTarget : function(e, point, notInRootView ) {\n        var me     = this;\n        var root   = me.canvax;\n        var oldObj = me.curPointsTarget[0];\n\n        if( oldObj && !oldObj.context ){\n            oldObj = null;\n        };\n\n        var e = new Event( e );\n\n        if( e.type==\"mousemove\"\n            && oldObj && (oldObj._hoverClass && oldObj.hoverClone) && oldObj.pointChkPriority\n            && oldObj.getChildInPoint( point ) ){\n            //小优化,鼠标move的时候。计算频率太大，所以。做此优化\n            //如果有target存在，而且当前元素正在hoverStage中，而且当前鼠标还在target内,就没必要取检测整个displayList了\n            //开发派发常规mousemove事件\n            e.target = e.currentTarget = oldObj;\n            e.point  = oldObj.globalToLocal( point );\n            oldObj.dispatchEvent( e );\n            return;\n        };\n        var obj = notInRootView ? null: root.getObjectsUnderPoint( point , 1)[0];\n\n        if(oldObj && oldObj != obj || e.type==\"mouseout\") {\n            if( oldObj && oldObj.context ){\n                me.curPointsTarget[0] = null;\n                e.type     = \"mouseout\";\n                e.toTarget = obj; \n                e.target   = e.currentTarget = oldObj;\n                e.point    = oldObj.globalToLocal( point );\n                oldObj.dispatchEvent( e );\n            }\n        };\n\n        if( obj && oldObj != obj ){\n            me.curPointsTarget[0] = obj;\n            e.type       = \"mouseover\";\n            e.fromTarget = oldObj;\n            e.target     = e.currentTarget = obj;\n            e.point      = obj.globalToLocal( point );\n            obj.dispatchEvent( e );\n        };\n\n        if( e.type == \"mousemove\" && obj ){\n            e.target = e.currentTarget = oldObj;\n            e.point  = oldObj.globalToLocal( point );\n            oldObj.dispatchEvent( e );\n        };\n        me._cursorHander( obj , oldObj );\n    },\n    _cursorHander    : function( obj , oldObj ){\n        if(!obj && !oldObj ){\n            this._setCursor(\"default\");\n        }\n        if(obj && oldObj != obj && obj.context){\n            this._setCursor(obj.context.$model.cursor);\n        }\n    },\n    _setCursor : function(cursor) {\n        if(this._cursor == cursor){\n          //如果两次要设置的鼠标状态是一样的\n          return;\n        };\n        this.canvax.view.style.cursor = cursor;\n        this._cursor = cursor;\n    },\n    /*\n    * 原生事件系统------------------------------------------------end\n    */\n\n    /*\n     *第三方库的事件系统------------------------------------------------begin\n     *触屏事件处理函数\n     * */\n    __libHandler : function( e ) {\n        var me   = this;\n        var root = me.canvax;\n        root.updateViewOffset();\n        // touch 下的 curPointsTarget 从touches中来\n        //获取canvax坐标系统里面的坐标\n        me.curPoints = me.__getCanvaxPointInTouchs( e );\n        if( !me._draging ){\n            //如果在draging的话，target已经是选中了的，可以不用 检测了\n            me.curPointsTarget = me.__getChildInTouchs( me.curPoints );\n        };\n        if( me.curPointsTarget.length > 0 ){\n            //drag开始\n            if( e.type == me.drag.start){\n                //dragstart的时候touch已经准备好了target， curPointsTarget 里面只要有一个是有效的\n                //就认为drags开始\n                _.each( me.curPointsTarget , function( child , i ){\n                    if( child && child.dragEnabled ){\n                       //只要有一个元素就认为正在准备drag了\n                       me._draging = true;\n\n                       //有可能该child没有hover style\n                       if( !child._globalAlpha ){\n                           child._globalAlpha = child.context.$model.globalAlpha;\n                       };\n\n                       //然后克隆一个副本到activeStage\n                       me._clone2hoverStage( child , i );\n\n                       //先把本尊给隐藏了\n                       child.context.globalAlpha = 0;\n\n                       child.fire(\"dragstart\");\n\n                       return false;\n                    }\n                } ) \n            };\n\n            //dragIng\n            if( e.type == me.drag.move){\n                if( me._draging ){\n                    _.each( me.curPointsTarget , function( child , i ){\n                        if( child && child.dragEnabled) {\n                           me._dragIngHander( e , child , i);\n                        }\n                    } )\n                }\n            };\n\n            //drag结束\n            if( e.type == me.drag.end){\n                if( me._draging ){\n                    _.each( me.curPointsTarget , function( child , i ){\n                        if( child && child.dragEnabled) {\n                            me._dragEnd( e , child , 0 );\n                            child.fire(\"dragend\");\n                        }\n                    } );\n                    me._draging = false;\n                }\n            };\n            me.__dispatchEventInChilds( e , me.curPointsTarget );\n        } else {\n            //如果当前没有一个target，就把事件派发到canvax上面\n            me.__dispatchEventInChilds( e , [ root ] );\n        };\n    },\n    //从touchs中获取到对应touch , 在上面添加上canvax坐标系统的x，y\n    __getCanvaxPointInTouchs : function( e ){\n        var me        = this;\n        var root      = me.canvax;\n        var curTouchs = [];\n        _.each( e.point , function( touch ){\n           curTouchs.push( {\n               x : $.pageX( touch ) - root.viewOffset.left,\n               y : $.pageY( touch ) - root.viewOffset.top\n           } );\n        });\n        return curTouchs;\n    },\n    __getChildInTouchs : function( touchs ){\n        var me   = this;\n        var root = me.canvax;\n        var touchesTarget = [];\n        _.each( touchs , function(touch){\n            touchesTarget.push( root.getObjectsUnderPoint( touch , 1)[0] );\n        } );\n        return touchesTarget;\n    },\n    /*\n    *第三方库的事件系统------------------------------------------------end\n    */\n\n\n    /*\n     *@param {array} childs \n     * */\n    __dispatchEventInChilds: function(e, childs) {\n        if (!childs && !(\"length\" in childs)) {\n            return false;\n        }\n        var me = this;\n        var hasChild = false;\n        _.each(childs, function(child, i) {\n            if (child) {\n                hasChild = true;\n                var ce = new Event(e);\n                ce.target = ce.currentTarget = child || this;\n                ce.stagePoint = me.curPoints[i];\n                ce.point = ce.target.globalToLocal(ce.stagePoint);\n                child.dispatchEvent(ce);\n            }\n        });\n        return hasChild;\n    },\n    //克隆一个元素到hover stage中去\n    _clone2hoverStage: function(target, i) {\n        var me = this;\n        var root = me.canvax;\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        if (!_dragDuplicate) {\n            _dragDuplicate = target.clone(true);\n            _dragDuplicate._transform = target.getConcatenatedMatrix();\n\n            /**\n             *TODO: 因为后续可能会有手动添加的 元素到_bufferStage 里面来\n             *比如tips\n             *这类手动添加进来的肯定是因为需要显示在最外层的。在hover元素之上。\n             *所有自动添加的hover元素都默认添加在_bufferStage的最底层\n             **/\n            root._bufferStage.addChildAt(_dragDuplicate, 0);\n        }\n        _dragDuplicate.context.globalAlpha = target._globalAlpha;\n        target._dragPoint = target.globalToLocal(me.curPoints[i]);\n        return _dragDuplicate;\n    },\n    //drag 中 的处理函数\n    _dragIngHander: function(e, target, i) {\n        \n        var me = this;\n        var root = me.canvax;\n        var _point = target.globalToLocal( me.curPoints[i] );\n\n        //要对应的修改本尊的位置，但是要告诉引擎不要watch这个时候的变化\n        target._noHeart = true;\n        var _moveStage = target.moveing;\n        target.moveing = true;\n        target.context.x += (_point.x - target._dragPoint.x);\n        target.context.y += (_point.y - target._dragPoint.y);\n        target.fire(\"draging\");\n        target.moveing = _moveStage;\n        target._noHeart = false;\n        //同步完毕本尊的位置\n\n        //这里只能直接修改_transform 。 不能用下面的修改x，y的方式。\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        _dragDuplicate._transform = target.getConcatenatedMatrix();\n\n        //worldTransform在renderer的时候计算\n        _dragDuplicate.worldTransform = null;\n\n        //setWorldTransform都统一在render中执行，这里注释掉\n        //_dragDuplicate.setWorldTransform();\n\n        //直接修改的_transform不会出发心跳上报， 渲染引擎不制动这个stage需要绘制。\n        //所以要手动出发心跳包\n        _dragDuplicate.heartBeat();\n    },\n    //drag结束的处理函数\n    //TODO: dragend的还需要处理end的点是否还在元素上面，要恢复hover状态\n    _dragEnd: function(e, target, i) {\n        var me = this;\n        var root = me.canvax;\n\n        //_dragDuplicate 复制在_bufferStage 中的副本\n        var _dragDuplicate = root._bufferStage.getChildById(target.id);\n        _dragDuplicate && _dragDuplicate.destroy();\n\n        target.context.globalAlpha = target._globalAlpha;\n    }\n};\nexport default Handler;","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com \n*/\nimport {_,$} from \"mmvis\";\n\nvar Utils = {\n    mainFrameRate   : 60,//默认主帧率\n    now : 0,\n    /*给文本检测高宽专用*/\n    _pixelCtx   : null,\n    __emptyFunc : function(){},\n    //retina 屏幕优化\n    _devicePixelRatio : window.devicePixelRatio || 1,\n    _UID  : 0, //该值为向上的自增长整数值\n    getUID:function(){\n        return this._UID++;\n    },\n    createId : function( name ) {\n        //if end with a digit, then append an undersBase before appending\n        var charCode = name.charCodeAt(name.length - 1);\n        if (charCode >= 48 && charCode <= 57) name += \"_\";\n        return name + Utils.getUID();\n    },\n    canvasSupport : function() {\n        return !!document.createElement('canvas').getContext;\n    },\n\n    initElement : function( canvas ){\n        if( window.FlashCanvas && FlashCanvas.initElement){\n            FlashCanvas.initElement( canvas );\n        }\n        return canvas;\n    },\n    \n    /**\n     * 按照css的顺序，返回一个[上,右,下,左]\n     */\n    getCssOrderArr : function( r ){\n        var r1; \n        var r2; \n        var r3; \n        var r4;\n\n        if(typeof r === 'number') {\n            r1 = r2 = r3 = r4 = r;\n        }\n        else if(r instanceof Array) {\n            if (r.length === 1) {\n                r1 = r2 = r3 = r4 = r[0];\n            }\n            else if(r.length === 2) {\n                r1 = r3 = r[0];\n                r2 = r4 = r[1];\n            }\n            else if(r.length === 3) {\n                r1 = r[0];\n                r2 = r4 = r[1];\n                r3 = r[2];\n            } else {\n                r1 = r[0];\n                r2 = r[1];\n                r3 = r[2];\n                r4 = r[3];\n            }\n        } else {\n            r1 = r2 = r3 = r4 = 0;\n        }\n        return [r1,r2,r3,r4];\n    },\n\n    isWebGLSupported : function (){\n        var contextOptions = { stencil: true };\n        try\n        {\n            if (!window.WebGLRenderingContext) //不存在直接return\n            {\n                return false;\n            }\n            var canvas = document.createElement('canvas'), \n                gl = canvas.getContext('webgl', contextOptions) || canvas.getContext('experimental-webgl', contextOptions);\n            return !!(gl && gl.getContextAttributes().stencil); //还要确实检测是否支持webGL模式\n        }\n        catch (e)\n        {\n            return false;\n        }\n    },\n    checkOpt: function( opt ){\n        if( !opt ){\n            opt = {\n                context : {}\n            }\n        } else {\n            if( !opt.context ){\n                opt.context = {}\n            }\n        }\n        return opt;\n    }\n};\n\nUtils._pixelCtx = Utils.initElement($.createCanvas(1, 1, \"_pixelCanvas\")).getContext('2d');\n\nexport default Utils;","\n/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * | a | c | tx|\n * | b | d | ty|\n * | 0 | 0 | 1 |\n *\n * @class\n * @memberof PIXI\n *\n *\n * Matrix 矩阵库 用于整个系统的几何变换计算\n */\n\nvar Matrix = function(a, b, c, d, tx, ty){\n    this.a = a != undefined ? a : 1;\n    this.b = b != undefined ? b : 0;\n    this.c = c != undefined ? c : 0;\n    this.d = d != undefined ? d : 1;\n    this.tx = tx != undefined ? tx : 0;\n    this.ty = ty != undefined ? ty : 0;\n    this.array = null;\n};\n\nMatrix.prototype = {\n    concat : function(mtx){\n        var a = this.a;\n        var c = this.c;\n        var tx = this.tx;\n\n        this.a = a * mtx.a + this.b * mtx.c;\n        this.b = a * mtx.b + this.b * mtx.d;\n        this.c = c * mtx.a + this.d * mtx.c;\n        this.d = c * mtx.b + this.d * mtx.d;\n        this.tx = tx * mtx.a + this.ty * mtx.c + mtx.tx;\n        this.ty = tx * mtx.b + this.ty * mtx.d + mtx.ty;\n        return this;\n    },\n    concatTransform : function(x, y, scaleX, scaleY, rotation){\n        var cos = 1;\n        var sin = 0;\n        if(rotation%360){\n            var r = rotation * Math.PI / 180;\n            cos = Math.cos(r);\n            sin = Math.sin(r);\n        }\n\n        this.concat(new Matrix(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y));\n        return this;\n    },\n    rotate : function(angle){\n        //目前已经提供对顺时针逆时针两个方向旋转的支持\n        var cos = Math.cos(angle);\n        var sin = Math.sin(angle);\n\n        var a = this.a;\n        var c = this.c;\n        var tx = this.tx;\n\n        if (angle>0){\n            this.a = a * cos - this.b * sin;\n            this.b = a * sin + this.b * cos;\n            this.c = c * cos - this.d * sin;\n            this.d = c * sin + this.d * cos;\n            this.tx = tx * cos - this.ty * sin;\n            this.ty = tx * sin + this.ty * cos;\n        } else {\n            var st = Math.sin(Math.abs(angle));\n            var ct = Math.cos(Math.abs(angle));\n\n            this.a = a*ct + this.b*st;\n            this.b = -a*st + this.b*ct;\n            this.c = c*ct + this.d*st;\n            this.d = -c*st + ct*this.d;\n            this.tx = ct*tx + st*this.ty;\n            this.ty = ct*this.ty - st*tx;\n        }\n        return this;\n    },\n    scale : function(sx, sy){\n        this.a *= sx;\n        this.d *= sy;\n        this.tx *= sx;\n        this.ty *= sy;\n        return this;\n    },\n    translate : function(dx, dy){\n        this.tx += dx;\n        this.ty += dy;\n        return this;\n    },\n    identity : function(){\n        //初始化\n        this.a = this.d = 1;\n        this.b = this.c = this.tx = this.ty = 0;\n        return this;\n    },\n    invert : function(){\n        //逆向矩阵\n        var a = this.a;\n        var b = this.b;\n        var c = this.c;\n        var d = this.d;\n        var tx = this.tx;\n        var i = a * d - b * c;\n\n        this.a = d / i;\n        this.b = -b / i;\n        this.c = -c / i;\n        this.d = a / i;\n        this.tx = (c * this.ty - d * tx) / i;\n        this.ty = -(a * this.ty - b * tx) / i;\n        return this;\n    },\n    clone : function(){\n        return new Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty);\n    },\n    toArray : function(transpose, out){\n        if( arguments.length == 0 )\n        {\n            //canvas2d 中不会有任何的参数传入\n            return [ this.a , this.b , this.c , this.d , this.tx , this.ty ];\n        }\n\n        //webgl的glsl需要用的时候，需要传入transpose 来转换为一个3*3完整矩阵\n        if (!this.array)\n        {\n            this.array = new Float32Array(9);\n        }\n\n        var array = out || this.array;\n\n        if (transpose)\n        {\n            array[0] = this.a;\n            array[1] = this.b;\n            array[2] = 0;\n            array[3] = this.c;\n            array[4] = this.d;\n            array[5] = 0;\n            array[6] = this.tx;\n            array[7] = this.ty;\n            array[8] = 1;\n        }\n        else\n        {\n            array[0] = this.a;\n            array[1] = this.c;\n            array[2] = this.tx;\n            array[3] = this.b;\n            array[4] = this.d;\n            array[5] = this.ty;\n            array[6] = 0;\n            array[7] = 0;\n            array[8] = 1;\n        }\n\n        return array;\n    },\n    /**\n     * 矩阵左乘向量\n     */\n    mulVector : function(v) {\n        var aa = this.a, ac = this.c, atx = this.tx;\n        var ab = this.b, ad = this.d, aty = this.ty;\n\n        var out = [0,0];\n        out[0] = v[0] * aa + v[1] * ac + atx;\n        out[1] = v[0] * ab + v[1] * ad + aty;\n\n        return out;\n    }    \n}\n\nexport default Matrix;\n","/**\n * Point\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n */\nexport default class Point\n{\n    constructor( x=0 , y=0 )\n    {\n        if( arguments.length==1 && typeof arguments[0] == 'object' ){\n            var arg=arguments[0]\n            if( \"x\" in arg && \"y\" in arg ){\n                this.x = arg.x*1;\n                this.y = arg.y*1;\n            } else {\n                var i=0;\n                for (var p in arg){\n                    if(i==0){\n                        this.x = arg[p]*1;\n                    } else {\n                        this.y = arg[p]*1;\n                        break;\n                    }\n                    i++;\n                }\n            }\n        } else {\n            this.x = x*1;\n            this.y = y*1;\n        }\n    }\n\n    toArray()\n    {\n        return [this.x , this.y]  \n    }\n};\n\n","/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\n\nvar _Group = function () {\n\tthis._tweens = {};\n\tthis._tweensAddedDuringUpdate = {};\n};\n\n_Group.prototype = {\n\tgetAll: function () {\n\n\t\treturn Object.keys(this._tweens).map(function (tweenId) {\n\t\t\treturn this._tweens[tweenId];\n\t\t}.bind(this));\n\n\t},\n\n\tremoveAll: function () {\n\n\t\tthis._tweens = {};\n\n\t},\n\n\tadd: function (tween) {\n\n\t\tthis._tweens[tween.getId()] = tween;\n\t\tthis._tweensAddedDuringUpdate[tween.getId()] = tween;\n\n\t},\n\n\tremove: function (tween) {\n\n\t\tdelete this._tweens[tween.getId()];\n\t\tdelete this._tweensAddedDuringUpdate[tween.getId()];\n\n\t},\n\n\tupdate: function (time, preserve) {\n\n\t\tvar tweenIds = Object.keys(this._tweens);\n\n\t\tif (tweenIds.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t// Tweens are updated in \"batches\". If you add a new tween during an update, then the\n\t\t// new tween will be updated in the next batch.\n\t\t// If you remove a tween during an update, it will normally still be updated. However,\n\t\t// if the removed tween was added during the current batch, then it will not be updated.\n\t\twhile (tweenIds.length > 0) {\n\t\t\tthis._tweensAddedDuringUpdate = {};\n\n\t\t\tfor (var i = 0; i < tweenIds.length; i++) {\n\n\t\t\t\tif (this._tweens[tweenIds[i]].update(time) === false) {\n\t\t\t\t\tthis._tweens[tweenIds[i]]._isPlaying = false;\n\n\t\t\t\t\tif (!preserve) {\n\t\t\t\t\t\tdelete this._tweens[tweenIds[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttweenIds = Object.keys(this._tweensAddedDuringUpdate);\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\nvar TWEEN = new _Group();\n\nTWEEN.Group = _Group;\nTWEEN._nextId = 0;\nTWEEN.nextId = function () {\n\treturn TWEEN._nextId++;\n};\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = window.performance.now.bind(window.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object, group) {\n\tthis._object = object;\n\tthis._valuesStart = {};\n\tthis._valuesEnd = {};\n\tthis._valuesStartRepeat = {};\n\tthis._duration = 1000;\n\tthis._repeat = 0;\n\tthis._repeatDelayTime = undefined;\n\tthis._yoyo = false;\n\tthis._isPlaying = false;\n\tthis._reversed = false;\n\tthis._delayTime = 0;\n\tthis._startTime = null;\n\tthis._easingFunction = TWEEN.Easing.Linear.None;\n\tthis._interpolationFunction = TWEEN.Interpolation.Linear;\n\tthis._chainedTweens = [];\n\tthis._onStartCallback = null;\n\tthis._onStartCallbackFired = false;\n\tthis._onUpdateCallback = null;\n\tthis._onCompleteCallback = null;\n\tthis._onStopCallback = null;\n\tthis._group = group || TWEEN;\n\tthis._id = TWEEN.nextId();\n\n};\n\nTWEEN.Tween.prototype = {\n\tgetId: function getId() {\n\t\treturn this._id;\n\t},\n\n\tisPlaying: function isPlaying() {\n\t\treturn this._isPlaying;\n\t},\n\n\tto: function to(properties, duration) {\n\n\t\tthis._valuesEnd = properties;\n\n\t\tif (duration !== undefined) {\n\t\t\tthis._duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstart: function start(time) {\n\n\t\tthis._group.add(this);\n\n\t\tthis._isPlaying = true;\n\n\t\tthis._onStartCallbackFired = false;\n\n\t\tthis._startTime = time !== undefined ? typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time : TWEEN.now();\n\t\tthis._startTime += this._delayTime;\n\n\t\tfor (var property in this._valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (this._valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (this._valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\tthis._valuesEnd[property] = [this._object[property]].concat(this._valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (this._object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value.\n\t\t\tthis._valuesStart[property] = this._object[property];\n\n\t\t\tif ((this._valuesStart[property] instanceof Array) === false) {\n\t\t\t\tthis._valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\tthis._valuesStartRepeat[property] = this._valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstop: function stop() {\n\n\t\tif (!this._isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._group.remove(this);\n\t\tthis._isPlaying = false;\n\n\t\tif (this._onStopCallback !== null) {\n\t\t\tthis._onStopCallback(this._object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t},\n\n\tend: function end() {\n\n\t\tthis.update(this._startTime + this._duration);\n\t\treturn this;\n\n\t},\n\n\tstopChainedTweens: function stopChainedTweens() {\n\n\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\tthis._chainedTweens[i].stop();\n\t\t}\n\n\t},\n\n\tdelay: function delay(amount) {\n\n\t\tthis._delayTime = amount;\n\t\treturn this;\n\n\t},\n\n\trepeat: function repeat(times) {\n\n\t\tthis._repeat = times;\n\t\treturn this;\n\n\t},\n\n\trepeatDelay: function repeatDelay(amount) {\n\n\t\tthis._repeatDelayTime = amount;\n\t\treturn this;\n\n\t},\n\n\tyoyo: function yoyo(yoyo) {\n\n\t\tthis._yoyo = yoyo;\n\t\treturn this;\n\n\t},\n\n\teasing: function easing(easing) {\n\n\t\tthis._easingFunction = easing;\n\t\treturn this;\n\n\t},\n\n\tinterpolation: function interpolation(interpolation) {\n\n\t\tthis._interpolationFunction = interpolation;\n\t\treturn this;\n\n\t},\n\n\tchain: function chain() {\n\n\t\tthis._chainedTweens = arguments;\n\t\treturn this;\n\n\t},\n\n\tonStart: function onStart(callback) {\n\n\t\tthis._onStartCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonUpdate: function onUpdate(callback) {\n\n\t\tthis._onUpdateCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonComplete: function onComplete(callback) {\n\n\t\tthis._onCompleteCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonStop: function onStop(callback) {\n\n\t\tthis._onStopCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tupdate: function update(time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < this._startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._onStartCallbackFired === false) {\n\n\t\t\tif (this._onStartCallback !== null) {\n\t\t\t\tthis._onStartCallback(this._object);\n\t\t\t}\n\n\t\t\tthis._onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - this._startTime) / this._duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = this._easingFunction(elapsed);\n\n\t\tfor (property in this._valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (this._valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = this._valuesStart[property] || 0;\n\t\t\tvar end = this._valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\tthis._object[property] = this._interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\tthis._object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (this._onUpdateCallback !== null) {\n\t\t\tthis._onUpdateCallback(this._object);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (this._repeat > 0) {\n\n\t\t\t\tif (isFinite(this._repeat)) {\n\t\t\t\t\tthis._repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in this._valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (this._valuesEnd[property]) === 'string') {\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._yoyo) {\n\t\t\t\t\t\tvar tmp = this._valuesStartRepeat[property];\n\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesEnd[property];\n\t\t\t\t\t\tthis._valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._valuesStart[property] = this._valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (this._yoyo) {\n\t\t\t\t\tthis._reversed = !this._reversed;\n\t\t\t\t}\n\n\t\t\t\tif (this._repeatDelayTime !== undefined) {\n\t\t\t\t\tthis._startTime = time + this._repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\tthis._startTime = time + this._delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (this._onCompleteCallback !== null) {\n\n\t\t\t\t\tthis._onCompleteCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\tthis._chainedTweens[i].start(this._startTime + this._duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n\n\tif (typeof define === 'function' && define.amd) {\n\n\t\t// AMD\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\n\t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n\t\t// Node.js\n\t\tmodule.exports = TWEEN;\n\n\t} else if (root !== undefined) {\n\n\t\t// Global variable\n\t\troot.TWEEN = TWEEN;\n\n\t}\n\n})(this);\n","import Tween from \"@tweenjs/tween.js\";\n//import Tween from \"./Tween\"\nimport Utils from \"../utils/index\";\nimport {_} from \"mmvis\";\n\n/**\n * 设置 AnimationFrame begin\n */\nvar lastTime = 0;\nvar vendors = ['ms', 'moz', 'webkit', 'o'];\nfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n};\nif (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function(callback, element) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var id = window.setTimeout(function() {\n                callback(currTime + timeToCall);\n            },\n            timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n    };\n};\nif (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function(id) {\n        clearTimeout(id);\n    };\n};\n\n//管理所有图表的渲染任务\nvar _taskList = []; //[{ id : task: }...]\nvar _requestAid = null;\n\nfunction enabledAnimationFrame(){\n    if (!_requestAid) {\n        _requestAid = requestAnimationFrame(function() {\n            //console.log(\"frame__\" + _taskList.length);\n            //if ( Tween.getAll().length ) {\n            Tween.update(); //tween自己会做length判断\n            //};\n            var currTaskList = _taskList;\n            _taskList = [];\n            _requestAid = null;\n            while (currTaskList.length > 0) {\n                currTaskList.shift().task();\n            };\n        });\n    };\n    return _requestAid;\n}; \n\n/*\n * @param task 要加入到渲染帧队列中的任务\n * @result frameid\n */\nfunction registFrame( $frame ) {\n    if (!$frame) {\n        return;\n    };\n    _taskList.push($frame);\n    return enabledAnimationFrame();\n};\n\n/*\n *  @param task 要从渲染帧队列中删除的任务\n */\nfunction destroyFrame( $frame ) {\n    var d_result = false;\n    for (var i = 0, l = _taskList.length; i < l; i++) {\n        if (_taskList[i].id === $frame.id) {\n            d_result = true;\n            _taskList.splice(i, 1);\n            i--;\n            l--;\n        };\n    };\n    if (_taskList.length == 0) {\n        cancelAnimationFrame(_requestAid);\n        _requestAid = null;\n    };\n    return d_result;\n};\n\n\n/* \n * @param opt {from , to , onUpdate , onComplete , ......}\n * @result tween\n */\nfunction registTween(options) {\n    \n    var opt = _.extend({\n        from: null,\n        to: null,\n        duration: 500,\n        onStart: function(){},\n        onUpdate: function() {},\n        onComplete: function() {},\n        onStop: function(){},\n        repeat: 0,\n        delay: 0,\n        easing: 'Linear.None',\n        desc: '' //动画描述，方便查找bug\n    }, options);\n\n    var tween = {};\n    var tid = \"tween_\" + Utils.getUID();\n    opt.id && ( tid = tid+\"_\"+opt.id );\n\n    if (opt.from && opt.to) {\n        tween = new Tween.Tween( opt.from )\n        .to( opt.to, opt.duration )\n        .onStart(function(){\n            //opt.onStart.apply( this )\n            opt.onStart( opt.from );\n        })\n        .onUpdate( function(){\n            //opt.onUpdate.apply( this );\n            opt.onUpdate( opt.from );\n        } )\n        .onComplete( function() {\n            destroyFrame({\n                id: tid\n            });\n            tween._isCompleteed = true;\n            //opt.onComplete.apply( this , [this] ); //执行用户的conComplete\n            opt.onComplete( opt.from );\n        } )\n        .onStop( function(){\n            destroyFrame({\n                id: tid\n            });\n            tween._isStoped = true;\n            //opt.onStop.apply( this , [this] );\n            opt.onStop( opt.from );\n        } )\n        .repeat( opt.repeat )\n        .delay( opt.delay )\n        .easing( Tween.Easing[opt.easing.split(\".\")[0]][opt.easing.split(\".\")[1]] )\n        \n        tween.id = tid;\n        tween.start();\n\n        function animate() {\n            if ( tween._isCompleteed || tween._isStoped ) {\n                tween = null;\n                return;\n            };\n            registFrame({\n                id: tid,\n                task: animate,\n                desc: opt.desc,\n                tween: tween\n            });\n        };\n        animate();\n    };\n    return tween;\n};\n/*\n * @param tween\n * @result void(0)\n */\nfunction destroyTween(tween , msg) {\n    tween.stop();\n};\n\nexport default {\n    registFrame: registFrame,\n    destroyFrame: destroyFrame,\n    registTween: registTween,\n    destroyTween: destroyTween,\n    Tween: Tween,\n    taskList: _taskList\n};","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 把canvax元素的context实现监听属性改动\n * 来给整个引擎提供心跳包的触发机制\n */\nimport {_} from \"mmvis\";\n\nfunction Observe(scope) {\n\n    var stopRepeatAssign=true;\n\n    var pmodel = {}, //要返回的对象\n        accessores = {}, //内部用于转换的对象\n        _Publics = [\"$watch\",\"$model\"] , //公共属性，不需要get set 化的\n        model = {};//这是pmodel上的$model属性\n\n    var Publics = _Publics;\n        \n    function loop(name, val) {\n        if ( _.indexOf( _Publics , name ) === -1 ) {\n            //非 _Publics 中的值，都要先设置好对应的val到model上\n            model[name] = val\n        };\n        \n        var valueType = typeof val;\n\n        if( _.indexOf(Publics,name) > -1 ){\n            return;\n        };\n\n        if (valueType === \"function\") {\n            Publics.push(name) //函数无需要转换，也可以做为公共属性存在\n        } else {\n            var accessor = function(neo) { //创建监控属性或数组，自变量，由用户触发其改变\n\n                var value = model[name], preValue = value, complexValue;\n                \n                if (arguments.length) {\n                    //写操作\n                    //set 的 值的 类型\n                    var neoType = typeof neo;\n\n                    if (stopRepeatAssign) {\n                        return //阻止重复赋值\n                    };\n\n                    if (value !== neo) {\n                        if( neo && neoType === \"object\" && \n                            !(neo instanceof Array) &&\n                            !neo.addColorStop // neo instanceof CanvasGradient\n                         ){\n                            value = neo.$model ? neo : Observe(neo , neo);\n                            complexValue = value.$model;\n                        } else {//如果是其他数据类型\n                            value = neo;\n                        };\n\n                        //accessor.value = value;\n                        model[name] = complexValue ? complexValue : value;//更新$model中的值\n\n                        if(valueType != neoType){\n                            //如果set的值类型已经改变，\n                            //那么也要把对应的valueType修改为对应的neoType\n                            valueType = neoType;\n                        }\n\n                        if ( pmodel.$watch ) {\n                            pmodel.$watch.call(pmodel , name, value, preValue);\n                        }\n                    }\n                } else {\n                    //读操作\n                    //读的时候，发现value是个obj，而且还没有defineProperty\n                    //那么就临时defineProperty一次\n                    if ( value && (valueType === \"object\") \n                       && !(value instanceof Array) \n                       && !value.$model\n                       && !value.addColorStop) {\n\n                        value = Observe(value , value);\n                        value.$watch = pmodel.$watch;\n                        //accessor.value = value;\n                        model[name] = value;\n                    };\n                    return value;\n                }\n            };\n            //accessor.value = val;\n\n            accessores[name] = {\n                set: accessor,\n                get: accessor,\n                enumerable: true\n            }\n        }\n    };\n    \n    for (var i in scope) {\n        loop(i, scope[i])\n    };\n\n    pmodel = defineProperties(pmodel, accessores, Publics);//生成一个空的ViewModel\n\n    _.forEach(Publics,function(name) {\n        if (scope[name]) {//然后为函数等不被监控的属性赋值\n            if(typeof scope[name] == \"function\" ){\n               pmodel[name] = function(){\n                  scope[name].apply(this , arguments);\n               }\n            } else {\n               pmodel[name] = scope[name];\n            }\n        }\n    });\n\n    pmodel.$model = model;\n\n    pmodel.hasOwnProperty = function(name) {\n        return name in pmodel.$model\n    };\n\n    stopRepeatAssign = false;\n\n    return pmodel\n};\n\nvar defineProperty = Object.defineProperty;\n//如果浏览器不支持ecma262v5的Object.defineProperties或者存在BUG，比如IE8\n//标准浏览器使用__defineGetter__, __defineSetter__实现\ntry {\n    defineProperty({}, \"_\", {\n        value: \"x\"\n    })\n    var defineProperties = Object.defineProperties\n} catch (e) {\n    if (\"__defineGetter__\" in Object) {\n        defineProperty = function(obj, prop, desc) {\n            if ('value' in desc) {\n                obj[prop] = desc.value\n            }\n            if ('get' in desc) {\n                obj.__defineGetter__(prop, desc.get)\n            }\n            if ('set' in desc) {\n                obj.__defineSetter__(prop, desc.set)\n            }\n            return obj\n        };\n        defineProperties = function(obj, descs) {\n            for (var prop in descs) {\n                if (descs.hasOwnProperty(prop)) {\n                    defineProperty(obj, prop, descs[prop])\n                }\n            }\n            return obj\n        };\n    }\n};\n\n//IE6-8使用VBScript类的set get语句实现\n/*  因为flash不被支持的策略，所以对应的vbs 实现get set的上古代码也不再支持\nif (!defineProperties && window.VBArray) {\n    window.execScript([\n            \"Function parseVB(code)\",\n            \"\\tExecuteGlobal(code)\",\n            \"End Function\"\n            ].join(\"\\n\"), \"VBScript\");\n\n    function VBMediator(description, name, value) {\n        var fn = description[name] && description[name].set;\n        if (arguments.length === 3) {\n            fn(value);\n        } else {\n            return fn();\n        }\n    };\n    defineProperties = function(publics, description, array) {\n        publics = array.slice(0);\n        publics.push(\"hasOwnProperty\");\n        var className = \"VBClass\" + setTimeout(\"1\"), owner = {}, buffer = [];\n        buffer.push(\n                \"Class \" + className,\n                \"\\tPrivate [__data__], [__proxy__]\",\n                \"\\tPublic Default Function [__const__](d, p)\",\n                \"\\t\\tSet [__data__] = d: set [__proxy__] = p\",\n                \"\\t\\tSet [__const__] = Me\", //链式调用\n                \"\\tEnd Function\");\n        _.forEach(publics,function(name) { //添加公共属性,如果此时不加以后就没机会了\n            if (owner[name] !== true) {\n                owner[name] = true //因为VBScript对象不能像JS那样随意增删属性\n            buffer.push(\"\\tPublic [\" + name + \"]\") //你可以预先放到  skipArray 中\n            }\n        });\n        for (var name in description) {\n            owner[name] = true\n                buffer.push(\n                        //由于不知对方会传入什么,因此set, let都用上\n                        \"\\tPublic Property Let [\" + name + \"](val)\", //setter\n                        \"\\t\\tCall [__proxy__]([__data__], \\\"\" + name + \"\\\", val)\",\n                        \"\\tEnd Property\",\n                        \"\\tPublic Property Set [\" + name + \"](val)\", //setter\n                        \"\\t\\tCall [__proxy__]([__data__], \\\"\" + name + \"\\\", val)\",\n                        \"\\tEnd Property\",\n                        \"\\tPublic Property Get [\" + name + \"]\", //getter\n                        \"\\tOn Error Resume Next\", //必须优先使用set语句,否则它会误将数组当字符串返回\n                        \"\\t\\tSet[\" + name + \"] = [__proxy__]([__data__],\\\"\" + name + \"\\\")\",\n                        \"\\tIf Err.Number <> 0 Then\",\n                        \"\\t\\t[\" + name + \"] = [__proxy__]([__data__],\\\"\" + name + \"\\\")\",\n                        \"\\tEnd If\",\n                        \"\\tOn Error Goto 0\",\n                        \"\\tEnd Property\")\n        }\n        buffer.push(\"End Class\"); //类定义完毕\n        buffer.push(\n                \"Function \" + className + \"Factory(a, b)\", //创建实例并传入两个关键的参数\n                \"\\tDim o\",\n                \"\\tSet o = (New \" + className + \")(a, b)\",\n                \"\\tSet \" + className + \"Factory = o\",\n                \"End Function\");\n        window.parseVB(buffer.join(\"\\r\\n\"));//先创建一个VB类工厂\n        return  window[className + \"Factory\"](description, VBMediator);//得到其产品\n    }\n}\n*/\n\nexport default Observe;","\nexport const VERSION = __VERSION__;\n\nexport const PI_2 = Math.PI * 2;\n\nexport const RAD_TO_DEG = 180 / Math.PI;\n\nexport const DEG_TO_RAD = Math.PI / 180;\n\nexport const RENDERER_TYPE = {\n    UNKNOWN:    0,\n    WEBGL:      1,\n    CANVAS:     2,\n};\n\nexport const DRAW_MODES = {\n    POINTS:         0,\n    LINES:          1,\n    LINE_LOOP:      2,\n    LINE_STRIP:     3,\n    TRIANGLES:      4,\n    TRIANGLE_STRIP: 5,\n    TRIANGLE_FAN:   6,\n};\n\nexport const SHAPES = {\n    POLY: 0,\n    RECT: 1,\n    CIRC: 2,\n    ELIP: 3,\n};\n\nexport const SCALE_MODES = {\n    LINEAR:     0,\n    NEAREST:    1,\n};\n\nexport const CONTEXT_DEFAULT = {\n    width         : 0,\n    height        : 0,\n    x             : 0,\n    y             : 0,\n    scaleX        : 1,\n    scaleY        : 1,\n    scaleOrigin   : {\n        x : 0,\n        y : 0\n    },\n    rotation      : 0,\n    rotateOrigin  :  {\n        x : 0,\n        y : 0\n    },\n    visible       : true,\n    globalAlpha   : 1\n\n};\nexport const SHAPE_CONTEXT_DEFAULT = {\n    cursor        : \"default\",\n\n    fillAlpha     : 1,//context2d里没有，自定义\n    fillStyle     : null,//\"#000000\",\n\n    lineCap       : null,//默认都是直角\n    lineJoin      : null,//这两个目前webgl里面没实现\n    miterLimit    : null,//miterLimit 属性设置或返回最大斜接长度,只有当 lineJoin 属性为 \"miter\" 时，miterLimit 才有效。\n\n    lineAlpha     : 1,//context2d里没有，自定义\n    strokeStyle   : null,\n    lineType      : \"solid\", //context2d里没有，自定义线条的type，默认为实线\n    lineWidth     : null\n}\n\n//会影响到transform改变的context属性\nexport const TRANSFORM_PROPS = [ \n    \"x\", \n    \"y\", \n    \"scaleX\", \n    \"scaleY\", \n    \"rotation\", \n    \"scaleOrigin\", \n    \"rotateOrigin\" \n]\n\n//所有和样式相关的属性\n//appha 有 自己的 处理方式\nexport const STYLE_PROPS = [\n    \"lineWidth\",\n    \"lineAlpha\",\n    \"strokeStyle\",\n    \"fillStyle\",\n    \"fillAlpha\",\n    \"globalAlpha\"\n]\n\n\n\n\n","\n\n/**\n * 线段包含判断\n * @points [0,0,0,0]\n */\nvar _isInsideLine = function( points, x, y, lineWidth ) \n{\n    var x0 = points[0];\n    var y0 = points[1];\n    var x1 = points[2];\n    var y1 = points[3];\n    var _l = Math.max(lineWidth , 3);\n    var _a = 0;\n    var _b = x0;\n\n    if(\n        (y > y0 + _l && y > y1 + _l) \n        || (y < y0 - _l && y < y1 - _l) \n        || (x > x0 + _l && x > x1 + _l) \n        || (x < x0 - _l && x < x1 - _l) \n    ){\n        return false;\n    }\n\n    if (x0 !== x1) {\n        _a = (y0 - y1) / (x0 - x1);\n        _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    } else {\n        return Math.abs(x - x0) <= _l / 2;\n    }\n\n    var _s = (_a * x - y + _b) * (_a * x - y + _b) / (_a * _a + 1);\n    return _s <= _l / 2 * _l / 2;\n} \n\nexport default function insideLine(data, x, y, line) \n{   \n    var points = data.shape.points;\n    var lineWidth = data.lineWidth;\n    var insideCatch = false;\n    for(let i = 0; i < points.length; ++i){\n        insideCatch = _isInsideLine( points.slice(i , i+4) , x , y , lineWidth );\n        if( insideCatch ){\n            break;\n        };\n        i += 1\n    };\n    return insideCatch;\n}","export default {\n    //设备分辨率\n    RESOLUTION: window.devicePixelRatio || 1,\n\n\n    /**\n     * Target frames per millisecond.\n     */\n    TARGET_FPMS: 0.06,\n\n    /**\n     * If set to true WebGL will attempt make textures mimpaped by default.\n     * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.\n     */\n    MIPMAP_TEXTURES: true,\n\n    /**\n     * Default filter resolution.\n     */\n    FILTER_RESOLUTION: 1,\n\n\n    // TODO: maybe change to SPRITE.BATCH_SIZE: 2000\n    // TODO: maybe add PARTICLE.BATCH_SIZE: 15000\n\n    /**\n     * The default sprite batch size.\n     *\n     * The default aims to balance desktop and mobile devices.\n     */\n    SPRITE_BATCH_SIZE: 4096,\n\n    /**\n     * The prefix that denotes a URL is for a retina asset.\n     */\n    RETINA_PREFIX: /@(.+)x/,\n\n    RENDER_OPTIONS: {\n        view: null,\n        antialias: true,\n        forceFXAA: false,\n        autoResize: false,\n        transparent: true,\n        backgroundColor: 0x000000,\n        clearBeforeRender: true,\n        preserveDrawingBuffer: false,\n        roundPixels: false,\n    },\n\n    TRANSFORM_MODE: 0,\n\n    GC_MODE: 0,\n\n    GC_MAX_IDLE: 60 * 60,\n\n    GC_MAX_CHECK_COUNT: 60 * 10,\n\n    WRAP_MODE: 0,\n\n    SCALE_MODE: 0,\n\n    PRECISION: 'mediump'\n\n};\n","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 模拟as3 DisplayList 的 现实对象基类\n */\nimport {_,event} from \"mmvis\";\nimport Matrix from \"../geom/Matrix\";\nimport Point from \"./Point\";\nimport Utils from \"../utils/index\";\nimport AnimationFrame from \"../animation/AnimationFrame\";\nimport Observe from \"../utils/observe\";\nimport {CONTEXT_DEFAULT, TRANSFORM_PROPS} from \"../const\";\nimport InsideLine from '../geom/InsideLine';\nimport Settings from '../settings';\n\nexport default class DisplayObject extends event.Dispatcher\n{\n    constructor( opt )\n    {\n        super( opt );\n        //相对父级元素的矩阵\n        this._transform      = null;\n        this.worldTransform  = null;\n        //_transform如果有修改，则_transformChange为true，renderer的时候worldTransform\n        this._transformChange= false;\n\n        //心跳次数\n        this._heartBeatNum   = 0;\n\n        //元素对应的stage元素\n        this.stage           = null;\n\n        //元素的父元素\n        this.parent          = null;\n\n        this.xyToInt         = \"xyToInt\" in opt ? opt.xyToInt : true;    //是否对xy坐标统一int处理，默认为true，但是有的时候可以由外界用户手动指定是否需要计算为int，因为有的时候不计算比较好，比如，进度图表中，再sector的两端添加两个圆来做圆角的进度条的时候，圆circle不做int计算，才能和sector更好的衔接\n\n        this.moveing         = false; //如果元素在最轨道运动中的时候，最好把这个设置为true，这样能保证轨迹的丝搬顺滑，否则因为xyToInt的原因，会有跳跃\n\n        this.clip            = null; //裁剪的图形对象\n\n        //创建好context\n        this.context         = this._createContext( opt );\n\n        this.type            = opt.type || \"DisplayObject\";\n\n        this.id              = opt.id || Utils.createId( this.type );\n\n        this._trackList      = []; //一个元素可以追踪另外元素的变动\n\n        this.init.apply(this , arguments);\n\n\n        //所有属性准备好了后，先要计算一次this._updateTransform()得到_tansform\n        this._updateTransform();\n\n        this._tweens = [];\n        var me = this;\n        this.on(\"destory\" , function(){\n            me.cleanAnimates();\n        });\n    }\n\n    init()\n    {\n\n    }\n\n    clipTo( node )\n    {\n        this.clip = node;\n        node.isClip = true;\n    }\n\n    _createContext( opt )\n    {\n        var self = this;\n\n        var optCtx = opt.context || {};\n\n        var _contextATTRS = {\n            width         : optCtx.width  || 0,\n            height        : optCtx.height || 0,\n            x             : optCtx.x      || 0,\n            y             : optCtx.y      || 0,\n            scaleX        : optCtx.scaleX || 1,\n            scaleY        : optCtx.scaleY || 1,\n            scaleOrigin   : optCtx.scaleOrigin || {\n                x : 0,\n                y : 0\n            },\n            rotation      : optCtx.rotation || 0,\n            rotateOrigin  : optCtx.rotateOrigin || {\n                x : 0,\n                y : 0\n            },\n            visible       : optCtx.visible || true,\n            globalAlpha   : optCtx.globalAlpha || 1\n\n\n\n            //样式部分迁移到shape中\n            //cursor        : optCtx.cursor || \"default\",\n            //fillAlpha     : optCtx.fillAlpha || 1,//context2d里没有，自定义\n            //fillStyle     : optCtx.fillStyle || null,//\"#000000\",\n\n            //lineCap       : optCtx.lineCap || null,//默认都是直角\n            //lineJoin      : optCtx.lineJoin || null,//这两个目前webgl里面没实现\n            //miterLimit    : optCtx.miterLimit || null,//miterLimit 属性设置或返回最大斜接长度,只有当 lineJoin 属性为 \"miter\" 时，miterLimit 才有效。\n\n            //lineAlpha     : optCtx.lineAlpha || 1,//context2d里没有，自定义\n            //strokeStyle   : optCtx.strokeStyle || null,\n            //lineType      : optCtx.lineType || \"solid\", //context2d里没有，自定义线条的type，默认为实线\n            //lineWidth     : optCtx.lineWidth || null\n        }\n        \n\n        //平凡的clone数据非常的耗时，还是走回原来的路\n        //var _contextATTRS = _.extend( true , _.clone(CONTEXT_DEFAULT), opt.context );\n\n        _.extend( true , _contextATTRS, opt.context );\n\n        //有些引擎内部设置context属性的时候是不用上报心跳的，比如做热点检测的时候\n        self._notWatch = false;\n\n        //不需要发心跳信息\n        self._noHeart = false;\n\n        //_contextATTRS.$owner = self;\n        _contextATTRS.$watch = function(name , value , preValue){\n            //下面的这些属性变化，都会需要重新组织矩阵属性 _transform \n            var obj = self;//this.$owner;\n\n            if( !obj.context ){\n                //如果这个obj的context已经不存在了，那么就什么都不处理，\n                //TODO:后续还要把自己给destroy 并且要把在 动画队列里面的动画也干掉\n                return;\n            }\n\n            if( name == \"globalGalpha\" ){\n                obj._globalAlphaChange = true;\n            };\n\n            if( _.indexOf( TRANSFORM_PROPS , name ) > -1 ) {\n                obj._updateTransform();\n                obj._transformChange = true;\n            };\n\n            if( obj._notWatch ){\n                return;\n            };\n\n            if( obj.$watch ){\n                //执行的内部$watch的时候必须把_notWatch 设置为true，否则会死循环调用\n                obj._notWatch = true;\n                obj.$watch( name , value , preValue );\n                obj._notWatch = false;\n            };\n\n            if( obj._noHeart ){\n                return;\n            };\n\n            obj.heartBeat( {\n                convertType:\"context\",\n                shape      : obj,\n                name       : name,\n                value      : value,\n                preValue   : preValue\n            });\n            \n        };\n\n        //执行init之前，应该就根据参数，把context组织好线\n        return Observe( _contextATTRS );\n    }\n\n\n    //TODO:track目前还没测试过,需要的时候再测试\n    track( el )\n    {\n        if( _.indexOf( this._trackList, el ) == -1 ){\n            this._trackList.push( el );\n        }\n    }\n\n    untrack( el ){\n        var ind = _.indexOf( this._trackList, el );\n        if( ind > -1 ){\n            this._trackList.splice( ind , 1 );\n        };\n    }\n\n    /* @myself 是否生成自己的镜像 \n     * 克隆又两种，一种是镜像，另外一种是绝对意义上面的新个体\n     * 默认为绝对意义上面的新个体，新对象id不能相同\n     * 镜像基本上是框架内部在实现  镜像的id相同 主要用来把自己画到另外的stage里面，比如\n     * mouseover和mouseout的时候调用*/\n    clone( myself )\n    {\n        var conf   = {\n            id      : this.id,\n            context : _.clone(this.context.$model),\n            isClone : true\n        };\n\n        var newObj;\n        if( this.type == 'text' ){\n            newObj = new this.constructor( this.text , conf );\n        } else {\n            newObj = new this.constructor( conf );\n        }\n\n        newObj.id = conf.id;\n\n        if( this.children ){\n            newObj.children = this.children;\n        }\n\n        if( this.graphics ){\n            newObj.graphics = this.graphics.clone();\n        }\n\n        if (!myself){\n            newObj.id = Utils.createId(newObj.type);\n        };\n        return newObj;\n    }\n\n    heartBeat(opt)\n    {\n        //stage存在，才说self代表的display已经被添加到了displayList中，绘图引擎需要知道其改变后\n        //的属性，所以，通知到stage.displayAttrHasChange\n        var stage = this.getStage();\n        if( stage ){\n            this._heartBeatNum ++;\n            stage.heartBeat && stage.heartBeat( opt );\n        }\n    }\n\n    getCurrentWidth()\n    {\n       return Math.abs(this.context.$model.width * this.context.$model.scaleX);\n    }\n\n    getCurrentHeight()\n    {\n       return Math.abs(this.context.$model.height * this.context.$model.scaleY);\n    }\n\n    getStage()\n    {\n        if( this.stage ) {\n            return this.stage;\n        };\n        var p = this;\n        if (p.type != \"stage\"){\n          while(p.parent) {\n            p = p.parent;\n            if (p.type == \"stage\"){\n              break;\n            }\n          };\n          if (p.type !== \"stage\") {\n            //如果得到的顶点display 的type不是Stage,也就是说不是stage元素\n            //那么只能说明这个p所代表的顶端display 还没有添加到displayList中，也就是没有没添加到\n            //stage舞台的childen队列中，不在引擎渲染范围内\n            return false;\n          }\n        } \n        //一直回溯到顶层object， 即是stage， stage的parent为null\n        this.stage = p;\n        return p;\n    }\n\n    localToGlobal( point , container )\n    {\n        !point && ( point = new Point( 0 , 0 ) );\n        var cm = this.getConcatenatedMatrix( container );\n\n        if (cm == null) return Point( 0 , 0 );\n        var m = new Matrix(1, 0, 0, 1, point.x , point.y);\n        m.concat(cm);\n        return new Point( m.tx , m.ty ); //{x:m.tx, y:m.ty};\n    }\n\n    globalToLocal( point , container) \n    {\n        !point && ( point = new Point( 0 , 0 ) );\n\n        if( this.type == \"stage\" ){\n            return point;\n        }\n        var cm = this.getConcatenatedMatrix( container );\n\n        if (cm == null) return new Point( 0 , 0 ); //{x:0, y:0};\n        cm.invert();\n        var m = new Matrix(1, 0, 0, 1, point.x , point.y);\n        m.concat(cm);\n        return new Point( m.tx , m.ty ); //{x:m.tx, y:m.ty};\n    }\n\n    localToTarget( point , target)\n    {\n        var p = localToGlobal( point );\n        return target.globalToLocal( p );\n    }\n\n    getConcatenatedMatrix( container )\n    {\n        var cm = new Matrix();\n        for (var o = this; o != null; o = o.parent) {\n            cm.concat( o._transform );\n            if( !o.parent || ( container && o.parent && o.parent == container ) || ( o.parent && o.parent.type==\"stage\" ) ) {\n            //if( o.type == \"stage\" || (o.parent && container && o.parent.type == container.type ) ) {\n                return cm;//break;\n            }\n        }\n        return cm;\n    }\n\n    /*\n     *设置元素的是否响应事件检测\n     *@bool  Boolean 类型\n     */\n    setEventEnable( bool )\n    {\n        if(_.isBoolean(bool)){\n            this._eventEnabled = bool\n            return true;\n        };\n        return false;\n    }\n\n    /*\n     *查询自己在parent的队列中的位置\n     */\n    getIndex()\n    {\n        if(!this.parent) {\n          return;\n        };\n        return _.indexOf(this.parent.children , this)\n    }\n\n\n    /*\n     *元素在z轴方向向下移动\n     *@num 移动的层级\n     */\n    toBack( num )\n    {\n        if(!this.parent) {\n          return;\n        }\n        var fromIndex = this.getIndex();\n        var toIndex = 0;\n        \n        if(_.isNumber( num )){\n          if( num == 0 ){\n             //原地不动\n             return;\n          };\n          toIndex = fromIndex - num;\n        }\n        var me = this.parent.children.splice( fromIndex , 1 )[0];\n        if( toIndex < 0 ){\n            toIndex = 0;\n        };\n        this.parent.addChildAt( me , toIndex );\n    }\n\n    /*\n     *元素在z轴方向向上移动\n     *@num 移动的层数量 默认到顶端\n     */\n    toFront( num )\n    {\n        if(!this.parent) {\n          return;\n        }\n        var fromIndex = this.getIndex();\n        var pcl = this.parent.children.length;\n        var toIndex = pcl;\n        \n        if(_.isNumber( num )){\n          if( num == 0 ){\n             //原地不动\n             return;\n          }\n          toIndex = fromIndex + num + 1;\n        }\n        var me = this.parent.children.splice( fromIndex , 1 )[0];\n        if(toIndex > pcl){\n            toIndex = pcl;\n        }\n        this.parent.addChildAt( me , toIndex-1 );\n    }\n\n    _updateTransform() \n    {\n        var _transform = new Matrix();\n        _transform.identity();\n        var context = this.context;\n        //是否需要Transform\n        if(context.scaleX !== 1 || context.scaleY !==1 ){\n            //如果有缩放\n            //缩放的原点坐标\n            var origin = new Point(context.scaleOrigin);\n            if( origin.x || origin.y ){\n                _transform.translate( -origin.x , -origin.y );\n            }\n            _transform.scale( context.scaleX , context.scaleY );\n            if( origin.x || origin.y ){\n                _transform.translate( origin.x , origin.y );\n            };\n        };\n\n        var rotation = context.rotation;\n        if( rotation ){\n            //如果有旋转\n            //旋转的原点坐标\n            var origin = new Point(context.rotateOrigin);\n            if( origin.x || origin.y ){\n                _transform.translate( -origin.x , -origin.y );\n            }\n            _transform.rotate( rotation % 360 * Math.PI/180 );\n            if( origin.x || origin.y ){\n                _transform.translate( origin.x , origin.y );\n            }\n        };\n\n        //如果有位移\n        var x,y;\n        if( this.xyToInt && !this.moveing ){\n            //当这个元素在做轨迹运动的时候，比如drag，animation如果实时的调整这个x ， y\n            //那么该元素的轨迹会有跳跃的情况发生。所以加个条件过滤，\n            var x = parseInt( context.x );\n            var y = parseInt( context.y );\n\n            if( parseInt(context.lineWidth , 10) % 2 == 1 && context.strokeStyle ){\n                x += 0.5;\n                y += 0.5;\n            }\n        } else {\n            x = context.x;\n            y = context.y;\n        };\n\n        if( x != 0 || y != 0 ){\n            _transform.translate( x , y );\n        };\n        this._transform = _transform;\n        return _transform;\n    }\n\n    //获取全局的世界坐标系内的矩阵\n    //世界坐标是从上而下的，所以只要和parent的直接坐标相乘就好了\n    setWorldTransform()\n    {\n        //if( !this.worldTransform ){\n        var cm = new Matrix();\n        cm.concat( this._transform );\n        this.parent && cm.concat( this.parent.worldTransform );\n        this.worldTransform = cm;\n        //};\n        return this.worldTransform;\n    }\n\n    //显示对象的选取检测处理函数\n    getChildInPoint( point )\n    {\n\n        var result = false; //检测的结果\n\n        //第一步，吧glob的point转换到对应的obj的层级内的坐标系统\n        //if( this.type != \"stage\" && this.parent && this.parent.type != \"stage\" ) {\n        //    point = this.parent.globalToLocal( point );\n        //};\n        //var m = new Matrix( Settings.RESOLUTION, 0, 0, Settings.RESOLUTION, point.x , point.y);\n        //m.concat( this.worldTransform );\n\n        var x = point.x;\n        var y = point.y;\n    \n        //对鼠标的坐标也做相同的变换\n        if( this.worldTransform ){\n            \n            var inverseMatrix = this.worldTransform.clone().invert();\n            var originPos = [\n                x * Settings.RESOLUTION, \n                y * Settings.RESOLUTION\n            ];\n\n            originPos = inverseMatrix.mulVector( originPos );\n\n            x = originPos[0];\n            y = originPos[1];\n        };\n\n        if( this.graphics ){\n            result = this.containsPoint( {x: x , y: y} );\n        };\n\n        if( this.type == \"text\" ){\n            //文本框的先单独处理\n            var _rect = this.getRect();\n            if(!_rect.width || !_rect.height) {\n                return false;\n            };\n            //正式开始第一步的矩形范围判断\n            if ( x    >= _rect.x\n                &&  x <= (_rect.x + _rect.width)\n                &&  (\n                    (_rect.height>= 0 && y >= _rect.y && y <= (_rect.y + _rect.height) ) ||\n                    (_rect.height < 0 && y <= _rect.y && y >= (_rect.y + _rect.height) )\n                    )\n            ) {\n                //那么就在这个元素的矩形范围内\n                result = true;\n            } else {\n                //如果连矩形内都不是，那么肯定的，这个不是我们要找的shap\n                result = false;\n            };\n            return result;\n        };\n\n        return result;\n    }\n\n    containsPoint(point)\n    {\n        let inside = false;\n        for (let i = 0; i < this.graphics.graphicsData.length; ++i)\n        {\n            const data = this.graphics.graphicsData[i];\n            if (data.shape)\n            {\n                //先检测fill， fill的检测概率大些。\n                //像circle,ellipse这样的shape 就直接把lineWidth算在fill里面计算就好了，所以他们是没有insideLine的\n                if ( data.hasFill() && data.shape.contains(point.x, point.y) )\n                {\n                    inside = true;\n                    if( inside ){\n                        break;\n                    }\n                }\n\n                //circle,ellipse等就没有points\n                if( data.hasLine() && data.shape.points )\n                {\n                    //然后检测是否和描边碰撞\n                    inside = InsideLine( data , point.x , point.y );\n                    if( inside ){\n                        break;\n                    }\n                }\n            }   \n        }\n        return inside;\n    }\n\n    /*\n    * animate\n    * @param toContent 要动画变形到的属性集合\n    * @param options tween 动画参数\n    */\n    animate( toContent , options , context )\n    {\n\n        if( !context ){\n            context = this.context;\n        };\n        if( !context ){\n            //这个时候如果还是找不到context说明这个 el 已经被destroy了\n            return;\n        };\n\n        var to = toContent;\n        var from = null;\n        for( var p in to ){\n            if( _.isObject( to[p] ) ){\n\n                //options必须传递一份copy出去，比如到下一个animate\n                this.animate( to[p], _.extend({} , options), context[p] );\n                //如果是个object\n                continue;\n            };\n            //if( isNaN(to[p]) && to[p] !== '' && to[p] !== null && to[p] !== undefined ){\n            if( isNaN(to[p]) && to[p] !== '' && to[p] !== null ){\n                //undefined已经被isNaN过滤了\n                //只有number才能继续走下去执行tween，而非number则直接赋值完事，\n                //TODO:不能用_.isNumber 因为 '1212' 这样的其实可以计算\n                context[ p ] = to[ p ];\n                delete to[p];\n                continue;\n            };\n            if( !from ){\n                from = {};\n            };\n            from[ p ] = context[p];\n        };\n\n        if( !from ){\n            //这里很重要，不能删除。 \n            //比如line.animate({start:{x:0,y:0}} , {duration:500});\n            //那么递归到start的时候  from 的值依然为null\n            //如果这个时候继续执行的话，会有很严重的bug\n            //line.context.start 会 被赋值了 line对象上的所有属性，严重的bug\n            return;\n        };\n\n        !options && (options = {});\n        options.from = from;\n        options.to = to;\n\n        var self = this;\n        var upFun = function(){};\n        if( options.onUpdate ){\n            upFun = options.onUpdate;\n        };\n        var tween;\n        options.onUpdate = function( status ){\n            //如果context不存在说明该obj已经被destroy了，那么要把他的tween给destroy\n            if (!context && tween) {\n                AnimationFrame.destroyTween(tween);\n                tween = null;\n                return;\n            };\n            for( var p in status ){\n                context[p] = status[p];\n            };\n            upFun.apply(self , [ status ]);\n        };\n\n        var compFun = function(){};\n        if( options.onComplete ){\n            compFun = options.onComplete;\n        };\n        options.onComplete = function( status ){\n            compFun.apply(self , arguments);\n            self._removeTween( tween );\n        };\n        options.onStop = function(){\n            self._removeTween( tween );\n        };\n        options.desc = \"tweenType:DisplayObject.animate__id:\"+this.id+\"__objectType:\"+this.type;\n        tween = AnimationFrame.registTween( options );\n        this._tweens.push( tween );\n        return tween;\n    }\n\n    _removeTween( tween ){\n        for( var i=0; i<this._tweens.length; i++ ){\n            if( tween == this._tweens[i] ){\n                this._tweens.splice( i , 1 );\n                break;\n            }\n        }\n    }\n\n    removeAnimate( animate ){\n        animate.stop();\n        this._removeTween( animate );\n    }\n\n    //清楚所有的动画\n    cleanAnimates(){\n        this._cleanAnimates();\n    }\n\n    //清楚所有的动画\n    _cleanAnimates(){\n        while( this._tweens.length ){\n            this._tweens.shift().stop();\n        };\n    }\n\n    //从树中删除\n    remove()\n    {\n        if( this.parent ){\n            this.parent.removeChild(this);\n            this.parent = null;\n        }\n    }\n\n    destroy()\n    {\n        this._destroy();\n    }\n\n    //元素的自我销毁\n    _destroy()\n    {\n        this.remove();\n        this.fire(\"destroy\");\n        //把自己从父节点中删除了后做自我清除，释放内存\n        this.context = null;\n        delete this.context;\n    }\n}","/** \n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 模拟as3的DisplayList 中的容器类\n */\nimport {_} from \"mmvis\";\nimport DisplayObject from \"./DisplayObject\";\nimport Point from \"./Point\";\n\nexport default class DisplayObjectContainer extends DisplayObject\n{\n    constructor(opt){\n        \n        super( opt );\n\n        this.children = [];\n        this.mouseChildren = [];\n        //所有的容器默认支持event 检测，因为 可能有里面的shape是eventEnable是true的\n        //如果用户有强制的需求让容器下的所有元素都 不可检测，可以调用\n        //DisplayObjectContainer的 setEventEnable() 方法\n        this._eventEnabled = true;\n    }\n\n    addChild(child , index)\n    {\n        if( !child ) {\n            return;\n        };\n        if(this.getChildIndex(child) != -1) {\n            child.parent = this;\n            return child;\n        };\n        //如果他在别的子元素中，那么就从别人那里删除了\n        if(child.parent) {\n            child.parent.removeChild(child);\n        };\n        \n        if( index === undefined ){\n            index = this.children.length\n        };\n\n        this.children.splice(index, 0, child);\n\n        child.parent = this;\n\n        if(this.heartBeat){\n           this.heartBeat({\n             convertType : \"children\",\n             target      : child,\n             src         : this\n           });\n        };\n\n        if(this._afterAddChild){\n           this._afterAddChild(child);\n        };\n\n        return child;\n    }\n\n    addChildAt(child, index) \n    {\n        return this.addChild( child , index );\n    }\n\n    removeChild(child) \n    {\n        return this.removeChildAt(_.indexOf( this.children , child ));\n    }\n\n    removeChildAt(index) \n    {\n        if (index < 0 || index > this.children.length - 1) {\n            return false;\n        };\n        var child = this.children[index];\n        if (child != null) {\n            child.parent = null;\n        };\n        this.children.splice(index, 1);\n        \n        if(this.heartBeat){\n           this.heartBeat({\n             convertType : \"children\",\n             target       : child,\n             src      : this\n           });\n        };\n        \n        if(this._afterDelChild){\n           this._afterDelChild(child , index);\n        }\n\n        return child;\n    }\n\n    removeChildById( id ) \n    {  \n        for(var i = 0, len = this.children.length; i < len; i++) {\n            if(this.children[i].id == id) {\n                return this.removeChildAt(i);\n            }\n        }\n        return false;\n    }\n\n    removeAllChildren() \n    {\n        while(this.children.length > 0) {\n            this.removeChildAt(0);\n        }\n    }\n\n    //集合类的自我销毁\n    destroy()\n    {\n        /*\n        if( this.parent ){\n            this.parent.removeChild(this);\n            this.parent = null;\n        };\n        this.fire(\"destroy\");\n        */\n        \n        //依次销毁所有子元素\n        for (var i=0,l=this.children.length ; i<l ; i++){\n            this.getChildAt(i).destroy();\n            i--;\n            l--;\n        };\n        this._destroy();\n    }\n\n\n    //集合类的自我销毁\n    cleanAnimates()\n    {\n        //依次销毁所有子元素\n        for (var i=0,l=this.children.length ; i<l ; i++){\n            this.getChildAt(i).cleanAnimates();\n        };\n        this._cleanAnimates();\n    }\n\n    /*\n     *@id 元素的id\n     *@boolen 是否深度查询，默认就在第一层子元素中查询\n     **/\n    getChildById(id , boolen)\n    {\n        if(!boolen) {\n            for(var i = 0, len = this.children.length; i < len; i++){\n                if(this.children[i].id == id) {\n                    return this.children[i];\n                }\n            }\n        } else {\n            //深度查询\n            //TODO:暂时未实现\n            return null\n        }\n        return null;\n    }\n\n    getChildAt(index) \n    {\n        if (index < 0 || index > this.children.length - 1) return null;\n        return this.children[index];\n    }\n\n    getChildIndex(child) \n    {\n        return _.indexOf( this.children , child );\n    }\n\n    setChildIndex(child, index)\n    {\n        if(child.parent != this) return;\n        var oldIndex = _.indexOf( this.children , child );\n        if(index == oldIndex) return;\n        this.children.splice(oldIndex, 1);\n        this.children.splice(index, 0, child);\n    }\n\n    getNumChildren() \n    {\n        return this.children.length;\n    }\n\n    //获取x,y点上的所有object  num 需要返回的obj数量\n    getObjectsUnderPoint( point , num) \n    {\n        var result = [];\n        \n        for(var i = this.children.length - 1; i >= 0; i--) {\n            var child = this.children[i];\n\n            if( child == null ||\n                (!child._eventEnabled && !child.dragEnabled) || \n                !child.context.$model.visible \n            ) {\n                continue;\n            }\n            if( child instanceof DisplayObjectContainer ) {\n                //是集合\n                if (child.mouseChildren && child.getNumChildren() > 0){\n                   var objs = child.getObjectsUnderPoint( point );\n                   if (objs.length > 0){\n                      result = result.concat( objs );\n                   }\n                }       \n            } else {\n                //非集合，可以开始做getChildInPoint了\n                if (child.getChildInPoint( point )) {\n                    result.push(child);\n                    if (num != undefined && !isNaN(num)){\n                       if(result.length == num){\n                          return result;\n                       }\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * stage 类， 再as3中，stage则代表整个舞台。是唯一的根节点\n * 但是再canvax中，因为分层设计的需要。stage 舞台 同样代表一个canvas元素，但是不是再整个引擎设计\n * 里面， 不是唯一的根节点。而是会交由canvax类来统一管理其层级\n */\nimport DisplayObjectContainer from \"./DisplayObjectContainer\";\nimport Utils from \"../utils/index\";\n\nexport default class Stage extends DisplayObjectContainer\n{\n    constructor( opt )\n    {\n        \n        opt.type = \"stage\";\n\n        super( opt );\n\n        this.canvas = null;\n        this.ctx = null; //渲染的时候由renderer决定,这里不做初始值\n        //stage正在渲染中\n        this.stageRending = false;\n        this._isReady = false;\n    }\n\n\n    //由canvax的afterAddChild 回调\n    initStage( canvas , width , height )\n    {\n        var self = this;\n        self.canvas = canvas;\n        var model = self.context;\n        model.width  = width;\n        model.height = height;\n        model.scaleX = Utils._devicePixelRatio;\n        model.scaleY = Utils._devicePixelRatio;\n        self._isReady = true;\n    }\n\n    heartBeat( opt )\n    {\n        //shape , name , value , preValue \n        //displayList中某个属性改变了\n        if (!this._isReady) {\n           //在stage还没初始化完毕的情况下，无需做任何处理\n           return;\n        };\n        opt || ( opt = {} ); //如果opt为空，说明就是无条件刷新\n        opt.stage   = this;\n\n        //TODO临时先这么处理\n        this.parent && this.parent.heartBeat(opt);\n    }\n}","import { RENDERER_TYPE } from '../const';\nimport settings from '../settings';\nimport AnimationFrame from \"../animation/AnimationFrame\";\nimport Utils from \"../utils/index\";\nimport {_} from \"mmvis\";\n\nexport default class SystemRenderer\n{\n    constructor( type=RENDERER_TYPE.UNKNOWN , app , options )\n    {\n    \tthis.type = type; //2canvas,1webgl\n        this.app = app;\n\n        if ( options )\n        {\n            for (const i in settings.RENDER_OPTIONS)\n            {\n                if (typeof options[i] === 'undefined')\n                {\n                    options[i] = settings.RENDER_OPTIONS[i];\n                }\n            }\n        }\n        else\n        {\n            options = settings.RENDER_OPTIONS;\n        }\n\n        this.options = options;\n\n\n        this.requestAid = null;\n\n\t\tthis._heartBeat = false;//心跳，默认为false，即false的时候引擎处于静默状态 true则启动渲染\n\n\t\tthis._preRenderTime = 0;\n    }\n\n    //如果引擎处于静默状态的话，就会启动\n    startEnter()\n    {\n       var self = this;\n       if( !self.requestAid ){\n           self.requestAid = AnimationFrame.registFrame( {\n               id : \"enterFrame\", //同时肯定只有一个enterFrame的task\n               task : function(){\n                    self.enterFrame.apply(self);\n               }\n           } );\n       }\n    }\n\n    enterFrame()\n    {\n        var self = this;\n        //不管怎么样，enterFrame执行了就要把\n        //requestAid null 掉\n        self.requestAid = null;\n        Utils.now = new Date().getTime();\n        if( self._heartBeat ){\n\n            //var _begin = new Date().getTime();\n            this.app.children.length && self.render( this.app );\n            //var _end = new Date().getTime();\n            //$(document.body).append( \"<br />render：\"+ (_end - _begin) );\n            \n            self._heartBeat = false;\n            //渲染完了，打上最新时间挫\n            self._preRenderTime = new Date().getTime();\n        };\n    }\n\n    _convertCanvax(opt)\n    {\n        var me = this;\n        _.each( me.app.children , function(stage){\n            stage.context[opt.name] = opt.value; \n        } );  \n    }\n\n    heartBeat( opt )\n    {\n        //displayList中某个属性改变了\n        var self = this;\n        if( opt ){\n            //心跳包有两种，一种是某元素的可视属性改变了。一种是children有变动\n            //分别对应convertType  为 context  and children\n            if (opt.convertType == \"context\"){\n                var stage   = opt.stage;\n                var shape   = opt.shape;\n                var name    = opt.name;\n                var value   = opt.value;\n                var preValue= opt.preValue;\n\n                if( shape.type == \"canvax\" ){\n                    self._convertCanvax(opt)\n                } else {\n                    if(!self.app.convertStages[stage.id]){\n                        self.app.convertStages[stage.id]={\n                            stage : stage,\n                            convertShapes : {}\n                        }\n                    };\n                    if(shape){\n                        if (!self.app.convertStages[ stage.id ].convertShapes[ shape.id ]){\n                            self.app.convertStages[ stage.id ].convertShapes[ shape.id ]={\n                                shape : shape,\n                                convertType : opt.convertType\n                            }\n                        } else {\n                            //如果已经上报了该 shape 的心跳。\n                            return;\n                        }\n                    }\n                };\n            };\n\n            if (opt.convertType == \"children\"){\n                //元素结构变化，比如addchild removeChild等\n                var target = opt.target;\n                var stage = opt.src.getStage();\n                if( stage || (target.type==\"stage\") ){\n                    //如果操作的目标元素是Stage\n                    stage = stage || target;\n                    if(!self.app.convertStages[stage.id]) {\n                        self.app.convertStages[stage.id]={\n                            stage : stage,\n                            convertShapes : {}\n                        }\n                    }\n                }\n            }\n\n            if(!opt.convertType){\n                //无条件要求刷新\n                var stage = opt.stage;\n                if(!self.app.convertStages[stage.id]) {\n                    self.app.convertStages[stage.id]={\n                        stage : stage ,\n                        convertShapes : {}\n                    }\n                }\n            }\n        } else {\n            //无条件要求全部刷新，一般用在resize等。\n            _.each( self.app.children , function( stage , i ){\n                self.app.convertStages[ stage.id ] = {\n                    stage : stage,\n                    convertShapes : {}\n                }\n            } );\n        };\n        if (!self._heartBeat){\n           //如果发现引擎在静默状态，那么就唤醒引擎\n           self._heartBeat = true;\n           self.startEnter();\n        } else {\n           //否则智慧继续确认心跳\n           self._heartBeat = true;\n        }\n    }\n}\n","import { SHAPES } from '../../const';\n\nexport default class CanvasGraphicsRenderer\n{\n   \n    constructor(renderer)\n    {\n        this.renderer = renderer;\n    }\n    \n     /**\n     * @param displayObject\n     * @stage 也可以displayObject.getStage()获取。\n     */\n    render(displayObject , stage, globalAlpha, isClip)\n    {\n        const renderer = this.renderer;\n        const graphicsData = displayObject.graphics.graphicsData;\n        const ctx = stage.ctx;\n\n        for (let i = 0; i < graphicsData.length; i++)\n        {\n            const data = graphicsData[i];\n            const shape = data.shape;\n\n            const fillStyle = data.fillStyle;\n            const strokeStyle = data.strokeStyle;\n\n            const fill = data.hasFill() && data.fillAlpha && !isClip;\n            const line = data.hasLine() && data.lineAlpha && !isClip;\n\n            ctx.lineWidth = data.lineWidth;\n\n            if (data.type === SHAPES.POLY)\n            {\n                ctx.beginPath();\n\n                this.renderPolygon(shape.points, shape.closed, ctx, isClip);\n\n                if ( fill )\n                {\n                    ctx.globalAlpha = data.fillAlpha * globalAlpha;\n                    ctx.fillStyle = fillStyle;\n                    ctx.fill();\n                }\n                if ( line )\n                {\n                    ctx.globalAlpha = data.lineAlpha * globalAlpha;\n                    ctx.strokeStyle = strokeStyle;\n                    ctx.stroke();\n                }\n            }\n            else if (data.type === SHAPES.RECT)\n            {\n                if( isClip ){\n                    //ctx.beginPath();\n                    //rect本身已经是个close的path\n                    ctx.rect( shape.x, shape.y, shape.width, shape.height );\n                    //ctx.closePath();\n                };\n                \n                if ( fill )\n                {\n                    ctx.globalAlpha = data.fillAlpha * globalAlpha;\n                    ctx.fillStyle = fillStyle;\n                    ctx.fillRect(shape.x, shape.y, shape.width, shape.height);\n                }\n                if ( line ) \n                {\n                    ctx.globalAlpha = data.lineAlpha * globalAlpha;\n                    ctx.strokeStyle = strokeStyle;\n                    ctx.strokeRect(shape.x, shape.y, shape.width, shape.height);\n                }\n            }\n            else if (data.type === SHAPES.CIRC)\n            {\n\n                // TODO - 这里应该可以不需要走graphics，而直接设置好radius\n                ctx.beginPath();\n                ctx.arc(shape.x, shape.y, shape.radius, 0, 2 * Math.PI);\n                ctx.closePath();\n\n                if ( fill )\n                {\n                    ctx.globalAlpha = data.fillAlpha * globalAlpha;\n                    ctx.fillStyle = fillStyle;\n                    ctx.fill();\n                }\n                if ( line )\n                {\n                    ctx.globalAlpha = data.lineAlpha * globalAlpha;\n                    ctx.strokeStyle = strokeStyle;\n                    ctx.stroke();\n                }\n            }\n            else if (data.type === SHAPES.ELIP)\n            {\n                const w = shape.width * 2;\n                const h = shape.height * 2;\n\n                const x = shape.x - (w / 2);\n                const y = shape.y - (h / 2);\n\n                ctx.beginPath();\n\n                const kappa = 0.5522848;\n                const ox = (w / 2) * kappa; // control point offset horizontal\n                const oy = (h / 2) * kappa; // control point offset vertical\n                const xe = x + w;           // x-end\n                const ye = y + h;           // y-end\n                const xm = x + (w / 2);       // x-middle\n                const ym = y + (h / 2);       // y-middle\n\n                ctx.moveTo(x, ym);\n                ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n                ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n                ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n                ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n\n                ctx.closePath();\n\n                if ( fill )\n                {\n                    ctx.globalAlpha = data.fillAlpha * globalAlpha;\n                    ctx.fillStyle = fillStyle;\n                    ctx.fill();\n                }\n                if ( line )\n                {\n                    ctx.globalAlpha = data.lineAlpha * globalAlpha;\n                    ctx.strokeStyle = strokeStyle;\n                    ctx.stroke();\n                }\n            }\n        }\n    }\n\n    renderPolygon(points, close, ctx, isClip)\n    {\n        ctx.moveTo(points[0], points[1]);\n\n        for (let j = 1; j < points.length / 2; ++j)\n        {\n            ctx.lineTo(points[j * 2], points[(j * 2) + 1]);\n        }\n\n        if (close || isClip)\n        {\n            ctx.closePath();\n        }\n    }\n\n}","import SystemRenderer from '../SystemRenderer';\nimport { RENDERER_TYPE } from '../../const';\nimport Settings from '../../settings';\nimport CGR from \"../../graphics/canvas/GraphicsRenderer\";\nimport {_} from \"mmvis\";\n\nexport default class CanvasRenderer extends SystemRenderer\n{\n    constructor(app, options={})\n    {\n        super(RENDERER_TYPE.CANVAS, app, options);\n        this.CGR = new CGR(this);\n    }\n\n    render( app )\n    {\n    \tvar me = this;\n        me.app = app;\n    \t_.each(_.values( app.convertStages ) , function(convertStage){\n            me.renderStage( convertStage.stage );\n        });\n        app.convertStages = {};\n    }\n\n    renderStage( stage )\n    {\n        if(!stage.ctx){\n            stage.ctx = stage.canvas.getContext(\"2d\");\n        }\n        stage.stageRending = true;\n        stage.setWorldTransform();\n        this._clear( stage );\n        this._render( stage , stage, stage.context.globalAlpha );\n        stage.stageRending = false;\n    }\n\n    _render( stage , displayObject , globalAlpha )\n    {\n        var ctx = stage.ctx;\n\n        if( !ctx ){\n            return;\n        };\n\n        var $MC = displayObject.context.$model;\n\n        if( !displayObject.worldTransform || displayObject._transformChange || (displayObject.parent && displayObject.parent._transformChange) ){\n            displayObject.setWorldTransform();\n            displayObject._transformChange = true;\n        };\n\n        globalAlpha *= $MC.globalAlpha;\n\n        if( !$MC.visible || displayObject.isClip ){\n            return;\n        };\n\n        \n        ctx.setTransform.apply( ctx , displayObject.worldTransform.toArray() );\n\n        var isClipSave = false;\n        if( displayObject.clip && displayObject.clip.graphics ){\n            //如果这个对象有一个裁剪路径对象，那么就绘制这个裁剪路径\n            var _clip = displayObject.clip;\n            ctx.save();\n            isClipSave = true;\n\n            if( !_clip.worldTransform || _clip._transformChange || _clip.parent._transformChange ){\n                _clip.setWorldTransform();\n                _clip._transformChange = true;\n            };\n            ctx.setTransform.apply( ctx , _clip.worldTransform.toArray() );\n\n            //如果 graphicsData.length==0 的情况下才需要执行_draw来组织graphics数据\n            if( !_clip.graphics.graphicsData.length ){\n                //当渲染器开始渲染app的时候，app下面的所有displayObject都已经准备好了对应的世界矩阵\n                _clip._draw( _clip.graphics );//_draw会完成绘制准备好 graphicsData\n            };\n            this.CGR.render( _clip , stage, globalAlpha, isClipSave );\n            \n            _clip._transformChange = false;\n\n            ctx.clip();\n        };\n\n        //因为已经采用了setTransform了， 非shape元素已经不需要执行transform 和 render\n        if( displayObject.graphics ){\n            //如果 graphicsData.length==0 的情况下才需要执行_draw来组织graphics数据\n            if( !displayObject.graphics.graphicsData.length ){\n                //当渲染器开始渲染app的时候，app下面的所有displayObject都已经准备好了对应的世界矩阵\n                displayObject._draw( displayObject.graphics );//_draw会完成绘制准备好 graphicsData\n            };\n\n            //globalAlpha == 0 的话，只是不需要render，但是graphics的graphicsData还是要计算的\n            //事件检测的时候需要用到graphics.graphicsData\n            if( !!globalAlpha ){\n                this.CGR.render( displayObject , stage, globalAlpha );\n            };\n        };\n\n        if( displayObject.type == \"text\" ){\n            //如果是文本\n            displayObject.render( ctx , globalAlpha );\n        };\n\n        if( displayObject.children ){\n\t        for(var i = 0, len = displayObject.children.length; i < len; i++) {\n\t        \tthis._render( stage , displayObject.children[i] , globalAlpha );\n\t        }\n\t    };\n\n        displayObject._transformChange = false;\n\n        if( isClipSave ){\n            //如果这个对象有裁剪对象， 则要恢复，裁剪之前的环境\n            ctx.restore();\n        };\n\n    }\n\n    _clear( stage )\n    {\n        var ctx = stage.ctx;\n        ctx.setTransform.apply( ctx , stage.worldTransform.toArray() );\n        ctx.clearRect( 0, 0, this.app.width , this.app.height );\n    }\n}\n\n","import utils from '../utils/index';\nimport CanvasRenderer from './canvas/CanvasRenderer';\n//import WebGLRenderer from './webgl/WebGLRenderer';\n\nexport default function autoRenderer( app , options)\n{\n\treturn new CanvasRenderer( app , options);\n\t/*\n    if (app.webGL && utils.isWebGLSupported())\n    {\n        return new WebGLRenderer( app , options);\n    };\n    return new CanvasRenderer( app , options);\n    */\n}\n","/**\n * Application {{PKG_VERSION}}\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 主引擎 类\n *\n * 负责所有canvas的层级管理，和心跳机制的实现,捕获到心跳包后 \n * 分发到对应的stage(canvas)来绘制对应的改动\n * 然后 默认有实现了shape的 mouseover  mouseout  drag 事件\n *\n **/\n\nimport Utils from \"./utils/index\";\nimport DisplayObjectContainer from \"./display/DisplayObjectContainer\";\nimport Stage from \"./display/Stage\";\nimport autoRenderer from \"./renderers/autoRenderer\";\nimport Matrix from \"./geom/Matrix\";\n\nimport {_,$,event} from \"mmvis\";\n\nexport default class Application extends DisplayObjectContainer\n{\n    constructor( opt , options = {} )\n    {\n        opt.type = \"canvax\";\n\n        super( opt );\n\n        this._cid = new Date().getTime() + \"_\" + Math.floor(Math.random()*100); \n        \n        this.el = $.query(opt.el);\n\n        this.width = parseInt(\"width\"  in opt || this.el.offsetWidth  , 10); \n        this.height = parseInt(\"height\" in opt || this.el.offsetHeight , 10); \n\n        var viewObj = $.createView(this.width , this.height, this._cid);\n        this.view = viewObj.view;\n        this.stageView = viewObj.stageView;\n        this.domView = viewObj.domView;\n        \n        this.el.innerHTML = \"\";\n        this.el.appendChild( this.view );\n\n        this.viewOffset = $.offset(this.view);\n        this.lastGetRO = 0;//最后一次获取 viewOffset 的时间\n\n        this.webGL  = opt.webGL;\n        this.renderer = autoRenderer(this , options);\n\n        this.event = null;\n\n        //是否阻止浏览器默认事件的执行\n        this.preventDefault = true;\n        if( opt.preventDefault === false ){\n            this.preventDefault = false\n        };\n\n        //该属性在systenRender里面操作，每帧由心跳上报的 需要重绘的stages 列表\n        this.convertStages = {};\n\n        this.context.$model.width  = this.width;\n        this.context.$model.height = this.height; \n\n        //然后创建一个用于绘制激活 shape 的 stage 到activation\n        this._bufferStage = null;\n        this._creatHoverStage();\n\n        //设置一个默认的matrix做为app的世界根节点坐标\n        this.worldTransform = new Matrix().identity();\n    }\n\n    registEvent(opt)\n    {\n        //初始化事件委托到root元素上面\n        this.event = new event.Handler( this , opt);;\n        this.event.init();\n        return this.event;\n    }\n\n    destroy()\n    {\n        for( var i=0,l=this.children.length; i<l; i++ ){\n            var stage = this.children[i];\n            stage.destroy();\n            stage.canvas = null;\n            stage.ctx = null;\n            stage = null;\n            i--,l--;\n        };\n        this.view.removeChild( this.stageView );\n        this.view.removeChild( this.domView );\n        this.el.removeChild( this.view );\n        this.el.innerHTML = \"\";\n        this.event = null;\n        this._bufferStage = null;\n    }\n\n    resize( opt )\n    {\n        //重新设置坐标系统 高宽 等。\n        this.width  = parseInt((opt && \"width\" in opt) || this.el.offsetWidth  , 10); \n        this.height = parseInt((opt && \"height\" in opt) || this.el.offsetHeight , 10); \n\n        //this.view  width height都一直设置为100%\n        //this.view.style.width  = this.width +\"px\";\n        //this.view.style.height = this.height+\"px\";\n\n        this.viewOffset = $.offset(this.view);\n        this.context.$model.width  = this.width;\n        this.context.$model.height = this.height;\n\n        var me = this;\n        var reSizeCanvas    = function(canvas){\n            canvas.style.width = me.width + \"px\";\n            canvas.style.height= me.height+ \"px\";\n            canvas.setAttribute(\"width\"  , me.width * Utils._devicePixelRatio);\n            canvas.setAttribute(\"height\" , me.height* Utils._devicePixelRatio);\n        }; \n        _.each(this.children , function(s , i){\n            s.context.$model.width = me.width;\n            s.context.$model.height= me.height;\n            reSizeCanvas(s.canvas);\n        });\n\n        this.stageView.style.width  = this.width  + \"px\";\n        this.stageView.style.height = this.height + \"px\";\n        this.domView.style.width  = this.width  + \"px\";\n        this.domView.style.height = this.height + \"px\";\n\n        this.heartBeat();\n    }\n\n    getHoverStage()\n    {\n        return this._bufferStage;\n    }\n\n    _creatHoverStage()\n    {\n        //TODO:创建stage的时候一定要传入width height  两个参数\n        this._bufferStage = new Stage( {\n            id : \"activCanvas\"+(new Date()).getTime(),\n            context : {\n                width : this.context.$model.width,\n                height: this.context.$model.height\n            }\n        } );\n        //该stage不参与事件检测\n        this._bufferStage._eventEnabled = false;\n        this.addChild( this._bufferStage );\n    }\n\n    updateViewOffset()\n    {\n        var now = new Date().getTime();\n        if( now - this.lastGetRO > 1000 ){\n            this.viewOffset = $.offset(this.view);\n            this.lastGetRO  = now;\n        }\n    }\n    \n    _afterAddChild( stage , index )\n    {\n        var canvas;\n\n        if(!stage.canvas){\n            canvas = $.createCanvas( this.context.$model.width , this.context.$model.height, stage.id );\n        } else {\n            canvas = stage.canvas;\n        }\n\n        if(this.children.length == 1){\n            this.stageView.appendChild( canvas );\n        } else if(this.children.length>1) {\n            if( index === undefined ) {\n                //如果没有指定位置，那么就放到 _bufferStage 的下面。\n                this.stageView.insertBefore( canvas , this._bufferStage.canvas);\n            } else {\n                //如果有指定的位置，那么就指定的位置来\n                if( index >= this.children.length-1 ){\n                   this.stageView.appendChild( canvas );\n                } else {\n                   this.stageView.insertBefore( canvas , this.children[ index ].canvas );\n                }\n            }\n        };\n\n        Utils.initElement( canvas );\n        stage.initStage( canvas , this.context.$model.width , this.context.$model.height ); \n    }\n\n    _afterDelChild(stage)\n    {\n        this.stageView.removeChild( stage.canvas );\n    }\n    \n    heartBeat(opt)\n    {\n        if( this.children.length > 0 ){\n            this.renderer.heartBeat(opt);\n        }\n    }\n\n    toDataURL()\n    {\n        var canvas = $.createCanvas( this.width , this.height, \"curr_base64_canvas\" );\n        var ctx = canvas.getContext(\"2d\");\n        _.each( this.children , function( stage ){\n            ctx.drawImage( stage.canvas , 0 , 0 );\n        } );\n        return canvas.toDataURL();\n    }\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 模拟as3 中 的sprite类，目前还只是个简单的容易。\n */\nimport DisplayObjectContainer from \"./DisplayObjectContainer\";\nimport Utils from \"../utils/index\";\n\nexport default class Sprite extends DisplayObjectContainer\n{\n\tconstructor(opt)\n\t{\n\t\topt = Utils.checkOpt(opt);\n\t\topt.type = \"sprite\";\n\t\tsuper( opt );\n\t}\n}","export default class GraphicsData\n{\n    constructor(lineWidth, strokeStyle, lineAlpha, fillStyle, fillAlpha, shape)\n    {\n        this.lineWidth = lineWidth;\n        this.strokeStyle = strokeStyle;\n        this.lineAlpha = lineAlpha;\n\n        this.fillStyle = fillStyle;\n        this.fillAlpha = fillAlpha;\n        \n        this.shape = shape;\n        this.type = shape.type;\n\n        this.holes = [];\n\n        //这两个可以被后续修改， 具有一票否决权\n        //比如polygon的 虚线描边。必须在fill的poly上面设置line为false\n        this.fill = true;\n        this.line = true;\n\n    }\n\n    clone()\n    {\n        var cloneGraphicsData = new GraphicsData(\n            this.lineWidth,\n            this.strokeStyle,\n            this.lineAlpha,\n            this.fillStyle,\n            this.fillAlpha,\n            this.shape\n        );\n        cloneGraphicsData.fill = this.fill;\n        cloneGraphicsData.line = this.line;\n        return cloneGraphicsData;\n    }\n\n    addHole(shape)\n    {\n        this.holes.push(shape);\n    }\n\n    //从宿主graphics中同步最新的style属性\n    synsStyle( style )\n    {\n        //console.log(\"line:\"+this.line+\"__fill:\"+this.fill)\n        //从shape中把绘图需要的style属性同步过来\n        if( this.line ){\n            this.lineWidth = style.lineWidth;\n            this.strokeStyle = style.strokeStyle;\n            this.lineAlpha = style.lineAlpha;\n        }\n\n        if( this.fill ){\n            this.fillStyle = style.fillStyle;\n            this.fillAlpha = style.fillAlpha;\n        }\n    }\n\n    hasFill()\n    {\n        return this.fillStyle &&\n               this.fill && \n               ( this.shape.closed !== undefined && this.shape.closed )\n    }\n\n    hasLine()\n    {\n        return this.strokeStyle && this.lineWidth && this.line\n    }\n\n    destroy()\n    {\n        this.shape = null;\n        this.holes = null;\n    }\n    \n}\n","var arcToSegmentsCache = { },\n    segmentToBezierCache = { },\n    boundsOfCurveCache = { },\n    _join = Array.prototype.join;\n\n/* Adapted from http://dxr.mozilla.org/mozilla-central/source/content/svg/content/src/nsSVGPathDataParser.cpp\n * by Andrea Bogazzi code is under MPL. if you don't have a copy of the license you can take it here\n * http://mozilla.org/MPL/2.0/\n */\nfunction arcToSegments(toX, toY, rx, ry, large, sweep, rotateX) {\n  var argsString = _join.call(arguments);\n  if (arcToSegmentsCache[argsString]) {\n    return arcToSegmentsCache[argsString];\n  }\n\n  var PI = Math.PI, th = rotateX * PI / 180,\n      sinTh = Math.sin(th),\n      cosTh = Math.cos(th),\n      fromX = 0, fromY = 0;\n\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  var px = -cosTh * toX * 0.5 - sinTh * toY * 0.5,\n      py = -cosTh * toY * 0.5 + sinTh * toX * 0.5,\n      rx2 = rx * rx, ry2 = ry * ry, py2 = py * py, px2 = px * px,\n      pl = rx2 * ry2 - rx2 * py2 - ry2 * px2,\n      root = 0;\n\n  if (pl < 0) {\n    var s = Math.sqrt(1 - pl / (rx2 * ry2));\n    rx *= s;\n    ry *= s;\n  }\n  else {\n    root = (large === sweep ? -1.0 : 1.0) *\n            Math.sqrt( pl / (rx2 * py2 + ry2 * px2));\n  }\n\n  var cx = root * rx * py / ry,\n      cy = -root * ry * px / rx,\n      cx1 = cosTh * cx - sinTh * cy + toX * 0.5,\n      cy1 = sinTh * cx + cosTh * cy + toY * 0.5,\n      mTheta = calcVectorAngle(1, 0, (px - cx) / rx, (py - cy) / ry),\n      dtheta = calcVectorAngle((px - cx) / rx, (py - cy) / ry, (-px - cx) / rx, (-py - cy) / ry);\n\n  if (sweep === 0 && dtheta > 0) {\n    dtheta -= 2 * PI;\n  }\n  else if (sweep === 1 && dtheta < 0) {\n    dtheta += 2 * PI;\n  }\n\n  // Convert into cubic bezier segments <= 90deg\n  var segments = Math.ceil(Math.abs(dtheta / PI * 2)),\n      result = [], mDelta = dtheta / segments,\n      mT = 8 / 3 * Math.sin(mDelta / 4) * Math.sin(mDelta / 4) / Math.sin(mDelta / 2),\n      th3 = mTheta + mDelta;\n\n  for (var i = 0; i < segments; i++) {\n    result[i] = segmentToBezier(mTheta, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY);\n    fromX = result[i][4];\n    fromY = result[i][5];\n    mTheta = th3;\n    th3 += mDelta;\n  }\n  arcToSegmentsCache[argsString] = result;\n  return result;\n}\n\nfunction segmentToBezier(th2, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY) {\n  var argsString2 = _join.call(arguments);\n  if (segmentToBezierCache[argsString2]) {\n    return segmentToBezierCache[argsString2];\n  }\n\n  var costh2 = Math.cos(th2),\n      sinth2 = Math.sin(th2),\n      costh3 = Math.cos(th3),\n      sinth3 = Math.sin(th3),\n      toX = cosTh * rx * costh3 - sinTh * ry * sinth3 + cx1,\n      toY = sinTh * rx * costh3 + cosTh * ry * sinth3 + cy1,\n      cp1X = fromX + mT * ( -cosTh * rx * sinth2 - sinTh * ry * costh2),\n      cp1Y = fromY + mT * ( -sinTh * rx * sinth2 + cosTh * ry * costh2),\n      cp2X = toX + mT * ( cosTh * rx * sinth3 + sinTh * ry * costh3),\n      cp2Y = toY + mT * ( sinTh * rx * sinth3 - cosTh * ry * costh3);\n\n  segmentToBezierCache[argsString2] = [\n    cp1X, cp1Y,\n    cp2X, cp2Y,\n    toX, toY\n  ];\n  return segmentToBezierCache[argsString2];\n}\n\n/*\n * Private\n */\nfunction calcVectorAngle(ux, uy, vx, vy) {\n  var ta = Math.atan2(uy, ux),\n      tb = Math.atan2(vy, vx);\n  if (tb >= ta) {\n    return tb - ta;\n  }\n  else {\n    return 2 * Math.PI - (ta - tb);\n  }\n}\n\n/**\n * Draws arc\n * @param {graphics} graphics\n * @param {Number} fx\n * @param {Number} fy\n * @param {Array} coords\n */\nvar drawArc = function(graphics , fx, fy, coords) {\n  var rx = coords[0],\n      ry = coords[1],\n      rot = coords[2],\n      large = coords[3],\n      sweep = coords[4],\n      tx = coords[5],\n      ty = coords[6],\n      segs = [[], [], [], []],\n      segsNorm = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n  for (var i = 0, len = segsNorm.length; i < len; i++) {\n    segs[i][0] = segsNorm[i][0] + fx;\n    segs[i][1] = segsNorm[i][1] + fy;\n    segs[i][2] = segsNorm[i][2] + fx;\n    segs[i][3] = segsNorm[i][3] + fy;\n    segs[i][4] = segsNorm[i][4] + fx;\n    segs[i][5] = segsNorm[i][5] + fy;\n    graphics.bezierCurveTo.apply(graphics, segs[i]);\n  }\n};\n\n/**\n * Calculate bounding box of a elliptic-arc\n * @param {Number} fx start point of arc\n * @param {Number} fy\n * @param {Number} rx horizontal radius\n * @param {Number} ry vertical radius\n * @param {Number} rot angle of horizontal axe\n * @param {Number} large 1 or 0, whatever the arc is the big or the small on the 2 points\n * @param {Number} sweep 1 or 0, 1 clockwise or counterclockwise direction\n * @param {Number} tx end point of arc\n * @param {Number} ty\n */\nvar getBoundsOfArc = function(fx, fy, rx, ry, rot, large, sweep, tx, ty) {\n\n  var fromX = 0, fromY = 0, bound, bounds = [],\n      segs = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n  for (var i = 0, len = segs.length; i < len; i++) {\n    bound = getBoundsOfCurve(fromX, fromY, segs[i][0], segs[i][1], segs[i][2], segs[i][3], segs[i][4], segs[i][5]);\n    bounds.push({ x: bound[0].x + fx, y: bound[0].y + fy });\n    bounds.push({ x: bound[1].x + fx, y: bound[1].y + fy });\n    fromX = segs[i][4];\n    fromY = segs[i][5];\n  }\n  return bounds;\n};\n\n/**\n * Calculate bounding box of a beziercurve\n * @param {Number} x0 starting point\n * @param {Number} y0\n * @param {Number} x1 first control point\n * @param {Number} y1\n * @param {Number} x2 secondo control point\n * @param {Number} y2\n * @param {Number} x3 end of beizer\n * @param {Number} y3\n */\n// taken from http://jsbin.com/ivomiq/56/edit  no credits available for that.\nfunction getBoundsOfCurve(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var argsString = _join.call(arguments);\n  if (boundsOfCurveCache[argsString]) {\n    return boundsOfCurveCache[argsString];\n  }\n\n  var sqrt = Math.sqrt,\n      min = Math.min, max = Math.max,\n      abs = Math.abs, tvalues = [],\n      bounds = [[], []],\n      a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n\n  b = 6 * x0 - 12 * x1 + 6 * x2;\n  a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n  c = 3 * x1 - 3 * x0;\n\n  for (var i = 0; i < 2; ++i) {\n    if (i > 0) {\n      b = 6 * y0 - 12 * y1 + 6 * y2;\n      a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n      c = 3 * y1 - 3 * y0;\n    }\n\n    if (abs(a) < 1e-12) {\n      if (abs(b) < 1e-12) {\n        continue;\n      }\n      t = -c / b;\n      if (0 < t && t < 1) {\n        tvalues.push(t);\n      }\n      continue;\n    }\n    b2ac = b * b - 4 * c * a;\n    if (b2ac < 0) {\n      continue;\n    }\n    sqrtb2ac = sqrt(b2ac);\n    t1 = (-b + sqrtb2ac) / (2 * a);\n    if (0 < t1 && t1 < 1) {\n      tvalues.push(t1);\n    }\n    t2 = (-b - sqrtb2ac) / (2 * a);\n    if (0 < t2 && t2 < 1) {\n      tvalues.push(t2);\n    }\n  }\n\n  var x, y, j = tvalues.length, jlen = j, mt;\n  while (j--) {\n    t = tvalues[j];\n    mt = 1 - t;\n    x = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\n    bounds[0][j] = x;\n\n    y = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\n    bounds[1][j] = y;\n  }\n\n  bounds[0][jlen] = x0;\n  bounds[1][jlen] = y0;\n  bounds[0][jlen + 1] = x3;\n  bounds[1][jlen + 1] = y3;\n  var result = [\n    {\n      x: min.apply(null, bounds[0]),\n      y: min.apply(null, bounds[1])\n    },\n    {\n      x: max.apply(null, bounds[0]),\n      y: max.apply(null, bounds[1])\n    }\n  ];\n  boundsOfCurveCache[argsString] = result;\n  return result;\n}\n\n\nexport default {\n    drawArc: drawArc,\n    getBoundsOfCurve: getBoundsOfCurve,\n    getBoundsOfArc: getBoundsOfArc\n}\n\n","import { SHAPES } from '../../const';\n\nexport default class Rectangle\n{\n    constructor(x = 0, y = 0, width = 0, height = 0)\n    {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.type = SHAPES.RECT;\n        this.closed = true;\n    }\n\n    clone()\n    {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n\n    copy(rectangle)\n    {\n        this.x = rectangle.x;\n        this.y = rectangle.y;\n        this.width = rectangle.width;\n        this.height = rectangle.height;\n\n        return this;\n    }\n\n    contains(x, y)\n    {\n        /*\n        if (this.width <= 0 || this.height <= 0)\n        {\n            return false;\n        }\n        */\n        if( this.height*y < 0 || this.width*x<0 ){\n            return false;\n        };\n\n        if ( \n            ( \n                ( x >= this.x && x <= (this.x + this.width) )\n            )\n            &&  (\n                (this.height>= 0 && y >= this.y && y <= (this.y + this.height) ) ||\n                (this.height < 0 && y <= this.y && y >= (this.y + this.height) )\n            )\n        ) {\n            return true;\n        }\n\n        return false;\n\n        //当x和 width , y和height都 为正或者都未负数的情况下，才可能在范围内\n\n        /*\n        if (x >= this.x && x < this.x + this.width)\n        {\n            if (y >= this.y && y < this.y + this.height)\n            {\n                return true;\n            }\n        }\n        */\n\n        return false;\n    }\n}\n","import Rectangle from './Rectangle';\nimport { SHAPES } from '../../const';\n\nexport default class Circle\n{\n    constructor(x = 0, y = 0, radius = 0)\n    {\n        this.x = x;\n\n        this.y = y;\n\n        this.radius = radius;\n\n        this.type = SHAPES.CIRC;\n\n        this.closed = true;\n    }\n\n    clone()\n    {\n        return new Circle(this.x, this.y, this.radius);\n    }\n\n    contains(x, y)\n    {\n        if (this.radius <= 0)\n        {\n            return false;\n        }\n\n        const r2 = this.radius * this.radius;\n        let dx = (this.x - x);\n        let dy = (this.y - y);\n\n        dx *= dx;\n        dy *= dy;\n\n        return (dx + dy <= r2);\n    }\n\n    getBounds()\n    {\n        return new Rectangle(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);\n    }\n}\n","import Rectangle from './Rectangle';\nimport { SHAPES } from '../../const';\n\nexport default class Ellipse\n{\n    constructor(x = 0, y = 0, width = 0, height = 0)\n    {\n        this.x = x;\n\n        this.y = y;\n\n        this.width = width;\n\n        this.height = height;\n\n        this.type = SHAPES.ELIP;\n\n        this.closed = true;\n    }\n\n    clone()\n    {\n        return new Ellipse(this.x, this.y, this.width, this.height);\n    }\n\n    contains(x, y)\n    {\n        if (this.width <= 0 || this.height <= 0)\n        {\n            return false;\n        }\n\n        let normx = ((x - this.x) / this.width);\n        let normy = ((y - this.y) / this.height);\n\n        normx *= normx;\n        normy *= normy;\n\n        return (normx + normy <= 1);\n    }\n\n    getBounds()\n    {\n        return new Rectangle(this.x - this.width, this.y - this.height, this.width, this.height);\n    }\n}\n","import { SHAPES } from '../../const';\n\nexport default class Polygon\n{\n    constructor(...points)\n    {\n        const point_0 = points[0];\n        if (Array.isArray( point_0 ))\n        {\n            points = point_0;\n        }\n\n        if ( point_0 && (\"x\" in point_0) && (\"y\" in point_0) )\n        {\n            const p = [];\n\n            for (let i = 0, il = points.length; i < il; i++)\n            {\n                p.push(points[i].x, points[i].y);\n            }\n\n            points = p;\n        }\n\n        this.closed = true;\n\n        this.points = points;\n\n        this.type = SHAPES.POLY;\n    }\n\n    clone()\n    {\n        return new Polygon(this.points.slice());\n    }\n\n    close()\n    {\n        const points = this.points;\n        if (points[0] !== points[points.length - 2] || points[1] !== points[points.length - 1])\n        {\n            points.push(points[0], points[1]);\n        }\n        this.closed = true;\n    }\n\n    contains(x, y)\n    {\n        return this._isInsidePolygon_WindingNumber(x,y);\n    }\n\n\n    /**\n     * 多边形包含判断 Nonzero Winding Number Rule\n     */\n    _isInsidePolygon_WindingNumber(x, y) \n    {\n        var points = this.points;\n        var wn = 0;\n        for (var shiftP, shift = points[1] > y, i = 3; i < points.length; i += 2) {\n            shiftP = shift;\n            shift = points[i] > y;\n            if (shiftP != shift) {\n                var n = (shiftP ? 1 : 0) - (shift ? 1 : 0);\n                if (n * ((points[i - 3] - x) * (points[i - 0] - y) - (points[i - 2] - y) * (points[i - 1] - x)) > 0) {\n                    wn += n;\n                }\n            };\n        };\n        return wn\n    }\n}\n","export default function bezierCurveTo(fromX, fromY, cpX, cpY, cpX2, cpY2, toX, toY, path = [])\n{\n    const n = 20;\n    let dt = 0;\n    let dt2 = 0;\n    let dt3 = 0;\n    let t2 = 0;\n    let t3 = 0;\n\n    path.push(fromX, fromY);\n\n    for (let i = 1, j = 0; i <= n; ++i)\n    {\n        j = i / n;\n\n        dt = (1 - j);\n        dt2 = dt * dt;\n        dt3 = dt2 * dt;\n\n        t2 = j * j;\n        t3 = t2 * j;\n\n        path.push(\n            (dt3 * fromX) + (3 * dt2 * j * cpX) + (3 * dt * t2 * cpX2) + (t3 * toX),\n            (dt3 * fromY) + (3 * dt2 * j * cpY) + (3 * dt * t2 * cpY2) + (t3 * toY)\n        );\n    }\n\n    return path;\n}\n","/*\n* Graphics绘图法则\n* 单个grahics实例里的fill line 样式属性，都从对应shape.context 中获取\n* \n*/\n\nimport GraphicsData from './GraphicsData';\nimport { Rectangle, Ellipse, Polygon, Circle } from '../math/index';\nimport { SHAPES } from '../const';\nimport bezierCurveTo from './utils/bezierCurveTo';\nimport {_} from \"mmvis\";\n\nexport default class Graphics \n{\n    constructor( shape )\n    {\n        this.lineWidth = 1;\n        this.strokeStyle = null;\n        this.lineAlpha = 1;\n        this.fillStyle = null;\n        this.fillAlpha = 1;\n\n        //比如path m 0 0 l 0 0 m 1 1 l 1 1\n        //就会有两条graphicsData数据产生\n        this.graphicsData = [];\n        this.currentPath = null;\n\n        this.dirty = 0; //用于检测图形对象是否已更改。 如果这是设置为true，那么图形对象将被重新计算。\n        this.clearDirty = 0; //用于检测我们是否清除了图形webGL数据\n\n        this._webGL = {};\n        this.worldAlpha = 1;\n        this.tint = 0xFFFFFF; //目标对象附加颜色\n\n        this.Bound = {\n            x:0,y:0,width:0,height:0\n        }\n    }\n\n    setStyle( context )\n    {\n        //从 shape 中把绘图需要的style属性同步过来\n        const model = context.$model;\n        this.lineWidth = model.lineWidth;\n        this.strokeStyle = model.strokeStyle;\n        this.lineAlpha = model.lineAlpha * model.globalAlpha;\n\n        this.fillStyle = model.fillStyle;\n        this.fillAlpha = model.fillAlpha * model.globalAlpha;\n\n        var g = this;\n\n        //一般都是先设置好style的，所以 ， 当后面再次设置新的style的时候\n        //会把所有的data都修改\n        //TODO: 后面需要修改, 能精准的确定是修改 graphicsData 中的哪个data\n        if( this.graphicsData.length ){\n            _.each( this.graphicsData , function(gd , i){\n                gd.synsStyle( g );\n            } );\n        }\n    }\n\n    clone()\n    {\n        \n        const clone = new Graphics();\n\n        clone.dirty = 0;\n\n        // copy graphics data\n        for (let i = 0; i < this.graphicsData.length; ++i)\n        {\n            clone.graphicsData.push(this.graphicsData[i].clone());\n        }\n\n        clone.currentPath = clone.graphicsData[clone.graphicsData.length - 1];\n        return clone;\n    }\n\n    moveTo(x, y)\n    {\n        const shape = new Polygon([x, y]);\n\n        shape.closed = false;\n        this.drawShape(shape);\n\n        return this;\n    }\n    \n    lineTo(x, y)\n    {\n        if( this.currentPath ){\n            this.currentPath.shape.points.push(x, y);\n            this.dirty++;\n        } else {\n            this.moveTo(0,0);\n        }\n        return this;\n    }\n\n    quadraticCurveTo(cpX, cpY, toX, toY)\n    {\n        if (this.currentPath)\n        {\n            if (this.currentPath.shape.points.length === 0)\n            {\n                this.currentPath.shape.points = [0, 0];\n            }\n        }\n        else\n        {\n            this.moveTo(0, 0);\n        }\n\n        const n = 20;\n        const points = this.currentPath.shape.points;\n        let xa = 0;\n        let ya = 0;\n\n        if (points.length === 0)\n        {\n            this.moveTo(0, 0);\n        }\n\n        const fromX = points[points.length - 2];\n        const fromY = points[points.length - 1];\n\n        for (let i = 1; i <= n; ++i)\n        {\n            const j = i / n;\n\n            xa = fromX + ((cpX - fromX) * j);\n            ya = fromY + ((cpY - fromY) * j);\n\n            points.push(xa + (((cpX + ((toX - cpX) * j)) - xa) * j),\n                ya + (((cpY + ((toY - cpY) * j)) - ya) * j));\n        }\n\n        this.dirty++;\n\n        return this;\n    }\n\n    bezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY)\n    {\n        if (this.currentPath)\n        {\n            if (this.currentPath.shape.points.length === 0)\n            {\n                this.currentPath.shape.points = [0, 0];\n            }\n        }\n        else\n        {\n            this.moveTo(0, 0);\n        }\n\n        const points = this.currentPath.shape.points;\n\n        const fromX = points[points.length - 2];\n        const fromY = points[points.length - 1];\n\n        points.length -= 2;\n\n        bezierCurveTo(fromX, fromY, cpX, cpY, cpX2, cpY2, toX, toY, points);\n\n        this.dirty++;\n\n        return this;\n    }\n\n    arcTo(x1, y1, x2, y2, radius)\n    {\n        if (this.currentPath)\n        {\n            if (this.currentPath.shape.points.length === 0)\n            {\n                this.currentPath.shape.points.push(x1, y1);\n            }\n        }\n        else\n        {\n            this.moveTo(x1, y1);\n        }\n\n        const points = this.currentPath.shape.points;\n        const fromX = points[points.length - 2];\n        const fromY = points[points.length - 1];\n        const a1 = fromY - y1;\n        const b1 = fromX - x1;\n        const a2 = y2 - y1;\n        const b2 = x2 - x1;\n        const mm = Math.abs((a1 * b2) - (b1 * a2));\n\n        if (mm < 1.0e-8 || radius === 0)\n        {\n            if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1)\n            {\n                points.push(x1, y1);\n            }\n        }\n        else\n        {\n            const dd = (a1 * a1) + (b1 * b1);\n            const cc = (a2 * a2) + (b2 * b2);\n            const tt = (a1 * a2) + (b1 * b2);\n            const k1 = radius * Math.sqrt(dd) / mm;\n            const k2 = radius * Math.sqrt(cc) / mm;\n            const j1 = k1 * tt / dd;\n            const j2 = k2 * tt / cc;\n            const cx = (k1 * b2) + (k2 * b1);\n            const cy = (k1 * a2) + (k2 * a1);\n            const px = b1 * (k2 + j1);\n            const py = a1 * (k2 + j1);\n            const qx = b2 * (k1 + j2);\n            const qy = a2 * (k1 + j2);\n            const startAngle = Math.atan2(py - cy, px - cx);\n            const endAngle = Math.atan2(qy - cy, qx - cx);\n\n            this.arc(cx + x1, cy + y1, radius, startAngle, endAngle, b1 * a2 > b2 * a1);\n        }\n\n        this.dirty++;\n\n        return this;\n    }\n\n    arc(cx, cy, radius, startAngle, endAngle, anticlockwise = false)\n    {\n        if (startAngle === endAngle)\n        {\n            return this;\n        }\n\n        if (!anticlockwise && endAngle <= startAngle)\n        {\n            endAngle += Math.PI * 2;\n        }\n        else if (anticlockwise && startAngle <= endAngle)\n        {\n            startAngle += Math.PI * 2;\n        }\n\n        const sweep = endAngle - startAngle;\n        const segs = Math.ceil(Math.abs(sweep) / (Math.PI * 2)) * 48;\n\n        if (sweep === 0)\n        {\n            return this;\n        }\n\n        const startX = cx + (Math.cos(startAngle) * radius);\n        const startY = cy + (Math.sin(startAngle) * radius);\n\n        // If the currentPath exists, take its points. Otherwise call `moveTo` to start a path.\n        let points = this.currentPath ? this.currentPath.shape.points : null;\n\n        if (points)\n        {\n            if (points[points.length - 2] !== startX || points[points.length - 1] !== startY)\n            {\n                points.push(startX, startY);\n            }\n        }\n        else\n        {\n            this.moveTo(startX, startY);\n            points = this.currentPath.shape.points;\n        }\n\n        const theta = sweep / (segs * 2);\n        const theta2 = theta * 2;\n\n        const cTheta = Math.cos(theta);\n        const sTheta = Math.sin(theta);\n\n        const segMinus = segs - 1;\n\n        const remainder = (segMinus % 1) / segMinus;\n\n        for (let i = 0; i <= segMinus; ++i)\n        {\n            const real = i + (remainder * i);\n\n            const angle = ((theta) + startAngle + (theta2 * real));\n\n            const c = Math.cos(angle);\n            const s = -Math.sin(angle);\n\n            points.push(\n                (((cTheta * c) + (sTheta * s)) * radius) + cx,\n                (((cTheta * -s) + (sTheta * c)) * radius) + cy\n            );\n        }\n\n        this.dirty++;\n\n        return this;\n    }\n\n    drawRect(x, y, width, height)\n    {\n        this.drawShape(new Rectangle(x, y, width, height));\n        return this;\n    }\n\n    drawCircle(x, y, radius)\n    {\n        this.drawShape(new Circle(x, y, radius));\n\n        return this;\n    }\n\n    drawEllipse(x, y, width, height)\n    {\n        this.drawShape(new Ellipse(x, y, width, height));\n\n        return this;\n    }\n\n    drawPolygon(path)\n    {\n        // prevents an argument assignment deopt\n        // see section 3.1: https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments\n        let points = path;\n\n        let closed = true;\n\n        if (points instanceof Polygon)\n        {\n            closed = points.closed;\n            points = points.points;\n        }\n\n        if (!Array.isArray(points))\n        {\n            // prevents an argument leak deopt\n            // see section 3.2: https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments\n            points = new Array(arguments.length);\n\n            for (let i = 0; i < points.length; ++i)\n            {\n                points[i] = arguments[i]; // eslint-disable-line prefer-rest-params\n            }\n        }\n\n        const shape = new Polygon(points);\n\n        shape.closed = closed;\n\n        this.drawShape(shape);\n\n        return this;\n    }\n\n    clear()\n    {\n        if (this.graphicsData.length > 0)\n        {\n            this.dirty++;\n            this.clearDirty++;\n            this.graphicsData.length = 0;\n        }\n\n        this.currentPath = null;\n\n        return this;\n    }\n\n    drawShape(shape)\n    {\n        if (this.currentPath)\n        {\n            if (this.currentPath.shape.points.length <= 2)\n            {\n                this.graphicsData.pop();\n            }\n        }\n\n        //this.currentPath = null;\n        this.beginPath();\n\n        const data = new GraphicsData(\n            this.lineWidth,\n            this.strokeStyle,\n            this.lineAlpha,\n            this.fillStyle,\n            this.fillAlpha,\n            shape\n        );\n\n        this.graphicsData.push(data);\n\n        if (data.type === SHAPES.POLY)\n        {\n            data.shape.closed = data.shape.closed;\n            this.currentPath = data;\n        }\n\n        this.dirty++;\n\n        return data;\n    }\n\n    beginPath()\n    {\n        this.currentPath = null;\n    }\n\n    closePath()\n    {\n        const currentPath = this.currentPath;\n\n        if (currentPath && currentPath.shape)\n        {\n            currentPath.shape.close();\n        }\n\n        return this;\n    }\n\n     /**\n     * Update the bounds of the object\n     *\n     */\n    updateLocalBounds()\n    {\n        let minX = Infinity;\n        let maxX = -Infinity;\n\n        let minY = Infinity;\n        let maxY = -Infinity;\n\n        if (this.graphicsData.length)\n        {\n            let shape = 0;\n            let x = 0;\n            let y = 0;\n            let w = 0;\n            let h = 0;\n\n            for (let i = 0; i < this.graphicsData.length; i++)\n            {\n                const data = this.graphicsData[i];\n                const type = data.type;\n                const lineWidth = data.lineWidth;\n\n                shape = data.shape;\n\n                if (type === SHAPES.RECT || type === SHAPES.RREC)\n                {\n                    x = shape.x - (lineWidth / 2);\n                    y = shape.y - (lineWidth / 2);\n                    w = shape.width + lineWidth;\n                    h = shape.height + lineWidth;\n\n                    minX = x < minX ? x : minX;\n                    maxX = x + w > maxX ? x + w : maxX;\n\n                    minY = y < minY ? y : minY;\n                    maxY = y + h > maxY ? y + h : maxY;\n                }\n                else if (type === SHAPES.CIRC)\n                {\n                    x = shape.x;\n                    y = shape.y;\n                    w = shape.radius + (lineWidth / 2);\n                    h = shape.radius + (lineWidth / 2);\n\n                    minX = x - w < minX ? x - w : minX;\n                    maxX = x + w > maxX ? x + w : maxX;\n\n                    minY = y - h < minY ? y - h : minY;\n                    maxY = y + h > maxY ? y + h : maxY;\n                }\n                else if (type === SHAPES.ELIP)\n                {\n                    x = shape.x;\n                    y = shape.y;\n                    w = shape.width + (lineWidth / 2);\n                    h = shape.height + (lineWidth / 2);\n\n                    minX = x - w < minX ? x - w : minX;\n                    maxX = x + w > maxX ? x + w : maxX;\n\n                    minY = y - h < minY ? y - h : minY;\n                    maxY = y + h > maxY ? y + h : maxY;\n                }\n                else\n                {\n                    // POLY\n                    const points = shape.points;\n                    let x2 = 0;\n                    let y2 = 0;\n                    let dx = 0;\n                    let dy = 0;\n                    let rw = 0;\n                    let rh = 0;\n                    let cx = 0;\n                    let cy = 0;\n\n                    for (let j = 0; j + 2 < points.length; j += 2)\n                    {\n                        x = points[j];\n                        y = points[j + 1];\n                        x2 = points[j + 2];\n                        y2 = points[j + 3];\n                        dx = Math.abs(x2 - x);\n                        dy = Math.abs(y2 - y);\n                        h = lineWidth;\n                        w = Math.sqrt((dx * dx) + (dy * dy));\n\n                        if (w < 1e-9)\n                        {\n                            continue;\n                        }\n\n                        rw = ((h / w * dy) + dx) / 2;\n                        rh = ((h / w * dx) + dy) / 2;\n                        cx = (x2 + x) / 2;\n                        cy = (y2 + y) / 2;\n\n                        minX = cx - rw < minX ? cx - rw : minX;\n                        maxX = cx + rw > maxX ? cx + rw : maxX;\n\n                        minY = cy - rh < minY ? cy - rh : minY;\n                        maxY = cy + rh > maxY ? cy + rh : maxY;\n                    }\n                }\n            }\n        }\n        else\n        {\n            minX = 0;\n            maxX = 0;\n            minY = 0;\n            maxY = 0;\n        }\n\n        this.Bound = {\n            x : minX,\n            y : minY,\n            width : maxX-minX,\n            height : maxY - minY\n        }\n        return this;\n    }\n\n    getBound()\n    {\n        return this.updateLocalBounds().Bound;\n    }\n\n    destroy(options)\n    {\n\n        for (let i = 0; i < this.graphicsData.length; ++i)\n        {\n            this.graphicsData[i].destroy();\n        }\n        for (const id in this._webGL)\n        {\n            for (let j = 0; j < this._webGL[id].data.length; ++j)\n            {\n                this._webGL[id].data[j].destroy();\n            }\n        }\n\n        this.graphicsData = null;\n        this.currentPath = null;\n        this._webGL = null;\n    }\n\n}","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 模拟as3 DisplayList 中的shape 类\n */\nimport DisplayObject from \"./DisplayObject\";\nimport Utils from \"../utils/index\";\nimport {_} from \"mmvis\";\nimport {SHAPE_CONTEXT_DEFAULT, STYLE_PROPS} from \"../const\";\nimport Graphics from \"../graphics/Graphics\";\n\nexport default class Shape extends DisplayObject\n{\n    constructor(opt){\n        opt = Utils.checkOpt( opt );\n        var styleContext = {\n            cursor        : opt.context.cursor     || \"default\",\n\n            fillAlpha     : opt.context.fillAlpha  || 1,//context2d里没有，自定义\n            fillStyle     : opt.context.fillStyle  || null,//\"#000000\",\n\n            lineCap       : opt.context.lineCap    || \"round\",//默认都是直角\n            lineJoin      : opt.context.lineJoin   || \"round\",//这两个目前webgl里面没实现\n            miterLimit    : opt.context.miterLimit || null,//miterLimit 属性设置或返回最大斜接长度,只有当 lineJoin 属性为 \"miter\" 时，miterLimit 才有效。\n\n            lineAlpha     : opt.context.lineAlpha  || 1,//context2d里没有，自定义\n            strokeStyle   : opt.context.strokeStyle|| null,\n            lineType      : opt.context.lineType   || \"solid\", //context2d里没有，自定义线条的type，默认为实线\n            lineWidth     : opt.context.lineWidth  || null\n        };\n         \n        var _context = _.extend( true, styleContext , opt.context );\n        opt.context = _context;\n\n        if( opt.id === undefined && opt.type !== undefined ){\n            opt.id = Utils.createId(opt.type);\n        };\n\n        super( opt );\n\n        //over的时候如果有修改样式，就为true\n        this._hoverClass = false;\n        this.hoverClone  = true;    //是否开启在hover的时候clone一份到active stage 中 \n        this.pointChkPriority = true; //在鼠标mouseover到该节点，然后mousemove的时候，是否优先检测该节点\n\n        this._eventEnabled   = false; //是否响应事件交互,在添加了事件侦听后会自动设置为true\n\n        this.dragEnabled     = opt.dragEnabled || false ;//\"dragEnabled\" in opt ? opt.dragEnabled : false;   //是否启用元素的拖拽\n\n         //拖拽drag的时候显示在activShape的副本\n        this._dragDuplicate = null;\n\n        this.type = this.type || \"shape\" ;\n        \n        //处理所有的图形一些共有的属性配置,把除开id,context之外的所有属性，全部挂载到this上面\n        this.initCompProperty(opt);\n\n        //如果该元素是clone而来，则不需要绘制\n        if( !this.isClone ){\n            //如果是clone对象的话就直接\n            this.graphics = new Graphics();\n            this._draw( this.graphics );\n        } else {\n            this.graphics = null;\n        }\n\n    }\n\n    _draw( graphics )\n    {\n        if(graphics.graphicsData.length == 0){\n            //先设置好当前graphics的style\n            graphics.setStyle( this.context );\n            this.draw( graphics );\n        }\n    }\n\n    draw()\n    {\n\n    }\n\n    clearGraphicsData()\n    {\n        this.graphics.clear();\n    }\n\n    $watch(name, value, preValue)\n    {\n        if( _.indexOf( STYLE_PROPS , name ) > -1 ){\n            this.graphics.setStyle( this.context );\n        }\n        this.watch( name, value, preValue );\n    }\n\n    initCompProperty(opt)\n    {\n        for( var i in opt ){\n           if( i != \"id\" && i != \"context\"){\n               this[i] = opt[i];\n           }\n        }\n    }\n\n    getBound()\n    {\n        return this.graphics.updateLocalBounds().Bound\n    }\n\n   /*\n    * 画虚线\n    */\n   dashedLineTo(graphics, x1, y1, x2, y2, dashLength ) \n   {\n         dashLength = typeof dashLength == 'undefined'\n                      ? 3 : dashLength;\n         dashLength = Math.max( dashLength , this.context.$model.lineWidth );\n         var deltaX = x2 - x1;\n         var deltaY = y2 - y1;\n         var numDashes = Math.floor(\n             Math.sqrt(deltaX * deltaX + deltaY * deltaY) / dashLength\n         );\n         for (var i = 0; i < numDashes; ++i) {\n             var x = parseInt(x1 + (deltaX / numDashes) * i);\n             var y = parseInt(y1 + (deltaY / numDashes) * i);\n             graphics[i % 2 === 0 ? 'moveTo' : 'lineTo']( x , y );\n             if( i == (numDashes-1) && i%2 === 0){\n                 graphics.lineTo( x2 , y2 );\n             }\n         }\n   }\n}","/**\r\n * Canvax--Text\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 文本 类\r\n **/\r\nimport DisplayObject from \"./DisplayObject\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\n\r\nexport default class Text extends DisplayObject\r\n{\r\n    constructor(text, opt)\r\n    {\r\n        opt.type = \"text\";\r\n\r\n        if( text === null || text === undefined ){\r\n            text = \"\";\r\n        };\r\n\r\n        opt.context = _.extend({\r\n            font: \"\", \r\n            fontSize: 13, //字体大小默认13\r\n            fontWeight: \"normal\",\r\n            fontFamily: \"微软雅黑,sans-serif\",\r\n            textBaseline: \"top\",\r\n            textAlign: \"left\",\r\n            \r\n            textDecoration: null,\r\n            fillStyle: 'blank',\r\n            strokeStyle: null,\r\n            lineWidth: 0,\r\n            lineHeight: 1.2,\r\n            backgroundColor: null,\r\n            textBackgroundColor: null\r\n        }, opt.context);\r\n\r\n        super( opt );\r\n \r\n        this._reNewline = /\\r?\\n/;\r\n        this.fontProperts = [\"fontStyle\", \"fontVariant\", \"fontWeight\", \"fontSize\", \"fontFamily\"];\r\n        this.context.font = this._getFontDeclaration();\r\n\r\n        this.text = text.toString();\r\n\r\n        this.context.width = this.getTextWidth();\r\n        this.context.height = this.getTextHeight();\r\n    }\r\n\r\n    $watch(name, value, preValue) \r\n    {\r\n\r\n        //context属性有变化的监听函数\r\n        if (_.indexOf(this.fontProperts, name) >= 0) {\r\n            this.context[name] = value;\r\n            //如果修改的是font的某个内容，就重新组装一遍font的值，\r\n            //然后通知引擎这次对context的修改上报心跳\r\n            this.context.font = this._getFontDeclaration();\r\n            this.context.width = this.getTextWidth();\r\n            this.context.height = this.getTextHeight();\r\n        }\r\n    }\r\n\r\n    _setContextStyle( ctx , style, globalAlpha ){\r\n        // 简单判断不做严格类型检测\r\n        for(var p in style){\r\n            if( p != \"textBaseline\" && ( p in ctx ) ){\r\n                if ( style[p] || _.isNumber( style[p] ) ) {\r\n                    if( p == \"globalAlpha\" ){\r\n                        //透明度要从父节点继承\r\n                        //ctx[p] = style[p] * globalAlpha; //render里面已经做过相乘了，不需要重新*\r\n                        ctx.globalAlpha = globalAlpha;\r\n                    } else {\r\n                        ctx[p] = style[p];\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        return;\r\n    }\r\n \r\n    render(ctx, globalAlpha) \r\n    { \r\n        this._renderText(ctx, this._getTextLines(), globalAlpha);\r\n    }\r\n\r\n    resetText(text) \r\n    {\r\n        this.text = text.toString();\r\n        this.heartBeat();\r\n    }\r\n\r\n    getTextWidth() \r\n    {\r\n        var width = 0;\r\n        if( Utils._pixelCtx ){\r\n            Utils._pixelCtx.save();\r\n            Utils._pixelCtx.font = this.context.$model.font;\r\n            width = this._getTextWidth(Utils._pixelCtx, this._getTextLines());\r\n            Utils._pixelCtx.restore();\r\n        };\r\n        return width;\r\n    }\r\n\r\n    getTextHeight() \r\n    {\r\n        return this._getTextHeight(Utils._pixelCtx, this._getTextLines());\r\n    }\r\n\r\n    _getTextLines() \r\n    {\r\n        return this.text.split(this._reNewline);\r\n    }\r\n\r\n    _renderText(ctx, textLines, globalAlpha) \r\n    {\r\n        if( !ctx ) return;\r\n        ctx.save();\r\n        this._setContextStyle( ctx , this.context.$model , globalAlpha);\r\n        this._renderTextStroke(ctx, textLines);\r\n        this._renderTextFill(ctx, textLines);\r\n        ctx.restore();\r\n    }\r\n\r\n    _getFontDeclaration() \r\n    {\r\n        var self = this;\r\n        var fontArr = [];\r\n\r\n        _.each(this.fontProperts, function(p) {\r\n            var fontP = self.context[p];\r\n            if (p == \"fontSize\") {\r\n                fontP = parseFloat(fontP) + \"px\"\r\n            }\r\n            fontP && fontArr.push(fontP);\r\n        });\r\n\r\n        return fontArr.join(' ');\r\n\r\n    }\r\n\r\n    _renderTextFill(ctx, textLines) \r\n    {\r\n        if (!this.context.$model.fillStyle) return;\r\n\r\n        this._boundaries = [];\r\n        var lineHeights = 0;\r\n        \r\n        for (var i = 0, len = textLines.length; i < len; i++) {\r\n            var heightOfLine = this._getHeightOfLine(ctx, i, textLines);\r\n            lineHeights += heightOfLine;\r\n\r\n            this._renderTextLine(\r\n                'fillText',\r\n                ctx,\r\n                textLines[i],\r\n                0, //this._getLeftOffset(),\r\n                this._getTopOffset() + lineHeights,\r\n                i\r\n            );\r\n        }\r\n    }\r\n\r\n    _renderTextStroke(ctx, textLines) \r\n    {\r\n        if( !ctx ) return;\r\n        \r\n        if (!this.context.$model.strokeStyle || !this.context.$model.lineWidth) return;\r\n\r\n        var lineHeights = 0;\r\n\r\n        ctx.save();\r\n        if (this.strokeDashArray) {\r\n            if (1 & this.strokeDashArray.length) {\r\n                this.strokeDashArray.push.apply(this.strokeDashArray, this.strokeDashArray);\r\n            }\r\n            supportsLineDash && ctx.setLineDash(this.strokeDashArray);\r\n        }\r\n\r\n        ctx.beginPath();\r\n        for (var i = 0, len = textLines.length; i < len; i++) {\r\n            var heightOfLine = this._getHeightOfLine(ctx, i, textLines);\r\n            lineHeights += heightOfLine;\r\n\r\n            this._renderTextLine(\r\n                'strokeText',\r\n                ctx,\r\n                textLines[i],\r\n                0, //this._getLeftOffset(),\r\n                this._getTopOffset() + lineHeights,\r\n                i\r\n            );\r\n        }\r\n        ctx.closePath();\r\n        ctx.restore();\r\n    }\r\n\r\n    _renderTextLine(method, ctx, line, left, top, lineIndex) \r\n    {\r\n        top -= this._getHeightOfLine() / 4;\r\n        if (this.context.$model.textAlign !== 'justify') {\r\n            this._renderChars(method, ctx, line, left, top, lineIndex);\r\n            return;\r\n        };\r\n        var lineWidth = ctx.measureText(line).width;\r\n        var totalWidth = this.context.$model.width;\r\n\r\n        if (totalWidth > lineWidth) {\r\n            var words = line.split(/\\s+/);\r\n            var wordsWidth = ctx.measureText(line.replace(/\\s+/g, '')).width;\r\n            var widthDiff = totalWidth - wordsWidth;\r\n            var numSpaces = words.length - 1;\r\n            var spaceWidth = widthDiff / numSpaces;\r\n\r\n            var leftOffset = 0;\r\n            for (var i = 0, len = words.length; i < len; i++) {\r\n                this._renderChars(method, ctx, words[i], left + leftOffset, top, lineIndex);\r\n                leftOffset += ctx.measureText(words[i]).width + spaceWidth;\r\n            }\r\n        } else {\r\n            this._renderChars(method, ctx, line, left, top, lineIndex);\r\n        }\r\n    }\r\n\r\n    _renderChars(method, ctx, chars, left, top) \r\n    {\r\n        ctx[method](chars, 0, top);\r\n    }\r\n\r\n    _getHeightOfLine() \r\n    {\r\n        return this.context.$model.fontSize * this.context.$model.lineHeight;\r\n    }\r\n\r\n    _getTextWidth(ctx, textLines) \r\n    {\r\n        var maxWidth = ctx.measureText(textLines[0] || '|').width;\r\n        for (var i = 1, len = textLines.length; i < len; i++) {\r\n            var currentLineWidth = ctx.measureText(textLines[i]).width;\r\n            if (currentLineWidth > maxWidth) {\r\n                maxWidth = currentLineWidth;\r\n            }\r\n        }\r\n        return maxWidth;\r\n    }\r\n\r\n    _getTextHeight(ctx, textLines) \r\n    {\r\n        return this.context.$model.fontSize * textLines.length * this.context.$model.lineHeight;\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @return {Number} Top offset\r\n     */\r\n    _getTopOffset() \r\n    {\r\n        var t = 0;\r\n        switch (this.context.$model.textBaseline) {\r\n            case \"top\":\r\n                t = 0;\r\n                break;\r\n            case \"middle\":\r\n                t = -this.context.$model.height / 2;\r\n                break;\r\n            case \"bottom\":\r\n                t = -this.context.$model.height;\r\n                break;\r\n        }\r\n        return t;\r\n    }\r\n\r\n    getRect() \r\n    {\r\n        var c = this.context;\r\n        var x = 0;\r\n        var y = 0;\r\n        //更具textAlign 和 textBaseline 重新矫正 xy\r\n        if (c.textAlign == \"center\") {\r\n            x = -c.width / 2;\r\n        };\r\n        if (c.textAlign == \"right\") {\r\n            x = -c.width;\r\n        };\r\n        if (c.textBaseline == \"middle\") {\r\n            y = -c.height / 2;\r\n        };\r\n        if (c.textBaseline == \"bottom\") {\r\n            y = -c.height;\r\n        };\r\n\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            width: c.width,\r\n            height: c.height\r\n        }\r\n    }\r\n}","\n/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 向量操作类\n * */\nimport {_} from \"mmvis\";\n\nfunction Vector(x, y) {\n    var vx = 0,vy = 0;\n    if ( arguments.length == 1 && _.isObject( x ) ){\n        var arg = arguments[0];\n        if( _.isArray( arg ) ){\n           vx = arg[0];\n           vy = arg[1];\n        } else if( arg.hasOwnProperty(\"x\") && arg.hasOwnProperty(\"y\") ) {\n           vx = arg.x;\n           vy = arg.y;\n        }\n    }\n    this._axes = [vx, vy];\n};\nVector.prototype = {\n    distance: function (v) {\n        var x = this._axes[0] - v._axes[0];\n        var y = this._axes[1] - v._axes[1];\n\n        return Math.sqrt((x * x) + (y * y));\n    }\n};\nexport default Vector;","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 处理为平滑线条\n */\nimport Vector from \"./Vector\";\nimport {_} from \"mmvis\";\n\n/**\n * @inner\n */\nfunction interpolate(p0, p1, p2, p3, t, t2, t3) {\n    var v0 = (p2 - p0) * 0.25;\n    var v1 = (p3 - p1) * 0.25;\n    return (2 * (p1 - p2) + v0 + v1) * t3 \n           + (- 3 * (p1 - p2) - 2 * v0 - v1) * t2\n           + v0 * t + p1;\n}\n/**\n * 多线段平滑曲线 \n * opt ==> points , isLoop\n */\nexport default function ( opt ) {\n    var points = opt.points;\n    var isLoop = opt.isLoop;\n    var smoothFilter = opt.smoothFilter;\n\n    var len = points.length;\n    if( len == 1 ){\n        return points;\n    }\n    var ret = [];\n    var distance  = 0;\n    var preVertor = new Vector( points[0] );\n    var iVtor     = null\n    for (var i = 1; i < len; i++) {\n        iVtor = new Vector(points[i]);\n        distance += preVertor.distance( iVtor );\n        preVertor = iVtor;\n    }\n\n    preVertor = null;\n    iVtor     = null;\n\n\n    //基本上等于曲率\n    var segs = distance / 6;\n\n    segs = segs < len ? len : segs;\n    for (var i = 0; i < segs; i++) {\n        var pos = i / (segs-1) * (isLoop ? len : len - 1);\n        var idx = Math.floor(pos);\n\n        var w = pos - idx;\n\n        var p0;\n        var p1 = points[idx % len];\n        var p2;\n        var p3;\n        if (!isLoop) {\n            p0 = points[idx === 0 ? idx : idx - 1];\n            p2 = points[idx > len - 2 ? len - 1 : idx + 1];\n            p3 = points[idx > len - 3 ? len - 1 : idx + 2];\n        } else {\n            p0 = points[(idx -1 + len) % len];\n            p2 = points[(idx + 1) % len];\n            p3 = points[(idx + 2) % len];\n        }\n\n        var w2 = w * w;\n        var w3 = w * w2;\n\n        var rp = [\n                interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3),\n                interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)\n                ];\n\n        _.isFunction(smoothFilter) && smoothFilter( rp );\n\n        ret.push( rp );\n    }\n    return ret;\n};","/**\n * Canvax\n *\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\n *\n * 数学 类\n *\n **/\n\nimport SmoothSpline from \"../geom/SmoothSpline\";\nimport {_} from \"mmvis\";\n\n\nvar _cache = {\n    sin : {},     //sin缓存\n    cos : {}      //cos缓存\n};\nvar _radians = Math.PI / 180;\n\n/**\n * @param angle 弧度（角度）参数\n * @param isDegrees angle参数是否为角度计算，默认为false，angle为以弧度计量的角度\n */\nfunction sin(angle, isDegrees) {\n    angle = (isDegrees ? angle * _radians : angle).toFixed(4);\n    if(typeof _cache.sin[angle] == 'undefined') {\n        _cache.sin[angle] = Math.sin(angle);\n    }\n    return _cache.sin[angle];\n}\n\n/**\n * @param radians 弧度参数\n */\nfunction cos(angle, isDegrees) {\n    angle = (isDegrees ? angle * _radians : angle).toFixed(4);\n    if(typeof _cache.cos[angle] == 'undefined') {\n        _cache.cos[angle] = Math.cos(angle);\n    }\n    return _cache.cos[angle];\n}\n\n/**\n * 角度转弧度\n * @param {Object} angle\n */\nfunction degreeToRadian(angle) {\n    return angle * _radians;\n}\n\n/**\n * 弧度转角度\n * @param {Object} angle\n */\nfunction radianToDegree(angle) {\n    return angle / _radians;\n}\n\n/*\n * 校验角度到360度内\n * @param {angle} number\n */\nfunction degreeTo360( angle ) {\n    var reAng = (360 +  angle  % 360) % 360;//Math.abs(360 + Math.ceil( angle ) % 360) % 360;\n    if( reAng == 0 && angle !== 0 ){\n        reAng = 360\n    }\n    return reAng;\n}\n\nfunction getIsgonPointList( n , r ){\n    var pointList = [];\n    var dStep = 2 * Math.PI / n;\n    var beginDeg = -Math.PI / 2;\n    var deg = beginDeg;\n    for (var i = 0, end = n; i < end; i++) {\n        pointList.push([r * Math.cos(deg), r * Math.sin(deg)]);\n        deg += dStep;\n    };\n    return pointList;\n}\n\nfunction getSmoothPointList( pList, smoothFilter ){\n    //smoothFilter -- 比如在折线图中。会传一个smoothFilter过来做point的纠正。\n    //让y不能超过底部的原点\n    var List = [];\n\n    var Len = pList.length;\n    var _currList = [];\n    _.each( pList, function( point, i ){\n\n        if( isNotValibPoint( point ) ){\n            //undefined , [ number, null] 等结构\n            if( _currList.length ){\n                List = List.concat( _getSmoothGroupPointList( _currList, smoothFilter ) );\n                _currList = [];\n            }\n\n            List.push( point );\n        } else {\n            //有效的point 都push 进_currList 准备做曲线设置\n            _currList.push( point );\n        };\n        \n        if( i == Len-1 ){\n            if( _currList.length ){\n                List = List.concat( _getSmoothGroupPointList( _currList, smoothFilter ) );\n                _currList = [];\n            }\n        }\n    } );\n\n    return List;\n}\n\nfunction _getSmoothGroupPointList( pList, smoothFilter ){\n    var obj = {\n        points: pList\n    }\n    if (_.isFunction(smoothFilter)) {\n        obj.smoothFilter = smoothFilter;\n    }\n\n    var currL = SmoothSpline(obj);\n    if (pList && pList.length>0) {\n        currL.push( pList[pList.length - 1] );\n    };\n\n    return currL;\n}\n\nfunction isNotValibPoint( point ){\n    var res = !point || \n    (_.isArray(point) && point.length >= 2 && (!_.isNumber(point[0]) || !_.isNumber(point[1])) ) || \n    ( \"x\" in point && !_.isNumber(point.x) ) ||\n    ( \"y\" in point && !_.isNumber(point.y) )\n\n    return res;\n}\nfunction isValibPoint( point ){\n    return !isNotValibPoint( point )\n}\n\nexport default {\n    PI  : Math.PI  ,\n    sin : sin      ,\n    cos : cos      ,\n    degreeToRadian : degreeToRadian,\n    radianToDegree : radianToDegree,\n    degreeTo360    : degreeTo360,\n    getIsgonPointList : getIsgonPointList,\n    getSmoothPointList: getSmoothPointList,\n    isNotValibPoint : isNotValibPoint,\n    isValibPoint : isValibPoint   \n};\n\n","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 折线 类\r\n *\r\n * 对应context的属性有\r\n * @pointList 各个顶角坐标\r\n **/\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\nimport _Math from \"../geom/Math\"\r\n\r\nexport default class BrokenLine extends Shape\r\n{\r\n    constructor(opt){\r\n        opt = Utils.checkOpt( opt );\r\n        \r\n        var _context = _.extend({\r\n            lineType: null,\r\n            smooth: false,\r\n            pointList: [], //{Array}  // 必须，各个顶角坐标\r\n            smoothFilter: Utils.__emptyFunc\r\n        }, opt.context );\r\n\r\n        if( !opt.isClone && _context.smooth ){\r\n            _context.pointList = _Math.getSmoothPointList( _context.pointList, _context.smoothFilter );\r\n        };\r\n\r\n        opt.context = _context;\r\n        opt.type = \"brokenline\";\r\n        \r\n        super(opt);\r\n\r\n        //保存好原始值\r\n        this._pointList = _context.pointList;\r\n    }\r\n\r\n    watch(name, value, preValue) \r\n    {\r\n        if (name == \"pointList\" || name == \"smooth\" || name == \"lineType\") {\r\n            if(name == \"pointList\" && this.context.smooth ){\r\n                this.context.pointList = _Math.getSmoothPointList( value , this.context.smoothFilter);\r\n                this._pointList = value;\r\n            };\r\n            if( name == \"smooth\" ){\r\n                //如果是smooth的切换\r\n                if( value ){\r\n                    //从原始中拿数据重新生成\r\n                    this.context.pointList = _Math.getSmoothPointList( this._pointList , this.context.smoothFilter);\r\n                } else {\r\n                    this.context.pointList = this._pointList;\r\n                }\r\n            };\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n\r\n\r\n    draw( graphics ) \r\n    {\r\n        let context = this.context;\r\n        let pointList = context.pointList;\r\n        let beginPath = false;\r\n\r\n        for (var i = 0, l = pointList.length; i < l; i++) {\r\n            var point = pointList[i];\r\n            var nextPoint = pointList[i+1];\r\n            if( _Math.isValibPoint( point ) ){\r\n                if (!context.lineType || context.lineType == 'solid') {\r\n                    //实线的绘制\r\n                    if( !beginPath ){\r\n                        graphics.moveTo( point[0], point[1] );\r\n                    } else {\r\n                        graphics.lineTo( point[0], point[1] );\r\n                    }\r\n                } else if (context.lineType == 'dashed' || context.lineType == 'dotted') {\r\n                    //如果是虚线\r\n\r\n                    //如果是曲线\r\n                    if( context.smooth ){\r\n                        //就直接做间隔好了\r\n                        //TODO: 这个情况会有点稀疏，要优化\r\n                        if( !beginPath ){\r\n                            graphics.moveTo( point[0], point[1] );\r\n                        } else {\r\n                            graphics.lineTo( point[0], point[1] );\r\n                            beginPath = false;\r\n                            i++; //跳过下一个点\r\n                            continue;\r\n                        }\r\n                    } else {\r\n                        //point 有效，而且 next也有效的话\r\n                        //直线的虚线\r\n                        if( _Math.isValibPoint( nextPoint ) ){\r\n                            this.dashedLineTo(graphics, point[0], point[1], nextPoint[0], nextPoint[1], 5);\r\n                        }\r\n                    }\r\n                };\r\n                \r\n                beginPath = true;\r\n            } else {\r\n                beginPath = false;\r\n            }\r\n        }\r\n\r\n        /*\r\n        if (!context.lineType || context.lineType == 'solid') {\r\n            //默认为实线\r\n            //TODO:目前如果 有设置smooth 的情况下是不支持虚线的\r\n            graphics.moveTo(pointList[0][0], pointList[0][1]);\r\n            for (var i = 1, l = pointList.length; i < l; i++) {\r\n                graphics.lineTo(pointList[i][0], pointList[i][1]);\r\n            };\r\n\r\n        } else if (context.lineType == 'dashed' || context.lineType == 'dotted') {\r\n            if (context.smooth) {\r\n                for (var si = 0, sl = pointList.length; si < sl; si++) {\r\n                    if (si == sl-1) {\r\n                        break;\r\n                    };\r\n                    graphics.moveTo( pointList[si][0] , pointList[si][1] );\r\n                    graphics.lineTo( pointList[si+1][0] , pointList[si+1][1] );\r\n                    si+=1;\r\n\r\n                };\r\n            } else {\r\n                //画虚线的方法  \r\n                for (var i = 1, l = pointList.length; i < l; i++) {\r\n                    var fromX = pointList[i - 1][0];\r\n                    var toX = pointList[i][0];\r\n                    var fromY = pointList[i - 1][1];\r\n                    var toY = pointList[i][1];\r\n                    this.dashedLineTo(graphics, fromX, fromY, toX, toY, 5);\r\n                };\r\n            }\r\n            \r\n        };\r\n        */\r\n        return this;\r\n    }\r\n}","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 圆形 类\r\n *\r\n * 坐标原点再圆心\r\n *\r\n * 对应context的属性有\r\n * @r 圆半径\r\n **/\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\n\r\nexport default class Circle extends Shape\r\n{\r\n    constructor( opt )\r\n    {\r\n        //opt = Utils.checkOpt( opt );\r\n        //默认情况下面，circle不需要把xy进行parentInt转换\r\n        /*\r\n        var opt = {\r\n            type : \"circle\",\r\n            xyToInt : false,\r\n            context : {\r\n                r : 0\r\n            }\r\n        };\r\n        */\r\n\r\n        opt = _.extend( true, {\r\n            type : \"circle\",\r\n            xyToInt : false,\r\n            context : {\r\n                r : 0\r\n            }\r\n        }, Utils.checkOpt( opt ) );\r\n\r\n        super( opt );\r\n    }\r\n    \r\n    watch(name, value, preValue)\r\n    {\r\n        if ( name == \"r\" ) {\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n\r\n    draw( graphics ) \r\n    {\r\n        var r = this.context.$model.r;\r\n        if( r < 0 ){\r\n            r = 0;\r\n        };\r\n        graphics.drawCircle(0, 0, r);\r\n    }\r\n\r\n}\r\n\r\n","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * Path 类，Path主要用于把svgpath 字符串转换为pointList，然后构建graphicsData\r\n *\r\n * 对应context的属性有\r\n * @path path串\r\n **/\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\nimport Matrix from \"../geom/Matrix\";\r\nimport { Arc } from '../math/index';\r\n\r\nexport default class Path extends Shape\r\n{\r\n    constructor(opt){\r\n        \r\n        var _context = _.extend({\r\n            pointList: [], //从下面的path中计算得到的边界点的集合\r\n            path: \"\" //字符串 必须，路径。例如:M 0 0 L 0 10 L 10 10 Z (一个三角形)\r\n                //M = moveto\r\n                //L = lineto\r\n                //H = horizontal lineto\r\n                //V = vertical lineto\r\n                //C = curveto\r\n                //S = smooth curveto\r\n                //Q = quadratic Belzier curve\r\n                //T = smooth quadratic Belzier curveto\r\n                //Z = closepath\r\n        } , opt.context);\r\n        opt.context = _context;\r\n        opt.__parsePathData = null;\r\n        opt.type = \"path\";\r\n\r\n        super( opt );\r\n    }\r\n\r\n    watch(name, value, preValue) \r\n    {\r\n        if (name == \"path\") { //如果path有变动，需要自动计算新的pointList\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n\r\n    _parsePathData(data) \r\n    {\r\n        if (this.__parsePathData) {\r\n            return this.__parsePathData;\r\n        };\r\n        if (!data) {\r\n            return [];\r\n        };\r\n        //分拆子分组\r\n        this.__parsePathData = [];\r\n        var paths = _.compact(data.replace(/[Mm]/g, \"\\\\r$&\").split('\\\\r'));\r\n        var me = this;\r\n        _.each(paths, function(pathStr) {\r\n            me.__parsePathData.push(me._parseChildPathData(pathStr));\r\n        });\r\n        return this.__parsePathData;\r\n    }\r\n\r\n    _parseChildPathData(data)\r\n    {\r\n        // command string\r\n        var cs = data;\r\n        // command chars\r\n        var cc = [\r\n            'm', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z',\r\n            'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'\r\n        ];\r\n        cs = cs.replace(/  /g, ' ');\r\n        cs = cs.replace(/ /g, ',');\r\n        //cs = cs.replace(/(.)-/g, \"$1,-\");\r\n        cs = cs.replace(/(\\d)-/g, '$1,-');\r\n        cs = cs.replace(/,,/g, ',');\r\n        var n;\r\n        // create pipes so that we can split the data\r\n        for (n = 0; n < cc.length; n++) {\r\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\r\n        }\r\n        // create array\r\n        var arr = cs.split('|');\r\n        var ca = [];\r\n        // init context point\r\n        var cpx = 0;\r\n        var cpy = 0;\r\n        for (n = 1; n < arr.length; n++) {\r\n            var str = arr[n];\r\n            var c = str.charAt(0);\r\n            str = str.slice(1);\r\n            str = str.replace(new RegExp('e,-', 'g'), 'e-');\r\n\r\n            //有的时候，比如“22，-22” 数据可能会经常的被写成22-22，那么需要手动修改\r\n            //str = str.replace(new RegExp('-', 'g'), ',-');\r\n            //str = str.replace(/(.)-/g, \"$1,-\")\r\n            var p = str.split(',');\r\n\r\n            if (p.length > 0 && p[0] === '') {\r\n                p.shift();\r\n            } \r\n\r\n            for (var i = 0; i < p.length; i++) {\r\n                p[i] = parseFloat(p[i]);\r\n            }\r\n            while (p.length > 0) {\r\n                if (isNaN(p[0])) {\r\n                    break;\r\n                }\r\n                var cmd = null;\r\n                var points = [];\r\n\r\n                var ctlPtx;\r\n                var ctlPty;\r\n                var prevCmd;\r\n\r\n                var rx;\r\n                var ry;\r\n                var psi;\r\n                var fa;\r\n                var fs;\r\n\r\n                var x1 = cpx;\r\n                var y1 = cpy;\r\n\r\n                // convert l, H, h, V, and v to L\r\n                switch (c) {\r\n                    case 'l':\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'L':\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'm':\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'M';\r\n                        points.push(cpx, cpy);\r\n                        c = 'l';\r\n                        break;\r\n                    case 'M':\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        cmd = 'M';\r\n                        points.push(cpx, cpy);\r\n                        c = 'L';\r\n                        break;\r\n\r\n                    case 'h':\r\n                        cpx += p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'H':\r\n                        cpx = p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'v':\r\n                        cpy += p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'V':\r\n                        cpy = p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'C':\r\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'c':\r\n                        points.push(\r\n                            cpx + p.shift(), cpy + p.shift(),\r\n                            cpx + p.shift(), cpy + p.shift()\r\n                        );\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'C';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'S':\r\n                        ctlPtx = cpx;\r\n                        ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if (prevCmd.command === 'C') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\r\n                        }\r\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        cmd = 'C';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 's':\r\n                        ctlPtx = cpx, ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if (prevCmd.command === 'C') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\r\n                        }\r\n                        points.push(\r\n                            ctlPtx, ctlPty,\r\n                            cpx + p.shift(), cpy + p.shift()\r\n                        );\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'C';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'Q':\r\n                        points.push(p.shift(), p.shift());\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'q':\r\n                        points.push(cpx + p.shift(), cpy + p.shift());\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'Q';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'T':\r\n                        ctlPtx = cpx, ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if (prevCmd.command === 'Q') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\r\n                        }\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        cmd = 'Q';\r\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 't':\r\n                        ctlPtx = cpx, ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if (prevCmd.command === 'Q') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\r\n                        }\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'Q';\r\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 'A':\r\n                        rx = p.shift(); //x半径\r\n                        ry = p.shift(); //y半径\r\n                        psi = p.shift(); //旋转角度\r\n                        fa = p.shift(); //角度大小 \r\n                        fs = p.shift(); //时针方向\r\n\r\n                        x1 = cpx, y1 = cpy;\r\n                        cpx = p.shift(), cpy = p.shift();\r\n                        cmd = 'A';\r\n                        points = [ rx , ry ,psi , fa ,fs ,cpx , cpy , x1 , y1 ]\r\n                        break;\r\n                    case 'a':\r\n                        rx = p.shift();\r\n                        ry = p.shift();\r\n                        psi = p.shift();\r\n                        fa = p.shift();\r\n                        fs = p.shift();\r\n\r\n                        x1 = cpx, y1 = cpy;\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'A';\r\n                        points = [ rx , ry ,psi , fa ,fs ,cpx , cpy , x1 , y1 ]\r\n                        break;\r\n\r\n                }\r\n\r\n                ca.push({\r\n                    command: cmd || c,\r\n                    points: points\r\n                });\r\n            }\r\n\r\n            if (c === 'z' || c === 'Z') {\r\n                ca.push({\r\n                    command: 'z',\r\n                    points: []\r\n                });\r\n            }\r\n        };\r\n        return ca;\r\n    }\r\n\r\n    //重新根的path绘制 graphics\r\n    draw( graphics )\r\n    {\r\n        //graphics.beginPath();\r\n        this.__parsePathData = null;\r\n        this.context.$model.pointList = [];\r\n\r\n        var pathArray = this._parsePathData(this.context.$model.path);\r\n\r\n        for (var g = 0, gl = pathArray.length; g < gl; g++) {\r\n            for (var i = 0, l = pathArray[g].length; i < l; i++) {\r\n                var c = pathArray[g][i].command, p = pathArray[g][i].points;\r\n                switch (c) {\r\n                    case 'L':\r\n                        graphics.lineTo(p[0], p[1]);\r\n                        break;\r\n                    case 'M':\r\n                        graphics.moveTo(p[0], p[1]);\r\n                        break;\r\n                    case 'C':\r\n                        graphics.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\r\n                        break;\r\n                    case 'Q':\r\n                        graphics.quadraticCurveTo(p[0], p[1], p[2], p[3]);\r\n                        break;\r\n                    case 'A':\r\n                        //前面6个元素用来放path的A 6个参数，path A命令详见\r\n                        Arc.drawArc( graphics , p[7] , p[8] , p );\r\n                        break;\r\n                    case 'z':\r\n                        graphics.closePath();\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        return this;\r\n    }\r\n\r\n}","/**\r\n * Canvax\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 水滴形 类\r\n * 派生自Path类\r\n *\r\n * 对应context的属性有\r\n * @hr 水滴横宽（中心到水平边缘最宽处距离）\r\n * @vr 水滴纵高（中心到尖端距离）\r\n **/\r\nimport Path from \"./Path\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\n\r\nexport default class Droplet extends Path\r\n{\r\n    constructor(opt)\r\n    {\r\n        opt = _.extend({\r\n            type : \"droplet\",\r\n            context : {\r\n                hr : 0, //{number},  // 必须，水滴横宽（中心到水平边缘最宽处距离）\r\n                vr : 0   //{number},  // 必须，水滴纵高（中心到尖端距离）\r\n            }\r\n        } , Utils.checkOpt( opt ));\r\n\r\n        var my = super(opt);\r\n\r\n        this.context.$model.path = this.createPath();\r\n    }\r\n\r\n    watch(name, value, preValue) \r\n    {\r\n        if ( name == \"hr\" || name == \"vr\" ) {\r\n            this.context.$model.path = this.createPath();\r\n        }\r\n    }\r\n    \r\n    createPath() \r\n    {\r\n        var model = this.context.$model;\r\n        var ps = \"M 0 \"+model.hr+\" C \"+model.hr+\" \"+model.hr+\" \"+( model.hr*3/2 ) +\" \"+(-model.hr/3)+\" 0 \"+(-model.vr);\r\n        ps += \" C \"+(-model.hr * 3/ 2)+\" \"+(-model.hr / 3)+\" \"+(-model.hr)+\" \"+model.hr+\" 0 \"+ model.hr+ \"z\";\r\n        return ps;\r\n    }\r\n}","\r\n/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 椭圆形 类\r\n *\r\n * 对应context的属性有 \r\n *\r\n * @hr 椭圆横轴半径\r\n * @vr 椭圆纵轴半径\r\n */\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\n\r\nexport default class Ellipse extends Shape\r\n{\r\n    constructor(opt)\r\n    {\r\n        opt = _.extend({\r\n            type : \"ellipse\",\r\n            context : {\r\n                hr : 0,  //{number},  // 必须，水滴横宽（中心到水平边缘最宽处距离）\r\n                vr : 0   //{number},  // 必须，水滴纵高（中心到尖端距离）\r\n            }\r\n        } , Utils.checkOpt( opt ));\r\n\r\n        super( opt );\r\n    }\r\n\r\n    watch(name, value, preValue) \r\n    {\r\n        if ( name == \"hr\" || name == \"vr\" ) {\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n\r\n    draw(graphics)\r\n    {    \r\n        graphics.drawEllipse(0,0, this.context.$model.hr*2 , this.context.$model.vr*2);\r\n    }\r\n};\r\n","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 多边形 类  （不规则）\r\n *\r\n * 对应context的属性有\r\n * @pointList 多边形各个顶角坐标\r\n **/\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\nimport _Math from \"../geom/Math\"\r\n\r\nexport default class Polygon extends Shape \r\n{\r\n    constructor(opt)\r\n    {\r\n        var _context = _.extend({\r\n            lineType: null,\r\n            smooth: false,\r\n            pointList: [], //{Array}  // 必须，各个顶角坐标\r\n            smoothFilter: Utils.__emptyFunc\r\n        }, opt.context );\r\n\r\n        if(!opt.isClone){\r\n            var start = _context.pointList[0];\r\n            var end   = _context.pointList.slice( - 1 )[0];\r\n            if( _context.smooth ){\r\n                _context.pointList.unshift( end );\r\n                _context.pointList = _Math.getSmoothPointList( _context.pointList );\r\n            }\r\n        };\r\n\r\n        opt.context = _context;\r\n        opt.type = \"polygon\";\r\n        \r\n        super(opt);\r\n    }\r\n\r\n    watch(name, value, preValue) \r\n    {\r\n        //调用parent的setGraphics\r\n        if (name == \"pointList\" || name == \"smooth\" || name == \"lineType\") {\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n\r\n    draw( graphics ) \r\n    {\r\n        //graphics.beginPath();\r\n        const context = this.context;\r\n        const pointList = context.pointList;\r\n        if (pointList.length < 2) {\r\n            //少于2个点就不画了~\r\n            return;\r\n        };\r\n\r\n        graphics.moveTo(pointList[0][0], pointList[0][1]);\r\n        for (var i = 1, l = pointList.length; i < l; i++) {\r\n            graphics.lineTo(pointList[i][0], pointList[i][1]);\r\n        };\r\n        graphics.closePath();\r\n\r\n        //如果为虚线\r\n        if (context.lineType == 'dashed' || context.lineType == 'dotted') {\r\n            //首先把前面的draphicsData设置为fill only\r\n            //也就是把line强制设置为false，这点很重要，否则你虚线画不出来，会和这个实现重叠了\r\n            graphics.currentPath.line = false;\r\n\r\n            if (context.smooth) {\r\n                //如果是smooth，本身已经被用曲率打散过了，不需要采用间隔法\r\n                for (var si = 0, sl = pointList.length; si < sl; si++) {\r\n                    if (si == sl-1) {\r\n                        break;\r\n                    };\r\n                    graphics.moveTo( pointList[si][0] , pointList[si][1] );\r\n                    graphics.lineTo( pointList[si+1][0] , pointList[si+1][1] );\r\n                    si+=1;\r\n                };\r\n            } else {\r\n                //画虚线的方法  \r\n                graphics.moveTo(pointList[0][0], pointList[0][1]);\r\n                for (var i = 1, l = pointList.length; i < l; i++) {\r\n                    var fromX = pointList[i - 1][0];\r\n                    var toX = pointList[i][0];\r\n                    var fromY = pointList[i - 1][1];\r\n                    var toY = pointList[i][1];\r\n                    this.dashedLineTo(graphics, fromX, fromY, toX, toY, 5);\r\n                };\r\n            }\r\n        };\r\n\r\n        graphics.closePath();\r\n        return;\r\n    }\r\n};","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 正n边形（n>=3）\r\n *\r\n * 对应context的属性有 \r\n *\r\n * @r 正n边形外接圆半径\r\n * @r 指明正几边形\r\n *\r\n * @pointList 私有，从上面的r和n计算得到的边界值的集合\r\n */\r\nimport Polygon from \"./Polygon\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\nimport _Math from \"../geom/Math\"\r\n\r\nexport default class Isogon extends Polygon\r\n{\r\n    constructor(opt)\r\n    {\r\n        var _context = _.extend({\r\n            pointList: [], //从下面的r和n计算得到的边界值的集合\r\n            r: 0, //{number},  // 必须，正n边形外接圆半径\r\n            n: 0 //{number},  // 必须，指明正几边形\r\n        } , opt.context);\r\n        _context.pointList = _Math.getIsgonPointList( _context.n , _context.r );\r\n\r\n        opt.context = _context;\r\n        opt.type = \"isogon\";\r\n\r\n        super( opt );\r\n    }\r\n\r\n    watch(name, value, preValue)\r\n    {\r\n        if (name == \"r\" || name == \"n\"){ //如果path有变动，需要自动计算新的pointList\r\n            this.context.$model.pointList = _Math.getIsgonPointList( this.context.$model.n , this.context.$model.r );\r\n        }\r\n        if (name == \"pointList\" || name == \"smooth\" || name == \"lineType\") {\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n};","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 线条 类\r\n *\r\n *\r\n * 对应context的属性有\r\n * @lineType  可选 虚线 实现 的 类型\r\n **/\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\n\r\nexport default class Line extends Shape\r\n{\r\n    constructor(opt)\r\n    {\r\n        var _context = _.extend({\r\n            lineType: null, //可选 虚线 实现 的 类型\r\n            start: {\r\n                x : 0,      // 必须，起点横坐标\r\n                y : 0       // 必须，起点纵坐标\r\n            },\r\n            end: {\r\n                x : 0,      // 必须，终点横坐标\r\n                y : 0       // 必须，终点纵坐标\r\n            },\r\n            dashLength: 3    // 虚线间隔\r\n        } , opt.context);\r\n        opt.context = _context;\r\n\r\n        opt.type = \"line\";\r\n\r\n        super( opt );\r\n    }\r\n\r\n    watch(name, value, preValue)\r\n    {\r\n        //并不清楚是start.x 还是end.x， 当然，这并不重要\r\n        if (name == \"x\" || name == \"y\"){\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n\r\n    draw( graphics ) \r\n    {\r\n        const model = this.context.$model;\r\n        if (!model.lineType || model.lineType == 'solid') {\r\n            graphics.moveTo( model.start.x , model.start.y ); \r\n            graphics.lineTo( model.end.x   , model.end.y );\r\n        } else if (model.lineType == 'dashed' || model.lineType == 'dotted') {\r\n            this.dashedLineTo(\r\n                graphics,\r\n                model.start.x, model.start.y,\r\n                model.end.x  , model.end.y, \r\n                model.dashLength\r\n            );\r\n        };\r\n        return this;\r\n    }\r\n\r\n \r\n};","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 矩现 类  （不规则）\r\n *\r\n *\r\n * 对应context的属性有\r\n * @width 宽度\r\n * @height 高度\r\n * @radius 如果是圆角的，则为【上右下左】顺序的圆角半径数组\r\n **/\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\n\r\nexport default class Rect extends Shape\r\n{\r\n    constructor(opt)\r\n    {\r\n        var _context = _.extend({\r\n            width : 0,\r\n            height: 0,\r\n            radius: [],\r\n        } , opt.context);\r\n        opt.context = _context;\r\n        opt.type = \"rect\";\r\n\r\n        super( opt );\r\n    }\r\n\r\n    watch(name, value, preValue) \r\n    {\r\n        if ( name == \"width\" || name == \"height\" || name == \"radius\" ) {\r\n            this.graphics.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 绘制圆角矩形\r\n     */\r\n    _buildRadiusPath( graphics )\r\n    {\r\n        var model = this.context.$model;\r\n        //左上、右上、右下、左下角的半径依次为r1、r2、r3、r4\r\n        //r缩写为1         相当于 [1, 1, 1, 1]\r\n        //r缩写为[1]       相当于 [1, 1, 1, 1]\r\n        //r缩写为[1, 2]    相当于 [1, 2, 1, 2]\r\n        //r缩写为[1, 2, 3] 相当于 [1, 2, 3, 2]\r\n        var x = 0;\r\n        var y = 0;\r\n        var width = model.width;\r\n        var height = model.height;\r\n    \r\n        var r = Utils.getCssOrderArr(model.radius);\r\n        var G = graphics;\r\n\r\n        var sy = 1;\r\n        if( height >= 0 ){\r\n            sy = -1;\r\n        }\r\n\r\n        G.moveTo( parseInt(x + r[0]), parseInt( height ));\r\n\r\n        G.lineTo( parseInt(x + width - r[1]), parseInt( height ));\r\n\r\n        r[1] !== 0 && G.quadraticCurveTo(\r\n            x + width, height, parseInt(x + width), parseInt(height + r[1]*sy)\r\n            );\r\n        G.lineTo( parseInt(x + width), parseInt(y - r[2]*sy));\r\n\r\n        r[2] !== 0 && G.quadraticCurveTo(\r\n            x + width, y, parseInt(x + width - r[2]), parseInt(y)\r\n            );\r\n        G.lineTo( parseInt(x + r[3]), parseInt(y));\r\n        r[3] !== 0 && G.quadraticCurveTo(\r\n            x, y, parseInt(x), parseInt(y - r[3]*sy)\r\n            );\r\n        G.lineTo( parseInt(x), parseInt(y + height + r[0]*sy));\r\n        r[0] !== 0 && G.quadraticCurveTo(\r\n            x, y+height, parseInt(x + r[0]), parseInt(y+height)\r\n            );\r\n    }\r\n\r\n    draw( graphics ) \r\n    {\r\n        var model = this.context.$model;\r\n        if(!model.radius.length) {\r\n            graphics.drawRect(0,0,model.width , model.height);\r\n        } else {\r\n            this._buildRadiusPath( graphics );\r\n        }\r\n        graphics.closePath();\r\n        return;\r\n    }\r\n}","/**\r\n * Canvax\r\n *\r\n * @author 释剑 (李涛, litao.lt@alibaba-inc.com)\r\n *\r\n * 扇形 类\r\n *\r\n * 坐标原点再圆心\r\n *\r\n * 对应context的属性有\r\n * @r0 默认为0，内圆半径指定后将出现内弧，同时扇边长度 = r - r0\r\n * @r  必须，外圆半径\r\n * @startAngle 起始角度(0, 360)\r\n * @endAngle   结束角度(0, 360)\r\n **/\r\nimport Shape from \"../display/Shape\";\r\nimport Utils from \"../utils/index\";\r\nimport {_} from \"mmvis\";\r\nimport myMath from \"../geom/Math\";\r\n\r\nexport default class Sector extends Shape\r\n{\r\n    constructor(opt)\r\n    {\r\n        var _context = _.extend({\r\n            pointList  : [],//边界点的集合,私有，从下面的属性计算的来\r\n            r0         : 0,// 默认为0，内圆半径指定后将出现内弧，同时扇边长度 = r - r0\r\n            r          : 0,//{number},  // 必须，外圆半径\r\n            startAngle : 0,//{number},  // 必须，起始角度[0, 360)\r\n            endAngle   : 0, //{number},  // 必须，结束角度(0, 360]\r\n            clockwise  : false //是否顺时针，默认为false(顺时针)\r\n        } , opt.context);\r\n        \r\n        opt.context = _context;\r\n        opt.regAngle = [];\r\n        opt.isRing = false;//是否为一个圆环\r\n        opt.type = \"sector\";\r\n\r\n        super(opt);\r\n    }\r\n\r\n    watch(name, value, preValue) \r\n    {\r\n        if ( name == \"r0\" || name == \"r\" || name == \"startAngle\" || name ==\"endAngle\" || name ==\"clockwise\" ) {\r\n            //因为这里的graphs不一样。\r\n            this.isRing = false;//是否为一个圆环，这里也要开始初始化一下\r\n            this.graphics.clear();\r\n        };\r\n    }\r\n \r\n    draw( graphics )\r\n    {\r\n        var model = this.context.$model;\r\n        // 形内半径[0,r)\r\n        var r0 = typeof model.r0 == 'undefined' ? 0 : model.r0;\r\n        var r  = model.r;                            // 扇形外半径(0,r]\r\n        var startAngle = myMath.degreeTo360(model.startAngle);          // 起始角度[0,360)\r\n        var endAngle   = myMath.degreeTo360(model.endAngle);              // 结束角度(0,360]\r\n\r\n        if( model.startAngle != model.endAngle && Math.abs(model.startAngle - model.endAngle) % 360 == 0 ) {\r\n        //if( startAngle == endAngle && model.startAngle != model.endAngle ) {\r\n            //如果两个角度相等，那么就认为是个圆环了\r\n            this.isRing = true;\r\n            startAngle  = 0 ;\r\n            endAngle    = 360;\r\n        }\r\n\r\n        startAngle = myMath.degreeToRadian(startAngle);\r\n        endAngle   = myMath.degreeToRadian(endAngle);\r\n     \r\n        //处理下极小夹角的情况\r\n        //if( endAngle - startAngle < 0.025 ){\r\n        //    startAngle -= 0.003\r\n        //}\r\n\r\n        var G = graphics;\r\n        //G.beginPath();\r\n        if( this.isRing ){\r\n            if( model.r0 == 0 ){\r\n                //圆\r\n                G.drawCircle(0, 0, model.r);\r\n            } else {\r\n                //圆环\r\n                if( model.fillStyle && model.fillAlpha ){\r\n                    G.beginPath();\r\n                    G.arc( 0 , 0 , r, startAngle, endAngle, model.clockwise);\r\n                    if( model.r0 == 0 ){\r\n                        G.lineTo( 0 , 0 );\r\n                    } else {\r\n                        G.arc( 0 , 0 , r0 , endAngle , startAngle , !model.clockwise);\r\n                    }\r\n                    G.closePath();\r\n                    G.currentPath.lineWidth = 0;\r\n                    G.currentPath.strokeStyle = null;\r\n                    G.currentPath.lineAlpha = 0;\r\n                    G.currentPath.line = false;\r\n                }\r\n                if( model.lineWidth && model.strokeStyle && model.lineAlpha ){\r\n                    G.beginPath()\r\n                    G.arc( 0 , 0 , r, startAngle, endAngle, model.clockwise);\r\n                    G.closePath();\r\n                    G.currentPath.fillStyle = null;\r\n                    G.currentPath.fill = false;\r\n\r\n                    G.beginPath()\r\n                    G.arc( 0 , 0 , r0 , endAngle , startAngle , !model.clockwise);\r\n                    G.closePath();\r\n                    G.currentPath.fillStyle = null;\r\n                    G.currentPath.fill = false;\r\n                }\r\n            }\r\n        } else {\r\n            //正常的扇形状\r\n            G.beginPath();\r\n            G.arc( 0 , 0 , r, startAngle, endAngle, model.clockwise);\r\n            if( model.r0 == 0 ){\r\n                G.lineTo( 0 , 0 );\r\n            } else {\r\n                G.arc( 0 , 0 , r0 , endAngle , startAngle , !model.clockwise);\r\n            }\r\n            G.closePath();\r\n        }\r\n        //G.closePath();\r\n     }\r\n\r\n}\r\n","\nimport Application from \"./Application\";\nimport DisplayObject from \"./display/DisplayObject\";\nimport DisplayObjectContainer from \"./display/DisplayObjectContainer\";\nimport Stage from \"./display/Stage\";\nimport Sprite from \"./display/Sprite\";\nimport Shape from \"./display/Shape\";\nimport Point from \"./display/Point\";\nimport Text from \"./display/Text\";\n\n//shapes\nimport BrokenLine from \"./shape/BrokenLine\";\nimport Circle from \"./shape/Circle\";\nimport Droplet from \"./shape/Droplet\";\nimport Ellipse from \"./shape/Ellipse\";\nimport Isogon from \"./shape/Isogon\";\nimport Line from \"./shape/Line\";\nimport Path from \"./shape/Path\";\nimport Polygon from \"./shape/Polygon\";\nimport Rect from \"./shape/Rect\";\nimport Sector from \"./shape/Sector\";\n\nimport AnimationFrame from \"./animation/AnimationFrame\"\n\nimport utils from \"./utils/index\"\n\nvar Canvax = {\n    App: Application\n};\n\nCanvax.Display = {\n    DisplayObject : DisplayObject,\n    DisplayObjectContainer : DisplayObjectContainer,\n    Stage  : Stage,\n    Sprite : Sprite,\n    Shape  : Shape,\n    Point  : Point,\n    Text   : Text\n}\n\nCanvax.Shapes = {\n    BrokenLine : BrokenLine,\n    Circle : Circle,\n    Droplet : Droplet,\n    Ellipse : Ellipse,\n    Isogon : Isogon,\n    Line : Line,\n    Path : Path,\n    Polygon : Polygon,\n    Rect : Rect,\n    Sector : Sector\n}\n\nCanvax.AnimationFrame = AnimationFrame;\n\nCanvax.utils = utils;\n\nexport default Canvax;","import Canvax from \"canvax\"\nimport { _ , dataFrame, $ , global , event } from \"mmvis\"\n\nconst _padding = 20;\n\n//为了能通过Chartx.Canvax 拿到渲染引擎\nglobal.Canvax = Canvax;\n\nexport default class Chart extends event.Dispatcher\n{\n    constructor( node, data, opt, componentModules )\n    {\n        super();\n\n        this.componentModules = componentModules;\n     \n        this._node = node;\n        this._data = data;\n        this._opt = opt;\n\n        this.dataFrame = this.initData( data , opt );\n\n        this.el = $.query(node) //chart 在页面里面的容器节点，也就是要把这个chart放在哪个节点里\n        this.width = parseInt(this.el.offsetWidth) //图表区域宽\n        this.height = parseInt(this.el.offsetHeight) //图表区域高\n\n        //legend如果在top，就会把图表的padding.top修改，减去legend的height\n        this.padding = null;\n\n        //Canvax实例\n\t\tthis.canvax = new Canvax.App({\n\t\t    el : this.el,\n\t\t    webGL : false\n\t\t});\n        this.canvax.registEvent();\n\n        this.id = \"chartx_\"+this.canvax.id;\n        this.el.setAttribute(\"chart_id\" , this.id);\n        this.el.setAttribute(\"chartx_version\", \"2.0\");\n\n        //设置stage ---------------------------------------------------------begin\n\t\tthis.stage = new Canvax.Display.Stage({\n\t\t    id: \"main-chart-stage\"\n\t\t});\n        this.canvax.addChild( this.stage );\n        //设置stage ---------------------------------------------------------end\n\n        //构件好coord 和 graphs 的根容器\n        this.setCoord_Graphs_Sp();\n\n        //这三类组件是优先级最高的组件，所有的组件的模块化和绘制，都要一次在这三个完成后实现\n        this.__highModules = [ \"theme\", \"coord\", \"graphs\" ];\n        //组件管理机制,所有的组件都绘制在这个地方\n        this.components = [];\n      \n        this.inited = false;\n    \n        this.init();\n    }\n\n    init()\n    {\n        var me = this;\n\n        //init全部用 this._opt\n        var opt = this._opt;\n\n        //padding数据也要重置为起始值\n        this.padding = this._getPadding();\n\n        //先依次init 处理 \"theme\", \"coord\", \"graphs\" 三个优先级最高的模块\n        _.each( this.__highModules, function( compName ){\n            if( !opt[compName] ) return;\n            var comps = _.flatten([ opt[compName] ]);\n\n            //them是一个数组的组件。so特殊处理\n            if( compName == \"theme\" ){\n                comps = [ comps ];\n            };\n            \n            _.each( comps, function( comp ){\n                if( //没有type的coord和没有field(or keyField)的graphs，都无效，不要创建该组件\n                    //关系图中是keyField\n                    (compName == \"coord\" && !comp.type ) || \n                    (compName == \"graphs\" && !comp.field && !comp.keyField  )\n                ) return; \n                var compModule = me.componentModules.get(compName, comp.type);\n                if( compModule ){\n                    var _comp = new compModule( comp, me );\n                    me.components.push( _comp );\n                };\n            } );\n        } );\n\n        //PS: theme 组件优先级最高，在registerComponents之前已经加载过\n        for( var _p in this._opt ){\n            //非coord graphs theme，其实后面也可以统一的\n            if( _.indexOf( this.__highModules, _p ) == -1 ){\n                var comps = this._opt[ _p ];\n                //所有的组件都按照数组方式处理，这里，组件里面就不需要再这样处理了\n                if( ! _.isArray( comps ) ){\n                    comps = [ comps ];\n                };\n                _.each( comps, function( comp ){\n                    var compModule = me.componentModules.get( _p, comp.type );\n                    if( compModule ){\n                        var _comp = new compModule( comp, me );\n                        me.components.push( _comp );\n                    }\n                } );\n            }\n        };\n    }\n\n    \n    draw(opt)\n    {\n        var me = this;\n        !opt && (opt ={});\n        var _coord = this.getComponent({name:'coord'});\n\n        if( _coord && _coord.horizontal ){\n            this._drawBeginHorizontal();\n        };\n\n        var width = this.width - this.padding.left - this.padding.right;\n        var height = this.height - this.padding.top - this.padding.bottom;\n        var origin = { x : this.padding.left,y : this.padding.top }\n\n        if( _coord ){\n            //先绘制好坐标系统\n            _coord.draw( opt );\n            width  = _coord.width;\n            height = _coord.height;\n            origin = _coord.origin;\n        };\n\n        if( this.dataFrame.length == 0 ){\n            //如果没有数据，不需要绘制graphs\n            me.fire(\"complete\");\n            return;\n        };\n    \n        var _graphs = this.getComponents({name:'graphs'});\n        var graphsCount = _graphs.length;\n        var completeNum = 0;\n\n        opt = _.extend( opt, {\n            width  : width,\n            height : height,\n            origin : origin\n        } );\n\n        _.each( _graphs, function( _g ){\n            _g.on( \"complete\", function(g) {\n                completeNum ++;\n                if( completeNum == graphsCount ){\n                    me.fire(\"complete\");\n                };\n                _g.inited = true;\n            });\n            _g.draw( opt );\n        } );\n\n        //绘制除开coord graphs 以外的所有组件\n        for( var i=0,l=this.components.length; i<l; i++ ){\n            var p = this.components[i];\n            if( _.indexOf( this.__highModules, p.name ) == -1 ){\n                p.draw();\n            };\n        };\n\n        this._bindEvent();\n\n        if( _coord && _coord.horizontal ){\n            this._drawEndHorizontal();\n        };\n\n    }\n\n    _drawBeginHorizontal()\n    {\n        //横向了之后， 要把4个padding值轮换一下\n        //top,right 对调 ， bottom,left 对调\n        var padding = this.padding;\n        \n        var num = padding.top;\n        padding.top = padding.right;\n        padding.right = padding.bottom;\n        padding.bottom = padding.left;\n        padding.left = num;\n\n    }\n \n\n    //绘制完毕后的横向处理\n    _drawEndHorizontal() \n    {\n        var ctx = this.graphsSprite.context;\n        ctx.x += ((this.width - this.height) / 2);\n        ctx.y += ((this.height - this.width) / 2);\n        ctx.rotation = 90;\n        ctx.rotateOrigin = { x : this.height/2, y : this.width/2 };\n        \n        this._horizontalGraphsText();\n    }\n\n    _horizontalGraphsText(){\n        var me = this;\n        function _horizontalText( el ){\n            \n            if( el.children ){\n                _.each( el.children, function( _el ){\n                    _horizontalText( _el );\n                } )\n            };\n            if( el.type == \"text\" && !el.__horizontal ){\n                \n                var ctx = el.context;\n                var w = ctx.width;\n                var h = ctx.height;\n\n                ctx.rotation = ctx.rotation - 90;\n\n                el.__horizontal = true;\n                \n            };\n        }\n\n        _.each(me.getComponents({name:'graphs'}), function( _graphs ) {\n            _horizontalText( _graphs.sprite );\n        });\n    }\n\n    _getPadding(){\n        \n        var paddingVal = _padding;\n        if( this._opt.coord && \"padding\" in this._opt.coord ){\n            if( !_.isObject(this._opt.coord.padding) ){\n                paddingVal = this._opt.coord.padding;\n            }\n        };\n        var paddingObj = {\n            top: paddingVal,\n            right: paddingVal,\n            bottom: paddingVal,\n            left: paddingVal\n        };\n        \n        if( this._opt.coord && \"padding\" in this._opt.coord ){\n            if( _.isObject(this._opt.coord.padding) ){\n                paddingObj = _.extend( paddingObj, this._opt.coord.padding )\n            }\n        };\n\n        return paddingObj;\n    }\n\n    //ind 如果有就获取对应索引的具体颜色值\n    getTheme( ind )\n    {\n        var colors = global.getGlobalTheme();\n        var _theme = this.getComponent({name:'theme'});\n        if( _theme ) {\n            colors = _theme.get();\n        };\n        if( ind != undefined ){\n            return colors[ ind % colors.length ] || \"#ccc\";\n        };\n        return colors;\n    }\n\n    setCoord_Graphs_Sp()\n    {\n        //坐标系存放的容器\n        this.coordSprite = new Canvax.Display.Sprite({\n            id: 'coordSprite'\n        });\n        this.stage.addChild( this.coordSprite );\n\n        //graphs管理\n        this.graphsSprite = new Canvax.Display.Sprite({\n            id: 'graphsSprite'\n        });\n        this.stage.addChild( this.graphsSprite );\n    }\n\n    /*\n     * chart的销毁\n     */\n    destroy() \n    {\n        this.clean();\n        if( this.el ){\n            this.el.removeAttribute(\"chart_id\");\n            this.el.removeAttribute(\"chartx_version\");\n            this.canvax.destroy();\n            this.el = null;\n        };\n        this._destroy && this._destroy();\n        this.fire(\"destroy\");\n    }\n\n    /*\n     * 清除整个图表\n     **/\n    clean()\n    {\n        //保留所有的stage，stage下面得元素全部 destroy 掉\n        for (var i=0,l=this.canvax.children.length;i<l;i++){\n            var stage = this.canvax.getChildAt(i);\n            for( var s = 0 , sl=stage.children.length ; s<sl ; s++){\n                stage.getChildAt(s).destroy();\n                s--;\n                sl--;\n            }\n        };\n\n        //因为上面的destroy把 this.coordSprite 和 this.graphsSprite 这两个预设的容器给destroy了\n        //所以要重新设置一遍准备好。\n        this.setCoord_Graphs_Sp();\n\n        this.components = []; //组件清空\n        this.canvax.domView.innerHTML = \"\";\n        \n    }\n\n    /**\n     * 容器的尺寸改变重新绘制\n     */\n    resize()\n    {\n        var _w = parseInt(this.el.offsetWidth);\n        var _h = parseInt(this.el.offsetHeight);\n        if( _w == this.width && _h == this.height ) return;\n        \n        this.width = _w;\n        this.height = _h;\n        this.canvax.resize();\n        this.inited = false;\n\n        this.clean();\n        this.init();\n        this.draw( {\n            resize : true\n        } );\n\n        this.inited = true;\n    }\n\n    /**\n     * reset 其实就是重新绘制整个图表，不再做详细的拆分opts中有哪些变化，来做对应的细致的变化，简单粗暴的全部重新创立\n     */\n    reset(opt, data)\n    {\n        !opt && (opt={});\n\n        _.extend(true, this._opt, opt);\n\n        if( data ) {\n            this._data = data;\n        };\n\n        this.dataFrame = this.initData( this._data, opt );\n\n        this.clean();\n        this.init();\n        this.draw();\n\n    }\n\n    /*\n     * 只响应数据的变化，不涉及配置变化\n     * \n     * @trigger 一般是触发这个data reset的一些场景数据，\n     * 比如如果是 datazoom 触发的， 就会有 trigger数据{ name:'datazoom', left:1,right:1 }\n     */\n    resetData(data , trigger)\n    {\n        var me = this;\n\n        var preDataLenth = this.dataFrame.length;\n        if( data ){\n            this._data = data;\n            this.dataFrame = this.initData( this._data );\n        };\n\n        if( !preDataLenth ){\n            //如果之前的数据为空， 那么我们应该这里就直接重绘吧\n            this.clean();\n            this.init();\n            this.draw( this._opt );\n            return;\n        };\n        \n        var _coord = this.getComponent({name:'coord'})\n\n        if( _coord ){\n            _coord.resetData( this.dataFrame , trigger);\n        };\n        _.each( this.getComponents({name:'graphs'}), function( _g ){\n            _g.resetData( me.dataFrame , trigger);\n        } );\n\n        this.componentsReset( trigger );\n\n        if( _coord && _coord.horizontal ){\n            this._horizontalGraphsText();\n        };\n\n        this.fire(\"resetData\");\n    }\n\n   \n    initData()\n    {\n        return dataFrame.apply(this, arguments);\n    }\n\n\n    componentsReset( trigger )\n    {\n        var me = this;\n        _.each(this.components , function( p , i ){\n            //theme coord graphs额外处理\n            if( _.indexOf( me.__highModules, p.name ) != -1 ){\n                return\n            };\n            if( trigger && trigger.comp && trigger.comp.__cid == p.__cid ){\n                //如果这次reset就是由自己触发的，那么自己这个components不需要reset，负责观察就好\n                return;\n            };\n            p.reset && p.reset( me[ p.type ] || {} , me.dataFrame);\n        });\n    }\n\n    getComponentById( id )\n    {\n        var comp;\n        _.each( this.components, function( c ){\n            if( c.id && c.id == id ){\n                comp = c;\n                return false;\n            }\n        } );\n        return comp;\n    }\n\n    getComponent( opt ){\n        return this.getComponents( opt )[0];\n    }\n\n    getComponents( opt, components ){\n        var arr = [];\n        var expCount = 0;\n        if( !components ){\n            components = this.components;\n        };\n\n        for( var p in opt ){\n            expCount++;\n        };\n\n        if( !expCount ){\n            return components;\n        };\n\n        _.each( components, function( comp ){\n            var i = 0;\n            for( var p in opt ){\n                if( JSON.stringify( comp[p] ) == JSON.stringify( opt[p] ) ){\n                    i++;\n                };\n            };\n            if( expCount == i ){\n                arr.push( comp );\n            };\n        } );\n        \n        return arr;\n    }\n    \n\n\n    //从graphs里面去根据opt做一一对比，比对成功为true\n    //count为要查询的数量， 如果为1，则\n    getGraph( opt ){\n        var graphs = this.getGraphs( opt );\n        return graphs[0];\n    }\n\n    getGraphs( opt ){\n        return this.getComponents( opt, this.getComponents({name:'graphs'}) );\n    }\n\n    //获取graphs根据id\n    getGraphById( id )\n    {\n        var _g;\n        _.each( this.getComponents({name:'graphs'}), function( g ){\n            if( g.id == id ){\n                _g = g;\n                return false;\n            }\n        } );\n        return _g;\n    }\n\n\n    //从coord里面去根据opt做一一对比，比对成功为true\n    //目前没有多个坐标系的图表，所以不需要 getCoords \n    getCoord( opt )\n    {\n        return this.getComponent(_.extend( true, {name:'coord'}, opt ));\n    }\n\n    //只有field为多组数据的时候才需要legend，给到legend组件来调用\n    getLegendData()\n    {\n        var me   = this;\n        var data = [];\n\n        //这里涌来兼容pie等的图例，其实后续可以考虑后面所有的graphs都提供一个getLegendData的方法\n        //那么就可以统一用这个方法， 下面的代码就可以去掉了\n        _.each( this.getComponents({name:'graphs'}), function( _g ){\n            _.each( _g.getLegendData(), function( item ){\n                \n                if( _.find( data , function( d ){\n                    return d.name == item.name\n                } ) ) return;\n\n                var legendItem = _.extend(true, {}, item);\n                legendItem.color = item.fillStyle || item.color || item.style;\n\n                data.push( legendItem )\n            } );\n        } );\n        if( data.length ){\n            return data;\n        };\n\n        //------------------------------------------------------------//\n\n        var _coord = me.getComponent({name:'coord'});\n        _.each( _.flatten( _coord.fieldsMap ) , function( map , i ){\n            //因为yAxis上面是可以单独自己配置field的，所以，这部分要过滤出 legend data\n            var isGraphsField = false;\n            _.each( me._opt.graphs, function( gopt ){\n                if( _.indexOf( _.flatten([ gopt.field ]), map.field ) > -1 ){\n                    isGraphsField = true;\n                    return false;\n                }\n            } );\n\n            if( isGraphsField ){\n                data.push( {\n                    enabled : map.enabled,\n                    name    : map.field,\n                    field   : map.field,\n                    ind     : map.ind,\n                    color   : map.color,\n                    yAxis   : map.yAxis\n                } );\n            }\n        });\n        \n        return data;\n    }\n\n    show( field , trigger )\n    {\n        var me = this;\n\n        var _coord = this.getComponent({name:'coord'});\n        _coord && _coord.show( field, trigger );\n\n        _.each( this.getComponents({name:'graphs'}), function( _g ){\n            _g.show( field , trigger);\n        } );\n        this.componentsReset( trigger );\n    }\n\n    hide( field , trigger)\n    {\n        var me = this;\n        var _coord = me.getComponent({name:'coord'});\n        _coord && _coord.hide( field ,trigger );\n        _.each( this.getComponents({name:'graphs'}), function( _g ){\n            _g.hide( field , trigger );\n        } );\n        this.componentsReset( trigger );\n    }\n\n\n    _bindEvent()\n    {\n        var me = this;\n        this.on(event.types.get() , function(e){\n            var _tips = me.getComponent({name:'tips'});\n            var _coord = me.getComponent({name:'coord'});\n            if( _tips ){\n                me._setTipsInfo.apply(me, [e]);\n                if( e.type == \"mouseover\" ){\n                    _tips.show(e);\n                    me._tipsPointerAtAllGraphs( e );\n                };\n                if( e.type == \"mousemove\" ){\n                    _tips.move(e);\n                    me._tipsPointerAtAllGraphs( e );\n                };\n                if( e.type == \"mouseout\" && !( e.toTarget && _coord && _coord.induce && _coord.induce.containsPoint( _coord.induce.globalToLocal(e.target.localToGlobal(e.point) )) ) ){\n                    _tips.hide(e);\n                    me._tipsPointerHideAtAllGraphs( e );\n                };\n            };\n\n            //触发每个graphs级别的事件，\n            if( e.eventInfo ){\n                _.each( this.getGraphs(), function( graph ){\n                    graph.triggerEvent( e );\n                } );\n            };\n        });\n\n    }\n\n\n    //默认的基本tipsinfo处理，极坐标和笛卡尔坐标系统会覆盖\n    _setTipsInfo(e)\n    {\n        if( !e.eventInfo ){\n            e.eventInfo = {};\n        };\n\n        var _coord = this.getComponent({name:'coord'});\n        if( _coord ){\n            e.eventInfo = _coord.getTipsInfoHandler(e);\n        };\n\n        //如果具体的e事件对象中有设置好了得 e.eventInfo.nodes，那么就不再遍历_graphs去取值\n        //比如鼠标移动到多柱子组合的具体某根bar上面，e.eventInfo.nodes = [ {bardata} ] 就有了这个bar的数据\n        //那么tips就只显示这个bardata的数据\n        if( !e.eventInfo.nodes || !e.eventInfo.nodes.length ){\n            var nodes = [];\n            var iNode = e.eventInfo.iNode;\n            _.each( this.getComponents({name:'graphs'}), function( _g ){\n                nodes = nodes.concat( _g.getNodesAt( iNode ) );\n            } );\n            e.eventInfo.nodes = nodes;\n        };\n       \n     }\n \n     //把这个point拿来给每一个graphs执行一次测试，给graphs上面的shape触发激活样式\n     _tipsPointerAtAllGraphs( e )\n     {\n         _.each( this.getComponents({name:'graphs'}), function( _g ){\n             _g.tipsPointerOf( e );\n         });\n     }\n \n     _tipsPointerHideAtAllGraphs( e )\n     {\n         _.each( this.getComponents({name:'graphs'}), function( _g ){\n             _g.tipsPointerHideOf( e );\n         });\n     }\n     \n}","import Canvax from \"canvax\"\nimport {event} from \"mmvis\"\n\nexport default class component extends event.Dispatcher\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.name = \"component\"; //组件名称\n        this.type = null; //组件子类型，比如 Graphs组件下面的bar,line,scat等\n\n        this.enabled = false; //是否加载该组件\n        this._opt = opt;\n        this.app = app; //这个组件挂在哪个app上面（图表）\n        \n        this.width = 0;\n        this.height = 0; //height 不包含margin\n        this.pos = {\n            x : 0,\n            y : 0\n        };\n        this.margin = {\n            top: 0, right: 0, bottom: 0, left: 0\n        };\n        this.__cid =  Canvax.utils.createId(\"comp_\");\n        \n    }\n\n    init( opt, data )\n    {\n              \n    }\n\n    draw()\n    {\n\n    }\n\n    //组件的销毁\n    destroy()\n    {\n\n    }\n\n    reset()\n    {\n        \n    }\n\n    setPosition( pos )\n    {\n        !pos && ( pos = this.pos );\n        pos.x && (this.sprite.context.x = pos.x);\n        pos.y && (this.sprite.context.y = pos.y);\n    }\n\n    layout()\n    {\n\n    }\n    \n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _,getDefaultProps } from \"mmvis\"\n\nexport default class coorBase extends Component\n{\n    static defaultProps = {\n        type : {\n            detail : '坐标系组件',\n            documentation : \"坐标系组件，可选值有'rect'（二维直角坐标系）,'polar'（二维极坐标系）,'box'（三维直角坐标系） \",\n            insertText    : \"type: \",\n            default       : \"\",\n            values        : [\"rect\",\"polar\",\"box\",\"polar3d\"]\n        },\n        _children  : {\n            rect  : {},\n            polar : {},\n            box   : {},\n            polar : {}\n        }\n    }\n\n\tconstructor(opt, app){\n        super(opt, app);\n        _.extend( true, this, getDefaultProps( new.target.defaultProps ) );\n        \n        this.name = \"coord\";\n\n        this._opt = opt;\n        this.app  = app;\n        this.dataFrame = this.app.dataFrame;\n\n        //这个width为坐标系的width，height， 不是 图表的width和height（图表的widht，height有padding等）\n        this.width  = 0;\n        this.height = 0;\n        this.origin = {\n            x : 0,\n            y : 0\n        };\n\n        this.sprite = new Canvax.Display.Sprite({\n            name : \"coord_\"+opt.type\n        });\n        this.app.coordSprite.addChild( this.sprite );\n        \n        /*\n        吧原始的field转换为对应结构的显示树\n        [\"uv\"] --> [\n            {field:'uv',enabled:true ,yAxis: yAxisleft }\n            ...\n        ]\n        */\n        this.fieldsMap = null;\n        this.induce = null;\n\n        this._axiss = [];//所有轴的集合\n    }\n    \n\n    //和原始field结构保持一致，但是对应的field换成 {field: , enabled:...}结构\n    setFieldsMap( axisExp )\n    {\n        var me = this;\n        var fieldInd = 0;\n\n        var axisType = axisExp.type || \"yAxis\";\n\n        var fieldsArr = [];\n        _.each( this.getAxiss( axisExp ), function( _axis ){\n            if( _axis.field ){\n                fieldsArr = fieldsArr.concat( _axis.field );\n            };\n        } );\n        \n        function _set( fields ){\n    \n            if( _.isString(fields) ){\n                fields = [fields];\n            };\n\n            var clone_fields = _.clone( fields );\n            for(var i = 0 , l=fields.length ; i<l ; i++) {\n                if( _.isString( fields[i] ) ){\n                    clone_fields[i] = {\n                        field   : fields[i],\n                        enabled : true,\n                        //yAxis : me.getAxis({type:'yAxis', field:fields[i] }),\n                        color   : me.app.getTheme(fieldInd),\n                        ind     : fieldInd++\n                    };\n                    clone_fields[i][ axisType ] = me.getAxis({type:axisType, field:fields[i] })\n                };\n                if( _.isArray( fields[i] ) ){\n                    clone_fields[i] = _set( fields[i], fieldInd );\n                };\n            };\n\n            return clone_fields;\n        };\n\n        return _set( fieldsArr );\n    }\n\n    //设置 fieldsMap 中对应field 的 enabled状态\n    setFieldEnabled( field )\n    {\n        var me = this;\n        function set( maps ){\n            _.each( maps , function( map , i ){\n                if( _.isArray( map ) ){\n                    set( map )\n                } else if( map.field && map.field == field ) {\n                    map.enabled = !map.enabled;\n                }\n            } );\n        }\n        set( me.fieldsMap );\n    }\n\n    getFieldMapOf( field )\n    {\n        var me = this;\n        var fieldMap = null;\n        function get( maps ){\n            _.each( maps , function( map , i ){\n                if( _.isArray( map ) ){\n                    get( map )\n                } else if( map.field && map.field == field ) {\n                    fieldMap = map;\n                    return false;\n                }\n            } );\n        }\n        get( me.fieldsMap );\n        return fieldMap;\n    }\n\n    //从 fieldsMap 中过滤筛选出来一个一一对应的 enabled为true的对象结构\n    //这个方法还必须要返回的数据里描述出来多y轴的结构。否则外面拿到数据后并不好处理那个数据对应哪个轴\n    getEnabledFieldsOf( axis )\n    {\n        \n        var enabledFields = [];\n        var axisType = axis ? axis.type : \"yAxis\";\n\n        _.each( this.fieldsMap, function( bamboo, b ){\n            if( _.isArray( bamboo ) ){\n                //多节竹子，堆叠\n\n                var fields = [];\n                \n                //设置完fields后，返回这个group属于left还是right的axis\n                _.each( bamboo, function( obj, v ){\n                    if( obj[ axisType ] === axis && obj.field && obj.enabled ){\n                        fields.push( obj.field );\n                    }\n                } );\n\n                fields.length && enabledFields.push( fields );\n\n            } else {\n                //单节棍\n                if( bamboo[ axisType ] === axis && bamboo.field && bamboo.enabled ){\n                    enabledFields.push( bamboo.field );\n                }\n            };\n        } );\n\n        return enabledFields;\n    }\n\n    //如果有传参数 fields 进来，那么就把这个指定的 fields 过滤掉 enabled==false的field\n    //只留下enabled的field 结构\n    filterEnabledFields( fields ){\n        var me = this;\n        var arr = [];\n        if( !_.isArray( fields ) ) fields = [ fields ];\n        _.each( fields, function( f ){\n            if( !_.isArray( f ) ){\n                if( me.getFieldMapOf(f).enabled ){\n                    arr.push( f );\n                }\n            } else {\n                //如果这个是个纵向数据，说明就是堆叠配置\n                var varr = [];\n                _.each( f, function( v_f ){\n                    if( me.getFieldMapOf( v_f ).enabled ){\n                        varr.push( v_f );\n                    }\n                } );\n                if( varr.length ){\n                    arr.push( varr )\n                }\n            }\n        } );\n        return arr;\n    }\n\n    getAxisDataFrame( fields )\n    {\n        return {\n            field : fields,\n            org : this.dataFrame.getDataOrg( fields , function( val ){\n                if( val === undefined || val === null || val == \"\" ){\n                    return val;\n                }\n                return (isNaN(Number( val )) ? val : Number( val ))\n            })\n        }\n    }\n\n    hide( field )\n    {\n        this.changeFieldEnabled( field );\n    }\n\n    show( field )\n    {\n        this.changeFieldEnabled( field );\n    }\n\n    getSizeAndOrigin()\n    {\n        return {\n            width : this.width,\n            height : this.height,\n            origin : this.origin\n        };\n    }\n\n    /**\n     * @param { opt.field  } field 用来查找对应的yAxis\n     * @param { opt.iNode  } iNode 用来查找对应的xaxis的value\n     * @param { opt.value {xval: yval:} }\n     */\n    getPoint( opt ){\n        \n    }\n\n    getAxisOriginPoint(exp){\n\n    }\n\n    getOriginPos(exp){\n\n    }\n    \n\n    //获取对应轴的接口\n    getAxis( opt ){\n        var axiss = this.getAxiss( opt );\n        return axiss[0];\n    }\n\n    getAxiss( opt ){\n\n        var arr = [];\n        var expCount = 0;\n        for( var p in opt ){\n            expCount++;\n        };\n\n        _.each( this._axiss, function( item ){\n            var i= 0;\n            for( var p in opt ){\n                if( p == 'field' ){\n                    //字段的判断条件不同\n                    var fs = _.flatten( [ item[p] ] );\n                    var expFs = _.flatten( [ opt[p] ] );\n\n                    var inFs = true;\n                    _.each( expFs, function( exp ){\n                        if( _.indexOf(fs, exp) == -1 ){\n                            //任何一个field不再fs内， 说明配对不成功\n                            inFs = false;\n                        }\n                    } );\n                    if( inFs ){\n                        i++\n                    };\n                } else {\n                    if( JSON.stringify( item[p] ) == JSON.stringify( opt[p] ) ){\n                        i++\n                    };\n                };\n            };\n            if( expCount == i ){\n                arr.push( item );\n            };\n        } );\n        \n        return arr;\n    }\n}","import { _ } from \"mmvis\"\n\n/**\n * 数字千分位加','号\n * @param  {[Number]} $n [数字]\n * @param  {[type]} $s [千分位上的符号]\n * @return {[String]}    [根据$s提供的值 对千分位进行分隔 并且小数点上自动加上'.'号  组合成字符串]\n */\nexport function numAddSymbol($n,$s)\n{\n    var s = Number($n);\n    var symbol = $s ? $s : ','\n    if( !s ){\n        return String($n);\n    };\n    if(s >= 1000){\n        var num = parseInt(s/1000);\n        return String($n.toString().replace( num , num + symbol ))\n    } else {\n        return String($n);\n    }   \n}\n\n//在一个数组中 返回比对$arr中的值离$n最近的值的索引\nexport function getDisMinATArr($n, $arr) {\n    var index = 0\n    var n = Math.abs($n - $arr[0])\n    for (var a = 1, al = $arr.length ; a < al; a++ ) {\n        if (n > Math.abs($n - $arr[a])) {\n            n = Math.abs($n - $arr[a])\n            index = a\n        }\n    }\n    return index\n}\n\n/**\n* 获取一个path路径\n* @param  {[Array]} $arr    [数组]\n* @return {[String]}        [path字符串]\n*/\nexport function getPath($arr){\n    var M = 'M', L = 'L', Z = 'z'\n    var s = '';\n    var start = {\n        x : 0,\n        y : 0\n    }\n    if( _.isArray( $arr[0] ) ){\n        start.x = $arr[0][0];\n        start.y = $arr[0][1];\n        s = M + $arr[0][0] + ' ' + $arr[0][1]\n    } else {\n        start = $arr[0];\n        s = M + $arr[0].x + ' ' + $arr[0].y\n    }\n    for(var a = 1,al = $arr.length; a < al ; a++){\n        var x = 0 , y = 0 , item = $arr[a]; \n        if( _.isArray( item ) ){\n            x = item[0];\n            y = item[1];\n        } else {\n            x = item.x;\n            y = item.y;\n        }\n        //s += ' ' + L + x + ' ' + y\n        if( x == start.x && y == start.y ){\n            s += ' ' + Z\n        } else {\n            s += ' ' + L + x + ' ' + y\n        }\n    }\n    \n    // s += ' ' + Z\n    return s\n}\n\n","import Canvax from \"canvax\"\nimport {numAddSymbol} from \"../../utils/tools\"\nimport {axis,_} from \"mmvis\"\n\nconst Line = Canvax.Shapes.Line;\n\nexport default class xAxis extends axis\n{\n    constructor(opt, data, _coord)\n    {\n        super(opt, data.org);\n\n        this.type = \"xAxis\";\n\n        this._opt = opt;\n\n        this._coord = _coord || {};\n\n        this.width = 0;\n        this.height = 0;\n\n        this.title  = {\n            text    : \"\",\n            shapeType  : \"text\",\n            fontColor  : '#999',\n            fontSize   : 12,\n            offset   : 2,\n            textAlign  : \"center\",\n            textBaseline : \"middle\",\n            strokeStyle : null,\n            lineHeight : 0\n        };\n        this._title = null; //this.title对应的文本对象\n    \n        this.enabled = true;\n        this.tickLine = {\n            enabled    : 1, //是否有刻度线\n            lineWidth  : 1, //线宽\n            lineLength : 4, //线长\n            offset   : 2,\n            strokeStyle: '#cccccc'\n        };\n        this.axisLine = {\n            position   : \"default\",//位置，default在align的位置（left，right），可选 \"center\" 和 具体的值\n            enabled    : 1, //是否有轴线\n            lineWidth  : 1,\n            strokeStyle: '#cccccc'\n        };\n        this.label = {\n            enabled    : 1,\n            fontColor  : '#999',\n            fontSize   : 12,\n            rotation   : 0,\n            format     : null,\n            offset   : 2,\n            textAlign  : \"center\",\n            lineHeight : 1,\n            evade      : true  //是否开启逃避检测，目前的逃避只是隐藏\n        };\n        if( opt.isH && (!opt.label || opt.label.rotaion === undefined) ){\n            //如果是横向直角坐标系图\n            this.label.rotation = 90;\n        };\n\n        this.pos = {\n            x: 0,\n            y: 0\n        };\n\n        this._formatTextSection = []; //dataSection的值format后一一对应的值\n        this._textElements = []; //_formatTextSection中每个文本对应的canvax.shape.Text对象\n\n        this.layoutData = []; //{x:100, value:'1000',visible:true}\n\n        this.sprite = null;\n\n        //过滤器，可以用来过滤哪些yaxis 的 节点是否显示已经颜色之类的\n        //@params params包括 dataSection , 索引index，txt(canvax element) ，line(canvax element) 等属性\n        this.filter = null; //function(params){}; \n\n        this.isH = false; //是否为横向转向的x轴\n\n        this.animation = true;\n\n        this.layoutType = \"rule\"; // rule（均分，起点在0） , peak（均分，起点在均分单位的中心）, proportion（实际数据真实位置，数据一定是number）\n\n        //如果用户有手动的 trimLayout ，那么就全部visible为true，然后调用用户自己的过滤程序\n        //trimLayout就事把arr种的每个元素的visible设置为true和false的过程\n        //function\n        this.trimLayout = null;\n\n        this.init(opt, data);\n\n        this._txts = [];\n        this._axisLine = null;\n    }\n\n    init(opt, data) \n    {\n        _.extend(true , this, opt);\n\n        this._initHandle();\n\n        this.sprite = new Canvax.Display.Sprite({\n            id: \"xAxisSprite_\"+new Date().getTime()\n        });\n        this.rulesSprite = new Canvax.Display.Sprite({\n            id: \"xRulesSprite_\"+new Date().getTime()\n        });\n        this.sprite.addChild( this.rulesSprite );\n\n    }\n\n    _initHandle()\n    {\n        var me = this;\n\n        //xAxis的field只有一个值\n        this.field = _.flatten( [ this.field ] )[0];\n\n        this.setDataSection();\n\n        me._formatTextSection = [];\n        me._textElements = [];\n        _.each( me.dataSection, function( val, i ){\n            me._formatTextSection[ i ] = me._getFormatText(val, i);\n            //从_formatTextSection中取出对应的格式化后的文本\n            var txt = new Canvax.Display.Text( me._formatTextSection[i] , {\n                context: {\n                    fontSize: me.label.fontSize\n                }\n            });\n            me._textElements[ i ] = txt;\n        });\n\n        if (this.label.rotation != 0 ) {\n            //如果是旋转的文本，那么以右边为旋转中心点\n            this.label.textAlign = \"right\";\n        };\n\n        this._getTitle();\n        this._setXAxisHeight();\n    }\n\n    draw(opt)\n    {\n        //首次渲染从 直角坐标系组件中会传入 opt,包含了width，origin等， 所有这个时候才能计算layoutData\n        opt && _.extend(true, this, opt);\n\n        this.setAxisLength( this.width );\n        \n        this._trimXAxis();\n\n        this._widget( opt );\n\n        this.setX(this.pos.x);\n        this.setY(this.pos.y);\n\n    }\n\n    //配置和数据变化\n    resetData( dataFrame )\n    {\n        this.field = dataFrame.field;\n        this.resetDataOrg( dataFrame.org );\n        this._initHandle( dataFrame );\n        this.draw();\n    }\n\n    setX($n)\n    {\n        this.sprite.context.x = $n;\n        this.pos.x = $n;\n    }\n\n    setY($n)\n    {\n        this.sprite.context.y = $n;\n        this.pos.y = $n;\n    }\n\n    _getTitle()\n    {\n        if ( this.title.text ) {\n            if( !this._title ){\n                this._title = new Canvax.Display.Text(this.title.text, {\n                    context: {\n                        fontSize: this.title.fontSize,\n                        textAlign: this.title.textAlign,  //\"center\",//this.isH ? \"center\" : \"left\",\n                        textBaseline: this.title.textBaseline,//\"middle\", //this.isH ? \"top\" : \"middle\",\n                        fillStyle: this.title.fontColor,\n                        strokeStyle: this.title.strokeStyle,\n                        lineWidth : this.title.lineWidth,\n                        rotation: this.isH ? -180 : 0\n                    }\n                });\n            } else {\n                this._title.resetText( this.title.text );\n            }\n        }\n    }\n\n    _setXAxisHeight()\n    { //检测下文字的高等\n        var me = this;\n        if (!me.enabled) {\n            me.height = 0; \n        } else {\n            var _maxTextHeight = 0;\n\n            if( this.label.enabled ){\n                _.each( me.dataSection, function( val, i ){\n\n                        //从_formatTextSection中取出对应的格式化后的文本\n                        var txt = me._textElements[i];\n            \n                        var textWidth = txt.getTextWidth();\n                        var textHeight = txt.getTextHeight();\n                        var width = textWidth; //文本在外接矩形width\n                        var height = textHeight;//文本在外接矩形height\n\n                        if (!!me.label.rotation) {\n                            //有设置旋转\n                            if ( me.label.rotation == 90 ) {\n                                width  = textHeight;\n                                height = textWidth;\n                            } else {\n                                var sinR = Math.sin(Math.abs(me.label.rotation) * Math.PI / 180);\n                                var cosR = Math.cos(Math.abs(me.label.rotation) * Math.PI / 180);\n                                height = parseInt( sinR * textWidth );\n                                width = parseInt( cosR * textWidth );\n                            };\n                        };\n\n                        _maxTextHeight = Math.max( _maxTextHeight, height);\n                    \n                } );\n            };\n\n            this.height = _maxTextHeight + this.tickLine.lineLength + this.tickLine.offset + this.label.offset;\n\n            if (this._title) {\n                this.height += this._title.getTextHeight()\n            };\n\n        }\n    }\n    \n    getNodeInfoOfX( x ){\n        \n        var ind = this.getIndexOfPos( x );\n        var val = this.getValOfInd( ind );//this.getValOfPos(x);//\n        var pos = this.getPosOf( {\n            ind : ind,\n            val : val\n        } );\n        var o = {\n            ind   : ind,\n            value : val,\n            text  : this._getFormatText( val, ind), //text是format后的数据\n            x     : pos, //这里不能直接用鼠标的x\n            field : this.field\n        };\n\n        return o;\n    }\n\n    _trimXAxis() \n    {\n        var tmpData = [];\n        var data = this.dataSection;\n\n        for (var a = 0, al  = data.length; a < al; a++ ) {\n            var text = this._formatTextSection[a];\n            var txt = this._textElements[a];\n            \n            var o = {\n                ind : a,\n                value   : data[a],\n                text    : text,\n                x       : this.getPosOf( {\n                    val : data[a],\n                    ind : a\n                } ),\n                textWidth: txt.getTextWidth(),\n                field : this.field,\n                visible: null //trimgrapsh的时候才设置\n            };\n\n            tmpData.push( o );\n        };\n        this.layoutData = tmpData;\n\n        this._trimLayoutData();\n\n        return tmpData;\n    }\n\n    _getFormatText( val )\n    {\n        var res = val;\n        if ( _.isFunction(this.label.format) ) {\n            res = this.label.format.apply( this, arguments );\n        };\n        if ( _.isNumber(res) && this.layoutType == \"proportion\"  ) {\n            res = numAddSymbol(res);\n        };\n        return res;\n    }\n\n    _widget( opt )\n    {\n        if( !this.enabled ) return;\n        !opt && (opt ={});\n\n        var me = this;\n        var arr = this.layoutData;\n        \n        if (this._title) {\n            this._title.context.y = this.height - this._title.getTextHeight() / 2;\n            this._title.context.x = this.width / 2;\n            this.sprite.addChild(this._title);\n        };\n\n        var delay = Math.min(1000 / arr.length, 25);\n\n        var labelVisibleInd = 0;\n        //var lineVisibleInd = 0;\n\n        for (var a = 0, al = arr.length; a < al; a++) {\n            var xNodeId = \"xNode\" + a;\n\n            var xNode = this.rulesSprite.getChildById(xNodeId) \n            if( !xNode ){\n                xNode = new Canvax.Display.Sprite({\n                    id: xNodeId\n                });\n                this.rulesSprite.addChild(xNode);\n            };\n\n            var o = arr[a]\n            var x = o.x,\n                y = this.tickLine.lineLength + this.tickLine.offset + this.label.offset;\n\n        \n            if ( this.label.enabled ){\n                if( !!arr[a].visible ){\n                    \n                    //文字\n                    var textContext = {\n                        x: o._text_x || o.x,\n                        y: y + 20,\n                        fillStyle    : this.label.fontColor,\n                        fontSize     : this.label.fontSize,\n                        rotation     : -Math.abs(this.label.rotation),\n                        textAlign    : this.label.textAlign,\n                        lineHeight   : this.label.lineHeight,\n                        textBaseline : !!this.label.rotation ? \"middle\" : \"top\",\n                        globalAlpha  : 0\n                    };\n\n                    if (!!this.label.rotation && this.label.rotation != 90) {\n                        textContext.x += 5;\n                        textContext.y += 3;\n                    };\n\n                    if( labelVisibleInd < me._txts.length ){\n                        //_.extend( xNode._txt.context , textContext );\n                        xNode._txt = me._txts[ labelVisibleInd ]\n                        xNode._txt.resetText( o.text+\"\" );\n                        if( this.animation ){\n                            xNode._txt.animate( {\n                                x : textContext.x\n                            } , {\n                                duration : 300\n                            });\n                        } else {\n                            xNode._txt.context.x = textContext.x\n                        }\n\n                    } else {\n\n                        xNode._txt = new Canvax.Display.Text(o.text, {\n                            id: \"xAxis_txt_\" + a,\n                            context: textContext\n                        });\n                        xNode.addChild( xNode._txt );\n                        me._txts.push( xNode._txt );\n\n                        //新建的 txt的 动画方式\n                        if (this.animation && !opt.resize) {\n                            xNode._txt.animate({\n                                globalAlpha: 1,\n                                y: xNode._txt.context.y - 20\n                            }, {\n                                duration: 500,\n                                easing: 'Back.Out', //Tween.Easing.Elastic.InOut\n                                delay: a * delay,\n                                id: xNode._txt.id\n                            });\n                        } else {\n                            xNode._txt.context.y = xNode._txt.context.y - 20;\n                            xNode._txt.context.globalAlpha = 1;\n                        };\n                    };\n\n                    labelVisibleInd++;\n                } \n                //xNode._txt.context.visible = !!arr[a].visible;\n            };\n            \n\n            if ( this.tickLine.enabled ) {\n                if( !!arr[a].visible ){\n                    var lineContext = {\n                        x: x,\n                        y: this.tickLine.offset,\n                        end : {\n                            x : 0,\n                            y : this.tickLine.lineLength\n                        },\n                        lineWidth: this.tickLine.lineWidth,\n                        strokeStyle: this.tickLine.strokeStyle\n                    };\n                    if( xNode._line ){\n                        //_.extend( xNode._txt.context , textContext );\n                        if( this.animation ){\n                            xNode._line.animate({\n                                x : lineContext.x\n                            } , {\n                                duration : 300\n                            })\n                        } else {\n                            xNode._line.context.x = lineContext.x;\n                        };\n                    } else {\n                        xNode._line = new Line({\n                            context: lineContext\n                        });\n                        xNode.addChild(xNode._line);\n                    }\n                } else {\n                    if( xNode._line ){\n                        xNode._line.destroy();\n                        xNode._line = null;\n                    }\n                }\n            };\n\n            //这里可以由用户来自定义过滤 来 决定 该node的样式\n            _.isFunction(this.filter) && this.filter({\n                layoutData: arr,\n                index: a,\n                txt: xNode._txt,\n                line: xNode._line || null\n            });\n            \n        };\n\n        //_txts还有多的，就要干掉\n        if( me._txts.length > labelVisibleInd ){\n            for( var i= labelVisibleInd; i<me._txts.length; i++){\n                me._txts.splice( i-- , 1 )[0].destroy();\n            }\n        };\n\n        //把sprite.children中多余的给remove掉\n        if( this.rulesSprite.children.length > arr.length ){\n            for( var al = arr.length,pl = this.rulesSprite.children.length;al<pl;al++  ){\n                this.rulesSprite.getChildAt( al ).remove();\n                al--,pl--;\n            };\n        };\n\n        //轴线\n        if( this.axisLine.enabled ){\n            var _axisLine = new Line({\n                context : {\n                    start : {\n                        x : 0,\n                        y : 0\n                    },\n                    end   : {\n                        x : this.width,\n                        y : 0\n                    },\n                    lineWidth   : this.axisLine.lineWidth,\n                    strokeStyle : this.axisLine.strokeStyle\n                }\n            });\n            this.sprite.addChild( _axisLine );\n            this._axisLine = _axisLine;\n        }\n\n    }\n\n \n\n    _trimLayoutData()\n    {\n        var me = this;\n        var arr = this.layoutData;\n        var l = arr.length;\n\n        if( !this.enabled || !l ) return;\n\n        // rule , peak, proportion\n        if( me.layoutType == \"proportion\" ){\n            this._checkOver();\n        };\n        if( me.layoutType == \"peak\" ){\n            //TODO: peak暂时沿用 _checkOver ，这是保险的万无一失的。\n            this._checkOver();\n        };\n        if( me.layoutType == \"rule\" ){\n            this._checkOver();\n        };\n\n    }\n\n    _getRootPR()\n    {\n        //找到paddingRight,在最后一个文本右移的时候需要用到\n        var rootPaddingRight = 0;\n        if( this._coord.app ){\n            rootPaddingRight = this._coord.app.padding.right;\n        };\n        return rootPaddingRight;\n    }\n\n    _checkOver()\n    {\n        var me = this;\n        var arr = me.layoutData;\n\n        //现在的柱状图的自定义datasection有缺陷\n        if( me.trimLayout ){\n            //如果用户有手动的 trimLayout ，那么就全部visible为true，然后调用用户自己的过滤程序\n            //trimLayout就事把arr种的每个元素的visible设置为true和false的过程\n            me.trimLayout( arr );\n            return;\n        };\n\n        //如果用户设置不想要做重叠检测\n        if( !this.label.evade ){\n            _.each( arr , function( layoutItem ){\n                layoutItem.visible = true;\n            } );\n            return;\n        };\n\n        var l = arr.length;  \n        var textAlign = me.label.textAlign;              \n\n        function checkOver(i){\n            var curr = arr[i];\n            \n            if( curr === undefined ){\n                return;\n            };\n            curr.visible = true;\n\n            for( var ii=i; ii<l-1; ii++ ){\n                var next = arr[ii+1];\n\n                var nextWidth = next.textWidth;\n                var currWidth = curr.textWidth;\n\n                //如果有设置rotation，那么就固定一个最佳可视单位width为35  暂定\n                if(!!me.label.rotation){\n                    nextWidth = Math.min( nextWidth, 22 );\n                    currWidth = Math.min( currWidth, 22 );\n                };\n                \n                //默认left\n                var next_left_x = next.x; //下个节点的起始\n                var curr_right_x = curr.x+currWidth; //当前节点的终点\n\n                if( textAlign == \"center\" ){\n                    next_left_x = next.x - nextWidth/2;\n                    curr_right_x = curr.x+currWidth/2;\n                };\n                if( textAlign  == \"right\" ){\n                    next_left_x = next.x - nextWidth;\n                    curr_right_x = curr.x;\n                };\n\n                if( ii == l-2 ){\n                    //next是最后一个\n                    if( textAlign == \"center\" && (next.x+nextWidth/2) > me.width ){\n                        next_left_x = me.width - nextWidth;\n                        next._text_x = me.width - nextWidth/2;\n                    }\n                    if( textAlign == \"left\" && (next.x+nextWidth) > me.width ){\n                        next_left_x = me.width - nextWidth;\n                        next._text_x = me.width - nextWidth;\n                    }\n                }\n\n                //重叠，容许2px的误差\n                if( next_left_x - curr_right_x < -2 ){\n                    if( ii == l-2 ){\n                        //最后一个的话，反把前面的给hide\n                        next.visible = true;\n                        curr.visible = false;\n                        return;\n                    } else {\n                        next.visible = false;\n                    }\n                } else {\n                    checkOver( ii+1 );\n                    break;\n                }\n            };\n        };\n\n        checkOver(0);\n    }\n}","import Canvax from \"canvax\"\nimport {numAddSymbol} from \"../../utils/tools\"\nimport {axis,_} from \"mmvis\"\n\nconst Line = Canvax.Shapes.Line;\n\nexport default class yAxis extends axis\n{\n\tconstructor( opt, data, _coord){\n\n        super(opt, data.org);\n\n        this.type = \"yAxis\";\n\n        this._opt = opt;\n        \n        this.width       = null; //第一次计算后就会有值\n        this.yMaxHeight  = 0;//y轴最大高\n        this.height      = 0;//y轴第一条线到原点的高\n\n        this.maxW        = 0;//最大文本的 width\n        this.field       = [];//这个 轴 上面的 field 不需要主动配置。可以从graphs中拿\n\n        this.title       = {\n            text         : \"\",\n            shapeType    : \"text\",\n            fontColor    : '#999',\n            fontSize     : 12,\n            offset       : 2,\n            textAlign    : \"center\",\n            textBaseline : \"middle\",\n            strokeStyle  : null,\n            lineHeight   : 0\n        };\n        this._title      = null;//this.label对应的文本对象\n\n        this.enabled     = true;\n        this.tickLine    = {//刻度线\n            enabled      : 1,\n            lineWidth    : 1,//线宽\n            lineLength   : 4,//线长\n            strokeStyle  : '#cccccc',\n            distance     : 2\n        };\n        this.axisLine    = {//轴线\n            position     : \"default\",//位置，default默认在min，可选 \"center\" 和 具体的值\n            enabled      : 1,     \n            lineWidth    : 1,\n            strokeStyle  : '#cccccc'\n        };\n        this.label       = {\n            enabled      : 1,\n            fontColor    : '#999',\n            fontSize     : 12,\n            format       : null,\n            rotation     : 0,\n            distance     : 3,//和刻度线的距离,\n            textAlign    : null,//\"right\",\n            lineHeight   : 1\n        };\n        \n        if( opt.isH && (!opt.label || opt.label.rotaion === undefined) ){\n            //如果是横向直角坐标系图\n            this.label.rotation = 90;\n        };\n\n        this.pos = {\n            x: 0,\n            y: 0\n        };\n        this.align = \"left\"; //yAxis轴默认是再左边，但是再双轴的情况下，可能会right\n        \n        this.layoutData = []; //dataSection 对应的layout数据{y:-100, value:'1000'}\n\n        this.sprite = null;\n\n        //过滤器，可以用来过滤哪些yaxis 的 节点是否显示已经颜色之类的\n        //@params params包括 dataSection , 索引index，txt(canvax element) ，line(canvax element) 等属性\n        this.filter = null; //function(params){}; \n\n        this.isH = false; //是否横向\n\n        this.animation = true;\n\n        this.layoutType = \"proportion\"; //rule , peak, proportion\n\n        this._axisLine = null;\n\n        this.init(opt, data );\n        \n    }\n\n    init(opt, data )\n    {\n        _.extend(true , this, opt);\n\n        this._initHandle();\n\n        this.sprite = new Canvax.Display.Sprite({\n            id: \"yAxisSprite_\"+new Date().getTime()\n        });\n        this.rulesSprite = new Canvax.Display.Sprite({\n            id: \"yRulesSprite_\"+new Date().getTime()\n        });\n        this.sprite.addChild( this.rulesSprite );\n    }\n\n    _initHandle(){\n        //extend会设置好this.field\n        //先要矫正子啊field确保一定是个array\n        if( !_.isArray(this.field) ){\n            this.field = [this.field];\n        };\n        this.setDataSection();\n        this._getTitle();\n        this._setYaxisWidth();\n    }\n\n    /**\n     * \n     * opt  pos,yMaxHeight,resize\n     */\n    draw(opt)\n    {\n        _.extend(true, this, (opt || {} ));\n\n        this.height = parseInt( this.yMaxHeight - this._getYAxisDisLine() );\n    \n        this.setAxisLength( this.height );\n\n        this.sprite.cleanAnimates();\n\n        this._trimYAxis();\n        this._widget( opt );\n\n        this.setX(this.pos.x);\n        this.setY(this.pos.y);\n        \n    }\n\n    //配置和数据变化\n    resetData( dataFrame )\n    {\n        this.field = dataFrame.field;\n        this.resetDataOrg( dataFrame.org );\n        this._initHandle();\n        this.draw();\n    }\n\n    setX($n)\n    {\n        this.sprite.context.x = $n;\n        this.pos.x = $n;\n    }\n\n    setY($n)\n    {\n        this.sprite.context.y = $n;\n        this.pos.y = $n;\n    }\n\n    //目前和xAxis一样\n    _getTitle()\n    {\n        if ( this.title.text ) {\n            if( !this._title ){\n                var rotation = 0;\n                if( this.align == \"left\" ){\n                    rotation = -90;\n                } else {\n                    rotation = 90;\n                    if( this.isH ){\n                        rotation = 270;\n                    }\n                };\n                this._title = new Canvax.Display.Text(this.title.text, {\n                    context: {\n                        fontSize: this.title.fontSize,\n                        textAlign: this.title.textAlign,  //\"center\",//this.isH ? \"center\" : \"left\",\n                        textBaseline: this.title.textBaseline,//\"middle\", //this.isH ? \"top\" : \"middle\",\n                        fillStyle: this.title.fontColor,\n                        strokeStyle: this.title.strokeStyle,\n                        lineWidth : this.title.lineWidth,\n                        rotation: rotation\n                    }\n                });\n            } else {\n                this._title.resetText( this.title.text );\n            }\n        }\n    }\n\n    _setYaxisWidth(){\n        //待实现\n    }\n\n\n    _trimYAxis()\n    {\n        var me = this;\n        var tmpData = [];\n        \n        for (var i = 0, l = this.dataSection.length; i < l; i++) {\n            \n            var layoutData = {\n                value   : this.dataSection[ i ],\n                y       : -Math.abs( this.getPosOf( {\n                    val : this.dataSection[ i ],\n                    ind : i\n                } ) ),\n                visible : true,\n                text    : \"\"\n            };\n\n            //把format提前\n            var text = layoutData.value;\n            if (_.isFunction(me.label.format)) {\n                text = me.label.format.apply(this, [text, i ]);\n            };\n            if( (text === undefined || text === null) && me.layoutType == \"proportion\" ){\n                text = numAddSymbol( layoutData.value );\n            };  \n            layoutData.text = text;\n\n            tmpData.push( layoutData );\n\n        }\n\n        var _preShowInd = 0;\n        for (var a = 0, al = tmpData.length; a < al; a++) {\n            if( a == 0 ) continue;\n\n            if( _preShowInd == 0 ){\n                if( tmpData[a].text == tmpData[ _preShowInd ].text ){\n                    //如果后面的format后的数据和前面的节点的format后数据相同\n                    tmpData[a].visible = false;\n                } else {\n                    _preShowInd = a;\n                }\n            } else {\n                if( tmpData[a].text == tmpData[ _preShowInd ].text ){\n                    tmpData[_preShowInd].visible = false;\n                    \n                }\n                _preShowInd = a;\n            }\n        };\n\n        //TODO: 最后的问题就是dataSection中得每个只如果format后都相同的话，就会出现最上面最下面两个一样得刻度\n        this.layoutData = tmpData;\n    }\n\n    _getYAxisDisLine() \n    { //获取y轴顶高到第一条线之间的距离         \n        var disMin = 0\n        var disMax = 2 * disMin\n        var dis = disMin\n        dis = disMin + this.yMaxHeight % this.dataSection.length;\n        dis = dis > disMax ? disMax : dis\n        return dis\n    }\n\n    resetWidth(width)\n    {\n        var me = this;\n        me.width = width;\n        if( me.align == \"left\" ){\n            me.rulesSprite.context.x = me.width;\n        }\n    }\n\n    _widget( opt )\n    {\n        var me = this;\n        !opt && (opt ={});\n        if (!me.enabled) {\n            me.width = 0;\n            return;\n        };\n        \n        var arr = this.layoutData;\n        me.maxW = 0;\n\n        for (var a = 0, al = arr.length; a < al; a++) {\n            var o = arr[a];\n            if( !o.visible ){\n                continue;\n            };\n            var y = o.y;\n\n            var value = o.value;\n\n            var textAlign = me.label.textAlign || (me.align == \"left\" ? \"right\" : \"left\");\n \n            var posy = y + (a == 0 ? -3 : 0) + (a == arr.length - 1 ? 3 : 0);\n            //为横向图表把y轴反转后的 逻辑\n            if (me.label.rotation == 90 || me.label.rotation == -90) {\n                textAlign = \"center\";\n                if (a == arr.length - 1) {\n                    posy = y - 2;\n                    textAlign = \"right\";\n                }\n                if (a == 0) {\n                    posy = y;\n                }\n            };\n\n            var yNode = this.rulesSprite.getChildAt(a);\n\n            if( yNode ){\n                if( yNode._txt && this.label.enabled ){\n\n                    if (me.animation && !opt.resize) {\n                        yNode._txt.animate({\n                            y: posy,\n                            globalAlpha : 1\n                        }, {\n                            duration: 500,\n                            delay: a*80,\n                            id: yNode._txt.id\n                        });\n                    } else {\n                        yNode._txt.context.y = posy;\n                    };\n                    \n                    yNode._txt.resetText( o.text );\n                };\n\n                if( yNode._tickLine && this.tickLine.enabled ){\n                    if (me.animation && !opt.resize) {\n                        yNode._tickLine.animate({\n                            y: y\n                        }, {\n                            duration: 500,\n                            delay: a*80,\n                            id: yNode._tickLine.id\n                        });\n                    } else {\n                        yNode._tickLine.context.y = y;\n                    }\n                };\n            } else {\n                yNode = new Canvax.Display.Sprite({\n                    id: \"yNode\" + a\n                });\n\n                var aniFrom = 20;\n                if( o.value == me.origin ){\n                    aniFrom = 0;\n                };\n\n                if( o.value < me.origin ){\n                    aniFrom = -20;\n                };\n\n                var lineX = 0\n                if (me.tickLine.enabled) {\n                    //线条\n                    lineX = me.align == \"left\" ? - me.tickLine.lineLength - me.tickLine.distance : me.tickLine.distance;\n                    var line = new Line({\n                        context: {\n                            x: lineX ,\n                            y: y,\n                            end : {\n                                x : me.tickLine.lineLength,\n                                y : 0\n                            },\n                            lineWidth: me.tickLine.lineWidth,\n                            strokeStyle: me._getStyle(me.tickLine.strokeStyle)\n                        }\n                    });\n                    yNode.addChild(line);\n                    yNode._tickLine = line;\n                };\n\n                //文字\n                if( me.label.enabled ){\n                    var txtX = me.align == \"left\" ? lineX - me.label.distance : lineX + me.tickLine.lineLength + me.label.distance;\n                    if( this.isH ){\n                        txtX = txtX + (me.align == \"left\"?-1:1)* 4\n                    };\n                    var txt = new Canvax.Display.Text( o.text , {\n                        id: \"yAxis_txt_\" + me.align + \"_\" + a,\n                        context: {\n                            x: txtX,\n                            y: posy + aniFrom,\n                            fillStyle: me._getStyle(me.label.fontColor),\n                            fontSize: me.label.fontSize,\n                            rotation: -Math.abs(me.label.rotation),\n                            textAlign: textAlign,\n                            textBaseline: \"middle\",\n                            lineHeight  : me.label.lineHeight,\n                            globalAlpha: 0\n                        }\n                    });\n                    yNode.addChild(txt);\n                    yNode._txt = txt;\n\n                    \n                    if (me.label.rotation == 90 || me.label.rotation == -90) {\n                        me.maxW = Math.max(me.maxW, txt.getTextHeight());\n                    } else {\n                        me.maxW = Math.max(me.maxW, txt.getTextWidth());\n                    };\n\n                    //这里可以由用户来自定义过滤 来 决定 该node的样式\n                    _.isFunction(me.filter) && me.filter({\n                        layoutData: me.layoutData,\n                        index: a,\n                        txt: txt,\n                        line: line\n                    });\n\n                    me.rulesSprite.addChild(yNode);\n\n            \n                    if (me.animation && !opt.resize) {\n                        txt.animate({\n                            globalAlpha: 1,\n                            y: txt.context.y - aniFrom\n                        }, {\n                            duration: 500,\n                            easing: 'Back.Out', //Tween.Easing.Elastic.InOut\n                            delay: (a+1) * 80,\n                            id: txt.id\n                        });\n                    } else {\n                        txt.context.y = txt.context.y - aniFrom;\n                        txt.context.globalAlpha = 1;\n                    }\n                };\n            }\n        };\n\n        //把 rulesSprite.children中多余的给remove掉\n        if( me.rulesSprite.children.length > arr.length ){\n            for( var al = arr.length,pl = me.rulesSprite.children.length;al<pl;al++  ){\n                me.rulesSprite.getChildAt( al ).remove();\n                al--,pl--;\n            };\n        };\n\n        if( me.width === null ){\n            me.width = parseInt( me.maxW + me.label.distance  );\n            if (me.tickLine.enabled) {\n                me.width += parseInt( me.tickLine.lineLength + me.tickLine.distance );\n            }\n            if ( me._title ){\n                me.width += me._title.getTextHeight();\n            }\n        }\n\n        var _originX = 0;\n        if( me.align == \"left\" ){\n            me.rulesSprite.context.x = me.width;\n            _originX = me.width;\n        }\n\n        //轴线\n        if( me.axisLine.enabled ){\n            var _axisLine = new Line({\n                context : {\n                    start : {\n                        x : _originX,\n                        y : 0\n                    },\n                    end   : {\n                        x : _originX,\n                        y : -me.height\n                    },\n                    lineWidth   : me.axisLine.lineWidth,\n                    strokeStyle : me._getStyle(me.axisLine.strokeStyle)\n                }\n            });\n            this.sprite.addChild( _axisLine );\n            this._axisLine = _axisLine;\n        }\n\n        if (this._title) {\n            this._title.context.y = -this.height/2;\n            this._title.context.x = this._title.getTextHeight() / 2;\n            if( this.align == \"right\" ){\n                this._title.context.x = this.width - this._title.getTextHeight() / 2;\n            };\n            this.sprite.addChild(this._title);\n        };\n    }\n\n\n    _getStyle(s)\n    {\n        var res = s;\n        if (_.isFunction(s)) {\n            res = s.call( this , this );\n        };\n        if( !s ){\n            res = \"#999\";\n        };\n        return res\n    }\n}","import Canvax from \"canvax\"\nimport { _, event } from \"mmvis\"\n\nconst Line = Canvax.Shapes.Line;\nconst Rect = Canvax.Shapes.Rect;\n\nexport default class descartesGrid extends event.Dispatcher\n{\n    constructor( opt, app )\n    {\n        super( opt, app);\n\n        this.width  = 0;   \n        this.height = 0;\n        this.app   = app; //该组件被添加到的目标图表项目，\n\n        this.pos    = {\n            x : 0,\n            y : 0\n        };\n\n        this.enabled = 1;\n\n        this.xDirection = {                                //x方向上的线\n            shapeType   : \"line\",\n            enabled     : 1,\n            data        : [],                      //[{y:100},{}]\n            lineType    : 'solid',                //线条类型(dashed = 虚线 | '' = 实线)\n            lineWidth   : 1,\n            strokeStyle : '#f0f0f0', //'#e5e5e5',\n            filter      : null \n        };\n        this.yDirection = {                                //y方向上的线\n            shapeType   : \"line\",\n            enabled     : 0,\n            data        : [],                      //[{x:100},{}]\n            lineType    : 'solid',                      //线条类型(dashed = 虚线 | '' = 实线)\n            lineWidth   : 1,\n            strokeStyle : '#f0f0f0',//'#e5e5e5',\n            filter      : null\n        };\n        \n        this.fill = {\n            enabled : true,\n            fillStyle : null,\n            alpha : null\n        };\n\n        this.sprite       = null;                       //总的sprite\n        this.xAxisSp      = null;                       //x轴上的线集合\n        this.yAxisSp      = null;                       //y轴上的线集合\n\n        this.init(opt);\n    }\n\n    init(opt)\n    {\n        _.extend(true, this , opt); \n        this.sprite = new Canvax.Display.Sprite();\n    }\n\n    setX($n)\n    {\n        this.sprite.context.x = $n\n    }\n\n    setY($n)\n    {\n        this.sprite.context.y = $n\n    }\n\n    draw(opt)\n    {\n        _.extend(true, this , opt );\n        //this._configData(opt);\n        this._widget();\n        this.setX(this.pos.x);\n        this.setY(this.pos.y);\n    }\n\n    clean()\n    {\n        this.sprite.removeAllChildren();\n    }\n\n    reset( opt )\n    {\n        this.sprite.removeAllChildren();\n        this.draw( opt );\n    }\n\n    _widget()\n    {\n        \n        var self  = this;\n        if(!this.enabled){\n            return\n        };\n\n        var _yAxis = self.app._yAxis[ 0 ];\n        \n        if( self.fill.enabled && self.app && _yAxis && _yAxis.dataSectionGroup && _yAxis.dataSectionGroup.length>1 ){\n            self.yGroupSp  = new Canvax.Display.Sprite(),  self.sprite.addChild(self.yGroupSp);\n            for( var g = 0 , gl=_yAxis.dataSectionGroup.length ; g < gl ; g++ ){\n                var yGroupHeight = _yAxis.height / gl ;\n                var groupRect = new Rect({\n                    context : {\n                        x : 0,\n                        y : -yGroupHeight * g,\n                        width : self.width,\n                        height : -yGroupHeight,\n                        fillStyle : self.fill.fillStyle || \"#000\",\n                        fillAlpha : self.fill.alpha || 0.025 * (g%2)\n                    }\n                });\n                \n                self.yGroupSp.addChild( groupRect );\n            };\n        };\n\n        self.xAxisSp   = new Canvax.Display.Sprite(),  self.sprite.addChild(self.xAxisSp);\n        self.yAxisSp   = new Canvax.Display.Sprite(),  self.sprite.addChild(self.yAxisSp);\n        \n        //x轴方向的线集合\n        var arr = self.xDirection.data;\n        for(var a = 0, al = arr.length; a < al; a++){\n            var o = arr[a];\n          \n            var line = new Line({\n                id : \"back_line_\"+a,\n                context : {\n                    y : o.y,\n                    lineType    : self.xDirection.lineType,\n                    lineWidth   : self.xDirection.lineWidth,\n                    strokeStyle : self.xDirection.strokeStyle  \n                }\n            });\n            if(self.xDirection.enabled){\n                _.isFunction( self.xDirection.filter ) && self.xDirection.filter.apply( line , [{\n                    layoutData : self.yDirection.data,\n                    index      : a,\n                    line       : line\n                } , self]);\n\n                self.xAxisSp.addChild(line);\n    \n                line.context.start.x = 0;\n                line.context.end.x = self.width;\n                \n            };\n        };\n\n        //y轴方向的线集合\n        var arr = self.yDirection.data\n        for(var a = 0, al = arr.length; a < al; a++){\n            var o = arr[a]\n            var line = new Line({\n                context : {\n                    x : o.x,\n                    start       : {\n                        x : 0,\n                        y : 0\n                    },\n                    end         : {\n                        x : 0,\n                        y : -self.height\n                    },\n                    lineType    : self.yDirection.lineType,\n                    lineWidth   : self.yDirection.lineWidth,\n                    strokeStyle : self.yDirection.strokeStyle,\n                    visible     : o.x ? true : false\n                }\n            });\n            if(self.yDirection.enabled){\n                _.isFunction( self.yDirection.filter ) && self.yDirection.filter.apply(line , [{\n                    layoutData : self.xDirection.data,\n                    index      : a,\n                    line       : line\n                } , self ]);\n                self.yAxisSp.addChild(line);\n            }\n        };\n    }\n}","import coorBase from \"./index\"\nimport Canvax from \"canvax\"\nimport xAxisConstructor from \"./xaxis\"\nimport yAxisConstructor from \"./yaxis\"\nimport Grid from \"./grid\"\nimport { _,getDefaultProps,event } from \"mmvis\"\n\nconst Rect = Canvax.Shapes.Rect;\n\nexport default class extends coorBase\n{\n    static defaultProps = {\n        horizontal : {\n            detail : '横向翻转坐标系',\n            documentation : \"横向翻转坐标系\",\n            insertText    : \"horizontal: \",\n            default       : false,\n            values        : [true, false]\n        },\n        _children  : {\n            xAxis  : {},\n            yAxis  : {},\n            grid   : {}\n        }\n    } \n\n    constructor( opt, app )\n    {\n        super( opt, app );\n\n        this.type = \"rect\";\n        \n        this._xAxis = null;\n        this._yAxis = [];\n\n        this._yAxisLeft = null;\n        this._yAxisRight = null;\n        this._grid  = null;\n\n        _.extend( true, this, getDefaultProps( new.target.defaultProps ), this.setDefaultOpt( opt, app ) );\n\n        this.init(opt);\n    }\n\n    setDefaultOpt( coordOpt, app )\n    {\n        var coord = {\n            field : this.dataFrame.fields[0],\n            xAxis : {\n                //波峰波谷布局模型，默认是柱状图的，折线图种需要做覆盖\n                layoutType    : \"rule\", //\"peak\",  \n                //默认为false，x轴的计量是否需要取整， 这样 比如某些情况下得柱状图的柱子间隔才均匀。\n                //比如一像素间隔的柱状图，如果需要精确的绘制出来每个柱子的间距是1px， 就必须要把这里设置为true\n                posParseToInt : false\n            },\n            grid : {\n\n            }\n        };\n\n        _.extend( true, coord, coordOpt );\n\n        if( coord.yAxis ){\n            var _nyarr = [];\n            //TODO: 因为我们的deep extend 对于数组是整个对象引用过去，所以，这里需要\n            //把每个子元素单独clone一遍，恩恩恩， 在canvax中优化extend对于array的处理\n            _.each( _.flatten([coord.yAxis]) , function( yopt ){\n                _nyarr.push( _.clone( yopt ) );\n            } );\n            coord.yAxis = _nyarr;\n        } else {\n            coord.yAxis = [];\n        };\n\n        //根据opt中得Graphs配置，来设置 coord.yAxis\n        var graphsArr = _.flatten( [app._opt.graphs] );\n        \n        //有graphs的就要用找到这个graphs.field来设置coord.yAxis\n        for( var i=0; i<graphsArr.length; i++ ){\n            var graphs = graphsArr[i];\n            if( graphs.type == \"bar\" ){\n                //如果graphs里面有柱状图，那么就整个xAxis都强制使用 peak 的layoutType\n                coord.xAxis.layoutType = \"peak\";\n            }\n            if( graphs.field ){\n                //没有配置field的话就不绘制这个 graphs了\n                var align = \"left\"; //默认left\n                if( graphs.yAxisAlign == \"right\" ){\n                    align = \"right\";\n                };\n\n                var optsYaxisObj = null;\n                optsYaxisObj = _.find( coord.yAxis, function( obj, i ){\n                    return obj.align == align || ( !obj.align && i == ( align == \"left\" ? 0 : 1 ));\n                } );\n\n                if( !optsYaxisObj ){\n                    optsYaxisObj = {\n                        align : align,\n                        field : []\n                    }\n                    coord.yAxis.push( optsYaxisObj );\n                } else {\n                    if( !optsYaxisObj.align ){\n                        optsYaxisObj.align = align;\n                    }\n                }\n\n                if( !optsYaxisObj.field ){\n                    optsYaxisObj.field = [];\n                } else {\n                    if( !_.isArray( optsYaxisObj.field ) ){\n                        optsYaxisObj.field = [ optsYaxisObj.field ];\n                    }\n                }\n\n                if( _.isArray( graphs.field ) ){\n                    optsYaxisObj.field = optsYaxisObj.field.concat( graphs.field )\n                } else {\n                    optsYaxisObj.field.push( graphs.field )\n                }\n                    \n            }\n        };\n        \n        //再梳理一遍yAxis，get没有align的手动配置上align\n        //要手动把yAxis 按照 left , right的顺序做次排序\n        var _lys=[],_rys=[];\n        _.each( coord.yAxis , function( yAxis , i ){\n            if( !yAxis.align ){\n                yAxis.align = i ?\"right\": \"left\";\n            }\n            if( yAxis.align == \"left\" ){\n                _lys.push( yAxis );\n            } else {\n                _rys.push( yAxis );\n            }\n        } );\n        coord.yAxis = _lys.concat( _rys );\n\n        if( coord.horizontal ){\n            coord.xAxis.isH = true;\n            _.each( coord.yAxis , function( yAxis ){\n                yAxis.isH = true;\n            });\n        };\n\n        if( \"enabled\" in coord ){\n            //如果有给直角坐标系做配置display，就直接通知到xAxis，yAxis，grid三个子组件\n            _.extend( true, coord.xAxis, {\n                enabled : coord.enabled\n            } );\n            _.each( coord.yAxis , function( yAxis ){\n                _.extend( true, yAxis, {\n                    enabled : coord.enabled\n                } );\n            });\n            coord.grid.enabled = coord.enabled;\n        };\n        \n        return coord;\n    }\n\n    init(opt)\n    {\n\n        this._initModules();\n        //创建好了坐标系统后，设置 _fieldsDisplayMap 的值，\n        // _fieldsDisplayMap 的结构里包含每个字段是否在显示状态的enabled 和 这个字段属于哪个yAxis\n        this.fieldsMap = this.setFieldsMap( {type: \"yAxis\"} );\n    }\n\n    resetData( dataFrame , dataTrigger )\n    {\n        var me = this;\n        this.dataFrame = dataFrame;\n\n        var _xAxisDataFrame = this.getAxisDataFrame(this.xAxis.field);\n        this._xAxis.resetData( _xAxisDataFrame );\n\n        _.each( this._yAxis , function( _yAxis ){\n            //这个_yAxis是具体的y轴实例\n            var yAxisDataFrame = me.getAxisDataFrame( _yAxis.field );\n            _yAxis.resetData( yAxisDataFrame );\n        } );\n\n        this._resetXY_axisLine_pos();\n\n        var _yAxis = this._yAxisLeft || this._yAxisRight;\n        this._grid.reset({\n            animation:false,\n            xDirection: {\n                data: _yAxis.layoutData\n            }\n        });\n    }\n\n    draw( opt )\n    {\n        //在绘制的时候，要先拿到xAxis的高\n\n        !opt && (opt ={});\n        \n        var _padding = this.app.padding;\n\n        var h = opt.height || this.app.height;\n        var w = opt.width || this.app.width;\n        if( this.horizontal ){\n            //如果是横向的坐标系统，也就是xy对调，那么高宽也要对调\n            var _num = w;\n            w = h;\n            h = _num;\n        };\n\n        var y = h - this._xAxis.height - _padding.bottom;\n        var _yAxisW = 0;\n        var _yAxisRW = 0;\n\n        //绘制yAxis\n        if( this._yAxisLeft ){\n            this._yAxisLeft.draw({\n                pos: {\n                    x: _padding.left,\n                    y: y\n                },\n                yMaxHeight: y - _padding.top,\n                resize : opt.resize\n            });\n            _yAxisW = this._yAxisLeft.width;\n        }\n\n        //如果有双轴\n        if (this._yAxisRight) {\n            this._yAxisRight.draw({\n                pos: {\n                    x : 0,\n                    y : y\n                },\n                yMaxHeight: y - _padding.top,\n                resize : opt.resize\n            });\n            _yAxisRW = this._yAxisRight.width;\n        };\n\n        //绘制x轴\n        this._xAxis.draw({\n            pos : {\n                x : _padding.left + _yAxisW,\n                y : y\n            },\n            width : w - _yAxisW - _padding.left - _yAxisRW - _padding.right,\n            resize : opt.resize\n        });\n        \n        this._yAxisRight && this._yAxisRight.setX( _yAxisW + _padding.left + this._xAxis.width );\n\n        //绘制背景网格\n        this._grid.draw({\n            width   : this._xAxis.width,\n            height  : this._yAxis[0].height,\n            xDirection   : {\n                data: this._yAxis[0].layoutData\n            },\n            yDirection   : {\n                data: this._xAxis.layoutData\n            },\n            pos     : {\n                x   : _yAxisW + _padding.left,\n                y   : y\n            },\n            resize : opt.resize\n        } );\n\n\n        this.width = this._xAxis.width;\n        this.height = this._yAxis[0].height;\n        this.origin.x = _yAxisW + _padding.left;\n        this.origin.y = y;\n\n        this._initInduce();\n\n        this._resetXY_axisLine_pos();\n\n        if( this.horizontal ){\n\n            this._horizontal({\n                w : w,\n                h : h\n            });\n\n            /*\n            var _padding = this.app.padding;\n            this.width = this._yAxis[0].height;\n            this.height = this._xAxis.width;\n            this.origin.x = this._xAxis.height + _padding.left;\n            this.origin.y = this._yAxis[0].height + _padding.top;\n            */   \n        }\n    }\n\n    _resetXY_axisLine_pos(){\n        var me = this;\n        //设置下x y 轴的 _axisLine轴线的位置，默认 axisLine.position==default\n\n        var xAxisPosY;\n        if( this._xAxis.axisLine.position == 'center' ){\n            xAxisPosY = -this._yAxis[0].height / 2;\n        } \n        if( this._xAxis.axisLine.position == 'center' ){\n            xAxisPosY = -this._yAxis[0].height / 2;\n        } \n        if( _.isNumber( this._xAxis.axisLine.position ) ){\n            xAxisPosY = -this._yAxis[0].getPosOfVal( this._xAxis.axisLine.position );\n        }\n        if( xAxisPosY !== undefined ){\n            this._xAxis._axisLine.context.y = xAxisPosY;\n        }\n\n        _.each( this._yAxis , function( _yAxis ){\n            //这个_yAxis是具体的y轴实例\n            var yAxisPosX;\n            if( _yAxis.axisLine.position == 'center' ){\n                yAxisPosX = me._xAxis.width / 2;\n            }; \n            if( _.isNumber( _yAxis.axisLine.position ) ){\n                yAxisPosX = me._xAxis.getPosOfVal( _yAxis.axisLine.position );\n            };\n            if( yAxisPosX !== undefined ){\n                _yAxis._axisLine.context.x = yAxisPosX;\n            };\n        } );\n\n    }\n\n    getSizeAndOrigin(){\n        \n        var obj = {\n            width : this.width,\n            height : this.height,\n            origin : this.origin\n        };\n        if( this.horizontal ){\n            var _padding = this.app.padding;\n            //因为在drawBeginHorizontal中\n            //横向了之后， 要把4个padding值轮换换过了\n            //top,right 对调 ， bottom,left 对调\n            //所以，这里要对调换回来给到origin\n            var left = _padding.bottom;\n            var top = _padding.right;\n            obj = {\n                width : this._yAxis[0].height,\n                height : this._xAxis.width,\n                origin : {\n                    x : this._xAxis.height + left,\n                    y : this._yAxis[0].height + top\n                }\n            }\n        };\n        return obj;\n    }\n\n    _initModules()\n    {\n        this._grid = new Grid( this.grid, this );\n        this.sprite.addChild( this._grid.sprite );\n\n        var _xAxisDataFrame = this.getAxisDataFrame(this.xAxis.field);\n        this._xAxis = new xAxisConstructor(this.xAxis, _xAxisDataFrame, this);\n        this._axiss.push( this._xAxis );\n        this.sprite.addChild(this._xAxis.sprite);\n\n        //这里定义的是配置\n        var yAxis = this.yAxis;\n        var yAxisLeft, yAxisRight;\n        var yAxisLeftDataFrame, yAxisRightDataFrame;\n\n        // yAxis 肯定是个数组\n        if( !_.isArray( yAxis ) ){\n            yAxis = [ yAxis ];\n        };\n\n        //left是一定有的\n        yAxisLeft = _.find( yAxis , function( ya ){\n            return ya.align == \"left\"\n        } );\n    \n        if( yAxisLeft ){\n            yAxisLeftDataFrame = this.getAxisDataFrame( yAxisLeft.field );\n            this._yAxisLeft = new yAxisConstructor( yAxisLeft, yAxisLeftDataFrame );\n            this._yAxisLeft.axis = yAxisLeft;\n            this.sprite.addChild( this._yAxisLeft.sprite );\n            this._yAxis.push( this._yAxisLeft );\n            this._axiss.push( this._yAxisLeft );\n        }\n       \n        yAxisRight = _.find( yAxis , function( ya ){\n            return ya.align == \"right\"\n        } );\n        if( yAxisRight ){\n            yAxisRightDataFrame = this.getAxisDataFrame( yAxisRight.field )\n            this._yAxisRight = new yAxisConstructor( yAxisRight, yAxisRightDataFrame );\n            this._yAxisRight.axis = yAxisRight;\n            this.sprite.addChild( this._yAxisRight.sprite );\n            this._yAxis.push( this._yAxisRight );\n            this._axiss.push( this._yAxisRight );\n        };\n    }\n\n    /**\n     * \n     * @param {x,y} size \n     */\n    _horizontal( opt ) \n    {\n        var me = this;\n        var w = opt.h;\n        var h = opt.w;\n    \n        _.each([me.sprite.context], function(ctx) {\n            \n            ctx.x += ((w - h) / 2);\n            ctx.y += ((h - w) / 2);\n\n            var origin = {\n                x : h/2,\n                y : w/2\n            };\n\n            ctx.rotation = 90;\n            ctx.rotateOrigin = origin;\n\n        });\n\n    }\n\n    \n\n    //由coor_base中得addField removeField来调用\n    changeFieldEnabled( field )\n    {\n        \n        this.setFieldEnabled( field );\n        \n        var fieldMap = this.getFieldMapOf(field);\n        var _axis = fieldMap.yAxis || fieldMap.rAxis;\n        \n        var enabledFields = this.getEnabledFieldsOf( _axis )//[ fieldMap.yAxis.align ];\n        \n        _axis.resetData( this.getAxisDataFrame( enabledFields ) );\n        this._resetXY_axisLine_pos();\n\n        //然后yAxis更新后，对应的背景也要更新\n        this._grid.reset({\n            animation:false,\n            xDirection: {\n                data: this._yAxisLeft ? this._yAxisLeft.layoutData : this._yAxisRight.layoutData\n            }\n        });\n    }\n\n\n    _initInduce()\n    {\n        var me = this;\n        me.induce = new Rect({\n            id: \"induce\",\n            context: {\n                x: me.origin.x,\n                y: me.origin.y-me.height,\n                width: me.width,\n                height: me.height,\n                fillStyle: '#000000',\n                globalAlpha: 0,\n                cursor: 'pointer'\n            }\n        });\n\n        if( !me.sprite.getChildById(\"induce\") ){\n            me.sprite.addChild(me.induce);\n        };\n        \n        me.induce.on(event.types.get(), function(e) {\n            //e.eventInfo = me._getInfoHandler(e);\n            me.fire( e.type, e );\n            //图表触发，用来处理Tips\n            me.app.fire( e.type, e );\n        })\n    }\n\n    getTipsInfoHandler( e )\n    {\n        \n        //这里只获取xAxis的刻度信息;\n        var induceX = e.point.x;\n        if( e.target !== this.induce ){\n            induceX = this.induce.globalToLocal( e.target.localToGlobal( e.point ) ).x\n        };\n\n        var xNode = this._xAxis.getNodeInfoOfX( induceX );\n        \n        var obj = {\n            xAxis : xNode,\n            title : xNode.text,\n\n            //下面两个属性是所有坐标系统一的\n            iNode : xNode.ind,\n            nodes : [\n                //遍历_graphs 去拿东西\n            ]\n        };\n\n        if( e.eventInfo ){\n            obj = _.extend(obj, e.eventInfo);\n\n            //把xNode信息写到eventInfo上面\n            if( obj.xAxis ){\n                e.eventInfo.xAxis = xNode\n            };\n        };\n\n        return obj;\n    }\n\n\n\n\n    //下面的方法是所有坐标系都要提供的方法，用来计算位置的， graphs里面会调用\n    //return {pos {x,y}, value :{x,y}}\n    getPoint( opt ){\n        var point = {\n            x : 0,\n            y : undefined\n        };\n\n        var xaxisExp = {\n            type : \"xAxis\"\n        };\n        var yaxisExp = {\n            type : \"yAxis\", \n            field : opt.field\n        };\n        var _xAxis = this.getAxis( xaxisExp );\n        var _yAxis = this.getAxis( yaxisExp );\n\n        var _iNode = opt.iNode || 0;\n\n        var _value = opt.value; //x y 一般至少会带 yval过来\n\n        if( !(\"x\" in _value) ){\n            //如果没有传xval过来，要用iNode去xAxis的org去取\n            _value.x = _.flatten( _xAxis.dataOrg )[ _iNode ];\n        };\n        point.x = _xAxis.getPosOf({ ind: _iNode, val: _value.x });\n\n        var y = _value.y;\n        if( !isNaN( y ) && y !== null && y !== undefined && y !== \"\"  ){\n            point.y = -_yAxis.getPosOfVal( y );\n        } else {\n            point.y = undefined;\n        };\n\n        return {\n            pos : point,\n            value : _value\n        };\n\n    }\n\n    getAxisOriginPoint( exp ){\n        var _yAxis = this.getAxis( exp );\n        return {\n            pos : -_yAxis.originPos,\n            value : _yAxis.origin\n        }\n    }\n\n    getOriginPos( exp ){\n        var xaxisExp = {\n            type : \"xAxis\"\n        };\n        var yaxisExp = {\n            type : \"yAxis\", \n            field : exp.field\n        };\n        var _xAxis = this.getAxis( xaxisExp );\n        var _yAxis = this.getAxis( yaxisExp );\n        return {\n            x : _xAxis.originPos,\n            y : -_yAxis.originPos\n        }\n    }\n\n}","import Canvax from \"canvax\"\nimport { _, event } from \"mmvis\"\n\nconst Line = Canvax.Shapes.Line;\nconst Circle = Canvax.Shapes.Circle;\nconst Polygon = Canvax.Shapes.Polygon;\n\nexport default class polarGrid extends event.Dispatcher\n{\n    constructor( opt, app )\n    {\n        super( opt, app);\n\n        this.width   = 0;   \n        this.height  = 0;\n        this.app    = app; //该组件被添加到的目标图表项目，\n\n        this.pos     = {\n            x : 0,\n            y : 0\n        };\n\n\n\n        this.enabled = false;\n     \n        //环\n        this.ring = {\n            shapeType : \"poly\",\n            lineType : \"sold\",\n            lineWidth : 1,\n            strokeStyle : \"#e5e5e5\",//[\"#f9f9f9\", \"#f7f7f7\"],\n            fillStyle : null, //[\"#f9f9f9\", \"#f7f7f7\"],\n            fillAlpha : 0.5\n        };\n\n        //射线\n        this.ray = {\n            enabled : true,\n            lineWidth : 1,\n            strokeStyle : \"#e5e5e5\",\n        };\n\n        this.dataSection = [];\n\n\n\n\n        this.sprite = null;//总的sprite\n\n        this.animation = true;\n\n        this.induce = null; //最外层的那个网，用来触发事件\n\n        this.init(opt);\n    }\n\n    init(opt)\n    {\n        _.extend(true, this , opt); \n        this.sprite = new Canvax.Display.Sprite();\n    }\n\n    setX($n)\n    {\n        this.sprite.context.x = $n\n    }\n\n    setY($n)\n    {\n        this.sprite.context.y = $n\n    }\n\n    draw(opt)\n    {\n        _.extend(true, this , opt );\n        \n        this._widget();\n\n        this.setX(this.pos.x);\n        this.setY(this.pos.y);\n    }\n\n    clean()\n    {\n        this.sprite.removeAllChildren();\n    }\n\n    reset( opt )\n    {    \n        /*\n        this.sprite.removeAllChildren();\n        this.draw( opt );\n        */\n    }\n\n    _widget()\n    {\n        \n        var me = this;\n        _.each( this.dataSection, function( num, i ){\n            \n            if( num ) {\n                var r = me.app.getROfNum( num );\n                var points = me.app.getPointsOfR( r );\n\n                var ctx = {\n                    //lineType : me.ring.lineType,\n                    lineWidth : me.ring.lineWidth,\n                    strokeStyle : me._getStyle( me.ring.strokeStyle , i-1 ),//me.ring.strokeStyle,\n                    fillStyle : me._getStyle( me.ring.fillStyle , i-1 ),\n                    fillAlpha : me.ring.fillAlpha\n                };\n\n                var _ring;\n                var ringType = Circle;\n                if( me.ring.shapeType == \"circle\" ){\n                    ctx.r = r;\n                    _ring = new ringType({\n                        context : ctx\n                    });\n                } else {\n                    ctx.pointList = [];\n                    _.each( points, function( point , i ){\n                        if( i < points.length ){\n                            ctx.pointList.push( [ point.x, point.y ] );\n                        }\n                    } );\n                    ringType = Polygon;\n                    _ring = new ringType({\n                        context : ctx\n                    });\n                };\n                me.sprite.addChildAt( _ring , 0 );\n\n                if( i == me.dataSection.length-1 ){\n                    ctx.fillAlpha = 0;\n                    ctx.fillStyle = \"#ffffff\";\n                    me.induce = new ringType({\n                        context : ctx\n                    });\n                    me.sprite.addChild( me.induce );\n                };\n\n                //绘制中心出发的蜘蛛网线\n                var aAxisLayoutData = [];\n                \n                _.each( points, function( point ){\n                    var _line = new Line({\n                        context : {\n                            end : point,\n                            lineWidth : me.ring.lineWidth,\n                            strokeStyle : me.ring.strokeStyle\n                        }\n                    });\n                    me.sprite.addChild( _line );\n                } );\n            }\n        } );\n    }\n\n    _getStyle( color , i )\n    {\n        if( _.isArray(color) ){\n            return color[ i%color.length ]\n        }\n        return color;\n    }\n}","//极坐标 坐标轴\n//极坐标系目前对外抛出三个方法\n//获取极坐标系内任意半径上的弧度集合\n    //[ [{point , radian} , {point , radian}] ... ]\n    //getRadiansAtR\n\n    //获取某个点相对圆心的弧度值\n    //getRadianInPoint\n\n    //获取某个弧度方向，半径为r的时候的point坐标点位置\n    //getPointInRadianOfR\n\n//应用场景中一般需要用到的属性有\n//width, height, origin(默认为width/2,height/2)\n\nimport coorBase from \"./index\"\nimport Canvax from \"canvax\"\nimport Grid from \"./polar/grid\"\nimport { dataSection,_,getDefaultProps,event } from \"mmvis\"\n\nexport default class extends coorBase\n{\n    static defaultProps = {\n        allAngle : {\n            detail : '坐标系总角度',\n            documentation : \"\",\n            default       : 360,\n            values        : [0, 360]\n        },\n        startAngle : {\n            detail : '坐标系其实角度',\n            documentation : \"\",\n            default       : 0,\n            values        : [0, 360]\n        },\n        squareRange : {\n            detail : '是否正方形的坐标区域',\n            documentation : \"\",\n            default       : true,\n            values        : [true, false]\n        },\n        \n        radius : {\n            detail : '坐标系的最大半径',\n            documentation : \"默认自动计算view的高宽，如果squareRange==true，则会取Math.min(width,height)\",\n            default       : 'auto',\n            values        : null\n        },\n        aAxis : {\n            detail : '角度轴',\n            documentation : \"类似直角坐标系中的x轴\",\n            propertys     : {\n                \n                data : [],\n                angleList : [], //对应layoutType下的角度list\n                layoutData : [], //aAxis.data的 label.format后版本\n\n                field : {\n                    detail : '数据字段',\n                    documentation : \"\",\n                    default       : ''\n                },\n                layoutType : {\n                    detail : '布局类型',\n                    documentation : \"\",\n                    default       : 'proportion'\n                },\n                beginAngle : {\n                    detail : '起始角度',\n                    documentation : \"\",\n                    default       : -90\n                },\n                enabled : {\n                    detail : '是否显示',\n                    documentation : \"\",\n                    default       : false\n                },\n                label : {\n                    detail : '文本配置',\n                    documentation : '',\n                    propertys : {\n                        enabled : {\n                            detail : '是否显示',\n                            documentation : \"\",\n                            default       : true\n                        },\n                        format  : {\n                            detail : 'label的格式化处理函数',\n                            documentation : \"\",\n                            default : null\n                        },\n                        fontColor: {\n                            detail : 'label颜色',\n                            documentation: '',\n                            default : \"#666\"\n                        }\n                    }\n                }\n            }\n        },\n        rAxis : {\n            detail : '半径维度轴',\n            documentation: '类似直角坐标系中的y轴维度',\n            propertys : {\n                field : {\n                    detail : '数据字段',\n                    documentation : \"\",\n                    default       : ''\n                },\n                dataSection : {\n                    detail : '轴的显示数据',\n                    documentation : \"默认根据源数据中自动计算，用户也可以手动指定\",\n                    default       : false\n                },\n                enabled : {\n                    detail : '是否显示',\n                    documentation : \"\",\n                    default       : false\n                }\n            }\n        }\n    } \n\n    constructor( opt , app )\n    {\n        super( opt , app );\n        this.type  = \"polar\";\n        \n        _.extend( true, this, getDefaultProps( new.target.defaultProps ), this.setDefaultOpt( opt, app ) );\n\n        this.init(opt);\n    }\n\n    setDefaultOpt( coordOpt, app )\n    {\n      \n        var coord = {\n            rAxis : {\n                field : []\n            },\n            aAxis : {},\n            grid  : {}\n        };\n        _.extend( true, coord, coordOpt );\n\n        //根据graphs.field 来 配置 coord.rAxis.field -------------------\n        if( !_.isArray( coord.rAxis.field ) ){\n            coord.rAxis.field = [ coord.rAxis.field ];\n        };\n\n        //根据opt中得Graphs配置，来设置 coord.yAxis\n        var graphsArr = _.flatten( [app._opt.graphs] );\n        \n        //有graphs的就要用找到这个graphs.field来设置coord.rAxis\n        var arrs = [];\n        _.each( graphsArr, function( graphs ){\n            if( graphs.field ){\n                //没有配置field的话就不绘制这个 graphs了\n                var _fs = graphs.field;\n                if( !_.isArray( _fs ) ){\n                    _fs = [ _fs ];\n                };\n                arrs = arrs.concat( _fs );\n            };\n        } );\n        coord.rAxis.field = coord.rAxis.field.concat( arrs );\n\n        if( coordOpt.aAxis &&coordOpt.aAxis.field ){\n            coord.aAxis.enabled = true;\n        } else {\n            //如果aAxis.field都没有的话，是没法绘制grid的，所以grid的enabled就是false\n            coord.grid.enabled = false;\n        };\n\n        return coord\n    }\n\n    init(opt)\n    {\n\n        this._initModules();\n\n        //创建好了坐标系统后，设置 _fieldsDisplayMap 的值，\n        // _fieldsDisplayMap 的结构里包含每个字段是否在显示状态的enabled 和 这个字段属于哪个yAxis\n        this.fieldsMap = this.setFieldsMap({type : \"rAxis\"});\n        \n    }\n\n\n    _initModules()\n    {\n        if( this.grid.enabled ){\n            this._grid = new Grid( this.grid, this );\n            this.sprite.addChild( this._grid.sprite );\n        };\n        if( this.aAxis.enabled && this.grid.enabled ){\n            this._aAxisScaleSp = new Canvax.Display.Sprite({\n                id : \"aAxisScaleSp\"\n            });\n            this.sprite.addChild( this._aAxisScaleSp );\n        };\n\n        this._axiss.push( {\n            type : \"rAxis\",\n            field : this.rAxis.field\n        } );\n    }\n\n    draw( opt )\n    {\n        !opt && (opt ={});\n        \n        //先计算好要绘制的width,height, origin\n        this._computeAttr();\n\n        this.rAxis.dataSection = this._getRDataSection();\n        this.aAxis.data = this.app.dataFrame.getFieldData( this.aAxis.field );\n\n        this._setAAxisAngleList();\n\n        if( this.grid.enabled ){\n\n            this._grid.draw( {\n                pos    : this.origin,\n                width  : this.width,\n                height : this.height,\n                dataSection : this.rAxis.dataSection\n            } , this);\n\n            if( this.aAxis.enabled ){\n                this._drawAAxis();\n            };\n    \n            this._initInduce();\n        };\n    }\n\n\n    resetData( dataFrame , dataTrigger )\n    {\n\n    }\n\n    changeFieldEnabled( field )\n    {\n    \n        this.setFieldEnabled( field );\n\n        this.rAxis.dataSection = this._getRDataSection();\n        this.aAxis.data = this.app.dataFrame.getFieldData( this.aAxis.field );\n\n        if( this.grid.enabled ){\n\n            this._grid.reset( {\n                dataSection : this.rAxis.dataSection\n            } , this);\n    \n        };\n\n    }\n\n    _getRDataSection(){\n        var me = this;\n        //如果用户有主动配置了dataSection,是不需要计算dataSection的\n        //目前没有做堆叠的dataSection，后面有需要直接从yAxis的模块中拿\n        if( this._opt.rAxis && this._opt.rAxis.dataSection ){\n            return this._opt.rAxis.dataSection\n        };\n\n        var arr = [];\n        _.each( _.flatten( [me.rAxis.field] ), function( field ){\n            arr = arr.concat( me.app.dataFrame.getFieldData( field ) );\n        } );\n        return dataSection.section(arr, 3);\n        \n    }\n\n    _computeAttr()\n    {\n        var _r;\n\n        var scaleXY = 1; //width/height 宽高比\n\n        var _padding = this.app.padding;\n        var rootWidth = this.app.width;\n        var rootHeight = this.app.height;\n\n        if( !(\"width\" in this._opt) ){\n            this.width = rootWidth - _padding.left - _padding.right;\n        };\n        if( !(\"height\" in this._opt) ){\n            this.height = rootHeight - _padding.top - _padding.bottom;\n        };  \n        \n        var vw = this.width;\n        var vh = this.height;\n     \n\n        //然后根据allAngle startAngle来实现计算出这个polar的和模型 高宽比例\n        //if( this.allAngle % 360 != 0 ){\n\n            //360的polar高宽比例肯定是1：1的\n            var sinTop=0,sinBottom=0,cosLeft=0,cosRight=0;\n            //如果该坐标系并非一个整圆,那么圆心位置 需要对应的调整，才能铺满整个画布\n            var angles = [ this.startAngle ]\n            for( var i=0,l= (parseInt((this.startAngle+this.allAngle)/90) - parseInt(this.startAngle/90)); i<=l;i++ ){\n                var angle = parseInt(this.startAngle/90)*90 + i*90;\n                if( _.indexOf( angles, angle ) == -1 && angle>angles.slice(-1)[0] ){\n                    angles.push( angle );\n                };\n            };\n\n            var lastAngle = this.startAngle + this.allAngle;\n            if( _.indexOf( angles, lastAngle ) == -1 ){\n                angles.push( lastAngle );\n            };\n            \n            _.each( angles, function( angle ){\n                \n                angle = angle % 360;\n                \n                var _sin = Math.sin( angle*Math.PI/180 );\n                if( angle == 180 ){\n                    _sin = 0;\n                };\n                var _cos = Math.cos( angle*Math.PI/180 );\n                if( angle == 270 || angle == 90 ){\n                    _cos = 0;\n                };\n                sinTop = Math.min( sinTop, _sin );\n                sinBottom = Math.max( sinBottom, _sin );\n                cosLeft = Math.min( cosLeft, _cos );\n                cosRight = Math.max( cosRight, _cos );\n\n            } );\n\n            scaleXY = (Math.abs(cosLeft) + Math.abs(cosRight))/(Math.abs(sinTop) + Math.abs(sinBottom))\n            var _num = Math.min( vw, vh );\n            if( scaleXY == 1 ){\n                vw = vh = _num;\n            } else {\n                var _w = vh * scaleXY;\n                var _h = vw  / scaleXY;\n                if( _w > vw ){\n                    //如果超出了， 那么缩放height\n                    vh = _h;\n                } else {\n                    vw = _w;\n                }\n            };\n\n            var x = _padding.left + (this.width-vw)/2;\n            var y = _padding.top + (this.height-vh)/2;\n\n            this.origin = {\n                x : x + vw * (cosLeft/(cosLeft-cosRight)),\n                y : y + vh * (sinTop/(sinTop-sinBottom))\n            };\n\n            var distanceToLine = {\n                top    : this.origin.y - y,\n                right  : x+vw - this.origin.x,\n                bottom : y+vh - this.origin.y,\n                left   : this.origin.x - x \n            };\n\n            var anglesRadius = []; //每个角度上面的和边线相交点到origin的距离，可以作为半径\n            var quadrantLines = [\n                [\"right\" , \"bottom\"],\n                [\"bottom\" , \"left\"],\n                [\"left\" , \"top\"],\n                [\"top\" , \"right\"]\n            ];\n            _.each( angles, function( angle ){\n                //判断这个angle在会和哪根边线相交\n                angle = angle%360;\n                \n                var quadrant = parseInt(angle/90); //当前angle在第几象限，每个象限可能相交的边线不同\n                var lines = quadrantLines[quadrant];\n                if( angle%90 == 0 ){ //说明在4个正方向，只会和一条边线有可能相交，而且垂直\n                    lines = [[ \"right\",\"bottom\",\"left\",\"top\" ][quadrant]];\n                };\n\n                var _sin = Math.sin( angle*Math.PI/180 );\n                if( angle == 180 ){\n                    _sin = 0;\n                };\n                var _cos = Math.cos( angle*Math.PI/180 );\n                if( angle == 270 || angle == 90 ){\n                    _cos = 0;\n                };\n\n                //可能相交的边线集合 top right bottom left\n                _.each( lines , function( line ){\n                    var _r;\n                    if( line == \"top\" || line == \"bottom\" ){\n                        //和上下边线的相交\n                        if( _sin ){\n                            // !_sin的话，不可能和上下边线相交的，平行\n                            _r = Math.abs( distanceToLine[line] / _sin )\n                        };\n                    };\n                    if( line == \"right\" || line == \"left\" ){\n                        //和左右线的相交\n                        if( _cos ){\n                            // !_sin的话，不可能和左右边线相交的，平行\n                            _r = Math.abs( distanceToLine[line] / _cos );\n                        };\n                    };\n                    anglesRadius.push( _r );\n                } );\n            } );\n            _r = _.min( anglesRadius );\n            \n        //};\n\n        this.radius = _r\n        \n    }\n\n    getMaxDisToViewOfOrigin(){\n        var origin = this.origin;\n        var _r = 0;\n        var _padding = this.app.padding;\n        var rootWidth = this.app.width;\n        var rootHeight = this.app.height;\n\n        var vw = rootWidth - _padding.left - _padding.right;\n        var vh = rootHeight - _padding.top - _padding.bottom;\n\n        var _distances = [ \n            origin.x - _padding.left , //原点到left的距离\n            vw + _padding.left - origin.x , //原点到右边的距离\n            origin.y - _padding.top , \n            vh + _padding.top - origin.y\n        ];\n        _r = _.max( _distances );\n        \n        return _r;\n    }\n\n    //获取极坐标系内任意半径上的弧度集合\n    //[ [{point , radian} , {point , radian}] ... ]\n    getRadiansAtR( r , width , height)\n    {\n        \n        var me = this;\n        if( width == undefined ){\n            width = this.width;\n        };\n        if( height == undefined ){\n            height = this.height;\n        };\n\n        var _rs = [];\n        //if( r > maxRadius ){\n        //    return [];\n        //} else {\n            //下面的坐标点都是已经origin为原点的坐标系统里\n\n            //矩形的4边框线段\n            var _padding = this.app.padding;\n            \n            //这个origin 是相对在width，height矩形范围内的圆心，\n            //而this.origin 是在整个画布的位置\n            var origin = {\n                x : this.origin.x - _padding.left - (this.width-width)/2,\n                y : this.origin.y - _padding.top - (this.height-height)/2\n            };\n            var x,y;\n            \n\n            //于上边界的相交点\n            //最多有两个交点\n            var distanceT = origin.y;\n            if( distanceT < r ){\n                x = Math.sqrt( Math.pow(r,2)-Math.pow(distanceT , 2) );\n                _rs = _rs.concat( this._filterPointsInRect([\n                    { x : -x ,y : -distanceT },\n                    { x : x  ,y : -distanceT }\n                ], origin,width, height) );\n            };\n\n            //于右边界的相交点\n            //最多有两个交点\n            var distanceR = width - origin.x;\n            if( distanceR < r ){\n                y = Math.sqrt( Math.pow(r,2)-Math.pow(distanceR , 2) );\n                _rs = _rs.concat( this._filterPointsInRect([\n                    { x : distanceR  ,y : -y},\n                    { x : distanceR  ,y : y}\n                ], origin, width, height) );\n            };\n            //于下边界的相交点\n            //最多有两个交点\n            var distanceB = height - origin.y;\n            if( distanceB < r ){\n                x = Math.sqrt( Math.pow(r,2)-Math.pow(distanceB , 2) );\n                _rs = _rs.concat( this._filterPointsInRect([\n                    { x : x   ,y : distanceB},\n                    { x : -x  ,y : distanceB}\n                ], origin, width, height) );\n            };\n            //于左边界的相交点\n            //最多有两个交点\n            var distanceL = origin.x;\n            if( distanceL < r ){\n                y = Math.sqrt( Math.pow(r,2)-Math.pow(distanceL , 2) );\n                _rs = _rs.concat( this._filterPointsInRect([\n                    { x : -distanceL  ,y : y},\n                    { x : -distanceL  ,y : -y}\n                ], origin, width, height) );\n            };\n\n\n            var arcs = [];//[ [{point , radian} , {point , radian}] ... ]\n            //根据相交点的集合，分割弧段\n            if( _rs.length == 0 ){\n                //说明整圆都在画布内\n                //[ [0 , 2*Math.PI] ];\n                arcs.push([\n                    {point : {x: r , y: 0} , radian: 0},\n                    {point : {x: r , y: 0} , radian: Math.PI*2}\n                ]);\n            } else {\n                //分割多段\n                _.each( _rs , function( point , i ){\n                    var nextInd = ( i==(_rs.length-1) ? 0 : i+1 );\n                    var nextPoint = _rs.slice( nextInd , nextInd+1 )[0];\n                    arcs.push([\n                        {point: point , radian: me.getRadianInPoint( point )},\n                        {point: nextPoint , radian: me.getRadianInPoint( nextPoint )}\n                    ]);\n                } );\n            };\n\n            //过滤掉不在rect内的弧线段\n            for( var i=0,l=arcs.length ; i<l ; i++ ){\n                if( !this._checkArcInRect( arcs[i] , r , origin, width, height) ){\n                    arcs.splice(i , 1);\n                    i--,l--;\n                }\n            };\n            return arcs;\n        //}\n    }\n\n    _filterPointsInRect( points , origin, width, height)\n    {\n        for( var i=0,l=points.length; i<l ; i++ ){\n            if( !this._checkPointInRect(points[i], origin, width, height) ){\n                //该点不在root rect范围内，去掉\n                points.splice( i , 1 );\n                i--,l--;\n            }\n        };\n        return points;\n    }\n\n    _checkPointInRect(p, origin, width, height)\n    {\n        var _tansRoot = { x : p.x + origin.x , y: p.y + origin.y };\n        return !( _tansRoot.x < 0 || _tansRoot.x > width || _tansRoot.y < 0 || _tansRoot.y > height );\n    }\n\n    //检查由n个相交点分割出来的圆弧是否在rect内\n    _checkArcInRect( arc, r, origin, width, height)\n    {\n        var start = arc[0];\n        var to = arc[1];\n        var differenceR = to.radian - start.radian;\n        if( to.radian < start.radian ){\n            differenceR = (Math.PI*2 + to.radian) - start.radian;\n        };\n        var middleR = (start.radian+differenceR/2)%(Math.PI*2);\n        return this._checkPointInRect( this.getPointInRadianOfR( middleR , r ) , origin, width, height);\n    }\n\n    //获取某个点相对圆心的弧度值\n    getRadianInPoint( point )\n    {\n        var pi2 = Math.PI*2;\n        return (Math.atan2(point.y , point.x)+pi2)%pi2;\n    }\n\n    //获取某个弧度方向，半径为r的时候的point坐标点位置\n    getPointInRadianOfR(radian , r)\n    {\n        var pi = Math.PI;\n        var x = Math.cos( radian ) * r;\n        if( radian == (pi/2) || radian == pi*3/2 ){\n            //90度或者270度的时候\n            x = 0;\n        };\n        var y = Math.sin( radian ) * r;\n        if( radian % pi == 0 ){\n            y = 0;\n        };\n        return {\n            x : x,\n            y : y\n        };\n    }\n\n\n    //获取这个num在dataSectio中对应的半径\n    getROfNum( num )\n    {\n        var r = 0;\n        var maxNum = _.max( this.rAxis.dataSection );\n        var minNum = 0; //Math.min( this.rAxis.dataSection );\n        var _r = parseInt( Math.max( this.width, this.height ) / 2 );\n\n        r = _r * ( (num-minNum) / (maxNum-minNum) );\n        return r;\n    }\n\n    //获取在r的半径上面，沿aAxis的points\n    getPointsOfR( r )\n    {\n        var me = this;\n        var points = [];\n        _.each( me.aAxis.angleList, function( _a ){\n            //弧度\n            var _r = Math.PI*_a / 180;\n            var point = me.getPointInRadianOfR( _r, r );\n            points.push( point )\n        } );\n        return points;\n    }\n\n    _setAAxisAngleList()\n    {\n        var me = this;\n\n        me.aAxis.angleList = [];\n\n        var aAxisArr = this.aAxis.data;\n        if( this.aAxis.layoutType == \"proportion\" ){\n            aAxisArr = [];\n            for( var i=0, l=this.aAxis.data.length; i<l; i++ ){\n                aAxisArr.push( i );\n            }\n        };\n\n        var allAngle = this.allAngle;\n\n        var min = 0;\n        var max = _.max( aAxisArr );\n        if( this.aAxis.layoutType == \"proportion\" ){\n            max ++;\n        };\n\n        _.each( aAxisArr, function( p ){\n            //角度\n            var _a = ((allAngle * ( (p-min)/(max-min) ) + me.aAxis.beginAngle) + allAngle)%allAngle;\n            me.aAxis.angleList.push( _a );\n        } );\n        \n    }\n\n    _drawAAxis()\n    {\n        //绘制aAxis刻度尺\n        var me = this;\n        var r = me.getROfNum( _.max( this.rAxis.dataSection ) );\n        var points = me.getPointsOfR( r + 3 );\n\n        me._aAxisScaleSp.context.x = this.origin.x;\n        me._aAxisScaleSp.context.y = this.origin.y;\n\n        _.each( this.aAxis.data , function( value , i ){\n\n            if( !me.aAxis.label.enabled ) return;\n\n            var point = points[i];\n            var c = {\n                x : point.x,\n                y : point.y,\n                fillStyle : me.aAxis.label.fontColor\n            };\n\n            var text = _.isFunction(me.aAxis.label.format) ? me.aAxis.label.format( value ) : value;\n            _.extend( c , me._getTextAlignForPoint(Math.atan2(point.y , point.x)) );\n            me._aAxisScaleSp.addChild(new Canvax.Display.Text( text , {\n                context : c\n            }));\n\n            me.aAxis.layoutData.push( text );\n            \n        } );\n    }\n\n    /**\n     *把弧度分为4大块区域-90 --> 0 , 0-->90 , 90-->180, -180-->-90\n     **/\n    _getTextAlignForPoint(r)\n    {\n        var textAlign    = \"center\";\n        var textBaseline = \"bottom\";\n\n        /* 默认的就不用判断了\n        if(r==-Math.PI/2){\n            return {\n                textAlign    : \"center\",\n                textBaseline : \"bottom\"\n            }\n        }\n        */\n        if(r>-Math.PI/2 && r<0){\n            textAlign    = \"left\";\n            textBaseline = \"bottom\";\n        }\n        if(r==0){\n            textAlign    = \"left\";\n            textBaseline = \"middle\";\n        }\n        if(r>0 && r<Math.PI/2){\n            textAlign    = \"left\";\n            textBaseline = \"top\";\n        }\n        if(r==Math.PI/2){\n            textAlign    = \"center\";\n            textBaseline = \"top\";\n        }\n        if(r>Math.PI/2 && r<Math.PI){\n            textAlign    = \"right\";\n            textBaseline = \"top\";\n        }\n        if(r==Math.PI || r == -Math.PI){\n            textAlign    = \"right\";\n            textBaseline = \"middle\";\n        }\n        if(r>-Math.PI && r < -Math.PI/2){\n            textAlign    = \"right\";\n            textBaseline = \"bottom\";\n        }\n        return {\n            textAlign    : textAlign,\n            textBaseline : textBaseline\n        }\n    }\n\n    getAxisNodeOf( e )\n    {\n        var me = this;\n        var aAxisInd = me.getAAxisIndOf( e );\n\n        if( aAxisInd === undefined ){\n            return;\n        }\n\n        var node = {\n            ind   : aAxisInd,\n            value : me.aAxis.data[aAxisInd],\n            text  : me.aAxis.layoutData[aAxisInd],\n            angle : me.aAxis.angleList[aAxisInd]\n        };\n        return node;\n    }\n\n    //从event中计算出来这个e.point对应origin的index分段索引值\n    getAAxisIndOf( e )\n    {\n        var me = this;\n\n        if( e.aAxisInd !== undefined ){\n            return e.aAxisInd;\n        };\n\n        if( !me.aAxis.angleList.length ){\n            return;\n        };\n\n        var point = e.point;\n\n        //angle全部都换算到0-360范围内\n        var angle = (me.getRadianInPoint( point ) * 180 / Math.PI - me.aAxis.beginAngle) % me.allAngle;\n        var r = Math.sqrt( Math.pow( point.x, 2 ) + Math.pow( point.y, 2 ) );\n\n        var aAxisInd = 0;\n        var aLen = me.aAxis.angleList.length;\n        _.each( me.aAxis.angleList , function( _a, i ){\n\n            _a = (_a - me.aAxis.beginAngle) % me.allAngle;\n\n            var nextInd = i+1;\n            var nextAngle = (me.aAxis.angleList[ nextInd ] - me.aAxis.beginAngle) % me.allAngle;\n            if( i == aLen - 1 ){\n                nextInd = 0;\n                nextAngle = me.allAngle;\n            };\n            \n            //把两个极角坐标都缩放到r所在的维度上面\n            if( angle >= _a && angle <= nextAngle ){\n                //说明就再这个angle区间\n                if( angle - _a < nextAngle - angle ){\n                    aAxisInd = i;\n                } else {\n                    aAxisInd = nextInd;\n                }\n                return false;\n            };\n\n        } ); \n        return aAxisInd;\n    }\n\n    _initInduce()\n    {\n        var me = this;\n        me.induce = this._grid.induce;\n        me.induce && me.induce.on(event.types.get(), function(e) {\n            me.fire( e.type, e );\n            //图表触发，用来处理Tips\n            me.app.fire( e.type, e );\n        });\n    }\n\n    getTipsInfoHandler( e )\n    {\n        //这里只获取xAxis的刻度信息;\n        var me = this;\n\n        var aNode = me.getAxisNodeOf( e );\n        \n        var obj = {\n            //aAxis : aNode,\n            //title : aNode.label,\n            //iNode : aNode.ind,\n            nodes : [\n                //遍历_graphs 去拿东西\n            ]\n        };\n        if( aNode ){\n            obj.aAxis = aNode;\n            obj.title = aNode.text;\n            obj.iNode = aNode.ind;\n        };\n        \n        if( e.eventInfo ){\n            obj = _.extend(obj, e.eventInfo);\n        };\n        return obj;\n    }\n\n    //TODO待实现\n    getPoint( opt ){\n\n    }\n    getSizeAndOrigin(){\n        \n    }\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\n\nexport default class GraphsBase extends Component\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.name = \"graphs\";\n\n        //这里所有的opts都要透传给 group\n        this._opt = opt || {};\n        this.app = app;\n        this.ctx = app.stage.canvas.getContext(\"2d\");\n        this.dataFrame = app.dataFrame; //app.dataFrame的引用\n\n        this.data   = null; //没个graphs中自己_trimGraphs的数据\n\n        this.width  = 0;\n        this.height = 0;\n        this.origin = {\n            x: 0,\n            y: 0\n        };\n\n        this.animation = true;\n        this.inited = false;\n\n        this.sprite = new Canvax.Display.Sprite({\n            name: \"graphs_\"+opt.type\n        });\n        this.app.graphsSprite.addChild( this.sprite );\n    }\n\n    tipsPointerOf(e){}\n\n    tipsPointerHideOf(e){}\n\n    focusAt( ind, field ){}\n    \n    unfocusAt( ind, field ){}\n    \n\n    selectAt( ind, field ){}\n    unselectAt( ind, field ){}\n    //获取选中的 数据点\n    getSelectedList(){ return [] }\n    //获取选中的 列数据, 比如柱状图中的多分组，选中一列数据，则包函了这分组内的所有柱子\n    getSelectedRowList(){ return [] }\n\n    hide( field ){}\n\n    show( field ){}\n\n    getLegendData(){}\n\n    //触发事件, 事件处理函数中的this都指向对应的graphs对象。\n    triggerEvent( e )\n    {\n        var trigger = e.eventInfo.trigger || this;\n        var fn = trigger[ \"on\"+e.type ];\n        if( fn && _.isFunction( fn ) ){\n            //如果有在pie的配置上面注册对应的事件，则触发\n            var nodeData = null;\n            if( e.eventInfo && e.eventInfo.nodes && e.eventInfo.nodes.length ){\n                //完整的nodes数据在e.eventInfo中有，但是添加第二个参数，如果nodes只有一个数据就返回单个，多个则数组\n                if( e.eventInfo.nodes.length == 1 ){\n                    fn.apply( this , [ e , e.eventInfo.nodes[0] ] );\n                } else {\n                    fn.apply( this , [ e , e.eventInfo.nodes ] );\n                };\n            } else {\n                var _arr = [];\n                _.each( arguments, function(item, i){\n                    if( !!i ){\n                        _arr.push( item );\n                    }\n                } );\n                fn.apply( this, _arr );\n            }\n            \n        };\n    }\n\n}","import Canvax from \"canvax\"\nimport {numAddSymbol} from \"../../../utils/tools\"\nimport GraphsBase from \"../index\"\nimport { _, event } from \"mmvis\"\n\nconst AnimationFrame = Canvax.AnimationFrame;\nconst BrokenLine = Canvax.Shapes.BrokenLine;\nconst Rect = Canvax.Shapes.Rect;\n\nexport default class BarGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super(opt, app);\n\n        this.type = \"bar\";\n\n        this.field  = null;\n        this.enabledField = null;\n \n        this.yAxisAlign = \"left\"; //默认设置为左y轴\n\n        //trimGraphs的时候是否需要和其他的 bar graphs一起并排计算，true的话这个就会和别的重叠\n        //和css中得absolute概念一致，脱离文档流的绝对定位\n        this.absolute = false;\n        \n        this.proportion = false;//比例柱状图，比例图首先肯定是个堆叠图\n\n        this.node = {\n            shapeType : 'rect',\n            width     : 0,\n            _width    : 0,\n            maxWidth  : 50,\n            minWidth  : 1,\n            minHeight : 0,\n\n            radius    : 3,\n            fillStyle : null,\n            fillAlpha : 0.95,\n            _count    : 0, //总共有多少个bar\n            xDis      : null,\n            filter    : null\n        };\n\n        this.label = {\n            enabled   : false,\n            animation : true,\n            fontColor : null, //如果有设置text.fontColor那么优先使用fontColor\n            fontSize  : 12,\n            format    : null,\n            lineWidth : 0,\n            strokeStyle : null,\n\n            rotation : 0,\n            align : \"center\",  //left center right\n            verticalAlign : \"bottom\", //top middle bottom\n            position : \"top\", //top,topRight,right,rightBottom,bottom,bottomLeft,left,leftTop,center\n            offsetX : 0,\n            offsetY : 0\n        };\n        \n        //分组的选中，不是选中具体的某个node，这里的选中靠groupRegion来表现出来\n        this.select = {\n            enabled : false,\n            alpha : 0.2,\n            fillStyle : null,\n            _fillStyle : \"#092848\", //和bar.fillStyle一样可以支持array function\n            triggerEventType : \"click\",\n            width : 1,\n            inds : [] //选中的列的索引集合,注意，这里的ind不是当前视图的ind，而是加上了dataFrame.range.start的全局ind\n        };\n\n        this._barsLen = 0;\n\n        this.txtsSp = null;\n\n        _.extend(true, this, opt);\n\n        this.init();\n\n    }\n\n    init()\n    {\n\n        this.barsSp = new Canvax.Display.Sprite({\n            id: \"barsSp\"\n        });\n        this.txtsSp = new Canvax.Display.Sprite({\n            id: \"txtsSp\",\n            context: {\n                //visible: false\n            }\n        });\n    }\n\n    getNodesAt(index)\n    {\n        //该index指当前\n        var data = this.data;\n        \n        var _nodesInfoList = []; //节点信息集合\n        _.each( this.enabledField, function( fs, i ){\n            if( _.isArray(fs) ){\n                _.each( fs, function( _fs, ii ){\n                    //fs的结构两层到顶了\n                    var nodeData = data[ _fs ] ? data[ _fs ][ index ] : null;\n                    nodeData && _nodesInfoList.push( nodeData );\n                } );\n            } else {\n                var nodeData = data[ fs ] ? data[ fs ][ index ] : null;\n                nodeData && _nodesInfoList.push( nodeData );\n            }\n        } );\n        \n        return _nodesInfoList;\n    }\n\n    _getTargetField(b, v, i, field) \n    {\n        if (_.isString(field)) {\n            return field;\n        } else if (_.isArray(field)) {\n            var res = field[b];\n            if (_.isString(res)) {\n                return res;\n            } else if (_.isArray(res)) {\n                return res[v];\n            };\n        }\n    }\n\n    _getColor(c, nodeData, _flattenField)\n    {\n        var me = this;\n        var value = nodeData.value;\n        var field = nodeData.field;\n\n        var fieldMap = this.app.getComponent({name:'coord'}).getFieldMapOf(field);\n        var color;\n       \n        //field对应的索引，， 取颜色这里不要用i\n        if (_.isString(c)) {\n            color = c\n        };\n        if (_.isArray(c)) {\n            color = _.flatten(c)[ _.indexOf( _flattenField, field ) ];\n        };\n        if (_.isFunction(c)) {\n            color = c.apply(this, [ nodeData ]);\n        };\n\n        if( c && c.lineargradient ){\n\n            var _style = me.ctx.createLinearGradient( nodeData.x, (nodeData.fromY+nodeData.rectHeight), nodeData.x, nodeData.fromY );\n            _.each( c.lineargradient , function( item , i ){\n                _style.addColorStop( item.position , item.color);\n            });\n            color = _style;\n\n        };\n\n        if( color === undefined || color === null ){\n            //只有undefined(用户配置了function),null才会认为需要还原皮肤色\n            //“”都会认为是用户主动想要设置的，就为是用户不想他显示\n            color = fieldMap.color\n        };\n\n        return color;\n    }\n\n    _getBarWidth(cellWidth, ceilWidth2)\n    {\n        if (this.node.width) {\n            if (_.isFunction(this.node.width)) {\n                this.node._width = this.node.width(cellWidth);\n            } else {\n                this.node._width = this.node.width;\n            }\n        } else {\n            this.node._width = ceilWidth2 - Math.max(1, ceilWidth2 * 0.2);\n            \n            //这里的判断逻辑用意已经忘记了，先放着， 有问题在看\n            if (this.node._width == 1 && cellWidth > 3) {\n                this.node._width = cellWidth - 2;\n            };\n        };\n        this.node._width < 1 && (this.node._width = 1);\n        this.node._width = parseInt( this.node._width );\n        if( this.node._width > this.node.maxWidth ){\n            this.node._width = this.node.maxWidth;\n        };\n        return this.node._width;\n    }\n\n    show( field ){\n        this.draw();\n    }\n\n    hide( field )\n    {\n        _.each( this.barsSp.children , function( h_groupSp, h ){\n            var _bar = h_groupSp.getChildById(\"bar_\"+h+\"_\"+field);\n            _bar && _bar.destroy();\n        } );\n        _.each( this.txtsSp.children , function( sp, h ){\n            var _label = sp.getChildById(\"text_\"+h+\"_\"+field);\n            _label && _label.destroy();\n        } );\n        \n        this.draw();\n    }\n\n    resetData( dataFrame , dataTrigger )\n    {\n        this.dataFrame = dataFrame;\n        this.draw();\n    }\n\n    clean()\n    {\n        this.data = {};\n        this.barsSp.removeAllChildren();\n        if (this.label.enabled) {\n            this.txtsSp.removeAllChildren();\n        };\n    }\n\n    draw(opt)\n    { \n        \n        !opt && (opt ={});\n\n        //第二个data参数去掉，直接trimgraphs获取最新的data\n        _.extend(true, this, opt);\n\n        var me = this;\n\n        var animate = me.animation && !opt.resize;\n\n        this.data = this._trimGraphs();\n\n        if ( this.enabledField.length == 0 || this._dataLen == 0) {\n            me._preDataLen = 0;\n            this.clean();\n            return;\n        };\n\n        var preDataLen = me._preDataLen; //纵向的分组，主要用于 resetData 的时候，对比前后data数量用\n\n        var groupsLen = this.enabledField.length;\n        var itemW = 0;\n\n        me.node._count = 0;\n\n        var _flattenField = _.flatten( [ this.field ] );\n\n        _.each( this.enabledField , function(h_group, i) {\n            \n            h_group = _.flatten([ h_group ]);\n            /*\n            //h_group为横向的分组。如果yAxis.field = [\"uv\",\"pv\"]的话，\n            //h_group就会为两组，一组代表uv 一组代表pv。\n            var spg = new Canvax.Display.Sprite({ id : \"barGroup\"+i });\n            */\n\n            //vLen 为一单元bar上面纵向堆叠的length\n            //比如yAxis.field = [?\n            //    [\"uv\",\"pv\"],  vLen == 2\n            //    \"click\"       vLen == 1\n            //]\n\n            //if (h <= preDataLen - 1)的话说明本次绘制之前sprite里面已经有bar了。需要做特定的动画效果走过去\n\n            var vLen = h_group.length;\n            if (vLen == 0) return;\n\n            //itemW 还是要跟着xAxis的xDis保持一致\n            itemW = me.width / me._dataLen;\n\n            me._barsLen = me._dataLen * groupsLen;\n\n            for (var h = 0; h < me._dataLen; h++) {\n\n                //bar的group\n                var groupH = null;\n                if (i == 0) {\n                    //横向的分组\n                    if (h <= preDataLen - 1) {\n                        groupH = me.barsSp.getChildById(\"barGroup_\" + h);\n                    } else {\n                        groupH = new Canvax.Display.Sprite({\n                            id: \"barGroup_\" + h\n                        });\n                        me.barsSp.addChild(groupH);\n                        groupH.iNode = h;\n\n                    };\n\n                    //这个x轴单元 nodes的分组，添加第一个rect用来接受一些事件处理\n                    //以及显示selected状态\n                    var groupRegion;\n                    var groupRegionWidth = itemW * me.select.width;\n                    if( me.select.width > 1 ){\n                        //说明是具体指\n                        groupRegionWidth = me.select.width;\n                    };\n\n\n                    if (h <= preDataLen - 1) {\n                        groupRegion = groupH.getChildById(\"group_region_\" + h);\n                        groupRegion.context.width = groupRegionWidth;\n                        groupRegion.context.x = itemW * h + ( itemW - groupRegionWidth ) / 2;\n                        \n                    } else {\n                        \n                        groupRegion = new Rect({\n                            id: \"group_region_\" + h,\n                            pointChkPriority: false,\n                            hoverClone: false,\n                            xyToInt: false,\n                            context: {\n                                x: itemW * h + ( itemW - groupRegionWidth ) / 2,\n                                y: -me.height,\n                                width: groupRegionWidth,\n                                height: me.height,\n                                fillStyle: me._getGroupRegionStyle( h ),\n                                globalAlpha: _.indexOf( me.select.inds, me.dataFrame.range.start + h ) > -1 ? me.select.alpha : 0\n                            }\n                        });\n                        groupH.addChild(groupRegion);\n                        \n                        groupRegion.iNode = h;\n                        //触发注册的事件\n                        groupRegion.on( event.types.get() , function (e) {\n                            \n                            e.eventInfo = {\n                                iNode : this.iNode\n                                //TODO:这里设置了的话，会导致多graphs里获取不到别的graphs的nodes信息了\n                                //nodes : me.getNodesAt( this.iNode ) \n                            };\n\n                            if( me.select.enabled && e.type == me.select.triggerEventType ){\n                                //如果开启了图表的选中交互\n                                var ind = me.dataFrame.range.start + this.iNode;\n                                if( _.indexOf( me.select.inds, ind ) > -1 ){\n                                    //说明已经选中了\n                                    me.unselectAt( ind );\n                                } else {\n                                    me.selectAt( ind );\n                                }\n                            };\n\n                            //触发root统一设置e.eventInfo.nodes,所以上面不需要设置\n                            me.app.fire( e.type, e );\n\n                        });\n                    }\n\n                } else {\n                    groupH = me.barsSp.getChildById(\"barGroup_\" + h);\n                };\n\n                //txt的group begin\n                var txtGroupH = null;\n                if (i == 0) {\n                    if (h <= preDataLen - 1) {\n                        txtGroupH = me.txtsSp.getChildById(\"txtGroup_\" + h);\n                    } else {\n                        txtGroupH = new Canvax.Display.Sprite({\n                            id: \"txtGroup_\" + h\n                        });\n                        me.txtsSp.addChild(txtGroupH);\n                        txtGroupH.iGroup = i;\n                    };\n                } else {\n                    txtGroupH = me.txtsSp.getChildById(\"txtGroup_\" + h);\n                };\n                //txt的group begin\n\n                for (var v = 0; v < vLen; v++) {\n                    \n                    me.node._count ++;\n\n                    //单个的bar，从纵向的底部开始堆叠矩形\n                    var nodeData = me.data[h_group[v]][h];\n\n                    nodeData.iGroup = i, nodeData.iNode = h, nodeData.iLay = v;\n\n                    var rectHeight = nodeData.y - nodeData.fromY;\n\n                    if( isNaN(rectHeight) ){\n                        rectHeight = 0;\n                    } else {\n                        if( Math.abs(rectHeight) < me.node.minHeight ){\n                            rectHeight = me.node.minHeight;\n                        }\n                    };\n\n                    nodeData.rectHeight = rectHeight;\n\n                    var fillStyle = me._getColor(me.node.fillStyle, nodeData, _flattenField);\n                    nodeData.color = fillStyle;\n\n                    //如果用户配置了渐变， 那么tips里面就取对应的中间位置的颜色\n                    if( fillStyle instanceof CanvasGradient ){\n                        if( me.node.fillStyle.lineargradient ){\n                            var _middleStyle = me.node.fillStyle.lineargradient[ parseInt( me.node.fillStyle.lineargradient.length / 2 ) ];\n                            if( _middleStyle ){\n                                nodeData.color = _middleStyle.color\n                            };\n                        }\n                    }\n\n                    var finalPos = {\n                        x         : Math.round(nodeData.x),\n                        y         : nodeData.fromY, \n                        width     : me.node._width,\n                        height    : rectHeight,\n                        fillStyle : fillStyle,\n                        fillAlpha : me.node.fillAlpha,\n                        scaleY    : -1\n                    };\n                    nodeData.width = finalPos.width;\n                    \n                    var rectCtx = {\n                        x         : finalPos.x,\n                        y         : nodeData.yOriginPoint.pos,//0,\n                        width     : finalPos.width,\n                        height    : finalPos.height,\n                        fillStyle : finalPos.fillStyle,\n                        fillAlpha : me.node.fillAlpha,\n                        scaleY    : 0\n                    };\n                    \n                    if ( !!me.node.radius && nodeData.isLeaf && !me.proportion ) {\n                        var radiusR = Math.min(me.node._width / 2, Math.abs(rectHeight));\n                        radiusR = Math.min(radiusR, me.node.radius);\n                        rectCtx.radius = [radiusR, radiusR, 0, 0];\n                    };\n\n                    if (!animate) {\n                        delete rectCtx.scaleY;\n                        rectCtx.y = finalPos.y;\n                    };\n\n                    var rectEl = null;\n                    var barId = \"bar_\"+h+\"_\"+nodeData.field;\n                    if (h <= preDataLen - 1) {\n                        rectEl = groupH.getChildById( barId );\n                    };\n                    if( rectEl ){\n                        rectEl.context.fillStyle = fillStyle;\n                    } else {\n                        rectEl = new Rect({\n                            id: barId,\n                            context: rectCtx\n                        });\n                        rectEl.field = nodeData.field;\n                        groupH.addChild(rectEl);\n                        rectEl.on(event.types.get(), function(e) {\n                            e.eventInfo = {\n                                trigger : me.node,\n                                nodes : [ this.nodeData ]\n                            };\n                            \n                            me.app.fire( e.type, e );\n                        });\n                    };\n\n                    rectEl.finalPos = finalPos;\n                    rectEl.iGroup = i, rectEl.iNode = h, rectEl.iLay = v;\n\n                    //nodeData, nodeElement ， data和图形之间互相引用的属性约定\n                    rectEl.nodeData = nodeData;\n                    nodeData.nodeElement = rectEl;\n\n                    me.node.filter && me.node.filter.apply( rectEl, [ nodeData , me] );\n\n                    //label begin ------------------------------\n                    if ( me.label.enabled ) {\n\n                        var value = nodeData.value;\n                        if ( _.isFunction(me.label.format) ) {\n                            var _formatc = me.label.format(value, nodeData);\n                            if( _formatc !== undefined || _formatc !== null ){\n                                value = _formatc\n                            }\n                        };\n\n                        if( value === undefined || value === null || value === \"\" ){\n                            continue;\n                        };\n\n                        if ( _.isNumber(value) ) {\n                            value = numAddSymbol(value);\n                        };\n                        \n                        var textCtx = {\n                            fillStyle   : me.label.fontColor || finalPos.fillStyle,\n                            fontSize    : me.label.fontSize,\n                            lineWidth   : me.label.lineWidth,\n                            strokeStyle : me.label.strokeStyle || finalPos.fillStyle,\n                            //textAlign   : me.label.align,\n                            textBaseline: me.label.verticalAlign,\n                            rotation      : me.label.rotation\n                        };\n                        //然后根据position, offset确定x,y\n                        var _textPos = me._getTextPos( finalPos , nodeData );\n                        textCtx.x = _textPos.x;\n                        textCtx.y = _textPos.y;\n                        textCtx.textAlign = me._getTextAlign(  finalPos , nodeData  );\n\n                        //文字\n                        var textEl = null;\n                        var textId = \"text_\" + h + \"_\" + nodeData.field;\n                        if (h <= preDataLen - 1) {\n                            textEl = txtGroupH.getChildById( textId );\n                        }; \n                        if( textEl ){\n                            //do something\n                            textEl.resetText( value );\n                            textEl.context.x = textCtx.x;\n                            textEl.context.y = textCtx.y;\n\n                        } else {\n                            textEl = new Canvax.Display.Text( value , {\n                                id: textId,\n                                context: textCtx\n                            });\n                            textEl.field = nodeData.field;\n                            txtGroupH.addChild( textEl );\n                        };\n\n                        if (!animate) {\n                            //TODO：现在暂时没有做text的animate\n                        };\n\n                    }\n                    //label end ------------------------------\n\n                };\n            }\n        });\n\n        this.sprite.addChild(this.barsSp);\n        //如果有text设置， 就要吧text的txtsSp也添加到sprite\n        if (this.label.enabled) {\n            this.sprite.addChild(this.txtsSp);\n        };\n\n        this.sprite.context.x = this.origin.x;\n        this.sprite.context.y = this.origin.y;\n\n        this.grow(function() {\n            me.fire(\"complete\");\n        }, {\n            delay : 0,\n            duration : 300,\n            animate : animate\n        });\n\n        me._preDataLen = me._dataLen;\n    }\n\n    setEnabledField()\n    {\n        //要根据自己的 field，从enabledFields中根据enabled数据，计算一个 enabled版本的field子集\n        this.enabledField = this.app.getComponent({name:'coord'}).filterEnabledFields( this.field );\n    }\n\n    _getGroupRegionStyle( iNode )\n    {\n        var me = this;\n        var _groupRegionStyle = me.select.fillStyle;\n        if (_.isArray( me.select.fillStyle )) {\n            _groupRegionStyle = me.select.fillStyle[ iNode ];\n        };\n        if (_.isFunction( me.select.fillStyle )) {\n            _groupRegionStyle = me.select.fillStyle.apply(this, [ {\n                iNode : iNode,\n                rowData : me.dataFrame.getRowDataAt( iNode )\n            } ]);\n        };\n        if( _groupRegionStyle === undefined || _groupRegionStyle === null ){\n            return me.select._fillStyle;\n        };\n\n        return _groupRegionStyle\n    }\n\n    _trimGraphs()\n    {\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n\n        //用来计算下面的hLen\n        this.setEnabledField();\n        this.data = {};\n\n        var layoutGraphs = [];\n        var hLen = 0; //总共有多少列（ 一个xAxis单元分组内 ）\n        var preHLen = 0; //自己前面有多少个列（ 一个xAxis单元分组内 ）\n        var _preHLenOver = false;\n\n        if( !this.absolute ){\n            _.each( this.app.getComponents({name:'graphs'}) , function( _g ){\n                if( !_g.absolute && _g.type == \"bar\" ) {\n                    if( _g === me ){\n                        _preHLenOver = true;\n                    };\n                    if( _preHLenOver ){\n                        //排在me后面的 graphs，需要计算setEnabledField，才能计算出来 全部的hLen\n                        _g.setEnabledField();\n                    } else {\n                        preHLen += _g.enabledField.length\n                    }\n                    hLen += _g.enabledField.length;\n                    layoutGraphs.push( _g );\n                }\n            } );\n        } else {\n            layoutGraphs = [ this ];\n            hLen = this.enabledField.length;\n        };\n\n        var cellWidth = _coord.getAxis({type:'xAxis'}).getCellLength();\n        //x方向的二维长度，就是一个bar分组里面可能有n个子bar柱子，那么要二次均分\n        var ceilWidth2 = cellWidth / (hLen + 1);\n\n        //知道了ceilWidth2 后 检测下 barW是否需要调整\n        var barW = this._getBarWidth(cellWidth, ceilWidth2);\n        var barDis = ceilWidth2 - barW;\n        if( this.node.xDis != null ){\n            barDis = this.node.xDis;\n        };\n        \n        var disLeft = (cellWidth - barW*hLen - barDis*(hLen-1) ) / 2;\n        if( preHLen ){\n            disLeft += (barDis + barW) * preHLen;\n        };\n\n        //var tmpData = [];\n\n        //然后计算出对于结构的dataOrg\n        var dataOrg = this.dataFrame.getDataOrg( this.enabledField );\n\n        //dataOrg和field是一一对应的\n        _.each( dataOrg, function( hData, b ){\n            //hData，可以理解为一根竹子 横向的分组数据，这个hData上面还可能有纵向的堆叠\n\n            //tempBarData 一根柱子的数据， 这个柱子是个数据，上面可以有n个子元素对应的竹节\n            var tempBarData = [];\n            _.each( hData, function( vSectionData, v ){\n                tempBarData[v] = [];\n                //vSectionData 代表某个字段下面的一组数据比如 uv\n\n                me._dataLen = vSectionData.length;\n\n                //vSectionData为具体的一个field对应的一组数据\n                _.each(vSectionData, function(val, i) {\n\n                    var vCount = val;\n                    if (me.proportion) {\n                        //先计算总量\n                        vCount = 0;\n                        _.each( hData, function(team, ti) {\n                            vCount += team[i]\n                        });\n                    };\n\n                    var field = me._getTargetField(b, v, i, me.enabledField);\n\n                    //返回一个和value的结构对应的point结构{x:  y: }\n                    var point = _coord.getPoint( {\n                        iNode : i,\n                        field : field,\n                        value : {\n                            //x:\n                            y : val\n                        }\n                    } );\n\n                    var _x = point.pos.x;\n\n                    var x = _x - cellWidth / 2 + disLeft + (barW + barDis)*b;\n\n                    var y = 0;\n                    if (me.proportion) {\n                        y = -val / vCount * _coord.height;\n                    } else {\n                        y = point.pos.y;\n                    };\n\n                    var yOriginPoint = _coord.getAxisOriginPoint( { field: field } );\n\n                    function _getFromY( tempBarData, v, i, val, y ){\n                        var preData = tempBarData[v - 1];\n                        if( !preData ){\n                            return yOriginPoint.pos;\n                        };\n\n                        var preY = preData[i].y;\n                        var preVal = preData[i].value;\n                        var yBaseNumber = yOriginPoint.value;\n                        if( val >= yBaseNumber ){\n                            //如果大于基线的，那么就寻找之前所有大于基线的\n                            if( preVal >= yBaseNumber ){\n                                //能找到，先把pre的isLeaf设置为false\n                                preData[i].isLeaf = false;\n                                return preY;\n                            } else {\n                                return _getFromY( tempBarData, v-1, i, val, y );\n                            }\n                        } else {\n                            if( preVal < yBaseNumber ){\n                                //能找到，先把pre的isLeaf设置为false\n                                preData[i].isLeaf = false;\n                                return preY;\n                            } else {\n                                return _getFromY( tempBarData, v-1, i, val, y );\n                            }\n                        }\n                    }\n\n                    //找到其着脚点,一般就是 yOriginPoint.pos\n                    var fromY = _getFromY(tempBarData, v, i, val, y);\n                    y += fromY - yOriginPoint.pos;\n\n                    var nodeData = {\n                        type    : \"bar\",\n                        value   : val,\n                        vInd    : v, //如果是堆叠图的话，这个node在堆叠中得位置\n                        vCount  : vCount, //纵向方向的总数,比瑞堆叠了uv(100),pv(100),那么这个vCount就是200，比例柱状图的话，外部tips定制content的时候需要用到\n                        field   : field,\n                        fromX   : x,\n                        fromY   : fromY,\n                        x       : x,\n                        y       : y,\n                        width   : barW,\n                        yOriginPoint : yOriginPoint,\n                        isLeaf  : true,\n                        xAxis   : _coord.getAxis({type:'xAxis'}).getNodeInfoOfX( _x ),\n                        iNode   : i,\n                        rowData : me.dataFrame.getRowDataAt( i ),\n                        color   : null\n                    };\n\n                    if( !me.data[ nodeData.field ] ){\n                        me.data[ nodeData.field ] = tempBarData[v];\n                    };\n\n                    tempBarData[v].push(nodeData);\n\n                });\n            } );\n            \n            //tempBarData.length && tmpData.push( tempBarData );\n        } );\n            \n        return me.data;\n        //return tmpData;\n    }\n\n    _getTextAlign( bar , nodeData ){\n        var align = this.label.align;\n        if( nodeData.value < nodeData.yOriginPoint.value ){\n            if( align == \"left\" ){\n                align = \"right\"\n            } else if( align == \"right\" ){\n                align = \"left\"\n            }\n        };\n        return align;\n    }\n    \n    _getTextPos( bar , nodeData ){\n\n        var me = this;\n        var point = {\n            x : 0, y : 0\n        };\n        var x=bar.x ,y=bar.y;\n        var isNegative = true; //是负数\n        if( bar.y > nodeData.y ){\n            isNegative = false;\n        };\n        switch( me.label.position ){\n            case \"top\" :\n                x = bar.x + bar.width/2;\n                y = bar.y + bar.height;\n                if( isNegative ) {\n                    y += 16\n                };\n                break;\n            case \"topRight\" :\n                x = bar.x + bar.width;\n                y = bar.y + bar.height;\n                if( isNegative ) {\n                    y += 16\n                };\n                break;\n            case \"right\" :\n                x = bar.x + bar.width;\n                y = bar.y + bar.height/2;\n                break;\n            case \"rightBottom\" :\n                x = bar.x + bar.width;\n                y = bar.y;\n                break;\n            case \"bottom\" :\n                x = bar.x + bar.width/2;\n                y = bar.y;\n                break;\n            case \"bottomLeft\" :\n                x = bar.x;\n                y = bar.y;\n                break;\n            case \"left\" :\n                x = bar.x;\n                y = bar.y + bar.height/2;\n                break;\n            case \"leftTop\" :\n                x = bar.x;\n                y = bar.y + bar.height;\n                if( isNegative ) {\n                    y += 16\n                };\n                break;\n            case \"center\" :\n                x = bar.x + bar.width/2;\n                y = bar.y + bar.height/2;\n                break;\n        };\n        x -= me.label.offsetX;\n\n        var i = 1;\n        if( nodeData.value < nodeData.yOriginPoint.value ){\n            i = -1;\n        };\n        y -= i * me.label.offsetY;\n        point.x = x;\n        point.y = y;\n        return point;\n    }\n\n    /**\n     * 生长动画\n     */\n    grow(callback, opt) \n    {\n\n        var me = this;\n        //console.log( me._preDataLen+\"|\"+ me._dataLen)\n        //先把已经不在当前range范围内的元素destroy掉\n        if ( me._preDataLen > me._dataLen) {\n            for (var i = me._dataLen, l = me._preDataLen; i < l; i++) {\n                me.barsSp.getChildAt(i).destroy();\n                me.label.enabled && me.txtsSp.getChildAt(i).destroy();\n                i--;\n                l--;\n            };\n        };\n\n        if (!opt.animate) {\n            callback && callback(me);\n            return;\n        };\n        var sy = 1;\n\n        var optsions = _.extend({\n            delay: Math.min(1000 / this._barsLen, 80),\n            easing: \"Linear.None\",//\"Back.Out\",\n            duration: 500\n        }, opt);\n\n        var barCount = 0;\n        _.each(me.enabledField, function(h_group, g) {\n            h_group = _.flatten([ h_group ]);\n            var vLen = h_group.length;\n            if (vLen == 0) return;\n\n            for (var h = 0; h < me._dataLen; h++) {\n                for (var v = 0; v < vLen; v++) {\n\n                    var nodeData = me.data[h_group[v]][h];\n\n                    var group = me.barsSp.getChildById(\"barGroup_\" + h);\n\n                    var bar = group.getChildById(\"bar_\" + h + \"_\" + nodeData.field);\n\n                    if ( optsions.duration == 0 ) {\n                        bar.context.scaleY = sy;\n                        bar.context.y = sy * sy * bar.finalPos.y;\n                        bar.context.x = bar.finalPos.x;\n                        bar.context.width = bar.finalPos.width;\n                        bar.context.height = bar.finalPos.height;\n                    } else {\n\n                        if ( bar._tweenObj ) {\n                            AnimationFrame.destroyTween(bar._tweenObj);\n                        };\n                        bar._tweenObj = bar.animate({\n                            scaleY: sy,\n                            y: sy * bar.finalPos.y,\n                            x: bar.finalPos.x,\n                            width: bar.finalPos.width,\n                            height: bar.finalPos.height\n                        }, {\n                            duration: optsions.duration,\n                            easing: optsions.easing,\n                            delay: h * optsions.delay,\n                            onUpdate: function(arg) {\n\n                            },\n                            onComplete: function(arg) {\n                                if (arg.width < 3 && this.context) {\n                                    this.context.radius = 0;\n                                }\n\n                                barCount ++;\n\n                                if( barCount === me.node._count ){\n                                    callback && callback(me);\n                                }\n                            },\n                            id: bar.id\n                        });\n\n                    };\n\n                };\n            };\n        });\n    }\n\n    //这里的ind是包含了start的全局index\n    selectAt( ind ){\n        if( _.indexOf( this.select.inds, ind ) > -1 ) return;\n\n        this.select.inds.push( ind );\n\n        var index = ind - this.dataFrame.range.start;\n        var group = this.barsSp.getChildById(\"barGroup_\" + index);\n        if( group ){\n            var groupRegion = group.getChildById(\"group_region_\"+index);\n            if( groupRegion ){\n                groupRegion.context.globalAlpha = this.select.alpha;\n            }\n        }\n    }\n\n    //这里的ind是包含了start的全局index\n    unselectAt( ind ){\n        if( _.indexOf( this.select.inds, ind ) == -1 ) return;\n\n        var _index = _.indexOf( this.select.inds, ind );\n        this.select.inds.splice( _index, 1 );\n\n        var index = ind - this.dataFrame.range.start;\n        var group = this.barsSp.getChildById(\"barGroup_\" + index);\n        if( group ){\n            var groupRegion = group.getChildById(\"group_region_\"+index);\n            if( groupRegion ){\n                groupRegion.context.globalAlpha = 0;\n            }\n        }\n        \n    }\n\n    getSelectedRowList(){\n        var rowDatas = [];\n        var me = this;\n\n        _.each( me.select.inds, function( ind ){\n            var index = ind - me.dataFrame.range.start;\n            rowDatas.push( me.dataFrame.getRowDataAt( index ) )\n        } );\n\n        return rowDatas;\n    }\n}","import Canvax from \"canvax\"\nimport {getPath} from \"../../../utils/tools\"\nimport { _ , color, event } from \"mmvis\"\n\nconst AnimationFrame = Canvax.AnimationFrame;\nconst BrokenLine = Canvax.Shapes.BrokenLine;\nconst Rect = Canvax.Shapes.Rect;\nconst Circle = Canvax.Shapes.Circle;\nconst Path = Canvax.Shapes.Path;\n \n\nexport default class LineGraphsGroup extends event.Dispatcher\n{\n    constructor( fieldMap, iGroup, opt, ctx, h, w )\n    {\n        super();\n\n        this._opt = opt;\n        this.fieldMap = fieldMap;\n        this.field = null; //在extend之后要重新设置\n        this.iGroup = iGroup;\n        \n        this._yAxis = fieldMap.yAxis;\n        \n        this.ctx = ctx;\n        this.w = w;\n        this.h = h;\n        this.y = 0;\n\n        this.line = { //线\n            enabled: 1,\n            shapeType : \"brokenLine\",//折线\n            strokeStyle: fieldMap.color,\n            lineWidth: 2,\n            lineType: \"solid\",\n            smooth: true\n        };\n\n        this.node = { //节点 \n            enabled     : 1, //是否有\n            shapeType   : \"circle\",\n            corner      : false, //模式[false || 0 = 都有节点 | true || 1 = 拐角才有节点]\n            radius      : 3, //半径 node 圆点的半径\n            fillStyle   : '#ffffff',\n            strokeStyle : null,\n            lineWidth   : 2\n        };\n\n        this.label = {\n            enabled     : 0,\n            fontColor   : null,\n            strokeStyle : null,\n            fontSize    : 12,\n            format      : null\n        };\n\n        this.area = { //填充\n            shapeType : \"path\",\n            enabled   :1,\n            fillStyle : null,\n            alpha     : 0.2\n        };\n\n        this.data = []; \n        this.sprite = null;\n\n        this._pointList = []; //brokenline最终的状态\n        this._currPointList = []; //brokenline 动画中的当前状态\n        this._bline = null;\n\n        _.extend(true, this, opt );\n\n        //TODO group中得field不能直接用opt中得field， 必须重新设置， \n        //group中得field只有一个值，代表一条折线, 后面要扩展extend方法，可以控制过滤哪些key值不做extend\n        this.field = fieldMap.field; //iGroup 在yAxis.field中对应的值\n\n        this.init(opt)\n    }\n\n    init(opt)\n    {\n        this.sprite = new Canvax.Display.Sprite();\n        var me = this;\n        this.sprite.on(\"destroy\" , function(){\n            if(me._growTween){\n                AnimationFrame.destroyTween( me._growTween );\n            }\n        });\n    }\n\n    draw(opt, data)\n    {\n        _.extend(true, this, opt);\n        this.data = data;\n        this._widget( opt );\n    }\n\n\n    //自我销毁\n    destroy()\n    {\n        var me = this;\n        me.sprite.animate({\n            globalAlpha : 0\n        } , {\n            duration: 300,\n            onComplete: function(){\n                me.sprite.remove();\n            }\n        });\n    }\n\n    //styleType , normals , iGroup\n    _getColor(s, iNode)\n    {\n        var color = this._getProp(s, iNode);\n        if ( color === undefined || color === null ) {\n            //这个时候可以先取线的style，和线保持一致\n            color = this._getLineStrokeStyle();\n\n            //因为_getLineStrokeStyle返回的可能是个渐变对象，所以要用isString过滤掉\n            if( !color || !_.isString( color ) ){\n                //那么最后，取this.fieldMap.color\n                color = this.fieldMap.color;\n            }\n        };\n        return color;\n    }\n\n    _getProp(s, iNode)\n    {\n        if (_.isArray(s)) {\n            return s[ this.iGroup ]\n        };\n        if (_.isFunction(s)) {\n            var _nodesInfo = [];\n            if( iNode != undefined ){\n                _nodesInfo.push( this.getNodeInfoAt( iNode ) );\n            };\n            return s.apply( this , _nodesInfo );\n        };\n        return s\n    }\n\n\n    //这个是tips需要用到的 \n    getNodeInfoAt( $index )\n    {\n        var o = this.data[ $index ];\n        return o;\n    }\n\n    /**\n     * \n     * @param {object} opt \n     * @param {data} data \n     * \n     * 触发这次reset的触发原因比如{name : 'datazoom', left:-1,right:1},  \n     * dataTrigger 描述了数据变化的原因和变化的过程，比如上面的数据 left少了一个数据，right多了一个数据\n     * @param {object} dataTrigger \n     */\n    resetData(data, dataTrigger)\n    {\n        var me = this;\n\n        if( data ){\n            this.data = data;\n        };\n\n        me._pointList = this._getPointList( this.data );\n        var plen = me._pointList.length;\n        var cplen = me._currPointList.length;\n\n        var params = {\n            left : 0, //默认左边数据没变\n            right : plen - cplen\n        };\n        if( dataTrigger ){\n            _.extend( params, dataTrigger.params );\n        };\n\n        if( params.left ){\n            if( params.left > 0 ){\n                this._currPointList = this._pointList.slice(0, params.left ).concat( this._currPointList )\n            }\n            if( params.left < 0 ){\n                this._currPointList.splice( 0, Math.abs( params.left ) );\n            }\n        };\n\n        if( params.right ){\n            if( params.right > 0 ){\n                this._currPointList = this._currPointList.concat( this._pointList.slice( -params.right ) );\n            }\n            if( params.right < 0 ){\n                this._currPointList.splice( this._currPointList.length - Math.abs( params.right ) );\n            }\n        };\n\n        me._createNodes();\n        me._createTexts();\n        me._grow();\n    }\n\n    _grow(callback , opt)\n    {\n        var me = this;\n\n        if( !me.data.length ){\n            //因为在index中有调用\n            callback && callback( me );\n            return;\n        };\n\n        function _update( list ){\n            me._bline.context.pointList = _.clone( list );\n            me._bline.context.strokeStyle = me._getLineStrokeStyle( list );\n\n            me._area.context.path = me._fillLine(me._bline);\n            me._area.context.fillStyle = me._getFillStyle();\n\n            var iNode=0;\n            _.each( list, function( point, i ){\n                if( _.isNumber( point[1] ) ){\n                    if( me._circles ){\n                        var _circle = me._circles.getChildAt(iNode);\n                        if( _circle ){\n                            _circle.context.x = point[0];\n                            _circle.context.y = point[1];\n                        }\n                    }\n                    if( me._labels ){\n                        var _text = me._labels.getChildAt(iNode);\n                        if( _text ){\n                            _text.context.x = point[0];\n                            _text.context.y = point[1] - 3;\n                            me._checkTextPos( _text , i );\n                        }\n                    }\n                    iNode++;\n                }\n            } );\n        };\n\n\n        this._growTween = AnimationFrame.registTween({\n            from: me._getPointPosStr(me._currPointList),\n            to: me._getPointPosStr(me._pointList),\n            desc: me.field,\n            onUpdate: function( arg ) {\n                for (var p in arg) {\n                    var ind = parseInt(p.split(\"_\")[2]);\n                    var xory = parseInt(p.split(\"_\")[1]);\n                    me._currPointList[ind] && (me._currPointList[ind][xory] = arg[p]); //p_1_n中间的1代表x or y\n                };\n                _update( me._currPointList );\n            },\n            onComplete: function() {\n                me._growTween = null;\n                //在动画结束后强制把目标状态绘制一次。\n                //解决在onUpdate中可能出现的异常会导致绘制有问题。\n                //这样的话，至少最后的结果会是对的。\n                _update( me._pointList );\n                callback && callback( me );\n            }\n        });\n    }\n\n    _getPointPosStr(list)\n    {\n        var obj = {};\n        _.each(list, function(p, i) {\n            if( !p ){\n                //折线图中这个节点可能没有\n                return;\n            };\n\n            obj[\"p_1_\" + i] = p[1]; //p_y==p_1\n            obj[\"p_0_\" + i] = p[0]; //p_x==p_0\n        });\n        return obj;\n    }\n\n    _getPointList(data)\n    {\n        var list = [];\n        for (var a = 0, al = data.length; a < al; a++) {\n            var o = data[a];\n            list.push([\n                o.x,\n                o.y\n            ]);\n        };\n        return list;\n    }\n\n    _widget( opt )\n    {\n        var me = this;\n        !opt && (opt ={});\n        \n        me._pointList = this._getPointList(me.data);\n\n        if (me._pointList.length == 0) {\n            //filter后，data可能length==0\n            return;\n        };\n        var list = [];\n        if (opt.animation) {\n            var firstNode = this._getFirstNode();\n            var firstY = firstNode ? firstNode.y : undefined;\n            for (var a = 0, al = me.data.length; a < al; a++) {\n                var o = me.data[a];\n                list.push([\n                    o.x,\n                    _.isNumber( o.y ) ? firstY : o.y\n                ]);\n            };\n        } else {\n            list = me._pointList;\n        };\n        \n        me._currPointList = list;\n\n        var bline = new BrokenLine({ //线条\n            context: {\n                pointList: list,\n                lineWidth: me.line.lineWidth,\n                y: me.y,\n                strokeStyle : me._getLineStrokeStyle( list ), //_getLineStrokeStyle 在配置线性渐变的情况下会需要\n                smooth: me.line.smooth,\n                lineType: me._getProp(me.line.lineType),\n                smoothFilter: function(rp) {\n                    //smooth为true的话，折线图需要对折线做一些纠正，不能超过底部\n                    if (rp[1] > 0) {\n                        rp[1] = 0;\n                    } else if( Math.abs(rp[1]) > me.h ) {\n                        rp[1] = -me.h;\n                    }\n                },\n                lineCap: \"round\"\n            }\n        });\n\n        if (!this.line.enabled) {\n            bline.context.visible = false\n        };\n        me.sprite.addChild(bline);\n        me._bline = bline;\n\n        var area = new Path({ //填充\n            context: {\n                path: me._fillLine(bline),\n                fillStyle: me._getFillStyle(), \n                globalAlpha: _.isArray(me.area.alpha) ? 1 : me.area.alpha\n            }\n        });\n\n        if( !this.area.enabled ){\n            area.context.visible = false\n        }\n        me.sprite.addChild(area);\n        me._area = area;\n\n        me._createNodes();\n        me._createTexts();\n    }\n\n    _getFirstNode()\n    {\n        var _firstNode = null;\n        for( var i=0,l=this.data.length; i<l; i++ ){\n            var nodeData = this.data[i];\n            if( _.isNumber( nodeData.y ) ){\n                if( _firstNode === null || ( this._yAxis.align == \"right\" ) ){\n                    //_yAxis为右轴的话，\n                    _firstNode = nodeData;\n                }\n                if( this._yAxis.align !== \"right\" && _firstNode !== null ){\n                    break;\n                }\n            };\n        } \n        \n        return _firstNode;    \n    }\n\n    _getFillStyle()\n    {\n        var me = this;\n    \n        var fill_gradient = null;\n\n        // _fillStyle 可以 接受渐变色，可以不用_getColor， _getColor会过滤掉渐变色\n        var _fillStyle = me._getProp(me.area.fillStyle) || me._getLineStrokeStyle( null, \"fillStyle\" );\n\n        if (_.isArray(me.area.alpha) && !(_fillStyle instanceof CanvasGradient)) {\n            //alpha如果是数组，那么就是渐变背景，那么就至少要有两个值\n            //如果拿回来的style已经是个gradient了，那么就不管了\n            me.area.alpha.length = 2;\n            if (me.area.alpha[0] == undefined) {\n                me.area.alpha[0] = 0;\n            };\n            if (me.area.alpha[1] == undefined) {\n                me.area.alpha[1] = 0;\n            };\n\n            //从bline中找到最高的点\n            var topP = _.min(me._bline.context.pointList, function(p) {\n                return p[1]\n            });\n\n            if( topP[0] === undefined || topP[1] === undefined ){\n                return null\n            };\n\n            //创建一个线性渐变\n            fill_gradient = me.ctx.createLinearGradient(topP[0], topP[1], topP[0], 0);\n\n            var rgb = color.colorRgb( _fillStyle );\n            var rgba0 = rgb.replace(')', ', ' + me._getProp(me.area.alpha[0]) + ')').replace('RGB', 'RGBA');\n            fill_gradient.addColorStop(0, rgba0);\n\n            var rgba1 = rgb.replace(')', ', ' + me.area.alpha[1] + ')').replace('RGB', 'RGBA');\n            fill_gradient.addColorStop(1, rgba1);\n\n            _fillStyle = fill_gradient;\n        };\n    \n        return _fillStyle;\n    }\n\n    _getLineStrokeStyle( pointList, from )\n    {\n        var me = this;\n        var _style\n        if( !this._opt.line || !this._opt.line.strokeStyle ){\n            //如果用户没有配置line.strokeStyle，那么就用默认的\n            return this.line.strokeStyle;\n        };\n\n        if( this._opt.line.strokeStyle.lineargradient ){\n            //如果用户配置 填充是一个线性渐变\n            //从bline中找到最高的点\n            !pointList && ( pointList = this._bline.context.pointList );\n            \n            var topP = _.min(pointList, function(p) {\n                return p[1];\n            });\n            var bottomP = _.max(pointList, function(p) {\n                return p[1];\n            });\n            if( from == \"fillStyle\" ){\n                bottomP = [ 0 , 0 ];\n            };\n\n            if( topP[0] === undefined || topP[1] === undefined || bottomP[1] === undefined ){\n                return null;\n            };\n       \n            //var bottomP = [ 0 , 0 ];\n            //创建一个线性渐变\n            //console.log( topP[0] + \"|\"+ topP[1]+ \"|\"+  topP[0]+ \"|\"+ bottomP[1] )\n            _style = me.ctx.createLinearGradient(topP[0], topP[1], topP[0], bottomP[1]);\n            _.each( this._opt.line.strokeStyle.lineargradient , function( item , i ){\n                _style.addColorStop( item.position , item.color);\n            });\n\n            return _style;\n\n        } else {\n            //构造函数中执行的这个方法，还没有line属性\n            //if( this.line && this.line.strokeStyle ){\n            //    _style = this.line.strokeStyle\n            //} else {\n                _style = this._getColor( this._opt.line.strokeStyle );\n            //}\n            return _style;\n        }\n        \n    }\n\n\n    _createNodes()\n    {\n        var me = this;\n        var list = me._currPointList;\n\n        if ((me.node.enabled || list.length == 1) && !!me.line.lineWidth) { //拐角的圆点\n            if( !this._circles ){\n                this._circles = new Canvax.Display.Sprite({});\n                this.sprite.addChild(this._circles);\n            };\n            \n            var iNode = 0; //这里不能和下面的a对等，以为list中有很多无效的节点\n            for (var a = 0, al = list.length; a < al; a++) {\n                var _point = me._currPointList[a];\n                if( !_point || !_.isNumber( _point[1] ) ){\n                    //折线图中有可能这个point为undefined\n                    continue;\n                };\n\n                var context = {\n                    x: _point[0],\n                    y: _point[1],\n                    r: me._getProp(me.node.radius, a),\n                    lineWidth: me._getProp(me.node.lineWidth, a) || 2,\n                    strokeStyle: me._getColor( me.node.strokeStyle, a ),\n                    fillStyle: me.node.fillStyle\n                };\n\n                var circle = me._circles.children[ iNode ];\n                if( circle ){\n                    _.extend( circle.context , context );\n                } else {\n                    circle = new Circle({\n                        context: context\n                    });\n                    me._circles.addChild(circle);\n                };\n                 \n                if (me.node.corner) { //拐角才有节点\n                    var y = me._pointList[a][1];\n                    var pre = me._pointList[a - 1];\n                    var next = me._pointList[a + 1];\n                    if (pre && next) {\n                        if (y == pre[1] && y == next[1]) {\n                            circle.context.visible = false;\n                        }\n                    }\n                };\n\n                iNode++;\n            };\n\n            //把过多的circle节点删除了\n            if( me._circles.children.length > iNode ){\n                for( var i = iNode,l=me._circles.children.length; i<l; i++ ){\n                    me._circles.children[i].destroy();\n                    i--;\n                    l--;\n                }\n            };\n        };\n    }\n\n    _createTexts()\n    {\n        \n        var me = this;\n        var list = me._currPointList;\n\n        if ( me.label.enabled ) { //节点上面的文本info\n            if(!this._labels){\n                this._labels = new Canvax.Display.Sprite({});\n                this.sprite.addChild(this._labels);\n            }\n            \n            var iNode = 0; //这里不能和下面的a对等，以为list中有很多无效的节点\n            for (var a = 0, al = list.length; a < al; a++) {\n                var _point = list[a];\n                if( !_point || !_.isNumber( _point[1] ) ){\n                    //折线图中有可能这个point为undefined\n                    continue;\n                };\n\n                var context = {\n                    x: _point[0],\n                    y: _point[1] - 3,\n                    fontSize: this.label.fontSize,\n                    textAlign: \"center\",\n                    textBaseline: \"bottom\",\n                    fillStyle: me._getColor( me.label.fontColor, a ),\n                    lineWidth:1,\n                    strokeStyle:\"#ffffff\"\n                };\n\n                var value = me.data[ a ].value;\n                if (_.isFunction(me.label.format)) {\n                    value = (me.label.format(value, me.data[ a ]) || value );\n                };\n\n                if( value == undefined || value == null ){\n                    continue;\n                };\n\n                var _label = this._labels.children[ iNode ];\n                if( _label ){\n                    _label.resetText( value );\n                    _.extend( _label.context, context );\n                } else {\n                    _label =  new Canvax.Display.Text( value , {\n                        context: context\n                    });\n                    me._labels.addChild(_label);\n                    me._checkTextPos( _label , a );\n                }\n                iNode++;\n            };\n\n            //把过多的circle节点删除了\n            if( me._labels.children.length > iNode ){\n                for( var i = iNode,l=me._labels.children.length; i<l; i++ ){\n                    me._labels.children[i].destroy();\n                    i--;\n                    l--;\n                }\n            };            \n        };\n        \n    }\n\n    _checkTextPos( _label , ind )\n    {\n        var me = this;\n        var list = me._currPointList;\n        var pre = list[ ind - 1 ];\n        var next = list[ ind + 1 ];\n\n        if( \n            pre && next &&\n            ( pre[1] < _label.context.y && next[1] < _label.context.y )\n         ){\n            _label.context.y += 7;\n            _label.context.textBaseline = \"top\"\n        }\n      \n    }\n\n    _fillLine(bline)\n    { //填充直线\n        var fillPath = _.clone(bline.context.pointList);\n\n        var path = \"\";\n        \n        var originPos = -this._yAxis.originPos;\n\n        var _currPath = null;\n\n\n        _.each( fillPath, function( point, i ){\n            if( _.isNumber( point[1] ) ){\n                if( _currPath === null ){\n                    _currPath = [];\n                }\n                _currPath.push( point );\n            } else {\n                // not a number\n                if( _currPath && _currPath.length ){\n                    getOnePath()\n                };\n            }\n\n            if( i == fillPath.length-1 &&  _.isNumber( point[1] )){\n                getOnePath();\n            }\n\n        } );\n\n        function getOnePath(){\n            _currPath.push(\n                [_currPath[_currPath.length - 1][0], originPos], [_currPath[0][0], originPos], [_currPath[0][0], _currPath[0][1]]\n            );\n            path += getPath( _currPath );\n            _currPath = null;\n        }\n\n        return path;\n    }\n}","import Canvax from \"canvax\"\nimport Group from \"./group\"\nimport {getDisMinATArr} from \"../../../utils/tools\"\nimport GraphsBase from \"../index\"\nimport { _ } from \"mmvis\"\n\nconst Rect = Canvax.Shapes.Rect;\n\nexport default class LineGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"line\";\n\n        //默认给左轴\n        this.yAxisAlign = \"left\";\n\n        this.field  = null;\n        this.enabledField = null;\n        \n        this.groups = []; //群组集合\n\n        _.extend(true, this, opt);\n\n        this.init(this._opt);\n    }\n\n    init(opt)\n    {\n        opt.yAxisAlign && (this.yAxisAlign = opt.yAxisAlign);\n    }\n\n    draw(opt)\n    {\n        !opt && (opt ={});\n        this.width = opt.width;\n        this.height = opt.height;\n        _.extend( true, this.origin, opt.origin );\n\n        this.sprite.context.x = this.origin.x;\n        this.sprite.context.y = this.origin.y;\n\n        this.data = this._trimGraphs();\n\n        this._setGroupsForYfield( this.data , null, opt );\n\n        //this.grow();\n        if( this.animation && !opt.resize ){\n            this.grow();\n        } else {\n            this.fire(\"complete\");\n        }\n        \n        return this;\n        \n    }\n\n    resetData(dataFrame, dataTrigger)\n    {\n        \n        var me = this;\n\n        if( dataFrame ){\n            me.dataFrame = dataFrame;\n            me.data = me._trimGraphs();\n        };\n\n        _.each( me.groups, function(g){\n            g.resetData( me.data[ g.field ].data , dataTrigger );\n        } );\n    }\n\n    setEnabledField()\n    {\n        //要根据自己的 field，从enabledFields中根据enabled数据，计算一个 enabled版本的field子集\n        this.enabledField = this.app.getComponent({name:'coord'}).filterEnabledFields( this.field );\n    }\n\n    //dataFrame\n    _trimGraphs()\n    {\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n        \n        //{\"uv\":{}.. ,\"click\": \"pv\":]}\n        //这样按照字段摊平的一维结构\n        var tmpData = {}; \n\n        me.setEnabledField();\n\n        _.each( _.flatten( me.enabledField ) , function( field, i ){\n            //var maxValue = 0;\n\n            var fieldMap = me.app.getComponent({name:'coord'}).getFieldMapOf( field );\n\n            //单条line的全部data数据\n            var _lineData = me.dataFrame.getFieldData(field);\n            if( !_lineData ) return;\n\n            var _data = [];\n\n            for (var b = 0, bl = _lineData.length; b < bl; b++) {\n\n                //返回一个和value的结构对应的point结构{x:  y: }\n                var point = _coord.getPoint( {\n                    iNode : b,\n                    field : field,\n                    value : {\n                        //x:\n                        y : _lineData[b]\n                    }\n                } );\n\n                var node = {\n                    type     : \"line\",\n                    iGroup   : i,\n                    iNode    : b,\n                    field    : field,\n                    value    : _lineData[b],\n                    x        : point.pos.x,\n                    y        : point.pos.y,\n                    rowData  : me.dataFrame.getRowDataAt( b ),\n                    color    : fieldMap.color\n                };\n\n                _data.push( node );\n            };\n\n            tmpData[ field ] = {\n                yAxis : fieldMap.yAxis,\n                field : field,\n                data  : _data\n            };\n\n        } );\n    \n        return tmpData;\n    }\n\n    /**\n     * 生长动画\n     */\n    grow(callback)\n    {\n        var gi = 0;\n        var gl = this.groups.length;\n        var me = this;\n        _.each(this.groups, function(g, i) {\n            g._grow(function(){\n                gi++;\n                callback && callback( g );\n                if( gi == gl ){\n                    me.fire(\"complete\");\n                }\n            });\n        });\n        return this;\n    }\n\n    show( field )\n    {\n        var me = this;\n        \n        //这个field不再这个graphs里面的，不相关\n        if( _.indexOf( _.flatten( [me.field] ), field ) == -1 ){\n            return;\n        };\n\n        this.data = this._trimGraphs();\n        this._setGroupsForYfield( this.data , field );\n        \n        _.each(this.groups, function(g, i) {\n            g.resetData( me.data[ g.field ].data );\n        });\n    }\n\n    hide( field )\n    {\n        var me = this;\n        var i = me.getGroupIndex( field );\n\n        if( !this.groups.length || i < 0 ){\n            return;\n        };\n\n        this.groups.splice(i, 1)[0].destroy();\n        this.data = this._trimGraphs();\n\n        _.each(this.groups, function(g, i) {\n            g.resetData( me.data[ g.field ].data );\n        });\n    }\n\n    getGroupIndex( field )\n    {\n        var ind = -1;\n        for( var i=0,l=this.groups.length; i<l; i++  ){\n            if( this.groups[i].field === field ){\n                ind = i;\n                break;\n            }\n        }\n        return ind\n    }\n\n    getGroup( field )\n    {\n       return this.groups[ this.getGroupIndex(field) ]\n    }\n\n    _setGroupsForYfield(data , fields, opt)\n    {\n        var me = this;\n\n        !opt && (opt ={});\n\n        if( fields ){\n            //如果有传入field参数，那么就说明只需要从data里面挑选指定的field来添加\n            //一般用在add()执行的时候\n            fields = _.flatten( [fields] );\n        }\n\n        var _flattenField = _.flatten( [ this.field ] );\n\n        _.each( data , function( g, field ){\n        \n            if( fields && _.indexOf( fields, field ) == -1 ){\n                //如果有传入fields，但是当前field不在fields里面的话，不需要处理\n                //说明该group已经在graphs里面了\n                return;\n            };\n\n            var fieldMap = me.app.getComponent({name:'coord'}).getFieldMapOf( field );\n            \n            //iGroup 是这条group在本graphs中的ind，而要拿整个图表层级的index， 就是fieldMap.ind\n            var iGroup = _.indexOf( _flattenField, field );\n\n            var group = new Group(\n                fieldMap,\n                iGroup, //不同于fieldMap.ind\n                me._opt,\n                me.ctx,\n                me.height,\n                me.width\n            );\n\n            group.draw( {\n                animation : me.animation && !opt.resize\n            }, g.data );\n\n            var insert = false;\n            //在groups数组中插入到比自己_groupInd小的元素前面去\n            for( var gi=0,gl=me.groups.length ; gi<gl ; gi++ ){\n                if( iGroup < me.groups[gi].iGroup ){\n\n                    me.groups.splice( gi , 0 , group );\n                    insert=true;\n                    me.sprite.addChildAt(group.sprite , gi);\n                    \n                    break;\n                }\n            };\n            //否则就只需要直接push就好了\n            if( !insert ){\n                me.groups.push(group);\n                me.sprite.addChild(group.sprite);\n            };\n\n        } );\n\n    }\n\n    getNodesAt( ind )\n    {\n        var _nodesInfoList = []; //节点信息集合\n        _.each( this.groups, function( group ){\n            var node = group.getNodeInfoAt( ind );\n            node && _nodesInfoList.push( node );\n        } );\n        return _nodesInfoList;\n    }\n}","import Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\nimport { _,event } from \"mmvis\"\n\nconst Circle = Canvax.Shapes.Circle;\nconst Rect = Canvax.Shapes.Rect;\nconst Line = Canvax.Shapes.Line;\n\nexport default class ScatGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"scat\";\n\n        this.field  = null;\n\n        //TODO:待开发，用groupField来做分组，比如分组出男女两组，然后方便做图例（目前没给scat实现合适的图例）\n        this.groupField = null; \n\n        this.node = {\n            shapeType : \"circle\", //节点的现状可以是圆 ，也可以是rect，也可以是三角形，后面两种后面实现\n            maxRadius : 25,  //圆圈默认最大半径\n            minRadius : 5,\n            radius    : null,\n            normalR   : 15,\n            fillStyle : null,\n            fillAlpha : 0.8,\n\n            strokeStyle : null,\n            lineWidth   : 0,\n            lineAlpha   : 0,\n            \n            focus : {\n                enabled : true,\n                lineWidth : 6,\n                lineAlpha : 0.2,\n                fillAlpha : 0.8\n            },\n            select : {\n                enabled : true,\n                lineWidth : 8,\n                lineAlpha : 0.4,\n                fillAlpha : 1\n            }\n\n            //onclick ondblclick 注册的事件都是小写\n        };\n\n        //从node点到垂直坐标y==0的连线\n        //气球的绳子\n        this.line = {\n            enabled: false,\n            lineWidth : 1,\n            strokeStyle : \"#ccc\",\n            lineType : \"dashed\"\n        };\n        \n        this.label = {\n            enabled : true,\n            field : null,\n            format : function(txt, nodeData){ \n                return txt \n            },\n            fontSize: 13,\n            fontColor: \"#888\",//\"#888\",//如果外面设置为null等false值，就会被自动设置为nodeData.fillStyle\n            strokeStyle : \"#ffffff\",\n            lineWidth : 0,\n\n            //rotation : 0, //柱状图中有需求， 这里没有目前\n            align : \"center\",  //left center right\n            verticalAlign : \"middle\", //top middle bottom\n            position : \"center\", //auto(目前等于center，还未实现),center,top,right,bottom,left\n            offsetX : 0,\n            offsetY : 0\n        };\n\n        //动画的起始位置， 默认x=data.x y = 0\n        this.aniOrigin = \"default\" //center（坐标正中） origin（坐标原点）\n        \n        _.extend( true, this , opt );\n\n        //计算半径的时候需要用到， 每次执行_trimGraphs都必须要初始化一次\n        this._rData = null;\n        this._rMaxValue = null;\n        this._rMinValue = null;\n\n\n        this.init( );\n    }\n\n    init()\n    {\n\n        this._shapesp = new Canvax.Display.Sprite({ \n            id : \"shapesp\"\n        });\n        this._textsp = new Canvax.Display.Sprite({ \n            id : \"textsp\"\n        });\n        this._linesp = new Canvax.Display.Sprite({ \n            id : \"textsp\"\n        });\n        \n        this.sprite.addChild( this._linesp );\n        this.sprite.addChild( this._shapesp );\n        this.sprite.addChild( this._textsp );\n    }\n\n    draw(opt)\n    {\n        !opt && (opt ={});\n\n        _.extend( true, this , opt );\n        this.data = this._trimGraphs(); \n        this._widget();\n        this.sprite.context.x = this.origin.x;\n        this.sprite.context.y = this.origin.y;\n\n        var me = this;\n        if( this.animation && !opt.resize && !me.inited ){\n            this.grow( function(){\n                me.fire(\"complete\");\n            } );\n        } else {\n            this.fire(\"complete\");\n        }\n\n        return this;\n    }\n\n    resetData( dataFrame , dataTrigger )\n    {\n        this.dataFrame = dataFrame;\n        this.data = this._trimGraphs(); \n        this._widget();\n    }\n\n    getNodesAt()\n    {\n        return []\n    }\n\n    _trimGraphs()\n    {\n        var tmplData = [];\n\n        var _coord = this.app.getComponent({name:'coord'});\n        var dataLen  = this.dataFrame.length;\n\n        ////计算半径的时候需要用到， 每次执行_trimGraphs都必须要初始化一次\n        this._rData = null;\n        this._rMaxValue = null;\n        this._rMinValue = null;\n\n        for( var i=0; i<dataLen; i++ ){\n            \n            var rowData = this.dataFrame.getRowDataAt(i);\n            var fieldMap = _coord.getFieldMapOf( this.field );\n\n            var point = _coord.getPoint( {\n                iNode : i,\n                field : this.field,\n                value : {\n                    //x:\n                    y : rowData[ this.field ]\n                }\n            } );\n\n            var nodeLayoutData = {\n                rowData  : rowData,\n                x        : point.pos.x,\n                y        : point.pos.y,\n                value    : point.value,\n                field    : this.field,\n                fieldColor : fieldMap.color,\n                iNode    : i,\n\n                focused  : false,\n                selected : false,\n\n                //下面的属性都单独设置\n                radius      : null,   //这里先不设置，在下面的_setR里单独设置\n                fillStyle   : null,\n                color       : null,\n                strokeStyle : null,\n                lineWidth : 0,\n                shapeType : null,\n                label : null,\n\n                nodeElement : null //对应的canvax 节点， 在widget之后赋值\n            };\n\n            this._setR( nodeLayoutData );\n            this._setFillStyle( nodeLayoutData );\n            this._setStrokeStyle( nodeLayoutData );\n            this._setLineWidth( nodeLayoutData );\n            this._setNodeType( nodeLayoutData );\n            this._setText( nodeLayoutData );\n\n            tmplData.push( nodeLayoutData );\n        };\n\n        return tmplData;\n    }\n\n    _setR( nodeLayoutData )\n    {\n\n        var r = this.node.normalR;\n        var rowData = nodeLayoutData.rowData;\n        if( this.node.radius != null ){\n            if( _.isString( this.node.radius ) && rowData[ this.node.radius ] ){\n                //如果配置了某个字段作为r，那么就要自动计算比例\n                if( !this._rData && !this._rMaxValue && !this._rMinValue ){\n                    this._rData = this.dataFrame.getFieldData( this.node.radius );\n                    this._rMaxValue = _.max( this._rData );\n                    this._rMinValue = _.min( this._rData );\n                };\n\n                var rVal = rowData[ this.node.radius ];\n\n                if( this._rMaxValue ==  this._rMinValue ){\n                    r = this.node.minRadius + ( this.node.maxRadius - this.node.minRadius )/2;\n                } else {\n                    r = this.node.minRadius + (rVal-this._rMinValue)/( this._rMaxValue-this._rMinValue ) * ( this.node.maxRadius - this.node.minRadius )\n                };\n            };\n            if( _.isFunction( this.node.radius ) ){\n                r = this.node.radius( rowData );\n            };\n            if( !isNaN( parseInt( this.node.radius ) ) ){\n                r = parseInt( this.node.radius )\n            };\n        };\n        nodeLayoutData.radius = r;\n        return this;\n\n    }\n\n    _setText( nodeLayoutData )\n    {\n        if( this.label.field != null ){\n            if( _.isString( this.label.field ) && nodeLayoutData.rowData[ this.label.field ] ){\n                nodeLayoutData.label = this.label.format( nodeLayoutData.rowData[ this.label.field ], nodeLayoutData );\n            }\n        }\n    }\n\n    _setFillStyle( nodeLayoutData )\n    {\n        nodeLayoutData.color = nodeLayoutData.fillStyle = this._getStyle( this.node.fillStyle, nodeLayoutData );\n        return this;\n    }\n\n    _setStrokeStyle( nodeLayoutData )\n    {\n        nodeLayoutData.strokeStyle = this._getStyle( (this.node.strokeStyle || this.node.fillStyle), nodeLayoutData );\n        return this;\n    }\n\n    _getStyle( style, nodeLayoutData )\n    {\n        var _style = style;\n        if( _.isArray( style ) ){\n            _style = style[ nodeLayoutData.iGroup ]\n        };\n        if( _.isFunction( style ) ){\n            _style = style( nodeLayoutData );\n        };\n        if( !_style ){\n            _style = nodeLayoutData.fieldColor;\n        };\n        return _style;\n    }\n\n    _setLineWidth( nodeLayoutData )\n    {\n        nodeLayoutData.lineWidth = this.node.lineWidth;\n        return this;\n    }\n\n    _setNodeType( nodeLayoutData )\n    {\n        var shapeType = this.node.shapeType;\n        if( _.isArray( shapeType ) ){\n            shapeType = shapeType[ nodeLayoutData.iGroup ]\n        };\n        if( _.isFunction( shapeType ) ){\n            shapeType = shapeType( nodeLayoutData );\n        };\n        if( !shapeType ){\n            shapeType = \"circle\"\n        };\n        nodeLayoutData.shapeType = shapeType;\n        return this;\n    }\n\n    //根据layoutdata开始绘制\n    _widget()\n    {\n        var me = this;\n\n        //那么有多余的元素要去除掉 begin\n        if( me._shapesp.children.length > me.data.length ){\n            for( var i=me.data.length; i<me._shapesp.children.length; i++ ){\n                me._shapesp.getChildAt( i-- ).destroy();\n            }\n        };\n        if( me._textsp.children.length > me.data.length ){\n            for( var i=me.data.length; i<me._textsp.children.length; i++ ){\n                me._textsp.getChildAt( i-- ).destroy();\n            }\n        };\n        if( me._linesp.children.length > me.data.length ){\n            for( var i=me.data.length; i<me._linesp.children.length; i++ ){\n                me._linesp.getChildAt( i-- ).destroy();\n            }\n        };\n        //那么有多余的元素要去除掉 end\n\n        _.each( me.data , function( nodeData, iNode ){\n\n            var _context = me._getNodeContext( nodeData );\n            var Shape = nodeData.shapeType == \"circle\" ? Circle : Rect;\n\n            var _nodeElement = me._shapesp.getChildAt( iNode );\n            if( !_nodeElement ){\n                _nodeElement = new Shape({\n                    id: \"shape_\"+iNode,\n                    hoverClone : false,\n                    context : _context\n                });\n                me._shapesp.addChild( _nodeElement );\n\n                _nodeElement.on(event.types.get(), function(e) {\n                    \n                     e.eventInfo = {\n                         title : null,\n                         trigger : me.node,\n                         nodes : [ this.nodeData ]\n                     };\n                     if( this.nodeData.label ){\n                         e.eventInfo.title = this.nodeData.label;\n                     };\n            \n                     //fire到root上面去的是为了让root去处理tips\n                     me.app.fire( e.type, e );\n                 });\n\n            } else {\n                //_nodeElement.context = _context;\n                //_.extend( _nodeElement.context, _context );\n                _nodeElement.animate( _context );\n            };\n        \n            //数据和canvax原件相互引用\n            _nodeElement.nodeData = nodeData;\n            _nodeElement.iNode = iNode;\n            nodeData.nodeElement = _nodeElement;\n\n            me.node.focus.enabled && _nodeElement.hover(function(e){\n                me.focusAt( this.nodeData.iNode );\n            } , function(e){\n                !this.nodeData.selected && me.unfocusAt( this.nodeData.iNode );\n            });\n\n            \n\n            if( me.line.enabled ){\n\n                var _line = me._linesp.getChildAt( iNode );\n                var _lineContext = {\n                    start : {\n                        x : _context.x,\n                        y : _context.y+_context.r\n                    },\n                    end : {\n                        x : _context.x,\n                        y : 0\n                    },\n                    lineWidth : me.line.lineWidth,\n                    strokeStyle : me.line.strokeStyle,\n                    lineType: me.line.lineType\n                };\n\n                if(!_line){\n                    _line = new Line({\n                        context : _lineContext\n                    });\n                    me._linesp.addChild( _line );\n                } else {\n                    _line.animate( _lineContext )\n                }\n\n                _nodeElement._line = _line;\n                \n            };\n\n            //如果有label\n            if( nodeData.label && me.label.enabled ){\n        \n                var _label = me._textsp.getChildAt( iNode );\n                var _labelContext = {};\n                if( !_label ){\n                    _label = new Canvax.Display.Text( nodeData.label , {\n                        id: \"scat_text_\"+iNode,\n                        context: {}\n                    });\n                    _labelContext = me._getTextContext( _label, _context );\n                    //_label.animate( _labelContext );\n                    _.extend( _label.context , _labelContext );\n                    me._textsp.addChild( _label );\n                    \n                } else {\n                    _label.resetText(  nodeData.label );\n                    _labelContext = me._getTextContext( _label, _context );\n                    _label.animate( _labelContext );\n                };\n\n                //图形节点和text文本相互引用\n                _nodeElement.labelElement = _label;\n                _label.nodeElement = _nodeElement;\n            };\n        \n        } );\n     \n    }\n\n    _getTextPosition( _label, opt )\n    {\n        var x=0,y=0;\n        switch( this.label.position ){\n            case \"center\" :\n                x = opt.x;\n                y = opt.y;\n                break;\n            case \"top\" :\n                x = opt.x;\n                y = opt.y - opt.r;\n                break;\n            case \"right\" :\n                x = opt.x + opt.r;\n                y = opt.y;\n                break;\n            case \"bottom\" :\n                x = opt.x;\n                y = opt.y + opt.r;\n                break;\n            case \"left\" :\n                x = opt.x - opt.r;\n                y = opt.y;\n                break;\n            case \"auto\" :\n                x = opt.x;\n                y = opt.y;\n                if( _label.getTextWidth() > opt.r*2 ){\n                    y = opt.y + opt.r + _label.getTextHeight() * 0.5;\n                };\n                break;\n        };\n\n        var point = {\n            x: x + this.label.offsetX,\n            y: y + this.label.offsetY\n        };\n\n        return point;\n    }\n\n    _getTextContext( _label, _context )\n    {\n        var textPoint = this._getTextPosition( _label, _context );\n\n        var fontSize = this.label.fontSize;\n        if( _label.getTextWidth() > _context.r*2 ){\n            fontSize -= 2;\n        };\n        \n        var ctx = {\n            x: textPoint.x,\n            y: textPoint.y,\n            fillStyle: this.label.fontColor || _context.fillStyle,\n            fontSize: fontSize,\n            strokeStyle : this.label.strokeStyle || _context.fillStyle,\n            lineWidth : this.label.lineWidth,\n            textAlign : this.label.align,\n            textBaseline : this.label.verticalAlign\n        };\n\n        if( this.animation && !this.inited ){\n            this._setCtxAniOrigin(ctx);\n        };\n        \n        return ctx;\n    }\n\n    _setCtxAniOrigin( ctx ) {\n        if( this.aniOrigin == \"default\" ){\n            ctx.y = 0;\n        };\n        if( this.aniOrigin == \"origin\" ){\n            var _coord = this.app.getComponent({name:'coord'});\n            var originPoint = _coord.getOriginPos( {field: this.field} );\n            ctx.x = originPoint.x;\n            ctx.y = originPoint.y;\n        };\n        if( this.aniOrigin == \"center\" ){\n            ctx.x = this.width/2;\n            ctx.y = -(this.height/2);\n        }; \n    }\n\n    _getNodeContext( nodeData )\n    {\n        if( nodeData.shapeType == \"circle\" ){\n            return this._getCircleContext( nodeData );\n        }\n    }\n\n    _getCircleContext( nodeData )\n    {\n        var ctx = {\n            x : nodeData.x,\n            y : nodeData.y,\n            r : nodeData.radius,\n            fillStyle : nodeData.fillStyle,\n            strokeStyle : nodeData.strokeStyle,\n            lineWidth : nodeData.lineWidth,\n            fillAlpha : this.node.fillAlpha,\n            cursor : \"pointer\"\n        };\n\n        if( this.animation && !this.inited ){\n            \n            this._setCtxAniOrigin(ctx);\n\n            ctx.r = 1;\n        };\n        return ctx;\n    }\n\n    /**\n     * 生长动画\n     */\n    grow( callback )\n    {\n        var i = 0;\n        var l = this.data.length-1;\n        var me = this;\n        _.each( this.data , function( nodeData ){\n            nodeData.nodeElement.animate({\n                x : nodeData.x,\n                y : nodeData.y,\n                r : nodeData.radius\n            }, {\n                onUpdate: function( opt ){\n                    if( this.labelElement && this.labelElement.context ){\n                        var _textPoint = me._getTextPosition( this.labelElement, opt );\n                        this.labelElement.context.x = _textPoint.x;\n                        this.labelElement.context.y = _textPoint.y;\n                    };\n                    if( this._line && this._line.context ){\n                        this._line.context.start.y = opt.y+opt.r;\n                    };\n                },\n                delay : Math.round(Math.random()*300),\n                onComplete : function(){\n                    i = i+1;\n                    if( i == l ){\n                        callback && callback();\n                    }\n                }\n            })\n        } );\n    }\n\n\n    focusAt( ind ){\n        var nodeData = this.data[ ind ];\n        if( !this.node.focus.enabled || nodeData.focused ) return;\n\n        var nctx = nodeData.nodeElement.context; \n        nctx.lineWidth = this.node.focus.lineWidth;\n        nctx.lineAlpha = this.node.focus.lineAlpha;\n        nctx.fillAlpha = this.node.focus.fillAlpha;\n        nodeData.focused = true;\n    }\n    \n    unfocusAt( ind ){\n        var nodeData = this.data[ ind ];\n        if( !this.node.focus.enabled || !nodeData.focused ) return;\n        var nctx = nodeData.nodeElement.context; \n        nctx.lineWidth = this.node.lineWidth;\n        nctx.lineAlpha = this.node.lineAlpha;\n        nctx.fillAlpha = this.node.fillAlpha;\n\n        nodeData.focused = false;\n    }\n    \n    selectAt( ind ){\n        \n        var nodeData = this.data[ ind ];\n        if( !this.node.select.enabled || nodeData.selected ) return;\n        \n        var nctx = nodeData.nodeElement.context; \n        nctx.lineWidth = this.node.select.lineWidth;\n        nctx.lineAlpha = this.node.select.lineAlpha;\n        nctx.fillAlpha = this.node.select.fillAlpha;\n\n        nodeData.selected = true;\n    }\n\n    unselectAt( ind ){\n        var nodeData = this.data[ ind ];\n        if( !this.node.select.enabled || !nodeData.selected ) return;\n       \n        var nctx = nodeData.nodeElement.context; \n\n        if( nodeData.focused ) {\n            //有e 说明这个函数是事件触发的，鼠标肯定还在node上面\n            nctx.lineWidth = this.node.focus.lineWidth;\n            nctx.lineAlpha = this.node.focus.lineAlpha;\n            nctx.fillAlpha = this.node.focus.fillAlpha;\n        } else {\n            nctx.lineWidth = this.node.lineWidth;\n            nctx.lineAlpha = this.node.lineAlpha;\n            nctx.fillAlpha = this.node.fillAlpha;\n        }\n\n        nodeData.selected = false;\n    }\n\n}\n","//单环pie\n\nimport Canvax from \"canvax\"\nimport { _,event } from \"mmvis\"\n\n\nconst Sector = Canvax.Shapes.Sector\nconst Path = Canvax.Shapes.Path\nconst Rect = Canvax.Shapes.Rect\nconst AnimationFrame = Canvax.AnimationFrame\n\nexport default class Pie extends event.Dispatcher\n{\n    constructor( _graphs, data )\n    {\n        super();\n\n        this.width = 0;\n        this.height = 0;\n        this.origin = {\n            x : 0,\n            y : 0\n        };\n\n        //这个pie所属的graphs对象\n        this._graphs = _graphs;\n\n        this.domContainer = _graphs.app.canvax.domView;\n\n        this.data = data;\n\n        this.sprite = null;\n        this.textSp = null;\n        this.sectorsSp = null;\n        this.selectedSp = null;\n\n        this.init();\n\n        this.sectors = [];\n        this.textMaxCount = 15;\n        this.textList = [];\n\n        this.completed = false;//首次加载动画是否完成\n    }\n\n    init()\n    {\n\n        this.sprite = new Canvax.Display.Sprite();\n\n        this.sectorsSp = new Canvax.Display.Sprite();\n        this.sprite.addChild(this.sectorsSp);\n\n        this.selectedSp = new Canvax.Display.Sprite();\n        this.sprite.addChild(this.selectedSp);\n\n        if (this._graphs.label.enabled) {\n            this.textSp = new Canvax.Display.Sprite();\n        };\n\n    }\n\n    draw(opt)\n    {\n        var me = this;\n\n        _.extend(true, this, opt);\n\n        this.sprite.context.x = me.origin.x;\n        this.sprite.context.y = me.origin.y;\n \n        me._widget();\n            \n    }\n\n    resetData( data )\n    {\n        var me = this;\n        this.data = data;\n        \n        me.destroyLabel();\n\n        var completedNum = 0;\n        for (var i = 0; i < me.sectors.length; i++) {\n            var sec = me.sectors[i];\n            var secData = this.data.list[i];\n\n            sec.animate({\n                r : secData.outRadius,\n                startAngle : secData.startAngle,\n                endAngle : secData.endAngle\n            },{\n                duration : 280,\n                onComplete : function(){\n                    completedNum++;\n                    if( completedNum == me.sectors.length ){\n                        if ( me._graphs.label.enabled ) {\n                            me._startWidgetLabel();\n                        };\n                    }\n                }\n            });\n        }\n    }\n\n    _widget() \n    {\n        var me = this;\n        var list = me.data.list;\n        var total = me.data.total;\n\n        var moreSecData;\n        if ( list.length > 0 && total > 0 ) {\n            me.textSp && me.sprite.addChild(me.textSp);\n            for (var i = 0; i < list.length; i++) {\n                var item = list[i];\n            \n                //扇形主体          \n                var sector = new Sector({\n                    hoverClone: false,\n                    xyToInt : false, //扇形不需要自动取整\n                    context: {\n                        x: item.focused ? item.outOffsetx : 0,\n                        y: item.focused ? item.outOffsety : 0,\n                        r0: item.innerRadius,\n                        r: item.outRadius,\n                        startAngle: item.startAngle,\n                        endAngle: item.endAngle,\n                        fillStyle: item.fillStyle,\n                        //iNode: item.iNode,\n                        cursor: \"pointer\"\n                    },\n                    id: 'sector' + i\n                });\n            \n                sector.nodeData = item;\n\n                item.focusEnabled && sector.hover(function(e){\n                    me.focusOf( this.nodeData );\n                } , function(e){\n                    !this.nodeData.selected && me.unfocusOf( this.nodeData );\n                });\n\n                //触发注册的事件\n                sector.on(event.types.get(), function (e) {\n                    \n                    //me.fire( e.type, e );\n                \n                    e.eventInfo = {\n                        trigger : me._graphs.node,\n                        nodes : [ this.nodeData ]\n                    };\n\n                    //图表触发，用来处理Tips\n                    me._graphs.app.fire( e.type, e );\n\n                });\n\n                me.sectorsSp.addChildAt(sector, 0);\n                me.sectors.push( sector );\n                \n            };\n\n            if (me._graphs.label.enabled) {\n                me._startWidgetLabel();\n            };\n        }\n    }\n\n    focusOf( node , callback)\n    {\n        if( node.focused ) return;\n        var me = this;\n        var sec = me.sectors[ node.iNode ];\n\n        sec.animate({\n            x: node.outOffsetx,\n            y: node.outOffsety\n        }, {\n            duration: 100,\n            onComplete: function () {\n                callback && callback();\n            }\n        });\n        node.focused = true;\n    }\n\n    unfocusOf( node, callback )\n    {\n        if( !node.focused ) return;\n        var me = this;\n\n        var sec = me.sectors[ node.iNode ];\n        sec.animate({\n            x: 0,\n            y: 0\n        }, {\n            duration: 100,\n            onComplete: function () {\n                callback && callback();\n            }\n        });\n\n        node.focused = false;\n    }\n\n    selectOf ( node , e ) \n    {\n        var me = this;\n        if( !this.sectors.length || !node.selectEnabled ){\n            return;\n        };\n\n        var sec = this.sectors[node.iNode];\n     \n        if ( node.selected ) {\n            return\n        };\n        \n        if (!node.focused) {\n            node._focusTigger = \"select\";\n            this.focusOf( node , function () {\n                me.addCheckedSec(sec);\n            });\n        } else {\n            this.addCheckedSec(sec);\n        };\n        node.selected = true;\n    }\n\n    unselectOf ( node , e ) \n    {\n        var sec = this.sectors[ node.iNode ];\n        if (!node.selected || !node.selectEnabled) {\n            return\n        };\n        var me = this;\n        me.cancelCheckedSec(sec, function() {\n            if( node._focusTigger == \"select\" ){\n                me.unfocusOf(node);\n            };\n        });\n        node.selected = false;\n    }\n\n    addCheckedSec(sec, callback)\n    {\n        var secc = sec.context;\n        var nodeData = sec.nodeData;\n\n        if( !secc ) return;\n        \n        var sector = new Sector({\n            xyToInt : false,\n            context : {\n                x: secc.x,\n                y: secc.y,\n                r0: secc.r - 1,\n                r: secc.r + nodeData.selectedR,\n                startAngle: secc.startAngle,\n                endAngle: secc.startAngle, //secc.endAngle,\n                fillStyle: secc.fillStyle,\n                globalAlpha: nodeData.selectedAlpha\n            },\n            id: 'selected_' + sec.id\n        });\n        sec._selectedSec = sector\n\n        this.selectedSp.addChild(sector);\n\n        if( this.completed ){\n            sector.animate({\n                endAngle: secc.endAngle\n            }, {\n                duration: this._getAngleTime(secc),\n                onComplete: function () {\n                    callback && callback();\n                }\n            });\n        } else {\n            sector.context.endAngle = secc.endAngle;\n        }\n    }\n\n    cancelCheckedSec (sec, callback) \n    {\n        var selectedSec = sec._selectedSec;\n        \n        selectedSec.animate({\n            startAngle: selectedSec.context.endAngle - 0.5\n        }, {\n            duration: this._getAngleTime( sec.context ),\n            onComplete: function () {\n                delete sec._selectedSec;\n                selectedSec.destroy();\n                callback && callback();\n            }\n        });\n    }\n\n    _getAngleTime (secc) \n    {\n        return Math.abs(secc.startAngle - secc.endAngle) / 360 * 500\n    }\n\n\n\n    grow( callback ) \n    {\n        var me = this;\n        \n        _.each(me.sectors, function (sec, iNode) {\n            if (sec.context) {\n                sec.context.r0 = 0;\n                sec.context.r = 0;\n                sec.context.startAngle = me._graphs.startAngle;\n                sec.context.endAngle = me._graphs.startAngle;\n            }\n        });\n\n        me._hideGrowLabel();\n\n        AnimationFrame.registTween({\n            from: {\n                process: 0\n            },\n            to: {\n                process: 1\n            },\n            duration: 500,\n            onUpdate: function ( status ) {\n                for (var i = 0; i < me.sectors.length; i++) {\n                    var sec = me.sectors[i];\n                    var nodeData = sec.nodeData;\n                    var secc = sec.context;\n\n                    var _startAngle = nodeData.startAngle;\n                    var _endAngle   = nodeData.endAngle;\n                    var _r  = nodeData.outRadius;\n                    var _r0 = nodeData.innerRadius;\n\n                    if (secc) {\n                        secc.r = _r * status.process;\n                        secc.r0 = _r0 * status.process;\n                        if (i == 0) {\n                            secc.startAngle = _startAngle;\n                            secc.endAngle = _startAngle + (_endAngle - _startAngle) * status.process;\n                        } else {\n                            var lastEndAngle = function (iNode) {\n                                var lastIndex = iNode - 1;\n                                var lastSecc = me.sectors[lastIndex].context;\n                                if (lastIndex == 0) {\n                                    return lastSecc ? lastSecc.endAngle : 0;\n                                }\n                                if (lastSecc) {\n                                    return lastSecc.endAngle;\n                                } else {\n                                    return arguments.callee(lastIndex);\n                                }\n                            } (i);\n                            secc.startAngle = lastEndAngle;\n                            secc.endAngle = secc.startAngle + ( _endAngle - _startAngle ) * status.process;\n                        }\n                        //如果已经被选中，有一个选中态\n                        if( sec._selectedSec ){\n                            sec._selectedSec.context.r0 = secc.r - 1;\n                            sec._selectedSec.context.r  = secc.r + nodeData.selectedR;\n                            sec._selectedSec.context.startAngle = secc.startAngle;\n                            sec._selectedSec.context.endAngle = secc.endAngle;\n                        }\n                    }\n                }\n            },\n            \n            onComplete: function () {\n                me._showGrowLabel();\n                me.completed = true;\n\n                callback && callback();\n            }\n        });\n    }\n\n\n    _widgetLabel(quadrant, indexs, lmin, rmin, isEnd, ySpaceInfo) \n    {\n        var me = this;\n        var count = 0;\n        var data = me.data.list;\n        var minTxtDis = 15;\n        var textOffsetX = 5;\n        \n        var currentIndex;\n        var preY, currentY, adjustX, txtDis, bwidth, bheight, bx, by;\n        var yBound, remainingNum, remainingY;\n        \n        var clockwise = quadrant == 2 || quadrant == 4;\n        var isleft = quadrant == 2 || quadrant == 3;\n        var isup = quadrant == 3 || quadrant == 4;\n        var minY = isleft ? lmin : rmin;\n\n        //text的绘制顺序做修正，text的Y值在饼图上半部分（isup）时，Y值越小的先画，反之Y值在饼图下部分时，Y值越大的先画.\n        if (indexs.length > 0) {\n            indexs.sort(function (a, b) {\n                return isup ? data[a].edgey - data[b].edgey : data[b].edgey - data[a].edgey;\n            })\n        }\n        \n        for (var i = 0; i < indexs.length; i++) {\n            currentIndex = indexs[i];\n            var itemData = data[currentIndex];\n            var outCircleRadius = itemData.outRadius + itemData.moveDis;\n\n            //若Y值小于最小值，不画text    \n            if (!itemData.enabled || itemData.y < minY || count >= me.textMaxCount) continue\n            count++;\n            currentY = itemData.edgey;\n            adjustX = Math.abs(itemData.edgex);\n            txtDis = currentY - preY;\n\n            if (i != 0 && ((Math.abs(txtDis) < minTxtDis) || (isup && txtDis < 0) || (!isup && txtDis > 0))) {\n                currentY = isup ? preY + minTxtDis : preY - minTxtDis;\n                if (outCircleRadius - Math.abs(currentY) > 0) {\n                    adjustX = Math.sqrt(Math.pow(outCircleRadius, 2) - Math.pow(currentY, 2));\n                }\n\n                if ((isleft && (-adjustX > itemData.edgex)) || (!isleft && (adjustX < itemData.edgex))) {\n                    adjustX = Math.abs(itemData.edgex);\n                }\n            }\n\n            if (isEnd) {\n                yBound = isleft ? ySpaceInfo.left : ySpaceInfo.right;\n                remainingNum = indexs.length - i;\n                remainingY = isup ? yBound - remainingNum * minTxtDis : yBound + remainingNum * minTxtDis;\n                if ((isup && currentY > remainingY) || !isup && currentY < remainingY) {\n                    currentY = remainingY;\n                }\n            }\n\n            preY = currentY;\n            if (!isEnd) {\n                if (isleft) {\n                    ySpaceInfo.left = preY;\n                } else {\n                    ySpaceInfo.right = preY;\n                }\n            };\n            \n            var currentX = (isleft ? -adjustX-textOffsetX : adjustX+textOffsetX);\n            var globalX = currentX + me.origin.x;\n            var globalY = currentY + me.origin.y;\n\n            if( globalX > me._graphs.app.width || globalY < 0 || globalY > me._graphs.app.height ){\n                return;\n            };\n\n            var pathStr = \"M\"+itemData.centerx+\",\"+itemData.centery;\n            pathStr += \"Q\"+itemData.outx+\",\"+itemData.outy+\",\"+currentX+\",\"+currentY;\n            \n            var path = new Path({\n                context: {\n                    lineType: 'solid',\n                    path : pathStr,\n                    lineWidth: 1,\n                    strokeStyle: itemData.fillStyle\n                }\n            });\n\n            //指示文字\n            /*\n            var textTxt = itemData.labelText;\n            //如果用户format过，那么就用用户指定的格式\n            //如果没有就默认拼接\n            if( !this._graphs.label.format ){\n                if( textTxt ){\n                    textTxt = textTxt + \"：\" + itemData.percentage + \"%\" \n                } else {\n                    textTxt = itemData.percentage + \"%\" \n                }\n            };\n            */\n\n            var textTxt = itemData.labelText;\n            var branchTxt = document.createElement(\"div\");\n            branchTxt.style.cssText = \" ;position:absolute;left:-1000px;top:-1000px;color:\" + itemData.fillStyle + \"\"\n            branchTxt.innerHTML = textTxt;\n            me.domContainer.appendChild(branchTxt);\n            bwidth = branchTxt.offsetWidth;\n            bheight = branchTxt.offsetHeight;\n\n            bx = isleft ? -adjustX : adjustX;\n            by = currentY;\n\n            switch (quadrant) {\n                case 1:\n                    bx += textOffsetX;\n                    by -= bheight / 2;\n                    break;\n                case 2:\n                    bx -= (bwidth + textOffsetX);\n                    by -= bheight / 2;\n                    break;\n                case 3:\n                    bx -= (bwidth + textOffsetX);\n                    by -= bheight / 2;\n                    break;\n                case 4:\n                    bx += textOffsetX;\n                    by -= bheight / 2;\n                    break;\n            };\n\n            branchTxt.style.left = bx + me.origin.x + \"px\";\n            branchTxt.style.top = by + me.origin.y + \"px\";\n\n            me.textSp.addChild( path );\n            \n            me.textList.push({\n                width: bwidth,\n                height: bheight,\n                x: bx + me.origin.x,\n                y: by + me.origin.y,\n                data: itemData,\n                textTxt: textTxt,\n                textEle: branchTxt\n            });\n        }\n    }\n\n    _startWidgetLabel()\n    {\n        var me = this;\n        var data = me.data.list;\n        var rMinPercentage = 0,\n            lMinPercentage = 0,\n            rMinY = 0,\n            lMinY = 0;\n        var quadrantsOrder = [];\n\n        var quadrantInfo = [\n            {\n                indexs: [],\n                count: 0\n            }, {\n                indexs: [],\n                count: 0\n            }, {\n                indexs: [],\n                count: 0\n            }, {\n                indexs: [],\n                count: 0\n            }\n        ];\n\n        //默认从top开始画\n        var widgetInfo = {\n            right: {\n                startQuadrant: 4,\n                endQuadrant: 1,\n                clockwise: true,\n                indexs: []\n            },\n            left: {\n                startQuadrant: 3,\n                endQuadrant: 2,\n                clockwise: false,\n                indexs: []\n            }\n        };\n\n        for (var i = 0; i < data.length; i++) {\n            var cur = data[i].quadrant;\n            quadrantInfo[cur - 1].indexs.push(i);\n            quadrantInfo[cur - 1].count++;\n        }\n\n        //1,3象限的绘制顺序需要反转\n        if (quadrantInfo[0].count > 1) quadrantInfo[0].indexs.reverse();\n        if (quadrantInfo[2].count > 1) quadrantInfo[2].indexs.reverse();\n\n        if (quadrantInfo[0].count > quadrantInfo[3].count) {\n            widgetInfo.right.startQuadrant = 1;\n            widgetInfo.right.endQuadrant = 4;\n            widgetInfo.right.clockwise = false;\n        }\n\n        if (quadrantInfo[1].count > quadrantInfo[2].count) {\n            widgetInfo.left.startQuadrant = 2;\n            widgetInfo.left.endQuadrant = 3;\n            widgetInfo.left.clockwise = true;\n        }\n\n        widgetInfo.right.indexs = quadrantInfo[widgetInfo.right.startQuadrant - 1].indexs.concat(quadrantInfo[widgetInfo.right.endQuadrant - 1].indexs);\n        widgetInfo.left.indexs = quadrantInfo[widgetInfo.left.startQuadrant - 1].indexs.concat(quadrantInfo[widgetInfo.left.endQuadrant - 1].indexs);\n\n        var overflowIndexs, sortedIndexs;\n        \n        if (widgetInfo.right.indexs.length > me.textMaxCount) {\n            sortedIndexs = widgetInfo.right.indexs.slice(0);\n            sortedIndexs.sort(function (a, b) {\n                return data[b].y - data[a].y;\n            });\n            overflowIndexs = sortedIndexs.slice(me.textMaxCount);\n            rMinPercentage = data[overflowIndexs[0]].percentage;\n            rMinY = data[overflowIndexs[0]].y;\n        }\n        if (widgetInfo.left.indexs.length > me.textMaxCount) {\n            sortedIndexs = widgetInfo.left.indexs.slice(0);\n            sortedIndexs.sort(function (a, b) {\n                return data[b].y - data[a].y;\n            });\n            overflowIndexs = sortedIndexs.slice(me.textMaxCount);\n            lMinPercentage = data[overflowIndexs[0]].percentage;\n            lMinY = data[overflowIndexs[0]].y;\n        }\n\n        quadrantsOrder.push(widgetInfo.right.startQuadrant);\n        quadrantsOrder.push(widgetInfo.right.endQuadrant);\n        quadrantsOrder.push(widgetInfo.left.startQuadrant);\n        quadrantsOrder.push(widgetInfo.left.endQuadrant);\n\n        var ySpaceInfo = {}\n\n        for (var i = 0; i < quadrantsOrder.length; i++) {\n            var isEnd = i == 1 || i == 3;\n            me._widgetLabel(quadrantsOrder[i], quadrantInfo[quadrantsOrder[i] - 1].indexs, lMinY, rMinY, isEnd, ySpaceInfo)\n        }\n    }\n\n    destroyLabel()\n    {\n        var me = this;\n        if (this.textSp) {\n            this.textSp.removeAllChildren();\n        };\n        _.each(this.textList, function (lab) {\n            me.domContainer.removeChild( lab.textEle );\n        });\n        this.textList = [];\n    }\n\n    _showGrowLabel()\n    {\n        if (this.textSp && this.textSp.context) {\n            this.textSp.context.globalAlpha = 1;\n            _.each(this.textList, function (lab) {\n                lab.textEle.style.visibility = \"visible\"\n            });\n        }\n    }\n\n    _hideGrowLabel()\n    {\n        if (this.textSp && this.textSp.context) {\n            this.textSp.context.globalAlpha = 0;\n            _.each(this.textList, function (lab) {\n                lab.textEle.style.visibility = \"hidden\"\n            });\n        }\n    }\n}","import Canvax from \"canvax\"\nimport Pie from \"./pie\"\nimport GraphsBase from \"../index\"\nimport { _ } from \"mmvis\"\n\nexport default class PieGraphs extends GraphsBase\n{\n    constructor( opt, app )\n    {\n        super( opt, app );\n\n        this.type = \"pie\";\n\n        this.field = null; \n        this.sort = null; //默认不排序，可以配置为asc,desc\n\n        //groupField主要是给legend用的， 所有在legend中需要显示的分组数据，都用groupField\n        //其他图也都统一， 不要改\n        this.groupField = null;\n\n        this.node = {\n            shapeType : \"sector\",\n\n            radius : null, //每个扇形单元的半径，也可以配置一个字段，就成了丁格尔玫瑰图\n            innerRadius : 0, //扇形的内圆半径\n            outRadius : null,//最大外围半径\n            minRadius : 10,//outRadius - innerRadius ， 也就是radius的最小值\n            moveDis : 15, //要预留moveDis位置来hover sector 的时候外扩\n\n            fillStyle : null, //this.app.getTheme(),\n            focus : {\n                enabled : true,\n            },\n            select : {\n                enabled : false,\n                radius : 5,\n                alpha : 0.7\n            }\n        };\n\n        this.label = {\n            field : null, //默认获取field的值，但是可以单独设置\n            enabled : false,\n            format  : null\n        };\n\n        this.startAngle = -90;\n        this.allAngles = 360;\n        \n        this.init( opt );\n    }\n\n    init( opt )\n    {\n        _.extend(true, this, opt);\n\n        //初步设置下data，主要legend等需要用到\n        this.data = this._dataHandle();\n    }\n\n    _computerProps()\n    {\n        var w = this.width;\n        var h = this.height;\n\n        //根据配置情况重新修正 outRadius ，innerRadius ------------\n        if( !this.node.outRadius ){\n            var outRadius = Math.min(w, h) / 2;\n            if ( this.label.enabled ) {\n                //要预留moveDis位置来hover sector 的时候外扩\n                outRadius -= this.node.moveDis;\n            };\n            this.node.outRadius = parseInt( outRadius );\n        };\n        if( this.node.radius !== null && _.isNumber( this.node.radius ) ){\n            //如果用户有直接配置 radius，那么radius优先，用来计算\n            this.node.radius = Math.max( this.node.radius, this.node.minRadius );\n            //this.node.outRadius = this.node.innerRadius + this.node.radius;\n            this.node.innerRadius = this.node.outRadius - this.node.radius;\n        };\n        \n        //要保证sec具有一个最小的radius\n        if( this.node.outRadius - this.node.innerRadius < this.node.minRadius ){\n            this.node.innerRadius = this.node.outRadius - this.node.minRadius;\n        };\n        if( this.node.innerRadius < 0 ){\n            this.node.innerRadius = 0;\n        };\n        // end --------------------------------------------------\n\n    }\n\n    /**\n     * opt ==> {width,height,origin}\n     */\n    draw( opt )\n    {\n        \n        !opt && (opt ={});\n\n        _.extend(true, this, opt);\n        this._computerProps();\n\n        //这个时候就是真正的计算布局用得layoutdata了\n        this._pie = new Pie( this , this._trimGraphs( this.data ) );\n        this._pie.draw( opt );\n\n        var me = this;\n        if( this.animation && !opt.resize ){\n            this._pie.grow( function(){\n                me.fire(\"complete\");\n            } );\n        } else {\n            this.fire(\"complete\");\n        }\n        \n        this.sprite.addChild( this._pie.sprite );\n    }\n\n    show( label )\n    {\n        this._setEnabled( label, true );\n    }\n\n    hide( label )\n    {\n        this._setEnabled( label, false );\n    }\n\n    _setEnabled( label, status )\n    {\n        var me = this;\n\n        _.each( this.data, function( item ){\n            if( item.label === label ){\n                item.enabled = status;\n                return false;\n            }\n        } );\n     \n        me._pie.resetData( me._trimGraphs( me.data ) );\n    }\n\n    _dataHandle()\n    {\n        var me = this;\n        //var _coord = me.app.getComponent({name:'coord'});\n\n        var data = [];\n        var dataFrame = me.dataFrame;\n        \n        for( var i=0,l=dataFrame.length; i<l; i++ ){\n            var rowData = dataFrame.getRowDataAt(i);\n            var color = me.app.getTheme( i );\n            var layoutData = {\n                rowData       : rowData,//把这一行数据给到layoutData引用起来\n                focused       : false,  //是否获取焦点，外扩\n                focusEnabled  : me.node.focus.enabled,\n\n                selected      : false,  //是否选中\n                selectEnabled : me.node.select.enabled,\n                selectedR     : me.node.select.radius,\n                selectedAlpha : me.node.select.alpha,\n                enabled       : true,   //是否启用，显示在列表中\n                \n                fillStyle     : color,\n                color         : color, //加个color属性是为了给tips用\n\n                value         : rowData[ me.field ],\n                label         : rowData[  me.groupField || me.label.field || me.field ],\n                labelText     : null, //绘制的时候再设置,label format后的数据\n                iNode         : i\n            };\n\n            if( _.isFunction( this.node.fillStyle ) ){\n                var _color = this.node.fontColor( layoutData );\n                if( !_color ){\n                    layoutData.fillStyle = layoutData.color = _color;\n                };\n            };\n            \n            data.push( layoutData );\n        };\n\n        if( data.length && me.sort ){\n            data.sort(function (a, b) {\n                if (me.sort == 'asc') {\n                    return a.value - b.value;\n                } else {\n                    return b.value - a.value;\n                }\n            });\n\n            //重新设定下ind\n            _.each( data, function( d, i ){\n                d.iNode = i;\n            } );\n        };\n\n        return data;\n    }\n\n    _trimGraphs( data ) \n    {\n        var me = this;\n        var total = 0;\n\n        me.currentAngle = 0 + me.startAngle % 360;//me.allAngles;\n        var limitAngle = me.allAngles + me.startAngle % me.allAngles;\n\n        var percentFixedNum = 2;     \n        \n        //下面连个变量当node.r设置为数据字段的时候用\n        var maxRval = 0;\n        var minRval = 0;\n\n        if ( data.length ) {\n            //先计算出来value的总量\n            for (var i = 0; i < data.length; i++) {\n                //enabled为false的secData不参与计算\n                if( !data[i].enabled ) continue;\n\n                total += data[i].value;\n                if( me.node.radius && (_.isString(me.node.radius) &&  me.node.radius in data[i].rowData) ){\n                    var _r = Number(data[i].rowData[ me.node.radius ]);\n                    maxRval = Math.max( maxRval, _r );\n                    minRval = Math.min( minRval, _r );\n                }\n            };\n\n            if ( total > 0 ) {\n          \n                for (var j = 0; j < data.length; j++) {\n                    var percentage = data[j].value / total;\n\n                    //enabled为false的sec，比率就设置为0\n                    if( !data[j].enabled ){\n                        percentage = 0;\n                    };\n                    \n                    var fixedPercentage = +((percentage * 100).toFixed(percentFixedNum));\n\n                    var angle = me.allAngles * percentage;\n                    var endAngle = me.currentAngle + angle > limitAngle ? limitAngle : me.currentAngle + angle;\n                    var cosV = Math.cos((me.currentAngle + angle / 2) / 180 * Math.PI);\n                    var sinV = Math.sin((me.currentAngle + angle / 2) / 180 * Math.PI);\n                    var midAngle = me.currentAngle + angle / 2;\n                    cosV = cosV.toFixed(5);\n                    sinV = sinV.toFixed(5);\n                    var quadrant = function (ang) {\n                        if (ang >= limitAngle) {\n                            ang = limitAngle;\n                        }\n                        ang = ang % me.allAngles;\n                        var angleRatio = parseInt(ang / 90);\n                        if (ang >= 0) {\n                            switch (angleRatio) {\n                                case 0:\n                                    return 1;\n                                    break;\n                                case 1:\n                                    return 2;\n                                    break;\n                                case 2:\n                                    return 3;\n                                    break;\n                                case 3:\n                                case 4:\n                                    return 4;\n                                    break;\n                            }\n                        } else if (ang < 0) {\n                            switch (angleRatio) {\n                                case 0:\n                                    return 4;\n                                    break;\n                                case -1:\n                                    return 3;\n                                    break;\n                                case -2:\n                                    return 2;\n                                    break;\n                                case -3:\n                                case -4:\n                                    return 1;\n                                    break;\n                            }\n                        }\n                    } (midAngle);\n\n                    var outRadius = me.node.outRadius;\n                    if( me.node.radius && (_.isString(me.node.radius) &&  me.node.radius in data[j].rowData) ){\n                        var _rr = Number( data[j].rowData[me.node.radius] );                  \n                        outRadius = parseInt( (me.node.outRadius - me.node.innerRadius) * ( (_rr - minRval)/(maxRval-minRval)  ) + me.node.innerRadius );\n                    };\n\n                    var moveDis = me.node.moveDis;\n\n                    _.extend(data[j], {\n                        outRadius   : outRadius,\n                        innerRadius : me.node.innerRadius,\n                        startAngle  : me.currentAngle, //起始角度\n                        endAngle    : endAngle, //结束角度\n                        midAngle    : midAngle,  //中间角度\n\n                        moveDis     : moveDis,\n\n                        outOffsetx  : moveDis * 0.7 * cosV, //focus的事实外扩后圆心的坐标x\n                        outOffsety  : moveDis * 0.7 * sinV, //focus的事实外扩后圆心的坐标y\n\n                        centerx     : outRadius * cosV,\n                        centery     : outRadius * sinV,\n                        outx        : (outRadius + moveDis) * cosV,\n                        outy        : (outRadius + moveDis) * sinV,\n                        edgex       : (outRadius + moveDis) * cosV,\n                        edgey       : (outRadius + moveDis) * sinV,\n\n                        orginPercentage: percentage,\n                        percentage: fixedPercentage,\n                    \n                        quadrant: quadrant, //象限\n                        labelDirection: quadrant == 1 || quadrant == 4 ? 1 : 0,\n                        iNode: j\n                    });\n\n                    //这个时候可以计算下label，因为很多时候外部label如果是配置的\n                    data[j].labelText = me._getLabelText( data[j] );\n                    \n                    me.currentAngle += angle;\n                    \n                    if (me.currentAngle > limitAngle) {\n                        me.currentAngle = limitAngle;\n                    }\n                };\n            }\n        }\n\n        return {\n            list  : data,\n            total : total\n        };\n    }\n\n    _getLabelText( itemData )\n    {\n        var str;\n        if( this.label.enabled ){\n            if( this.label.format ){\n                if( _.isFunction( this.label.format ) ){\n                    str = this.label.format( itemData.label, itemData );\n                }\n            } else {\n                var _field = this.label.field || this.groupField\n                if( _field ){\n                    str = itemData.rowData[ _field ] + \"：\" + itemData.percentage + \"%\" \n                } else {\n                    str = itemData.percentage + \"%\" \n                }\n            }\n        }\n        return str;\n    }\n\n    getList()\n    {\n        return this.data;\n    }\n\n    getLegendData()\n    {\n        //return this.data;\n        var legendData = [];\n        _.each( this.data, function(item){\n            legendData.push( {\n                name : item.label,\n                color : item.fillStyle,\n                enabled : item.enabled\n            } )\n        } );\n        return legendData;\n    }\n\n    tipsPointerOf( e ){\n    }\n\n    tipsPointerHideOf( e ){\n    }\n\n\n    focusAt( ind ){\n        var nodeData = this._pie.data.list[ ind ];\n\n        if( !this.node.focus.enabled ) return;\n\n        this._pie.focusOf( nodeData );\n    }\n    \n    unfocusAt( ind ){\n        var nodeData = this._pie.data.list[ ind ];\n        if( !nodeData.node.focus.enabled ) return;\n        this._pie.unfocusOf( nodeData );\n    }\n    \n    selectAt( ind ){\n        var nodeData = this._pie.data.list[ ind ];\n        if( !this.node.select.enabled ) return;\n        this._pie.selectOf( nodeData );\n    }\n\n    unselectAt( ind ){\n        var nodeData = this._pie.data.list[ ind ];\n        if( !this.node.select.enabled ) return;\n        this._pie.unselectOf( nodeData );\n    }\n    \n}","import Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\nimport { _,event } from \"mmvis\"\n\nconst Polygon = Canvax.Shapes.Polygon;\nconst Circle = Canvax.Shapes.Circle;\n\nexport default class RadarGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type  = \"radar\";\n        \n        this.field = null;\n        this.enabledField = null;\n\n        this.line = {\n            shapeType   : \"brokenLine\",\n            enabled     : true,\n            lineWidth   : 2,\n            strokeStyle :null\n        };\n        this.area = {\n            shapeType : \"path\",\n            enabled   : true,\n            fillStyle : null,\n            fillAlpha : 0.1\n        };\n        this.node = {\n            enabled     : true,\n            shapeType   : \"circle\",\n            radius      : 4,\n            strokeStyle : \"#ffffff\",\n            lineWidth   : 1\n        };\n\n        this.groups = {\n            //uv : {\n            //   area : ,\n            //   nodes: \n            //}\n        };\n\n        _.extend( true, this , opt );\n\n        this.init();\n    }\n\n    init()\n    {\n\n    }\n\n    draw(opt)\n    {\n        !opt && (opt ={});\n        \n        var me = this;\n        _.extend(true, this, opt);\n        this.data = this._trimGraphs();\n        \n        this._widget();\n\n        this.sprite.context.x = this.origin.x;\n        this.sprite.context.y = this.origin.y;\n\n        this.fire(\"complete\");\n    }\n\n    _widget()\n    {\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n\n        var iGroup = 0;\n        _.each( this.data, function( list , field ){\n\n            var group = {\n            };\n\n            var pointList = [];\n            _.each( list , function( node, i ){\n                pointList.push([ node.point.x, node.point.y ]);\n            } );\n\n            var fieldMap = _coord.getFieldMapOf( field );\n\n            var _strokeStyle = me._getStyle( me.line.strokeStyle , iGroup, fieldMap.color, fieldMap );\n\n            var polyCtx = {\n                pointList : pointList,\n                cursor    : \"pointer\"\n            };\n\n            if( me.line.enabled ){\n                polyCtx.lineWidth = me.line.lineWidth;\n                polyCtx.strokeStyle = _strokeStyle;\n            };\n            if( me.area.enabled ){\n                polyCtx.fillStyle = me._getStyle( me.area.fillStyle , iGroup, fieldMap.color, fieldMap );\n                polyCtx.fillAlpha = me._getStyle( me.area.fillAlpha , iGroup, 1, fieldMap );\n            };\n\n            var _poly = new Polygon({\n                hoverClone : false,\n                context    : polyCtx\n            });\n            group.area = _poly;\n            me.sprite.addChild( _poly );\n\n            _poly.on(event.types.get(), function(e) {\n                \n                if( e.type == \"mouseover\" ){\n                    this.context.fillAlpha += 0.2\n                };\n                if( e.type == \"mouseout\" ){\n                    this.context.fillAlpha -= 0.2\n                };\n                \n                me.app.fire( e.type, e );\n            });\n            \n            if( me.node.enabled ){\n                //绘制圆点\n                var _nodes = [];\n                _.each( list , function( node, i ){\n                    pointList.push([ node.point.x, node.point.y ]);\n                    var _node = new Circle({\n                        context : {\n                            cursor : \"pointer\",\n                            x : node.point.x,\n                            y : node.point.y,\n                            r : me.node.radius,\n                            lineWidth : me.node.lineWidth,\n                            strokeStyle : me.node.strokeStyle,\n                            fillStyle : _strokeStyle\n                        }\n                    });\n                    me.sprite.addChild( _node );\n                    _node.iNode = i;\n                    _node.nodeData = node;\n                    _node._strokeStyle = _strokeStyle;\n                    _node.on(event.types.get(), function(e) {\n\n                        //这样就会直接用这个aAxisInd了，不会用e.point去做计算\n                        e.aAxisInd = this.iNode;\n                        e.eventInfo = {\n                            trigger : me.node,\n                            nodes : [ this.nodeData ]\n                        };\n                        me.app.fire( e.type, e );\n                    });\n                    _nodes.push( _node );\n                } );\n                group.nodes = _nodes;\n            };\n\n            me.groups[ field ] = group;\n\n            iGroup++;\n        } );\n    }\n\n    tipsPointerOf( e )\n    {\n        var me = this;\n        \n        me.tipsPointerHideOf( e );\n\n        if( e.eventInfo && e.eventInfo.nodes ){\n            _.each( e.eventInfo.nodes, function( eventNode ){\n                if( me.data[ eventNode.field ] ){\n                    _.each( me.data[ eventNode.field ] , function( n, i ){\n                        if( eventNode.iNode == i ){\n                            me.focusOf(n);\n                        }\n                        //else {\n                        //    me.unfocusOf(n);\n                        //}\n                    });\n                };\n            } );\n        }\n    }\n    tipsPointerHideOf( e )\n    {\n        var me = this;\n        _.each( me.data , function( g, i ){\n            _.each( g , function( node ){\n                me.unfocusOf( node );\n            } );\n        });\n    }\n\n    focusOf( node )\n    {\n        if( node.focused ) return;\n        var me = this;\n        var _node = me.groups[ node.field ].nodes[ node.iNode ];\n        _node.context.r += 1;\n        _node.context.fillStyle = me.node.strokeStyle;\n        _node.context.strokeStyle = _node._strokeStyle;\n        node.focused = true;\n    }\n    unfocusOf( node )\n    {\n        if( !node.focused ) return;\n        var me = this;\n        var _node = me.groups[ node.field ].nodes[ node.iNode ];\n        _node.context.r -= 1;\n        _node.context.fillStyle = _node._strokeStyle;\n        _node.context.strokeStyle = me.node.strokeStyle;\n        node.focused = false;\n    }\n\n    hide( field )\n    {\n        //用来计算下面的hLen\n        var _coord = this.app.getComponent({name:'coord'});\n        this.enabledField = _coord.filterEnabledFields( this.field );\n        var group = this.groups[ field ];\n        if( group ){\n            group.area.context.visible = false;\n            _.each( group.nodes, function( element ){\n                element.context.visible = false;\n            } );\n            \n        }\n    }\n\n    show( field )\n    {\n        var _coord = this.app.getComponent({name:'coord'});\n        this.enabledField = _coord.filterEnabledFields( this.field );\n        var group = this.groups[ field ];\n        if( group ){\n            group.area.context.visible = true;\n            _.each( group.nodes, function( element ){\n                element.context.visible = true;\n            } );\n        }\n    }\n\n    _trimGraphs()\n    {\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n\n        //用来计算下面的hLen\n        this.enabledField = _coord.filterEnabledFields( this.field );\n        \n        var data = {}\n        _.each( this.enabledField, function( field ){\n            var dataOrg = me.dataFrame.getFieldData(field);\n            var fieldMap = _coord.getFieldMapOf( field );\n            var arr = [];\n\n            _.each( _coord.aAxis.angleList , function( _a , i ){\n                //弧度\n                var _r = Math.PI * _a / 180;\n                var point = _coord.getPointInRadianOfR( _r, _coord.getROfNum(dataOrg[i]) );\n                arr.push( {\n                    field   : field,\n                    iNode   : i,\n                    rowData : me.dataFrame.getRowDataAt(i),\n                    focused : false,\n                    value   : dataOrg[i],\n                    point   : point,\n                    color   : fieldMap.color\n                } );\n            } );\n            data[ field ] = arr;\n        } );\n        return data;\n    }\n\n    _getStyle( style, iGroup ,def, fieldMap )\n    {\n        var _s = def;\n        if( _.isString( style ) || _.isNumber( style ) ){\n            _s = style;\n        };\n        if( _.isArray( style ) ){\n            _s = style[ iGroup ];\n        };\n        if( _.isFunction( style ) ){\n            _s = style( iGroup, fieldMap );\n        };\n        if( _s === undefined || _s === null ){\n            //只有undefined(用户配置了function),null才会认为需要还原皮肤色\n            //“”都会认为是用户主动想要设置的，就为是用户不想他显示\n            _s = def;\n        };\n        return _s;\n    }\n\n    getNodesAt(index)\n    {\n        //该index指当前\n        var data = this.data;\n        var _nodesInfoList = []; //节点信息集合\n        \n        _.each( this.enabledField, function( fs, i ){\n            if( _.isArray(fs) ){\n                _.each( fs, function( _fs, ii ){\n                    //fs的结构两层到顶了\n                    var node = data[ _fs ][ index ];\n                    node && _nodesInfoList.push( node );\n                } );\n            } else {\n                var node = data[ fs ][ index ];\n                node && _nodesInfoList.push( node );\n            }\n        } );\n        \n        return _nodesInfoList;\n    }\n}","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;","// Word cloud layout by Jason Davies, https://www.jasondavies.com/wordcloud/\n// Algorithm due to Jonathan Feinberg, http://static.mrfeinberg.com/bv_ch03.pdf\n\n\nimport dispatch from \"../utils/dispatch\"\n\nvar cloudRadians = Math.PI / 180,\n  cw = 1 << 11 >> 5,\n  ch = 1 << 11;\n\nvar cloud = function () {\n  var size = [256, 256],\n    text = cloudText,\n    font = cloudFont,\n    fontSize = cloudFontSize,\n    fontStyle = cloudFontNormal,\n    fontWeight = cloudFontNormal,\n    rotate = cloudRotate,\n    padding = cloudPadding,\n    spiral = archimedeanSpiral,\n    words = [],\n    timeInterval = Infinity,\n    event = dispatch(\"word\", \"end\"),\n    timer = null,\n    random = Math.random,\n    cloud = {},\n    canvas = cloudCanvas;\n\n  cloud.canvas = function (_) {\n    return arguments.length ? (canvas = functor(_), cloud) : canvas;\n  };\n\n  cloud.start = function () {\n    var contextAndRatio = getContext(canvas()),\n      board = zeroArray((size[0] >> 5) * size[1]),\n      bounds = null,\n      n = words.length,\n      i = -1,\n      tags = [],\n      data = words.map(function (d, i) {\n        d.text = text.call(this, d, i);\n        d.font = font.call(this, d, i);\n        d.style = fontStyle.call(this, d, i);\n        d.weight = fontWeight.call(this, d, i);\n        d.rotate = rotate.call(this, d, i);\n        d.size = ~~fontSize.call(this, d, i);\n        d.padding = padding.call(this, d, i);\n        return d;\n      }).sort(function (a, b) { return b.size - a.size; });\n\n    if (timer) clearInterval(timer);\n    timer = setInterval(step, 0);\n    step();\n\n    return cloud;\n\n    function step() {\n      var start = Date.now();\n      while (Date.now() - start < timeInterval && ++i < n && timer) {\n        var d = data[i];\n        d.x = (size[0] * (random() + .5)) >> 1;\n        d.y = (size[1] * (random() + .5)) >> 1;\n        cloudSprite(contextAndRatio, d, data, i);\n        if (d.hasText && place(board, d, bounds)) {\n          tags.push(d);\n          event.call(\"word\", cloud, d);\n          if (bounds) cloudBounds(bounds, d);\n          else bounds = [{ x: d.x + d.x0, y: d.y + d.y0 }, { x: d.x + d.x1, y: d.y + d.y1 }];\n          // Temporary hack\n          d.x -= size[0] >> 1;\n          d.y -= size[1] >> 1;\n        }\n      }\n      if (i >= n) {\n        cloud.stop();\n        event.call(\"end\", cloud, tags, bounds);\n      }\n    }\n  }\n\n  cloud.stop = function () {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n    return cloud;\n  };\n\n  function getContext(canvas) {\n    canvas.width = canvas.height = 1;\n    var ratio = Math.sqrt(canvas.getContext(\"2d\").getImageData(0, 0, 1, 1).data.length >> 2);\n    canvas.width = (cw << 5) / ratio;\n    canvas.height = ch / ratio;\n\n    var context = canvas.getContext(\"2d\");\n    context.fillStyle = context.strokeStyle = \"red\";\n    context.textAlign = \"center\";\n\n    return { context: context, ratio: ratio };\n  }\n\n  function place(board, tag, bounds) {\n    var perimeter = [{ x: 0, y: 0 }, { x: size[0], y: size[1] }],\n      startX = tag.x,\n      startY = tag.y,\n      maxDelta = Math.sqrt(size[0] * size[0] + size[1] * size[1]),\n      s = spiral(size),\n      dt = random() < .5 ? 1 : -1,\n      t = -dt,\n      dxdy,\n      dx,\n      dy;\n\n    while (dxdy = s(t += dt)) {\n      dx = ~~dxdy[0];\n      dy = ~~dxdy[1];\n\n      if (Math.min(Math.abs(dx), Math.abs(dy)) >= maxDelta) break;\n\n      tag.x = startX + dx;\n      tag.y = startY + dy;\n\n      if (tag.x + tag.x0 < 0 || tag.y + tag.y0 < 0 ||\n        tag.x + tag.x1 > size[0] || tag.y + tag.y1 > size[1]) continue;\n      // TODO only check for collisions within current bounds.\n      if (!bounds || !cloudCollide(tag, board, size[0])) {\n        if (!bounds || collideRects(tag, bounds)) {\n          var sprite = tag.sprite,\n            w = tag.width >> 5,\n            sw = size[0] >> 5,\n            lx = tag.x - (w << 4),\n            sx = lx & 0x7f,\n            msx = 32 - sx,\n            h = tag.y1 - tag.y0,\n            x = (tag.y + tag.y0) * sw + (lx >> 5),\n            last;\n          for (var j = 0; j < h; j++) {\n            last = 0;\n            for (var i = 0; i <= w; i++) {\n              board[x + i] |= (last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);\n            }\n            x += sw;\n          }\n          delete tag.sprite;\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  cloud.timeInterval = function (_) {\n    return arguments.length ? (timeInterval = _ == null ? Infinity : _, cloud) : timeInterval;\n  };\n\n  cloud.words = function (_) {\n    return arguments.length ? (words = _, cloud) : words;\n  };\n\n  cloud.size = function (_) {\n    return arguments.length ? (size = [+_[0], +_[1]], cloud) : size;\n  };\n\n  cloud.font = function (_) {\n    return arguments.length ? (font = functor(_), cloud) : font;\n  };\n\n  cloud.fontStyle = function (_) {\n    return arguments.length ? (fontStyle = functor(_), cloud) : fontStyle;\n  };\n\n  cloud.fontWeight = function (_) {\n    return arguments.length ? (fontWeight = functor(_), cloud) : fontWeight;\n  };\n\n  cloud.rotate = function (_) {\n    return arguments.length ? (rotate = functor(_), cloud) : rotate;\n  };\n\n  cloud.text = function (_) {\n    return arguments.length ? (text = functor(_), cloud) : text;\n  };\n\n  cloud.spiral = function (_) {\n    return arguments.length ? (spiral = spirals[_] || _, cloud) : spiral;\n  };\n\n  cloud.fontSize = function (_) {\n    return arguments.length ? (fontSize = functor(_), cloud) : fontSize;\n  };\n\n  cloud.padding = function (_) {\n    return arguments.length ? (padding = functor(_), cloud) : padding;\n  };\n\n  cloud.random = function (_) {\n    return arguments.length ? (random = _, cloud) : random;\n  };\n\n  cloud.on = function () {\n    var value = event.on.apply(event, arguments);\n    return value === event ? cloud : value;\n  };\n\n  return cloud;\n};\n\nfunction cloudText(d) {\n  return d.text;\n}\n\nfunction cloudFont() {\n  return \"serif\";\n}\n\nfunction cloudFontNormal() {\n  return \"normal\";\n}\n\nfunction cloudFontSize(d) {\n  return Math.sqrt(d.value);\n}\n\nfunction cloudRotate() {\n  return (~~(Math.random() * 6) - 3) * 30;\n}\n\nfunction cloudPadding() {\n  return 1;\n}\n\n// Fetches a monochrome sprite bitmap for the specified text.\n// Load in batches for speed.\nfunction cloudSprite(contextAndRatio, d, data, di) {\n  if (d.sprite) return;\n  var c = contextAndRatio.context,\n    ratio = contextAndRatio.ratio;\n\n  c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);\n  var x = 0,\n    y = 0,\n    maxh = 0,\n    n = data.length;\n  --di;\n  while (++di < n) {\n    d = data[di];\n    c.save();\n    c.font = d.style + \" \" + d.weight + \" \" + ~~((d.size + 1) / ratio) + \"px \" + d.font;\n    var w = c.measureText(d.text + \"m\").width * ratio,\n      h = d.size << 1;\n    if (d.rotate) {\n      var sr = Math.sin(d.rotate * cloudRadians),\n        cr = Math.cos(d.rotate * cloudRadians),\n        wcr = w * cr,\n        wsr = w * sr,\n        hcr = h * cr,\n        hsr = h * sr;\n      w = (Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 0x1f) >> 5 << 5;\n      h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));\n    } else {\n      w = (w + 0x1f) >> 5 << 5;\n    }\n    if (h > maxh) maxh = h;\n    if (x + w >= (cw << 5)) {\n      x = 0;\n      y += maxh;\n      maxh = 0;\n    }\n    if (y + h >= ch) break;\n    c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio);\n    if (d.rotate) c.rotate(d.rotate * cloudRadians);\n    c.fillText(d.text, 0, 0);\n    if (d.padding) c.lineWidth = 2 * d.padding, c.strokeText(d.text, 0, 0);\n    c.restore();\n    d.width = w;\n    d.height = h;\n    d.xoff = x;\n    d.yoff = y;\n    d.x1 = w >> 1;\n    d.y1 = h >> 1;\n    d.x0 = -d.x1;\n    d.y0 = -d.y1;\n    d.hasText = true;\n    x += w;\n  }\n  var pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data,\n    sprite = [];\n  while (--di >= 0) {\n    d = data[di];\n    if (!d.hasText) continue;\n    var w = d.width,\n      w32 = w >> 5,\n      h = d.y1 - d.y0;\n    // Zero the buffer\n    for (var i = 0; i < h * w32; i++) sprite[i] = 0;\n    x = d.xoff;\n    if (x == null) return;\n    y = d.yoff;\n    var seen = 0,\n      seenRow = -1;\n    for (var j = 0; j < h; j++) {\n      for (var i = 0; i < w; i++) {\n        var k = w32 * j + (i >> 5),\n          m = pixels[((y + j) * (cw << 5) + (x + i)) << 2] ? 1 << (31 - (i % 32)) : 0;\n        sprite[k] |= m;\n        seen |= m;\n      }\n      if (seen) seenRow = j;\n      else {\n        d.y0++;\n        h--;\n        j--;\n        y++;\n      }\n    }\n    d.y1 = d.y0 + seenRow;\n    d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);\n  }\n}\n\n// Use mask-based collision detection.\nfunction cloudCollide(tag, board, sw) {\n  sw >>= 5;\n  var sprite = tag.sprite,\n    w = tag.width >> 5,\n    lx = tag.x - (w << 4),\n    sx = lx & 0x7f,\n    msx = 32 - sx,\n    h = tag.y1 - tag.y0,\n    x = (tag.y + tag.y0) * sw + (lx >> 5),\n    last;\n  for (var j = 0; j < h; j++) {\n    last = 0;\n    for (var i = 0; i <= w; i++) {\n      if (((last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0))\n        & board[x + i]) return true;\n    }\n    x += sw;\n  }\n  return false;\n}\n\nfunction cloudBounds(bounds, d) {\n  var b0 = bounds[0],\n    b1 = bounds[1];\n  if (d.x + d.x0 < b0.x) b0.x = d.x + d.x0;\n  if (d.y + d.y0 < b0.y) b0.y = d.y + d.y0;\n  if (d.x + d.x1 > b1.x) b1.x = d.x + d.x1;\n  if (d.y + d.y1 > b1.y) b1.y = d.y + d.y1;\n}\n\nfunction collideRects(a, b) {\n  return a.x + a.x1 > b[0].x && a.x + a.x0 < b[1].x && a.y + a.y1 > b[0].y && a.y + a.y0 < b[1].y;\n}\n\nfunction archimedeanSpiral(size) {\n  var e = size[0] / size[1];\n  return function (t) {\n    return [e * (t *= .1) * Math.cos(t), t * Math.sin(t)];\n  };\n}\n\nfunction rectangularSpiral(size) {\n  var dy = 4,\n    dx = dy * size[0] / size[1],\n    x = 0,\n    y = 0;\n  return function (t) {\n    var sign = t < 0 ? -1 : 1;\n    // See triangular numbers: T_n = n * (n + 1) / 2.\n    switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {\n      case 0: x += dx; break;\n      case 1: y += dy; break;\n      case 2: x -= dx; break;\n      default: y -= dy; break;\n    }\n    return [x, y];\n  };\n}\n\n// TODO reuse arrays?\nfunction zeroArray(n) {\n  var a = [],\n    i = -1;\n  while (++i < n) a[i] = 0;\n  return a;\n}\n\nfunction cloudCanvas() {\n  return document.createElement(\"canvas\");\n}\n\nfunction functor(d) {\n  return typeof d === \"function\" ? d : function () { return d; };\n}\n\nvar spirals = {\n  archimedean: archimedeanSpiral,\n  rectangular: rectangularSpiral\n};\n\nexport default cloud;","import Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\nimport cloudLayout from \"../../../layout/cloud\"\nimport { _,event } from \"mmvis\"\n\nconst Text = Canvax.Display.Text;\n\nexport default class CloudGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"cloud\";\n\n        this.field = null;\n\n        var me = this;\n\n        //坚持一个数据节点的设置都在一个node下面\n        this.node = {\n            fontFamily  : \"Impact\",\n            fontColor   : function( nodeData ){\n                return me.app.getTheme( nodeData.iNode )\n            },\n            fontSize    : function(){\n                //fontSize默认12-50的随机值\n                return this.minFontSize + Math.random() * this.maxFontSize;\n            },\n            maxFontSize : 30,\n            _maxFontSizeVal : 0, //fontSizer如果配置为一个field的话， 找出这个field数据的最大值\n            minFontSize : 16,\n            _minFontSizeVal : null,//fontSizer如果配置为一个field的话， 找出这个field数据的最小值\n\n            fontWeight : \"normal\",\n\n            format : function( str, tag ){ return str},\n\n            padding : 10,\n\n            rotation : function(){\n                return (~~(Math.random() * 6) - 3) * 30;\n            },\n\n            strokeStyle: null,\n            focus : {\n                enabled : true\n            },\n            select : {\n                enabled : true,\n                lineWidth : 2,\n                strokeStyle : \"#666\"\n            }\n        };\n\n        _.extend( true, this , opt );\n\n        this.init( );\n    }\n\n    init()\n    {\n\n    }\n\n    draw( opt )\n    {\n        !opt && (opt ={});\n        _.extend( true, this , opt );\n        this._drawGraphs();\n        this.sprite.context.x = this.width / 2;\n        this.sprite.context.y = this.height / 2;\n\n        this.fire(\"complete\");\n    }\n\n    getDaraFrameIndOfVal( val )\n    {\n        var me = this;\n        var df = this.dataFrame;\n        var org = _.find( df.data, function( d ){\n            return d.field == me.field;\n        } );\n        var ind = _.indexOf( org.data, val );\n        return ind;\n    }\n\n    _getFontSize( rowData, val )\n    {\n        var size = this.node.minFontSize;\n\n        if( _.isFunction( this.node.fontSize ) ){\n            size = this.node.fontSize( rowData );\n        };\n\n        if( _.isString( this.node.fontSize ) && this.node.fontSize in rowData ){\n            var val = Number( rowData[ this.node.fontSize ] );\n            if( !isNaN( val ) ){\n                size = this.node.minFontSize + (this.node.maxFontSize-this.node.minFontSize)/(this.node._maxFontSizeVal - this.node._minFontSizeVal) * (val - this.node._minFontSizeVal);\n            }\n        }\n\n        if( _.isNumber( this.node.fontSize ) ){\n            size = this.node.fontSize;\n        }\n        \n        return size;\n    }\n\n    _getRotate( item, ind )\n    {\n        var rotation = this.node.rotation;\n        if( _.isFunction( this.node.rotation ) ){\n            rotation = this.node.rotation( item, ind ) || 0;\n        };\n        return rotation;\n    }\n\n    _getFontColor( nodeData )\n    {\n        var color;\n        if( _.isString( this.node.fontColor ) ){\n            color = this.node.fontColor;\n        }\n        if( _.isFunction( this.node.fontColor ) ){\n            color = this.node.fontColor( nodeData );\n        }\n\n        if( color === undefined || color === null ){\n            //只有undefined才会认为需要一个抄底色\n            //“”都会认为是用户主动想要设置的，就为是用户不想他显示\n            color = \"#ccc\"\n        };\n        return color;\n    }\n\n    _drawGraphs() \n    {\n        var me = this;\n\n        //查找fontSize的max和min\n        var maxFontSizeVal = 0;\n        var minFontSizeVal = 0;\n        if( _.isString( this.node.fontSize ) ){\n            _.each( me.dataFrame.getFieldData( this.node.fontSize ), function( val ){\n                me.node._maxFontSizeVal = Math.max( me.node._maxFontSizeVal, val );\n                me.node._minFontSizeVal = Math.min( me.node._minFontSizeVal, val );\n            } );\n        }\n\n        var layout = cloudLayout()\n            .size([me.width, me.height])\n            .words(me.dataFrame.getFieldData( me.field ).map(function(d, ind) {\n                var rowData  = me.app.dataFrame.getRowDataAt( me.getDaraFrameIndOfVal( d ) );//这里不能直接用i去从dataFrame里查询,因为cloud layout后，可能会扔掉渲染不下的部分\n                var tag = {\n                    rowData : rowData,\n                    field   : me.field,\n                    value   : d,\n                    text    : null,\n                    size    : me._getFontSize( rowData, d ),\n                    iNode   : ind,\n                    color   : null //在绘制的时候统一设置\n                };\n\n                tag.fontColor = me._getFontColor( tag );\n                tag.text = me.node.format(d, tag) || d;\n\n                return tag\n            }))\n            .padding( me.node.padding )\n            .rotate(function(item , ind) {\n                //return 0;\n                return me._getRotate( item, ind )\n            })\n            .font(me.node.fontFamily)\n            .fontSize(function(d) {\n                return d.size;\n            })\n            .on(\"end\", draw);\n\n        layout.start();\n\n        function draw( data , e ) {\n            \n            me.data = data;\n            me.sprite.removeAllChildren()\n        \n            _.each(data, function(tag, i) {\n                \n                tag.iNode  = i;\n                tag.dataLen  = data.length;\n            \n                tag.focused  = false;\n                tag.selected = false;\n\n                var tagTxt = new Text(tag.text, {\n                    context: {\n                        x: tag.x,\n                        y: tag.y,\n                        fontSize: tag.size,\n                        fontFamily: tag.font,\n                        rotation: tag.rotate,\n                        textBaseline: \"middle\",\n                        textAlign: \"center\",\n                        cursor: 'pointer',\n                        fontWeight: me.node.fontWeight,\n                        fillStyle: tag.fontColor\n                    }\n                });\n                me.sprite.addChild(tagTxt);\n\n                me.node.focus.enabled && tagTxt.hover(function(e){\n                    me.focusAt( this.nodeData.iNode );\n                } , function(e){\n                    !this.nodeData.selected && me.unfocusAt( this.nodeData.iNode );\n                });\n\n                tagTxt.nodeData = tag;\n                tag._node = tagTxt;\n                tagTxt.on(event.types.get(), function(e) {\n                    e.eventInfo = {\n                        trigger : me.node,\n                        title : null,\n                        nodes : [ this.nodeData ]\n                    };\n                    if( this.nodeData.text ){\n                        e.eventInfo.title = this.nodeData.text;\n                    };\n    \n                    //fire到root上面去的是为了让root去处理tips\n                    me.app.fire( e.type, e );\n                });\n            });\n\n        }\n    }\n\n\n    focusAt( ind ){\n        var nodeData = this.data[ ind ];\n        if( !this.node.focus.enabled || nodeData.focused ) return;\n\n        var nctx = nodeData._node.context; \n        nctx.fontSize += 3;\n        nodeData.focused = true;\n    }\n    \n    unfocusAt( ind ){\n        var nodeData = this.data[ ind ];\n        if( !this.node.focus.enabled || !nodeData.focused ) return;\n        var nctx = nodeData._node.context; \n        nctx.fontSize -= 3;\n        nodeData.focused = false;\n    }\n    \n    selectAt( ind ){\n        \n        var nodeData = this.data[ ind ];\n        if( !this.node.select.enabled || nodeData.selected ) return;\n\n        var nctx = nodeData._node.context; \n        nctx.lineWidth = this.node.select.lineWidth;\n        nctx.lineAlpha = this.node.select.lineAlpha;\n        nctx.strokeStyle = this.node.select.strokeStyle;\n\n        nodeData.selected = true;\n    }\n\n    unselectAt( ind ){\n        var nodeData = this.data[ ind ];\n        if( !this.node.select.enabled || !nodeData.selected ) return;\n        var nctx = nodeData._node.context; \n        nctx.strokeStyle = this.node.strokeStyle;\n\n        nodeData.selected = false;\n    }\n\n}\n","import Canvax from \"canvax\"\nimport { _,event } from \"mmvis\"\n\nconst Text = Canvax.Display.Text;\nconst Circle = Canvax.Shapes.Circle;\n\n\nexport default class PlanetGroup\n{\n    constructor(opt, dataFrame , _graphs)\n    {\n    \n        this._opt = opt;\n        this.dataFrame = dataFrame;\n        this._graphs = _graphs;\n        this.app = _graphs.app;\n\n        this.field = null;\n\n        this.iGroup = 0;\n        this.groupLen = 1;\n\n        //分组可以绘制的半径范围\n        this.rRange = {\n            start : 0, \n            to : 0\n        };\n\n        this.width  = 0;\n        this.height = 0;\n\n        this.node = {\n            shapeType : \"circle\",\n            maxRadius : 30,//15\n            minR : 5,\n            lineWidth : 1,\n            strokeStyle : \"#fff\",\n            fillStyle : '#f2fbfb',\n            lineAlpha : 0.6,\n            radius : 15, //也可以是个function,也可以配置{field:'pv'}来设置字段， 自动计算r\n\n            focus : {\n                enabled : true,\n                lineAlpha : 0.7,\n                lineWidth : 2,\n                strokeStyle : \"#fff\", //和bar.fillStyle一样可以支持array function\n            },\n\n            select : {\n                enabled : false,\n                lineAlpha : 1,\n                lineWidth : 2,\n                strokeStyle : \"#fff\", //和bar.fillStyle一样可以支持array function\n                triggerEventType : \"click\"\n            }\n        };\n        selectInds: [], //会从外面的index中传入一个统一的selectInds 引用\n\n        this.label = {\n            enabled   : true,\n            fontColor : \"#666\",\n            fontSize  : 13,\n            align : \"center\",  //left center right\n            verticalAlign : \"middle\", //top middle bottom\n            position  : \"center\", //center,bottom,auto,function\n            offsetX : 0, \n            offsetY : 0\n        };\n\n        this.sort = \"desc\";\n        this.sortField = null;\n\n        this.layoutType = \"radian\";\n        \n        //坑位，用来做占位\n        this.pit = {\n            radius : 30\n        };\n\n        this.planets = [];\n        \n        this.maxRingNum = 0;\n        this.ringNum = 0;\n\n        _.extend( true, this, opt );\n\n        //circle.maxRadius 绝对不能大于最大 占位 pit.radius\n        if( this.node.maxRadius > this.pit.radius ){\n            this.pit.radius = this.node.maxRadius\n        };\n        \n        this.init();\n    }\n\n    init()\n    {\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n        this.sprite = new Canvax.Display.Sprite({\n            id : \"group_\"+this.iGroup,\n            context : {\n                x : _coord.origin.x,\n                y : _coord.origin.y\n            }\n        });\n\n        this._trimGraphs();\n\n        this.draw();\n    }\n\n    _trimGraphs()\n    {\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n        var _coordMaxDis = _coord.getMaxDisToViewOfOrigin();\n\n        if( (_coordMaxDis - this.rRange.to)/(this.pit.radius*2) < this.groupLen-1-this.iGroup ){\n            //要保证后面的group至少能有意个ringNum\n            this.rRange.to = _coordMaxDis - (this.groupLen-1-this.iGroup)*this.pit.radius*2;\n        };\n        if( this.rRange.to - this.rRange.start < this.pit.radius*2 ){\n            this.rRange.to = this.rRange.start + this.pit.radius*2;\n        };\n\n        //计算该group中可以最多分布多少ring\n        if( !this.maxRingNum ){\n            this.maxRingNum = parseInt((this.rRange.to - this.rRange.start) / (this.pit.radius*2) , 10 );\n            \n            /* TODO: 这个目前有问题\n            //如果可以划10个环，但是其实数据只有8条， 那么就 当然是只需要划分8ring\n            //this.ringNum = Math.min( this.maxRingNum , this.dataFrame.length );\n            */\n            this.ringNum = this.maxRingNum\n        };\n\n        //重新计算修改 rRange.to的值\n        this.rRange.to = this.rRange.start + this.ringNum * this.pit.radius * 2;\n\n        //根据数据创建n个星球\n        var planets = [];\n\n        var dataLen  = this.dataFrame.length;\n        for( var i=0; i<dataLen; i++ ){  \n            \n            var rowData = this.dataFrame.getRowDataAt(i);\n            var planetLayoutData = {\n                groupLen    : this.groupLen,\n                iGroup      : me.iGroup,\n                iNode       : i,\n                nodeElement : null, //canvax元素\n                labelElement: null, //label的canvax元素\n                rowData     : rowData,\n\n                //下面这些都只能在绘制的时候确定然后赋值\n                iRing       : null,\n                iPlanet     : null,\n                fillStyle   : null,\n                color       : null, //给tips用\n                strokeStyle : null,\n                \n                pit         : null, //假设这个planet是个萝卜，那么 pit 就是这个萝卜的坑\n\n                ringInd     : -1,\n\n                field       : me.field,\n                label       : rowData[me.field],\n\n                focused     : false,\n                selected    : !!~_.indexOf( this.selectInds, rowData.__index__ )\n            };\n\n            planets.push( planetLayoutData );\n        };\n\n        if( me.sortField ){\n            planets = planets.sort( function(a , b){\n                var field = me.sortField;\n                if( me.sort == \"desc\" ){\n                    return b.rowData[ field ] - a.rowData[ field ];\n                } else {\n                    return a.rowData[ field ] - b.rowData[ field ];\n                }\n            } );\n            //修正下 排序过后的 iNode\n            _.each( planets, function( planet , i ){\n                planet.iNode = i;\n            } );\n        };\n\n        this._rings = this[\"_setRings_\"+ this.layoutType +\"Range\"]( planets );\n\n        this.planets = planets;\n    }\n\n    //根据弧度对应可以排列多少个星球的占比来分段\n    _setRings_radianRange( planets )\n    {\n        var me = this;\n        var _rings = [];\n\n        var _coord = this.app.getComponent({name:'coord'});\n\n        for( var i=0,l=this.ringNum ; i<l ; i++ ){\n            var _r = i*this.pit.radius*2 + this.pit.radius + this.rRange.start;\n\n            if( !me._graphs.center.enabled ){\n                _r = i*this.pit.radius*2 + this.rRange.start;\n            };\n\n            //该半径上面的弧度集合\n            var arcs = _coord.getRadiansAtR( _r , me.width, me.height );\n\n            //测试代码begin---------------------------------------------------\n            //用来绘制弧度的辅助线\n            /*\n            _.each( arcs, function( arc ){\n                var sector = new Canvax.Shapes.Sector({\n                    context: {\n                        r: _r,\n                        startAngle: arc[0].radian*180/Math.PI,\n                        endAngle: arc[1].radian*180/Math.PI, //secc.endAngle,\n                        strokeStyle: \"#ccc\",\n                        lineWidth:1\n                    },\n                });\n                me.sprite.addChild( sector );\n            } );\n            */\n            //测试代码end------------------------------------------------------\n\n            //该半径圆弧上，可以绘制一个星球的最小弧度值\n            var minRadianItem = Math.atan( this.pit.radius / _r );\n\n            _rings.push( {\n                arcs    : arcs,\n                pits    : [], //萝卜坑\n                planets : [], //将要入坑的萝卜\n                radius  : _r, //这个ring所在的半径轨道\n                max     : 0 //这个环上面最多能布局下的 planet 数量\n            } );\n\n        };\n\n        var allplanetsMax = 0; //所有ring里面\n\n        //计算每个环的最大可以创建星球数量,然后把所有的数量相加做分母。\n        //然后计算自己的比例去 planets 里面拿对应比例的数据\n        _.each( _rings , function( ring , i ){\n            //先计算上这个轨道上排排站一共可以放的下多少个星球\n            //一个星球需要多少弧度\n            var minRadian = Math.asin( me.pit.radius / ring.radius ) * 2;\n            if( ring.radius == 0 ){\n                //说明就在圆心\n                minRadian = Math.PI*2;\n            };\n\n            var _count = 0;\n            \n            _.each( ring.arcs , function( arc ){\n                var _adiff = me._getDiffRadian( arc[0].radian , arc[1].radian );\n                if( _adiff >= minRadian ){\n                    var _arc_count = parseInt( _adiff/minRadian , 10 );\n                    _count += _arc_count;\n                    //这个弧段里可以放_count个坑位\n                    for(var p=0 ; p<_arc_count ; p++){\n                        var pit = {\n                            hasRadish: false, //是否已经有萝卜(一个萝卜一个坑)\n                            start : (arc[0].radian + minRadian*p + Math.PI*2)%(Math.PI*2)\n                        };\n                        pit.middle = (pit.start+minRadian/2+Math.PI*2) % (Math.PI*2);\n                        pit.to     = (pit.start+minRadian+Math.PI*2) % (Math.PI*2);\n\n                        ring.pits.push( pit );\n\n                        //测试占位情况代码begin---------------------------------------------\n                        /*\n                        var point = me.app.getComponent({name:'coord'}).getPointInRadianOfR( pit.middle , ring.radius )\n                        me.sprite.addChild(new Circle({\n                            context:{\n                                x : point.x,\n                                y : point.y,\n                                r : me.pit.radius,\n                                fillStyle: \"#ccc\",\n                                strokeStyle: \"red\",\n                                lineWidth: 1,\n                                globalAlpha:0.3\n                            }\n                        }));\n                        */\n                        //测试占位情况代码end-----------------------------------------------     \n                    };\n\n                } else {\n                    //这个arc圆弧上面放不下一个坑位\n\n                }\n            } );\n            ring.max = _count;\n            allplanetsMax += _count;\n\n            //坑位做次随机乱序\n            ring.pits = _.shuffle( ring.pits );\n        });\n\n        //allplanetsMax有了后作为分明， 可以给每个ring去分摊 planet 了\n        var preAllCount = 0;\n        _.each( _rings , function( ring , i ){\n\n            if( preAllCount >= planets.length ){\n                return false;\n            };\n            \n            var num = Math.ceil( ring.max/allplanetsMax * planets.length );\n            num = Math.min( ring.max , num );\n\n            ring.planets = planets.slice( preAllCount , preAllCount + num );\n            if( i == _rings.length - 1 ){\n                ring.planets = planets.slice( preAllCount );\n            };\n            preAllCount += num;\n\n            //给每个萝卜分配一个坑位\n            _.each( ring.planets , function( planet , ii ){\n                \n                if( ii >= ring.pits.length ){\n                    //如果萝卜已经比这个ring上面的坑要多，就要扔掉， 没办法的\n                    return;\n                };\n\n                var pits = _.filter( ring.pits , function( pit ){\n                    return !pit.hasRadish ;\n                } );\n\n                var targetPit = pits[ parseInt(Math.random()*pits.length) ];\n                targetPit.hasRadish = true;\n                planet.pit = targetPit;\n            } );\n        } );\n\n        return _rings;\n    }\n\n    _getDiffRadian( _start , _to )\n    {\n        var _adiff = _to - _start;\n        if( _to < _start ){\n            _adiff = ((_to + Math.PI*2) - _start) % (Math.PI*2);\n        }\n        return _adiff;\n    }\n\n    //索引区间分段法 待实现\n    _setRings_indexRange( planets )\n    {\n    }\n\n    //值区间分段法\n    //todo:这样确实就很可能数据集中在两段中间没有 待实现\n    _setRings_valRange( planets )\n    {\n    }\n\n    draw()\n    {\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n        _.each( this._rings , function( ring , i ){\n            var _ringCtx = {\n                rotation : 0\n            };\n            if( ring.arcs.length == 1 && ring.arcs[0][0].radian == 0 && ring.arcs[0][1].radian == Math.PI*2 ){\n                //如果这个是一个整个的内圆，那么就做个随机的旋转\n                _ringCtx.rotation = parseInt( Math.random()*360 );\n            };\n            var _ringSp = new Canvax.Display.Sprite({\n                context : _ringCtx\n            });\n\n            _.each( ring.planets, function( p , ii){\n                if( !p.pit ){\n                    //如果这个萝卜没有足够的坑位可以放，很遗憾，只能扔掉了\n                    return;\n                };\n\n                var point = _coord.getPointInRadianOfR( p.pit.middle , ring.radius );\n\n                var r = me._getRProp( me.node.radius , i, ii , p);\n\n                //计算该萝卜在坑位（pit）中围绕pit的圆心可以随机移动的范围（r）\n                var _transR = me.node.maxRadius - r;\n                //然后围绕pit的圆心随机找一个点位，重新设置Point\n                var _randomTransR = parseInt(Math.random()*_transR);\n                var _randomAngle = parseInt(Math.random()*360);\n                var _randomRadian= _randomAngle*Math.PI / 180;\n                if( _randomTransR != 0 ){\n                    //说明还是在圆心， 就没必要重新计算point\n                    point.x += Math.sin(_randomRadian) * _randomTransR;\n                    point.y += Math.cos(_randomRadian) * _randomTransR;\n                };\n\n                var node = me.node;\n                if( p.selected ){\n                    node = me.node.select;\n                };\n\n                var _fillStyle = me._getProp( me.node.fillStyle , p );\n                var _strokeStyle = me._getProp( node.strokeStyle , p );\n                var _lineAlpha = me._getProp( node.lineAlpha, p );\n                var _lineWidth = me._getProp( node.lineWidth, p );\n\n                var circleCtx = {\n                    x : point.x,\n                    y : point.y,\n                    r : r,\n                    fillStyle: _fillStyle,\n                    lineWidth : _lineWidth,\n                    strokeStyle : _strokeStyle,\n                    lineAlpha : _lineAlpha,\n                    cursor: \"pointer\"\n                };\n\n                //设置好p上面的fillStyle 和 strokeStyle\n                p.color = p.fillStyle = _fillStyle;\n                p.strokeStyle = _strokeStyle;\n                p.iRing = i;\n                p.iPlanet = ii;\n                \n                var _circle = new Circle({\n                    hoverClone: false,\n                    context : circleCtx\n                });\n\n                _circle.on( event.types.get(), function(e) {\n                    \n                     e.eventInfo = {\n                         title : null,\n                         trigger : me.node,\n                         nodes : [ this.nodeData ]\n                     };\n                     if( this.nodeData.label ){\n                         e.eventInfo.title = this.nodeData.label;\n                     };\n\n                     if( me.node.focus.enabled ){\n                        if( e.type == \"mouseover\" ){\n                            me.focusAt( this.nodeData );\n                        }\n                        if( e.type == \"mouseout\" ){\n                            me.unfocusAt( this.nodeData );\n                        }\n                    };\n            \n                    if( me.node.select.enabled && e.type == me.node.select.triggerEventType ){\n                        //如果开启了图表的选中交互\n                        //TODO:这里不能\n                        if( this.nodeData.selected ){\n                            //说明已经选中了\n                            me.unselectAt( this.nodeData );\n                        } else {\n                            me.selectAt( this.nodeData );\n                        }\n                    };\n\n                    //fire到root上面去的是为了让root去处理tips\n                    me.app.fire( e.type, e );\n\n                 });\n\n                //互相用属性引用起来\n                _circle.nodeData = p;\n                p.nodeElement = _circle;\n\n                _circle.ringInd = i;\n                _circle.planetIndInRing = ii;\n\n                _ringSp.addChild( _circle );\n\n                //然后添加label\n                //绘制实心圆上面的文案\n                //x,y 默认安装圆心定位，也就是position == 'center'\n                var _labelCtx = {\n                    x: point.x,\n                    y: point.y, //point.y + r +3\n                    fontSize: me.label.fontSize,\n                    textAlign: me.label.align,\n                    textBaseline: me.label.verticalAlign,\n                    fillStyle: me.label.fontColor,\n                    rotation : -_ringCtx.rotation,\n                    rotateOrigin : {\n                        x : 0,\n                        y : 0 //-(r + 3)\n                    }\n                };\n                var _label = new Canvax.Display.Text( p.label , {\n                    context: _labelCtx\n                });\n\n                var _labelWidth = _label.getTextWidth();\n                var _labelHeight = _label.getTextHeight();\n\n                if( _labelWidth > r*2 ){\n                    _labelCtx.fontSize = me.label.fontSize - 3;\n                };\n\n                //最开始提供这个function模式，是因为还没有实现center,bottom,auto\n                //只能用function的形式用户自定义实现\n                //现在已经实现了center,bottom,auto，但是也还是先留着吧，也不碍事\n                if( _.isFunction( me.label.position ) ){\n                    var _pos = me.label.position( {\n                        node : _circle,\n                        circleR : r,\n                        circleCenter : {\n                            x : point.x,\n                            y : point.y\n                        },\n                        textWidth : _labelWidth,\n                        textHeight : _labelHeight\n                    } );\n                    _labelCtx.rotation = -_ringCtx.rotation;\n                    _labelCtx.rotateOrigin = {\n                        x : -( _pos.x - _labelCtx.x ),\n                        y : -( _pos.y - _labelCtx.y )\n                    };\n                    _labelCtx.x = _pos.x;\n                    _labelCtx.y = _pos.y;\n                };\n                \n                if( me.label.position == 'auto' ){\n                    if( _labelWidth > r*2){\n                        setPositionToBottom();\n                    };\n                };\n                if( me.label.position == 'bottom' ){\n                    setPositionToBottom();\n                };\n                \n                function setPositionToBottom(){\n                    _labelCtx.y = point.y + r +3;\n                    //_labelCtx.textBaseline = \"top\";\n                    _labelCtx.rotation = -_ringCtx.rotation;\n                    _labelCtx.rotateOrigin = {\n                        x : 0,\n                        y : -(r + _labelHeight*0.7)\n                    };\n                };\n\n                _labelCtx.x += me.label.offsetX;\n                _labelCtx.y += me.label.offsetY;\n\n                //TODO:这里其实应该是直接可以修改 _label.context. 属性的\n                //但是这里版本的canvax有问题。先重新创建文本对象吧\n                _label = new Canvax.Display.Text( p.label , {\n                    context: _labelCtx\n                });\n            \n                //互相用属性引用起来\n                _circle.labelElement = _label;\n                _label.nodeData = p;\n                p.labelElement = _label;\n\n                _ringSp.addChild( _label );\n            } );\n\n            me.sprite.addChild( _ringSp );\n        } );\n    }\n\n    _getRProp( r, ringInd, iNode, nodeData )\n    {\n        var me = this;\n\n        if( _.isString(r) && _.indexOf( me.dataFrame.fields, r ) > -1 ){\n            if( this.__rValMax == undefined && this.__rValMax == undefined ){\n                this.__rValMax = 0;\n                this.__rValMin = 0;\n                _.each( me.planets , function( planet ){\n                    me.__rValMax = Math.max( me.__rValMax , planet.rowData[ r ] );\n                    me.__rValMin = Math.min( me.__rValMin , planet.rowData[ r ] );\n                } );\n            };\n            var rVal = nodeData.rowData[ r ];\n            \n            return me.node.minR + (rVal-this.__rValMin)/(this.__rValMax-this.__rValMin) * (me.node.maxRadius - me.node.minR);\n        };\n        return me._getProp(r , nodeData);\n    }\n\n    _getProp( p, nodeData )\n    {\n        var iGroup = this.iGroup;\n        if( _.isFunction( p ) ){\n            return p.apply( this , [ nodeData, iGroup ] );\n            //return p( nodeData );\n        };\n        return p;\n    }\n\n    getPlanetAt( target ){\n        var planet = target;\n        if( _.isNumber( target ) ){\n            _.each( this.planets , function( _planet ){\n                if(_planet.rowData.__index__ == target){\n                    planet = _planet;\n                    return false;\n                }\n            } );\n        };\n        return planet;\n    }\n\n\n    //这里的ind是原始的__index__\n    selectAt( ind ){\n        if( !this.node.select.enabled ) return;\n        var planet = this.getPlanetAt( ind );\n        planet.selected = true;\n\n        //可能这个数据没有显示的，就没有nodeElement\n        if( planet.nodeElement ){\n            planet.nodeElement.context.lineWidth = this._getProp( this.node.select.lineWidth , planet );\n            planet.nodeElement.context.strokeStyle = this._getProp( this.node.select.strokeStyle , planet );\n            planet.nodeElement.context.lineAlpha = this._getProp( this.node.select.lineAlpha , planet );\n        };\n    \n        for( var i = 0; i<this.selectInds.length; i++ ){\n            if( ind === this.selectInds[i] ){\n                this.selectInds.splice( i--, 1 );\n                break;\n            };\n        };\n    }\n    //这里的ind是原始的__index__\n    unselectAt( ind ){\n        if( !this.node.select.enabled ) return;\n        var planet = this.getPlanetAt( ind );\n        planet.selected = false;\n\n        if( planet.nodeElement ){\n            planet.nodeElement.context.lineWidth = this._getProp( this.node.lineWidth , planet );\n            planet.nodeElement.context.lineAlpha = this._getProp( this.node.lineAlpha , planet );\n        };\n\n        this.selectInds.push( ind );\n    }\n\n    getSelectedNodes(){\n        return _.filter( this.planets, function( planet ){\n            return planet.selected;\n        } );\n    }\n\n    focusAt( ind ){\n        if( !this.node.focus.enabled ) return;\n        var planet = this.getPlanetAt( ind );\n        if( planet.selected ) return;\n        planet.focused = true;\n        if( planet.nodeElement ){\n            planet.nodeElement.context.lineWidth = this._getProp( this.node.focus.lineWidth , planet );\n            planet.nodeElement.context.strokeStyle = this._getProp( this.node.focus.strokeStyle , planet );\n            planet.nodeElement.context.lineAlpha = this._getProp( this.node.focus.lineAlpha , planet ); \n        };\n    }\n    unfocusAt( ind ){\n        if( !this.node.focus.enabled ) return;\n        var planet = this.getPlanetAt( ind );\n        if( planet.selected ) return;\n        planet.focused = false;\n\n        if( planet.nodeElement ){\n            planet.nodeElement.context.lineWidth = this._getProp( this.node.lineWidth , planet );\n            planet.nodeElement.context.lineAlpha = this._getProp( this.node.lineAlpha , planet );\n        };\n    }\n\n}","import Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\nimport Group from \"./group\"\nimport { dataFrame,_ } from \"mmvis\"\n\nconst Text = Canvax.Display.Text;\nconst Circle = Canvax.Shapes.Circle;\nconst Line = Canvax.Shapes.Line;\nconst Rect = Canvax.Shapes.Rect;\n\nexport default class PlanetGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"planet\";\n\n        this.field = null;\n        \n        var me = this;\n        //圆心原点坐标\n        this.center = {\n            enabled   : true,\n            text      : \"center\",\n            radius    : 30,\n            fillStyle : \"#70629e\",\n            fontSize  : 15,\n            fontColor : \"#ffffff\",\n            margin    : 20 //最近ring到太阳的距离\n        };\n\n        this.groupDataFrames = [];\n        this.groupField = null;\n        this._ringGroups = []; //groupField对应的 group 对象\n\n        //planet自己得grid，不用polar的grid\n        this.grid = {\n            rings : {\n                fillStyle : null,\n                strokeStyle: null,\n                lineWidth : 1,\n                section: [], //环形刻度线集合\n                count: 3 //在 section.length>1 的时候会被修改为 section.length\n            },\n            rays : {\n                count : 0,\n                lineWidth : 1,\n                strokeStyle : \"#10519D\",\n                globalAlpha : 0.4\n            }\n        };\n\n        this.selectInds = []; //源数据中__index__的集合，外面可以传入这个数据进来设置选中\n\n        _.extend( true, this , opt );\n\n        if( this.center.radius == 0 || !this.center.enabled ){\n            this.center.radius = 0;\n            this.center.margin = 0;\n            this.center.enabled = false;\n        };\n\n        this.init();\n    }\n    \n    init()\n    {\n        this.gridSp = new Canvax.Display.Sprite({ \n            id : \"gridSp\"\n        });\n\n        this.sprite.addChild( this.gridSp );\n        this._dataGroupHandle();\n    }\n\n    draw( opt )\n    {\n        \n        !opt && (opt ={});\n\n        _.extend( true, this , opt );\n\n        this._drawGroups();\n\n        this._drawCenter();\n\n        this.fire(\"complete\");\n    \n    }\n    \n\n    _getMaxR()\n    {\n        var _circleMaxR;\n        try{\n            _circleMaxR = this.graphs.group.circle.maxRadius;\n        } catch(e){}\n        if( _circleMaxR == undefined ){\n            _circleMaxR = 30\n        };\n        return _circleMaxR;\n    }\n\n    _drawGroups()\n    {\n        var me = this;\n\n        var groupRStart = this.center.radius + this.center.margin;\n      \n        var maxRadius = me.app.getComponent({name:'coord'}).getMaxDisToViewOfOrigin() - me.center.radius - me.center.margin;\n        \n        var _circleMaxR = this._getMaxR();\n\n        _.each( this.groupDataFrames , function( df , i ){\n            \n            var toR = groupRStart + maxRadius*( (df.length) / (me.dataFrame.length) );\n            \n            var _g = new Group( _.extend(true, {\n                iGroup : i,\n                groupLen : me.groupDataFrames.length,\n                rRange : {\n                    start : groupRStart,\n                    to : toR\n                },\n                width : me.width - _circleMaxR*2,\n                height: me.height - _circleMaxR*2,\n                selectInds : me.selectInds\n            }, me._opt) , df , me );\n\n            groupRStart = _g.rRange.to;\n\n            me._ringGroups.push( _g );\n\n            me.grid.rings.section.push({\n                radius : _g.rRange.to\n            });\n            \n        } );\n\n        me._drawBack();\n        \n        _.each( me._ringGroups , function(_g){\n            me.sprite.addChild( _g.sprite );\n        } );\n    }\n\n    _drawCenter()\n    {\n        if( this.center.enabled ){\n            //绘制中心实心圆\n            this._center = new Circle({\n                context : {\n                    x : this.origin.x,\n                    y : this.origin.y,\n                    fillStyle : this.center.fillStyle,\n                    r : this.center.radius\n                }\n            });\n            //绘制实心圆上面的文案\n            this._centerTxt = new Text(this.center.text, {\n                context: {\n                    x: this.origin.x,\n                    y: this.origin.y,\n                    fontSize: this.center.fontSize,\n                    textAlign: \"center\",\n                    textBaseline: \"middle\",\n                    fillStyle: this.center.fontColor\n                }\n            });\n            this.sprite.addChild( this._center );\n            this.sprite.addChild( this._centerTxt );\n        }\n    }\n\n    _drawBack(){\n        var me = this;\n        var _coord = this.app.getComponent({name:'coord'});\n        \n        if( me.grid.rings.section.length == 1 ){\n\n            //如果只有一个，那么就强制添加到3个\n            var _diffR = (me.grid.rings.section[0].radius - me.center.radius) / me.grid.rings.count;\n            me.grid.rings.section = [];\n            for( var i=0;i<me.grid.rings.count ; i++ ){\n                me.grid.rings.section.push({\n                    radius : me.center.radius + _diffR*(i+1)\n                });\n            }\n\n        } else {\n            me.grid.rings.count = me.grid.rings.section.length;\n        };\n\n        \n        for( var i=me.grid.rings.section.length-1 ; i>=0 ; i-- ){\n            var _scale = me.grid.rings.section[i];\n            me.gridSp.addChild( new Circle({\n                context : {\n                    x : _coord.origin.x,\n                    y : _coord.origin.y,\n                    r : _scale.radius,\n                    lineWidth : me._getBackProp( me.grid.rings.lineWidth , i),\n                    strokeStyle : me._getBackProp( me.grid.rings.strokeStyle , i),\n                    fillStyle: me._getBackProp( me.grid.rings.fillStyle , i)\n                }\n            }) );\n        };\n\n        \n        //如果back.rays.count非0， 则绘制从圆心出发的射线\n        if( me.grid.rays.count > 1 ){\n            var cx = _coord.origin.x;\n            var cy = _coord.origin.y;\n            var itemAng = 360 / me.grid.rays.count;\n            var _r = _coord.getMaxDisToViewOfOrigin(); //Math.max( me.w, me.h );\n\n            if( me.grid.rings.section.length ){\n                _r = me.grid.rings.section.slice(-1)[0].radius\n            }\n\n            for( var i=0,l=me.grid.rays.count; i<l; i++ ){\n                var radian = itemAng*i / 180 * Math.PI;\n                var tx = cx + _r * Math.cos( radian );\n                var ty = cy + _r * Math.sin( radian );\n\n                me.gridSp.addChild( new Line({\n                    context : {\n                        start : {\n                            x : cx,\n                            y : cy\n                        },\n                        end : {\n                            x : tx,\n                            y : ty\n                        },\n                        lineWidth : me._getBackProp( me.grid.rays.lineWidth , i),\n                        strokeStyle : me._getBackProp( me.grid.rays.strokeStyle , i),\n                        globalAlpha : me.grid.rays.globalAlpha\n                    }\n                }) );\n            };\n        };\n\n        var _clipRect = new Rect({\n            name: \"clipRect\",\n            context : {\n                x : _coord.origin.x-me.app.width/2,\n                y : _coord.origin.y-me.height/2,\n                width : me.app.width,\n                height : me.height\n            }\n        });\n        me.gridSp.clipTo( _clipRect );\n        me.sprite.addChild( _clipRect );\n\n    }\n\n    _getBackProp( p, i )\n    {\n        var iGroup = i;\n        var res = null;\n        if( _.isFunction( p ) ){\n            res = p.apply( this , [ {\n                //iGroup : iGroup,\n                scaleInd : i,\n                count : this.grid.rings.section.length,\n\n                groups : this._ringGroups,\n                graphs : this\n            } ] );\n        };\n        if( _.isString( p ) || _.isNumber( p ) ){\n            res = p;\n        };\n        if( _.isArray( p ) ){\n            res = p[i]\n        };\n        return res\n    }\n\n    _dataGroupHandle()\n    {\n        var groupFieldInd = _.indexOf(this.dataFrame.fields , this.groupField);\n        if( groupFieldInd >= 0 ){\n            //有分组字段，就还要对dataFrame中的数据分下组，然后给到 groupDataFrames\n            var titles = this.dataFrame.org[0];\n            var _dmap = {}; //以分组的字段值做为key\n\n            _.each( this.dataFrame.org , function( row , i ){\n                if( i ){\n                    //从i==1 行开始，因为第一行是titles\n                    if( !_dmap[ row[groupFieldInd] ] ){\n                        //如果没有记录，先创建\n                        _dmap[ row[groupFieldInd] ] = [\n                            _.clone( titles )\n                        ]\n                    };\n                    _dmap[ row[groupFieldInd] ].push( row );\n                }\n            } );\n\n            for( var r in _dmap ){\n                this.groupDataFrames.push( dataFrame( _dmap[r] ) );\n            };\n        } else {\n            //如果分组字段不存在，则认为数据不需要分组，直接全部作为 group 的一个子集合\n            this.groupDataFrames.push( this.dataFrame );\n        };\n    }\n\n\n\n\n\n    //graphs方法\n\n    show( field , trigger )\n    {\n        this.getAgreeNodeData( trigger, function( data ){\n            data.nodeElement && (data.nodeElement.context.visible = true);\n            data.labelElement && (data.labelElement.context.visible = true);\n        } );\n    }\n\n    hide( field , trigger)\n    {\n        this.getAgreeNodeData( trigger, function( data ){\n            data.nodeElement && (data.nodeElement.context.visible = false);\n            data.labelElement && (data.labelElement.context.visible = false);\n        } );\n    }\n\n    getAgreeNodeData( trigger , callback)\n    {\n        var me = this;\n        _.each( this._ringGroups, function( _g ){\n            _.each( _g._rings , function( ring , i ){\n                _.each( ring.planets, function( data , ii){\n                    var rowData = data.rowData;\n                    if( trigger.params.name == rowData[ trigger.params.field ] ){\n                        //这个数据符合\n                        //data.nodeElement.context.visible = false;\n                        //data.labelElement.context.visible = false;\n                        callback && callback( data );\n                    };\n                });\n            });\n        } );\n    }\n\n    //获取所有有效的在布局中的nodeData\n    getLayoutNodes(){\n        var nodes = [];\n        _.each( this._ringGroups, function( rg ){\n            _.each(rg.planets, function( node ){\n                if( node.pit ){\n                    nodes.push( node );\n                };\n            })\n        } );\n        return nodes;\n    }\n\n    //获取所有无效的在不在布局的nodeData\n    getInvalidNodes(){\n        var nodes = [];\n        _.each( this._ringGroups, function( rg ){\n            _.each(rg.planets, function( node ){\n                if( !node.pit ){\n                    nodes.push( node );\n                };\n            })\n        } );\n        return nodes;\n    }\n\n    //ind 对应源数据中的index\n    selectAt( ind ){\n        var me = this;\n        _.each( me._ringGroups, function( _g ){\n            _g.selectAt( ind );\n        } );\n    }\n\n    //selectAll\n    selectAll(){\n        var me = this;\n        _.each( me.dataFrame.getFieldData(\"__index__\") , function( _ind ){\n            me.selectAt( _ind )\n        } );\n    }\n\n    //ind 对应源数据中的index\n    unselectAt( ind ){\n        var me = this;\n        _.each( me._ringGroups, function( _g ){\n            _g.unselectAt( ind );\n        } );\n    }\n\n    //unselectAll\n    unselectAll( ind ){\n        var me = this;\n        _.each( me.dataFrame.getFieldData(\"__index__\") , function( _ind ){\n            me.unselectAt( _ind )\n        } );\n    }\n\n    //获取所有的节点数据\n    getSelectedNodes(){\n        var arr = [];\n        _.each( this._ringGroups, function( _g ){\n            arr = arr.concat( _g.getSelectedNodes() );\n        } );\n        return arr;\n    }\n\n    //获取所有的节点数据对应的原始数据行\n    getSelectedRowList(){\n        var arr = [];\n        _.each( this._ringGroups, function( _g ){\n            var rows = [];\n            _.each( _g.getSelectedNodes(), function( nodeData ){\n                rows.push( nodeData.rowData );\n            } );\n            arr = arr.concat( rows );\n        } );\n        return arr;\n    }\n\n}\n","import Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\nimport {numAddSymbol} from \"../../../utils/tools\"\nimport { _ , event } from \"mmvis\"\n\nconst Text = Canvax.Display.Text;\nconst Polygon = Canvax.Shapes.Polygon;\n\nexport default class FunnelGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"funnel\";\n\n        this.field = null;\n        this.dataOrg = []; //this.dataFrame.getFieldData( this.field )\n        this.data  = []; //layoutData list , default is empty Array\n        this.sort = null;\n\n        this.invert = false; //默认为倒立的金字塔结构\n\n        this._maxVal = null;\n        this._minVal = null;\n        this.maxNodeWidth = null;\n        this.minNodeWidth = 0;\n        this.minVal = 0; //漏斗的塔尖，默认为0\n\n        this.node = {\n            shapeType   : \"polygon\", //节点的现状可以是圆 ，也可以是rect，也可以是三角形，后面两种后面实现\n            height : 0, //漏斗单元高，如果options没有设定， 就会被自动计算为 this.height/dataOrg.length\n            \n            fillStyle : null, //目前主要用皮肤来实现配色，暂时node.fillStyle没用到，但是先定义起来\n            lineWidth : 0,\n            strokeStyle : null,\n\n            focus : {\n                enabled : true\n            },\n            select : {\n                enabled : true,\n                lineWidth : 2,\n                strokeStyle : \"#666\"\n            }\n        };\n\n        this.label = {\n            enabled : true,\n            align : \"center\", // left , center, right\n            format : function( num ){ \n                return numAddSymbol( num );\n            },\n            fontColor : \"#ffffff\",\n            fontSize : 13,\n            textBaseline : \"middle\"\n        }\n\n        _.extend( true, this , opt );\n\n        this.init( );\n    }\n\n    init()\n    {\n        \n    }\n\n    _computerAttr()\n    {\n        if( this.field ){\n            this.dataOrg = this.dataFrame.getFieldData( this.field );\n        };\n        this._maxVal = _.max( this.dataOrg );\n        this._minVal = _.min( this.dataOrg );\n        \n        //计算一些基础属性，比如maxNodeWidth等， 加入外面没有设置\n        if( !this.maxNodeWidth ){\n            this.maxNodeWidth = this.width * 0.7;\n        };\n\n        if( !this.node.height ){\n            this.node.height = this.height / this.dataOrg.length;\n        };\n\n        if( this.sort == \"asc\" ){\n            //倒序的话\n            this.invert = true;\n        };\n        if( this.sort == \"desc\" ){\n            //倒序的话\n            this.invert = false;\n        };\n    }\n\n    draw( opt )\n    {\n        !opt && (opt ={});\n        \n        //第二个data参数去掉，直接trimgraphs获取最新的data\n        _.extend(true, this, opt);\n\n        var me = this;\n\n        var animate = me.animation && !opt.resize;\n\n        this._computerAttr();\n\n        this.data = this._trimGraphs();\n\n        this._drawGraphs();\n\n        this.sprite.context.x = this.origin.x + this.width/2;\n        this.sprite.context.y = this.origin.y;\n\n    }\n\n    _trimGraphs()\n    {\n        if( !this.field ) return;\n\n        var me = this;\n        //var dataOrg = _.clone( this.dataOrg );\n\n        var layoutData = [];\n\n        _.each( this.dataOrg, function( num , i ){\n\n            var ld = {\n                type    : \"funnel\",\n                field   : me.field,\n                rowData : me.dataFrame.getRowDataAt(i),\n                value   : num,\n                width   : me._getNodeWidth( num ),\n                color   : me.app.getTheme(i),//默认从皮肤中获取\n                cursor  : \"pointer\",\n               \n                //下面得都在layoutData的循环中计算\n                label    : '',\n                middlePoint : null,\n                iNode   : -1,\n                points  : []\n            };\n            layoutData.push( ld );\n        } );\n\n        if( this.sort ){\n            layoutData = layoutData.sort(function( a, b ){\n                if( me.sort == \"desc\" ){\n                    return b.value - a.value;\n                } else {\n                    return a.value - b.value;\n                }\n            });\n        };\n\n        _.each( layoutData, function( ld , i){\n            ld.iNode = i;\n            ld.label = me.label.format( ld.value , ld );\n        } );\n        _.each( layoutData, function( ld , i){\n            ld.points = me._getPoints(ld , layoutData[i+1], layoutData[i-1]);\n            ld.middlePoint = {\n                x : 0,\n                y : (ld.iNode + 0.5) * me.node.height\n            };\n        } );\n        \n        return layoutData;\n    }\n\n    _getNodeWidth( num )\n    {\n        var width = this.minNodeWidth + ( (this.maxNodeWidth-this.minNodeWidth) / (this._maxVal-this.minVal) * (num-this.minVal) );\n        return parseInt( width );\n    }\n\n    _getPoints( layoutData , nextLayoutData , preLayoutData )\n    {\n        var points = [];\n        var topY = layoutData.iNode * this.node.height;\n        var bottomY = topY + this.node.height;\n\n        if( !this.invert ){    \n            points.push( [ -layoutData.width/2, topY] ); //左上\n            points.push( [ layoutData.width/2, topY] ); //右上\n\n            var bottomWidth = this.minNodeWidth;\n            if( nextLayoutData ){\n                bottomWidth = nextLayoutData.width;\n            };\n            points.push( [ bottomWidth/2, bottomY] ); //右下\n            points.push( [ -bottomWidth/2, bottomY] ); //左下\n        } else {\n            //正金字塔结构的话，是从最上面一个 data 的 top 取min开始\n            var topWidth = this.minNodeWidth;\n            if( preLayoutData ){\n                topWidth = preLayoutData.width;\n            };\n            points.push( [ -topWidth/2, topY] ); //左上\n            points.push( [ topWidth/2, topY] ); //右上\n            points.push( [ layoutData.width/2, bottomY] ); //右下\n            points.push( [ -layoutData.width/2, bottomY] ); //左下\n        }\n\n        return points;\n    }\n\n    _drawGraphs()\n    {\n        var me = this;\n        _.each( this.data , function( ld ){\n            var _polygon = new Polygon({\n                context : {\n                    pointList : ld.points,\n                    fillStyle : ld.color,\n                    cursor : ld.cursor\n                }\n            });\n            me.sprite.addChild( _polygon );\n            _polygon.nodeData = ld;\n            _polygon.on( event.types.get() , function(e) {\n                \n                e.eventInfo = {\n                    trigger: me.node,\n                    title : me.field,\n                    nodes : [ this.nodeData ]\n                };\n\n                //fire到root上面去的是为了让root去处理tips\n                me.app.fire( e.type, e );\n            });\n\n            var textAlign = \"center\";\n            var textPoint = {\n                x : ld.middlePoint.x,\n                y : ld.middlePoint.y\n            };\n            if( me.label.align == \"left\" ){\n                textPoint.x = ld.points[0][0] - (ld.points[0][0] - ld.points[3][0])/2;\n                textPoint.x -= 15;\n                textAlign = \"right\";\n            };\n            if( me.label.align == \"right\" ){\n                textPoint.x = ld.points[1][0] - (ld.points[1][0] - ld.points[2][0])/2\n                textPoint.x += 15;\n                textAlign = \"left\";\n            };\n\n            var _text = new Text( ld.label , {\n                context : {\n                    x : textPoint.x,\n                    y : textPoint.y,\n                    fontSize : me.label.fontSize,\n                    fillStyle : me.label.align == \"center\" ? me.label.fontColor : ld.color,\n                    textAlign : textAlign,\n                    textBaseline : me.label.textBaseline\n                }\n            } );\n\n            me.sprite.addChild( _text );\n        } );\n    }\n\n\n}\n","/** finds the zeros of a function, given two starting points (which must\n * have opposite signs */\nexport function bisect(f, a, b, parameters) {\n    parameters = parameters || {};\n    var maxIterations = parameters.maxIterations || 100,\n        tolerance = parameters.tolerance || 1e-10,\n        fA = f(a),\n        fB = f(b),\n        delta = b - a;\n\n    if (fA * fB > 0) {\n        throw \"Initial bisect points must have opposite signs\";\n    }\n\n    if (fA === 0) return a;\n    if (fB === 0) return b;\n\n    for (var i = 0; i < maxIterations; ++i) {\n        delta /= 2;\n        var mid = a + delta,\n            fMid = f(mid);\n\n        if (fMid * fA >= 0) {\n            a = mid;\n        }\n\n        if ((Math.abs(delta) < tolerance) || (fMid === 0)) {\n            return mid;\n        }\n    }\n    return a + delta;\n}\n","// need some basic operations on vectors, rather than adding a dependency,\n// just define here\nexport function zeros(x) { var r = new Array(x); for (var i = 0; i < x; ++i) { r[i] = 0; } return r; }\nexport function zerosM(x,y) { return zeros(x).map(function() { return zeros(y); }); }\n\nexport function dot(a, b) {\n    var ret = 0;\n    for (var i = 0; i < a.length; ++i) {\n        ret += a[i] * b[i];\n    }\n    return ret;\n}\n\nexport function norm2(a)  {\n    return Math.sqrt(dot(a, a));\n}\n\nexport function scale(ret, value, c) {\n    for (var i = 0; i < value.length; ++i) {\n        ret[i] = value[i] * c;\n    }\n}\n\nexport function weightedSum(ret, w1, v1, w2, v2) {\n    for (var j = 0; j < ret.length; ++j) {\n        ret[j] = w1 * v1[j] + w2 * v2[j];\n    }\n}\n","import {dot, norm2, weightedSum} from \"./blas1\";\n\n/** minimizes a function using the downhill simplex method */\nexport function nelderMead(f, x0, parameters) {\n    parameters = parameters || {};\n\n    var maxIterations = parameters.maxIterations || x0.length * 200,\n        nonZeroDelta = parameters.nonZeroDelta || 1.05,\n        zeroDelta = parameters.zeroDelta || 0.001,\n        minErrorDelta = parameters.minErrorDelta || 1e-6,\n        minTolerance = parameters.minErrorDelta || 1e-5,\n        rho = (parameters.rho !== undefined) ? parameters.rho : 1,\n        chi = (parameters.chi !== undefined) ? parameters.chi : 2,\n        psi = (parameters.psi !== undefined) ? parameters.psi : -0.5,\n        sigma = (parameters.sigma !== undefined) ? parameters.sigma : 0.5,\n        maxDiff;\n\n    // initialize simplex.\n    var N = x0.length,\n        simplex = new Array(N + 1);\n    simplex[0] = x0;\n    simplex[0].fx = f(x0);\n    simplex[0].id = 0;\n    for (var i = 0; i < N; ++i) {\n        var point = x0.slice();\n        point[i] = point[i] ? point[i] * nonZeroDelta : zeroDelta;\n        simplex[i+1] = point;\n        simplex[i+1].fx = f(point);\n        simplex[i+1].id = i+1;\n    }\n\n    function updateSimplex(value) {\n        for (var i = 0; i < value.length; i++) {\n            simplex[N][i] = value[i];\n        }\n        simplex[N].fx = value.fx;\n    }\n\n    var sortOrder = function(a, b) { return a.fx - b.fx; };\n\n    var centroid = x0.slice(),\n        reflected = x0.slice(),\n        contracted = x0.slice(),\n        expanded = x0.slice();\n\n    for (var iteration = 0; iteration < maxIterations; ++iteration) {\n        simplex.sort(sortOrder);\n\n        if (parameters.history) {\n            // copy the simplex (since later iterations will mutate) and\n            // sort it to have a consistent order between iterations\n            var sortedSimplex = simplex.map(function (x) {\n                var state = x.slice();\n                state.fx = x.fx;\n                state.id = x.id;\n                return state;\n            });\n            sortedSimplex.sort(function(a,b) { return a.id - b.id; });\n\n            parameters.history.push({x: simplex[0].slice(),\n                                     fx: simplex[0].fx,\n                                     simplex: sortedSimplex});\n        }\n\n        maxDiff = 0;\n        for (i = 0; i < N; ++i) {\n            maxDiff = Math.max(maxDiff, Math.abs(simplex[0][i] - simplex[1][i]));\n        }\n\n        if ((Math.abs(simplex[0].fx - simplex[N].fx) < minErrorDelta) &&\n            (maxDiff < minTolerance)) {\n            break;\n        }\n\n        // compute the centroid of all but the worst point in the simplex\n        for (i = 0; i < N; ++i) {\n            centroid[i] = 0;\n            for (var j = 0; j < N; ++j) {\n                centroid[i] += simplex[j][i];\n            }\n            centroid[i] /= N;\n        }\n\n        // reflect the worst point past the centroid  and compute loss at reflected\n        // point\n        var worst = simplex[N];\n        weightedSum(reflected, 1+rho, centroid, -rho, worst);\n        reflected.fx = f(reflected);\n\n        // if the reflected point is the best seen, then possibly expand\n        if (reflected.fx < simplex[0].fx) {\n            weightedSum(expanded, 1+chi, centroid, -chi, worst);\n            expanded.fx = f(expanded);\n            if (expanded.fx < reflected.fx) {\n                updateSimplex(expanded);\n            }  else {\n                updateSimplex(reflected);\n            }\n        }\n\n        // if the reflected point is worse than the second worst, we need to\n        // contract\n        else if (reflected.fx >= simplex[N-1].fx) {\n            var shouldReduce = false;\n\n            if (reflected.fx > worst.fx) {\n                // do an inside contraction\n                weightedSum(contracted, 1+psi, centroid, -psi, worst);\n                contracted.fx = f(contracted);\n                if (contracted.fx < worst.fx) {\n                    updateSimplex(contracted);\n                } else {\n                    shouldReduce = true;\n                }\n            } else {\n                // do an outside contraction\n                weightedSum(contracted, 1-psi * rho, centroid, psi*rho, worst);\n                contracted.fx = f(contracted);\n                if (contracted.fx < reflected.fx) {\n                    updateSimplex(contracted);\n                } else {\n                    shouldReduce = true;\n                }\n            }\n\n            if (shouldReduce) {\n                // if we don't contract here, we're done\n                if (sigma >= 1) break;\n\n                // do a reduction\n                for (i = 1; i < simplex.length; ++i) {\n                    weightedSum(simplex[i], 1 - sigma, simplex[0], sigma, simplex[i]);\n                    simplex[i].fx = f(simplex[i]);\n                }\n            }\n        } else {\n            updateSimplex(reflected);\n        }\n    }\n\n    simplex.sort(sortOrder);\n    return {fx : simplex[0].fx,\n            x : simplex[0]};\n}\n","import {dot, weightedSum} from \"./blas1\";\n\n\n/// searches along line 'pk' for a point that satifies the wolfe conditions\n/// See 'Numerical Optimization' by Nocedal and Wright p59-60\n/// f : objective function\n/// pk : search direction\n/// current: object containing current gradient/loss\n/// next: output: contains next gradient/loss\n/// returns a: step size taken\nexport function wolfeLineSearch(f, pk, current, next, a, c1, c2) {\n    var phi0 = current.fx, phiPrime0 = dot(current.fxprime, pk),\n        phi = phi0, phi_old = phi0,\n        phiPrime = phiPrime0,\n        a0 = 0;\n\n    a = a || 1;\n    c1 = c1 || 1e-6;\n    c2 = c2 || 0.1;\n\n    function zoom(a_lo, a_high, phi_lo) {\n        for (var iteration = 0; iteration < 16; ++iteration) {\n            a = (a_lo + a_high)/2;\n            weightedSum(next.x, 1.0, current.x, a, pk);\n            phi = next.fx = f(next.x, next.fxprime);\n            phiPrime = dot(next.fxprime, pk);\n\n            if ((phi > (phi0 + c1 * a * phiPrime0)) ||\n                (phi >= phi_lo)) {\n                a_high = a;\n\n            } else  {\n                if (Math.abs(phiPrime) <= -c2 * phiPrime0) {\n                    return a;\n                }\n\n                if (phiPrime * (a_high - a_lo) >=0) {\n                    a_high = a_lo;\n                }\n\n                a_lo = a;\n                phi_lo = phi;\n            }\n        }\n\n        return 0;\n    }\n\n    for (var iteration = 0; iteration < 10; ++iteration) {\n        weightedSum(next.x, 1.0, current.x, a, pk);\n        phi = next.fx = f(next.x, next.fxprime);\n        phiPrime = dot(next.fxprime, pk);\n        if ((phi > (phi0 + c1 * a * phiPrime0)) ||\n            (iteration && (phi >= phi_old))) {\n            return zoom(a0, a, phi_old);\n        }\n\n        if (Math.abs(phiPrime) <= -c2 * phiPrime0) {\n            return a;\n        }\n\n        if (phiPrime >= 0 ) {\n            return zoom(a, a0, phi);\n        }\n\n        phi_old = phi;\n        a0 = a;\n        a *= 2;\n    }\n\n    return a;\n}\n","import {dot, norm2, scale, weightedSum} from \"./blas1\";\nimport {wolfeLineSearch} from \"./linesearch\";\n\nexport function conjugateGradient(f, initial, params) {\n    // allocate all memory up front here, keep out of the loop for perfomance\n    // reasons\n    var current = {x: initial.slice(), fx: 0, fxprime: initial.slice()},\n        next = {x: initial.slice(), fx: 0, fxprime: initial.slice()},\n        yk = initial.slice(),\n        pk, temp,\n        a = 1,\n        maxIterations;\n\n    params = params || {};\n    maxIterations = params.maxIterations || initial.length * 20;\n\n    current.fx = f(current.x, current.fxprime);\n    pk = current.fxprime.slice();\n    scale(pk, current.fxprime,-1);\n\n    for (var i = 0; i < maxIterations; ++i) {\n        a = wolfeLineSearch(f, pk, current, next, a);\n\n        // todo: history in wrong spot?\n        if (params.history) {\n            params.history.push({x: current.x.slice(),\n                                 fx: current.fx,\n                                 fxprime: current.fxprime.slice(),\n                                 alpha: a});\n        }\n\n        if (!a) {\n            // faiiled to find point that satifies wolfe conditions.\n            // reset direction for next iteration\n            scale(pk, current.fxprime, -1);\n\n        } else {\n            // update direction using Polak–Ribiere CG method\n            weightedSum(yk, 1, next.fxprime, -1, current.fxprime);\n\n            var delta_k = dot(current.fxprime, current.fxprime),\n                beta_k = Math.max(0, dot(yk, next.fxprime) / delta_k);\n\n            weightedSum(pk, beta_k, pk, -1, next.fxprime);\n\n            temp = current;\n            current = next;\n            next = temp;\n        }\n\n        if (norm2(current.fxprime) <= 1e-5) {\n            break;\n        }\n    }\n\n    if (params.history) {\n        params.history.push({x: current.x.slice(),\n                             fx: current.fx,\n                             fxprime: current.fxprime.slice(),\n                             alpha: a});\n    }\n\n    return current;\n}\n","var SMALL = 1e-10;\n\n/** Returns the intersection area of a bunch of circles (where each circle\n is an object having an x,y and radius property) */\nexport function intersectionArea(circles, stats) {\n    // get all the intersection points of the circles\n    var intersectionPoints = getIntersectionPoints(circles);\n\n    // filter out points that aren't included in all the circles\n    var innerPoints = intersectionPoints.filter(function (p) {\n        return containedInCircles(p, circles);\n    });\n\n    var arcArea = 0, polygonArea = 0, arcs = [], i;\n\n    // if we have intersection points that are within all the circles,\n    // then figure out the area contained by them\n    if (innerPoints.length > 1) {\n        // sort the points by angle from the center of the polygon, which lets\n        // us just iterate over points to get the edges\n        var center = getCenter(innerPoints);\n        for (i = 0; i < innerPoints.length; ++i ) {\n            var p = innerPoints[i];\n            p.angle = Math.atan2(p.x - center.x, p.y - center.y);\n        }\n        innerPoints.sort(function(a,b) { return b.angle - a.angle;});\n\n        // iterate over all points, get arc between the points\n        // and update the areas\n        var p2 = innerPoints[innerPoints.length - 1];\n        for (i = 0; i < innerPoints.length; ++i) {\n            var p1 = innerPoints[i];\n\n            // polygon area updates easily ...\n            polygonArea += (p2.x + p1.x) * (p1.y - p2.y);\n\n            // updating the arc area is a little more involved\n            var midPoint = {x : (p1.x + p2.x) / 2,\n                            y : (p1.y + p2.y) / 2},\n                arc = null;\n\n            for (var j = 0; j < p1.parentIndex.length; ++j) {\n                if (p2.parentIndex.indexOf(p1.parentIndex[j]) > -1) {\n                    // figure out the angle halfway between the two points\n                    // on the current circle\n                    var circle = circles[p1.parentIndex[j]],\n                        a1 = Math.atan2(p1.x - circle.x, p1.y - circle.y),\n                        a2 = Math.atan2(p2.x - circle.x, p2.y - circle.y);\n\n                    var angleDiff = (a2 - a1);\n                    if (angleDiff < 0) {\n                        angleDiff += 2*Math.PI;\n                    }\n\n                    // and use that angle to figure out the width of the\n                    // arc\n                    var a = a2 - angleDiff/2,\n                        width = distance(midPoint, {\n                            x : circle.x + circle.radius * Math.sin(a),\n                            y : circle.y + circle.radius * Math.cos(a)\n                        });\n\n                    // clamp the width to the largest is can actually be\n                    // (sometimes slightly overflows because of FP errors)\n                    if (width > circle.radius * 2) {\n                        width = circle.radius * 2;\n                    }\n\n                    // pick the circle whose arc has the smallest width\n                    if ((arc === null) || (arc.width > width)) {\n                        arc = { circle : circle,\n                                width : width,\n                                p1 : p1,\n                                p2 : p2};\n                    }\n                }\n            }\n\n            if (arc !== null) {\n                arcs.push(arc);\n                arcArea += circleArea(arc.circle.radius, arc.width);\n                p2 = p1;\n            }\n        }\n    } else {\n        // no intersection points, is either disjoint - or is completely\n        // overlapped. figure out which by examining the smallest circle\n        var smallest = circles[0];\n        for (i = 1; i < circles.length; ++i) {\n            if (circles[i].radius < smallest.radius) {\n                smallest = circles[i];\n            }\n        }\n\n        // make sure the smallest circle is completely contained in all\n        // the other circles\n        var disjoint = false;\n        for (i = 0; i < circles.length; ++i) {\n            if (distance(circles[i], smallest) > Math.abs(smallest.radius - circles[i].radius)) {\n                disjoint = true;\n                break;\n            }\n        }\n\n        if (disjoint) {\n            arcArea = polygonArea = 0;\n\n        } else {\n            arcArea = smallest.radius * smallest.radius * Math.PI;\n            arcs.push({circle : smallest,\n                       p1: { x: smallest.x,        y : smallest.y + smallest.radius},\n                       p2: { x: smallest.x - SMALL, y : smallest.y + smallest.radius},\n                       width : smallest.radius * 2 });\n        }\n    }\n\n    polygonArea /= 2;\n    if (stats) {\n        stats.area = arcArea + polygonArea;\n        stats.arcArea = arcArea;\n        stats.polygonArea = polygonArea;\n        stats.arcs = arcs;\n        stats.innerPoints = innerPoints;\n        stats.intersectionPoints = intersectionPoints;\n    }\n\n    return arcArea + polygonArea;\n}\n\n/** returns whether a point is contained by all of a list of circles */\nexport function containedInCircles(point, circles) {\n    for (var i = 0; i < circles.length; ++i) {\n        if (distance(point, circles[i]) > circles[i].radius + SMALL) {\n            return false;\n        }\n    }\n    return true;\n}\n\n/** Gets all intersection points between a bunch of circles */\nfunction getIntersectionPoints(circles) {\n    var ret = [];\n    for (var i = 0; i < circles.length; ++i) {\n        for (var j = i + 1; j < circles.length; ++j) {\n            var intersect = circleCircleIntersection(circles[i],\n                                                          circles[j]);\n            for (var k = 0; k < intersect.length; ++k) {\n                var p = intersect[k];\n                p.parentIndex = [i,j];\n                ret.push(p);\n            }\n        }\n    }\n    return ret;\n}\n\n/** Circular segment area calculation. See http://mathworld.wolfram.com/CircularSegment.html */\nexport function circleArea(r, width) {\n    return r * r * Math.acos(1 - width/r) - (r - width) * Math.sqrt(width * (2 * r - width));\n}\n\n/** euclidean distance between two points */\nexport function distance(p1, p2) {\n    return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) +\n                     (p1.y - p2.y) * (p1.y - p2.y));\n}\n\n\n/** Returns the overlap area of two circles of radius r1 and r2 - that\nhave their centers separated by distance d. Simpler faster\ncircle intersection for only two circles */\nexport function circleOverlap(r1, r2, d) {\n    // no overlap\n    if (d >= r1 + r2) {\n        return 0;\n    }\n\n    // completely overlapped\n    if (d <= Math.abs(r1 - r2)) {\n        return Math.PI * Math.min(r1, r2) * Math.min(r1, r2);\n    }\n\n    var w1 = r1 - (d * d - r2 * r2 + r1 * r1) / (2 * d),\n        w2 = r2 - (d * d - r1 * r1 + r2 * r2) / (2 * d);\n    return circleArea(r1, w1) + circleArea(r2, w2);\n}\n\n/** Given two circles (containing a x/y/radius attributes),\nreturns the intersecting points if possible.\nnote: doesn't handle cases where there are infinitely many\nintersection points (circles are equivalent):, or only one intersection point*/\nexport function circleCircleIntersection(p1, p2) {\n    var d = distance(p1, p2),\n        r1 = p1.radius,\n        r2 = p2.radius;\n\n    // if to far away, or self contained - can't be done\n    if ((d >= (r1 + r2)) || (d <= Math.abs(r1 - r2))) {\n        return [];\n    }\n\n    var a = (r1 * r1 - r2 * r2 + d * d) / (2 * d),\n        h = Math.sqrt(r1 * r1 - a * a),\n        x0 = p1.x + a * (p2.x - p1.x) / d,\n        y0 = p1.y + a * (p2.y - p1.y) / d,\n        rx = -(p2.y - p1.y) * (h / d),\n        ry = -(p2.x - p1.x) * (h / d);\n\n    return [{x: x0 + rx, y : y0 - ry },\n            {x: x0 - rx, y : y0 + ry }];\n}\n\n/** Returns the center of a bunch of points */\nexport function getCenter(points) {\n    var center = {x: 0, y: 0};\n    for (var i =0; i < points.length; ++i ) {\n        center.x += points[i].x;\n        center.y += points[i].y;\n    }\n    center.x /= points.length;\n    center.y /= points.length;\n    return center;\n}\n","//算法来源 https://www.benfrederickson.com/venn-diagrams-with-d3.js/\n\nimport {nelderMead, bisect, conjugateGradient, zeros, zerosM, norm2, scale} from 'fmin';\nimport {intersectionArea, circleOverlap, circleCircleIntersection, distance} from './circleintersection';\n\n/** given a list of set objects, and their corresponding overlaps.\nupdates the (x, y, radius) attribute on each set such that their positions\nroughly correspond to the desired overlaps */\nexport function venn(areas, parameters) {\n    parameters = parameters || {};\n    parameters.maxIterations = parameters.maxIterations || 500;\n    var initialLayout = parameters.initialLayout || bestInitialLayout;\n    var loss = parameters.lossFunction || lossFunction;\n\n    // add in missing pairwise areas as having 0 size\n    areas = addMissingAreas(areas);\n\n    // initial layout is done greedily\n    var circles = initialLayout(areas, parameters);\n\n    // transform x/y coordinates to a vector to optimize\n    var initial = [], setids = [], setid;\n    for (setid in circles) {\n        if (circles.hasOwnProperty(setid)) {\n            initial.push(circles[setid].x);\n            initial.push(circles[setid].y);\n            setids.push(setid);\n        }\n    }\n\n    // optimize initial layout from our loss function\n    var totalFunctionCalls = 0;\n    var solution = nelderMead(\n        function(values) {\n            totalFunctionCalls += 1;\n            var current = {};\n            for (var i = 0; i < setids.length; ++i) {\n                var setid = setids[i];\n                current[setid] = {x: values[2 * i],\n                                  y: values[2 * i + 1],\n                                  radius : circles[setid].radius,\n                                 // size : circles[setid].size\n                                 };\n            }\n            return loss(current, areas);\n        },\n        initial,\n        parameters);\n\n    // transform solution vector back to x/y points\n    var positions = solution.x;\n    for (var i = 0; i < setids.length; ++i) {\n        setid = setids[i];\n        circles[setid].x = positions[2 * i];\n        circles[setid].y = positions[2 * i + 1];\n    }\n\n    return circles;\n}\n\n\nvar SMALL = 1e-10;\n\n/** Returns the distance necessary for two circles of radius r1 + r2 to\nhave the overlap area 'overlap' */\nexport function distanceFromIntersectArea(r1, r2, overlap) {\n    // handle complete overlapped circles\n    if (Math.min(r1, r2) * Math.min(r1,r2) * Math.PI <= overlap + SMALL) {\n        return Math.abs(r1 - r2);\n    }\n\n    return bisect(function(distance) {\n        return circleOverlap(r1, r2, distance) - overlap;\n    }, 0, r1 + r2);\n}\n\n/** Missing pair-wise intersection area data can cause problems:\n treating as an unknown means that sets will be laid out overlapping,\n which isn't what people expect. To reflect that we want disjoint sets\n here, set the overlap to 0 for all missing pairwise set intersections */\nfunction addMissingAreas(areas) {\n    areas = areas.slice();\n\n    // two circle intersections that aren't defined\n    var ids = [], pairs = {}, i, j, a, b;\n    for (i = 0; i < areas.length; ++i) {\n        var area = areas[i];\n        if (area.sets.length == 1) {\n            ids.push(area.sets[0]);\n        } else if (area.sets.length == 2) {\n            a = area.sets[0];\n            b = area.sets[1];\n            pairs[[a, b]] = true;\n            pairs[[b, a]] = true;\n        }\n    }\n    ids.sort(function(a, b) { return a > b; });\n\n    for (i = 0; i < ids.length; ++i) {\n        a = ids[i];\n        for (j = i + 1; j < ids.length; ++j) {\n            b = ids[j];\n            if (!([a, b] in pairs)) {\n                areas.push({'sets': [a, b],\n                            'size': 0});\n            }\n        }\n    }\n    return areas;\n}\n\n/// Returns two matrices, one of the euclidean distances between the sets\n/// and the other indicating if there are subset or disjoint set relationships\nexport function getDistanceMatrices(areas, sets, setids) {\n    // initialize an empty distance matrix between all the points\n    var distances = zerosM(sets.length, sets.length),\n        constraints = zerosM(sets.length, sets.length);\n\n    // compute required distances between all the sets such that\n    // the areas match\n    areas.filter(function(x) { return x.sets.length == 2; })\n        .map(function(current) {\n        var left = setids[current.sets[0]],\n            right = setids[current.sets[1]],\n            r1 = Math.sqrt(sets[left].size / Math.PI),\n            r2 = Math.sqrt(sets[right].size / Math.PI),\n            distance = distanceFromIntersectArea(r1, r2, current.size);\n\n        distances[left][right] = distances[right][left] = distance;\n\n        // also update constraints to indicate if its a subset or disjoint\n        // relationship\n        var c = 0;\n        if (current.size + 1e-10 >= Math.min(sets[left].size,\n                                             sets[right].size)) {\n            c = 1;\n        } else if (current.size <= 1e-10) {\n            c = -1;\n        }\n        constraints[left][right] = constraints[right][left] = c;\n    });\n\n    return {distances: distances, constraints: constraints};\n}\n\n/// computes the gradient and loss simulatenously for our constrained MDS optimizer\nfunction constrainedMDSGradient(x, fxprime, distances, constraints) {\n    var loss = 0, i;\n    for (i = 0; i < fxprime.length; ++i) {\n        fxprime[i] = 0;\n    }\n\n    for (i = 0; i < distances.length; ++i) {\n        var xi = x[2 * i], yi = x[2 * i + 1];\n        for (var j = i + 1; j < distances.length; ++j) {\n            var xj = x[2 * j], yj = x[2 * j + 1],\n                dij = distances[i][j],\n                constraint = constraints[i][j];\n\n            var squaredDistance = (xj - xi) * (xj - xi) + (yj - yi) * (yj - yi),\n                distance = Math.sqrt(squaredDistance),\n                delta = squaredDistance - dij * dij;\n\n            if (((constraint > 0) && (distance <= dij)) ||\n                ((constraint < 0) && (distance >= dij))) {\n                continue;\n            }\n\n            loss += 2 * delta * delta;\n\n            fxprime[2*i]     += 4 * delta * (xi - xj);\n            fxprime[2*i + 1] += 4 * delta * (yi - yj);\n\n            fxprime[2*j]     += 4 * delta * (xj - xi);\n            fxprime[2*j + 1] += 4 * delta * (yj - yi);\n        }\n    }\n    return loss;\n}\n\n/// takes the best working variant of either constrained MDS or greedy\nexport function bestInitialLayout(areas, params) {\n    var initial = greedyLayout(areas, params);\n    var loss = params.lossFunction || lossFunction;\n\n    // greedylayout is sufficient for all 2/3 circle cases. try out\n    // constrained MDS for higher order problems, take its output\n    // if it outperforms. (greedy is aesthetically better on 2/3 circles\n    // since it axis aligns)\n    if (areas.length >= 8) {\n        var constrained  = constrainedMDSLayout(areas, params),\n            constrainedLoss = loss(constrained, areas),\n            greedyLoss = loss(initial, areas);\n\n        if (constrainedLoss + 1e-8 < greedyLoss) {\n            initial = constrained;\n        }\n    }\n    return initial;\n}\n\n/// use the constrained MDS variant to generate an initial layout\nexport function constrainedMDSLayout(areas, params) {\n    params = params || {};\n    var restarts = params.restarts || 10;\n\n    // bidirectionally map sets to a rowid  (so we can create a matrix)\n    var sets = [], setids = {}, i;\n    for (i = 0; i < areas.length; ++i ) {\n        var area = areas[i];\n        if (area.sets.length == 1) {\n            setids[area.sets[0]] = sets.length;\n            sets.push(area);\n        }\n    }\n\n    var matrices = getDistanceMatrices(areas, sets, setids),\n        distances = matrices.distances,\n        constraints = matrices.constraints;\n\n    // keep distances bounded, things get messed up otherwise.\n    // TODO: proper preconditioner?\n    var norm = norm2(distances.map(norm2))/(distances.length);\n    distances = distances.map(function (row) {\n        return row.map(function (value) { return value / norm; });});\n\n    var obj = function(x, fxprime) {\n        return constrainedMDSGradient(x, fxprime, distances, constraints);\n    };\n\n    var best, current;\n    for (i = 0; i < restarts; ++i) {\n        var initial = zeros(distances.length*2).map(Math.random);\n\n        current = conjugateGradient(obj, initial, params);\n        if (!best || (current.fx < best.fx)) {\n            best = current;\n        }\n    }\n    var positions = best.x;\n\n    // translate rows back to (x,y,radius) coordinates\n    var circles = {};\n    for (i = 0; i < sets.length; ++i) {\n        var set = sets[i];\n        circles[set.sets[0]] = {\n            x: positions[2*i] * norm,\n            y: positions[2*i + 1] * norm,\n            radius:  Math.sqrt(set.size / Math.PI)\n        };\n    }\n\n    if (params.history) {\n        for (i = 0; i < params.history.length; ++i) {\n            scale(params.history[i].x, norm);\n        }\n    }\n    return circles;\n}\n\n/** Lays out a Venn diagram greedily, going from most overlapped sets to\nleast overlapped, attempting to position each new set such that the\noverlapping areas to already positioned sets are basically right */\nexport function greedyLayout(areas, params) {\n    var loss = params && params.lossFunction ? params.lossFunction : lossFunction;\n    // define a circle for each set\n    var circles = {}, setOverlaps = {}, set;\n    for (var i = 0; i < areas.length; ++i) {\n        var area = areas[i];\n        if (area.sets.length == 1) {\n            set = area.sets[0];\n            circles[set] = {x: 1e10, y: 1e10,\n                            rowid: circles.length,\n                            size: area.size,\n                            radius: Math.sqrt(area.size / Math.PI)};\n            setOverlaps[set] = [];\n        }\n    }\n    areas = areas.filter(function(a) { return a.sets.length == 2; });\n\n    // map each set to a list of all the other sets that overlap it\n    for (i = 0; i < areas.length; ++i) {\n        var current = areas[i];\n        var weight = current.hasOwnProperty('weight') ? current.weight : 1.0;\n        var left = current.sets[0], right = current.sets[1];\n\n        // completely overlapped circles shouldn't be positioned early here\n        if (current.size + SMALL >= Math.min(circles[left].size,\n                                             circles[right].size)) {\n            weight = 0;\n        }\n\n        setOverlaps[left].push ({set:right, size:current.size, weight:weight});\n        setOverlaps[right].push({set:left,  size:current.size, weight:weight});\n    }\n\n    // get list of most overlapped sets\n    var mostOverlapped = [];\n    for (set in setOverlaps) {\n        if (setOverlaps.hasOwnProperty(set)) {\n            var size = 0;\n            for (i = 0; i < setOverlaps[set].length; ++i) {\n                size += setOverlaps[set][i].size * setOverlaps[set][i].weight;\n            }\n\n            mostOverlapped.push({set: set, size:size});\n        }\n    }\n\n    // sort by size desc\n    function sortOrder(a,b) {\n        return b.size - a.size;\n    }\n    mostOverlapped.sort(sortOrder);\n\n    // keep track of what sets have been laid out\n    var positioned = {};\n    function isPositioned(element) {\n        return element.set in positioned;\n    }\n\n    // adds a point to the output\n    function positionSet(point, index) {\n        circles[index].x = point.x;\n        circles[index].y = point.y;\n        positioned[index] = true;\n    }\n\n    // add most overlapped set at (0,0)\n    positionSet({x: 0, y: 0}, mostOverlapped[0].set);\n\n    // get distances between all points. TODO, necessary?\n    // answer: probably not\n    // var distances = venn.getDistanceMatrices(circles, areas).distances;\n    for (i = 1; i < mostOverlapped.length; ++i) {\n        var setIndex = mostOverlapped[i].set,\n            overlap = setOverlaps[setIndex].filter(isPositioned);\n        set = circles[setIndex];\n        overlap.sort(sortOrder);\n\n        if (overlap.length === 0) {\n            // this shouldn't happen anymore with addMissingAreas\n            throw \"ERROR: missing pairwise overlap information\";\n        }\n\n        var points = [];\n        for (var j = 0; j < overlap.length; ++j) {\n            // get appropriate distance from most overlapped already added set\n            var p1 = circles[overlap[j].set],\n                d1 = distanceFromIntersectArea(set.radius, p1.radius,\n                                               overlap[j].size);\n\n            // sample positions at 90 degrees for maximum aesthetics\n            points.push({x : p1.x + d1, y : p1.y});\n            points.push({x : p1.x - d1, y : p1.y});\n            points.push({y : p1.y + d1, x : p1.x});\n            points.push({y : p1.y - d1, x : p1.x});\n\n            // if we have at least 2 overlaps, then figure out where the\n            // set should be positioned analytically and try those too\n            for (var k = j + 1; k < overlap.length; ++k) {\n                var p2 = circles[overlap[k].set],\n                    d2 = distanceFromIntersectArea(set.radius, p2.radius,\n                                                   overlap[k].size);\n\n                var extraPoints = circleCircleIntersection(\n                    { x: p1.x, y: p1.y, radius: d1},\n                    { x: p2.x, y: p2.y, radius: d2});\n\n                for (var l = 0; l < extraPoints.length; ++l) {\n                    points.push(extraPoints[l]);\n                }\n            }\n        }\n\n        // we have some candidate positions for the set, examine loss\n        // at each position to figure out where to put it at\n        var bestLoss = 1e50, bestPoint = points[0];\n        for (j = 0; j < points.length; ++j) {\n            circles[setIndex].x = points[j].x;\n            circles[setIndex].y = points[j].y;\n            var localLoss = loss(circles, areas);\n            if (localLoss < bestLoss) {\n                bestLoss = localLoss;\n                bestPoint = points[j];\n            }\n        }\n\n        positionSet(bestPoint, setIndex);\n    }\n\n    return circles;\n}\n\n/** Given a bunch of sets, and the desired overlaps between these sets - computes\nthe distance from the actual overlaps to the desired overlaps. Note that\nthis method ignores overlaps of more than 2 circles */\nexport function lossFunction(sets, overlaps) {\n    var output = 0;\n\n    function getCircles(indices) {\n        return indices.map(function(i) { return sets[i]; });\n    }\n\n    for (var i = 0; i < overlaps.length; ++i) {\n        var area = overlaps[i], overlap;\n        if (area.sets.length == 1) {\n            continue;\n        } else if (area.sets.length == 2) {\n            var left = sets[area.sets[0]],\n                right = sets[area.sets[1]];\n            overlap = circleOverlap(left.radius, right.radius,\n                                    distance(left, right));\n        } else {\n            overlap = intersectionArea(getCircles(area.sets));\n        }\n\n        var weight = area.hasOwnProperty('weight') ? area.weight : 1.0;\n        output += weight * (overlap - area.size) * (overlap - area.size);\n    }\n\n    return output;\n}\n\n// orientates a bunch of circles to point in orientation\nfunction orientateCircles(circles, orientation, orientationOrder) {\n    if (orientationOrder === null) {\n        circles.sort(function (a, b) { return b.radius - a.radius; });\n    } else {\n        circles.sort(orientationOrder);\n    }\n\n    var i;\n    // shift circles so largest circle is at (0, 0)\n    if (circles.length > 0) {\n        var largestX = circles[0].x,\n            largestY = circles[0].y;\n\n        for (i = 0; i < circles.length; ++i) {\n            circles[i].x -= largestX;\n            circles[i].y -= largestY;\n        }\n    }\n\n    if (circles.length == 2) {\n        // if the second circle is a subset of the first, arrange so that\n        // it is off to one side. hack for https://github.com/benfred/venn.js/issues/120\n        var dist = distance(circles[0], circles[1]);\n        if (dist < Math.abs(circles[1].radius - circles[0].radius)) {\n            circles[1].x = circles[0].x + circles[0].radius - circles[1].radius - 1e-10;\n            circles[1].y = circles[0].y;\n        }\n    }\n\n    // rotate circles so that second largest is at an angle of 'orientation'\n    // from largest\n    if (circles.length > 1) {\n        var rotation = Math.atan2(circles[1].x, circles[1].y) - orientation,\n            c = Math.cos(rotation),\n            s = Math.sin(rotation), x, y;\n\n        for (i = 0; i < circles.length; ++i) {\n            x = circles[i].x;\n            y = circles[i].y;\n            circles[i].x = c * x - s * y;\n            circles[i].y = s * x + c * y;\n        }\n    }\n\n    // mirror solution if third solution is above plane specified by\n    // first two circles\n    if (circles.length > 2) {\n        var angle = Math.atan2(circles[2].x, circles[2].y) - orientation;\n        while (angle < 0) { angle += 2* Math.PI; }\n        while (angle > 2*Math.PI) { angle -= 2* Math.PI; }\n        if (angle > Math.PI) {\n            var slope = circles[1].y / (1e-10 + circles[1].x);\n            for (i = 0; i < circles.length; ++i) {\n                var d = (circles[i].x + slope * circles[i].y) / (1 + slope*slope);\n                circles[i].x = 2 * d - circles[i].x;\n                circles[i].y = 2 * d * slope - circles[i].y;\n            }\n        }\n    }\n}\n\nexport function disjointCluster(circles) {\n    // union-find clustering to get disjoint sets\n    circles.map(function(circle) { circle.parent = circle; });\n\n    // path compression step in union find\n    function find(circle) {\n        if (circle.parent !== circle) {\n            circle.parent = find(circle.parent);\n        }\n        return circle.parent;\n    }\n\n    function union(x, y) {\n        var xRoot = find(x), yRoot = find(y);\n        xRoot.parent = yRoot;\n    }\n\n    // get the union of all overlapping sets\n    for (var i = 0; i < circles.length; ++i) {\n        for (var j = i + 1; j < circles.length; ++j) {\n            var maxDistance = circles[i].radius + circles[j].radius;\n            if (distance(circles[i], circles[j]) + 1e-10 < maxDistance) {\n                union(circles[j], circles[i]);\n            }\n        }\n    }\n\n    // find all the disjoint clusters and group them together\n    var disjointClusters = {}, setid;\n    for (i = 0; i < circles.length; ++i) {\n        setid = find(circles[i]).parent.setid;\n        if (!(setid in disjointClusters)) {\n            disjointClusters[setid] = [];\n        }\n        disjointClusters[setid].push(circles[i]);\n    }\n\n    // cleanup bookkeeping\n    circles.map(function(circle) { delete circle.parent; });\n\n    // return in more usable form\n    var ret = [];\n    for (setid in disjointClusters) {\n        if (disjointClusters.hasOwnProperty(setid)) {\n            ret.push(disjointClusters[setid]);\n        }\n    }\n    return ret;\n}\n\nfunction getBoundingBox(circles) {\n    var minMax = function(d) {\n        var hi = Math.max.apply(null, circles.map(\n                                function(c) { return c[d] + c.radius; } )),\n            lo = Math.min.apply(null, circles.map(\n                                function(c) { return c[d] - c.radius;} ));\n        return {max:hi, min:lo};\n    };\n\n    return {xRange: minMax('x'), yRange: minMax('y')};\n}\n\nexport function normalizeSolution(solution, orientation, orientationOrder) {\n    if (orientation === null){\n        orientation = Math.PI/2;\n    }\n\n    // work with a list instead of a dictionary, and take a copy so we\n    // don't mutate input\n    var circles = [], i, setid;\n    for (setid in solution) {\n        if (solution.hasOwnProperty(setid)) {\n            var previous = solution[setid];\n            circles.push({x: previous.x,\n                          y: previous.y,\n                          radius: previous.radius,\n                          setid: setid});\n        }\n    }\n\n    // get all the disjoint clusters\n    var clusters = disjointCluster(circles);\n\n    // orientate all disjoint sets, get sizes\n    for (i = 0; i < clusters.length; ++i) {\n        orientateCircles(clusters[i], orientation, orientationOrder);\n        var bounds = getBoundingBox(clusters[i]);\n        clusters[i].size = (bounds.xRange.max - bounds.xRange.min) * (bounds.yRange.max - bounds.yRange.min);\n        clusters[i].bounds = bounds;\n    }\n    clusters.sort(function(a, b) { return b.size - a.size; });\n\n    // orientate the largest at 0,0, and get the bounds\n    circles = clusters[0];\n    var returnBounds = circles.bounds;\n\n    var spacing = (returnBounds.xRange.max - returnBounds.xRange.min)/50;\n\n    function addCluster(cluster, right, bottom) {\n        if (!cluster) return;\n\n        var bounds = cluster.bounds, xOffset, yOffset, centreing;\n\n        if (right) {\n            xOffset = returnBounds.xRange.max  - bounds.xRange.min + spacing;\n        } else {\n            xOffset = returnBounds.xRange.max  - bounds.xRange.max;\n            centreing = (bounds.xRange.max - bounds.xRange.min) / 2 -\n                        (returnBounds.xRange.max - returnBounds.xRange.min) / 2;\n            if (centreing < 0) xOffset += centreing;\n        }\n\n        if (bottom) {\n            yOffset = returnBounds.yRange.max  - bounds.yRange.min + spacing;\n        } else {\n            yOffset = returnBounds.yRange.max  - bounds.yRange.max;\n            centreing = (bounds.yRange.max - bounds.yRange.min) / 2 -\n                        (returnBounds.yRange.max - returnBounds.yRange.min) / 2;\n            if (centreing < 0) yOffset += centreing;\n        }\n\n        for (var j = 0; j < cluster.length; ++j) {\n            cluster[j].x += xOffset;\n            cluster[j].y += yOffset;\n            circles.push(cluster[j]);\n        }\n    }\n\n    var index = 1;\n    while (index < clusters.length) {\n        addCluster(clusters[index], true, false);\n        addCluster(clusters[index+1], false, true);\n        addCluster(clusters[index+2], true, true);\n        index += 3;\n\n        // have one cluster (in top left). lay out next three relative\n        // to it in a grid\n        returnBounds = getBoundingBox(circles);\n    }\n\n    // convert back to solution form\n    var ret = {};\n    for (i = 0; i < circles.length; ++i) {\n        ret[circles[i].setid] = circles[i];\n    }\n    return ret;\n}\n\n/** Scales a solution from venn.venn or venn.greedyLayout such that it fits in\na rectangle of width/height - with padding around the borders. also\ncenters the diagram in the available space at the same time */\nexport function scaleSolution(solution, width, height, padding) {\n    var circles = [], setids = [];\n    for (var setid in solution) {\n        if (solution.hasOwnProperty(setid)) {\n            setids.push(setid);\n            circles.push(solution[setid]);\n        }\n    }\n\n    width -= 2*padding;\n    height -= 2*padding;\n\n    var bounds = getBoundingBox(circles),\n        xRange = bounds.xRange,\n        yRange = bounds.yRange;\n\n    if ((xRange.max == xRange.min) ||\n        (yRange.max == yRange.min)) {\n        console.log(\"not scaling solution: zero size detected\");\n        return solution;\n    }\n\n    var xScaling = width  / (xRange.max - xRange.min),\n        yScaling = height / (yRange.max - yRange.min),\n        scaling = Math.min(yScaling, xScaling),\n\n        // while we're at it, center the diagram too\n        xOffset = (width -  (xRange.max - xRange.min) * scaling) / 2,\n        yOffset = (height - (yRange.max - yRange.min) * scaling) / 2;\n\n    var scaled = {};\n    for (var i = 0; i < circles.length; ++i) {\n        var circle = circles[i];\n        scaled[setids[i]] = {\n            radius: scaling * circle.radius,\n            x: padding + xOffset + (circle.x - xRange.min) * scaling,\n            y: padding + yOffset + (circle.y - yRange.min) * scaling,\n        };\n    }\n\n    return scaled;\n}\n","import Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\n\nimport {venn, lossFunction, normalizeSolution, scaleSolution} from \"../../../layout/venn/layout\";\nimport {intersectionArea, distance, getCenter} from \"../../../layout/venn/circleintersection\";\nimport {nelderMead} from \"fmin\";\nimport { _, event } from \"mmvis\"\n\nconst Text = Canvax.Display.Text;\nconst Path = Canvax.Shapes.Path;\nconst Circle = Canvax.Shapes.Circle;\n\nexport default class VennGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"venn\";\n\n        //this.field = null;\n        this.keyField = null;\n        this.valueField = null;\n\n        //坚持一个数据节点的设置都在一个node下面\n        this.node = {\n            //field : null, //node的id标识,而不是label\n\n            strokeStyle: null,\n            lineWidth : 2,\n            lineAlpha : 0,\n            fillStyle : null,\n            fillAlpha : 0.25,\n\n            focus : {\n                enabled : true,\n                lineAlpha : 0.3\n            },\n            select : {\n                enabled : true,\n                lineWidth : 2,\n                strokeStyle : \"#666\"\n            }\n        };\n\n        this.label = {\n            field      : null,\n            fontSize   : 14,\n            //fontFamily : \"Impact\",\n            fontColor  : null, //\"#666\",\n            fontWeight : \"normal\",\n            showInter  : true\n        };\n\n        this.vennData = null;\n\n        _.extend( true, this , opt );\n\n        //_trimGraphs后，计算出来本次data的一些属性\n        this._dataCircleLen = 0;\n        this._dataLabelLen = 0;\n        this._dataPathLen = 0;\n\n        this.init( );\n    }\n\n    init()\n    {\n\n        this.venn_circles = new Canvax.Display.Sprite({ \n            id : \"venn_circles\"\n        });\n        this.sprite.addChild(this.venn_circles);\n\n        this.venn_paths = new Canvax.Display.Sprite({ \n            id : \"venn_paths\"\n        });\n        this.sprite.addChild(this.venn_paths);\n\n        this.venn_labels = new Canvax.Display.Sprite({ \n            id : \"venn_labels\"\n        });\n        this.sprite.addChild(this.venn_labels);\n    }\n\n    draw( opt )\n    {\n        !opt && (opt ={});\n        _.extend( true, this , opt );\n        this.data = this._trimGraphs();\n\n        this._widget();\n        \n        this.sprite.context.x = this.app.padding.left;\n        this.sprite.context.y = this.app.padding.top;\n\n        this.fire(\"complete\");\n    }\n\n    resetData( dataFrame , dataTrigger )\n    {\n        this.dataFrame = dataFrame;\n        this.data = this._trimGraphs(); \n        this._widget();\n    }\n\n    _trimGraphs(){\n        let me = this;\n        let data = me._vennData();\n        let layoutFunction = venn;\n        let loss = lossFunction;\n        let orientation = Math.PI / 2;\n        let orientationOrder = null;\n        let normalize = true;\n\n        var circles = {};\n        var textCentres = {};\n\n        this._dataCircleLen = 0;\n        this._dataLabelLen = 0;\n        this._dataPathLen = 0;\n\n        if (data.length > 0) {\n            var solution = layoutFunction(data, {lossFunction: loss});\n\n            if (normalize) {\n                solution = normalizeSolution(solution, orientation, orientationOrder);\n            };\n\n            //第4个参数本是padding，但是这里的width,height已经是减去过padding的\n            //所以就传0\n            circles = scaleSolution(solution, this.width, this.height, 0); \n            textCentres = computeTextCentres(circles, data);\n        };\n\n        var circleInd = 0;\n        var pathInd = 0;\n        _.each( data , function(d , ind) {\n            if( d.label ){\n                if( d.sets.length > 1 && !me.label.showInter ){\n                    //不显示path的文本\n                    // ...\n                } else {\n                    d.labelPosition = textCentres[ d.nodeId ];\n                    me._dataLabelLen++;\n                }\n            };\n            if (d.sets.length > 1) {\n                var _path = intersectionAreaPath( d.sets.map(function (set) { return circles[set]; }) );\n                d.shape = {\n                    type : 'path',\n                    path : _path,\n                    pathInd : pathInd++\n                };\n                me._dataPathLen++;\n            } else if( d.sets.length == 1 ) {\n                d.shape = _.extend( {\n                    type : 'circle',\n                    circleInd : circleInd++\n                } , circles[ d.nodeId ] );\n                me._dataCircleLen++;\n            }\n        });\n\n        return data;\n    }\n\n    _vennData() {\n        let data = [];\n        let me = this;\n\n        for( var i=0,l=this.dataFrame.length; i< l; i++ ){\n            var rowData = me.dataFrame.getRowDataAt( i );\n\n            let obj = {\n                iNode: i,\n                nodeId : null,\n                rowData : rowData,\n                sets : null,\n\n                //size和value是同一个值，size是 vennLayout 需要用到的属性\n                //value是 chartx中和其他图表的值属性保持统一，比如tips中就会读取value\n                size : null,\n                value: null,\n\n                //这两个在绘制的时候赋值\n                fillStyle: null,\n                strokeStyle: null,\n                \n                label: null,\n                labelPosition : null,\n            };\n\n            for( var p in rowData ){\n\n                var val = rowData[p];\n\n                if (p == me.keyField) {\n                    if (!_.isArray(val)) {\n                        val = val.split(/[,|]/);\n                    };\n                    obj.sets = val;\n                    obj.nodeId = val.join();\n                } else if (p == me.valueField) {\n                    obj.size = val;\n                    obj.value = val; \n                } else if (p == me.label.field) {\n                    obj.label = val;\n                };\n            }\n\n            data.push(obj);\n\n        };\n\n        return data;\n    }\n\n    _getStyle( style, ind, nodeData, defColor ){\n        var color;\n        if( _.isString( style ) ){\n            color = style;\n        }\n        if( _.isFunction( style ) ){\n            color = style( nodeData );\n        }\n        if( !color && ind != undefined ){\n            color = this.app.getTheme( ind );\n        }\n        if( !color && defColor != undefined ){\n            color = defColor;\n        }\n        return color;\n    }\n\n    _widget(){\n        var me = this;\n\n        //那么有多余的元素要去除掉 begin\n        if( me.venn_circles.children.length > me._dataCircleLen ){\n            for( var i=me._dataCircleLen; i<me.venn_circles.children.length; i++ ){\n                me.venn_circles.getChildAt( i-- ).destroy();\n            }\n        };\n        if( me.venn_paths.children.length > me._dataPathLen ){\n            for( var i=me._dataPathLen; i<me.venn_paths.children.length; i++ ){\n                me.venn_paths.getChildAt( i-- ).destroy();\n            }\n        };\n        if( me.venn_labels.children.length > me._dataLabelLen ){\n            for( var i=me._dataLabelLen; i<me.venn_labels.children.length; i++ ){\n                me.venn_labels.getChildAt( i-- ).destroy();\n            }\n        };\n        //那么有多余的元素要去除掉 end\n\n        let circleInd = 0;\n        let pathInd = 0;\n        let labelInd = 0;\n        _.each( this.data , function( nodeData, i ){\n            var shape = nodeData.shape;\n            var _shape;\n            var isNewShape = true;\n            if( shape ){\n                var context;\n                if( shape.type == 'circle' ){\n                    var fillStyle = me._getStyle( me.node.fillStyle , shape.circleInd, nodeData );\n                    var strokeStyle = me._getStyle( me.node.strokeStyle, shape.circleInd, nodeData );\n                    \n                    nodeData.fillStyle = fillStyle;\n                    nodeData.strokeStyle = strokeStyle;\n\n                    context = {\n                        x : shape.x,\n                        y : shape.y,\n                        r : shape.radius,\n                        fillStyle : fillStyle,\n                        fillAlpha : me.node.fillAlpha,\n                        lineWidth : me.node.lineWidth,\n                        strokeStyle : strokeStyle,\n                        lineAlpha : me.node.lineAlpha\n                    };\n                    _shape = me.venn_circles.getChildAt( circleInd++ );\n                    if( !_shape ){\n                        _shape = new Circle({\n                            pointChkPriority : false,\n                            hoverClone: false,\n                            context : context\n                        });\n                        me.venn_circles.addChild(_shape);\n                    } else {\n                        isNewShape = false;\n                        _shape.animate( context )\n                    }\n\n                };\n                if( nodeData.shape.type == 'path' ){\n                    context = {\n                        path : shape.path,\n                        fillStyle : \"#ffffff\",\n                        fillAlpha : 0,//me.node.fillAlpha,\n                        lineWidth : me.node.lineWidth,\n                        strokeStyle : \"#ffffff\",\n                        lineAlpha : 0//me.node.lineAlpha\n                    };\n                    \n                    _shape = me.venn_paths.getChildAt( pathInd++ );\n                    if( !_shape ){\n                        _shape = new Path({\n                            pointChkPriority:false,\n                            context : context\n                        });\n                        me.venn_paths.addChild(_shape);\n                    } else {\n                        isNewShape = false;\n                        _shape.context.path = shape.path;\n                        //_shape.animate( context )\n                    }\n                    \n                };\n\n\n                _shape.nodeData = nodeData;\n                nodeData._node = _shape;\n\n                me.node.focus.enabled && _shape.hover(function(e){\n                    me.focusAt( this.nodeData.iNode );\n                } , function(e){\n                    !this.nodeData.selected && me.unfocusAt( this.nodeData.iNode );\n                });\n\n                //新创建的元素才需要绑定事件，因为复用的原件已经绑定过事件了\n                if( isNewShape ){\n                    _shape.on( event.types.get(), function(e) {\n                        \n                        e.eventInfo = {\n                            trigger : me.node,\n                            title : null,\n                            nodes : [ this.nodeData ]\n                        };\n        \n                        //fire到root上面去的是为了让root去处理tips\n                        me.app.fire( e.type, e );\n                    });\n                };\n\n            }\n\n            if( nodeData.label && me.label.enabled ){\n            \n                var fontColor = me._getStyle( me.label.fontColor, shape.circleInd, nodeData , \"#999\");\n                var fontSize = me.label.fontSize;\n                if( nodeData.sets.length > 1 ){\n                    if( !me.label.showInter ){\n                        fontSize = 0;\n                    } else {\n                        fontSize -= 2;\n                    }\n                };\n                \n                if( fontSize ){\n                    var _textContext = {\n                        x : nodeData.labelPosition.x,\n                        y : nodeData.labelPosition.y,\n                        fontSize: fontSize,\n                        //fontFamily: me.label.fontFamily,\n                        textBaseline: \"middle\",\n                        textAlign: \"center\",\n                        fontWeight: me.label.fontWeight,\n                        fillStyle: fontColor\n                    };\n\n                    var _txt = me.venn_labels.getChildAt( labelInd++ );\n                    if( !_txt ){\n                        _txt = new Text( nodeData.label, {\n                            context : _textContext\n                        } );\n                        me.venn_labels.addChild( _txt );\n                    } else {\n                        _txt.resetText( nodeData.label );\n                        _txt.animate( _textContext );\n                    }\n                    \n                }\n            }\n        });\n    }\n\n\n\n\n    focusAt( ind ){\n        let nodeData = this.data[ ind ];\n        if( !this.node.focus.enabled || nodeData.focused ) return;\n\n        let nctx = nodeData._node.context; \n        //nctx.lineAlpha += 0.5;\n        if( nodeData.sets.length>1 ){\n            //path\n            nctx.lineAlpha = 1;\n        } else {\n            //circle\n            nctx.lineAlpha = this.node.focus.lineAlpha;\n        }\n        \n        nodeData.focused = true;\n    }\n    \n    unfocusAt( ind ){\n        let nodeData = this.data[ ind ];\n        if( !this.node.focus.enabled || !nodeData.focused ) return;\n        let nctx = nodeData._node.context; \n        //nctx.lineAlpha = 0.5;\n        nctx.lineAlpha = this.node.lineAlpha;\n        nodeData.focused = false;\n    }\n    \n    selectAt( ind ){\n        \n        let nodeData = this.data[ ind ];\n        if( !this.node.select.enabled || nodeData.selected ) return;\n\n        let nctx = nodeData._node.context; \n        nctx.lineWidth = this.node.select.lineWidth;\n        nctx.lineAlpha = this.node.select.lineAlpha;\n        nctx.strokeStyle = this.node.select.strokeStyle;\n\n        nodeData.selected = true;\n    }\n\n    unselectAt( ind ){\n        let nodeData = this.data[ ind ];\n        if( !this.node.select.enabled || !nodeData.selected ) return;\n        let nctx = nodeData._node.context; \n        nctx.strokeStyle = this.node.strokeStyle;\n\n        nodeData.selected = false;\n    }\n\n}\n\n\n//venn computeTextCentres 需要的相关代码 begin\nfunction getOverlappingCircles(circles) {\n    var ret = {}, circleids = [];\n    for (var circleid in circles) {\n        circleids.push(circleid);\n        ret[circleid] = [];\n    }\n    for (var i  = 0; i < circleids.length; i++) {\n        var a = circles[circleids[i]];\n        for (var j = i + 1; j < circleids.length; ++j) {\n            var b = circles[circleids[j]],\n                d = distance(a, b);\n\n            if (d + b.radius <= a.radius + 1e-10) {\n                ret[circleids[j]].push(circleids[i]);\n\n            } else if (d + a.radius <= b.radius + 1e-10) {\n                ret[circleids[i]].push(circleids[j]);\n            }\n        }\n    }\n    return ret;\n}\n\nfunction computeTextCentres(circles, areas) {\n    var ret = {}, overlapped = getOverlappingCircles(circles);\n    for (var i = 0; i < areas.length; ++i) {\n        var area = areas[i].sets, areaids = {}, exclude = {};\n        for (var j = 0; j < area.length; ++j) {\n            areaids[area[j]] = true;\n            var overlaps = overlapped[area[j]];\n            for (var k = 0; k < overlaps.length; ++k) {\n                exclude[overlaps[k]] = true;\n            }\n        }\n\n        var interior = [], exterior = [];\n        for (var setid in circles) {\n            if (setid in areaids) {\n                interior.push(circles[setid]);\n            } else if (!(setid in exclude)) {\n                exterior.push(circles[setid]);\n            }\n        }\n        var centre = computeTextCentre(interior, exterior);\n        ret[area] = centre;\n        if (centre.disjoint && (areas[i].size > 0)) {\n            console.log(\"WARNING: area \" + area + \" not represented on screen\");\n        }\n    }\n    return  ret;\n}\nfunction computeTextCentre(interior, exterior) {\n    var points = [], i;\n    for (i = 0; i < interior.length; ++i) {\n        var c = interior[i];\n        points.push({x: c.x, y: c.y});\n        points.push({x: c.x + c.radius/2, y: c.y});\n        points.push({x: c.x - c.radius/2, y: c.y});\n        points.push({x: c.x, y: c.y + c.radius/2});\n        points.push({x: c.x, y: c.y - c.radius/2});\n    }\n    var initial = points[0], margin = circleMargin(points[0], interior, exterior);\n    for (i = 1; i < points.length; ++i) {\n        var m = circleMargin(points[i], interior, exterior);\n        if (m >= margin) {\n            initial = points[i];\n            margin = m;\n        }\n    }\n\n    // maximize the margin numerically\n    var solution = nelderMead(\n                function(p) { return -1 * circleMargin({x: p[0], y: p[1]}, interior, exterior); },\n                [initial.x, initial.y],\n                {maxIterations:500, minErrorDelta:1e-10}).x;\n    var ret = {x: solution[0], y: solution[1]};\n\n    // check solution, fallback as needed (happens if fully overlapped\n    // etc)\n    var valid = true;\n    for (i = 0; i < interior.length; ++i) {\n        if (distance(ret, interior[i]) > interior[i].radius) {\n            valid = false;\n            break;\n        }\n    }\n\n    for (i = 0; i < exterior.length; ++i) {\n        if (distance(ret, exterior[i]) < exterior[i].radius) {\n            valid = false;\n            break;\n        }\n    }\n\n    if (!valid) {\n        if (interior.length == 1) {\n            ret = {x: interior[0].x, y: interior[0].y};\n        } else {\n            var areaStats = {};\n            intersectionArea(interior, areaStats);\n\n            if (areaStats.arcs.length === 0) {\n                ret = {'x': 0, 'y': -1000, disjoint:true};\n\n            } else if (areaStats.arcs.length == 1) {\n                ret = {'x': areaStats.arcs[0].circle.x,\n                       'y': areaStats.arcs[0].circle.y};\n\n            } else if (exterior.length) {\n                // try again without other circles\n                ret = computeTextCentre(interior, []);\n\n            } else {\n                // take average of all the points in the intersection\n                // polygon. this should basically never happen\n                // and has some issues:\n                // https://github.com/benfred/venn.js/issues/48#issuecomment-146069777\n                ret = getCenter(areaStats.arcs.map(function (a) { return a.p1; }));\n            }\n        }\n    }\n\n    return ret;\n}\n\nfunction circleMargin(current, interior, exterior) {\n    var margin = interior[0].radius - distance(interior[0], current), i, m;\n    for (i = 1; i < interior.length; ++i) {\n        m = interior[i].radius - distance(interior[i], current);\n        if (m <= margin) {\n            margin = m;\n        }\n    }\n\n    for (i = 0; i < exterior.length; ++i) {\n        m = distance(exterior[i], current) - exterior[i].radius;\n        if (m <= margin) {\n            margin = m;\n        }\n    }\n    return margin;\n}\n\nfunction circlePath(x, y, r) {\n    var ret = [];\n    ret.push(\"\\nM\", x, y);\n    ret.push(\"\\nm\", -r, 0);\n    ret.push(\"\\na\", r, r, 0, 1, 0, r *2, 0);\n    ret.push(\"\\na\", r, r, 0, 1, 0,-r *2, 0);\n    return ret.join(\" \");\n}\n\n/** returns a svg path of the intersection area of a bunch of circles */\nfunction intersectionAreaPath(circles) {\n    var stats = {};\n    intersectionArea(circles, stats);\n    var arcs = stats.arcs;\n\n    if (arcs.length === 0) {\n        return \"M 0 0\";\n\n    } else if (arcs.length == 1) {\n        var circle = arcs[0].circle;\n        return circlePath(circle.x, circle.y, circle.radius);\n\n    } else {\n        // draw path around arcs\n        var ret = [\"\\nM\", arcs[0].p2.x, arcs[0].p2.y];\n        for (var i = 0; i < arcs.length; ++i) {\n            var arc = arcs[i], r = arc.circle.radius, wide = arc.width > r;\n            ret.push(\"\\nA\", r, r, 0, wide ? 1 : 0, 1,\n                     arc.p1.x, arc.p1.y);\n        }\n        return ret.join(\" \")+\" z\";\n    }\n}\n\n//venn computeTextCentres 需要的相关代码 end","function _rebind(target, source, method) {\n    return function() {\n      var value = method.apply(source, arguments);\n      return value === source ? target : value;\n    };\n}\n\nexport default function(target, source) {\n    var i = 1, n = arguments.length, method;\n    while (++i < n) target[method = arguments[i]] = _rebind(target, source, source[method]);\n    return target;\n}","export default {\n    merge : function(arrays) {\n        var n = arrays.length,\n            m,\n            i = -1,\n            j = 0,\n            merged,\n            array;\n\n        while (++i < n) j += arrays[i].length;\n        merged = new Array(j);\n\n        while (--n >= 0) {\n            array = arrays[n];\n            m = array.length;\n            while (--m >= 0) {\n              merged[--j] = array[m];\n            }\n        }\n\n        return merged;\n    }\n}","import rebind from \"./utils/rebind\";\nimport arrays from \"./utils/arrays\";\n\n/**\n * 修改优化了下面 node._value的代码部分\n * 可以手动给中间节点添加value大于children的value总和的值\n * 这样，就会有流失的效果\n */\n\n\nvar Hierarchy = function () {\n    var sort = layout_hierarchySort,\n        children = layout_hierarchyChildren,\n        value = layout_hierarchyValue;\n\n    function hierarchy(app) {\n        var stack = [app],\n            nodes = [],\n            node;\n\n        app.depth = 0;\n\n        while ((node = stack.pop()) != null) {\n            nodes.push(node);\n            if ((childs = children.call(hierarchy, node, node.depth)) && (n = childs.length)) {\n                var n, childs, child;\n                while (--n >= 0) {\n                    stack.push(child = childs[n]);\n                    child.parent = node;\n                    child.depth = node.depth + 1;\n                };\n\n                //如果这个节点上面有用户主动设置value，那么以用户设置为准\n                var _value = +value.call(hierarchy, node, node.depth);\n                if( _value && !isNaN(_value) ){\n                    node._value = _value;\n                };\n\n                if (value) node.value = 0;\n                node.children = childs;\n            } else {\n                if (value) node.value = +value.call(hierarchy, node, node.depth) || 0;\n                delete node.children;\n            }\n        }\n\n        layout_hierarchyVisitAfter(app, function (node) {\n            var childs, parent;\n            if (sort && (childs = node.children)) childs.sort(sort);\n            if (value && (parent = node.parent)) parent.value += node.value;\n\n            if( node._value && node._value > node.value ){\n                node.value = node._value;\n            };\n            delete node._value;\n\n        });\n\n        return nodes;\n    }\n\n    hierarchy.sort = function (x) {\n        if (!arguments.length) return sort;\n        sort = x;\n        return hierarchy;\n    };\n\n    hierarchy.children = function (x) {\n        if (!arguments.length) return children;\n        children = x;\n        return hierarchy;\n    };\n\n    hierarchy.value = function (x) {\n        if (!arguments.length) return value;\n        value = x;\n        return hierarchy;\n    };\n\n    // Re-evaluates the `value` property for the specified hierarchy.\n    hierarchy.revalue = function (app) {\n        if (value) {\n            layout_hierarchyVisitBefore(app, function (node) {\n                if (node.children) node.value = 0;\n            });\n            layout_hierarchyVisitAfter(app, function (node) {\n                var parent;\n                if (!node.children) node.value = +value.call(hierarchy, node, node.depth) || 0;\n                if (parent = node.parent) parent.value += node.value;\n\n                if( node._value && node._value > node.value ){\n                    node.value = node._value;\n                };\n                delete node._value;\n\n            });\n        }\n        return app;\n    };\n\n    return hierarchy;\n}\n\nHierarchy.layout_hierarchyRebind = function (object, hierarchy) {\n    rebind(object, hierarchy, \"sort\", \"children\", \"value\");\n\n    object.nodes = object;\n    object.links = layout_hierarchyLinks;\n\n    return object;\n}\n\nfunction layout_hierarchyVisitBefore(node, callback) {\n    var nodes = [node];\n    while ((node = nodes.pop()) != null) {\n        callback(node);\n        if ((children = node.children) && (n = children.length)) {\n            var n, children;\n            while (--n >= 0) nodes.push(children[n]);\n        }\n    }\n}\n\nfunction layout_hierarchyVisitAfter(node, callback) {\n    var nodes = [node], nodes2 = [];\n    while ((node = nodes.pop()) != null) {\n        nodes2.push(node);\n        if ((children = node.children) && (n = children.length)) {\n            var i = -1, n, children;\n            while (++i < n) nodes.push(children[i]);\n        }\n    }\n    while ((node = nodes2.pop()) != null) {\n        callback(node);\n    }\n}\n\nfunction layout_hierarchyChildren(d) {\n    return d.children;\n}\n\nfunction layout_hierarchyValue(d) {\n    return d.value;\n}\n\nfunction layout_hierarchySort(a, b) {\n    return b.value - a.value;\n}\n\nfunction layout_hierarchyLinks(nodes) {\n    return arrays.merge(nodes.map(function (parent) {\n        return (parent.children || []).map(function (child) {\n            return { source: parent, target: child };\n        });\n    }));\n}\n\nexport default Hierarchy;","import Hierarchy from \"./hierarchy\"\n\nexport default function () {\n    var hierarchy = Hierarchy(),\n        size = [1, 1];\n\n    function position(node, x, dx, dy) {\n        var children = node.children;\n        node.x = x;\n        node.y = node.depth * dy;\n        node.dx = dx;\n        node.dy = dy;\n        if (children && (n = children.length)) {\n            var i = -1,\n                n,\n                c,\n                d;\n            dx = node.value ? dx / node.value : 0;\n            while (++i < n) {\n                position(c = children[i], x, d = c.value * dx, dy);\n                x += d;\n            }\n        }\n    }\n\n    function depth(node) {\n        var children = node.children,\n            d = 0;\n        if (children && (n = children.length)) {\n            var i = -1,\n                n;\n            while (++i < n) d = Math.max(d, depth(children[i]));\n        }\n        return 1 + d;\n    }\n\n    function partition(d, i) {\n        var nodes = hierarchy.call(this, d, i);\n        position(nodes[0], 0, size[0], size[1] / depth(nodes[0]));\n        return nodes;\n    }\n\n    partition.size = function (x) {\n        if (!arguments.length) return size;\n        size = x;\n        return partition;\n    };\n\n    return Hierarchy.layout_hierarchyRebind(partition, hierarchy);\n}","/*\n* 太阳图\n*/\nimport Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\nimport Partition from \"../../../layout/partition\"\nimport { _,event } from \"mmvis\"\n\nconst Sector = Canvax.Shapes.Sector;\nconst Circle = Canvax.Shapes.Circle;\n\nexport default class sunburstGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"sunburst\";\n\n        this.keyField = \"name\"; //key, parent指向的值\n        this.valueField = 'value';\n\n        this.parentField = 'parent';\n        \n        //坚持一个数据节点的设置都在一个node下面\n        this.node = {\n            strokeStyle: \"#fff\",\n            lineWidth : 1,\n            lineAlpha : 1,\n            fillStyle : null,\n            fillAlpha : 1,\n\n            blurAlpha : 0.4,\n            focus : {\n                enabled : true,\n                lineAlpha : 1\n            }\n\n        };\n\n        _.extend( true, this , opt );\n\n        this.data = []; //布局算法布局后的数据\n        this.dataGroup = []; //data数据按照深度的分组\n\n        this.init( );\n    }\n\n    init()\n    {\n\n    }\n\n\n    draw( opt )\n    {\n        !opt && (opt ={});\n        _.extend( true, this , opt );\n\n        this.data = this._trimGraphs();\n        this.dataGroup = this._getDataGroupOfDepth();\n\n        this._widget();\n        \n        this.sprite.context.x = this.width / 2 + this.origin.x;\n        this.sprite.context.y = this.height / 2  + this.origin.y;\n\n        this.fire(\"complete\");\n    }\n\n    _trimGraphs(){\n\n        var me = this;\n        var radius = parseInt( Math.min( this.width, this.height ) / 2 );\n        var partition = Partition()\n            .sort(null)\n            .size([2 * Math.PI, radius * radius])\n            .value(function(d) {\n                //return 1; \n                return  d[ me.valueField ] //d.size\n            });\n\n\n        //安装深度分组\n        var _treeData = this._tansTreeData();\n        this.data = partition( _treeData , 0 );\n\n        return this.data;\n    }\n\n    _getDataGroupOfDepth(){\n        var map = {};\n        _.each( this.data, function( d ){\n            map[ d.depth ] = [];\n        } );\n        _.each( this.data, function( d ){\n            map[ d.depth ].push( d );\n        } );\n\n        var arr = [];\n        for( var p in map ){\n            arr.push( map[ p ] );\n        }\n        \n        return arr;\n    }\n\n    _tansTreeData()\n    {\n        var dataFrame = this.dataFrame;\n        var treeData = {};\n\n        var keyData = dataFrame.getFieldData( this.keyField );\n        var valueData = dataFrame.getFieldData( this.valueField );\n        var parentData = dataFrame.getFieldData( this.parentField ); //用parentField去找index\n\n        function findChild( obj, parent , ki ){\n            var parentKey = parent ? parent.name : undefined;\n            for( var i=(ki || 0); i<parentData.length; i++ ){\n                var key = parentData[i];\n                if( !key && key !== 0 ){\n                    key = undefined\n                };\n                if( parentKey === key ){\n                    obj.name = keyData[i];\n                    obj.iNode = i;\n                    var value = valueData[i];\n                    if( !!value || value === 0 ){\n                        obj.value = value;\n                    };\n                    //然后寻找到parent.key === obj.name的，作为children\n                    _.each( parentData, function( key, ki ){\n                        if( key === obj.name ){\n                            //这个是obj的children\n                            if( !obj.children ){\n                                obj.children = [];\n                            };\n                            var child = {};\n                            findChild(child, obj, ki)\n                            obj.children.push( child );\n                        }\n                    } );\n\n                    break;\n                };\n            };\n        };\n        findChild( treeData );\n        \n        return treeData;\n    }\n\n    _widget(){\n\n        var me = this;\n\n        _.each( this.dataGroup , function( group , g ){\n            _.each( group , function( layoutData, i ){\n\n                if( !layoutData.depth ){\n                    //最中间的大圆隐藏\n                    return;\n                };\n\n                var r = Math.sqrt( layoutData.y + layoutData.dy );\n                var sectorContext = {\n                    r0         : Math.sqrt( layoutData.y ),\n                    r          : Math.sqrt( layoutData.y )+2,\n                    startAngle : layoutData.x * 180 / Math.PI,\n                    endAngle   : (layoutData.x + layoutData.dx) * 180 / Math.PI, //secc.endAngle,\n                    \n                    fillStyle  : layoutData.color || me.app.getTheme( layoutData.iNode ),\n                    strokeStyle: me.node.strokeStyle,\n                    lineWidth  : me.node.lineWidth,\n                    globalAlpha: 0\n                };\n\n                var sector = new Sector({\n                    id : \"sector_\"+g+\"_\"+i,\n                    context : sectorContext\n                });\n\n                sector.layoutData = layoutData;\n                layoutData.sector = sector;\n                layoutData.group = group; //所在的group\n\n                me.sprite.addChild( sector );\n\n                sector.hover(function(e){\n                    me._focus( layoutData , group );\n                } , function(e){\n                    me._unfocus( layoutData , group );\n                });\n                sector.on(event.types.get(), function(e) {\n                    //fire到root上面去的是为了让root去处理tips\n                    e.eventInfo = {\n                        trigger : me.node,\n                        iNode : layoutData.iNode\n                    };\n                    me.app.fire( e.type, e );\n                });\n\n                if( g<=1 ){\n                    sector.context.r = r;\n                    sector.context.globalAlpha = 1;\n                } else {\n                    //从第二组开始，延时动画出现\n                    setTimeout(function(){\n                        if( !sector.context ){\n                            //这个时候可能图表已经被销毁了\n                            return;\n                        }\n                        sector.context.globalAlpha = 1;\n                        sector.animate({\n                            r : r\n                        } , {\n                            duration : 350\n                        })\n                    } , 350*(g-1))\n                }\n\n            } );\n\n        } )\n    }\n\n    getNodesAt( iNode ){\n        var nodes = [];\n        if( iNode !== undefined ){\n            var node = _.find( this.data, function( item ){\n                return item.iNode == iNode\n            } );\n            node && nodes.push( node );\n        };\n        return  nodes\n    }\n\n    _focus(layoutData, group){\n        var me = this;\n        _.each( group , function( d ){\n            if( d !== layoutData ){\n                d.sector.context.globalAlpha = me.node.blurAlpha;\n                me._focusChildren( d, function( child ){\n                    child.sector.context.globalAlpha = me.node.blurAlpha;\n                } );\n            }\n        } );\n        me._focusParent( layoutData );\n    }\n\n    _unfocus(layoutData, group){\n        var me = this;\n        _.each( this.data , function( d ){\n            d.sector && (d.sector.context.globalAlpha = 1);\n        } );\n    }\n\n    _focusChildren(d, callback){\n        var me = this;\n        if(d.children && d.children.length){\n            _.each( d.children , function(child){\n                callback( child );\n                me._focusChildren( child, callback );\n            } );\n        }\n    }\n\n    _focusParent(layoutData){\n        var me = this;\n        if( layoutData.parent && layoutData.parent.sector && layoutData.parent.group ){\n            _.each( layoutData.parent.group , function( d ){\n                if( d === layoutData.parent ){\n                    d.sector.context.globalAlpha = 1;\n                    me._focusParent( layoutData.parent );\n                } else {\n                    d.sector.context.globalAlpha = me.node.blurAlpha;\n                }\n            } );\n        }\n    }\n}","import { _ } from \"mmvis\"\nexport default function() {\n    var sankey = {},\n        nodeWidth = 24,\n        nodePadding = 8,\n        size = [1, 1],\n        nodes = [],\n        links = [];\n\n    sankey.nodeWidth = function (_) {\n        if (!arguments.length) return nodeWidth;\n        nodeWidth = +_;\n        return sankey;\n    };\n\n    sankey.nodePadding = function (_) {\n        if (!arguments.length) return nodePadding;\n        nodePadding = +_;\n        return sankey;\n    };\n\n    sankey.nodes = function (_) {\n        if (!arguments.length) return nodes;\n        nodes = _;\n        return sankey;\n    };\n\n    sankey.links = function (_) {\n        if (!arguments.length) return links;\n        links = _;\n        return sankey;\n    };\n\n    sankey.size = function (_) {\n        if (!arguments.length) return size;\n        size = _;\n        return sankey;\n    };\n\n    sankey.layout = function (iterations) {\n        computeNodeLinks();\n        computeNodeValues();\n        computeNodeBreadths();\n        computeNodeDepths(iterations);\n        computeLinkDepths();\n        return sankey;\n    };\n\n    sankey.relayout = function () {\n        computeLinkDepths();\n        return sankey;\n    };\n\n    //d3\n    function d3_interpolateNumber(a, b) {\n        a = +a, b = +b;\n        return function (t) {\n            return a * (1 - t) + b * t;\n        };\n    }\n\n    sankey.link = function () {\n        var curvature = .5;\n\n        function link(d) {\n            var x0 = d.source.x + d.source.dx,\n                x1 = d.target.x,\n                xi = d3_interpolateNumber(x0, x1),\n                x2 = xi(curvature),\n                x3 = xi(1 - curvature),\n                //y0 = d.source.y + d.sy + d.dy / 2,\n                //y1 = d.target.y + d.ty + d.dy / 2;\n                y0 = d.source.y + d.sy,\n                y1 = d.target.y + d.ty;\n                \n            var dy = d.dy;\n            if( dy < 1 ){\n                dy = 1;\n            };\n\n            var path = \"M\" + x0 + \",\" + y0 + \"C\" + x2 + \",\" + y0 + \" \" + x3 + \",\" + y1 + \" \" + x1 + \",\" + y1;\n\n            path += \"v\"+dy;\n            path += \"C\"+x3+\",\"+(y1+dy)+\" \"+x2+\",\"+(y0+dy)+\" \"+x0+\",\"+(y0+dy);\n            path += \"v\"+(-dy)+\"z\";\n            return path;\n          \n        }\n\n        link.curvature = function (_) {\n            if (!arguments.length) return curvature;\n            curvature = +_;\n            return link;\n        };\n\n        return link;\n    };\n\n    // Populate the sourceLinks and targetLinks for each node.\n    // Also, if the source and target are not objects, assume they are indices.\n    function computeNodeLinks() {\n        nodes.forEach(function (node) {\n            node.sourceLinks = [];\n            node.targetLinks = [];\n        });\n        links.forEach(function (link) {\n            var source = link.source,\n                target = link.target;\n            if (typeof source === \"number\") source = link.source = nodes[link.source];\n            if (typeof target === \"number\") target = link.target = nodes[link.target];\n            source.sourceLinks.push(link);\n            target.targetLinks.push(link);\n        });\n    }\n\n    function d3_sum(e, t) {\n        var n = 0,\n            r = e.length,\n            i, s = -1;\n        if (arguments.length === 1)\n            while (++s < r)\n                isNaN(i = +e[s]) || (n += i);\n        else\n            while (++s < r)\n                isNaN(i = +t.call(e, e[s], s)) || (n += i);\n        return n\n    }\n\n    function d3_min(e, t) {\n        var n = -1,\n            r = e.length,\n            i, s;\n        if (arguments.length === 1) {\n            while (++n < r && ((i = e[n]) == null || i != i))\n                i = undefined;\n            while (++n < r)\n                (s = e[n]) != null && i > s && (i = s)\n        } else {\n            while (++n < r && ((i = t.call(e, e[n], n)) == null || i != i))\n                i = undefined;\n            while (++n < r)\n                (s = t.call(e, e[n], n)) != null && i > s && (i = s)\n        }\n        return i\n    }\n\n    function d3_max(e, t) {\n        var n = -1,\n            r = e.length,\n            i, s;\n        if (arguments.length === 1) {\n            while (++n < r && ((i = e[n]) == null || i != i))\n                i = undefined;\n            while (++n < r)\n                (s = e[n]) != null && s > i && (i = s)\n        } else {\n            while (++n < r && ((i = t.call(e, e[n], n)) == null || i != i))\n                i = undefined;\n            while (++n < r)\n                (s = t.call(e, e[n], n)) != null && s > i && (i = s)\n        }\n        return i\n    }\n\n    // Compute the value (size) of each node by summing the associated links.\n    function computeNodeValues() {\n        nodes.forEach(function (node) {\n            node.value = Math.max(\n                d3_sum(node.sourceLinks, value),\n                d3_sum(node.targetLinks, value)\n            );\n        });\n    }\n\n    // Iteratively assign the breadth (x-position) for each node.\n    // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n    // nodes with no incoming links are assigned breadth zero, while\n    // nodes with no outgoing links are assigned the maximum breadth.\n    function computeNodeBreadths() {\n        var remainingNodes = nodes,\n            nextNodes,\n            x = 0;\n\n        while (remainingNodes.length) {\n            nextNodes = [];\n            remainingNodes.forEach(function (node) {\n                node.x = x;\n                node.dx = nodeWidth;\n                node.sourceLinks.forEach(function (link) {\n                    if (nextNodes.indexOf(link.target) < 0) {\n                        nextNodes.push(link.target);\n                    }\n                });\n            });\n            remainingNodes = nextNodes;\n            ++x;\n        }\n\n        //\n        moveSinksRight(x);\n        scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n    }\n\n    function moveSourcesRight() {\n        nodes.forEach(function (node) {\n            if (!node.targetLinks.length) {\n                node.x = d3_min(node.sourceLinks, function (d) {\n                    return d.target.x;\n                }) - 1;\n            }\n        });\n    }\n\n    function moveSinksRight(x) {\n        nodes.forEach(function (node) {\n            if (!node.sourceLinks.length) {\n                node.x = x - 1;\n            }\n        });\n    }\n\n    function scaleNodeBreadths(kx) {\n        nodes.forEach(function (node) {\n            node.x *= kx;\n        });\n    }\n\n\n\n    //d3 core\n    function d3_class(ctor, properties) {\n        if (Object.defineProperty) {\n            for (var key in properties) {\n                //TODO:d3这里不支持ie，要想办法解决\n                Object.defineProperty(ctor.prototype, key, {\n                    value: properties[key],\n                    enumerable: false\n                });\n            }\n        } else {\n            //ie解决方案\n            _.extend(ctor.prototype, properties);\n        }\n    }\n\n    var d3_nest = function () {\n        var nest = {},\n            keys = [],\n            sortKeys = [],\n            sortValues,\n            rollup;\n\n        function map(mapType, array, depth) {\n            if (depth >= keys.length) return rollup ? rollup.call(nest, array) : (sortValues ? array.sort(sortValues) : array);\n\n            var i = -1,\n                n = array.length,\n                key = keys[depth++],\n                keyValue,\n                object,\n                setter,\n                valuesByKey = new d3_Map,\n                values;\n\n            while (++i < n) {\n                if (values = valuesByKey.get(keyValue = key(object = array[i]))) {\n                    values.push(object);\n                } else {\n                    valuesByKey.set(keyValue, [object]);\n                }\n            }\n\n            if (mapType) {\n                object = mapType();\n                setter = function (keyValue, values) {\n                    object.set(keyValue, map(mapType, values, depth));\n                };\n            } else {\n                object = {};\n                setter = function (keyValue, values) {\n                    object[keyValue] = map(mapType, values, depth);\n                };\n            }\n\n            valuesByKey.forEach(setter);\n            return object;\n        }\n\n        function entries(map, depth) {\n            if (depth >= keys.length) return map;\n\n            var array = [],\n                sortKey = sortKeys[depth++];\n\n            map.forEach(function (key, keyMap) {\n                array.push({\n                    key: key,\n                    values: entries(keyMap, depth)\n                });\n            });\n\n            return sortKey ? array.sort(function (a, b) {\n                return sortKey(a.key, b.key);\n            }) : array;\n        }\n\n        nest.map = function (array, mapType) {\n            return map(mapType, array, 0);\n        };\n\n        nest.entries = function (array) {\n            return entries(map(d3_map, array, 0), 0);\n        };\n\n        nest.key = function (d) {\n            keys.push(d);\n            return nest;\n        };\n\n        // Specifies the order for the most-recently specified key.\n        // Note: only applies to entries. Map keys are unordered!\n        nest.sortKeys = function (order) {\n            sortKeys[keys.length - 1] = order;\n            return nest;\n        };\n\n        // Specifies the order for leaf values.\n        // Applies to both maps and entries array.\n        nest.sortValues = function (order) {\n            sortValues = order;\n            return nest;\n        };\n\n        nest.rollup = function (f) {\n            rollup = f;\n            return nest;\n        };\n\n        return nest;\n    };\n\n    var d3_map = function (object, f) {\n        var map = new d3_Map;\n        if (object instanceof d3_Map) {\n            object.forEach(function (key, value) {\n                map.set(key, value);\n            });\n        } else if (Array.isArray(object)) {\n            var i = -1,\n                n = object.length,\n                o;\n            if (arguments.length === 1)\n                while (++i < n) map.set(i, object[i]);\n            else\n                while (++i < n) map.set(f.call(object, o = object[i], i), o);\n        } else {\n            for (var key in object) map.set(key, object[key]);\n        }\n        return map;\n    };\n\n    function d3_Map() {\n        this._ = Object.create(null);\n    }\n\n    var d3_map_proto = \"__proto__\", d3_map_zero = \"\\0\";\n\n    d3_class(d3_Map, {\n        has: d3_map_has,\n        get: function (key) {\n            return this._[d3_map_escape(key)];\n        },\n        set: function (key, value) {\n            return this._[d3_map_escape(key)] = value;\n        },\n        remove: d3_map_remove,\n        keys: d3_map_keys,\n        values: function () {\n            var values = [];\n            for (var key in this._) values.push(this._[key]);\n            return values;\n        },\n        entries: function () {\n            var entries = [];\n            for (var key in this._) entries.push({\n                key: d3_map_unescape(key),\n                value: this._[key]\n            });\n            return entries;\n        },\n        size: d3_map_size,\n        empty: d3_map_empty,\n        forEach: function (f) {\n            for (var key in this._) f.call(this, d3_map_unescape(key), this._[key]);\n        }\n    });\n\n    function d3_map_escape(key) {\n        return (key += \"\") === d3_map_proto || key[0] === d3_map_zero ? d3_map_zero + key : key;\n    }\n\n    function d3_map_unescape(key) {\n        return (key += \"\")[0] === d3_map_zero ? key.slice(1) : key;\n    }\n\n    function d3_map_has(key) {\n        return d3_map_escape(key) in this._;\n    }\n\n    function d3_map_remove(key) {\n        return (key = d3_map_escape(key)) in this._ && delete this._[key];\n    }\n\n    function d3_map_keys() {\n        var keys = [];\n        for (var key in this._) keys.push(d3_map_unescape(key));\n        return keys;\n    }\n\n    function d3_map_size() {\n        var size = 0;\n        for (var key in this._)++size;\n        return size;\n    }\n\n    function d3_map_empty() {\n        for (var key in this._) return false;\n        return true;\n    }\n\n    function d3_ascending(a, b) {\n        return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n    }\n\n    function computeNodeDepths(iterations) {\n        var nodesByBreadth = d3_nest()\n            .key(function (d) {\n                return d.x;\n            })\n            .sortKeys(d3_ascending)\n            .entries(nodes)\n            .map(function (d) {\n                return d.values;\n            });\n\n        //\n        initializeNodeDepth();\n        resolveCollisions();\n        for (var alpha = 1; iterations > 0; --iterations) {\n            relaxRightToLeft(alpha *= .99);\n            resolveCollisions();\n            relaxLeftToRight(alpha);\n            resolveCollisions();\n        }\n\n        function initializeNodeDepth() {\n            var ky = d3_min(nodesByBreadth, function (nodes) {\n                return (size[1] - (nodes.length - 1) * nodePadding) / d3_sum(nodes, value);\n            });\n\n            nodesByBreadth.forEach(function (nodes) {\n                nodes.forEach(function (node, i) {\n                    node.y = i;\n                    node.dy = node.value * ky;\n                });\n            });\n\n            links.forEach(function (link) {\n                link.dy = link.value * ky;\n            });\n        }\n\n        function relaxLeftToRight(alpha) {\n            nodesByBreadth.forEach(function (nodes, breadth) {\n                nodes.forEach(function (node) {\n                    if (node.targetLinks.length) {\n                        var y = d3_sum(node.targetLinks, weightedSource) / d3_sum(node.targetLinks, value);\n                        node.y += (y - center(node)) * alpha;\n                    }\n                });\n            });\n\n            function weightedSource(link) {\n                return center(link.source) * link.value;\n            }\n        }\n\n        function relaxRightToLeft(alpha) {\n            nodesByBreadth.slice().reverse().forEach(function (nodes) {\n                nodes.forEach(function (node) {\n                    if (node.sourceLinks.length) {\n                        var y = d3_sum(node.sourceLinks, weightedTarget) / d3_sum(node.sourceLinks, value);\n                        node.y += (y - center(node)) * alpha;\n                    }\n                });\n            });\n\n            function weightedTarget(link) {\n                return center(link.target) * link.value;\n            }\n        }\n\n        function resolveCollisions() {\n            nodesByBreadth.forEach(function (nodes) {\n                var node,\n                    dy,\n                    y0 = 0,\n                    n = nodes.length,\n                    i;\n\n                // Push any overlapping nodes down.\n                nodes.sort(ascendingDepth);\n                for (i = 0; i < n; ++i) {\n                    node = nodes[i];\n                    dy = y0 - node.y;\n                    if (dy > 0) node.y += dy;\n                    y0 = node.y + node.dy + nodePadding;\n                }\n\n                // If the bottommost node goes outside the bounds, push it back up.\n                dy = y0 - nodePadding - size[1];\n                if (dy > 0) {\n                    y0 = node.y -= dy;\n\n                    // Push any overlapping nodes back up.\n                    for (i = n - 2; i >= 0; --i) {\n                        node = nodes[i];\n                        dy = node.y + node.dy + nodePadding - y0;\n                        if (dy > 0) node.y -= dy;\n                        y0 = node.y;\n                    }\n                }\n            });\n        }\n\n        function ascendingDepth(a, b) {\n            return a.y - b.y;\n        }\n    }\n\n    function computeLinkDepths() {\n        nodes.forEach(function (node) {\n            node.sourceLinks.sort(ascendingTargetDepth);\n            node.targetLinks.sort(ascendingSourceDepth);\n        });\n        nodes.forEach(function (node) {\n            var sy = 0,\n                ty = 0;\n            node.sourceLinks.forEach(function (link) {\n                link.sy = sy;\n                sy += link.dy;\n            });\n            node.targetLinks.forEach(function (link) {\n                link.ty = ty;\n                ty += link.dy;\n            });\n        });\n\n        function ascendingSourceDepth(a, b) {\n            return a.source.y - b.source.y;\n        }\n\n        function ascendingTargetDepth(a, b) {\n            return a.target.y - b.target.y;\n        }\n    }\n\n    function center(node) {\n        return node.y + node.dy / 2;\n    }\n\n    function value(link) {\n        return link.value;\n    }\n\n    return sankey;\n};\n","/*\n* 太阳图\n*/\nimport Canvax from \"canvax\"\nimport GraphsBase from \"../index\"\nimport sankeyLayout from \"../../../layout/sankey/index\"\nimport { _,event } from \"mmvis\"\n\nconst Path = Canvax.Shapes.Path;\nconst Rect = Canvax.Shapes.Rect;\n\nexport default class sankeyGraphs extends GraphsBase\n{\n    constructor(opt, app)\n    {\n        super( opt, app );\n\n        this.type = \"sankey\";\n\n        this.keyField = null; //key, parent指向的值\n        this.valueField = 'value';\n\n        //默认的情况下sankey图是在keyField中使用 a|b 来表示流向\n        //但是也可以keyField表示b 用parentField来表示a，和其他表示流向的图的数据格式保持一致\n        this.parentField = null; \n\n        \n        //坚持一个数据节点的设置都在一个node下面\n        this.node = {\n            width : 18,\n            padding : 10,\n\n            fillStyle : null,\n            fillAlpha : 1,\n\n            blurAlpha : 0.4,\n            focus : {\n                enabled : true,\n                lineAlpha : 1\n            }\n\n        };\n\n        this.line = {\n            strokeStyle: \"blue\",\n            lineWidth : 1,\n            lineAlpha : 1,\n\n            blurAlpha : 0.4,\n            focus : {\n                enabled : true,\n                lineAlpha : 1\n            }\n        };\n\n        this.label = {\n            fontColor : \"#666\",\n            fontSize  : 12,\n            align : \"left\",  //left center right\n            verticalAlign : \"middle\", //top middle bottom\n            position : \"right\", //left,center right\n            offsetX : 0,\n            offsetY : 0\n        };\n\n        _.extend( true, this , opt );\n\n        this.init( );\n    }\n\n    init()\n    {\n        this._links = new Canvax.Display.Sprite();\n        this._nodes = new Canvax.Display.Sprite();\n        this._labels = new Canvax.Display.Sprite();\n\n        this.sprite.addChild(this._links);\n        this.sprite.addChild(this._nodes);\n        this.sprite.addChild(this._labels);\n    }\n\n\n    draw( opt )\n    {\n        \n        !opt && (opt ={});\n        _.extend( true, this , opt );\n\n        this.data = this._trimGraphs();\n\n        this._widget();\n        \n        this.sprite.context.x = this.origin.x;\n        this.sprite.context.y = this.origin.y;\n\n        this.fire(\"complete\");\n    }\n\n    _trimGraphs(){\n\n        var me = this;\n        var nodes = [];\n        var links = [];\n        var keyDatas = me.dataFrame.getFieldData( me.keyField );\n        var valueDatas = me.dataFrame.getFieldData( me.valueField );\n        var parentFields = me.dataFrame.getFieldData( me.parentField );\n\n        var nodeMap = {}; //name:ind\n        _.each( keyDatas, function( key, i ){\n            var nodeNames = [];\n            if( me.parentField ){\n                nodeNames.push( parentFields[i] );\n            };\n            nodeNames = nodeNames.concat( key.split(/[,|]/) );\n\n            _.each( nodeNames, function( name ){\n                if( nodeMap[ name ] === undefined ){\n                    nodeMap[ name ] = nodes.length;\n                    nodes.push( {\n                        name : name\n                    } );\n                }\n            } );\n        } );\n\n\n        _.each( keyDatas, function( key , i ){\n            //var nodeNames = key.split(/[,|]/);\n            var nodeNames = [];\n            if( me.parentField ){\n                nodeNames.push( parentFields[i] );\n            };\n            nodeNames = nodeNames.concat( key.split(/[,|]/) );\n\n            if( nodeNames.length == 2 ){\n                links.push({\n                    source : nodeMap[ nodeNames[0] ],\n                    target : nodeMap[ nodeNames[1] ],\n                    value  : valueDatas[i] \n                })\n            }\n        } );\n\n        return sankeyLayout()\n            .nodeWidth( this.node.width )\n            .nodePadding( this.node.padding )\n            .size([this.width, this.height])\n            .nodes(nodes)\n            .links(links)\n            .layout(16);\n \n    }\n\n    _widget(){\n        this._drawNodes();\n        this._drawLinks();\n        this._drawLabels();\n    }\n\n    _getColor( style, node, ind ){\n        var me = this;\n        var color = style;\n        if( _.isArray( color ) ){\n            color = color[ ind ];\n        }\n        if( _.isFunction( color ) ){\n            color = color( node );\n        }\n        if( !color ){\n            color = me.app.getTheme( ind );\n        }\n        return color;\n    }\n\n    _drawNodes() {\n        \n        var nodes = this.data.nodes();\n        var me = this;\n        _.each(nodes, function(node, i) {\n           \n            var nodeColor = me._getColor( me.node.fillStyle, node, i );\n            var nodeEl = new Rect({\n                xyToInt:false,\n                context: {\n                    x: node.x,\n                    y: node.y,\n                    width: me.data.nodeWidth(),\n                    height: Math.max(node.dy , 1),\n                    fillStyle: nodeColor\n                }\n            });\n            nodeEl.data = node;\n\n            me._nodes.addChild(nodeEl);\n        });\n    }\n\n    _drawLinks(){\n        var links = this.data.links();\n        var me = this;\n        _.each(links, function(link, i) {\n            var linkColor = me._getColor( me.line.strokeStyle, link , i);\n            var d = me.data.link()(link);\n        \n            var _path = new Path({\n                xyToInt : false,\n                context: {\n                    path: d,\n                    fillStyle: linkColor,\n                    //lineWidth: Math.max(1, link.dy),\n                    globalAlpha: 0.3,\n                    cursor:\"pointer\"\n                }\n            });\n\n\n            _path.link = link;\n\n            _path.on( event.types.get(), function(e) {\n                \n                if( e.type == 'mouseover' ){\n                    this.context.globalAlpha += 0.2;\n                };\n                if( e.type == 'mouseout' ){\n                    this.context.globalAlpha -= 0.2;\n                };\n\n                var linkData = this.link;\n\n                e.eventInfo = {\n                    trigger : me.node,\n                    title : linkData.source.name+\" --<span style='position:relative;top:-0.5px;font-size:16px;left:-3px;'>></span> \"+linkData.target.name,\n                    nodes : [ linkData ]\n                };\n    \n                //fire到root上面去的是为了让root去处理tips\n                me.app.fire( e.type, e );\n             });\n\n\n            me._links.addChild( _path );\n        });\n    }\n\n    _drawLabels(){\n        \n        var nodes = this.data.nodes();\n        var me = this;\n        _.each(nodes, function(node){\n            var align = me.label.align;\n\n            var x = node.x+me.data.nodeWidth()+4;\n            /*\n            if( x > me.width/2 ){\n                x  = node.x - 4;\n                align = 'right';\n            } else {\n                x += 4;\n            };\n            */\n            var y = node.y+Math.max(node.dy / 2 , 1);\n\n            var label = new Canvax.Display.Text(node.name , {\n                context: {\n                    x : x,\n                    y : y,\n                    fillStyle    : me.label.fontColor,\n                    fontSize     : me.label.fontSize,\n                    textAlign    : align,\n                    textBaseline : me.label.verticalAlign\n                }\n            });\n            me._labels.addChild( label );\n\n            if( label.getTextWidth()+x > me.width ){\n                label.context.x = node.x - 4;\n                label.context.textAlign = 'right';\n            };\n\n        });\n    }\n\n\n\n}","import Canvax from \"canvax\"\nimport {numAddSymbol} from \"../../../utils/tools\"\nimport GraphsBase from \"../index\"\nimport { _, event, getDefaultProps } from \"mmvis\"\n\n\nexport default class Progress extends GraphsBase\n{\n\n    static defaultProps = {\n        node : {\n            detail : '进度条设置',\n            propertys : {\n                width : {\n                    detail: '进度条的宽度',\n                    default : 20\n                },\n                radius : {\n                    detail : '进度条两端的圆角半径',\n                    default : 10, //默认为width的一半\n                }\n            }\n        },\n        radius : {\n            detail : '半径',\n            default : null\n        },\n        allAngle : {\n            detail : '总角度',\n            documentation: '默认为null，则和坐标系同步',\n            default : null\n        },\n        startAngle : {\n            detail : '其实角度',\n            documentation: '默认为null，则和坐标系同步',\n            default : null\n        }\n    }\n\n    constructor(opt, app)\n    {\n        super(opt, app);\n\n        this.type = \"progress\";\n\n        _.extend( true, this, getDefaultProps( new.target.defaultProps ), opt );\n        \n        this.init();\n    }\n\n    init(){\n\n    }\n\n    draw(opt)\n    {\n        !opt && (opt ={});\n        \n        var me = this;\n        _.extend(true, this, opt);\n\n        this.data = this._trimGraphs();\n        //this._widget();\n\n        this.sprite.context.x = this.origin.x;\n        this.sprite.context.y = this.origin.y;\n\n        this.fire(\"complete\");\n    }\n\n    _trimGraphs()\n    {\n        var me = this;\n\n        var _coord = this.app.getComponent({name:'coord'});\n\n        //用来计算下面的hLen\n        this.enabledField = _coord.filterEnabledFields( this.field );\n        \n        var data = {}\n        _.each( this.enabledField, function( field ){\n            var dataOrg = me.dataFrame.getFieldData(field);\n            var fieldMap = _coord.getFieldMapOf( field );\n            var arr = [];\n\n            var startAngle = me.startAngle || _coord.startAngle;\n            var allAngle = me.allAngle || _coord.allAngle;\n            var endAngle = startAngle + allAngle;\n\n            var startRadian = Math.PI * startAngle / 180; //起始弧度\n            var endRadian = Math.PI * endAngle / 180; //终点弧度\n\n            debugger\n            var outRadius= me.radius || _coord.radius;\n            var innerRadius = outRadius - me.node.width;\n\n\n            var startOutPoint = _coord.getPointInRadianOfR( startRadian, outRadius );\n            var endOutPoint = _coord.getPointInRadianOfR( endRadian, outRadius );\n            var startInnerPoint = _coord.getPointInRadianOfR( startRadian, innerRadius );\n            var endInnerPoint = _coord.getPointInRadianOfR( endRadian, innerRadius );\n\n            var large_arc_flag = 0;\n            if( allAngle > 180 ){\n                large_arc_flag = 1;\n            };\n            \n            var pathStr = \"M\"+startOutPoint.x+\" \"+startOutPoint.y;\n            pathStr += \"A\"+outRadius+\" \"+outRadius+\" 0 \"+large_arc_flag+\" 1 \" + endOutPoint.x + \" \"+ endOutPoint.y;\n            pathStr += \"L\"+endInnerPoint.x+\" \"+endInnerPoint.y;\n            pathStr += \"A\"+innerRadius+\" \"+innerRadius+\" 0 \"+large_arc_flag+\" 0 \" + startInnerPoint.x + \" \"+ startInnerPoint.y;\n            pathStr += \"Z\"\n\n            var pathElement = new Canvax.Shapes.Path({\n                context : {\n                    path : pathStr,\n                    fillStyle : \"blue\"\n                }\n            });\n\n            me.sprite.addChild( pathElement );\n\n            var center = new Canvax.Shapes.Circle({\n                context : {\n                    r : 5,\n                    fillStyle : \"red\"\n                }\n            });\n            me.sprite.addChild( center );\n\n            /*\n            _.each( _coord.aAxis.angleList , function( _a , i ){\n                //弧度\n                var _r = Math.PI * _a / 180;\n                var point = _coord.getPointInRadianOfR( _r, _coord.getROfNum(dataOrg[i]) );\n                arr.push( {\n                    field   : field,\n                    iNode   : i,\n                    rowData : me.dataFrame.getRowDataAt(i),\n                    focused : false,\n                    value   : dataOrg[i],\n                    point   : point,\n                    color   : fieldMap.color\n                } );\n            } );\n            */\n            data[ field ] = arr;\n        } );\n        return data;\n    }\n\n\n}","/**\n * 每个组件中对外影响的时候，要抛出一个trigger对象\n * 上面的comp属性就是触发这个trigger的组件本身\n * params属性则是这次trigger的一些动作参数\n * 目前legend和datazoom组件都有用到\n */\nexport default class Trigger\n{\n    constructor(comp, params = {})\n    {\n        this.comp = comp;\n        this.params = params;\n    }\n}\n","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\nimport Trigger from \"../trigger\"\n\nconst Circle = Canvax.Shapes.Circle\n\nexport default class Legend extends Component\n{\n    constructor(opt, app)\n    {\n        super(opt, app);\n\n        this.name = \"legend\";\n\n        /* data的数据结构为\n        [\n            //descartes中用到的时候还会带入yAxis\n            {name: \"uv\", color: \"#ff8533\", field: '' ...如果手动传入数据只需要前面这三个 enabled: true, ind: 0, } //外部只需要传field和fillStyle就行了 activate是内部状态\n        ]\n        */\n        this.data = this._getLegendData(opt);\n\n        //一般来讲，比如柱状图折线图等，是按照传入的field来分组来设置图例的，那么legend.field都是null\n        //但是还有一种情况就是，是按照同一个field中的数据去重后来分组的，比如散点图中sex属性的男女两个分组作为图例，\n        //以及pie饼图中的每个数据的name字段都是作为一个图例\n        //那么就想要给legend主动设置一个field字段，然后legend自己从dataFrame中拿到这个field的数据来去重，然后分组做为图例\n        //这是一个很屌的设计\n        this.field = null;\n\n        this.icon = {\n            height : 26,\n            width  : \"auto\",\n            shapeType : \"circle\",\n            radius : 5,\n            lineWidth : 1,\n            fillStyle : \"#999\",\n            onChecked : function(){},\n            onUnChecked : function(){}\n        };\n\n        this.label = {\n            textAlign : \"left\",\n            textBaseline : \"middle\",\n            fillStyle : \"#333\", //obj.color\n            cursor: \"pointer\",\n            format : function( name, info ){\n                return name\n            }\n        };\n\n        //this.onChecked=function(){};\n        //this.onUnChecked=function(){};\n\n        this._labelColor = \"#999\";\n        this.position = \"top\" ; //图例所在的方向top,right,bottom,left\n        this.direction = \"h\"; //横向 top,bottom --> h left,right -- >v\n\n        _.extend(true, this , {\n            icon : {\n                onChecked : function( obj ){\n                    app.show( obj.name , new Trigger( this, obj ) );\n                },\n                onUnChecked : function( obj ){\n                    app.hide( obj.name , new Trigger( this, obj ));\n                }\n            }\n        }, opt );\n\n        if( !opt.direction && opt.position ){\n            if( this.position == \"left\" || this.position == \"right\" ){\n                this.direction = 'v';\n            } else {\n                this.direction = 'h';\n            };\n        };\n\n        this.sprite = new Canvax.Display.Sprite({\n            id : \"LegendSprite\",\n            context: {\n                x: this.pos.x,\n                y: this.pos.y\n            }\n        });\n        this.app.stage.addChild( this.sprite );\n\n        this.widget();\n\n        //图例是需要自己绘制完成后，才能拿到高宽来设置自己的位置\n        this.layout();\n\n    }\n\n    _getLegendData( opt ){\n        var legendData = opt.data;\n        if( legendData ){\n            _.each( legendData, function( item, i ){\n                item.enabled = true;\n                item.ind = i;\n            } );\n            delete opt.data;\n        } else {\n            legendData = this.app.getLegendData();\n        };\n        return legendData || [];\n    }\n\n    layout(){\n        let app = this.app;\n\n        if( this.direction == \"h\" ){\n            app.padding[ this.position ] += (this.height+this.margin.top+this.margin.bottom);\n        } else {\n            app.padding[ this.position ] += (this.width+this.margin.left+this.margin.right);\n        };\n\n        //default right\n        var pos = {\n            x : app.width - app.padding.right + this.margin.left,\n            y : app.padding.top + this.margin.top\n        };\n        if( this.position == \"left\" ){\n            pos.x = app.padding.left - this.width + this.margin.left;\n        };\n        if( this.position == \"top\" ){\n            pos.x = app.padding.left + this.margin.left;\n            pos.y = app.padding.top - this.height - this.margin.top;\n        };\n        if( this.position == \"bottom\" ){\n            pos.x = app.padding.left + this.margin.left;\n            pos.y = app.height - app.padding.bottom + this.margin.bottom;\n        };\n\n        this.pos = pos;\n    }\n\n\n    draw()\n    {\n        var _coord = this.app.getComponent({name:'coord'});\n        if( _coord && _coord.type == 'rect' ){\n            if( this.position == \"top\" || this.position == \"bottom\" ){\n                this.pos.x = _coord.getSizeAndOrigin().origin.x + this.icon.radius;\n            };\n        };\n        this.setPosition();\n    }\n\n    widget()\n    {\n        var me = this;\n\n        var viewWidth = this.app.width - this.app.padding.left - this.app.padding.right;\n        var viewHeight = this.app.height - this.app.padding.top - this.app.padding.bottom;\n\n        var maxItemWidth = 0;\n        var width=0,height=0;\n        var x=0,y=0;\n        var rows = 1;\n\n        var isOver = false; //如果legend过多\n\n        _.each( this.data , function( obj , i ){\n\n            if( isOver ) return;\n            \n            var _icon = new Circle({\n                id : \"legend_field_icon_\"+i,\n                context : {\n                    x     : 0,\n                    y     : me.icon.height/3 ,\n                    fillStyle : !obj.enabled ? \"#ccc\" : (obj.color || me._labelColor),\n                    r : me.icon.radius,\n                    cursor: \"pointer\"\n                }\n            });\n            \n            _icon.hover(function( e ){\n                e.eventInfo = me._getInfoHandler(e,obj);\n            } , function(e){\n                delete e.eventInfo;\n            });\n            _icon.on(\"mousemove\" , function( e ){\n                e.eventInfo = me._getInfoHandler(e,obj);\n            });\n            //阻止事件冒泡\n            \n            _icon.on(\"click\" , function(){});\n            \n            var txt = new Canvax.Display.Text( me.label.format(obj.name, obj) , {\n                id: \"legend_field_txt_\"+i,\n                context : {\n                    x : me.icon.radius + 3 ,\n                    y : me.icon.height / 3,\n                    textAlign : me.label.textAlign, //\"left\",\n                    textBaseline : me.label.textBaseline, //\"middle\",\n                    fillStyle : me.label.fillStyle, //\"#333\", //obj.color\n                    cursor: me.label.cursor //\"pointer\"\n                }\n            } );\n        \n            txt.hover(function( e ){\n                e.eventInfo = me._getInfoHandler(e,obj);\n            } , function(e){\n                delete e.eventInfo;\n            });\n            txt.on(\"mousemove\" , function( e ){\n                e.eventInfo = me._getInfoHandler(e,obj);\n            });\n            txt.on(\"click\" , function(){});\n\n            var txtW = txt.getTextWidth();\n            var itemW = txtW + me.icon.radius*2 + 20;\n\n            maxItemWidth = Math.max( maxItemWidth, itemW );\n\n            var spItemC = {\n                height : me.icon.height\n            };\n\n            if( me.direction == \"v\" ){\n                if( y + me.icon.height > viewHeight ){\n                    if( x > viewWidth*0.3 ){\n                        isOver = true;\n                        return;\n                    };\n                    x += maxItemWidth;\n                    y = 0;\n                };\n                spItemC.x = x;\n                spItemC.y = y;\n                y += me.icon.height;\n                height = Math.max( height , y );\n            } else {\n                //横向排布\n\n                if( x + itemW > viewWidth ){\n                    if( me.icon.height * (rows+1) > viewHeight*0.3 ){\n                        isOver = true;\n                        return;\n                    };\n                    \n                    width = Math.max( width, x );\n                    x = 0;\n                    rows++;    \n                };\n                \n                spItemC.x = x;\n                spItemC.y = me.icon.height * (rows-1);\n                x += itemW;\n            };\n            var sprite = new Canvax.Display.Sprite({\n                id : \"legend_field_\"+i,\n                context : spItemC\n            });\n            sprite.addChild( _icon );\n            sprite.addChild( txt );\n\n            sprite.context.width = itemW;\n            me.sprite.addChild(sprite);\n\n            sprite.on(\"click\" , function( e ){\n\n                //只有一个field的时候，不支持取消\n                if( _.filter( me.data , function(obj){return obj.enabled} ).length == 1 ){\n                    if( obj.enabled ){\n                        return;\n                    }\n                };\n                \n                obj.enabled = !obj.enabled;\n\n                _icon.context.fillStyle = !obj.enabled ? \"#ccc\" : (obj.color || me._labelColor);\n\n                if( obj.enabled ){\n                    me.icon.onChecked( obj );\n                } else {\n                    me.icon.onUnChecked( obj );\n                }\n            });\n\n        } );\n\n        if( this.direction == \"h\" ){\n            me.width = me.sprite.context.width  = width;\n            me.height = me.sprite.context.height = me.icon.height * rows;\n        } else {\n            me.width = me.sprite.context.width  = x + maxItemWidth;\n            me.height = me.sprite.context.height = height;\n        }\n        //me.width = me.sprite.context.width  = width;\n        //me.height = me.sprite.context.height = height;\n    }\n\n    _getInfoHandler(e , data)\n    {\n        return {\n            type : \"legend\",\n            //title : data.name,\n            nodes : [\n                {\n                    name : data.name,\n                    fillStyle : data.color\n                }\n            ]\n        };\n    }\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\nimport Trigger from \"../trigger\"\n\n\nconst Line = Canvax.Shapes.Line;\nconst Rect = Canvax.Shapes.Rect;\n\nconst defaultProps = {\n    height : 26,\n    width  : 100,\n    //以上部分是所有组件后续都要实现的\n\n    range : {//0-1\n        start: 0,\n        end : null,\n        max : null, //可以外围控制智能在哪个区间拖动\n        min : 1  //最少至少选中了一个数据\n    },\n    color : \"#008ae6\",\n    left : { \n        eventEnabled : true,\n        fillStyle : null,\n    },\n    right : { \n        eventEnabled : true,\n        fillStyle: null\n    },\n    btnOut : 6, //left,right按钮突出的大小\n    btnHeight : 20,//left,right按钮的高，不在left，right下面，统一在这个属性里， 以为要强制保持一致\n    btnWidth : 8,//left,right按钮的宽，不在left，right下面，统一在这个属性里， 以为要强制保持一致\n\n    center : {\n        eventEnabled: true,\n        fillStyle : '#000000',\n        alpha : 0.015\n    },\n    bg : {\n        enabled : true,\n        fillStyle : \"\",\n        strokeStyle: \"#e6e6e6\",\n        lineWidth : 1\n    },\n    underline : {\n        enabled : true,\n        strokeStyle : null,\n        lineWidth : 2\n    },\n    position : \"bottom\", //图例所在的方向top,right,bottom,left\n    direction : \"h\" //横向 top,bottom --> h left,right -- >v\n};\n\nexport default class dataZoom extends Component\n{\n\n    constructor(opt, app)\n\t{\n        super(opt, app);\n\n        this.name = \"dataZoom\";\n\n        this._cloneChart = null;\n        \n        this.count = 1; //把w 均为为多少个区间， 同样多节点的line 和  bar， 这个count相差一\n        this.dataLen = 1;\n        this.axisLayoutType = null; //和line bar等得xAxis.layoutType 一一对应\n\n        this.dragIng = function(){};\n        this.dragEnd = function(){};\n        \n        this.disPart = {};\n\n        this._btnLeft = null;\n        this._btnRight = null;\n        this._underline = null;\n\n        this.sprite = new Canvax.Display.Sprite({\n            id : \"dataZoom\",\n            context: {\n                x: this.pos.x,\n                y: this.pos.y\n            }\n        });\n        this.sprite.noSkip=true;\n        this.dataZoomBg = new Canvax.Display.Sprite({\n            id : \"dataZoomBg\"\n        });\n        this.dataZoomBtns = new Canvax.Display.Sprite({\n            id : \"dataZoomBtns\"\n        });\n        this.sprite.addChild( this.dataZoomBg );\n        this.sprite.addChild( this.dataZoomBtns );\n\n        app.stage.addChild( this.sprite );\n\n        //预设默认的opt.dataZoom\n        _.extend( true, this, defaultProps , opt);\n        this.layout();\n\n\t}\n\n    \n    //datazoom begin\n    layout()\n    {\n        let me = this;\n        let app = this.app;\n        if( this.position == \"bottom\" ){\n            //目前dataZoom是固定在bottom位置的\n            //_getDataZoomOpt中会矫正x\n            this.pos.y = app.height - (this.height + app.padding.bottom + this.margin.bottom);\n            app.padding.bottom += (this.height + this.margin.top + this.margin.bottom);\n        };\n        if( this.position == \"top\" ){\n            this.pos.y = app.padding.top + this.margin.top;\n            app.padding.top += (this.height + this.margin.top + this.margin.bottom);\n        };\n\n        \n    }\n \n\n    _getCloneChart() \n    {\n        var app = this.app;\n        var chartConstructor = app.constructor;//(barConstructor || Bar);\n        var cloneEl = app.el.cloneNode();\n        cloneEl.innerHTML = \"\";\n        cloneEl.id = app.el.id + \"_currclone\";\n        cloneEl.style.position = \"absolute\";\n        cloneEl.style.width = app.el.offsetWidth + \"px\";\n        cloneEl.style.height = app.el.offsetHeight + \"px\";\n        cloneEl.style.top = \"10000px\";\n        document.body.appendChild(cloneEl);\n\n        //var opt = _.extend(true, {}, me._opt);\n        //_.extend(true, opt, me.getCloneChart() );\n\n        //clone的chart只需要coord 和 graphs 配置就可以了\n        //因为画出来后也只需要拿graphs得sprite去贴图\n        var graphsOpt = [];\n        _.each( app.getComponents({name:'graphs'}), function( _g ){\n            var _field = _g.enabledField || _g.field;\n            \n            if( _.flatten([_field]).length ) {\n\n                var _opt = _.extend( true, {} , _g._opt );\n                \n                _opt.field = _field;\n                if( _g.type == \"bar\" ){\n                    _.extend(true, _opt , {\n                        node: {\n                            fillStyle: \"#ececec\",\n                            radius: 0\n                        },\n                        animation: false,\n                        eventEnabled: false,\n                        label: {\n                            enabled: false\n                        }\n                    } )\n                }\n                if( _g.type == \"line\" ){\n                    _.extend( true,  _opt , {\n                        line: {\n                            //lineWidth: 1,\n                            strokeStyle: \"#ececec\"\n                        },\n                        node: {\n                            enabled: false\n                        },\n                        area: {\n                            alpha: 1,\n                            fillStyle: \"#ececec\"\n                        },\n                        animation: false,\n                        eventEnabled: false,\n                        label: {\n                            enabled: false\n                        }\n                    } )\n                }\n                if( _g.type == \"scat\" ){\n                    _.extend( true, _opt, {\n                        node : {\n                            fillStyle : \"#ececec\"\n                        }\n                    } )\n                }\n\n                graphsOpt.push( _opt );\n            }\n        } );\n        var opt = {\n            coord : app._opt.coord,\n            graphs : graphsOpt\n        };\n\n        if( opt.coord.horizontal ){\n            delete opt.coord.horizontal;\n        };\n\n        var thumbChart = new chartConstructor(cloneEl, app._data, opt, app.componentModules);\n        thumbChart.draw();\n\n        return {\n            thumbChart: thumbChart,\n            cloneEl: cloneEl\n        }\n    }\n\n    _setDataZoomOpt()\n    {\n\n        var app = this.app;\n        var coordInfo = app.getComponent({name:'coord'}).getSizeAndOrigin();\n        var me = this;\n        \n        //初始化 datazoom 模块\n        _.extend(true, this, {\n            width: parseInt( coordInfo.width ),\n            pos: {\n                x: coordInfo.origin.x\n            },\n            dragIng: function(range) {\n                var trigger = new Trigger( me, {\n                    left :  app.dataFrame.range.start - range.start,\n                    right : range.end - app.dataFrame.range.end\n                } );\n                _.extend( app.dataFrame.range , range );\n                //不想要重新构造dataFrame，所以第一个参数为null\n                app.resetData( null , trigger );\n                app.fire(\"dataZoomDragIng\");\n            },\n            dragEnd: function(range) {\n                app.updateChecked && app.updateChecked();\n                app.fire(\"dataZoomDragEnd\");\n            }\n        });\n    }\n    //datazoom end\n\n    draw()\n    {\n\n        this._setDataZoomOpt();\n        \n        this._cloneChart = this._getCloneChart();\n        this.axisLayoutType = this._cloneChart.thumbChart.getComponent({name:'coord'})._xAxis.layoutType; //和line bar等得xAxis.layoutType 一一对应\n\n        this._computeAttrs();\n\n        //这个组件可以在init的时候就绘制好\n        this.widget();\n        this._setLines();\n        this.setZoomBg();\n        this.setPosition();\n    }\n\n    destroy()\n    {\n        this.sprite.destroy();\n    }\n\n    reset( opt , dataFrame )\n    {\n        \n        !opt && ( opt = {} );\n\n        var _preCount = this.count;\n        var _preStart = this.range.start;\n        var _preEnd = this.range.end;\n\n        opt && _.extend(true, this, opt);\n        this._cloneChart = this._getCloneChart()//cloneChart;\n        this._computeAttrs(opt);\n\n        if( \n            _preCount != this.count ||\n            ( opt.range && ( opt.range.start != _preStart || opt.range.end != _preEnd ) )\n        ){\n            this.widget();\n            this._setLines();\n        };\n\n        this.setZoomBg( );\n    }\n\n    //计算属性\n    _computeAttrs()\n    {\n        var _cloneChart = this._cloneChart.thumbChart\n\n        this.dataLen = _cloneChart.dataFrame.length;\n        this.count = this.axisLayoutType == \"rule\" ? this.dataLen-1 : this.dataLen;\n        \n        if(!this.range.max || this.range.max > this.count){\n            this.range.max = this.count;\n        };\n        if( !this.range.end || this.range.end > this.dataLen - 1 ){\n            this.range.end = this.dataLen - 1;\n        };\n\n        //如果用户没有配置layoutType但是配置了position\n        if( !this.direction && this.position ){\n            if( this.position == \"left\" || this.position == \"right\" ){\n                this.direction = 'v';\n            } else {\n                this.direction = 'h';\n            };\n        };\n        \n        this.disPart = this._getDisPart();\n        this.btnHeight = this.height - this.btnOut;\n    }\n\n    _getRangeEnd( end )\n    {\n        if( end === undefined ){\n            end = this.range.end;\n        }\n        if( this.axisLayoutType == \"peak\" ){\n            end += 1;\n        };\n        return end\n    }\n\n    widget()\n    {\n        var me = this;\n        var setLines = function(){\n            me._setLines.apply(me, arguments);\n        };\n\n        if( me.bg.enabled ){\n            var bgRectCtx = {\n                x: 0,\n                y: 0,\n                width: me.width,\n                height: me.btnHeight,\n                lineWidth: me.bg.lineWidth,\n                strokeStyle: me.bg.strokeStyle,\n                fillStyle: me.bg.fillStyle\n            };\n            if( me._bgRect ){\n                me._bgRect.animate( bgRectCtx , {\n                    onUpdate : setLines\n                });\n            } else {\n                me._bgRect = new Rect({\n                    context: bgRectCtx\n                });\n                me.dataZoomBg.addChild( me._bgRect );\n            }\n            \n        }\n\n        if(me.underline.enabled){\n            var underlineCtx = {\n                start : {\n                    x : me.range.start / me.count * me.width + me.btnWidth / 2,\n                    y : me.btnHeight\n                },\n                end : {\n                    x : me._getRangeEnd() / me.count * me.width  - me.btnWidth / 2,\n                    y : me.btnHeight\n                },\n                lineWidth : me.underline.lineWidth,\n                strokeStyle : me.underline.strokeStyle || me.color\n            };\n\n            if( me._underline ){\n                me._underline.animate( underlineCtx , {\n                    onUpdate : setLines\n                });\n            } else {\n                me._underline = me._addLine( underlineCtx )\n                me.dataZoomBg.addChild(me._underline); \n            };\n            \n        }\n\n\n        var btnLeftCtx = {\n            x: me.range.start / me.count * me.width,\n            y: - me.btnOut / 2 + 1,\n            width: me.btnWidth,\n            height: me.btnHeight + me.btnOut,\n            fillStyle : me.left.fillStyle || me.color,\n            cursor: me.left.eventEnabled && \"move\"\n        }\n        if(me._btnLeft){\n            me._btnLeft.animate(btnLeftCtx,{\n                onUpdate : setLines\n            });\n        } else {\n            me._btnLeft = new Rect({\n                id          : 'btnLeft',\n                dragEnabled : me.left.eventEnabled,\n                context: btnLeftCtx\n            });\n            me._btnLeft.on(\"draging\" , function(e){\n                \n                this.context.y = - me.btnOut / 2 + 1\n                if(this.context.x < 0){\n                    this.context.x = 0;\n                };\n                if(this.context.x > (me._btnRight.context.x - me.btnWidth - 2)){\n                    this.context.x = me._btnRight.context.x - me.btnWidth - 2\n                };\n                if(me._btnRight.context.x + me.btnWidth - this.context.x > me.disPart.max){\n                    this.context.x = me._btnRight.context.x + me.btnWidth - me.disPart.max\n                }\n                if(me._btnRight.context.x + me.btnWidth - this.context.x < me.disPart.min){\n                    this.context.x = me._btnRight.context.x + me.btnWidth - me.disPart.min\n                }\n                me.rangeRect.context.width = me._btnRight.context.x - this.context.x - me.btnWidth;\n                me.rangeRect.context.x = this.context.x + me.btnWidth;\n\n                me._setRange();\n\n            });\n            me._btnLeft.on(\"dragend\" , function(e){\n                me.dragEnd( me.range );\n            });\n            this.dataZoomBtns.addChild( this._btnLeft );\n        };\n\n        var btnRightCtx = {\n            x: me._getRangeEnd() / me.count * me.width - me.btnWidth,\n            y: - me.btnOut / 2 + 1,\n            width: me.btnWidth,\n            height: me.btnHeight + me.btnOut ,\n            fillStyle : me.right.fillStyle || me.color,\n            cursor : me.right.eventEnabled && \"move\"\n        };\n\n        if( me._btnRight ){\n            me._btnRight.animate(btnRightCtx, {\n                onUpdate : setLines\n            });\n        } else {\n            me._btnRight = new Rect({\n                id          : 'btnRight',\n                dragEnabled : me.right.eventEnabled,\n                context: btnRightCtx\n            });\n\n            me._btnRight.on(\"draging\" , function(e){\n                \n                this.context.y = - me.btnOut / 2 + 1\n                if( this.context.x > me.width - me.btnWidth ){\n                    this.context.x = me.width - me.btnWidth;\n                };\n                if( this.context.x + me.btnWidth - me._btnLeft.context.x > me.disPart.max){\n                    this.context.x = me.disPart.max - (me.btnWidth - me._btnLeft.context.x)\n                };\n                if( this.context.x + me.btnWidth - me._btnLeft.context.x < me.disPart.min){\n                    this.context.x = me.disPart.min - me.btnWidth + me._btnLeft.context.x;\n                };\n                me.rangeRect.context.width = this.context.x - me._btnLeft.context.x - me.btnWidth;\n                me._setRange();\n            });\n            me._btnRight.on(\"dragend\" , function(e){\n                me.dragEnd( me.range );\n            });\n            this.dataZoomBtns.addChild( this._btnRight );\n        };\n\n\n        var rangeRectCtx = {\n            x : btnLeftCtx.x + me.btnWidth,\n            y : 1,\n            width : btnRightCtx.x - btnLeftCtx.x - me.btnWidth,\n            height : this.btnHeight - 1,\n            fillStyle : me.center.fillStyle,\n            fillAlpha : me.center.alpha,\n            cursor : \"move\"\n        };\n        if( this.rangeRect ){\n            this.rangeRect.animate( rangeRectCtx , {\n                onUpdate : setLines\n            });\n        } else {\n            //中间矩形拖拽区域\n            this.rangeRect = new Rect({\n                id          : 'btnCenter',\n                dragEnabled : true,\n                context : rangeRectCtx\n            });\n            this.rangeRect.on(\"draging\" , function(e){\n                \n                this.context.y = 1;\n                if( this.context.x < me.btnWidth ){\n                    this.context.x = me.btnWidth; \n                };\n                if( this.context.x > me.width - this.context.width - me.btnWidth ){\n                    this.context.x = me.width - this.context.width - me.btnWidth;\n                };\n                me._btnLeft.context.x  = this.context.x - me.btnWidth;\n                me._btnRight.context.x = this.context.x + this.context.width;\n                me._setRange( \"btnCenter\" );\n\n            });\n            this.rangeRect.on(\"dragend\" , function(e){\n                me.dragEnd( me.range );\n            });\n            this.dataZoomBtns.addChild( this.rangeRect );\n        };\n\n        if(!this.linesLeft){\n            this.linesLeft = new Canvax.Display.Sprite({ id : \"linesLeft\" });\n            if(this.left.eventEnabled){\n                this._addLines({\n                    sprite : this.linesLeft\n                })\n            };\n            this.dataZoomBtns.addChild( this.linesLeft );\n        };\n        if(!this.linesRight){\n            this.linesRight = new Canvax.Display.Sprite({ id : \"linesRight\" });\n            if(this.right.eventEnabled){\n                this._addLines({\n                    sprite : this.linesRight\n                })\n            };\n            this.dataZoomBtns.addChild( this.linesRight );\n        };\n\n        if(!this.linesCenter){\n            this.linesCenter = new Canvax.Display.Sprite({ id : \"linesCenter\" });\n            this._addLines({\n                count  : 3,\n                // dis    : 1,\n                sprite : this.linesCenter,\n                strokeStyle : this.color\n            });\n            this.dataZoomBtns.addChild( this.linesCenter );\n        };\n        \n    }\n\n    _getDisPart()\n    {\n        var me = this;\n        var min = Math.max( parseInt(me.range.min / 2 / me.count * me.width), 23 );\n        //柱状图用得这种x轴布局，不需要 /2\n        if( this.axisLayoutType == \"peak\" ){\n            min = Math.max( parseInt(me.range.min / me.count * me.width), 23 );\n        };\n\n        return {\n            min : min,\n            max : parseInt(me.range.max / me.count * me.width)\n        }\n    }\n\n    _setRange( trigger )\n    {\n        var me = this;\n        var _end = me._getRangeEnd();\n        var _preDis = _end - me.range.start;\n\n        var start = (me._btnLeft.context.x / me.width) * me.count;\n        var end =  ((me._btnRight.context.x + me.btnWidth) / me.width) * me.count;\n       \n        //console.log( (me._btnRight.context.x + me.btnWidth)+\"|\"+ me.width + \"|\" + me.count )\n        if( this.axisLayoutType == \"peak\" ){\n            start = Math.round( start );\n            end = Math.round( end );\n        } else {\n            start = parseInt( start );\n            end = parseInt( end );\n        };\n\n        if( trigger == \"btnCenter\" ){\n            //如果是拖动中间部分，那么要保持 end-start的总量一致\n            if( (end - start) != _preDis ){\n                end = start + _preDis;\n            }\n        };\n        \n        if( start != me.range.start || end != _end ){\n            me.range.start = start;\n            if( me.axisLayoutType == \"peak\" ){\n                end -= 1;\n            };\n            me.range.end = end;\n\n            me.dragIng( me.range );\n        };\n\n        me._setLines();\n    }\n\n    _setLines()\n    {\n        \n        var me = this\n        var linesLeft  = this.linesLeft;\n        var linesRight = this.linesRight;\n        var linesCenter = this.linesCenter;\n        \n        var btnLeft    = this._btnLeft;\n        var btnRight   = this._btnRight;\n        var btnCenter  = this.rangeRect;\n        \n        linesLeft.context.x = btnLeft.context.x + (btnLeft.context.width - linesLeft.context.width ) / 2\n        linesLeft.context.y = btnLeft.context.y + (btnLeft.context.height - linesLeft.context.height ) / 2\n\n        linesRight.context.x = btnRight.context.x + (btnRight.context.width - linesRight.context.width ) / 2\n        linesRight.context.y = btnRight.context.y + (btnRight.context.height - linesRight.context.height ) / 2\n\n        linesCenter.context.x = btnCenter.context.x + (btnCenter.context.width - linesCenter.context.width ) / 2\n        linesCenter.context.y = btnCenter.context.y + (btnCenter.context.height - linesCenter.context.height ) / 2\n\n        if( me.underline.enabled ){\n            me._underline.context.start.x = linesLeft.context.x + me.btnWidth / 2;\n            me._underline.context.end.x =linesRight.context.x + me.btnWidth / 2;\n        }\n    }\n\n    _addLines($o)\n    {\n        var me = this\n        var count  = $o.count || 2\n        var sprite = $o.sprite\n        var dis    = $o.dis || 2\n        for(var a = 0, al = count; a < al; a++){\n            sprite.addChild(me._addLine({\n                x : a * dis,\n                strokeStyle : $o.strokeStyle || ''\n            }))\n        }\n        sprite.context.width = a * dis - 1, sprite.context.height = 6\n    }\n\n    _addLine($o)\n    {\n        var o = $o || {}\n        var line = new Line({\n            id     : o.id || '',\n            context: {\n                x: o.x || 0,\n                y: o.y || 0,\n                start : {\n                    x : o.start ? o.start.x : 0,\n                    y : o.start ? o.start.y : 0\n                },\n                end : {\n                    x : o.end ? o.end.x : 0,\n                    y : o.end ? o.end.y : 6\n                },\n                lineWidth: o.lineWidth || 1,\n                strokeStyle: o.strokeStyle || '#ffffff'\n            }\n        });\n        return line\n    }\n\n    setZoomBg()\n    {\n        //这里不是直接获取_graphs.sprite 而是获取 _graphs.core，切记切记\n        \n        if( this.__graphssp ){\n            this.__graphssp.destroy();\n        };\n\n        var graphssp = this._cloneChart.thumbChart.graphsSprite;\n        var _coor = this._cloneChart.thumbChart.getComponent({name:'coord'});\n\n        graphssp.id = graphssp.id + \"_datazoomthumbChartbg\"\n        graphssp.context.x = -_coor.origin.x; //0;\n\n        //TODO:这里为什么要 -2 的原因还没查出来。\n        graphssp.context.y = - 2;\n        graphssp.context.scaleY = this.btnHeight / _coor.height;\n        graphssp.context.scaleX = this.width / _coor.width;\n\n        this.dataZoomBg.addChild( graphssp , 0);\n\n        this.__graphssp = graphssp;\n\n        this._cloneChart.thumbChart.destroy();\n        this._cloneChart.cloneEl.parentNode.removeChild( this._cloneChart.cloneEl );\n    }\n\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\n\nconst BrokenLine = Canvax.Shapes.BrokenLine;\nconst Sprite = Canvax.Display.Sprite;\nconst Text = Canvax.Display.Text;\n\nexport default class MarkLine extends Component\n{\n    constructor(opt , app)\n    {\n        super(opt , app);\n\n        this.name = \"markLine\";\n\n        this._yAxis = null;\n\n        this.field  = null;\n\n        this.markTo = null; //默认给所有字段都现实一条markline，有设置的话，配置给固定的几个 field 显示markline\n        this.yVal = 0;     //y 的值，可能是个function，均值计算就是个function\n        \n        this.line       = {\n            y           : 0,\n            list        : [],\n            strokeStyle : '#999',\n            lineWidth   : 1,\n            smooth      : false,\n            lineType    : 'dashed'\n        };\n\n        this.label = {\n            enabled     : false,\n            fillStyle   : '#999999',\n            fontSize    : 12,\n            text        : null, //\"markline\",\n            lineType    : 'dashed',\n            lineWidth   : 1,\n            strokeStyle : \"white\",\n            format      : null\n        };\n\n        this._txt = null;\n        this._line = null;\n\n        this.sprite  = new Sprite();\n        this.app.graphsSprite.addChild( this.sprite );\n\n        opt && _.extend(true, this, opt);\n    }\n\n    draw( ){\n        this._calculateProps();\n        this.setPosition();\n        this.widget();\n    }\n\n    _calculateProps(  ){\n        var me = this;\n        var opt = this._opt;\n\n        //如果markline有target配置，那么只现在target配置里的字段的 markline, 推荐\n        var field = opt.markTo;\n\n        var _coord = this.app.getComponent({name:'coord'});\n\n        if( field && _.indexOf( this.app.dataFrame.fields , field ) == -1 ){\n            //如果配置的字段不存在，则不绘制\n            return;\n        };\n\n        var _yAxis = _coord._yAxis[0]; //默认为左边的y轴\n        \n        if( field ){\n            //如果有配置markTo就从 _coord._yAxis中找到这个markTo所属的yAxis对象\n            _.each( _coord._yAxis, function( $yAxis, yi ){\n                var fs = _.flatten([ $yAxis.field ]);\n                if( _.indexOf( fs, field ) >= 0 ){\n                    _yAxis = $yAxis;\n                }\n            } );\n        };\n\n        if( opt.yAxisAlign ){\n            //如果有配置yAxisAlign，就直接通过yAxisAlign找到对应的\n            _yAxis = _coord._yAxis[ opt.yAxisAlign==\"left\" ? 0 : 1 ];\n        };\n\n        var y;\n        if( opt.y !== undefined && opt.y !== null ){\n            y = Number( opt.y );\n        } else {\n            //如果没有配置这个y的属性，就 自动计算出来均值\n            //但是均值是自动计算的，比如datazoom在draging的时候\n            y = function(){\n                var _fdata = this.app.dataFrame.getFieldData( field );\n                var _count = 0;\n                _.each( _fdata, function( val ){\n                    if( Number( val ) ){\n                        _count += val;\n                    }\n                } );\n                return _count / _fdata.length;\n            }\n        };\n\n        //y = this._getYVal( y );\n\n        if( !isNaN(y) ) {\n            //如果y是个function说明是均值，自动实时计算的，而且不会超过ydatasection的范围\n            _yAxis.setWaterLine( y );\n            _yAxis.draw();\n        };\n\n        var _fstyle = \"#777\";\n        var fieldMap = _coord.getFieldMapOf( field );\n        if( fieldMap ){\n            _fstyle = fieldMap.color;\n        };\n        var lineStrokeStyle =  opt.line && opt.line.strokeStyle || _fstyle;\n        var textFillStyle = opt.label && opt.label.fillStyle || _fstyle;\n\n        //开始计算赋值到属性上面\n        this._yAxis = _yAxis;\n        this.width = _coord.width;\n        this.height = _coord.height;\n        this.yVal = y;\n        this.pos = {\n            x: _coord.origin.x,\n            y: _coord.origin.y\n        };\n        this.line.list = [\n            [0, 0],\n            [this.width, 0]\n        ];\n        this.label.fillStyle = textFillStyle;\n        this.field = field;\n        if( lineStrokeStyle ){\n            this.line.strokeStyle = lineStrokeStyle;\n        };\n\n    }\n\n    widget()\n    {\n        var me = this;\n\n        var y = this._getYPos();\n\n        var line = new BrokenLine({               //线条\n            id : \"line\",\n            context : {\n                y           : y,\n                pointList   : me.line.list,\n                strokeStyle : me.line.strokeStyle,\n                lineWidth   : me.line.lineWidth,\n                lineType    : me.line.lineType\n            }\n        });\n        me.sprite.addChild(line);\n        me._line = line;\n\n        if(me.label.enabled){\n            var txt = new Text( me._getLabel() , {           //文字\n                context : me.label\n            });\n            this._txt = txt;\n            me.sprite.addChild(txt);\n\n            me._setTxtPos( y );\n        }\n    \n        this.line.y = y;\n    }\n\n    reset(opt)\n    {\n        opt && _.extend(true, this, opt);\n\n        var me = this;\n        var y = this._getYPos();\n\n        if( y != this.line.y ){\n            this._line.animate({\n                y: y\n            }, {\n                duration: 300,\n                onUpdate: function( obj ){\n                    if( me.label.enabled ){\n                        me._txt.resetText( me._getLabel() );\n                        me._setTxtPos( obj.y )\n                        //me._txt.context.y = obj.y - me._txt.getTextHeight();\n                    }\n                }\n                //easing: 'Back.Out' //Tween.Easing.Elastic.InOut\n            });\n        };\n        this._line.context.strokeStyle = this.line.strokeStyle;\n\n        this.line.y = y;\n    }\n\n    _setTxtPos( y )\n    {\n        var me = this;\n        var txt = me._txt;\n        \n        if( this._yAxis.align == \"left\" ){\n            txt.context.x = 5;\n        } else {\n            txt.context.x = this.width - txt.getTextWidth() - 5; \n        };\n            \n        if(_.isNumber(me.label.y)){\n            txt.context.y = me.label.y\n        } else {\n            txt.context.y = y - txt.getTextHeight() \n        };\n    }\n\n    _getYVal( yVal )\n    {\n        var yVal = yVal || this.yVal;\n        var y = yVal;\n        if( _.isFunction( yVal ) ){\n            y = yVal.apply( this );\n        };\n\n        return y;\n    }\n\n    _getYPos()\n    {\n        return -this._yAxis.getPosOfVal( this._getYVal() );;\n    }\n\n    _getLabel()\n    {\n        var str;\n        var yVal = this._getYVal();\n        if( _.isFunction( this.label.format ) ){\n            str = this.label.format( yVal , this );\n        } else {\n            if( _.isString( this.label.text ) ){\n                str = this.label.text;\n            } else {\n                str = yVal;\n            };\n        };\n        return str;\n    }\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { numAddSymbol } from \"../../utils/tools\"\nimport { _ } from \"mmvis\"\n\nconst Rect = Canvax.Shapes.Rect;\nconst Line = Canvax.Shapes.Line;\n\nexport default class Tips extends Component {\n    constructor(opt, app) {\n        super(opt, app);\n\n        this.name = \"tips\"\n\n        this.tipDomContainer = this.app.canvax.domView;\n        this.cW = 0;  //容器的width\n        this.cH = 0;  //容器的height\n\n        this.dW = 0;  //html的tips内容width\n        this.dH = 0;  //html的tips内容Height\n\n        this.borderRadius = \"5px\";  //背景框的 圆角 \n\n        this.sprite = null;\n        this.content = null; //tips的详细内容\n\n        this.fillStyle = \"rgba(255,255,255,0.95)\";//\"#000000\";\n        this.fontColor = \"#999\";\n        this.strokeStyle = \"#ccc\";\n\n        this.position = \"right\"; //在鼠标的左（右）边\n\n        this._tipDom = null;\n\n        this.offsetX = 10; //tips内容到鼠标位置的偏移量x\n        this.offsetY = 10; //tips内容到鼠标位置的偏移量y\n\n        //所有调用tip的 event 上面 要附带有符合下面结构的eventInfo属性\n        //会deepExtend到this.indo上面来\n        this.eventInfo = null;\n\n        this.positionInRange = true; //false; //tip的浮层是否限定在画布区域\n        this.enabled = true; //tips是默认显示的\n\n        this.pointer = 'line'; //tips的指针,默认为直线，可选为：'line' | 'region'(柱状图中一般用region)\n        this.pointerAnim = true;\n        this._tipsPointer = null;\n\n        \n        this.sprite = new Canvax.Display.Sprite({\n            id: \"TipSprite\"\n        });\n        this.app.stage.addChild(this.sprite);\n\n        var me = this;\n        this.sprite.on(\"destroy\", function () {\n            me._tipDom = null;\n        });\n\n        _.extend(true, this, opt);\n        \n    }\n\n    show(e) {\n\n        if (!this.enabled) return;\n\n        if (e.eventInfo) {\n            this.eventInfo = e.eventInfo;\n\n            //TODO:这里要优化，canvax后续要提供直接获取canvax实例的方法\n            var stage = e.target.getStage();\n            if( stage ){\n                this.cW = stage.context.width;\n                this.cH = stage.context.height;\n            } else {\n                if( e.target.type == 'canvax' ){\n                    this.cW = e.target.width;\n                    this.cH = e.target.height;\n                };\n            };\n            \n\n            var content = this._setContent(e);\n            if (content) {\n                this._setPosition(e);\n                this.sprite.toFront();\n\n                //比如散点图，没有hover到点的时候，也要显示，所有放到最下面\n                //反之，如果只有hover到点的时候才显示point，那么就放这里\n                //this._tipsPointerShow(e);\n            } else {\n                this.hide();\n            }\n\n        };\n\n        this._tipsPointerShow(e)\n    }\n\n    move(e) {\n        if (!this.enabled) return;\n\n        if (e.eventInfo) {\n            this.eventInfo = e.eventInfo;\n            var content = this._setContent(e);\n            if (content) {\n                this._setPosition(e);\n\n                //比如散点图，没有hover到点的时候，也要显示，所有放到最下面\n                //反之，如果只有hover到点的时候才显示point，那么就放这里\n                //this._tipsPointerMove(e)\n            } else {\n                //move的时候hide的只有dialogTips, pointer不想要隐藏\n                //this.hide();\n                this._hideDialogTips();\n            }\n        };\n        this._tipsPointerMove(e)\n    }\n\n    hide() {\n        if (!this.enabled) return;\n        this._hideDialogTips();\n        this._tipsPointerHide()\n    }\n\n    _hideDialogTips() {\n        if (this.eventInfo) {\n            this.eventInfo = null;\n            this.sprite.removeAllChildren();\n            this._removeContent();\n        };\n    }\n\n    /**\n     *@pos {x:0,y:0}\n     */\n    _setPosition(e) {\n        if (!this.enabled) return;\n        if (!this._tipDom) return;\n        var pos = e.pos || e.target.localToGlobal(e.point);\n        var x = this._checkX(pos.x + this.offsetX);\n        var y = this._checkY(pos.y + this.offsetY);\n\n        this._tipDom.style.cssText += \";visibility:visible;left:\" + x + \"px;top:\" + y + \"px;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;\";\n\n        if (this.position == \"left\") {\n            this._tipDom.style.left = this._checkX(pos.x - this.offsetX - this._tipDom.offsetWidth) + \"px\";\n        };\n    }\n\n    /**\n     *content相关-------------------------\n     */\n    _creatTipDom(e) {\n        var me = this;\n        this._tipDom = document.createElement(\"div\");\n        this._tipDom.className = \"chart-tips\";\n        this._tipDom.style.cssText += \"；-moz-border-radius:\" + this.borderRadius + \"; -webkit-border-radius:\" + this.borderRadius + \"; border-radius:\" + this.borderRadius + \";background:\" + this.fillStyle + \";border:1px solid \" + this.strokeStyle + \";visibility:hidden;position:absolute;enabled:inline-block;*enabled:inline;*zoom:1;padding:6px;color:\" + this.fontColor + \";line-height:1.5\"\n        this._tipDom.style.cssText += \"; -moz-box-shadow:1px 1px 3px \" + this.strokeStyle + \"; -webkit-box-shadow:1px 1px 3px \" + this.strokeStyle + \"; box-shadow:1px 1px 3px \" + this.strokeStyle + \";\"\n        this._tipDom.style.cssText += \"; border:none;white-space:nowrap;word-wrap:normal;\"\n        this._tipDom.style.cssText += \"; text-align:left;\"\n        this.tipDomContainer.appendChild(this._tipDom);\n    }\n\n    _removeContent() {\n        if (!this._tipDom) return;\n        this.tipDomContainer.removeChild(this._tipDom);\n        this._tipDom = null;\n    }\n\n    _setContent(e) {\n        var tipxContent = this._getContent(e);\n        if (!tipxContent && tipxContent !== 0) {\n            return;\n        };\n\n        if (!this._tipDom) {\n            this._creatTipDom(e)\n        };\n\n        this._tipDom.innerHTML = tipxContent;\n        this.dW = this._tipDom.offsetWidth;\n        this.dH = this._tipDom.offsetHeight;\n\n        return tipxContent\n    }\n\n    _getContent(e) {\n\n        var tipsContent;\n\n        if (this.content) {\n            tipsContent = _.isFunction(this.content) ? this.content(e.eventInfo) : this.content;\n        } else {\n            tipsContent = this._getDefaultContent(e.eventInfo);\n        };\n\n        return tipsContent;\n    }\n\n    _getDefaultContent(info) {\n        var str = \"\";\n        if( !info.nodes.length ){\n            return str;\n        };\n        if (info.title !== undefined && info.title !== null && info.title !== \"\") {\n            str += \"<div style='font-size:14px;border-bottom:1px solid #f0f0f0;padding:4px;margin-bottom:6px;'>\" + info.title + \"</div>\";\n        }; \n        _.each(info.nodes, function (node, i) {\n            if (!node.value && node.value !== 0) {\n                return;\n            }; \n            var style = node.color || node.fillStyle || node.strokeStyle;\n            var name = node.name || node.field;\n            var value = typeof(node.value) == \"object\" ? JSON.stringify(node.value) : numAddSymbol(node.value);\n            str += \"<div style='line-height:1.5;font-size:12px;padding:0 4px;'>\"\n            if( style ){\n                str += \"<span style='background:\" + style + \";margin-right:8px;margin-top:7px;float:left;width:8px;height:8px;border-radius:4px;overflow:hidden;font-size:0;'></span>\";\n            };\n            if( name ){\n                str += \"<span style='margin-right:5px;'>\"+name+\"：</span>\";\n            };\n            \n            str += value + \"</div>\";\n        });\n        return str;\n    }\n\n    /**\n     *获取back要显示的x\n     *并且校验是否超出了界限\n     */\n    _checkX(x) {\n        if (this.positionInRange) {\n            var w = this.dW + 2; //后面的2 是 两边的 linewidth\n            if (x < 0) {\n                x = 0;\n            }\n            if (x + w > this.cW) {\n                x = this.cW - w;\n            }\n        }\n        return x\n    }\n\n    /**\n     *获取back要显示的x\n     *并且校验是否超出了界限\n     */\n    _checkY(y) {\n        if (this.positionInRange) {\n            var h = this.dH + 2; //后面的2 是 两边的 linewidth\n            if (y < 0) {\n                y = 0;\n            }\n            if (y + h > this.cH) {\n                y = this.cH - h;\n            }\n        }\n        return y\n    }\n\n\n    _tipsPointerShow(e) {\n        var _coord = this.app.getComponent({name:'coord'});\n\n        //目前只实现了直角坐标系的tipsPointer\n        if (!_coord || _coord.type != 'rect') return;\n\n        if (!this.pointer) return;\n\n        var el = this._tipsPointer;\n        var y = _coord.origin.y - _coord.height;\n        var x = 0;\n        if (this.pointer == \"line\") {\n            x = _coord.origin.x + e.eventInfo.xAxis.x;\n        }\n        if (this.pointer == \"region\") {\n            var regionWidth = _coord._xAxis.getCellLengthOfPos( e.eventInfo.xAxis.x );\n            x = _coord.origin.x + e.eventInfo.xAxis.x - regionWidth / 2;\n            if (e.eventInfo.xAxis.ind < 0) {\n                //当没有任何数据的时候， e.eventInfo.xAxis.ind==-1\n                x = _coord.origin.x;\n            }\n        }\n\n        if (!el) {\n            if (this.pointer == \"line\") {\n                el = new Line({\n                    //xyToInt : false,\n                    context: {\n                        x: x,\n                        y: y,\n                        start: {\n                            x: 0,\n                            y: 0\n                        },\n                        end: {\n                            x: 0,\n                            y: _coord.height\n                        },\n                        lineWidth: 1,\n                        strokeStyle: \"#cccccc\"\n                    }\n                });\n            };\n            if (this.pointer == \"region\") {\n                var regionWidth = _coord._xAxis.getCellLengthOfPos( x );\n                el = new Rect({\n                    //xyToInt : false,\n                    context: {\n                        width: regionWidth,\n                        height: _coord.height,\n                        x: x,\n                        y: y,\n                        fillStyle: \"#cccccc\",\n                        globalAlpha: 0.3\n                    }\n                });\n            };\n\n            this.app.graphsSprite.addChild(el, 0);\n            this._tipsPointer = el;\n        } else {\n            if (this.pointerAnim && _coord._xAxis.layoutType != \"proportion\") {\n                if (el.__animation) {\n                    el.__animation.stop();\n                };\n                el.__animation = el.animate({\n                    x: x,\n                    y: y\n                }, {\n                        duration: 200\n                    });\n            } else {\n                el.context.x = x;\n                el.context.y = y;\n            }\n        }\n    }\n\n    _tipsPointerHide() {\n        var _coord = this.app.getComponent({name:'coord'});\n        //目前只实现了直角坐标系的tipsPointer\n        if (!_coord || _coord.type != 'rect') return;\n\n        if (!this.pointer || !this._tipsPointer) return;\n        //console.log(\"hide\");\n        this._tipsPointer.destroy();\n        this._tipsPointer = null;\n    }\n\n    _tipsPointerMove(e) {\n\n        var _coord = this.app.getComponent({name:'coord'});\n\n        //目前只实现了直角坐标系的tipsPointer\n        if (!_coord || _coord.type != 'rect') return;\n\n        if (!this.pointer || !this._tipsPointer) return;\n\n        //console.log(\"move\");\n\n        var el = this._tipsPointer;\n        var x = _coord.origin.x + e.eventInfo.xAxis.x;\n        if (this.pointer == \"region\") {\n            var regionWidth = _coord._xAxis.getCellLengthOfPos( e.eventInfo.xAxis.x );\n            x = _coord.origin.x + e.eventInfo.xAxis.x - regionWidth / 2;\n            if (e.eventInfo.xAxis.ind < 0) {\n                //当没有任何数据的时候， e.eventInfo.xAxis.ind==-1\n                x = _coord.origin.x;\n            }\n        };\n        var y = _coord.origin.y - _coord.height;\n\n        if (x == el.__targetX) {\n            return;\n        };\n\n        if (this.pointerAnim && _coord._xAxis.layoutType != \"proportion\") {\n            if (el.__animation) {\n                el.__animation.stop();\n            };\n            el.__targetX = x;\n            el.__animation = el.animate({\n                x: x,\n                y: y\n            }, {\n                    duration: 200,\n                    onComplete: function () {\n                        delete el.__targetX;\n                        delete el.__animation;\n                    }\n                })\n        } else {\n            el.context.x = x;\n            el.context.y = y;\n        }\n    }\n\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\n\nconst Line = Canvax.Shapes.Line\n\nexport default class barTgi extends Component\n{\n\n    constructor( opt, app )\n    {\n        super(opt, app);\n\n        this.name = \"barTgi\";\n\n        this.field = null;\n        this.barField = null;\n\n        this.data = null;\n        this.barDatas = null;\n        this._yAxis = null;\n\n        this.yAxisAlign = \"left\";\n\n        this.sprite = null;\n\n        this.standardVal = 100;\n        this.pos = {\n            x : 0,\n            y : 0\n        };\n        this.line = {\n            lineWidth : 3,\n            strokeStyle : function( val, i ){\n                if( val >= this.standardVal ){\n                    return \"#43cbb5\"\n                } else {\n                    return \"#ff6060\"\n                }\n            }\n        };\n        \n        _.extend(true, this , opt );\n        \n        this._yAxis = this.app.getComponent({name:'coord'})._yAxis[ this.yAxisAlign==\"left\"?0:1 ];\n        this.sprite  = new Canvax.Display.Sprite();\n        this.app.graphsSprite.addChild( this.sprite );\n    }\n\n    reset( opt )\n    {\n        _.extend(true, this , opt );\n        this.barDatas = null;\n        this.data = null;\n        this.sprite.removeAllChildren();\n        this.draw();\n    }\n\n    draw()\n    {\n        var me = this;\n\n        var _coord = this.app.getComponent({name:'coord'});\n        this.pos = {   \n            x: _coord.origin.x,\n            y: _coord.origin.y\n        };\n        this.setPosition();\n\n        _.each( me.app.getComponents({name:'graphs'}), function( _g ){\n            if( _g.type == \"bar\" && _g.data[ me.barField ] ){\n                me.barDatas = _g.data[ me.barField ];\n                return false;\n            }\n        } );\n        this.data = _.flatten( me.app.dataFrame.getDataOrg( me.field ) );\n\n        if( !this.barDatas ) {\n            return;\n        };\n\n        _.each( this.data, function( tgi, i ){\n            var y = -me._yAxis.getPosOfVal( tgi );\n            var barData = me.barDatas[ i ];\n\n            var _tgiLine = new Line({\n                context: {\n                    start : {\n                        x : barData.x,\n                        y : y\n                    },\n                    end : {\n                        x : barData.x + barData.width,\n                        y : y\n                    },\n                    lineWidth: 2,\n                    strokeStyle: me._getProp( me.line.strokeStyle, tgi, i )\n                }\n            });\n            me.sprite.addChild( _tgiLine );\n        } );\n    }\n\n    _getProp( val , tgi, i)\n    {\n        var res = val;\n        if( _.isFunction( val ) ){\n            res = val.apply( this, [ tgi, i ] )\n        };\n        return res;\n    }\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\n\nexport default class extends Component\n{\n\n    constructor( opt, app )\n    {\n        super(opt, app);\n\n        this.name = \"barGuide\";\n\n        this.field = null;\n        this.barField = null;\n\n        this.data = null;\n        this.barDatas = null;\n        this._yAxis = null;\n\n        this.yAxisAlign = \"left\";\n\n        this.sprite = null;\n\n        this.node = {\n            lineWidth : 3,\n            shapeType : \"circle\",\n            radius : 6,\n            fillStyle : \"#19dea1\",\n            strokeStyle : \"#fff\",\n            lineWidth : 2,\n        };\n        this.label = {\n            fontSize : 12,\n            fontColor: \"#19dea1\",\n            verticalAlign: \"bottom\",\n            align: \"center\",\n            strokeStyle : \"#fff\",\n            lineWidth : 0,\n            format : function( value, nodeData ){\n                return value;\n            }\n        };\n        \n        _.extend(true, this , opt );\n        \n        this._yAxis = this.app.getComponent({name:'coord'})._yAxis[ this.yAxisAlign==\"left\"?0:1 ];\n        this.sprite  = new Canvax.Display.Sprite();\n        this.app.graphsSprite.addChild( this.sprite );\n    }\n\n    reset( opt )\n    {\n        _.extend(true, this , opt );\n        this.barDatas = null;\n        this.data = null;\n        this.sprite.removeAllChildren();\n        this.draw();\n    }\n\n    draw()\n    {\n        var me = this;\n        \n        var _coord = this.app.getComponent({name:'coord'});\n        this.pos = {   \n            x: _coord.origin.x,\n            y: _coord.origin.y\n        };\n        this.setPosition();\n\n        _.each( me.app.getComponents({name:'graphs'}), function( _g ){\n            if( _g.type == \"bar\" && _g.data[ me.barField ] ){\n                me.barDatas = _g.data[ me.barField ];\n                return false;\n            }\n        } );\n        \n        this.data = _.flatten( me.app.dataFrame.getDataOrg( me.field ) );\n\n        if( !this.barDatas ) {\n            return;\n        };\n\n        _.each( this.data, function( val, i ){\n            var y = -me._yAxis.getPosOfVal( val );\n            var barData = me.barDatas[ i ];\n\n            var _node = new Canvax.Shapes.Circle({\n                context : {\n                    x : barData.x + barData.width/2 ,\n                    y : y,\n                    r : me.node.radius,\n                    fillStyle : me.node.fillStyle,\n                    strokeStyle : me.node.strokeStyle,\n                    lineWidth : me.node.lineWidth\n                }\n            });\n\n            var _txt = new Canvax.Display.Text( me.label.format( val, barData) , {\n                context : {\n                    x : barData.x + barData.width/2,\n                    y : y - me.node.radius - 1,\n                    fillStyle : me.label.fontColor,\n                    lineWidth : me.label.lineWidth,\n                    strokeStyle: me.label.strokeStyle,\n                    fontSize: me.label.fontSize,\n                    textAlign   : me.label.align,\n                    textBaseline: me.label.verticalAlign,\n                }\n            } );\n \n            me.sprite.addChild( _node );\n            me.sprite.addChild( _txt );\n        } );\n    }\n\n    _getProp( val , tgi, i)\n    {\n        var res = val;\n        if( _.isFunction( val ) ){\n            res = val.apply( this, [ tgi, i ] )\n        }\n        return res;\n    }\n}","/**\n * 皮肤组件，不是一个具体的ui组件\n */\nimport Component from \"../component\"\nimport { _ } from \"mmvis\"\n\nexport default class theme extends Component\n{\n    constructor( theme , app )\n    {\n        super( theme, app );\n        this.name = \"theme\";\n        this.colors = theme || [];\n    }\n\n    set( colors )\n    {\n        this.colors = colors;\n        return this.colors;\n    }\n\n    get( ind )\n    {\n        var colors = this.colors;\n        if( !_.isArray( colors ) ){\n            colors = [ colors ]\n        };\n        return colors;\n    }\n\n    mergeTo( colors )\n    {\n        if( !colors ){\n            colors = [];\n        };\n        for( var i=0,l=this.colors.length; i<l; i++ ){\n            if( colors[i] ){\n                colors[i] = this.colors[i]\n            } else {\n                colors.push( this.colors[i] );\n            }\n        };\n    \n        return colors;\n    }\n\n}","/**\n * 水印组件\n */\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\nimport Component from \"../component\"\n\nconst Text = Canvax.Display.Text;\n\nexport default class waterMark extends Component\n{\n    constructor( opt , app )\n    {\n        super( opt , app );\n        \n        this.name = \"waterMark\";\n\n        this.width = this.app.width;\n        this.height = this.app.height;\n\n        this.text = \"chartx\";\n        this.fontSize = 20;\n        this.fontColor = \"#ccc\";\n        this.strokeStyle = \"#ccc\";\n        this.lineWidth = 0;\n        this.alpha = 0.2;\n        this.rotation = 45;\n\n        _.extend( true, this, opt );\n\n        this.spripte = new Canvax.Display.Sprite({\n            id : \"watermark\"\n        });\n        this.app.stage.addChild( this.spripte );\n        this.draw();\n    }\n\n    draw()\n    {\n\n        var textEl = new Canvax.Display.Text( this.text , {\n            context: {\n                fontSize    : this.fontSize,\n                fillStyle   : this.fontColor\n            }\n        });\n\n        var textW = textEl.getTextWidth();\n        var textH = textEl.getTextHeight();\n\n        var rowCount = parseInt(this.height / (textH*5)) +1;\n        var coluCount = parseInt(this.width / (textW*1.5)) +1;\n\n        for( var r=0; r< rowCount; r++){\n            for( var c=0; c< coluCount; c++){\n                //TODO:text 的 clone有问题\n                //var cloneText = textEl.clone();\n                var _textEl = new Canvax.Display.Text( this.text , {\n                    context: {\n                        rotation    : this.rotation,\n                        fontSize    : this.fontSize,\n                        strokeStyle : this.strokeStyle,\n                        lineWidth   : this.lineWidth,\n                        fillStyle   : this.fontColor,\n                        globalAlpha : this.alpha\n                    }\n                });\n                _textEl.context.x = textW*1.5*c + textW*.25;\n                _textEl.context.y = textH*5*r;\n                this.spripte.addChild( _textEl );\n            }\n        }\n\n    }\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\n\nconst Line = Canvax.Shapes.Line;\nconst Sprite = Canvax.Display.Sprite;\nconst Text = Canvax.Display.Text;\n\nexport default class MarkLine extends Component\n{\n\n    constructor(opt , app)\n    {\n        super(opt , app);\n\n        this.name = \"cross\";\n\n        this.width  = opt.width || 0;\n        this.height = opt.height || 0;\n\n        //x,y都是准心的 x轴方向和y方向的 value值，不是真实的px，需要\n        this.x = null;\n        this.y = null;\n        \n        //准心的位置\n        this.aimPoint = {\n            x : 0,\n            y : 0\n        };\n       \n        this.line       = {\n            y           : 0,\n            strokeStyle : '#cccccc',\n            lineWidth   : 1,\n            smooth      : false,\n            lineType    : 'solid'\n        };\n\n        //待开发\n        this.node = {\n            enabled : false,\n            shapeType : \"circle\",\n            radius : 1,\n            fillStyle : \"#999\"\n        };\n\n        //待开发\n        this.label = {\n            enabled  : false,\n            fillStyle: '#999999',\n            fontSize : 12,\n            value  : null,\n            lineType : 'dashed',\n            lineWidth: 1,\n            strokeStyle : \"white\"\n        };\n\n        this._txt   = null;\n        this._node  = null;\n        this._hLine = null; //横向的线\n        this._vLine = null; //竖向的线\n       \n        opt && _.extend(true, this, opt);\n\n        this._yAxis = this.app.getComponent({name:'coord'})._yAxis[ this.yAxisAlign==\"left\"?0:1 ];\n        this.sprite  = new Canvax.Display.Sprite();\n        this.app.graphsSprite.addChild( this.sprite );\n    }\n\n    draw()\n    {\n        var me = this;\n\n        var _coord = this.app.getComponent({name:'coord'});\n        this.pos = {   \n            x: _coord.origin.x,\n            y: _coord.origin.y\n        };\n        this.width = _coord.width;\n        this.height = _coord.height;\n        this.aimPoint = {\n            x : this.width / 2,\n            y : this.height / 2\n        };\n        this.setPosition();\n\n\n        me._hLine = new Line({ //横向线条\n            context : {\n                start : {\n                    x : 0,\n                    y : -this.aimPoint.y\n                },\n                end : {\n                    x : me.width,\n                    y : -this.aimPoint.y\n                },\n                strokeStyle : me.line.strokeStyle,\n                lineWidth   : me.line.lineWidth,\n                lineType    : me.line.lineType\n            }\n        });\n        me.sprite.addChild( me._hLine );\n\n        me._vLine = new Line({ //线条\n            context : {\n                start : {\n                    x : this.aimPoint.x,\n                    y : 0\n                },\n                end : {\n                    x : this.aimPoint.x,\n                    y : -me.height\n                },\n                strokeStyle : me.line.strokeStyle,\n                lineWidth   : me.line.lineWidth,\n                lineType    : me.line.lineType\n            }\n        });\n        me.sprite.addChild( me._vLine );\n    }\n\n}","import Component from \"../component\"\nimport Canvax from \"canvax\"\nimport { _ } from \"mmvis\"\n\nexport default class extends Component\n{\n\n    constructor( opt, app )\n    {\n        super(opt, app);\n\n        this.name = \"lineSchedu\";\n\n        this.data = null;\n        this.lineDatas = null;\n\n        this.lineField = null;\n        this.style = \"#3995ff\";\n        this.fillStyle = \"#fff\";\n        this.lineWidth = 2;\n        this.radius = 6;\n        this.timeFontSize = 14;\n        this.timeFontColor = \"#606060\";\n        this.listFontSize = 12;\n        this.listFontColor = null;\n        \n        _.extend(true, this , opt );\n        \n        this.sprite = new Canvax.Display.Sprite();\n        this.app.graphsSprite.addChild( this.sprite );\n    }\n\n    reset( opt )\n    {\n        _.extend(true, this , opt );\n        this.lineDatas = null;\n        this.data = null;\n        this.sprite.removeAllChildren();\n        this.draw();\n    }\n\n    draw()\n    {\n        var me = this;\n        \n        var _coord = this.app.getComponent({name:'coord'});\n        this.pos = {   \n            x: _coord.origin.x,\n            y: _coord.origin.y\n        };\n        this.setPosition();\n\n        var lineGraphs = me.app.getComponent({\n            name  : 'graphs',\n            type  : \"line\",\n            field : me.lineField\n        });\n\n        me.lineDatas = lineGraphs.data[ me.lineField ].data;\n\n        var iNode = this.app.getComponent({name : \"coord\"}).getAxis({type: \"xAxis\"}).getIndexOfVal( this.time );\n        \n        if( iNode == -1 ){\n            return;\n        };\n\n        var nodeData = this.lineDatas[iNode];\n\n        if( nodeData.y != undefined ){\n            var y = me._getNodeY( nodeData, _coord );\n            var x = nodeData.x;\n\n            var _txtSp = new Canvax.Display.Sprite({\n                context : {\n                    x : x - 20\n                }\n            });\n            this.sprite.addChild( _txtSp );\n            var txtHeight = 0;\n\n            var _title = new Canvax.Display.Text( me.time, {\n                context : {\n                    fillStyle : this.timeFontColor || this.style,\n                    fontSize  : this.timeFontSize\n                } \n            } );\n            _txtSp.addChild( _title );\n            var txtHeight = _title.getTextHeight();\n            var txtWidth = _title.getTextWidth();\n\n            var _list = new Canvax.Display.Text(_.flatten([me.list]).join(\"\\n\") , {\n                context : {\n                    y : txtHeight,\n                    fillStyle : this.listFontColor || this.style,\n                    fontSize  : this.listFontSize\n                } \n            } );\n            _txtSp.addChild( _list );\n            txtHeight += _list.getTextHeight();\n            txtWidth = Math.max( txtWidth, _list.getTextWidth() );\n\n            if( txtWidth + x - 20 > _coord.width+me.app.padding.right){\n                _txtSp.context.x = _coord.width+me.app.padding.right;\n                _title.context.textAlign = \"right\";\n                _list.context.textAlign = \"right\";\n            };\n\n            var tsTop = 0;\n            if( me.status == \"online\" ){\n                tsTop = y - (this.radius + 3) - txtHeight;\n                if( Math.abs(tsTop) > _coord.origin.y ){\n                    tsTop = -_coord.origin.y;\n                    y = -(_coord.origin.y - (this.radius + 3) - txtHeight);\n                };\n            } else {\n                tsTop = y + (this.radius + 3);\n                if( tsTop + txtHeight > 0 ){\n                    tsTop = -txtHeight;\n                    y = - (this.radius + 3) - txtHeight\n                };\n            };\n            \n            _txtSp.context.y = tsTop;\n\n            var _line = new Canvax.Shapes.BrokenLine({\n                context : {\n                    pointList: [\n                        [ x, y ], [ x, nodeData.y ]\n                    ],\n                    strokeStyle : me.style,\n                    lineWidth : me.lineWidth\n                }\n            });\n\n            me.sprite.addChild( _line );\n\n            var _node = new Canvax.Shapes.Circle({\n                context : {\n                    x : x,\n                    y : y,\n                    r : me.radius,\n                    fillStyle : me.fillStyle,\n                    strokeStyle : me.style,\n                    lineWidth : me.lineWidth\n                }\n            });\n            me.sprite.addChild( _node );\n\n        }\n\n    }\n\n    _getNodeY(nodeData, _coord){\n    \n        var appHeight = this.app.height;\n        var coordHeight = _coord.height;\n        var y = nodeData.y;\n        if( this.status == \"online\" ){\n            y -= Math.min( 50, (appHeight-Math.abs( y ))*0.3 )\n        } else {\n            y += Math.min( 50, Math.abs( y )*0.3 )\n        };\n        return y;\n    }\n\n}","\nimport { global } from \"mmvis\"\n\nimport Chart from \"./chart\"\n\n//空坐标系，当一些非坐标系图表，就直接创建在emptyCoord上面\n//import emptyCoord from \"./components/coord/index\"\n\n//坐标系\nimport Rect from \"./components/coord/rect\"\nimport Polar from \"./components/coord/polar\"\n\n//graphs\nimport Bar from \"./components/graphs/bar/index\"\nimport Line from \"./components/graphs/line/index\"\nimport Scat from \"./components/graphs/scat/index\"\nimport Pie from \"./components/graphs/pie/index\"\nimport Radar from \"./components/graphs/radar/index\"\nimport Cloud from \"./components/graphs/cloud/index\"\nimport Planet from \"./components/graphs/planet/index\"\nimport Funnel from \"./components/graphs/funnel/index\"\nimport Venn from \"./components/graphs/venn/index\"\nimport Sunburst from \"./components/graphs/sunburst/index\"\nimport Sankey from \"./components/graphs/sankey/index\"\nimport Progress from \"./components/graphs/progress/index\"\n\n//components\nimport Legend from \"./components/legend/index\"\nimport DataZoom from \"./components/datazoom/index\"\nimport MarkLine from \"./components/markline/index\"\nimport Tips from \"./components/tips/index\"\nimport BarTgi from \"./components/bartgi/index\"\nimport BarGuide from \"./components/barguide/index\"\nimport Theme from \"./components/theme/index\"\nimport WaterMark from \"./components/watermark/index\"\nimport Cross from \"./components/cross/index\"\nimport lineSchedu from \"./components/lineschedu/index\"\n\nglobal.registerComponent( Chart, 'chart' );\n\n//global.registerComponent( emptyCoord, 'coord' );\nglobal.registerComponent( Rect, 'coord', 'rect' );\nglobal.registerComponent( Polar, 'coord', 'polar' );\n\nglobal.registerComponent( Bar, 'graphs', 'bar' );\nglobal.registerComponent( Line, 'graphs', 'line' );\nglobal.registerComponent( Scat, 'graphs', 'scat' );\nglobal.registerComponent( Pie, 'graphs', 'pie' );\nglobal.registerComponent( Radar, 'graphs', 'radar' );\nglobal.registerComponent( Cloud, 'graphs', 'cloud' );\nglobal.registerComponent( Planet, 'graphs', 'planet' );\nglobal.registerComponent( Funnel, 'graphs', 'funnel' );\nglobal.registerComponent( Venn, 'graphs', 'venn' );\nglobal.registerComponent( Sunburst, 'graphs', 'sunburst' );\nglobal.registerComponent( Sankey, 'graphs', 'sankey' );\nglobal.registerComponent( Progress, 'graphs', 'progress' )\n\nglobal.registerComponent( Theme, 'theme' );\nglobal.registerComponent( Legend, 'legend' );\nglobal.registerComponent( DataZoom, 'dataZoom' );\nglobal.registerComponent( MarkLine, 'markLine' );\nglobal.registerComponent( Tips, 'tips' );\nglobal.registerComponent( BarTgi, 'barTgi' );\nglobal.registerComponent( BarGuide, 'barGuide' );\nglobal.registerComponent( WaterMark, 'waterMark' );\nglobal.registerComponent( Cross, 'cross' );\nglobal.registerComponent( lineSchedu, 'lineSchedu' )\n\n//皮肤设定begin ---------------\n//如果数据库中有项目皮肤\nvar projectTheme = []; //从数据库中查询出来设计师设置的项目皮肤\nif( projectTheme && projectTheme.length ){\n    global.setGlobalTheme( projectTheme );\n};\n//皮肤设定end -----------------\n\nvar chartx = {\n    options : {}\n};\n\nfor( var p in global ){\n    chartx[ p ] = global[ p ];\n};\n\nexport default chartx;\n"],"names":["_","breaker","ArrayProto","Array","prototype","ObjProto","Object","FuncProto","Function","push","slice","concat","toString","hasOwnProperty","nativeForEach","forEach","nativeMap","map","nativeReduce","nativeFilter","filter","nativeEvery","every","nativeSome","some","nativeIndexOf","indexOf","nativeLastIndexOf","nativeIsArray","isArray","nativeKeys","keys","nativeBind","bind","shallowProperty","key","obj","MAX_ARRAY_INDEX","Math","pow","getLength","isArrayLike","collection","length","values","i","TypeError","has","call","each","iterator","context","compact","array","identity","select","results","value","index","list","name","isArguments","isFunction","isFinite","isNaN","parseFloat","isNumber","isBoolean","isNull","isEmpty","isString","isElement","nodeType","isObject","item","isSorted","max","sortedIndex","isWindow","window","flatten","input","shallow","output","apply","all","result","min","Infinity","computed","find","detect","any","without","difference","arguments","rest","contains","uniq","unique","initial","seen","collect","include","target","pluck","random","floor","shuffle","sample","n","guard","clone","last","rand","temp","extend","options","src","copy","deep","constructor","euclideanModulo","m","DEG2RAD","PI","RAD2DEG","degToRad","degrees","radToDeg","radians","normalizeTickInterval","interval","magnitude","normalized","multiples","correctFloat","num","toPrecision","getLinearTickPositions","arr","$maxPart","$cfg","undefined","scale","isInt","initMax","tempmin","tickInterval","log","LN10","ceil","pos","lastPos","roundedMin","roundedMax","tickPositions","pop","dataSection","section","$arr","axis","opt","dataOrg","layoutType","_opt","sectionHandler","dataSectionLayout","axisLength","_cellCount","_cellLength","waterLine","dataSectionGroup","middleweight","symmetric","origin","originPos","_originTrans","_min","_max","sort","posParseToInt","calculateProps","me","_getOriginTrans","getPosOfVal","val","ind","getIndexOfVal","parseInt","getPosOf","_dataSection","_getDataSection","abs","ai","al","Number","splice","unshift","_middleweight","_sort","vLen","_oneDimensional","_twoDimensional","il","d","varr","len","up_count","up_i","down_count","down_i","ii","_val","setDataSection","_getSortType","reverse","dsg","dMin","dMax","newDS","newDSG","l","preMiddleweight","middleVal","lastMW","dsgLen","groupLength","ds","amountABS","props","prop","_p","layoutData","_pos","_getLayoutDataOf","cellCount","_getCellCount","getValOfInd","_origin","maxGroupDisABS","h","valInd","getCellLength","toFixed","_getValOfInd","getIndexOfPos","org","_ind","cellLength","getCellLengthOfPos","parse2MatrixData","newArr","fields","fieldNum","row","f","_rowData","data","JSON","parse","stringify","dataFrame","getRowDataAt","_getRowDataAt","getRowDataOf","_getRowDataOf","getFieldData","_getFieldData","getDataOrg","range","start","end","dataZoom","total","a","o","field","b","bl","$field","format","totalList","lev","e","_format","newData","_fieldData","iil","fieldInTotal","expCount","p","matchNum","fd","RESOLUTION","devicePixelRatio","addOrRmoveEventHand","domHand","ieHand","document","eventDomFn","el","type","fn","eventFn","event","query","getElementById","offset","box","getBoundingClientRect","doc","ownerDocument","body","docElem","documentElement","clientTop","clientLeft","zoom","bound","right","left","clientWidth","top","pageYOffset","scrollTop","pageXOffset","scrollLeft","addEvent","removeEvent","pageX","clientX","pageY","clientY","createCanvas","_width","_height","id","canvas","createElement","style","position","width","height","setAttribute","createView","view","className","cssText","stageView","domView","appendChild","_colors","colors","set","get","cloneOptions","cloneData","is3dOpt","chartx3dCoordTypes","coord","getDefaultProps","dProps","propertys","default","create","_data","chart","_destroy","instances","chart_id","dom","getAttribute","_chart","destroy","off","dimension","componentModules","_getComponentModules","Chart","_getComponentModule","draw","on","setGlobalTheme","globalTheme","getGlobalTheme","getChart","chartId","resize","c","getOptions","chartPark_cid","userOptions","JsonSerialize","prefix","suffix","string","replace","decodeURIComponent","components","c_2d","c_3d","comps","modules","toLowerCase","_module","registerComponent","compModule","arg2","_comp","arg1","reg","colorRgb","hex","sColor","test","sColorNew","sColorChange","join","aRound","Cos","cos","Sin","sin","Polar","startAngle","allAngles","maxRadius","minRadius","percentage","currentAngle","angle","endAngle","cosV","sinV","midAngle","quadrant","percentFixedNum","outRadius","node","innerRadius","moveDis","enabled","radiusField","radiusValue","getAuadrant","outOffsetx","outOffsety","centerx","centery","outx","outy","edgex","edgey","orginPercentage","isRightSide","assign","labelField","groupField","label","radius","rowData","iNode","_isFiled","ang","angleRatio","_quadrant","r","angleList","points","_a","_r","point","getPointInRadianOfR","checkPointInRect","_tansRoot","x","y","arc","to","differenceR","radian","middleR","pi2","atan2","pi","maxNum","minNum","maxR","Event","evt","eventType","currentTarget","_stopPropagation","stopPropagation","_mouseEvents","_types","split","register","evts","Manager","_eventMap","_setEventEnable","hasInteractionEvent","t","types","_eventEnabled","_addEventListener","_type","listener","addResult","self","_removeEventListener","removeEventListenerByType","li","_removeEventListenerByType","_removeAllEventListeners","_dispatchEvent","parent","_hasEventListener","Dispatcher","params","eType","dispatchEvent","children","getObjectsUnderPoint","preHeartBeat","_heartBeatNum","pregAlpha","$model","globalAlpha","_hoverClass","hoverClone","canvax","getStage","activShape","_transform","getConcatenatedMatrix","_bufferStage","addChildAt","_globalAlpha","removeChildById","overFun","outFun","onceHandle","un","compareDocumentPosition","child","_hammerEventTypes","Handler","curPoints","curPointsTarget","_touching","_draging","_cursor","drag","move","init","$","__mouseHandler","__libHandler","root","updateViewOffset","viewOffset","curMousePoint","curMouseTarget","dragEnabled","toElement","relatedTarget","_dragEnd","fire","__getcurPointsTarget","cloneObject","_clone2hoverStage","_dragIngHander","__dispatchEventInChilds","_cursorHander","preventDefault","returnValue","notInRootView","oldObj","pointChkPriority","getChildInPoint","globalToLocal","toTarget","fromTarget","_setCursor","cursor","__getCanvaxPointInTouchs","__getChildInTouchs","curTouchs","touch","touchs","touchesTarget","childs","hasChild","ce","stagePoint","_dragDuplicate","getChildById","_dragPoint","_point","_noHeart","_moveStage","moveing","worldTransform","heartBeat","Utils","mainFrameRate","now","_pixelCtx","__emptyFunc","_devicePixelRatio","_UID","getUID","createId","charCode","charCodeAt","canvasSupport","getContext","initElement","FlashCanvas","getCssOrderArr","r1","r2","r3","r4","isWebGLSupported","contextOptions","stencil","WebGLRenderingContext","gl","getContextAttributes","checkOpt","Matrix","tx","ty","mtx","concatTransform","scaleX","scaleY","rotation","rotate","st","ct","sx","sy","translate","dx","dy","invert","toArray","transpose","out","Float32Array","mulVector","v","aa","ac","atx","ab","ad","aty","Point","arg","this","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","setTimeout","clearTimeout","_taskList","_requestAid","enabledAnimationFrame","Tween","update","currTaskList","shift","task","registFrame","$frame","destroyFrame","d_result","registTween","from","duration","onStart","onUpdate","onComplete","onStop","repeat","delay","easing","desc","tween","tid","animate","_isCompleteed","_isStoped","Easing","destroyTween","msg","stop","taskList","Observe","scope","stopRepeatAssign","pmodel","accessores","_Publics","model","Publics","loop","valueType","accessor","neo","preValue","complexValue","neoType","addColorStop","$watch","enumerable","defineProperties","defineProperty","__defineGetter__","__defineSetter__","descs","PI_2","RAD_TO_DEG","DEG_TO_RAD","RENDERER_TYPE","UNKNOWN","WEBGL","CANVAS","SHAPES","POLY","RECT","CIRC","ELIP","TRANSFORM_PROPS","STYLE_PROPS","_isInsideLine","lineWidth","x0","y0","x1","y1","_l","_b","_s","insideLine","line","shape","insideCatch","TARGET_FPMS","MIPMAP_TEXTURES","FILTER_RESOLUTION","SPRITE_BATCH_SIZE","RETINA_PREFIX","RENDER_OPTIONS","antialias","forceFXAA","autoResize","transparent","backgroundColor","clearBeforeRender","preserveDrawingBuffer","roundPixels","TRANSFORM_MODE","GC_MODE","GC_MAX_IDLE","GC_MAX_CHECK_COUNT","WRAP_MODE","SCALE_MODE","PRECISION","DisplayObject","_transformChange","stage","xyToInt","clip","_createContext","_trackList","_updateTransform","_tweens","cleanAnimates","isClip","optCtx","_contextATTRS","scaleOrigin","rotateOrigin","visible","_notWatch","_globalAlphaChange","convertType","myself","conf","isClone","newObj","text","graphics","container","cm","localToGlobal","bool","fromIndex","getIndex","toIndex","pcl","strokeStyle","inverseMatrix","Settings","containsPoint","_rect","getRect","inside","graphicsData","hasFill","hasLine","InsideLine","toContent","upFun","status","AnimationFrame","compFun","_removeTween","_cleanAnimates","removeChild","remove","DisplayObjectContainer","mouseChildren","getChildIndex","_afterAddChild","addChild","removeChildAt","_afterDelChild","getChildAt","boolen","oldIndex","getNumChildren","objs","Stage","ctx","stageRending","_isReady","SystemRenderer","app","settings","requestAid","_heartBeat","_preRenderTime","enterFrame","render","_convertCanvax","convertStages","convertShapes","startEnter","CanvasGraphicsRenderer","renderer","displayObject","fillStyle","fill","fillAlpha","lineAlpha","beginPath","renderPolygon","closed","stroke","rect","fillRect","strokeRect","closePath","w","kappa","ox","oy","xe","ye","xm","ym","moveTo","bezierCurveTo","close","j","lineTo","CanvasRenderer","CGR","convertStage","renderStage","setWorldTransform","_clear","_render","$MC","setTransform","isClipSave","_clip","save","_draw","restore","clearRect","autoRenderer","Application","_cid","offsetWidth","offsetHeight","viewObj","innerHTML","lastGetRO","webGL","_creatHoverStage","reSizeCanvas","s","insertBefore","initStage","drawImage","toDataURL","Sprite","GraphicsData","holes","cloneGraphicsData","arcToSegmentsCache","segmentToBezierCache","boundsOfCurveCache","_join","arcToSegments","toX","toY","rx","ry","large","sweep","rotateX","argsString","th","sinTh","cosTh","fromX","fromY","px","py","rx2","ry2","py2","px2","pl","sqrt","cx","cy","cx1","cy1","mTheta","calcVectorAngle","dtheta","segments","mDelta","mT","th3","segmentToBezier","th2","argsString2","costh2","sinth2","costh3","sinth3","cp1X","cp1Y","cp2X","cp2Y","ux","uy","vx","vy","ta","tb","drawArc","fx","fy","coords","rot","segs","segsNorm","getBoundsOfArc","bounds","getBoundsOfCurve","x2","y2","x3","y3","tvalues","t1","t2","b2ac","sqrtb2ac","jlen","mt","Rectangle","rectangle","Circle","Ellipse","normx","normy","Polygon","point_0","_isInsidePolygon_WindingNumber","wn","shiftP","cpX","cpY","cpX2","cpY2","path","dt","dt2","dt3","t3","Graphics","currentPath","dirty","clearDirty","_webGL","worldAlpha","tint","Bound","g","gd","synsStyle","drawShape","xa","ya","a1","b1","a2","b2","mm","dd","cc","tt","k1","k2","j1","j2","qx","qy","anticlockwise","startX","startY","theta","theta2","cTheta","sTheta","segMinus","remainder","real","minX","maxX","minY","maxY","RREC","rw","rh","updateLocalBounds","Shape","styleContext","lineCap","lineJoin","miterLimit","lineType","_context","initCompProperty","setStyle","clear","watch","dashLength","deltaX","deltaY","numDashes","Text","font","fontSize","fontWeight","fontFamily","textBaseline","textAlign","textDecoration","lineHeight","textBackgroundColor","_reNewline","fontProperts","_getFontDeclaration","getTextWidth","getTextHeight","_renderText","_getTextLines","_getTextWidth","_getTextHeight","textLines","_setContextStyle","_renderTextStroke","_renderTextFill","fontArr","fontP","_boundaries","lineHeights","heightOfLine","_getHeightOfLine","_renderTextLine","_getTopOffset","strokeDashArray","supportsLineDash","setLineDash","method","lineIndex","_renderChars","measureText","totalWidth","words","wordsWidth","widthDiff","numSpaces","spaceWidth","leftOffset","chars","maxWidth","currentLineWidth","Vector","_axes","distance","interpolate","p0","p1","p2","p3","v0","v1","isLoop","smoothFilter","ret","preVertor","iVtor","idx","w2","w3","rp","_cache","_radians","isDegrees","degreeToRadian","radianToDegree","degreeTo360","reAng","getIsgonPointList","pointList","dStep","beginDeg","deg","getSmoothPointList","pList","List","Len","_currList","isNotValibPoint","_getSmoothGroupPointList","currL","SmoothSpline","res","isValibPoint","BrokenLine","smooth","_Math","_pointList","nextPoint","dashedLineTo","drawCircle","Path","__parsePathData","paths","pathStr","_parseChildPathData","cs","RegExp","ca","cpx","cpy","str","charAt","cmd","ctlPtx","ctlPty","prevCmd","psi","fa","fs","command","pathArray","_parsePathData","quadraticCurveTo","Arc","Droplet","hr","vr","my","createPath","ps","drawEllipse","si","sl","Isogon","Line","Rect","G","drawRect","_buildRadiusPath","Sector","r0","clockwise","regAngle","isRing","myMath","Canvax","App","Display","Shapes","utils","_padding","global","_node","initData","padding","registEvent","setCoord_Graphs_Sp","__highModules","inited","_getPadding","compName","comp","keyField","_coord","getComponent","horizontal","_drawBeginHorizontal","bottom","_graphs","getComponents","graphsCount","completeNum","_g","_bindEvent","_drawEndHorizontal","graphsSprite","_horizontalGraphsText","_horizontalText","_el","__horizontal","sprite","paddingVal","paddingObj","_theme","coordSprite","clean","removeAttribute","_w","_h","trigger","preDataLenth","resetData","componentsReset","__cid","reset","graphs","getGraphs","getLegendData","legendItem","color","fieldsMap","isGraphsField","gopt","yAxis","show","hide","_tips","_setTipsInfo","_tipsPointerAtAllGraphs","induce","_tipsPointerHideAtAllGraphs","eventInfo","graph","triggerEvent","getTipsInfoHandler","nodes","getNodesAt","tipsPointerOf","tipsPointerHideOf","component","margin","coorBase","defaultProps","_axiss","axisExp","fieldInd","axisType","fieldsArr","getAxiss","_axis","_set","clone_fields","getTheme","getAxis","maps","fieldMap","enabledFields","bamboo","getFieldMapOf","v_f","changeFieldEnabled","exp","axiss","expFs","inFs","Component","detail","documentation","insertText","_children","polar","numAddSymbol","$n","$s","symbol","String","getPath","M","L","Z","xAxis","title","shapeType","fontColor","_title","tickLine","lineLength","axisLine","evade","isH","rotaion","_formatTextSection","_textElements","animation","trimLayout","_txts","_axisLine","_initHandle","rulesSprite","_getFormatText","txt","_getTitle","_setXAxisHeight","setAxisLength","_trimXAxis","_widget","setX","setY","resetDataOrg","resetText","_maxTextHeight","textWidth","textHeight","sinR","cosR","tmpData","_trimLayoutData","labelVisibleInd","xNodeId","xNode","textContext","_text_x","_txt","lineContext","_line","_checkOver","rootPaddingRight","layoutItem","checkOver","curr","next","nextWidth","currWidth","next_left_x","curr_right_x","yMaxHeight","maxW","align","_setYaxisWidth","_getYAxisDisLine","_trimYAxis","_preShowInd","disMin","disMax","dis","posy","yNode","_tickLine","aniFrom","lineX","_getStyle","txtX","_originX","descartesGrid","xDirection","yDirection","alpha","xAxisSp","yAxisSp","removeAllChildren","_yAxis","yGroupSp","yGroupHeight","groupRect","_xAxis","_yAxisLeft","_yAxisRight","_grid","setDefaultOpt","coordOpt","grid","_nyarr","yopt","graphsArr","yAxisAlign","optsYaxisObj","_lys","_rys","_initModules","setFieldsMap","dataTrigger","_xAxisDataFrame","getAxisDataFrame","yAxisDataFrame","_resetXY_axisLine_pos","_num","_yAxisW","_yAxisRW","_initInduce","_horizontal","xAxisPosY","yAxisPosX","Grid","xAxisConstructor","yAxisLeft","yAxisRight","yAxisLeftDataFrame","yAxisRightDataFrame","yAxisConstructor","setFieldEnabled","rAxis","getEnabledFieldsOf","induceX","getNodeInfoOfX","xaxisExp","yaxisExp","_iNode","_value","polarGrid","ring","ray","getROfNum","getPointsOfR","_ring","ringType","aAxis","arrs","_fs","_aAxisScaleSp","_computeAttr","_getRDataSection","_setAAxisAngleList","_drawAAxis","scaleXY","rootWidth","rootHeight","vw","vh","sinTop","sinBottom","cosLeft","cosRight","angles","allAngle","lastAngle","_sin","_cos","distanceToLine","anglesRadius","quadrantLines","lines","_distances","_rs","distanceT","_filterPointsInRect","distanceR","distanceB","distanceL","arcs","nextInd","getRadianInPoint","_checkArcInRect","_checkPointInRect","aAxisArr","beginAngle","_getTextAlignForPoint","aAxisInd","getAAxisIndOf","aLen","nextAngle","aNode","getAxisNodeOf","squareRange","GraphsBase","_arr","BarGraphs","enabledField","absolute","proportion","minWidth","minHeight","_count","xDis","verticalAlign","offsetX","offsetY","_fillStyle","triggerEventType","inds","_barsLen","txtsSp","barsSp","_nodesInfoList","nodeData","_flattenField","lineargradient","_style","createLinearGradient","rectHeight","cellWidth","ceilWidth2","h_groupSp","_bar","sp","_label","_trimGraphs","_dataLen","_preDataLen","preDataLen","groupsLen","itemW","h_group","groupH","groupRegion","groupRegionWidth","_getGroupRegionStyle","unselectAt","selectAt","txtGroupH","iGroup","iLay","_getColor","CanvasGradient","_middleStyle","finalPos","round","rectCtx","yOriginPoint","isLeaf","radiusR","rectEl","barId","nodeElement","_formatc","textCtx","_textPos","_getTextPos","_getTextAlign","textEl","textId","grow","filterEnabledFields","_groupRegionStyle","setEnabledField","layoutGraphs","hLen","preHLen","_preHLenOver","barW","_getBarWidth","barDis","disLeft","hData","tempBarData","vSectionData","vCount","team","ti","_getTargetField","getPoint","_x","getAxisOriginPoint","_getFromY","preData","preY","preVal","yBaseNumber","vInd","bar","isNegative","optsions","barCount","group","_tweenObj","_index","rowDatas","LineGraphsGroup","corner","area","_currPointList","_bline","_growTween","_getProp","_getLineStrokeStyle","_nodesInfo","getNodeInfoAt","$index","_getPointList","plen","cplen","_createNodes","_createTexts","_grow","_update","_area","_fillLine","_getFillStyle","_circles","_circle","_labels","_text","_checkTextPos","_getPointPosStr","xory","firstNode","_getFirstNode","firstY","bline","_firstNode","fill_gradient","topP","rgb","rgba0","rgba1","bottomP","circle","pre","fillPath","_currPath","getOnePath","LineGraphs","groups","_setGroupsForYfield","_lineData","gi","getGroupIndex","Group","insert","ScatGraphs","normalR","focus","aniOrigin","_rData","_rMaxValue","_rMinValue","_shapesp","_textsp","_linesp","tmplData","dataLen","nodeLayoutData","fieldColor","focused","selected","_setR","_setFillStyle","_setStrokeStyle","_setLineWidth","_setNodeType","_setText","rVal","_getNodeContext","_nodeElement","hover","focusAt","unfocusAt","_lineContext","_labelContext","_getTextContext","labelElement","textPoint","_getTextPosition","_setCtxAniOrigin","originPoint","getOriginPos","_getCircleContext","_textPoint","nctx","Pie","domContainer","textSp","sectorsSp","selectedSp","sectors","textMaxCount","textList","completed","destroyLabel","completedNum","sec","secData","_startWidgetLabel","sector","focusEnabled","focusOf","unfocusOf","selectEnabled","_focusTigger","addCheckedSec","cancelCheckedSec","secc","selectedR","selectedAlpha","_selectedSec","_getAngleTime","selectedSec","_hideGrowLabel","process","_startAngle","_endAngle","_r0","lastEndAngle","lastIndex","lastSecc","callee","_showGrowLabel","indexs","lmin","rmin","isEnd","ySpaceInfo","count","minTxtDis","textOffsetX","currentIndex","currentY","adjustX","txtDis","bwidth","bheight","bx","by","yBound","remainingNum","remainingY","isleft","isup","itemData","outCircleRadius","currentX","globalX","globalY","textTxt","labelText","branchTxt","textEle","rMinPercentage","lMinPercentage","rMinY","lMinY","quadrantsOrder","quadrantInfo","widgetInfo","startQuadrant","endQuadrant","cur","overflowIndexs","sortedIndexs","_widgetLabel","lab","visibility","PieGraphs","_dataHandle","_computerProps","_pie","_setEnabled","_color","limitAngle","maxRval","minRval","fixedPercentage","_rr","labelDirection","_getLabelText","_field","legendData","selectOf","unselectOf","RadarGraphs","_strokeStyle","polyCtx","_poly","_nodes","eventNode","def","noop","dispatch","Error","Dispatch","parseTypenames","typenames","trim","typename","T","that","args","cloudRadians","cw","ch","cloud","size","cloudText","cloudFont","cloudFontSize","fontStyle","cloudFontNormal","cloudRotate","cloudPadding","spiral","archimedeanSpiral","timeInterval","timer","cloudCanvas","functor","contextAndRatio","board","zeroArray","tags","weight","clearInterval","setInterval","step","cloudSprite","hasText","place","cloudBounds","ratio","getImageData","tag","perimeter","maxDelta","dxdy","cloudCollide","collideRects","sw","lx","msx","spirals","di","maxh","sr","cr","wcr","wsr","hcr","hsr","fillText","strokeText","xoff","yoff","pixels","w32","seenRow","k","b0","rectangularSpiral","sign","archimedean","rectangular","CloudGraphs","minFontSize","maxFontSize","_maxFontSizeVal","_minFontSizeVal","_drawGraphs","df","layout","cloudLayout","getDaraFrameIndOfVal","_getFontSize","_getFontColor","_getRotate","tagTxt","PlanetGroup","groupLen","rRange","minR","selectInds","sortField","pit","planets","maxRingNum","ringNum","_coordMaxDis","getMaxDisToViewOfOrigin","planetLayoutData","iRing","iPlanet","ringInd","__index__","planet","_rings","center","getRadiansAtR","minRadianItem","atan","pits","allplanetsMax","minRadian","asin","_adiff","_getDiffRadian","_arc_count","hasRadish","middle","preAllCount","targetPit","_start","_to","_ringCtx","_ringSp","_getRProp","_transR","_randomTransR","_randomAngle","_randomRadian","_lineAlpha","_lineWidth","circleCtx","planetIndInRing","_labelCtx","_labelWidth","_labelHeight","circleR","circleCenter","setPositionToBottom","__rValMax","__rValMin","_planet","getPlanetAt","PlanetGraphs","groupDataFrames","_ringGroups","rings","rays","gridSp","_dataGroupHandle","_drawGroups","_drawCenter","_circleMaxR","groupRStart","_getMaxR","toR","_drawBack","_center","_centerTxt","_diffR","_scale","_getBackProp","itemAng","_clipRect","clipTo","scaleInd","groupFieldInd","titles","_dmap","getAgreeNodeData","rg","getSelectedNodes","rows","FunnelGraphs","_maxVal","_minVal","maxNodeWidth","minNodeWidth","minVal","_computerAttr","ld","_getNodeWidth","middlePoint","_getPoints","nextLayoutData","preLayoutData","topY","bottomY","bottomWidth","topWidth","_polygon","SMALL","intersectionArea","circles","stats","intersectionPoints","getIntersectionPoints","innerPoints","containedInCircles","arcArea","polygonArea","getCenter","midPoint","parentIndex","angleDiff","circleArea","smallest","disjoint","intersect","circleCircleIntersection","acos","circleOverlap","w1","venn","areas","parameters","maxIterations","initialLayout","bestInitialLayout","loss","lossFunction","addMissingAreas","setids","setid","solution","nelderMead","totalFunctionCalls","current","positions","distanceFromIntersectArea","overlap","bisect","ids","pairs","sets","getDistanceMatrices","distances","zerosM","constraints","constrainedMDSGradient","fxprime","xi","yi","xj","yj","dij","constraint","squaredDistance","delta","greedyLayout","constrained","constrainedMDSLayout","constrainedLoss","greedyLoss","restarts","matrices","norm","norm2","best","zeros","conjugateGradient","history","setOverlaps","rowid","mostOverlapped","sortOrder","positioned","isPositioned","positionSet","setIndex","d1","d2","extraPoints","bestLoss","bestPoint","localLoss","overlaps","getCircles","indices","orientateCircles","orientation","orientationOrder","largestX","largestY","dist","slope","disjointCluster","union","xRoot","yRoot","maxDistance","disjointClusters","getBoundingBox","minMax","hi","lo","xRange","yRange","normalizeSolution","previous","clusters","returnBounds","spacing","addCluster","cluster","xOffset","yOffset","centreing","scaleSolution","console","xScaling","yScaling","scaling","scaled","VennGraphs","valueField","showInter","vennData","_dataCircleLen","_dataLabelLen","_dataPathLen","venn_circles","venn_paths","venn_labels","_vennData","layoutFunction","textCentres","computeTextCentres","circleInd","pathInd","labelPosition","nodeId","_path","intersectionAreaPath","defColor","labelInd","_shape","isNewShape","_textContext","getOverlappingCircles","circleids","circleid","overlapped","areaids","exclude","interior","exterior","centre","computeTextCentre","circleMargin","minErrorDelta","valid","areaStats","circlePath","wide","_rebind","source","merge","arrays","merged","Hierarchy","layout_hierarchySort","layout_hierarchyChildren","layout_hierarchyValue","hierarchy","stack","depth","layout_hierarchyVisitAfter","revalue","layout_hierarchyVisitBefore","layout_hierarchyRebind","object","rebind","links","layout_hierarchyLinks","nodes2","partition","sunburstGraphs","parentField","blurAlpha","dataGroup","_getDataGroupOfDepth","Partition","_treeData","_tansTreeData","treeData","keyData","valueData","parentData","findChild","ki","parentKey","sectorContext","_focus","_unfocus","_focusChildren","_focusParent","sankey","nodeWidth","nodePadding","iterations","computeNodeLinks","computeNodeValues","computeNodeBreadths","computeNodeDepths","computeLinkDepths","relayout","d3_interpolateNumber","link","curvature","sourceLinks","targetLinks","d3_sum","d3_min","remainingNodes","nextNodes","moveSinksRight","scaleNodeBreadths","kx","d3_class","ctor","properties","d3_nest","nest","sortKeys","sortValues","rollup","mapType","keyValue","setter","valuesByKey","d3_Map","entries","sortKey","keyMap","d3_map","order","d3_map_proto","d3_map_zero","d3_map_has","d3_map_escape","d3_map_remove","d3_map_keys","d3_map_unescape","d3_map_size","empty","d3_map_empty","d3_ascending","NaN","nodesByBreadth","initializeNodeDepth","resolveCollisions","relaxRightToLeft","relaxLeftToRight","ky","breadth","weightedSource","weightedTarget","ascendingDepth","ascendingTargetDepth","ascendingSourceDepth","sankeyGraphs","_links","keyDatas","valueDatas","parentFields","nodeMap","nodeNames","sankeyLayout","_drawNodes","_drawLinks","_drawLabels","nodeColor","nodeEl","linkColor","linkData","Progress","startRadian","endRadian","startOutPoint","endOutPoint","startInnerPoint","endInnerPoint","large_arc_flag","pathElement","Trigger","Legend","_getLegendData","icon","onChecked","onUnChecked","info","_labelColor","direction","widget","getSizeAndOrigin","setPosition","viewWidth","viewHeight","maxItemWidth","isOver","_icon","_getInfoHandler","txtW","spItemC","eventEnabled","btnOut","btnHeight","btnWidth","bg","underline","_cloneChart","axisLayoutType","dragIng","dragEnd","disPart","_btnLeft","_btnRight","_underline","noSkip","dataZoomBg","dataZoomBtns","chartConstructor","cloneEl","cloneNode","graphsOpt","thumbChart","coordInfo","updateChecked","_setDataZoomOpt","_getCloneChart","_computeAttrs","_setLines","setZoomBg","_preCount","_preStart","_preEnd","_getDisPart","setLines","bgRectCtx","_bgRect","underlineCtx","_getRangeEnd","_addLine","btnLeftCtx","rangeRect","_setRange","btnRightCtx","rangeRectCtx","linesLeft","_addLines","linesRight","linesCenter","_end","_preDis","btnLeft","btnRight","btnCenter","$o","__graphssp","graphssp","_coor","parentNode","MarkLine","markTo","yVal","_calculateProps","$yAxis","_fdata","setWaterLine","_fstyle","lineStrokeStyle","textFillStyle","_getYPos","_getLabel","_setTxtPos","_getYVal","Tips","tipDomContainer","cW","cH","dW","dH","borderRadius","content","_tipDom","positionInRange","pointer","pointerAnim","_tipsPointer","_setContent","_setPosition","toFront","_tipsPointerShow","_hideDialogTips","_tipsPointerMove","_tipsPointerHide","_removeContent","_checkX","_checkY","tipxContent","_getContent","_creatTipDom","tipsContent","_getDefaultContent","regionWidth","__animation","__targetX","barTgi","barField","barDatas","standardVal","tgi","barData","_tgiLine","theme","waterMark","spripte","textW","textH","rowCount","coluCount","_textEl","aimPoint","_hLine","_vLine","lineDatas","lineField","timeFontSize","timeFontColor","listFontSize","listFontColor","lineGraphs","time","_getNodeY","_txtSp","txtHeight","txtWidth","_list","tsTop","appHeight","coordHeight","Bar","Scat","Radar","Cloud","Planet","Funnel","Venn","Sunburst","Sankey","Theme","DataZoom","BarTgi","BarGuide","WaterMark","Cross","lineSchedu","projectTheme","chartx"],"mappings":"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"}